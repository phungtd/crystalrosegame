const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browser-ponyfill-CS-IC1Gz.js","./phaser-B6ONz1sv.js"])))=>i.map(i=>d[i]);
var __defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),_a;import{r as requirePhaser,g as getDefaultExportFromCjs}from"./phaser-B6ONz1sv.js";function makeMap(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return e=>e in t}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const EMPTY_OBJ={},EMPTY_ARR=[],NOOP$1=()=>{},NO=()=>!1,isOn=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend$1=Object.assign,remove=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$2.call(e,t),isArray$1=Array.isArray,isMap=e=>"[object Map]"===toTypeString(e),isSet=e=>"[object Set]"===toTypeString(e),isFunction$1=e=>"function"==typeof e,isString$2=e=>"string"==typeof e,isSymbol=e=>"symbol"==typeof e,isObject$1=e=>null!==e&&"object"==typeof e,isPromise$1=e=>(isObject$1(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>"[object Object]"===toTypeString(e),isIntegerKey=e=>isString$2(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction((e=>e.replace(camelizeRE,((e,t)=>t?t.toUpperCase():"")))),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction((e=>e.replace(hyphenateRE,"-$1").toLowerCase())),capitalize=cacheStringFunction((e=>e.charAt(0).toUpperCase()+e.slice(1))),toHandlerKey=cacheStringFunction((e=>e?`on${capitalize(e)}`:"")),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},def=(e,t,i,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:i})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function normalizeStyle(e){if(isArray$1(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],n=isString$2(s)?parseStringStyle(s):normalizeStyle(s);if(n)for(const e in n)t[e]=n[e]}return t}if(isString$2(e)||isObject$1(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach((e=>{if(e){const i=e.split(propertyDelimiterRE);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}function normalizeClass(e){let t="";if(isString$2(e))t=e;else if(isArray$1(e))for(let i=0;i<e.length;i++){const s=normalizeClass(e[i]);s&&(t+=s+" ")}else if(isObject$1(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||""===e}const isRef$1=e=>!(!e||!0!==e.__v_isRef),toDisplayString=e=>isString$2(e)?e:null==e?"":isArray$1(e)||isObject$1(e)&&(e.toString===objectToString||!isFunction$1(e.toString))?isRef$1(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,i],s)=>(e[stringifySymbol(t,s)+" =>"]=i,e)),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>stringifySymbol(e)))}:isSymbol(t)?stringifySymbol(t):!isObject$1(t)||isArray$1(t)||isPlainObject$1(t)?t:String(t),stringifySymbol=(e,t="")=>{var i;return isSymbol(e)?`Symbol(${null!=(i=e.description)?i:t})`:e};let activeEffectScope,activeSub;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,i;for(this._active=!1,t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||batch(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t)return e.next=batchedComputed,void(batchedComputed=e);e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;batchedSub;){let i=batchedSub;for(batchedSub=void 0;i;){const s=i.next;if(i.next=void 0,i.flags&=-9,1&i.flags)try{i.trigger()}catch(t){e||(e=t)}i=s}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,i=e.depsTail,s=i;for(;s;){const e=s.prevDep;-1===s.version?(s===i&&(i=e),removeSub(s),removeDep(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=e}e.deps=t,e.depsTail=i}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===globalVersion)return;e.globalVersion=globalVersion;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!isDirty(e))return void(e.flags&=-3);const i=activeSub,s=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const i=e.fn(e._value);(0===t.version||hasChanged(i,e._value))&&(e._value=i,t.version++)}catch(n){throw t.version++,n}finally{activeSub=i,shouldTrack=s,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:i,prevSub:s,nextSub:n}=e;if(s&&(s.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=s,e.nextSub=void 0),i.subs===e&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let e=i.computed.deps;e;e=e.nextDep)removeSub(e,!0)}t||--i.sc||!i.map||i.map.delete(i.key)}function removeDep(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=void 0===e||e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=activeSub;activeSub=void 0;try{t()}finally{activeSub=e}}}let globalVersion=0;class Link{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==activeSub)t=this.activeLink=new Link(activeSub,this),activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,addSub(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=e)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)addSub(e)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,i){if(shouldTrack&&activeSub){let t=targetMap.get(e);t||targetMap.set(e,t=new Map);let s=t.get(i);s||(t.set(i,s=new Dep),s.map=t,s.key=i),s.track()}}function trigger(e,t,i,s,n,a){const r=targetMap.get(e);if(!r)return void globalVersion++;const o=e=>{e&&e.trigger()};if(startBatch(),"clear"===t)r.forEach(o);else{const n=isArray$1(e),a=n&&isIntegerKey(i);if(n&&"length"===i){const e=Number(s);r.forEach(((t,i)=>{("length"===i||i===ARRAY_ITERATE_KEY||!isSymbol(i)&&i>=e)&&o(t)}))}else switch((void 0!==i||r.has(void 0))&&o(r.get(i)),a&&o(r.get(ARRAY_ITERATE_KEY)),t){case"add":n?a&&o(r.get("length")):(o(r.get(ITERATE_KEY)),isMap(e)&&o(r.get(MAP_KEY_ITERATE_KEY)));break;case"delete":n||(o(r.get(ITERATE_KEY)),isMap(e)&&o(r.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&o(r.get(ITERATE_KEY))}}endBatch()}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator$1(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map((e=>isArray$1(e)?reactiveReadArray(e):e)))},entries(){return iterator$1(this,"entries",(e=>(e[1]=toReactive(e[1]),e)))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,(e=>e.map(toReactive)),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator$1(this,"values",toReactive)}};function iterator$1(e,t,i){const s=shallowReadArray(e),n=s[t]();return s===e||isShallow(e)||(n._next=n.next,n.next=()=>{const e=n._next();return e.value&&(e.value=i(e.value)),e}),n}const arrayProto=Array.prototype;function apply(e,t,i,s,n,a){const r=shallowReadArray(e),o=r!==e&&!isShallow(e),l=r[t];if(l!==arrayProto[t]){const t=l.apply(e,a);return o?toReactive(t):t}let h=i;r!==e&&(o?h=function(t,s){return i.call(this,toReactive(t),s,e)}:i.length>2&&(h=function(t,s){return i.call(this,t,s,e)}));const d=l.call(r,h,s);return o&&n?n(d):d}function reduce(e,t,i,s){const n=shallowReadArray(e);let a=i;return n!==e&&(isShallow(e)?i.length>3&&(a=function(t,s,n){return i.call(this,t,s,n,e)}):a=function(t,s,n){return i.call(this,t,toReactive(s),n,e)}),n[t](a,...s)}function searchProxy(e,t,i){const s=toRaw(e);track(s,"iterate",ARRAY_ITERATE_KEY);const n=s[t](...i);return-1!==n&&!1!==n||!isProxy(i[0])?n:(i[0]=toRaw(i[0]),s[t](...i))}function noTracking(e,t,i=[]){pauseTracking(),startBatch();const s=toRaw(e)[t].apply(e,i);return endBatch(),resetTracking(),s}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(isSymbol));function hasOwnProperty$1(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if("__v_skip"===t)return e.__v_skip;const s=this._isReadonly,n=this._isShallow;if("__v_isReactive"===t)return!s;if("__v_isReadonly"===t)return s;if("__v_isShallow"===t)return n;if("__v_raw"===t)return i===(s?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=isArray$1(e);if(!s){let e;if(a&&(e=arrayInstrumentations[t]))return e;if("hasOwnProperty"===t)return hasOwnProperty$1}const r=Reflect.get(e,t,isRef(e)?e:i);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))?r:(s||track(e,"get",t),n?r:isRef(r)?a&&isIntegerKey(t)?r:r.value:isObject$1(r)?s?readonly(r):reactive(r):r)}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,i,s){let n=e[t];if(!this._isShallow){const t=isReadonly(n);if(isShallow(i)||isReadonly(i)||(n=toRaw(n),i=toRaw(i)),!isArray$1(e)&&isRef(n)&&!isRef(i))return!t&&(n.value=i,!0)}const a=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),r=Reflect.set(e,t,i,isRef(e)?e:s);return e===toRaw(s)&&(a?hasChanged(i,n)&&trigger(e,"set",t,i):trigger(e,"add",t,i)),r}deleteProperty(e,t){const i=hasOwn(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&trigger(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return isSymbol(t)&&builtInSymbols.has(t)||track(e,"has",t),i}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,i){return function(...s){const n=this.__v_raw,a=toRaw(n),r=isMap(a),o="entries"===e||e===Symbol.iterator&&r,l="keys"===e&&r,h=n[e](...s),d=i?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:e,done:t}=h.next();return t?{value:e,done:t}:{value:o?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function createInstrumentations(e,t){const i={get(i){const s=this.__v_raw,n=toRaw(s),a=toRaw(i);e||(hasChanged(i,a)&&track(n,"get",i),track(n,"get",a));const{has:r}=getProto(n),o=t?toShallow:e?toReadonly:toReactive;return r.call(n,i)?o(s.get(i)):r.call(n,a)?o(s.get(a)):void(s!==n&&s.get(i))},get size(){const t=this.__v_raw;return!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)},has(t){const i=this.__v_raw,s=toRaw(i),n=toRaw(t);return e||(hasChanged(t,n)&&track(s,"has",t),track(s,"has",n)),t===n?i.has(t):i.has(t)||i.has(n)},forEach(i,s){const n=this,a=n.__v_raw,r=toRaw(a),o=t?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",ITERATE_KEY),a.forEach(((e,t)=>i.call(s,o(e),o(t),n)))}};return extend$1(i,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(e){t||isShallow(e)||isReadonly(e)||(e=toRaw(e));const i=toRaw(this);return getProto(i).has.call(i,e)||(i.add(e),trigger(i,"add",e,e)),this},set(e,i){t||isShallow(i)||isReadonly(i)||(i=toRaw(i));const s=toRaw(this),{has:n,get:a}=getProto(s);let r=n.call(s,e);r||(e=toRaw(e),r=n.call(s,e));const o=a.call(s,e);return s.set(e,i),r?hasChanged(i,o)&&trigger(s,"set",e,i):trigger(s,"add",e,i),this},delete(e){const t=toRaw(this),{has:i,get:s}=getProto(t);let n=i.call(t,e);n||(e=toRaw(e),n=i.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return n&&trigger(t,"delete",e,void 0),a},clear(){const e=toRaw(this),t=0!==e.size,i=e.clear();return t&&trigger(e,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach((s=>{i[s]=createIterableMethod(s,e,t)})),i}function createInstrumentationGetter(e,t){const i=createInstrumentations(e,t);return(t,s,n)=>"__v_isReactive"===s?!e:"__v_isReadonly"===s?e:"__v_raw"===s?t:Reflect.get(hasOwn(i,s)&&s in t?i:t,s,n)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,i,s,n){if(!isObject$1(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const a=n.get(e);if(a)return a;const r=getTargetType(e);if(0===r)return e;const o=new Proxy(e,2===r?s:i);return n.set(e,o),o}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!(!e||!e.__v_isReactive)}function isReadonly(e){return!(!e||!e.__v_isReadonly)}function isShallow(e){return!(!e||!e.__v_isShallow)}function isProxy(e){return!!e&&!!e.__v_raw}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject$1(e)?reactive(e):e,toReadonly=e=>isObject$1(e)?readonly(e):e;function isRef(e){return!!e&&!0===e.__v_isRef}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||isShallow(e)||isReadonly(e);e=i?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=i?e:toReactive(e),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,i)=>"__v_raw"===t?e:unref(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const n=e[t];return isRef(n)&&!isRef(i)?(n.value=i,!0):Reflect.set(e,t,i,s)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(8&this.flags)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(e,t,i=!1){let s,n;return isFunction$1(e)?s=e:(s=e.get,n=e.set),new ComputedRefImpl(s,n,i)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,i=activeWatcher){if(i){let t=cleanupMap.get(i);t||cleanupMap.set(i,t=[]),t.push(e)}}function watch$1(e,t,i=EMPTY_OBJ){const{immediate:s,deep:n,once:a,scheduler:r,augmentJob:o,call:l}=i,h=e=>n?e:isShallow(e)||!1===n||0===n?traverse(e,1):traverse(e);let d,c,u,p,g=!1,m=!1;if(isRef(e)?(c=()=>e.value,g=isShallow(e)):isReactive(e)?(c=()=>h(e),g=!0):isArray$1(e)?(m=!0,g=e.some((e=>isReactive(e)||isShallow(e))),c=()=>e.map((e=>isRef(e)?e.value:isReactive(e)?h(e):isFunction$1(e)?l?l(e,2):e():void 0))):c=isFunction$1(e)?t?l?()=>l(e,2):e:()=>{if(u){pauseTracking();try{u()}finally{resetTracking()}}const t=activeWatcher;activeWatcher=d;try{return l?l(e,3,[p]):e(p)}finally{activeWatcher=t}}:NOOP$1,t&&n){const e=c,t=!0===n?1/0:n;c=()=>traverse(e(),t)}const f=getCurrentScope(),v=()=>{d.stop(),f&&f.active&&remove(f.effects,d)};if(a&&t){const e=t;t=(...t)=>{e(...t),v()}}let b=m?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const y=e=>{if(1&d.flags&&(d.dirty||e))if(t){const e=d.run();if(n||g||(m?e.some(((e,t)=>hasChanged(e,b[t]))):hasChanged(e,b))){u&&u();const i=activeWatcher;activeWatcher=d;try{const i=[e,b===INITIAL_WATCHER_VALUE?void 0:m&&b[0]===INITIAL_WATCHER_VALUE?[]:b,p];l?l(t,3,i):t(...i),b=e}finally{activeWatcher=i}}}else d.run()};return o&&o(y),d=new ReactiveEffect(c),d.scheduler=r?()=>r(y,!1):y,p=e=>onWatcherCleanup(e,!1,d),u=d.onStop=()=>{const e=cleanupMap.get(d);if(e){if(l)l(e,4);else for(const t of e)t();cleanupMap.delete(d)}},t?s?y(!0):b=d.run():r?r(y.bind(null,!0),!0):d.run(),v.pause=d.pause.bind(d),v.resume=d.resume.bind(d),v.stop=v,v}function traverse(e,t=1/0,i){if(t<=0||!isObject$1(e)||e.__v_skip)return e;if((i=i||new Set).has(e))return e;if(i.add(e),t--,isRef(e))traverse(e.value,t,i);else if(isArray$1(e))for(let s=0;s<e.length;s++)traverse(e[s],t,i);else if(isSet(e)||isMap(e))e.forEach((e=>{traverse(e,t,i)}));else if(isPlainObject$1(e)){for(const s in e)traverse(e[s],t,i);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&traverse(e[s],t,i)}return e}const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const i=stack.length?stack[stack.length-1].component:null,s=i&&i.appContext.config.warnHandler,n=getComponentTrace();if(s)callWithErrorHandling(s,i,11,[e+t.map((e=>{var t,i;return null!=(i=null==(t=e.toString)?void 0:t.call(e))?i:JSON.stringify(e)})).join(""),i&&i.proxy,n.map((({vnode:e})=>`at <${formatComponentName(i,e.type)}>`)).join("\n"),n]);else{const i=[`[Vue warn]: ${e}`,...t];n.length&&i.push("\n",...formatTrace(n)),console.warn(...i)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const i=t[0];i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function formatTrace(e){const t=[];return e.forEach(((e,i)=>{t.push(...0===i?[]:["\n"],...formatTraceEntry(e))})),t}function formatTraceEntry({vnode:e,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",s=!!e.component&&null==e.component.parent,n=` at <${formatComponentName(e.component,e.type,s)}`,a=">"+i;return e.props?[n,...formatProps(e.props),a]:[n+a]}function formatProps(e){const t=[],i=Object.keys(e);return i.slice(0,3).forEach((i=>{t.push(...formatProp(i,e[i]))})),i.length>3&&t.push(" ..."),t}function formatProp(e,t,i){return isString$2(t)?(t=JSON.stringify(t),i?t:[`${e}=${t}`]):"number"==typeof t||"boolean"==typeof t||null==t?i?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),i?t:[`${e}=Ref<`,t,">"]):isFunction$1(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),i?t:[`${e}=`,t])}function callWithErrorHandling(e,t,i,s){try{return s?e(...s):e()}catch(n){handleError(n,t,i)}}function callWithAsyncErrorHandling(e,t,i,s){if(isFunction$1(e)){const n=callWithErrorHandling(e,t,i,s);return n&&isPromise$1(n)&&n.catch((e=>{handleError(e,t,i)})),n}if(isArray$1(e)){const n=[];for(let a=0;a<e.length;a++)n.push(callWithAsyncErrorHandling(e[a],t,i,s));return n}}function handleError(e,t,i,s=!0){const n=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||EMPTY_OBJ;if(t){let s=t.parent;const n=t.proxy,r=`https://vuejs.org/error-reference/#runtime-${i}`;for(;s;){const t=s.ec;if(t)for(let i=0;i<t.length;i++)if(!1===t[i](e,n,r))return;s=s.parent}if(a)return pauseTracking(),callWithErrorHandling(a,null,10,[e,n,r]),void resetTracking()}logError(e,i,n,s,r)}function logError(e,t,i,s=!0,n=!1){if(n)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,i=queue.length;for(;t<i;){const s=t+i>>>1,n=queue[s],a=getId(n);a<e||a===e&&2&n.flags?t=s+1:i=s}return t}function queueJob(e){if(!(1&e.flags)){const t=getId(e),i=queue[queue.length-1];!i||!(2&e.flags)&&t>=getId(i)?queue.push(e):queue.splice(findInsertionIndex(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&-1===e.id?activePostFlushCbs.splice(postFlushIndex+1,0,e):1&e.flags||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,i=flushIndex+1){for(;i<queue.length;i++){const t=queue[i];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;queue.splice(i,1),i--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort(((e,t)=>getId(e)-getId(t)));if(pendingPostFlushCbs.length=0,activePostFlushCbs)return void activePostFlushCbs.push(...e);for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const e=activePostFlushCbs[postFlushIndex];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>null==e.id?2&e.flags?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,i){if(!t)return e;if(e._n)return e;const s=(...i)=>{s._d&&setBlockTracking(-1);const n=setCurrentRenderingInstance(t);let a;try{a=e(...i)}finally{setCurrentRenderingInstance(n),s._d&&setBlockTracking(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function withDirectives(e,t){if(null===currentRenderingInstance)return e;const i=getComponentPublicInstance(currentRenderingInstance),s=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[e,a,r,o=EMPTY_OBJ]=t[n];e&&(isFunction$1(e)&&(e={mounted:e,updated:e}),e.deep&&traverse(a),s.push({dir:e,instance:i,value:a,oldValue:void 0,arg:r,modifiers:o}))}return e}function invokeDirectiveHook(e,t,i,s){const n=e.dirs,a=t&&t.dirs;for(let r=0;r<n.length;r++){const o=n[r];a&&(o.oldValue=a[r].value);let l=o.dir[s];l&&(pauseTracking(),callWithAsyncErrorHandling(l,i,8,[e.el,o,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport;function setTransitionHooks(e,t){6&e.shapeFlag&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function setRef(e,t,i,s,n=!1){if(isArray$1(e))return void e.forEach(((e,a)=>setRef(e,t&&(isArray$1(t)?t[a]:t),i,s,n)));if(isAsyncWrapper(s)&&!n)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&setRef(e,t,i,s.component.subTree));const a=4&s.shapeFlag?getComponentPublicInstance(s.component):s.el,r=n?null:a,{i:o,r:l}=e,h=t&&t.r,d=o.refs===EMPTY_OBJ?o.refs={}:o.refs,c=o.setupState,u=toRaw(c),p=c===EMPTY_OBJ?()=>!1:e=>hasOwn(u,e);if(null!=h&&h!==l&&(isString$2(h)?(d[h]=null,p(h)&&(c[h]=null)):isRef(h)&&(h.value=null)),isFunction$1(l))callWithErrorHandling(l,o,12,[r,d]);else{const t=isString$2(l),s=isRef(l);if(t||s){const o=()=>{if(e.f){const i=t?p(l)?c[l]:d[l]:l.value;n?isArray$1(i)&&remove(i,a):isArray$1(i)?i.includes(a)||i.push(a):t?(d[l]=[a],p(l)&&(c[l]=d[l])):(l.value=[a],e.k&&(d[e.k]=l.value))}else t?(d[l]=r,p(l)&&(c[l]=r)):s&&(l.value=r,e.k&&(d[e.k]=r))};r?(o.id=-1,queuePostRenderEffect(o,i)):o()}}}getGlobalThis().requestIdleCallback,getGlobalThis().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,i=currentInstance){const s=e.__wdc||(e.__wdc=()=>{let t=i;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(injectHook(t,s,i),i){let e=i.parent;for(;e&&e.parent;)isKeepAlive(e.parent.vnode)&&injectToKeepAliveRoot(s,t,i,e),e=e.parent}}function injectToKeepAliveRoot(e,t,i,s){const n=injectHook(t,e,s,!0);onUnmounted((()=>{remove(s[t],n)}),i)}function injectHook(e,t,i=currentInstance,s=!1){if(i){const n=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...s)=>{pauseTracking();const n=setCurrentInstance(i),a=callWithAsyncErrorHandling(t,i,e,s);return n(),resetTracking(),a});return s?n.unshift(a):n.push(a),a}}const createHook=e=>(t,i=currentInstance)=>{isInSSRComponentSetup&&"sp"!==e||injectHook(e,((...e)=>t(...e)),i)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(e,t,i,s){let n;const a=i,r=isArray$1(e);if(r||isString$2(e)){let i=!1;r&&isReactive(e)&&(i=!isShallow(e),e=shallowReadArray(e)),n=new Array(e.length);for(let s=0,r=e.length;s<r;s++)n[s]=t(i?toReactive(e[s]):e[s],s,void 0,a)}else if("number"==typeof e){n=new Array(e);for(let i=0;i<e;i++)n[i]=t(i+1,i,void 0,a)}else if(isObject$1(e))if(e[Symbol.iterator])n=Array.from(e,((e,i)=>t(e,i,void 0,a)));else{const i=Object.keys(e);n=new Array(i.length);for(let s=0,r=i.length;s<r;s++){const r=i[s];n[s]=t(e[r],r,s,a)}}else n=[];return n}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:i,setupState:s,data:n,props:a,accessCache:r,type:o,appContext:l}=e;let h;if("$"!==t[0]){const o=r[t];if(void 0!==o)switch(o){case 1:return s[t];case 2:return n[t];case 4:return i[t];case 3:return a[t]}else{if(hasSetupBinding(s,t))return r[t]=1,s[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return r[t]=2,n[t];if((h=e.propsOptions[0])&&hasOwn(h,t))return r[t]=3,a[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return r[t]=4,i[t];shouldCacheAccess&&(r[t]=0)}}const d=publicPropertiesMap[t];let c,u;return d?("$attrs"===t&&track(e.attrs,"get",""),d(e)):(c=o.__cssModules)&&(c=c[t])?c:i!==EMPTY_OBJ&&hasOwn(i,t)?(r[t]=4,i[t]):(u=l.config.globalProperties,hasOwn(u,t)?u[t]:void 0)},set({_:e},t,i){const{data:s,setupState:n,ctx:a}=e;return hasSetupBinding(n,t)?(n[t]=i,!0):s!==EMPTY_OBJ&&hasOwn(s,t)?(s[t]=i,!0):!(hasOwn(e.props,t)||"$"===t[0]&&t.slice(1)in e||(a[t]=i,0))},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:n,propsOptions:a}},r){let o;return!!i[r]||e!==EMPTY_OBJ&&hasOwn(e,r)||hasSetupBinding(t,r)||(o=a[0])&&hasOwn(o,r)||hasOwn(s,r)||hasOwn(publicPropertiesMap,r)||hasOwn(n.config.globalProperties,r)},defineProperty(e,t,i){return null!=i.get?e._.accessCache[t]=0:hasOwn(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function normalizePropsOrEmits(e){return isArray$1(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),i=e.proxy,s=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:r,watch:o,provide:l,inject:h,created:d,beforeMount:c,mounted:u,beforeUpdate:p,updated:g,activated:m,deactivated:f,beforeDestroy:v,beforeUnmount:b,destroyed:y,unmounted:C,render:x,renderTracked:S,renderTriggered:w,errorCaptured:T,serverPrefetch:P,expose:_,inheritAttrs:M,components:O,directives:k,filters:$}=t;if(h&&resolveInjections(h,s,null),r)for(const E in r){const e=r[E];isFunction$1(e)&&(s[E]=e.bind(i))}if(n){const t=n.call(i,i);isObject$1(t)&&(e.data=reactive(t))}if(shouldCacheAccess=!0,a)for(const E in a){const e=a[E],t=isFunction$1(e)?e.bind(i,i):isFunction$1(e.get)?e.get.bind(i,i):NOOP$1,n=!isFunction$1(e)&&isFunction$1(e.set)?e.set.bind(i):NOOP$1,r=computed({get:t,set:n});Object.defineProperty(s,E,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e})}if(o)for(const E in o)createWatcher(o[E],s,i,E);if(l){const e=isFunction$1(l)?l.call(i):l;Reflect.ownKeys(e).forEach((t=>{provide(t,e[t])}))}function G(e,t){isArray$1(t)?t.forEach((t=>e(t.bind(i)))):t&&e(t.bind(i))}if(d&&callHook(d,e,"c"),G(onBeforeMount,c),G(onMounted,u),G(onBeforeUpdate,p),G(onUpdated,g),G(onActivated,m),G(onDeactivated,f),G(onErrorCaptured,T),G(onRenderTracked,S),G(onRenderTriggered,w),G(onBeforeUnmount,b),G(onUnmounted,C),G(onServerPrefetch,P),isArray$1(_))if(_.length){const t=e.exposed||(e.exposed={});_.forEach((e=>{Object.defineProperty(t,e,{get:()=>i[e],set:t=>i[e]=t})}))}else e.exposed||(e.exposed={});x&&e.render===NOOP$1&&(e.render=x),null!=M&&(e.inheritAttrs=M),O&&(e.components=O),k&&(e.directives=k),P&&markAsyncBoundary(e)}function resolveInjections(e,t,i=NOOP$1){isArray$1(e)&&(e=normalizeInject(e));for(const s in e){const i=e[s];let n;n=isObject$1(i)?"default"in i?inject(i.from||s,i.default,!0):inject(i.from||s):inject(i),isRef(n)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>n.value,set:e=>n.value=e}):t[s]=n}}function callHook(e,t,i){callWithAsyncErrorHandling(isArray$1(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,i)}function createWatcher(e,t,i,s){let n=s.includes(".")?createPathGetter(i,s):()=>i[s];if(isString$2(e)){const i=t[e];isFunction$1(i)&&watch(n,i)}else if(isFunction$1(e))watch(n,e.bind(i));else if(isObject$1(e))if(isArray$1(e))e.forEach((e=>createWatcher(e,t,i,s)));else{const s=isFunction$1(e.handler)?e.handler.bind(i):t[e.handler];isFunction$1(s)&&watch(n,s,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,o=a.get(t);let l;return o?l=o:n.length||i||s?(l={},n.length&&n.forEach((e=>mergeOptions(l,e,r,!0))),mergeOptions(l,t,r)):l=t,isObject$1(t)&&a.set(t,l),l}function mergeOptions(e,t,i,s=!1){const{mixins:n,extends:a}=t;a&&mergeOptions(e,a,i,!0),n&&n.forEach((t=>mergeOptions(e,t,i,!0)));for(const r in t)if(s&&"expose"===r);else{const s=internalOptionMergeStrats[r]||i&&i[r];e[r]=s?s(e[r],t[r]):t[r]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$1(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$1(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$1(e)&&isArray$1(t)?[...new Set([...e,...t])]:extend$1(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(null!=t?t:{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const i=extend$1(Object.create(null),e);for(const s in t)i[s]=mergeAsArray(e[s],t[s]);return i}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(t,i=null){isFunction$1(t)||(t=extend$1({},t)),null==i||isObject$1(i)||(i=null);const s=createAppContext(),n=new WeakSet,a=[];let r=!1;const o=s.app={_uid:uid$1++,_component:t,_props:i,_container:null,_context:s,_instance:null,version:version,get config(){return s.config},set config(e){},use:(e,...t)=>(n.has(e)||(e&&isFunction$1(e.install)?(n.add(e),e.install(o,...t)):isFunction$1(e)&&(n.add(e),e(o,...t))),o),mixin:e=>(s.mixins.includes(e)||s.mixins.push(e),o),component:(e,t)=>t?(s.components[e]=t,o):s.components[e],directive:(e,t)=>t?(s.directives[e]=t,o):s.directives[e],mount(n,a,l){if(!r){const a=o._ceVNode||createVNode(t,i);return a.appContext=s,!0===l?l="svg":!1===l&&(l=void 0),e(a,n,l),r=!0,o._container=n,n.__vue_app__=o,getComponentPublicInstance(a.component)}},onUnmount(e){a.push(e)},unmount(){r&&(callWithAsyncErrorHandling(a,o._instance,16),e(null,o._container),delete o._container.__vue_app__)},provide:(e,t)=>(s.provides[e]=t,o),runWithContext(e){const t=currentApp;currentApp=o;try{return e()}finally{currentApp=t}}};return o}}let currentApp=null;function provide(e,t){if(currentInstance){let i=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===i&&(i=currentInstance.provides=Object.create(s)),i[e]=t}}function inject(e,t,i=!1){const s=currentInstance||currentRenderingInstance;if(s||currentApp){const n=currentApp?currentApp._context.provides:s?null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&isFunction$1(t)?t.call(s&&s.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,i,s=!1){const n={},a=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,n,a);for(const r in e.propsOptions[0])r in n||(n[r]=void 0);i?e.props=s?n:shallowReactive(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function updateProps(e,t,i,s){const{props:n,attrs:a,vnode:{patchFlag:r}}=e,o=toRaw(n),[l]=e.propsOptions;let h=!1;if(!(s||r>0)||16&r){let s;setFullProps(e,t,n,a)&&(h=!0);for(const a in o)t&&(hasOwn(t,a)||(s=hyphenate(a))!==a&&hasOwn(t,s))||(l?!i||void 0===i[a]&&void 0===i[s]||(n[a]=resolvePropValue(l,o,a,void 0,e,!0)):delete n[a]);if(a!==o)for(const e in a)t&&hasOwn(t,e)||(delete a[e],h=!0)}else if(8&r){const i=e.vnode.dynamicProps;for(let s=0;s<i.length;s++){let r=i[s];if(isEmitListener(e.emitsOptions,r))continue;const d=t[r];if(l)if(hasOwn(a,r))d!==a[r]&&(a[r]=d,h=!0);else{const t=camelize(r);n[t]=resolvePropValue(l,o,t,d,e,!1)}else d!==a[r]&&(a[r]=d,h=!0)}}h&&trigger(e.attrs,"set","")}function setFullProps(e,t,i,s){const[n,a]=e.propsOptions;let r,o=!1;if(t)for(let l in t){if(isReservedProp(l))continue;const h=t[l];let d;n&&hasOwn(n,d=camelize(l))?a&&a.includes(d)?(r||(r={}))[d]=h:i[d]=h:isEmitListener(e.emitsOptions,l)||l in s&&h===s[l]||(s[l]=h,o=!0)}if(a){const t=toRaw(i),s=r||EMPTY_OBJ;for(let r=0;r<a.length;r++){const o=a[r];i[o]=resolvePropValue(n,t,o,s[o],e,!hasOwn(s,o))}}return o}function resolvePropValue(e,t,i,s,n,a){const r=e[i];if(null!=r){const e=hasOwn(r,"default");if(e&&void 0===s){const e=r.default;if(r.type!==Function&&!r.skipFactory&&isFunction$1(e)){const{propsDefaults:a}=n;if(i in a)s=a[i];else{const r=setCurrentInstance(n);s=a[i]=e.call(null,t),r()}}else s=e;n.ce&&n.ce._setProp(i,s)}r[0]&&(a&&!e?s=!1:!r[1]||""!==s&&s!==hyphenate(i)||(s=!0))}return s}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,i=!1){const s=i?mixinPropsCache:t.propsCache,n=s.get(e);if(n)return n;const a=e.props,r={},o=[];let l=!1;if(!isFunction$1(e)){const s=e=>{l=!0;const[i,s]=normalizePropsOptions(e,t,!0);extend$1(r,i),s&&o.push(...s)};!i&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}if(!a&&!l)return isObject$1(e)&&s.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(a))for(let d=0;d<a.length;d++){const e=camelize(a[d]);validatePropName(e)&&(r[e]=EMPTY_OBJ)}else if(a)for(const d in a){const e=camelize(d);if(validatePropName(e)){const t=a[d],i=r[e]=isArray$1(t)||isFunction$1(t)?{type:t}:extend$1({},t),s=i.type;let n=!1,l=!0;if(isArray$1(s))for(let e=0;e<s.length;++e){const t=s[e],i=isFunction$1(t)&&t.name;if("Boolean"===i){n=!0;break}"String"===i&&(l=!1)}else n=isFunction$1(s)&&"Boolean"===s.name;i[0]=n,i[1]=l,(n||hasOwn(i,"default"))&&o.push(e)}}const h=[r,o];return isObject$1(e)&&s.set(e,h),h}function validatePropName(e){return"$"!==e[0]&&!isReservedProp(e)}const isInternalKey=e=>"_"===e[0]||"$stable"===e,normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,i)=>{if(t._n)return t;const s=withCtx(((...e)=>normalizeSlotValue(t(...e))),i);return s._c=!1,s},normalizeObjectSlots=(e,t,i)=>{const s=e._ctx;for(const n in e){if(isInternalKey(n))continue;const i=e[n];if(isFunction$1(i))t[n]=normalizeSlot(n,i,s);else if(null!=i){const e=normalizeSlotValue(i);t[n]=()=>e}}},normalizeVNodeSlots=(e,t)=>{const i=normalizeSlotValue(t);e.slots.default=()=>i},assignSlots=(e,t,i)=>{for(const s in t)(i||"_"!==s)&&(e[s]=t[s])},initSlots=(e,t,i)=>{const s=e.slots=createInternalObject();if(32&e.vnode.shapeFlag){const e=t._;e?(assignSlots(s,t,i),i&&def(s,"_",e,!0)):normalizeObjectSlots(t,s)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,i)=>{const{vnode:s,slots:n}=e;let a=!0,r=EMPTY_OBJ;if(32&s.shapeFlag){const e=t._;e?i&&1===e?a=!1:assignSlots(n,t,i):(a=!t.$stable,normalizeObjectSlots(t,n)),r=t}else t&&(normalizeVNodeSlots(e,t),r={default:1});if(a)for(const o in n)isInternalKey(o)||null!=r[o]||delete n[o]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){getGlobalThis().__VUE__=!0;const{insert:i,remove:s,patchProp:n,createElement:a,createText:r,createComment:o,setText:l,setElementText:h,parentNode:d,nextSibling:c,setScopeId:u=NOOP$1,insertStaticContent:p}=e,g=(e,t,i,s=null,n=null,a=null,r=void 0,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!isSameVNodeType(e,t)&&(s=F(e),I(e,n,a,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:h,ref:d,shapeFlag:c}=t;switch(h){case Text$1:m(e,t,i,s);break;case Comment:f(e,t,i,s);break;case Static:null==e&&v(t,i,s,r);break;case Fragment:P(e,t,i,s,n,a,r,o,l);break;default:1&c?b(e,t,i,s,n,a,r,o,l):6&c?_(e,t,i,s,n,a,r,o,l):(64&c||128&c)&&h.process(e,t,i,s,n,a,r,o,l,z)}null!=d&&n&&setRef(d,e&&e.ref,a,t||e,!t)},m=(e,t,s,n)=>{if(null==e)i(t.el=r(t.children),s,n);else{const i=t.el=e.el;t.children!==e.children&&l(i,t.children)}},f=(e,t,s,n)=>{null==e?i(t.el=o(t.children||""),s,n):t.el=e.el},v=(e,t,i,s)=>{[e.el,e.anchor]=p(e.children,t,i,s,e.el,e.anchor)},b=(e,t,i,s,n,a,r,o,l)=>{"svg"===t.type?r="svg":"math"===t.type&&(r="mathml"),null==e?y(t,i,s,n,a,r,o,l):S(e,t,n,a,r,o,l)},y=(e,t,s,r,o,l,d,c)=>{let u,p;const{props:g,shapeFlag:m,transition:f,dirs:v}=e;if(u=e.el=a(e.type,l,g&&g.is,g),8&m?h(u,e.children):16&m&&x(e.children,u,null,r,o,resolveChildrenNamespace(e,l),d,c),v&&invokeDirectiveHook(e,null,r,"created"),C(u,e,e.scopeId,d,r),g){for(const e in g)"value"===e||isReservedProp(e)||n(u,e,null,g[e],l,r);"value"in g&&n(u,"value",null,g.value,l),(p=g.onVnodeBeforeMount)&&invokeVNodeHook(p,r,e)}v&&invokeDirectiveHook(e,null,r,"beforeMount");const b=needTransition(o,f);b&&f.beforeEnter(u),i(u,t,s),((p=g&&g.onVnodeMounted)||b||v)&&queuePostRenderEffect((()=>{p&&invokeVNodeHook(p,r,e),b&&f.enter(u),v&&invokeDirectiveHook(e,null,r,"mounted")}),o)},C=(e,t,i,s,n)=>{if(i&&u(e,i),s)for(let a=0;a<s.length;a++)u(e,s[a]);if(n){let i=n.subTree;if(t===i||isSuspense(i.type)&&(i.ssContent===t||i.ssFallback===t)){const t=n.vnode;C(e,t,t.scopeId,t.slotScopeIds,n.parent)}}},x=(e,t,i,s,n,a,r,o,l=0)=>{for(let h=l;h<e.length;h++){const l=e[h]=o?cloneIfMounted(e[h]):normalizeVNode(e[h]);g(null,l,t,i,s,n,a,r,o)}},S=(e,t,i,s,a,r,o)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:c,dirs:u}=t;d|=16&e.patchFlag;const p=e.props||EMPTY_OBJ,g=t.props||EMPTY_OBJ;let m;if(i&&toggleRecurse(i,!1),(m=g.onVnodeBeforeUpdate)&&invokeVNodeHook(m,i,t,e),u&&invokeDirectiveHook(t,e,i,"beforeUpdate"),i&&toggleRecurse(i,!0),(p.innerHTML&&null==g.innerHTML||p.textContent&&null==g.textContent)&&h(l,""),c?w(e.dynamicChildren,c,l,i,s,resolveChildrenNamespace(t,a),r):o||G(e,t,l,null,i,s,resolveChildrenNamespace(t,a),r,!1),d>0){if(16&d)T(l,p,g,i,a);else if(2&d&&p.class!==g.class&&n(l,"class",null,g.class,a),4&d&&n(l,"style",p.style,g.style,a),8&d){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const s=e[t],r=p[s],o=g[s];o===r&&"value"!==s||n(l,s,r,o,a,i)}}1&d&&e.children!==t.children&&h(l,t.children)}else o||null!=c||T(l,p,g,i,a);((m=g.onVnodeUpdated)||u)&&queuePostRenderEffect((()=>{m&&invokeVNodeHook(m,i,t,e),u&&invokeDirectiveHook(t,e,i,"updated")}),s)},w=(e,t,i,s,n,a,r)=>{for(let o=0;o<t.length;o++){const l=e[o],h=t[o],c=l.el&&(l.type===Fragment||!isSameVNodeType(l,h)||70&l.shapeFlag)?d(l.el):i;g(l,h,c,null,s,n,a,r,!0)}},T=(e,t,i,s,a)=>{if(t!==i){if(t!==EMPTY_OBJ)for(const r in t)isReservedProp(r)||r in i||n(e,r,t[r],null,a,s);for(const r in i){if(isReservedProp(r))continue;const o=i[r],l=t[r];o!==l&&"value"!==r&&n(e,r,l,o,a,s)}"value"in i&&n(e,"value",t.value,i.value,a)}},P=(e,t,s,n,a,o,l,h,d)=>{const c=t.el=e?e.el:r(""),u=t.anchor=e?e.anchor:r("");let{patchFlag:p,dynamicChildren:g,slotScopeIds:m}=t;m&&(h=h?h.concat(m):m),null==e?(i(c,s,n),i(u,s,n),x(t.children||[],s,u,a,o,l,h,d)):p>0&&64&p&&g&&e.dynamicChildren?(w(e.dynamicChildren,g,s,a,o,l,h),(null!=t.key||a&&t===a.subTree)&&traverseStaticChildren(e,t,!0)):G(e,t,s,u,a,o,l,h,d)},_=(e,t,i,s,n,a,r,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?n.ctx.activate(t,i,s,r,l):M(t,i,s,n,a,r,l):O(e,t,l)},M=(e,t,i,s,n,a,r)=>{const o=e.component=createComponentInstance(e,s,n);if(isKeepAlive(e)&&(o.ctx.renderer=z),setupComponent(o,!1,r),o.asyncDep){if(n&&n.registerDep(o,k,r),!e.el){const e=o.subTree=createVNode(Comment);f(null,e,t,i)}}else k(o,e,t,i,n,a,r)},O=(e,t,i)=>{const s=t.component=e.component;if(shouldUpdateComponent(e,t,i)){if(s.asyncDep&&!s.asyncResolved)return void $(s,t,i);s.next=t,s.update()}else t.el=e.el,s.vnode=t},k=(e,t,i,s,n,a,r)=>{const o=()=>{if(e.isMounted){let{next:t,bu:i,u:s,parent:l,vnode:h}=e;{const i=locateNonHydratedAsyncRoot(e);if(i)return t&&(t.el=h.el,$(e,t,r)),void i.asyncDep.then((()=>{e.isUnmounted||o()}))}let c,u=t;toggleRecurse(e,!1),t?(t.el=h.el,$(e,t,r)):t=h,i&&invokeArrayFns(i),(c=t.props&&t.props.onVnodeBeforeUpdate)&&invokeVNodeHook(c,l,t,h),toggleRecurse(e,!0);const p=renderComponentRoot(e),m=e.subTree;e.subTree=p,g(m,p,d(m.el),F(m),e,n,a),t.el=p.el,null===u&&updateHOCHostEl(e,p.el),s&&queuePostRenderEffect(s,n),(c=t.props&&t.props.onVnodeUpdated)&&queuePostRenderEffect((()=>invokeVNodeHook(c,l,t,h)),n)}else{let r;const{el:o,props:l}=t,{bm:h,m:d,parent:c,root:u,type:p}=e,m=isAsyncWrapper(t);toggleRecurse(e,!1),h&&invokeArrayFns(h),!m&&(r=l&&l.onVnodeBeforeMount)&&invokeVNodeHook(r,c,t),toggleRecurse(e,!0);{u.ce&&u.ce._injectChildStyle(p);const r=e.subTree=renderComponentRoot(e);g(null,r,i,s,e,n,a),t.el=r.el}if(d&&queuePostRenderEffect(d,n),!m&&(r=l&&l.onVnodeMounted)){const e=t;queuePostRenderEffect((()=>invokeVNodeHook(r,c,e)),n)}(256&t.shapeFlag||c&&isAsyncWrapper(c.vnode)&&256&c.vnode.shapeFlag)&&e.a&&queuePostRenderEffect(e.a,n),e.isMounted=!0,t=i=s=null}};e.scope.on();const l=e.effect=new ReactiveEffect(o);e.scope.off();const h=e.update=l.run.bind(l),c=e.job=l.runIfDirty.bind(l);c.i=e,c.id=e.uid,l.scheduler=()=>queueJob(c),toggleRecurse(e,!0),h()},$=(e,t,i)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,updateProps(e,t.props,s,i),updateSlots(e,t.children,i),pauseTracking(),flushPreFlushCbs(e),resetTracking()},G=(e,t,i,s,n,a,r,o,l=!1)=>{const d=e&&e.children,c=e?e.shapeFlag:0,u=t.children,{patchFlag:p,shapeFlag:g}=t;if(p>0){if(128&p)return void V(d,u,i,s,n,a,r,o,l);if(256&p)return void E(d,u,i,s,n,a,r,o,l)}8&g?(16&c&&L(d,n,a),u!==d&&h(i,u)):16&c?16&g?V(d,u,i,s,n,a,r,o,l):L(d,n,a,!0):(8&c&&h(i,""),16&g&&x(u,i,s,n,a,r,o,l))},E=(e,t,i,s,n,a,r,o,l)=>{t=t||EMPTY_ARR;const h=(e=e||EMPTY_ARR).length,d=t.length,c=Math.min(h,d);let u;for(u=0;u<c;u++){const s=t[u]=l?cloneIfMounted(t[u]):normalizeVNode(t[u]);g(e[u],s,i,null,n,a,r,o,l)}h>d?L(e,n,a,!0,!1,c):x(t,i,s,n,a,r,o,l,c)},V=(e,t,i,s,n,a,r,o,l)=>{let h=0;const d=t.length;let c=e.length-1,u=d-1;for(;h<=c&&h<=u;){const s=e[h],d=t[h]=l?cloneIfMounted(t[h]):normalizeVNode(t[h]);if(!isSameVNodeType(s,d))break;g(s,d,i,null,n,a,r,o,l),h++}for(;h<=c&&h<=u;){const s=e[c],h=t[u]=l?cloneIfMounted(t[u]):normalizeVNode(t[u]);if(!isSameVNodeType(s,h))break;g(s,h,i,null,n,a,r,o,l),c--,u--}if(h>c){if(h<=u){const e=u+1,c=e<d?t[e].el:s;for(;h<=u;)g(null,t[h]=l?cloneIfMounted(t[h]):normalizeVNode(t[h]),i,c,n,a,r,o,l),h++}}else if(h>u)for(;h<=c;)I(e[h],n,a,!0),h++;else{const p=h,m=h,f=new Map;for(h=m;h<=u;h++){const e=t[h]=l?cloneIfMounted(t[h]):normalizeVNode(t[h]);null!=e.key&&f.set(e.key,h)}let v,b=0;const y=u-m+1;let C=!1,x=0;const S=new Array(y);for(h=0;h<y;h++)S[h]=0;for(h=p;h<=c;h++){const s=e[h];if(b>=y){I(s,n,a,!0);continue}let d;if(null!=s.key)d=f.get(s.key);else for(v=m;v<=u;v++)if(0===S[v-m]&&isSameVNodeType(s,t[v])){d=v;break}void 0===d?I(s,n,a,!0):(S[d-m]=h+1,d>=x?x=d:C=!0,g(s,t[d],i,null,n,a,r,o,l),b++)}const w=C?getSequence(S):EMPTY_ARR;for(v=w.length-1,h=y-1;h>=0;h--){const e=m+h,c=t[e],u=e+1<d?t[e+1].el:s;0===S[h]?g(null,c,i,u,n,a,r,o,l):C&&(v<0||h!==w[v]?R(c,i,u,2):v--)}}},R=(e,t,s,n,a=null)=>{const{el:r,type:o,transition:l,children:h,shapeFlag:d}=e;if(6&d)R(e.component.subTree,t,s,n);else if(128&d)e.suspense.move(t,s,n);else if(64&d)o.move(e,t,s,z);else if(o!==Fragment)if(o!==Static)if(2!==n&&1&d&&l)if(0===n)l.beforeEnter(r),i(r,t,s),queuePostRenderEffect((()=>l.enter(r)),a);else{const{leave:e,delayLeave:n,afterLeave:a}=l,o=()=>i(r,t,s),h=()=>{e(r,(()=>{o(),a&&a()}))};n?n(r,o,h):h()}else i(r,t,s);else(({el:e,anchor:t},s,n)=>{let a;for(;e&&e!==t;)a=c(e),i(e,s,n),e=a;i(t,s,n)})(e,t,s);else{i(r,t,s);for(let e=0;e<h.length;e++)R(h[e],t,s,n);i(e.anchor,t,s)}},I=(e,t,i,s=!1,n=!1)=>{const{type:a,props:r,ref:o,children:l,dynamicChildren:h,shapeFlag:d,patchFlag:c,dirs:u,cacheIndex:p}=e;if(-2===c&&(n=!1),null!=o&&setRef(o,null,i,e,!0),null!=p&&(t.renderCache[p]=void 0),256&d)return void t.ctx.deactivate(e);const g=1&d&&u,m=!isAsyncWrapper(e);let f;if(m&&(f=r&&r.onVnodeBeforeUnmount)&&invokeVNodeHook(f,t,e),6&d)B(e.component,i,s);else{if(128&d)return void e.suspense.unmount(i,s);g&&invokeDirectiveHook(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,i,z,s):h&&!h.hasOnce&&(a!==Fragment||c>0&&64&c)?L(h,t,i,!1,!0):(a===Fragment&&384&c||!n&&16&d)&&L(l,t,i),s&&A(e)}(m&&(f=r&&r.onVnodeUnmounted)||g)&&queuePostRenderEffect((()=>{f&&invokeVNodeHook(f,t,e),g&&invokeDirectiveHook(e,null,t,"unmounted")}),i)},A=e=>{const{type:t,el:i,anchor:n,transition:a}=e;if(t===Fragment)return void D(i,n);if(t===Static)return void(({el:e,anchor:t})=>{let i;for(;e&&e!==t;)i=c(e),s(e),e=i;s(t)})(e);const r=()=>{s(i),a&&!a.persisted&&a.afterLeave&&a.afterLeave()};if(1&e.shapeFlag&&a&&!a.persisted){const{leave:t,delayLeave:s}=a,n=()=>t(i,r);s?s(e.el,r,n):n()}else r()},D=(e,t)=>{let i;for(;e!==t;)i=c(e),s(e),e=i;s(t)},B=(e,t,i)=>{const{bum:s,scope:n,job:a,subTree:r,um:o,m:l,a:h}=e;invalidateMount(l),invalidateMount(h),s&&invokeArrayFns(s),n.stop(),a&&(a.flags|=8,I(r,e,t,i)),o&&queuePostRenderEffect(o,t),queuePostRenderEffect((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},L=(e,t,i,s=!1,n=!1,a=0)=>{for(let r=a;r<e.length;r++)I(e[r],t,i,s,n)},F=e=>{if(6&e.shapeFlag)return F(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=c(e.anchor||e.el),i=t&&t[TeleportEndKey];return i?c(i):t};let j=!1;const N=(e,t,i)=>{null==e?t._vnode&&I(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,i),t._vnode=e,j||(j=!0,flushPreFlushCbs(),flushPostFlushCbs(),j=!1)},z={p:g,um:I,m:R,r:A,mt:M,mc:x,pc:G,pbc:w,n:F,o:e};return{render:N,hydrate:void 0,createApp:createAppAPI(N)}}function resolveChildrenNamespace({type:e,props:t},i){return"svg"===i&&"foreignObject"===e||"mathml"===i&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function toggleRecurse({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,i=!1){const s=e.children,n=t.children;if(isArray$1(s)&&isArray$1(n))for(let a=0;a<s.length;a++){const e=s[a];let t=n[a];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=n[a]=cloneIfMounted(n[a]),t.el=e.el),i||-2===t.patchFlag||traverseStaticChildren(e,t)),t.type===Text$1&&(t.el=e.el)}}function getSequence(e){const t=e.slice(),i=[0];let s,n,a,r,o;const l=e.length;for(s=0;s<l;s++){const l=e[s];if(0!==l){if(n=i[i.length-1],e[n]<l){t[s]=n,i.push(s);continue}for(a=0,r=i.length-1;a<r;)o=a+r>>1,e[i[o]]<l?a=o+1:r=o;l<e[i[a]]&&(a>0&&(t[s]=i[a-1]),i[a]=s)}}for(a=i.length,r=i[a-1];a-- >0;)i[a]=r,r=t[r];return i}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,i){return doWatch(e,t,i)}function doWatch(e,t,i=EMPTY_OBJ){const{immediate:s,deep:n,flush:a,once:r}=i,o=extend$1({},i),l=t&&s||!t&&"post"!==a;let h;if(isInSSRComponentSetup)if("sync"===a){const e=useSSRContext();h=e.__watcherHandles||(e.__watcherHandles=[])}else if(!l){const e=()=>{};return e.stop=NOOP$1,e.resume=NOOP$1,e.pause=NOOP$1,e}const d=currentInstance;o.call=(e,t,i)=>callWithAsyncErrorHandling(e,d,t,i);let c=!1;"post"===a?o.scheduler=e=>{queuePostRenderEffect(e,d&&d.suspense)}:"sync"!==a&&(c=!0,o.scheduler=(e,t)=>{t?e():queueJob(e)}),o.augmentJob=e=>{t&&(e.flags|=4),c&&(e.flags|=2,d&&(e.id=d.uid,e.i=d))};const u=watch$1(e,t,o);return isInSSRComponentSetup&&(h?h.push(u):l&&u()),u}function instanceWatch(e,t,i){const s=this.proxy,n=isString$2(e)?e.includes(".")?createPathGetter(s,e):()=>s[e]:e.bind(s,s);let a;isFunction$1(t)?a=t:(a=t.handler,i=t);const r=setCurrentInstance(this),o=doWatch(n,a.bind(s),i);return r(),o}function createPathGetter(e,t){const i=t.split(".");return()=>{let t=e;for(let e=0;e<i.length&&t;e++)t=t[i[e]];return t}}const getModelModifiers=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||EMPTY_OBJ;let n=i;const a=t.startsWith("update:"),r=a&&getModelModifiers(s,t.slice(7));let o;r&&(r.trim&&(n=i.map((e=>isString$2(e)?e.trim():e))),r.number&&(n=i.map(looseToNumber)));let l=s[o=toHandlerKey(t)]||s[o=toHandlerKey(camelize(t))];!l&&a&&(l=s[o=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,n);const h=s[o+"Once"];if(h){if(e.emitted){if(e.emitted[o])return}else e.emitted={};e.emitted[o]=!0,callWithAsyncErrorHandling(h,e,6,n)}}function normalizeEmitsOptions(e,t,i=!1){const s=t.emitsCache,n=s.get(e);if(void 0!==n)return n;const a=e.emits;let r={},o=!1;if(!isFunction$1(e)){const s=e=>{const i=normalizeEmitsOptions(e,t,!0);i&&(o=!0,extend$1(r,i))};!i&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return a||o?(isArray$1(a)?a.forEach((e=>r[e]=null)):extend$1(r,a),isObject$1(e)&&s.set(e,r),r):(isObject$1(e)&&s.set(e,null),null)}function isEmitListener(e,t){return!(!e||!isOn(t))&&(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:i,proxy:s,withProxy:n,propsOptions:[a],slots:r,attrs:o,emit:l,render:h,renderCache:d,props:c,data:u,setupState:p,ctx:g,inheritAttrs:m}=e,f=setCurrentRenderingInstance(e);let v,b;try{if(4&i.shapeFlag){const e=n||s,t=e;v=normalizeVNode(h.call(t,e,d,c,p,u,g)),b=o}else{const e=t;v=normalizeVNode(e.length>1?e(c,{attrs:o,slots:r,emit:l}):e(c,null)),b=t.props?o:getFunctionalFallthrough(o)}}catch(C){blockStack.length=0,handleError(C,e,1),v=createVNode(Comment)}let y=v;if(b&&!1!==m){const e=Object.keys(b),{shapeFlag:t}=y;e.length&&7&t&&(a&&e.some(isModelListener)&&(b=filterModelListeners(b,a)),y=cloneVNode(y,b,!1,!0))}return i.dirs&&(y=cloneVNode(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(i.dirs):i.dirs),i.transition&&setTransitionHooks(y,i.transition),v=y,setCurrentRenderingInstance(f),v}const getFunctionalFallthrough=e=>{let t;for(const i in e)("class"===i||"style"===i||isOn(i))&&((t||(t={}))[i]=e[i]);return t},filterModelListeners=(e,t)=>{const i={};for(const s in e)isModelListener(s)&&s.slice(9)in t||(i[s]=e[s]);return i};function shouldUpdateComponent(e,t,i){const{props:s,children:n,component:a}=e,{props:r,children:o,patchFlag:l}=t,h=a.emitsOptions;if(t.dirs||t.transition)return!0;if(!(i&&l>=0))return!(!n&&!o||o&&o.$stable)||s!==r&&(s?!r||hasPropsChanged(s,r,h):!!r);if(1024&l)return!0;if(16&l)return s?hasPropsChanged(s,r,h):!!r;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const i=e[t];if(r[i]!==s[i]&&!isEmitListener(h,i))return!0}}return!1}function hasPropsChanged(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const a=s[n];if(t[a]!==e[a]&&!isEmitListener(i,a))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},i){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s!==e)break;(e=t.vnode).el=i,t=t.parent}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,i,s,n,a){return setupBlock(createBaseVNode(e,t,i,s,n,a,!0))}function createBlock(e,t,i,s,n){return setupBlock(createVNode(e,t,i,s,n,!0))}function isVNode(e){return!!e&&!0===e.__v_isVNode}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:i})=>("number"==typeof e&&(e=""+e),null!=e?isString$2(e)||isRef(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!i}:e:null);function createBaseVNode(e,t=null,i=null,s=0,n=null,a=(e===Fragment?0:1),r=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return o?(normalizeChildren(l,i),128&a&&e.normalize(l)):i&&(l.shapeFlag|=isString$2(i)?8:16),isBlockTreeEnabled>0&&!r&&currentBlock&&(l.patchFlag>0||6&a)&&32!==l.patchFlag&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(e,t=null,i=null,s=0,n=null,a=!1){if(e&&e!==NULL_DYNAMIC_COMPONENT||(e=Comment),isVNode(e)){const s=cloneVNode(e,t,!0);return i&&normalizeChildren(s,i),isBlockTreeEnabled>0&&!a&&currentBlock&&(6&s.shapeFlag?currentBlock[currentBlock.indexOf(e)]=s:currentBlock.push(s)),s.patchFlag=-2,s}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:e,style:i}=t;e&&!isString$2(e)&&(t.class=normalizeClass(e)),isObject$1(i)&&(isProxy(i)&&!isArray$1(i)&&(i=extend$1({},i)),t.style=normalizeStyle(i))}return createBaseVNode(e,t,i,s,n,isString$2(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$1(e)?4:isFunction$1(e)?2:0,a,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend$1({},e):e:null}function cloneVNode(e,t,i=!1,s=!1){const{props:n,ref:a,patchFlag:r,children:o,transition:l}=e,h=t?mergeProps(n||{},t):n,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&normalizeKey(h),ref:t&&t.ref?i&&a?isArray$1(a)?a.concat(normalizeRef(t)):[a,normalizeRef(t)]:normalizeRef(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?-1===r?16:16|r:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&setTransitionHooks(d,l.clone(d)),d}function createTextVNode(e=" ",t=0){return createVNode(Text$1,null,e,t)}function createStaticVNode(e,t){const i=createVNode(Static,null,e);return i.staticCount=t,i}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return null==e||"boolean"==typeof e?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):isVNode(e)?cloneIfMounted(e):createVNode(Text$1,null,String(e))}function cloneIfMounted(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let i=0;const{shapeFlag:s}=e;if(null==t)t=null;else if(isArray$1(t))i=16;else if("object"==typeof t){if(65&s){const i=t.default;return void(i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0)))}{i=32;const s=t._;s||isInternalObject(t)?3===s&&currentRenderingInstance&&(1===currentRenderingInstance.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=currentRenderingInstance}}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},i=32):(t=String(t),64&s?(i=16,t=[createTextVNode(t)]):i=8);e.children=t,e.shapeFlag|=i}function mergeProps(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const e in s)if("class"===e)t.class!==s.class&&(t.class=normalizeClass([t.class,s.class]));else if("style"===e)t.style=normalizeStyle([t.style,s.style]);else if(isOn(e)){const i=t[e],n=s[e];!n||i===n||isArray$1(i)&&i.includes(n)||(t[e]=i?[].concat(i,n):n)}else""!==e&&(t[e]=s[e])}return t}function invokeVNodeHook(e,t,i,s=null){callWithAsyncErrorHandling(e,t,7,[i,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,i){const s=e.type,n=(t?t.appContext:e.appContext)||emptyAppContext,a={uid:uid++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,n),emitsOptions:normalizeEmitsOptions(s,n),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=emit.bind(null,a),e.ce&&e.ce(a),a}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(t,i)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(i),e=>{s.length>1?s.forEach((t=>t(e))):s[0](e)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",(e=>currentInstance=e)),setInSSRSetupState=t("__VUE_SSR_SETTERS__",(e=>isInSSRComponentSetup=e))}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return 4&e.vnode.shapeFlag}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,i=!1){t&&setInSSRSetupState(t);const{props:s,children:n}=e.vnode,a=isStatefulComponent(e);initProps(e,s,a,t),initSlots(e,n,i);const r=a?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),r}function setupStatefulComponent(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:s}=i;if(s){pauseTracking();const i=e.setupContext=s.length>1?createSetupContext(e):null,n=setCurrentInstance(e),a=callWithErrorHandling(s,e,0,[e.props,i]),r=isPromise$1(a);if(resetTracking(),n(),!r&&!e.sp||isAsyncWrapper(e)||markAsyncBoundary(e),r){if(a.then(unsetCurrentInstance,unsetCurrentInstance),t)return a.then((t=>{handleSetupResult(e,t)})).catch((t=>{handleError(t,e,0)}));e.asyncDep=a}else handleSetupResult(e,a)}else finishComponentSetup(e)}function handleSetupResult(e,t,i){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$1(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,i){const s=e.type;e.render||(e.render=s.render||NOOP$1);{const t=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),t()}}}const attrsProxyHandlers={get:(e,t)=>(track(e,"get",""),e[t])};function createSetupContext(e){return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get:(t,i)=>i in t?t[i]:i in publicPropertiesMap?publicPropertiesMap[i](e):void 0,has:(e,t)=>t in e||t in publicPropertiesMap})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,(e=>e.toUpperCase())).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,i=!1){let s=getComponentName(t);if(!s&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(s=e[1])}if(!s&&e&&e.parent){const i=e=>{for(const i in e)if(e[i]===t)return i};s=i(e.components||e.parent.type.components)||i(e.appContext.components)}return s?classify(s):i?"App":"Anonymous"}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),version="3.5.13";let policy;const tt="undefined"!=typeof window&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch(e){}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc="undefined"!=typeof document?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const n="svg"===t?doc.createElementNS(svgNS,e):"mathml"===t?doc.createElementNS(mathmlNS,e):i?doc.createElement(e,{is:i}):doc.createElement(e);return"select"===e&&s&&null!=s.multiple&&n.setAttribute("multiple",s.multiple),n},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,s,n,a){const r=i?i.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),n!==a&&(n=n.nextSibling););else{templateContainer.innerHTML=unsafeToTrustedHTML("svg"===s?`<svg>${e}</svg>`:"mathml"===s?`<math>${e}</math>`:e);const n=templateContainer.content;if("svg"===s||"mathml"===s){const e=n.firstChild;for(;e.firstChild;)n.appendChild(e.firstChild);n.removeChild(e)}t.insertBefore(n,i)}return[r?r.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,i){const s=e[vtcKey];s&&(t=(t?[t,...s]:[...s]).join(" ")),null==t?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(e,{value:t},{transition:i}){e[vShowOriginalDisplay]="none"===e.style.display?"":e.style.display,i&&t?i.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),setDisplay(e,!0),s.enter(e)):s.leave(e,(()=>{setDisplay(e,!1)})):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e[vShowOriginalDisplay]:"none",e[vShowHidden]=!t}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,i){const s=e.style,n=isString$2(i);let a=!1;if(i&&!n){if(t)if(isString$2(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==i[t]&&setStyle(s,t,"")}else for(const e in t)null==i[e]&&setStyle(s,e,"");for(const e in i)"display"===e&&(a=!0),setStyle(s,e,i[e])}else if(n){if(t!==i){const e=s[CSS_VAR_TEXT];e&&(i+=";"+e),s.cssText=i,a=displayRE.test(i)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=a?s.display:"",e[vShowHidden]&&(s.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,i){if(isArray$1(i))i.forEach((i=>setStyle(e,t,i)));else if(null==i&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=autoPrefix(e,t);importantRE.test(i)?e.setProperty(hyphenate(s),i.replace(importantRE,""),"important"):e[s]=i}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const i=prefixCache[t];if(i)return i;let s=camelize(t);if("filter"!==s&&s in e)return prefixCache[t]=s;s=capitalize(s);for(let n=0;n<prefixes.length;n++){const i=prefixes[n]+s;if(i in e)return prefixCache[t]=i}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,i,s,n,a=isSpecialBooleanAttr(t)){s&&t.startsWith("xlink:")?null==i?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,i):null==i||a&&!includeBooleanAttr(i)?e.removeAttribute(t):e.setAttribute(t,a?"":isSymbol(i)?String(i):i)}function patchDOMProp(t,i,s,n,a){if("innerHTML"===i||"textContent"===i)return void(null!=s&&(t[i]="innerHTML"===i?unsafeToTrustedHTML(s):s));const r=t.tagName;if("value"===i&&"PROGRESS"!==r&&!r.includes("-")){const e="OPTION"===r?t.getAttribute("value")||"":t.value,n=null==s?"checkbox"===t.type?"on":"":String(s);return e===n&&"_value"in t||(t.value=n),null==s&&t.removeAttribute(i),void(t._value=s)}let o=!1;if(""===s||null==s){const e=typeof t[i];"boolean"===e?s=includeBooleanAttr(s):null==s&&"string"===e?(s="",o=!0):"number"===e&&(s=0,o=!0)}try{t[i]=s}catch(e){}o&&t.removeAttribute(a||i)}function addEventListener$1(e,t,i,s){e.addEventListener(t,i,s)}function removeEventListener(e,t,i,s){e.removeEventListener(t,i,s)}const veiKey=Symbol("_vei");function patchEvent(e,t,i,s,n=null){const a=e[veiKey]||(e[veiKey]={}),r=a[t];if(s&&r)r.value=s;else{const[i,o]=parseName(t);s?addEventListener$1(e,i,a[t]=createInvoker(s,n),o):r&&(removeEventListener(e,i,r,o),a[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){let i;for(t={};i=e.match(optionsModifierRE);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then((()=>cachedNow=0)),cachedNow=Date.now());function createInvoker(e,t){const i=e=>{if(e._vts){if(e._vts<=i.attached)return}else e._vts=Date.now();callWithAsyncErrorHandling(patchStopImmediatePropagation(e,i.value),t,5,[e])};return i.value=e,i.attached=getNow(),i}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const isNativeOn=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,i,s,n,a)=>{const r="svg"===n;"class"===t?patchClass(e,s,r):"style"===t?patchStyle(e,i,s):isOn(t)?isModelListener(t)||patchEvent(e,t,i,s,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):shouldSetAsProp(e,t,s,r))?(patchDOMProp(e,t,s),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||patchAttr(e,t,s,r,a,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&isString$2(s)?("true-value"===t?e._trueValue=s:"false-value"===t&&(e._falseValue=s),patchAttr(e,t,s,r)):patchDOMProp(e,camelize(t),s,a,t)};function shouldSetAsProp(e,t,i,s){if(s)return"innerHTML"===t||"textContent"===t||!!(t in e&&isNativeOn(t)&&isFunction$1(i));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!isNativeOn(t)||!isString$2(i))&&t in e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>systemModifiers.some((i=>e[`${i}Key`]&&!t.includes(i)))},withModifiers=(e,t)=>{const i=e._withMods||(e._withMods={}),s=t.join(".");return i[s]||(i[s]=(i,...s)=>{for(let e=0;e<t.length;e++){const s=modifierGuards[t[e]];if(s&&s(i,t))return}return e(i,...s)})},rendererOptions=extend$1({patchProp:patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:i}=t;return t.mount=e=>{const s=normalizeContainer(e);if(!s)return;const n=t._component;isFunction$1(n)||n.render||n.template||(n.template=s.innerHTML),1===s.nodeType&&(s.textContent="");const a=i(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function resolveRootNamespace(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function normalizeContainer(e){return isString$2(e)?document.querySelector(e):e}var phaserExports=requirePhaser();const Phaser$1=getDefaultExportFromCjs(phaserExports),EventBus=new Phaser$1.Events.EventEmitter;class NumberFormatter{static format(e){if("number"!=typeof e)throw new TypeError("");if(0===e)return"0";const t=e<0,i=Math.abs(e).toString();let s="";for(let n=i.length-1;n>=0;n--)s=i[n]+s,(i.length-n)%3==0&&0!==n&&(s=","+s);return t?"-"+s:s}}class Component extends Phaser.GameObjects.Container{constructor(e,t,i,s){super(e,t,i,s),e.add.existing(this)}}const isString$1=e=>"string"==typeof e,defer=()=>{let e,t;const i=new Promise(((i,s)=>{e=i,t=s}));return i.resolve=e,i.reject=t,i},makeString=e=>null==e?"":""+e,copy=(e,t,i)=>{e.forEach((e=>{t[e]&&(i[e]=t[e])}))},lastOfPathSeparatorRegExp=/###/g,cleanKey=e=>e&&e.indexOf("###")>-1?e.replace(lastOfPathSeparatorRegExp,"."):e,canNotTraverseDeeper=e=>!e||isString$1(e),getLastOfPath=(e,t,i)=>{const s=isString$1(t)?t.split("."):t;let n=0;for(;n<s.length-1;){if(canNotTraverseDeeper(e))return{};const t=cleanKey(s[n]);!e[t]&&i&&(e[t]=new i),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++n}return canNotTraverseDeeper(e)?{}:{obj:e,k:cleanKey(s[n])}},setPath=(e,t,i)=>{const{obj:s,k:n}=getLastOfPath(e,t,Object);if(void 0!==s||1===t.length)return void(s[n]=i);let a=t[t.length-1],r=t.slice(0,t.length-1),o=getLastOfPath(e,r,Object);for(;void 0===o.obj&&r.length;)a=`${r[r.length-1]}.${a}`,r=r.slice(0,r.length-1),o=getLastOfPath(e,r,Object),(null==o?void 0:o.obj)&&void 0!==o.obj[`${o.k}.${a}`]&&(o.obj=void 0);o.obj[`${o.k}.${a}`]=i},pushPath=(e,t,i,s)=>{const{obj:n,k:a}=getLastOfPath(e,t,Object);n[a]=n[a]||[],n[a].push(i)},getPath=(e,t)=>{const{obj:i,k:s}=getLastOfPath(e,t);if(i&&Object.prototype.hasOwnProperty.call(i,s))return i[s]},getPathWithDefaults=(e,t,i)=>{const s=getPath(e,i);return void 0!==s?s:getPath(t,i)},deepExtend=(e,t,i)=>{for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?isString$1(e[s])||e[s]instanceof String||isString$1(t[s])||t[s]instanceof String?i&&(e[s]=t[s]):deepExtend(e[s],t[s],i):e[s]=t[s]);return e},regexEscape=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape$1=e=>isString$1(e)?e.replace(/[&<>"'\/]/g,(e=>_entityMap[e])):e;class RegExpCache{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(e,t,i)=>{t=t||"",i=i||"";const s=chars.filter((e=>t.indexOf(e)<0&&i.indexOf(e)<0));if(0===s.length)return!0;const n=looksLikeObjectPathRegExpCache.getRegExp(`(${s.map((e=>"?"===e?"\\?":e)).join("|")})`);let a=!n.test(e);if(!a){const t=e.indexOf(i);t>0&&!n.test(e.substring(0,t))&&(a=!0)}return a},deepFind=(e,t,i=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const s=t.split(i);let n=e;for(let a=0;a<s.length;){if(!n||"object"!=typeof n)return;let e,t="";for(let r=a;r<s.length;++r)if(r!==a&&(t+=i),t+=s[r],e=n[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&r<s.length-1)continue;a+=r-a+1;break}n=e}return n},getCleanedCode=e=>null==e?void 0:e.replace("_","-"),consoleLogger={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var i,s;null==(s=null==(i=null==console?void 0:console[e])?void 0:i.apply)||s.call(i,console,t)}};class Logger{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||consoleLogger,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,s){return s&&!this.debug?null:(isString$1(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Logger(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Logger(this.logger,e)}}var baseLogger=new Logger;let EventEmitter$2=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const i=this.observers[e].get(t)||0;this.observers[e].set(t,i+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach((([e,i])=>{for(let s=0;s<i;s++)e(...t)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((([i,s])=>{for(let n=0;n<s;n++)i.apply(i,[e,...t])}))}};class ResourceStore extends EventEmitter$2{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,s={}){var n,a;const r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,o=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],i&&(Array.isArray(i)?l.push(...i):isString$1(i)&&r?l.push(...i.split(r)):l.push(i)));const h=getPath(this.data,l);return!h&&!t&&!i&&e.indexOf(".")>-1&&(e=l[0],t=l[1],i=l.slice(2).join(".")),!h&&o&&isString$1(i)?deepFind(null==(a=null==(n=this.data)?void 0:n[e])?void 0:a[t],i,r):h}addResource(e,t,i,s,n={silent:!1}){const a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let r=[e,t];i&&(r=r.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(r=e.split("."),s=t,t=r[1]),this.addNamespaces(t),setPath(this.data,r,s),n.silent||this.emit("added",e,t,i,s)}addResources(e,t,i,s={silent:!1}){for(const n in i)(isString$1(i[n])||Array.isArray(i[n]))&&this.addResource(e,t,n,i[n],{silent:!0});s.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,s,n,a={silent:!1,skipCopy:!1}){let r=[e,t];e.indexOf(".")>-1&&(r=e.split("."),s=i,i=t,t=r[1]),this.addNamespaces(t);let o=getPath(this.data,r)||{};a.skipCopy||(i=JSON.parse(JSON.stringify(i))),s?deepExtend(o,i,n):o={...o,...i},setPath(this.data,r,o),a.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,i,s,n){return e.forEach((e=>{var a;t=(null==(a=this.processors[e])?void 0:a.process(t,i,s,n))??t})),t}};const checkedLoadedFor={},shouldHandleAsObject=e=>!isString$1(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Translator extends EventEmitter$2{constructor(e,t={}){super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(null==e)return!1;const s=this.resolve(e,i);return void 0!==(null==s?void 0:s.res)}extractFromKey(e,t){let i=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===i&&(i=":");const s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,r=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||looksLikeObjectPath(e,i,s));if(a&&!r){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:isString$1(n)?[n]:n};const a=e.split(i);(i!==s||i===s&&this.options.ns.indexOf(a[0])>-1)&&(n=a.shift()),e=a.join(s)}return{key:e,namespaces:isString$1(n)?[n]:n}}translate(e,t,i){let s="object"==typeof t?{...t}:t;if("object"!=typeof s&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(s={...s}),s||(s={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const n=void 0!==s.returnDetails?s.returnDetails:this.options.returnDetails,a=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,{key:r,namespaces:o}=this.extractFromKey(e[e.length-1],s),l=o[o.length-1];let h=void 0!==s.nsSeparator?s.nsSeparator:this.options.nsSeparator;void 0===h&&(h=":");const d=s.lng||this.language,c=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==d?void 0:d.toLowerCase()))return c?n?{res:`${l}${h}${r}`,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:`${l}${h}${r}`:n?{res:r,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:r;const u=this.resolve(e,s);let p=null==u?void 0:u.res;const g=(null==u?void 0:u.usedKey)||r,m=(null==u?void 0:u.exactUsedKey)||r,f=void 0!==s.joinArrays?s.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,b=void 0!==s.count&&!isString$1(s.count),y=Translator.hasDefaultValue(s),C=b?this.pluralResolver.getSuffix(d,s.count,s):"",x=s.ordinal&&b?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",S=b&&!s.ordinal&&0===s.count,w=S&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${C}`]||s[`defaultValue${x}`]||s.defaultValue;let T=p;v&&!p&&y&&(T=w);const P=shouldHandleAsObject(T),_=Object.prototype.toString.apply(T);if(!(v&&T&&P&&["[object Number]","[object Function]","[object RegExp]"].indexOf(_)<0)||isString$1(f)&&Array.isArray(T))if(v&&isString$1(f)&&Array.isArray(p))p=p.join(f),p&&(p=this.extendTranslation(p,e,s,i));else{let t=!1,n=!1;!this.isValidLookup(p)&&y&&(t=!0,p=w),this.isValidLookup(p)||(n=!0,p=r);const o=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&n?void 0:p,c=y&&w!==p&&this.options.updateMissing;if(n||t||c){if(this.logger.log(c?"updateKey":"missingKey",d,l,r,c?w:p),a){const e=this.resolve(r,{...s,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let s=0;s<t.length;s++)e.push(t[s]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(s.lng||this.language):e.push(s.lng||this.language);const i=(e,t,i)=>{var n;const a=y&&i!==p?i:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,a,c,s):(null==(n=this.backendConnector)?void 0:n.saveMissing)&&this.backendConnector.saveMissing(e,l,t,a,c,s),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,s);S&&s[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{i([e],r+t,s[`defaultValue${t}`]||w)}))})):i(e,r,w))}p=this.extendTranslation(p,e,s,u,i),n&&p===r&&this.options.appendNamespaceToMissingKey&&(p=`${l}${h}${r}`),(n||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${h}${r}`:r,t?p:void 0,s))}else{if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,T,{...s,ns:o}):`key '${r} (${this.language})' returned an object instead of string.`;return n?(u.res=e,u.usedParams=this.getUsedParamsDetails(s),u):e}if(a){const e=Array.isArray(T),t=e?[]:{},i=e?m:g;for(const n in T)if(Object.prototype.hasOwnProperty.call(T,n)){const e=`${i}${a}${n}`;t[n]=y&&!p?this.translate(e,{...s,defaultValue:shouldHandleAsObject(w)?w[n]:void 0,joinArrays:!1,ns:o}):this.translate(e,{...s,joinArrays:!1,ns:o}),t[n]===e&&(t[n]=T[n])}p=t}}return n?(u.res=p,u.usedParams=this.getUsedParamsDetails(s),u):p}extendTranslation(e,t,i,s,n){var a,r;if(null==(a=this.i18nFormat)?void 0:a.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const a=isString$1(e)&&(void 0!==(null==(r=null==i?void 0:i.interpolation)?void 0:r.skipOnVariables)?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(a){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let l=i.replace&&!isString$1(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,i.lng||this.language||s.usedLng,i),a){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(i.nest=!1)}!i.lng&&s&&s.res&&(i.lng=this.language||s.usedLng),!1!==i.nest&&(e=this.interpolator.nest(e,((...e)=>(null==n?void 0:n[0])!==e[0]||i.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null)),i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,l=isString$1(o)?[o]:o;return null!=e&&(null==l?void 0:l.length)&&!1!==i.applyPostProcessor&&(e=postProcessor.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,s,n,a,r;return isString$1(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(i))return;const o=this.extractFromKey(e,t),l=o.key;s=l;let h=o.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=void 0!==t.count&&!isString$1(t.count),c=d&&!t.ordinal&&0===t.count,u=void 0!==t.context&&(isString$1(t.context)||"number"==typeof t.context)&&""!==t.context,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach((e=>{var o,h;this.isValidLookup(i)||(r=e,checkedLoadedFor[`${p[0]}-${e}`]||!(null==(o=this.utils)?void 0:o.hasLoadedNamespace)||(null==(h=this.utils)?void 0:h.hasLoadedNamespace(r))||(checkedLoadedFor[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${s}" for languages "${p.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((s=>{var r;if(this.isValidLookup(i))return;a=s;const o=[l];if(null==(r=this.i18nFormat)?void 0:r.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,s,e,t);else{let e;d&&(e=this.pluralResolver.getSuffix(s,t.count,t));const i=`${this.options.pluralSeparator}zero`,n=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(o.push(l+e),t.ordinal&&0===e.indexOf(n)&&o.push(l+e.replace(n,this.options.pluralSeparator)),c&&o.push(l+i)),u){const s=`${l}${this.options.contextSeparator}${t.context}`;o.push(s),d&&(o.push(s+e),t.ordinal&&0===e.indexOf(n)&&o.push(s+e.replace(n,this.options.pluralSeparator)),c&&o.push(s+i))}}let h;for(;h=o.pop();)this.isValidLookup(i)||(n=h,i=this.getResource(s,e,h,t))})))}))})),{res:i,usedKey:s,exactUsedKey:n,usedLng:a,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,i,s={}){var n;return(null==(n=this.i18nFormat)?void 0:n.getResource)?this.i18nFormat.getResource(e,t,i,s):this.resourceStore.getResource(e,t,i,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!isString$1(e.replace);let s=i?e.replace:e;if(i&&void 0!==e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!i){s={...s};for(const e of t)delete s[e]}return s}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}class LanguageUtil{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(e){if(!(e=getCleanedCode(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=getCleanedCode(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(t){if(isString$1(t)&&t.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(t)[0]}catch(e){}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const i=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(i)||(t=i)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const i=this.getScriptPartFromCode(e);if(this.isSupportedCode(i))return t=i;const s=this.getLanguagePartFromCode(e);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find((e=>e===s?e:e.indexOf("-")<0&&s.indexOf("-")<0?void 0:e.indexOf("-")>0&&s.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===s||0===e.indexOf(s)&&s.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),isString$1(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),s=[],n=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return isString$1(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(e))):isString$1(e)&&n(this.formatLanguageCode(e)),i.forEach((e=>{s.indexOf(e)<0&&n(this.formatLanguageCode(e))})),s}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=getCleanedCode("dev"===e?"en":e),s=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:i,type:s});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let a;try{a=new Intl.PluralRules(i,{type:s})}catch(r){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!e.match(/-|_/))return dummyRule;const i=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(i,t)}return this.pluralRulesCache[n]=a,a}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(null==i?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map((e=>`${t}${e}`))}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort(((e,t)=>suffixesOrder[e]-suffixesOrder[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):[]}getSuffix(e,t,i={}){const s=this.getRule(e,i);return s?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const deepFindWithDefaults=(e,t,i,s=".",n=!0)=>{let a=getPathWithDefaults(e,t,i);return!a&&n&&isString$1(i)&&(a=deepFind(e,i,s),void 0===a&&(a=deepFind(t,i,s))),a},regexSafe=e=>e.replace(/\$/g,"$$$$");class Interpolator{constructor(e={}){var t;this.logger=baseLogger.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:s,prefix:n,prefixEscaped:a,suffix:r,suffixEscaped:o,formatSeparator:l,unescapeSuffix:h,unescapePrefix:d,nestingPrefix:c,nestingPrefixEscaped:u,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:f,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:escape$1,this.escapeValue=void 0===i||i,this.useRawValueToEscape=void 0!==s&&s,this.prefix=n?regexEscape(n):a||"{{",this.suffix=r?regexEscape(r):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=h?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=c?regexEscape(c):u||regexEscape("$t("),this.nestingSuffix=p?regexEscape(p):g||regexEscape(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,s){var n;let a,r,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=e=>{if(e.indexOf(this.formatSeparator)<0){const n=deepFindWithDefaults(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(n,void 0,i,{...s,...t,interpolationkey:e}):n}const n=e.split(this.formatSeparator),a=n.shift().trim(),r=n.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(t,l,a,this.options.keySeparator,this.options.ignoreJSONStructure),r,i,{...s,...t,interpolationkey:a})};this.resetRegExp();const d=(null==s?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,c=void 0!==(null==(n=null==s?void 0:s.interpolation)?void 0:n.skipOnVariables)?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>regexSafe(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?regexSafe(this.escape(e)):regexSafe(e)}].forEach((t=>{for(o=0;a=t.regex.exec(e);){const i=a[1].trim();if(r=h(i),void 0===r)if("function"==typeof d){const t=d(e,a,s);r=isString$1(t)?t:""}else if(s&&Object.prototype.hasOwnProperty.call(s,i))r="";else{if(c){r=a[0];continue}this.logger.warn(`missed to pass in variable ${i} for interpolating ${e}`),r=""}else isString$1(r)||this.useRawValueToEscape||(r=makeString(r));const n=t.safeValue(r);if(e=e.replace(a[0],n),c?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(t,i,s={}){let n,a,r;const o=(t,i)=>{const s=this.nestingOptionsSeparator;if(t.indexOf(s)<0)return t;const n=t.split(new RegExp(`${s}[ ]*{`));let a=`{${n[1]}`;t=n[0],a=this.interpolate(a,r);const o=a.match(/'/g),l=a.match(/"/g);(((null==o?void 0:o.length)??0)%2==0&&!l||l.length%2!=0)&&(a=a.replace(/'/g,'"'));try{r=JSON.parse(a),i&&(r={...i,...r})}catch(e){return this.logger.warn(`failed parsing options string in nesting for key ${t}`,e),`${t}${s}${a}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,t};for(;n=this.nestingRegexp.exec(t);){let e=[];r={...s},r=r.replace&&!isString$1(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const t=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=t.shift(),e=t,l=!0}if(a=i(o.call(this,n[1].trim(),r),r),a&&n[0]===t&&!isString$1(a))return a;isString$1(a)||(a=makeString(a)),a||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),a=""),l&&(a=e.reduce(((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:n[1].trim()})),a.trim())),t=t.replace(n[0],a),this.regexp.lastIndex=0}return t}}const parseFormatStr=e=>{let t=e.toLowerCase().trim();const i={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);"currency"===t&&n.indexOf(":")<0?i.currency||(i.currency=n.trim()):"relativetime"===t&&n.indexOf(":")<0?i.range||(i.range=n.trim()):n.split(";").forEach((e=>{if(e){const[t,...s]=e.split(":"),n=s.join(":").trim().replace(/^'+|'+$/g,""),a=t.trim();i[a]||(i[a]=n),"false"===n&&(i[a]=!1),"true"===n&&(i[a]=!0),isNaN(n)||(i[a]=parseInt(n,10))}}))}return{formatName:t,formatOptions:i}},createCachedFormatter=e=>{const t={};return(i,s,n)=>{let a=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(a={...a,[n.interpolationkey]:void 0});const r=s+JSON.stringify(a);let o=t[r];return o||(o=e(getCleanedCode(s),n),t[r]=o),o(i)}},createNonCachedFormatter=e=>(t,i,s)=>e(getCleanedCode(i),s)(t);class Formatter{constructor(e={}){this.logger=baseLogger.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:i(((e,t)=>{const i=new Intl.NumberFormat(e,{...t});return e=>i.format(e)})),currency:i(((e,t)=>{const i=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>i.format(e)})),datetime:i(((e,t)=>{const i=new Intl.DateTimeFormat(e,{...t});return e=>i.format(e)})),relativetime:i(((e,t)=>{const i=new Intl.RelativeTimeFormat(e,{...t});return e=>i.format(e,t.range||"day")})),list:i(((e,t)=>{const i=new Intl.ListFormat(e,{...t});return e=>i.format(e)}))}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=createCachedFormatter(t)}format(e,t,i,s={}){const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find((e=>e.indexOf(")")>-1))){const e=n.findIndex((e=>e.indexOf(")")>-1));n[0]=[n[0],...n.splice(1,e)].join(this.formatSeparator)}return n.reduce(((e,t)=>{var n;const{formatName:a,formatOptions:r}=parseFormatStr(t);if(this.formats[a]){let t=e;try{const o=(null==(n=null==s?void 0:s.formatParams)?void 0:n[s.interpolationkey])||{},l=o.locale||o.lng||s.locale||s.lng||i;t=this.formats[a](e,l,{...r,...s,...o})}catch(o){this.logger.warn(o)}return t}return this.logger.warn(`there was no format function for ${a}`),e}),e)}}const removePending=(e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)};class Connector extends EventEmitter$2{constructor(e,t,i,s={}){var n,a;super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=s,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],null==(a=null==(n=this.backend)?void 0:n.init)||a.call(n,i,s.backend,s)}queueLoad(e,t,i,s){const n={},a={},r={},o={};return e.forEach((e=>{let s=!0;t.forEach((t=>{const r=`${e}|${t}`;!i.reload&&this.store.hasResourceBundle(e,t)?this.state[r]=2:this.state[r]<0||(1===this.state[r]?void 0===a[r]&&(a[r]=!0):(this.state[r]=1,s=!1,void 0===a[r]&&(a[r]=!0),void 0===n[r]&&(n[r]=!0),void 0===o[t]&&(o[t]=!0)))})),s||(r[e]=!0)})),(Object.keys(n).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(n),pending:Object.keys(a),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(o)}}loaded(e,t,i){const s=e.split("|"),n=s[0],a=s[1];t&&this.emit("failedLoading",n,a,t),!t&&i&&this.store.addResourceBundle(n,a,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const r={};this.queue.forEach((i=>{pushPath(i.loaded,[n],a),removePending(i,e),t&&i.errors.push(t),0!==i.pendingCount||i.done||(Object.keys(i.loaded).forEach((e=>{r[e]||(r[e]={});const t=i.loaded[e];t.length&&t.forEach((t=>{void 0===r[e][t]&&(r[e][t]=!0)}))})),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())})),this.emit("loaded",r),this.queue=this.queue.filter((e=>!e.done))}read(e,t,i,s=0,n=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:i,tried:s,wait:n,callback:a});this.readingCalls++;const r=(r,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}r&&o&&s<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,i,s+1,2*n,a)}),n):a(r,o)},o=this.backend[i].bind(this.backend);if(2!==o.length)return o(e,t,r);try{const i=o(e,t);i&&"function"==typeof i.then?i.then((e=>r(null,e))).catch(r):r(null,i)}catch(l){r(l)}}prepareLoading(e,t,i={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();isString$1(e)&&(e=this.languageUtils.toResolveHierarchy(e)),isString$1(t)&&(t=[t]);const n=this.queueLoad(e,t,i,s);if(!n.toLoad.length)return n.pending.length||s(),null;n.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),s=i[0],n=i[1];this.read(s,n,"read",void 0,void 0,((i,a)=>{i&&this.logger.warn(`${t}loading namespace ${n} for language ${s} failed`,i),!i&&a&&this.logger.log(`${t}loaded namespace ${n} for language ${s}`,a),this.loaded(e,i,a)}))}saveMissing(e,t,i,s,n,a={},r=()=>{}){var o,l,h,d,c;if(!(null==(l=null==(o=this.services)?void 0:o.utils)?void 0:l.hasLoadedNamespace)||(null==(d=null==(h=this.services)?void 0:h.utils)?void 0:d.hasLoadedNamespace(t))){if(null!=i&&""!==i){if(null==(c=this.backend)?void 0:c.create){const o={...a,isUpdate:n},l=this.backend.create.bind(this.backend);if(l.length<6)try{let n;n=5===l.length?l(e,t,i,s,o):l(e,t,i,s),n&&"function"==typeof n.then?n.then((e=>r(null,e))).catch(r):r(null,n)}catch(u){r(u)}else l(e,t,i,s,r,o)}e&&e[0]&&this.store.addResource(e[0],t,i,s)}}else this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),isString$1(e[1])&&(t.defaultValue=e[1]),isString$1(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const i=e[3]||e[2];Object.keys(i).forEach((e=>{t[e]=i[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=e=>{var t,i;return isString$1(e.ns)&&(e.ns=[e.ns]),isString$1(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),isString$1(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(i=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:i.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},noop$1=()=>{},bindMemberFunctions=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((t=>{"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))};class I18n extends EventEmitter$2{constructor(e={},t){if(super(),this.options=transformOptions(e),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(isString$1(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=get();this.options={...i,...this.options,...transformOptions(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?baseLogger.init(s(this.modules.logger),this.options):baseLogger.init(null,this.options),e=this.modules.formatter?this.modules.formatter:Formatter;const t=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const n=this.services;n.logger=baseLogger,n.resourceStore=this.store,n.languageUtils=t,n.pluralResolver=new PluralResolver(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!e||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(n.formatter=s(e),n.formatter.init(n,this.options),this.options.interpolation.format=n.formatter.format.bind(n.formatter)),n.interpolator=new Interpolator(this.options),n.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},n.backendConnector=new Connector(s(this.modules.backend),n.resourceStore,n,this.options),n.backendConnector.on("*",((e,...t)=>{this.emit(e,...t)})),this.modules.languageDetector&&(n.languageDetector=s(this.modules.languageDetector),n.languageDetector.init&&n.languageDetector.init(n,this.options.detection,this.options)),this.modules.i18nFormat&&(n.i18nFormat=s(this.modules.i18nFormat),n.i18nFormat.init&&n.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",((e,...t)=>{this.emit(e,...t)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,t||(t=noop$1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((e=>{this[e]=(...t)=>this.store[e](...t)})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((e=>{this[e]=(...t)=>(this.store[e](...t),this)}));const n=defer(),a=()=>{const e=(e,i)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),n.resolve(i),t(e,i)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),n}loadResources(e,t=noop$1){var i,s;let n=t;const a=isString$1(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==a?void 0:a.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};a?t(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>t(e))),null==(s=null==(i=this.options.preload)?void 0:i.forEach)||s.call(i,(e=>t(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)}))}else n(null)}reloadResources(e,t,i){const s=defer();return"function"==typeof e&&(i=e,e=void 0),"function"==typeof t&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=noop$1),this.services.backendConnector.reload(e,t,(e=>{s.resolve(),i(e)})),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&postProcessor.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=defer();this.emit("languageChanging",e);const s=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},n=(n,a)=>{a?this.isLanguageChangingTo===e&&(s(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,i.resolve(((...e)=>this.t(...e))),t&&t(n,((...e)=>this.t(...e)))},a=t=>{var i,a;e||t||!this.services.languageDetector||(t=[]);const r=isString$1(t)?t:t&&t[0],o=this.store.hasLanguageSomeTranslations(r)?r:this.services.languageUtils.getBestMatchFromCodes(isString$1(t)?[t]:t);o&&(this.language||s(o),this.translator.language||this.translator.changeLanguage(o),null==(a=null==(i=this.services.languageDetector)?void 0:i.cacheUserLanguage)||a.call(i,o)),this.loadResources(o,(e=>{n(e,o)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),i}getFixedT(e,t,i){const s=(e,t,...n)=>{let a;a="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(n)):{...t},a.lng=a.lng||s.lng,a.lngs=a.lngs||s.lngs,a.ns=a.ns||s.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||i||s.keyPrefix);const r=this.options.keySeparator||".";let o;return o=a.keyPrefix&&Array.isArray(e)?e.map((e=>`${a.keyPrefix}${r}${e}`)):a.keyPrefix?`${a.keyPrefix}${r}${e}`:e,this.t(o,a)};return isString$1(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=i,s}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;const a=(e,t)=>{const i=this.services.backendConnector.state[`${e}|${t}`];return-1===i||0===i||2===i};if(t.precheck){const e=t.precheck(this,a);if(void 0!==e)return e}return!(!this.hasResourceBundle(i,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!a(i,e)||s&&!a(n,e)))}loadNamespaces(e,t){const i=defer();return this.options.ns?(isString$1(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=defer();isString$1(e)&&(e=[e]);const s=this.options.preload||[],n=e.filter((e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return n.length?(this.options.preload=s.concat(n),this.loadResources((e=>{i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}dir(e){var t,i;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";const s=(null==(i=this.services)?void 0:i.languageUtils)||new LanguageUtil(get());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new I18n(e,t)}cloneInstance(e={},t=noop$1){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},n=new I18n(s);if(void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e)),["store","services","language"].forEach((e=>{n[e]=this[e]})),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},i){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce(((i,s)=>(i[s]={...e[t][s]},i)),e[t]),e)),{});n.store=new ResourceStore(e,s),n.services.resourceStore=n.store}return n.translator=new Translator(n.services,s),n.translator.on("*",((e,...t)=>{n.emit(e,...t)})),n.init(s,t),n.translator.options=s,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance,instance.createInstance,instance.dir,instance.init,instance.loadResources,instance.reloadResources,instance.use,instance.changeLanguage,instance.getFixedT,instance.t,instance.exists,instance.setDefaultNamespace,instance.hasLoadedNamespace,instance.loadNamespaces,instance.loadLanguages;class Currency extends Component{constructor(e,t,i,s=!0,n){super(e,t,i,n),__publicField(this,"itemId"),__publicField(this,"isClickAddbtn",!0);let a=this,r=e.add.image(0,0,"common-atlas","frame_Currency column.png"),o=null;s&&(o=e.add.image(60,0,"common-atlas","btn_add.png").setOrigin(.5,.5).setInteractive(),o.on("pointerdown",(()=>{var t;e.game.gameState===GameConfig.GameState.NORMAL&&this.isClickAddbtn&&(null==(t=e.game.AudioSetUp)||t.play("currencyAudio"),e.events.emit("open_view",{viewName:"MissionsView",showFlowerPanel:!1,currency:"1"}))})));let l=e.add.image(-60,0).setOrigin(.5,.5).setInteractive({hitArea:new Phaser.Geom.Rectangle(-20,-20,80,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{1000001==a.itemId&&e.game.propTips.show(1,"Event_5_C2_Pandora_183"),1000002==a.itemId&&e.game.propTips.show(2,"Event_5_C2_Pandora_184")})),h=e.add.text(0,0,"",{fontSize:"20px",color:"#fff",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(.5,.5);this.setItem=(t,i,s,n)=>{var r;if(0==t)return l.removeInteractive(),l.setTexture(i,s),h.setText(instance.t("Event_5_C2_Pandora_24")),o&&o.setVisible(!1),void((null==(r=this.input)?void 0:r.enabled)||this.setInteractive({hitArea:new Phaser.Geom.Rectangle(-100,-40,180,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains}).on("pointerdown",(()=>{e.events.emit("open_view",{viewName:"BagView",showFlowerPanel:!0})})));this.input&&this.removeInteractive(),l.setInteractive(),o&&o.setVisible(!0),a.itemId=t,l.setTexture(i,s);const{iAmount:d=0}=n;"string"==typeof n?h.setText(n):h.setText(NumberFormatter.format(d))},this.setAmmount=e=>{const t=Number(h.text.replace(/,/g,"")),i=Number(t)+e;h.setText(NumberFormatter.format(i))};const d=[r,l,h];o&&d.push(o),this.add(d),e.add.existing(this),e.events.on("MissionsStatus",(e=>{0==e.val?this.isClickAddbtn=!0:this.isClickAddbtn=!1}))}}const GameConfig={GameName:"",Version:"0.0.4",Screen:{width:1334,height:750},Xsso:{LoginURL:"https://xsso.leagueoflegends.com/login",LOGOUTURL:"https://xsso.leagueoflegends.com/logout"},Server:{AS:"https://as.api.h5.wildrift.leagueoflegends.com/5c/crystalrose/pub",EU:"https://eu.api.h5.wildrift.leagueoflegends.com/5c/crystalrose/pub",AM:"https://na.api.h5.wildrift.leagueoflegends.com/5c/crystalrose/pub"},ServerText:{AS:"AS",EU:"EU",AM:"NA"},ItemType:{TIC_ITEM:0,TIC_SEED:1,TIC_FLOWER:2,TIC_BUILDING:3,TIC_GAME_ITEM:4},GameState:{NORMAL:0,PLANTING:1,CAMERA:2,BUILDING:3,WATER:4},Data:{FarmView:{Currency:[{Icon:"icon_currency2.png",ItemId:1000002},{Icon:"icon_currency1.png",ItemId:1000001}]},HomeView:{Currency:[{Icon:"icon_currency2.png",ItemId:1000002},{Icon:"icon_currency1.png",ItemId:1000001}]},StoreView:{CurrencyOne:[{Icon:"icon_currency1.png",ItemId:1000001}],CurrencyTwo:[{Icon:"icon_currency3.png",ItemId:0}],CurrencyThree:[{Icon:"icon_currency2.png",ItemId:1000002},{Icon:"icon_currency3.png",ItemId:0}]},MissionsView:{Currency:[{Icon:"icon_currency2.png",ItemId:1000002},{Icon:"icon_currency1.png",ItemId:1000001}]},Level:{ExpItemId:1e6},Lands:[{Index:1,Position:{X:-353,Y:2}},{Index:2,Position:{X:-140,Y:-105}},{Index:3,Position:{X:65,Y:-205}},{Index:4,Position:{X:-92,Y:135}},{Index:5,Position:{X:123,Y:27}},{Index:6,Position:{X:328,Y:-73}}],Home:{"1x1":{width:1,height:1,canPlace:"land_yellow_selector2.png",cannotPlace:"land_red_selector2.png",offectX:-3,offectY:-30},"2x2":{width:2,height:2,canPlace:"land_yellow_selector3.png",cannotPlace:"land_red_selector3.png",offectX:0,offectY:-3},"2x3":{width:3,height:2,canPlace:"land_yellow_selector9.png",cannotPlace:"land_red_selector9.png",offectX:23,offectY:-28},"3x2":{width:2,height:3,canPlace:"land_yellow_selector5.png",cannotPlace:"land_red_selector5.png",offectX:-25,offectY:-15},"1x2":{width:2,height:1,canPlace:"land_yellow_selector8.png",cannotPlace:"land_red_selector8.png",offectX:25,offectY:-50},"2x1":{width:1,height:2,canPlace:"land_yellow_selector4.png",cannotPlace:"land_red_selector4.png",offectX:-25,offectY:-10},"2x4":{width:4,height:2,canPlace:"land_yellow_selector7.png",cannotPlace:"land_red_selector7.png",offectX:50,offectY:-15},"3x3":{width:3,height:3,canPlace:"land_yellow_selector.png",cannotPlace:"land_red_selector.png",offectX:0,offectY:-15},"1x3":{width:1,height:3},"3x1":{width:3,height:1}},Publisher:{1:"igame_profile_picture1_Lux_bust.png",2:"igame_profile_picture2_Ezreal_bust.png",10:"igame_profile_picture10_Gwen_bust.png",12:"igame_profile_picture12_Seraphine_bust.png",8:"igame_profile_picture8_Yone_bust.png",7:"igame_profile_picture7_Akali_bust.png",15:"igame_profile_picture15_Kaisa_bust.png",17:"igame_profile_picture17_Vladimir_bust.png",22:"igame_profile_picture22_Ahri_bust.png",23:"igame_profile_picture23_Caitlyn_bust.png"},BuildingOffset:{4e6:{x:0,y:-70},4000001:{x:0,y:-37},4000002:{x:0,y:-37},4000003:{x:0,y:-37},4000004:{x:0,y:-70},4000005:{x:0,y:-42},4000006:{x:0,y:-42},4000007:{x:0,y:-42},4000008:{x:0,y:0},4000009:{x:0,y:0,offectY:100},4000010:{x:0,y:0,offectY:100},4000011:{x:0,y:-33},4000012:{x:0,y:-33},4000013:{x:0,y:-33},4000014:{x:0,y:-28,offectY:100,offectX:-8},4000015:{x:0,y:-28,offectY:100,offectX:-8},4000016:{x:0,y:-28,offectY:100,offectX:-8},4000017:{x:0,y:-28,offectY:100,offectX:-8},4000018:{x:0,y:-28,offectY:100,offectX:-8},4000019:{x:0,y:-28,offectY:100,offectX:-8},4000020:{x:0,y:-15},4000021:{x:0,y:-15},4000022:{x:0,y:-10,offectY:95,offectX:-8},4000023:{x:5,y:-30,offectY:155,offectX:10},4000024:{x:0,y:-15,offectY:100},4000025:{x:0,y:-20,offectY:140},4000026:{x:0,y:-23,offectY:100,offectX:-3},4000027:{x:0,y:-23,offectY:100,offectX:-3},4000028:{x:0,y:-23,offectY:100,offectX:-3},4000029:{x:0,y:-23,offectY:100,offectX:-3},4000030:{x:0,y:-25,offectY:100,offectX:-3},4000031:{x:0,y:-33,offectY:110,offectX:-3},4000032:{x:0,y:-23,offectY:90,offectX:-3},4000033:{x:0,y:-23,offectY:90,offectX:-3},4000034:{x:0,y:-12,offectY:90,offectX:-3},4000035:{x:0,y:-30,offectY:130,offectX:-3},4000036:{x:0,y:-35,offectY:130,offectX:-3},4000037:{x:10,y:-35,offectY:100,offectX:-10},4000038:{x:5,y:-30,offectY:90,offectX:-3},4000039:{x:0,y:-18,offectY:90,offectX:-3},4000040:{x:0,y:-13,offectY:90,offectX:-3},4000041:{x:0,y:-18,offectY:90,offectX:-3},4000042:{x:0,y:-22,offectY:90,offectX:-3},4000043:{x:0,y:-18,offectY:90,offectX:-3},4000044:{x:0,y:-40,offectY:110,offectX:-3},4000045:{x:0,y:-30,offectY:90,offectX:-3},4000046:{x:0,y:-35,offectY:110,offectX:-3},4000047:{x:0,y:-40,offectY:110,offectX:-3},4000048:{x:0,y:-40,offectY:110,offectX:-3},4000049:{x:0,y:-30,offectY:110,offectX:-3},4000050:{x:0,y:-13,offectY:110,offectX:-3},4000051:{x:0,y:-18,offectY:110,offectX:-3},4000052:{x:0,y:-43},4000053:{x:0,y:-45,offectY:110,offectX:-3},4000054:{x:0,y:-18,offectY:110,offectX:-3}},TaskRewardIcon:{1e6:"icon_exp.png",1000001:"icon_currency1.png",1000002:"icon_currency2.png",2000001:"tulip_mature.png",2000002:"war rose_mature.png",2000003:"soul lotus_mature.png",2000004:"vine_mature.png",2000005:"Iris_mature.png",2000006:"desert rose_mature.png",2000007:"void_mature.png",2000008:"thunderbolt Iris__mature.png",2000009:"rose_mature.png",2000010:"epiphyllum_mature.png",2000011:"lotus_mature.png",2000012:"lily_mature.png",30000001:"2backpack_tulip_flower.png",30000002:"2backpack_war rose_flower.png",30000003:"2backpack_soul lotus_flower.png",30000004:"2backpack_vine_flower.png",30000005:"2backpack_Iris_flower.png",30000006:"2backpack_desert rose_flower.png",30000007:"2backpack_void_flower.png",30000008:"2backpack_thunderbolt Iris__flower.png",30000009:"2backpack_rose_flower.png",30000010:"2backpack_epiphyllum_flower.png",30000011:"2backpack_lotus_flower.png",30000012:"2backpack_lily_flower.png",1013502:"1013502.png",1902000011:"1902000011.png",1902000012:"1902000012.png",1902000045:"1902000045.png",1913000190:"1913000190.png",1913000191:"1913000191.png",1914000173:"1914000173.png",1950000340:"1950000340.png",1953000372:"1953000372.png",1955000920:"1955000920.png",1957000399:"1957000399.png",1988010001:"1988010001.png",1988010002:"1988010002.png",1988010003:"1988010003.png",1988010004:"1988010004.png",1988010005:"1988010005.png",1999999980:"1999999980.png",1999999999:"1999999999.png",9000001:"backpack_tulip_qualification.png",9000002:"backpack_war rose_qualification.png",9000003:"backpack_soul lotus_qualification.png",9000004:"backpack_vine_qualification.png",9000005:"backpack_lris_qualification.png",9000006:"backpack_desert rose_qualification.png",9000007:"backpack_void_qualification.png",9000008:"backpack_thunderbolt lris_qualification.png",9000009:"backpack_rose_qualification.png",9000010:"backpack_epiphyllum_qualification.png",9000011:"backpack_lotus_qualification.png",9000012:"backpack_lily_qualification.png"},TaskPropName:{1e6:"Event_5_C2_Pandora_185",1000001:"Event_5_C2_Pandora_183",1000002:"Event_5_C2_Pandora_184",9000001:"Event_5_C2_Pandora_236",9000002:"Event_5_C2_Pandora_237",9000003:"Event_5_C2_Pandora_238",9000004:"Event_5_C2_Pandora_239",9000005:"Event_5_C2_Pandora_240",9000006:"Event_5_C2_Pandora_241",9000007:"Event_5_C2_Pandora_242",9000008:"Event_5_C2_Pandora_243",9000009:"Event_5_C2_Pandora_244",9000010:"Event_5_C2_Pandora_245",9000011:"Event_5_C2_Pandora_246",9000012:"Event_5_C2_Pandora_247",2000001:"Event_5_C2_Pandora_200",2000002:"Event_5_C2_Pandora_201",2000003:"Event_5_C2_Pandora_202",2000004:"Event_5_C2_Pandora_203",2000005:"Event_5_C2_Pandora_204",2000006:"Event_5_C2_Pandora_205",2000007:"Event_5_C2_Pandora_206",2000008:"Event_5_C2_Pandora_207",2000009:"Event_5_C2_Pandora_208",2000010:"Event_5_C2_Pandora_209",2000011:"Event_5_C2_Pandora_210",2000012:"Event_5_C2_Pandora_211"},TaskPlantIcon:{2000001:"tulip_mature.png",2000002:"war rose_mature.png",2000003:"soul lotus_mature.png",2000004:"vine_mature.png",2000005:"Iris_mature.png",2000006:"desert rose_mature.png",2000007:"void_mature.png",2000008:"thunderbolt Iris__mature.png",2000009:"rose_mature.png",2000010:"epiphyllum_mature.png",2000011:"lotus_mature.png",2000012:"lily_mature.png",3000001:"tulip_flower.png",3000002:"war_rose_flower.png",3000003:"soul_lotus_flower.png",3000004:"vine_flower.png",3000005:"Iris_flower.png",3000006:"desert rose_flower.png",3000007:"void_flower.png",3000008:"thunderbolt_Iris__flower.png",3000009:"rose_flower.png",3000010:"epiphyllum_flower.png",3000011:"lotus_flower.png",3000012:"lily_flower.png"},delayTime:1e4},Sounds:{}};class Boot extends phaserExports.Scene{constructor(){super("Boot")}preload(){this.load.image("loading-background","assets/loading/background3.png"),this.load.atlas("loading-atlas","assets/loading/atlas.png","assets/loading/atlas.json"),this.load.image("loading-icon-rose","assets/loading/icon_logo.png"),console.log(`Version: ${GameConfig.Version}`),this.load.audio("gameBgAudio",["assets/audio/gameAudio.ogg","assets/audio/gameAudio.mp3"]),this.load.audio("buildingPlace",["assets/audio/Pandora_CrystalRose_Build.ogg","assets/audio/pandora-crystalrose-build.mp3"]),this.load.audio("plantAudio",["assets/audio/Pandora_CrystalRose_Plant.ogg","assets/audio/pandora-crystalrose-plant.mp3"]),this.load.audio("shovelAudio",["assets/audio/Pandora_CrystalRose_Remove.ogg","assets/audio/pandora-crystalrose-remove.mp3"]),this.load.audio("kettleAudio",["assets/audio/Pandora_CrystalRose_WaterFlower.ogg","assets/audio/pandora-crystalrose-waterflower.mp3"]),this.load.audio("harvestAudio",["assets/audio/Pandora_CrystalRose_Harvest.ogg","assets/audio/pandora-crystalrose-harvest.mp3"]),this.load.audio("currencyAudio",["assets/audio/Play_UI_Message.ogg","assets/audio/Play_UI_Message.mp3"]),this.load.audio("plantRuleAudio",["assets/audio/Play_collection_browse_enlarge.ogg","assets/audio/play-collection-browse-enlarge.mp3"]),this.load.audio("goHomeAudio",["assets/audio/Play_UI_Checkbox_Click.ogg","assets/audio/Play_UI_Checkbox_Click.mp3"]),this.load.audio("toolClickAudio",["assets/audio/Play_UI_Small_Icon_Click.ogg","assets/audio/Play_UI_Small_Icon_Click.mp3"]),this.load.audio("openShovelAudio",["assets/audio/Play_UI_apply.ogg","assets/audio/play-ui-apply.mp3"]),this.load.audio("plantCloseAudio",["assets/audio/Play_UI_close2.ogg","assets/audio/Play_UI_close2.mp3"]),this.load.audio("bagTabAudio",["assets/audio/Play_UI_paper.ogg","assets/audio/Play_UI_paper.mp3"]),this.load.audio("bagStoreAudio",["assets/audio/Play_UI_button.ogg","assets/audio/play-ui-button.mp3"]),this.load.audio("bagCloseAudio",["assets/audio/Play_UI_mode_click.ogg","assets/audio/Play_UI_mode_click.mp3"]),this.load.audio("bagItemAudio",["assets/audio/Play_UI_click2.ogg","assets/audio/Play_UI_click2.mp3"]),this.load.audio("stroeNumAudio",["assets/audio/Play_UI_number.ogg","assets/audio/Play_UI_number.mp3"]),this.load.audio("rewardAudio",["assets/audio/Play_UI_gift_package.ogg","assets/audio/Play_UI_gift_package.mp3"]),this.load.audio("rewardCloseAudio",["assets/audio/Play_UI_accounts.ogg","assets/audio/play-ui-accounts.mp3"]),this.load.audio("upgradeAudio",["assets/audio/UI_Pandora_CrystalRose_Update.ogg","assets/audio/UI_Pandora_CrystalRose_Update.mp3"])}create(){this.scene.start("Login")}}class GameData{constructor(){this.loginInfo={region:"",isLogo:!1,nickName:"default name"},this.userInfo=null,this.roleInfo=null,this.inviteCode=null,this.userAssets={},this.gameItemSeetings={},this.gameConfig={},this.saveBuilding={},this.getUpInfo={audio:!0,sound:!0,language:"zh_MY"},this.settingInfo=null,this.infoData={bag:{},shop:{},mission:{order:{}}},this.buildingList=[],this.annoucementInfo=[],this.guideData={},this.guideConfig={},this.dialog={reward:!1,levelUp:!1,guide:!1},this.setUserAssets=(e,t,i)=>{var s;(null==(s=this.userAssets)?void 0:s[i])?-1===(null==e?void 0:e.itemIncr)?this.userAssets[i].iAmount-=t:this.userAssets[i].iAmount+=t:this.userAssets[i]={...e,itemId:i,iAmount:t}}}}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString:toString}=Object.prototype,{getPrototypeOf:getPrototypeOf}=Object,{iterator:iterator,toStringTag:toStringTag}=Symbol,kindOf=(e=>t=>{const i=toString.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray:isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>null!==e&&"object"==typeof e,isBoolean=e=>!0===e||!1===e,isPlainObject=e=>{if("object"!==kindOf(e))return!1;const t=getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||toStringTag in e||iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction(e.pipe),isFormData=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||isFunction(e.append)&&("formdata"===(t=kindOf(e))||"object"===t&&isFunction(e.toString)&&"[object FormData]"===e.toString()))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:i=!1}={}){if(null==e)return;let s,n;if("object"!=typeof e&&(e=[e]),isArray(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let r;for(s=0;s<a;s++)r=n[s],t.call(null,e[r],r,e)}}function findKey(e,t){t=t.toLowerCase();const i=Object.keys(e);let s,n=i.length;for(;n-- >0;)if(s=i[n],t===s.toLowerCase())return s;return null}const _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},t={},i=(i,s)=>{const n=e&&findKey(t,s)||s;isPlainObject(t[n])&&isPlainObject(i)?t[n]=merge(t[n],i):isPlainObject(i)?t[n]=merge({},i):isArray(i)?t[n]=i.slice():t[n]=i};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&forEach(arguments[s],i);return t}const extend=(e,t,i,{allOwnKeys:s}={})=>(forEach(t,((t,s)=>{i&&isFunction(t)?e[s]=bind(t,i):e[s]=t}),{allOwnKeys:s}),e),stripBOM=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject=(e,t,i,s)=>{let n,a,r;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)r=n[a],s&&!s(r,e,t)||o[r]||(t[r]=e[r],o[r]=!0);e=!1!==i&&getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return-1!==s&&s===i},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},isTypedArray=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const i=(e&&e[iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},matchAll=(e,t)=>{let i;const s=[];for(;null!==(i=e.exec(t));)s.push(i);return s},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),hasOwnProperty=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};forEach(i,((i,n)=>{let a;!1!==(a=t(i,n,e))&&(s[n]=a||i)})),Object.defineProperties(e,s)},freezeMethods=e=>{reduceDescriptors(e,((t,i)=>{if(isFunction(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const s=e[i];isFunction(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet=(e,t)=>{const i={},s=e=>{e.forEach((e=>{i[e]=!0}))};return isArray(e)?s(e):s(String(e).split(t)),i},noop=()=>{},toFiniteNumber=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&"FormData"===e[toStringTag]&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),i=(e,s)=>{if(isObject(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const n=isArray(e)?[]:{};return forEach(e,((e,t)=>{const a=i(e,s+1);!isUndefined(a)&&(n[t]=a)})),t[s]=void 0,n}}return e};return i(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),_setImmediate=(setImmediateSupported="function"==typeof setImmediate,postMessageSupported=isFunction(_global.postMessage),setImmediateSupported?setImmediate:postMessageSupported?(token=`axios@${Math.random()}`,callbacks=[],_global.addEventListener("message",(({source:e,data:t})=>{e===_global&&t===token&&callbacks.length&&callbacks.shift()()}),!1),e=>{callbacks.push(e),_global.postMessage(token,"*")}):e=>setTimeout(e));var setImmediateSupported,postMessageSupported,token,callbacks;const asap="undefined"!=typeof queueMicrotask?queueMicrotask.bind(_global):"undefined"!=typeof process&&process.nextTick||_setImmediate,isIterable=e=>null!=e&&isFunction(e[iterator]),utils$1={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isBoolean:isBoolean,isObject:isObject,isPlainObject:isPlainObject,isReadableStream:isReadableStream,isRequest:isRequest,isResponse:isResponse,isHeaders:isHeaders,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isRegExp:isRegExp,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isTypedArray:isTypedArray,isFileList:isFileList,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray,forEachEntry:forEachEntry,matchAll:matchAll,isHTMLForm:isHTMLForm,hasOwnProperty:hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors:reduceDescriptors,freezeMethods:freezeMethods,toObjectSet:toObjectSet,toCamelCase:toCamelCase,noop:noop,toFiniteNumber:toFiniteNumber,findKey:findKey,global:_global,isContextDefined:isContextDefined,isSpecCompliantForm:isSpecCompliantForm,toJSONObject:toJSONObject,isAsyncFn:isAsyncFn,isThenable:isThenable,setImmediate:_setImmediate,asap:asap,isIterable:isIterable};function AxiosError$1(e,t,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{descriptors[e]={value:e}})),Object.defineProperties(AxiosError$1,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError$1.from=(e,t,i,s,n,a)=>{const r=Object.create(prototype$1);return utils$1.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),AxiosError$1.call(r,e.message,t,i,s,n),r.cause=e,r.name=e.name,a&&Object.assign(r,a),r};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,i){return e?e.concat(t).map((function(e,t){return e=removeBrackets(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,(function(e){return/^is[A-Z]/.test(e)}));function toFormData$1(e,t,i){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(i=utils$1.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!utils$1.isUndefined(t[e])}))).metaTokens,n=i.visitor||h,a=i.dots,r=i.indexes,o=(i.Blob||"undefined"!=typeof Blob&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(utils$1.isDate(e))return e.toISOString();if(!o&&utils$1.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(e)||utils$1.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function h(e,i,n){let o=e;if(e&&!n&&"object"==typeof e)if(utils$1.endsWith(i,"{}"))i=s?i:i.slice(0,-2),e=JSON.stringify(e);else if(utils$1.isArray(e)&&isFlatArray(e)||(utils$1.isFileList(e)||utils$1.endsWith(i,"[]"))&&(o=utils$1.toArray(e)))return i=removeBrackets(i),o.forEach((function(e,s){!utils$1.isUndefined(e)&&null!==e&&t.append(!0===r?renderKey([i],s,a):null===r?i:i+"[]",l(e))})),!1;return!!isVisitable(e)||(t.append(renderKey(n,i,a),l(e)),!1)}const d=[],c=Object.assign(predicates,{defaultVisitor:h,convertValue:l,isVisitable:isVisitable});if(!utils$1.isObject(e))throw new TypeError("data must be an object");return function e(i,s){if(!utils$1.isUndefined(i)){if(-1!==d.indexOf(i))throw Error("Circular reference detected in "+s.join("."));d.push(i),utils$1.forEach(i,(function(i,a){!0===(!(utils$1.isUndefined(i)||null===i)&&n.call(t,i,utils$1.isString(a)?a.trim():a,s,c))&&e(i,s?s.concat(a):[a])})),d.pop()}}(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,i){if(!t)return e;const s=i&&i.encode||encode;utils$1.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let a;if(a=n?n(t,i):utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,i).toString(s),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}prototype.append=function(e,t){this._pairs.push([e,t])},prototype.toString=function(e){const t=e?function(t){return e.call(this,t,encode$1)}:encode$1;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class InterceptorManager{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1="undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData$1="undefined"!=typeof FormData?FormData:null,Blob$1="undefined"!=typeof Blob?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv="undefined"!=typeof window&&"undefined"!=typeof document,_navigator="object"==typeof navigator&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hasBrowserEnv,hasStandardBrowserEnv:hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv:hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin:origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,s){return platform.isNode&&utils$1.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}function arrayToObject(e){const t={},i=Object.keys(e);let s;const n=i.length;let a;for(s=0;s<n;s++)a=i[s],t[a]=e[a];return t}function formDataToJSON(e){function t(e,i,s,n){let a=e[n++];if("__proto__"===a)return!0;const r=Number.isFinite(+a),o=n>=e.length;return a=!a&&utils$1.isArray(s)?s.length:a,o?(utils$1.hasOwnProp(s,a)?s[a]=[s[a],i]:s[a]=i,!r):(s[a]&&utils$1.isObject(s[a])||(s[a]=[]),t(e,i,s[a],n)&&utils$1.isArray(s[a])&&(s[a]=arrayToObject(s[a])),!r)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const i={};return utils$1.forEachEntry(e,((e,s)=>{t(parsePropPath(e),s,i,0)})),i}return null}function stringifySafely(t,i,s){if(utils$1.isString(t))try{return(i||JSON.parse)(t),utils$1.trim(t)}catch(e){if("SyntaxError"!==e.name)throw e}return(s||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,n=utils$1.isObject(e);if(n&&utils$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1.isFormData(e))return s?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((a=utils$1.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return toFormData$1(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(t){const i=this.transitional||defaults.transitional,s=i&&i.forcedJSONParsing,n="json"===this.responseType;if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(s&&!this.responseType||n)){const s=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(e){if(s){if("SyntaxError"===e.name)throw AxiosError$1.from(e,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],(e=>{defaults.headers[e]={}}));const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let i,s,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),s=e.substring(n+1).trim(),!i||t[i]&&ignoreDuplicateOf[i]||("set-cookie"===i?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)})),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,i,s,n){return utils$1.isFunction(s)?s.call(this,t,i):(n&&(t=i),utils$1.isString(t)?utils$1.isString(s)?-1!==t.indexOf(s):utils$1.isRegExp(s)?s.test(t):void 0:void 0)}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}function buildAccessors(e,t){const i=utils$1.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+i,{value:function(e,i,n){return this[s].call(this,t,e,i,n)},configurable:!0})}))}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function n(e,t,i){const n=normalizeHeader(t);if(!n)throw new Error("header name must be a non-empty string");const a=utils$1.findKey(s,n);(!a||void 0===s[a]||!0===i||void 0===i&&!1!==s[a])&&(s[a||t]=normalizeValue(e))}const a=(e,t)=>utils$1.forEach(e,((e,i)=>n(e,i,t)));if(utils$1.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))a(parseHeaders(e),t);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let i,s,n={};for(const t of e){if(!utils$1.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[s=t[0]]=(i=n[s])?utils$1.isArray(i)?[...i,t[1]]:[i,t[1]]:t[1]}a(n,t)}else null!=e&&n(t,e,i);return this}get(e,t){if(e=normalizeHeader(e)){const i=utils$1.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return parseTokens(e);if(utils$1.isFunction(t))return t.call(this,e,i);if(utils$1.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e)){const i=utils$1.findKey(this,e);return!(!i||void 0===this[i]||t&&!matchHeaderValue(this,this[i],i,t))}return!1}delete(e,t){const i=this;let s=!1;function n(e){if(e=normalizeHeader(e)){const n=utils$1.findKey(i,e);!n||t&&!matchHeaderValue(i,i[n],n,t)||(delete i[n],s=!0)}}return utils$1.isArray(e)?e.forEach(n):n(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const n=t[i];e&&!matchHeaderValue(this,this[n],n,e,!0)||(delete this[n],s=!0)}return s}normalize(e){const t=this,i={};return utils$1.forEach(this,((s,n)=>{const a=utils$1.findKey(i,n);if(a)return t[a]=normalizeValue(s),void delete t[n];const r=e?formatHeader(n):String(n).trim();r!==n&&delete t[n],t[r]=normalizeValue(s),i[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,((i,s)=>{null!=i&&!1!==i&&(t[s]=e&&utils$1.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach((e=>i.set(e))),i}static accessor(e){const t=(this[$internals]=this[$internals]={accessors:{}}).accessors,i=this.prototype;function s(e){const s=normalizeHeader(e);t[s]||(buildAccessors(i,e),t[s]=!0)}return utils$1.isArray(e)?e.forEach(s):s(e),this}};function transformData(e,t){const i=this||defaults,s=t||i,n=AxiosHeaders$1.from(s.headers);let a=s.data;return utils$1.forEach(e,(function(e){a=e.call(i,a,n.normalize(),t?t.status:void 0)})),n.normalize(),a}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,t,i){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,t,i),this.name="CanceledError"}function settle(e,t,i){const s=i.config.validateStatus;i.status&&s&&!s(i.status)?t(new AxiosError$1("Request failed with status code "+i.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const i=new Array(e),s=new Array(e);let n,a=0,r=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),h=s[r];n||(n=l),i[a]=o,s[a]=l;let d=r,c=0;for(;d!==a;)c+=i[d++],d%=e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),l-n<t)return;const u=h&&l-h;return u?Math.round(1e3*c/u):void 0}}function throttle(e,t){let i,s,n=0,a=1e3/t;const r=(t,a=Date.now())=>{n=a,i=null,s&&(clearTimeout(s),s=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-n;o>=a?r(e,t):(i=e,s||(s=setTimeout((()=>{s=null,r(i)}),a-o)))},()=>i&&r(i)]}AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders$1.prototype,(({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[i]=e}}})),utils$1.freezeMethods(AxiosHeaders$1),utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});const progressEventReducer=(e,t,i=3)=>{let s=0;const n=speedometer(50,250);return throttle((i=>{const a=i.loaded,r=i.lengthComputable?i.total:void 0,o=a-s,l=n(o);s=a,e({loaded:a,total:r,progress:r?a/r:void 0,bytes:o,rate:l||void 0,estimated:l&&r&&a<=r?(r-a)/l:void 0,event:i,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),i)},progressEventDecorator=(e,t)=>{const i=null!=e;return[s=>t[0]({lengthComputable:i,total:e,loaded:s}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap((()=>e(...t))),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,platform.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,i,s,n,a){const r=[e+"="+encodeURIComponent(t)];utils$1.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),utils$1.isString(s)&&r.push("path="+s),utils$1.isString(n)&&r.push("domain="+n),!0===a&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,i){let s=!isAbsoluteURL(t);return e&&(s||0==i)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const i={};function s(e,t,i,s){return utils$1.isPlainObject(e)&&utils$1.isPlainObject(t)?utils$1.merge.call({caseless:s},e,t):utils$1.isPlainObject(t)?utils$1.merge({},t):utils$1.isArray(t)?t.slice():t}function n(e,t,i,n){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:s(void 0,e,0,n):s(e,t,0,n)}function a(e,t){if(!utils$1.isUndefined(t))return s(void 0,t)}function r(e,t){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(i,n,a){return a in t?s(i,n):a in e?s(void 0,i):void 0}const l={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(e,t,i)=>n(headersToObject(e),headersToObject(t),0,!0)};return utils$1.forEach(Object.keys(Object.assign({},e,t)),(function(s){const a=l[s]||n,r=a(e[s],t[s],s);utils$1.isUndefined(r)&&a!==o||(i[s]=r)})),i}const resolveConfig=e=>{const t=mergeConfig$1({},e);let i,{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:r,headers:o,auth:l}=t;if(t.headers=o=AxiosHeaders$1.from(o),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),utils$1.isFormData(s))if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(i=o.getContentType())){const[e,...t]=i?i.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(platform.hasStandardBrowserEnv&&(n&&utils$1.isFunction(n)&&(n=n(t)),n||!1!==n&&isURLSameOrigin(t.url))){const e=a&&r&&cookies.read(r);e&&o.set(a,e)}return t},isXHRAdapterSupported="undefined"!=typeof XMLHttpRequest,xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise((function(t,i){const s=resolveConfig(e);let n=s.data;const a=AxiosHeaders$1.from(s.headers).normalize();let r,o,l,h,d,{responseType:c,onUploadProgress:u,onDownloadProgress:p}=s;function g(){h&&h(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(r),s.signal&&s.signal.removeEventListener("abort",r)}let m=new XMLHttpRequest;function f(){if(!m)return;const s=AxiosHeaders$1.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());settle((function(e){t(e),g()}),(function(e){i(e),g()}),{data:c&&"text"!==c&&"json"!==c?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:s,config:e,request:m}),m=null}m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout,"onloadend"in m?m.onloadend=f:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(f)},m.onabort=function(){m&&(i(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,m)),m=null)},m.onerror=function(){i(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const n=s.transitional||transitionalDefaults;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),i(new AxiosError$1(t,n.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,m)),m=null},void 0===n&&a.setContentType(null),"setRequestHeader"in m&&utils$1.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),utils$1.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),c&&"json"!==c&&(m.responseType=s.responseType),p&&([l,d]=progressEventReducer(p,!0),m.addEventListener("progress",l)),u&&m.upload&&([o,h]=progressEventReducer(u),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(r=t=>{m&&(i(!t||t.type?new CanceledError$1(null,e,m):t),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(r),s.signal&&(s.signal.aborted?r():s.signal.addEventListener("abort",r)));const v=parseProtocol(s.url);v&&-1===platform.protocols.indexOf(v)?i(new AxiosError$1("Unsupported protocol "+v+":",AxiosError$1.ERR_BAD_REQUEST,e)):m.send(n||null)}))},composeSignals=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,s=new AbortController;const n=function(e){if(!i){i=!0,r();const t=e instanceof Error?e:this.reason;s.abort(t instanceof AxiosError$1?t:new CanceledError$1(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,n(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))}),t);const r=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)})),e=null)};e.forEach((e=>e.addEventListener("abort",n)));const{signal:o}=s;return o.unsubscribe=()=>utils$1.asap(r),o}},streamChunk=function*(e,t){let i=e.byteLength;if(i<t)return void(yield e);let s,n=0;for(;n<i;)s=n+t,yield e.slice(n,s),n=s},readBytes=async function*(e,t){for await(const i of readStream(e))yield*streamChunk(i,t)},readStream=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},trackStream=(e,t,i,s)=>{const n=readBytes(e,t);let a,r=0,o=e=>{a||(a=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await n.next();if(t)return o(),void e.close();let a=s.byteLength;if(i){let e=r+=a;i(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},isFetchSupported="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,isReadableStreamSupported=isFetchSupported&&"function"==typeof ReadableStream,encodeText=isFetchSupported&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(t,...i)=>{try{return!!t(...i)}catch(e){return!1}},supportsRequestStream=isReadableStreamSupported&&test((()=>{let e=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),DEFAULT_CHUNK_SIZE=65536,supportsResponseStream=isReadableStreamSupported&&test((()=>utils$1.isReadableStream(new Response("").body))),resolvers={stream:supportsResponseStream&&(e=>e.body)};var res;isFetchSupported&&(res=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!resolvers[e]&&(resolvers[e]=utils$1.isFunction(res[e])?t=>t[e]():(t,i)=>{throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,i)})})));const getBodyLength=async e=>{if(null==e)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e)){const t=new Request(platform.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e)?e.byteLength:(utils$1.isURLSearchParams(e)&&(e+=""),utils$1.isString(e)?(await encodeText(e)).byteLength:void 0)},resolveBodyLength=async(e,t)=>{const i=utils$1.toFiniteNumber(e.getContentLength());return null==i?getBodyLength(t):i},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:i,data:s,signal:n,cancelToken:a,timeout:r,onDownloadProgress:o,onUploadProgress:l,responseType:h,headers:d,withCredentials:c="same-origin",fetchOptions:u}=resolveConfig(e);h=h?(h+"").toLowerCase():"text";let p,g=composeSignals([n,a&&a.toAbortSignal()],r);const m=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let f;try{if(l&&supportsRequestStream&&"get"!==i&&"head"!==i&&0!==(f=await resolveBodyLength(d,s))){let e,i=new Request(t,{method:"POST",body:s,duplex:"half"});if(utils$1.isFormData(s)&&(e=i.headers.get("content-type"))&&d.setContentType(e),i.body){const[e,t]=progressEventDecorator(f,progressEventReducer(asyncDecorator(l)));s=trackStream(i.body,DEFAULT_CHUNK_SIZE,e,t)}}utils$1.isString(c)||(c=c?"include":"omit");const n="credentials"in Request.prototype;p=new Request(t,{...u,signal:g,method:i.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:n?c:void 0});let a=await fetch(p);const r=supportsResponseStream&&("stream"===h||"response"===h);if(supportsResponseStream&&(o||r&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=utils$1.toFiniteNumber(a.headers.get("content-length")),[i,s]=o&&progressEventDecorator(t,progressEventReducer(asyncDecorator(o),!0))||[];a=new Response(trackStream(a.body,DEFAULT_CHUNK_SIZE,i,(()=>{s&&s(),m&&m()})),e)}h=h||"text";let v=await resolvers[utils$1.findKey(resolvers,h)||"text"](a,e);return!r&&m&&m(),await new Promise(((t,i)=>{settle(t,i,{data:v,headers:AxiosHeaders$1.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,p),{cause:v.cause||v});throw AxiosError$1.from(v,v&&v.code,e,p)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,((t,i)=>{if(t){try{Object.defineProperty(t,"name",{value:i})}catch(e){}Object.defineProperty(t,"adapterName",{value:i})}}));const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||null===e||!1===e,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let i,s;const n={};for(let a=0;a<t;a++){let t;if(i=e[a],s=i,!isResolvedHandle(i)&&(s=knownAdapters[(t=String(i)).toLowerCase()],void 0===s))throw new AxiosError$1(`Unknown adapter '${t}'`);if(s)break;n[t||"#"+a]=s}if(!s){const e=Object.entries(n).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(renderReason).join("\n"):" "+renderReason(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,e.transformResponse,t),t.headers=AxiosHeaders$1.from(t.headers),t}),(function(t){return isCancel$1(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,e.transformResponse,t.response),t.response.headers=AxiosHeaders$1.from(t.response.headers))),Promise.reject(t)}))}const VERSION$1="1.9.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{validators$1[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const deprecatedWarnings={};function assertOptions(e,t,i){if("object"!=typeof e)throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const a=s[n],r=t[a];if(r){const t=e[a],i=void 0===t||r(t,a,e);if(!0!==i)throw new AxiosError$1("option "+a+" must be "+i,AxiosError$1.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new AxiosError$1("Unknown option "+a,AxiosError$1.ERR_BAD_OPTION)}}validators$1.transitional=function(e,t,i){function s(e,t){return"[Axios v"+VERSION$1+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,a)=>{if(!1===e)throw new AxiosError$1(s(n," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[n]&&(deprecatedWarnings[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,a)}},validators$1.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};const validator={assertOptions:assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,i){try{return await this._request(t,i)}catch(s){if(s instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const i=t.stack?t.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+i):s.stack=i}catch(e){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:n}=t;void 0!==i&&validator.assertOptions(i,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),null!=s&&(utils$1.isFunction(s)?t.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=n&&utils$1.merge(n.common,n[t.method]);n&&utils$1.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=AxiosHeaders$1.concat(a,n);const r=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let h;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,c=0;if(!o){const e=[dispatchRequest.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,l),d=e.length,h=Promise.resolve(t);c<d;)h=h.then(e[c++],e[c++]);return h}d=r.length;let u=t;for(c=0;c<d;){const e=r[c++],t=r[c++];try{u=e(u)}catch(p){t.call(this,p);break}}try{h=dispatchRequest.call(this,u)}catch(p){return Promise.reject(p)}for(c=0,d=l.length;c<d;)h=h.then(l[c++],l[c++]);return h}getUri(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],(function(e){Axios$1.prototype[e]=function(t,i){return this.request(mergeConfig$1(i||{},{method:e,url:t,data:(i||{}).data}))}})),utils$1.forEach(["post","put","patch"],(function(e){function t(t){return function(i,s,n){return this.request(mergeConfig$1(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)}));let CancelToken$1=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{i.subscribe(e),t=e})).then(e);return s.cancel=function(){i.unsubscribe(t)},s},e((function(e,s,n){i.reason||(i.reason=new CanceledError$1(e,s,n),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}};function spread$1(e){return function(t){return e.apply(null,t)}}function isAxiosError$1(e){return utils$1.isObject(e)&&!0===e.isAxiosError}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};function createInstance(e){const t=new Axios$1(e),i=bind(Axios$1.prototype.request,t);return utils$1.extend(i,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(i,t,null,{allOwnKeys:!0}),i.create=function(t){return createInstance(mergeConfig$1(e,t))},i}Object.entries(HttpStatusCode$1).forEach((([e,t])=>{HttpStatusCode$1[t]=e}));const axios=createInstance(defaults);axios.Axios=Axios$1,axios.CanceledError=CanceledError$1,axios.CancelToken=CancelToken$1,axios.isCancel=isCancel$1,axios.VERSION=VERSION$1,axios.toFormData=toFormData$1,axios.AxiosError=AxiosError$1,axios.Cancel=axios.CanceledError,axios.all=function(e){return Promise.all(e)},axios.spread=spread$1,axios.isAxiosError=isAxiosError$1,axios.mergeConfig=mergeConfig$1,axios.AxiosHeaders=AxiosHeaders$1,axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode$1,axios.default=axios;const{Axios:Axios,AxiosError:AxiosError,CanceledError:CanceledError,isCancel:isCancel,CancelToken:CancelToken,VERSION:VERSION,all:all,Cancel:Cancel,isAxiosError:isAxiosError,spread:spread,toFormData:toFormData,AxiosHeaders:AxiosHeaders,HttpStatusCode:HttpStatusCode,formToJSON:formToJSON,getAdapter:getAdapter,mergeConfig:mergeConfig}=axios;var mock$1={exports:{}},mock=mock$1.exports,hasRequiredMock;function requireMock(){return hasRequiredMock||(hasRequiredMock=1,function(module,exports){var factory;factory=function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){var s,n=i(1),a=i(3),r=i(5),o=i(20),l=i(23),h=i(25);"undefined"!=typeof window&&(s=i(27));var d={Handler:n,Random:r,Util:a,XHR:s,RE:o,toJSONSchema:l,valid:h,heredoc:a.heredoc,setup:function(e){return s.setup(e)},_mocked:{},version:"1.0.1-beta3"};s&&(s.Mock=d),d.mock=function(e,t,i){return 1===arguments.length?n.gen(e):(2===arguments.length&&(i=t,t=void 0),s&&(window.XMLHttpRequest=s),d._mocked[e+(t||"")]={rurl:e,rtype:t,template:i},d)},e.exports=d},function(module,exports,__webpack_require__){var Constant=__webpack_require__(2),Util=__webpack_require__(3),Parser=__webpack_require__(4),Random=__webpack_require__(5),RE=__webpack_require__(20),Handler={extend:Util.extend,gen:function(e,t,i){t=null==t?"":t+"",i={path:(i=i||{}).path||[Constant.GUID],templatePath:i.templatePath||[Constant.GUID++],currentContext:i.currentContext,templateCurrentContext:i.templateCurrentContext||e,root:i.root||i.currentContext,templateRoot:i.templateRoot||i.templateCurrentContext||e};var s,n=Parser.parse(t),a=Util.type(e);return Handler[a]?(s=Handler[a]({type:a,template:e,name:t,parsedName:t?t.replace(Constant.RE_KEY,"$1"):t,rule:n,context:i}),i.root||(i.root=s),s):e}};Handler.extend({array:function(e){var t,i,s=[];if(0===e.template.length)return s;if(e.rule.parameters)if(1===e.rule.min&&void 0===e.rule.max)e.context.path.push(e.name),e.context.templatePath.push(e.name),s=Random.pick(Handler.gen(e.template,void 0,{path:e.context.path,templatePath:e.context.templatePath,currentContext:s,templateCurrentContext:e.template,root:e.context.root||s,templateRoot:e.context.templateRoot||e.template})),e.context.path.pop(),e.context.templatePath.pop();else if(e.rule.parameters[2])e.template.__order_index=e.template.__order_index||0,e.context.path.push(e.name),e.context.templatePath.push(e.name),s=Handler.gen(e.template,void 0,{path:e.context.path,templatePath:e.context.templatePath,currentContext:s,templateCurrentContext:e.template,root:e.context.root||s,templateRoot:e.context.templateRoot||e.template})[e.template.__order_index%e.template.length],e.template.__order_index+=+e.rule.parameters[2],e.context.path.pop(),e.context.templatePath.pop();else for(t=0;t<e.rule.count;t++)for(i=0;i<e.template.length;i++)e.context.path.push(s.length),e.context.templatePath.push(i),s.push(Handler.gen(e.template[i],s.length,{path:e.context.path,templatePath:e.context.templatePath,currentContext:s,templateCurrentContext:e.template,root:e.context.root||s,templateRoot:e.context.templateRoot||e.template})),e.context.path.pop(),e.context.templatePath.pop();else for(t=0;t<e.template.length;t++)e.context.path.push(t),e.context.templatePath.push(t),s.push(Handler.gen(e.template[t],t,{path:e.context.path,templatePath:e.context.templatePath,currentContext:s,templateCurrentContext:e.template,root:e.context.root||s,templateRoot:e.context.templateRoot||e.template})),e.context.path.pop(),e.context.templatePath.pop();return s},object:function(e){var t,i,s,n,a,r,o={};if(null!=e.rule.min)for(t=Util.keys(e.template),t=(t=Random.shuffle(t)).slice(0,e.rule.count),r=0;r<t.length;r++)n=(s=t[r]).replace(Constant.RE_KEY,"$1"),e.context.path.push(n),e.context.templatePath.push(s),o[n]=Handler.gen(e.template[s],s,{path:e.context.path,templatePath:e.context.templatePath,currentContext:o,templateCurrentContext:e.template,root:e.context.root||o,templateRoot:e.context.templateRoot||e.template}),e.context.path.pop(),e.context.templatePath.pop();else{for(s in t=[],i=[],e.template)("function"==typeof e.template[s]?i:t).push(s);for(t=t.concat(i),r=0;r<t.length;r++)n=(s=t[r]).replace(Constant.RE_KEY,"$1"),e.context.path.push(n),e.context.templatePath.push(s),o[n]=Handler.gen(e.template[s],s,{path:e.context.path,templatePath:e.context.templatePath,currentContext:o,templateCurrentContext:e.template,root:e.context.root||o,templateRoot:e.context.templateRoot||e.template}),e.context.path.pop(),e.context.templatePath.pop(),(a=s.match(Constant.RE_KEY))&&a[2]&&"number"===Util.type(e.template[s])&&(e.template[s]+=parseInt(a[2],10))}return o},number:function(e){var t,i;if(e.rule.decimal){for(e.template+="",(i=e.template.split("."))[0]=e.rule.range?e.rule.count:i[0],i[1]=(i[1]||"").slice(0,e.rule.dcount);i[1].length<e.rule.dcount;)i[1]+=i[1].length<e.rule.dcount-1?Random.character("number"):Random.character("123456789");t=parseFloat(i.join("."),10)}else t=e.rule.range&&!e.rule.parameters[2]?e.rule.count:e.template;return t},boolean:function(e){return e.rule.parameters?Random.bool(e.rule.min,e.rule.max,e.template):e.template},string:function(e){var t,i,s,n,a="";if(e.template.length){for(null==e.rule.count&&(a+=e.template),t=0;t<e.rule.count;t++)a+=e.template;for(i=a.match(Constant.RE_PLACEHOLDER)||[],t=0;t<i.length;t++)if(s=i[t],/^\\/.test(s))i.splice(t--,1);else{if(n=Handler.placeholder(s,e.context.currentContext,e.context.templateCurrentContext,e),1===i.length&&s===a&&typeof n!=typeof a){a=n;break}a=a.replace(s,n)}}else a=e.rule.range?Random.string(e.rule.count):e.template;return a},function:function(e){return e.template.call(e.context.currentContext,e)},regexp:function(e){var t="";null==e.rule.count&&(t+=e.template.source);for(var i=0;i<e.rule.count;i++)t+=e.template.source;return RE.Handler.gen(RE.Parser.parse(t))}}),Handler.extend({_all:function(){var e={};for(var t in Random)e[t.toLowerCase()]=t;return e},placeholder:function(placeholder,obj,templateContext,options){Constant.RE_PLACEHOLDER.exec("");var parts=Constant.RE_PLACEHOLDER.exec(placeholder),key=parts&&parts[1],lkey=key&&key.toLowerCase(),okey=this._all()[lkey],params=parts&&parts[2]||"",pathParts=this.splitPathToArray(key);try{params=eval("(function(){ return [].splice.call(arguments, 0 ) })("+params+")")}catch(error){params=parts[2].split(/,\s*/)}if(obj&&key in obj)return obj[key];if("/"===key.charAt(0)||pathParts.length>1)return this.getValueByKeyPath(key,options);if(templateContext&&"object"==typeof templateContext&&key in templateContext&&placeholder!==templateContext[key])return templateContext[key]=Handler.gen(templateContext[key],key,{currentContext:obj,templateCurrentContext:templateContext}),templateContext[key];if(!(key in Random)&&!(lkey in Random)&&!(okey in Random))return placeholder;for(var i=0;i<params.length;i++)Constant.RE_PLACEHOLDER.exec(""),Constant.RE_PLACEHOLDER.test(params[i])&&(params[i]=Handler.placeholder(params[i],obj,templateContext,options));var handle=Random[key]||Random[lkey]||Random[okey];switch(Util.type(handle)){case"array":return Random.pick(handle);case"function":handle.options=options;var re=handle.apply(Random,params);return void 0===re&&(re=""),delete handle.options,re}},getValueByKeyPath:function(e,t){var i=e,s=this.splitPathToArray(e),n=[];"/"===e.charAt(0)?n=[t.context.path[0]].concat(this.normalizePath(s)):s.length>1&&((n=t.context.path.slice(0)).pop(),n=this.normalizePath(n.concat(s)));try{e=s[s.length-1];for(var a=t.context.root,r=t.context.templateRoot,o=1;o<n.length-1;o++)a=a[n[o]],r=r[n[o]];if(a&&e in a)return a[e];if(r&&"object"==typeof r&&e in r&&i!==r[e])return r[e]=Handler.gen(r[e],e,{currentContext:a,templateCurrentContext:r}),r[e]}catch(l){}return"@"+s.join("/")},normalizePath:function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i]){case"..":t.pop();break;case".":break;default:t.push(e[i])}return t},splitPathToArray:function(e){var t=e.split(/\/+/);return t[t.length-1]||(t=t.slice(0,-1)),t[0]||(t=t.slice(1)),t}}),module.exports=Handler},function(e,t){e.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}},function(e,t){var i={extend:function(){var e,t,s,n,a,r=arguments[0]||{},o=1,l=arguments.length;for(1===l&&(r=this,o=0);o<l;o++)if(e=arguments[o])for(t in e)s=r[t],r!==(n=e[t])&&void 0!==n&&(i.isArray(n)||i.isObject(n)?(i.isArray(n)&&(a=s&&i.isArray(s)?s:[]),i.isObject(n)&&(a=s&&i.isObject(s)?s:{}),r[t]=i.extend(a,n)):r[t]=n);return r},each:function(e,t,i){var s,n;if("number"===this.type(e))for(s=0;s<e;s++)t(s,s);else if(e.length===+e.length)for(s=0;s<e.length&&!1!==t.call(i,e[s],s,e);s++);else for(n in e)if(!1===t.call(i,e[n],n,e))break},type:function(e){return null==e?String(e):Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1].toLowerCase()}};i.each("String Object Array RegExp Function".split(" "),(function(e){i["is"+e]=function(t){return i.type(t)===e.toLowerCase()}})),i.isObjectOrArray=function(e){return i.isObject(e)||i.isArray(e)},i.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},i.keys=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},i.values=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},i.heredoc=function(e){return e.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},i.noop=function(){},e.exports=i},function(e,t,i){var s=i(2),n=i(5);e.exports={parse:function(e){var t=((e=null==e?"":e+"")||"").match(s.RE_KEY),i=t&&t[3]&&t[3].match(s.RE_RANGE),a=i&&i[1]&&parseInt(i[1],10),r=i&&i[2]&&parseInt(i[2],10),o=i?i[2]?n.integer(a,r):parseInt(i[1],10):void 0,l=t&&t[4]&&t[4].match(s.RE_RANGE),h=l&&l[1]&&parseInt(l[1],10),d=l&&l[2]&&parseInt(l[2],10),c={parameters:t,range:i,min:a,max:r,count:o,decimal:l,dmin:h,dmax:d,dcount:l?!l[2]&&parseInt(l[1],10)||n.integer(h,d):void 0};for(var u in c)if(null!=c[u])return c;return{}}}},function(e,t,i){var s={extend:i(3).extend};s.extend(i(6)),s.extend(i(7)),s.extend(i(8)),s.extend(i(10)),s.extend(i(13)),s.extend(i(15)),s.extend(i(16)),s.extend(i(17)),s.extend(i(14)),s.extend(i(19)),e.exports=s},function(e,t){e.exports={boolean:function(e,t,i){return void 0!==i?(e=void 0===e||isNaN(e)?1:parseInt(e,10),t=void 0===t||isNaN(t)?1:parseInt(t,10),Math.random()>1/(e+t)*e?!i:i):Math.random()>=.5},bool:function(e,t,i){return this.boolean(e,t,i)},natural:function(e,t){return e=void 0!==e?parseInt(e,10):0,t=void 0!==t?parseInt(t,10):9007199254740992,Math.round(Math.random()*(t-e))+e},integer:function(e,t){return e=void 0!==e?parseInt(e,10):-9007199254740992,t=void 0!==t?parseInt(t,10):9007199254740992,Math.round(Math.random()*(t-e))+e},int:function(e,t){return this.integer(e,t)},float:function(e,t,i,s){i=void 0===i?0:i,i=Math.max(Math.min(i,17),0),s=void 0===s?17:s,s=Math.max(Math.min(s,17),0);for(var n=this.integer(e,t)+".",a=0,r=this.natural(i,s);a<r;a++)n+=a<r-1?this.character("number"):this.character("123456789");return parseFloat(n,10)},character:function(e){var t={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return t.alpha=t.lower+t.upper,t[void 0]=t.lower+t.upper+t.number+t.symbol,(e=t[(""+e).toLowerCase()]||e).charAt(this.natural(0,e.length-1))},char:function(e){return this.character(e)},string:function(e,t,i){var s;switch(arguments.length){case 0:s=this.natural(3,7);break;case 1:s=e,e=void 0;break;case 2:"string"==typeof arguments[0]?s=t:(s=this.natural(e,t),e=void 0);break;case 3:s=this.natural(t,i)}for(var n="",a=0;a<s;a++)n+=this.character(e);return n},str:function(){return this.string.apply(this,arguments)},range:function(e,t,i){arguments.length<=1&&(t=e||0,e=0),e=+e,t=+t,i=+(i=arguments[2]||1);for(var s=Math.max(Math.ceil((t-e)/i),0),n=0,a=new Array(s);n<s;)a[n++]=e,e+=i;return a}}},function(e,t){var i={yyyy:"getFullYear",yy:function(e){return(""+e.getFullYear()).slice(2)},y:"yy",MM:function(e){var t=e.getMonth()+1;return t<10?"0"+t:t},M:function(e){return e.getMonth()+1},dd:function(e){var t=e.getDate();return t<10?"0"+t:t},d:"getDate",HH:function(e){var t=e.getHours();return t<10?"0"+t:t},H:"getHours",hh:function(e){var t=e.getHours()%12;return t<10?"0"+t:t},h:function(e){return e.getHours()%12},mm:function(e){var t=e.getMinutes();return t<10?"0"+t:t},m:"getMinutes",ss:function(e){var t=e.getSeconds();return t<10?"0"+t:t},s:"getSeconds",SS:function(e){var t=e.getMilliseconds();return t<10&&"00"+t||t<100&&"0"+t||t},S:"getMilliseconds",A:function(e){return e.getHours()<12?"AM":"PM"},a:function(e){return e.getHours()<12?"am":"pm"},T:"getTime"};e.exports={_patternLetters:i,_rformat:new RegExp(function(){var e=[];for(var t in i)e.push(t);return"("+e.join("|")+")"}(),"g"),_formatDate:function(e,t){return t.replace(this._rformat,(function t(s,n){return"function"==typeof i[n]?i[n](e):i[n]in i?t(s,i[n]):e[i[n]]()}))},_randomDate:function(e,t){return e=void 0===e?new Date(0):e,t=void 0===t?new Date:t,new Date(Math.random()*(t.getTime()-e.getTime()))},date:function(e){return e=e||"yyyy-MM-dd",this._formatDate(this._randomDate(),e)},time:function(e){return e=e||"HH:mm:ss",this._formatDate(this._randomDate(),e)},datetime:function(e){return e=e||"yyyy-MM-dd HH:mm:ss",this._formatDate(this._randomDate(),e)},now:function(e,t){1===arguments.length&&(/year|month|day|hour|minute|second|week/.test(e)||(t=e,e="")),e=(e||"").toLowerCase(),t=t||"yyyy-MM-dd HH:mm:ss";var i=new Date;switch(e){case"year":i.setMonth(0);case"month":i.setDate(1);case"week":case"day":i.setHours(0);case"hour":i.setMinutes(0);case"minute":i.setSeconds(0);case"second":i.setMilliseconds(0)}return"week"===e&&i.setDate(i.getDate()-i.getDay()),this._formatDate(i,t)}}},function(e,t,i){(function(e){e.exports={_adSize:["300x250","250x250","240x400","336x280","180x150","720x300","468x60","234x60","88x31","120x90","120x60","120x240","125x125","728x90","160x600","120x600","300x600"],_screenSize:["320x200","320x240","640x480","800x480","800x480","1024x600","1024x768","1280x800","1440x900","1920x1200","2560x1600"],_videoSize:["720x480","768x576","1280x720","1920x1080"],image:function(e,t,i,s,n){return 4===arguments.length&&(n=s,s=void 0),3===arguments.length&&(n=i,i=void 0),e||(e=this.pick(this._adSize)),t&&~t.indexOf("#")&&(t=t.slice(1)),i&&~i.indexOf("#")&&(i=i.slice(1)),"http://dummyimage.com/"+e+(t?"/"+t:"")+(i?"/"+i:"")+(s?"."+s:"")+(n?"&text="+n:"")},img:function(){return this.image.apply(this,arguments)},_brandColors:{"4ormat":"#fb0a2a","500px":"#02adea","About.me (blue)":"#00405d","About.me (yellow)":"#ffcc33",Addvocate:"#ff6138",Adobe:"#ff0000",Aim:"#fcd20b",Amazon:"#e47911",Android:"#a4c639","Angie's List":"#7fbb00",AOL:"#0060a3",Atlassian:"#003366",Behance:"#053eff","Big Cartel":"#97b538",bitly:"#ee6123",Blogger:"#fc4f08",Boeing:"#0039a6","Booking.com":"#003580",Carbonmade:"#613854",Cheddar:"#ff7243","Code School":"#3d4944",Delicious:"#205cc0",Dell:"#3287c1",Designmoo:"#e54a4f",Deviantart:"#4e6252","Designer News":"#2d72da",Devour:"#fd0001",DEWALT:"#febd17","Disqus (blue)":"#59a3fc","Disqus (orange)":"#db7132",Dribbble:"#ea4c89",Dropbox:"#3d9ae8",Drupal:"#0c76ab",Dunked:"#2a323a",eBay:"#89c507",Ember:"#f05e1b",Engadget:"#00bdf6",Envato:"#528036",Etsy:"#eb6d20",Evernote:"#5ba525","Fab.com":"#dd0017",Facebook:"#3b5998",Firefox:"#e66000","Flickr (blue)":"#0063dc","Flickr (pink)":"#ff0084",Forrst:"#5b9a68",Foursquare:"#25a0ca",Garmin:"#007cc3",GetGlue:"#2d75a2",Gimmebar:"#f70078",GitHub:"#171515","Google Blue":"#0140ca","Google Green":"#16a61e","Google Red":"#dd1812","Google Yellow":"#fcca03","Google+":"#dd4b39",Grooveshark:"#f77f00",Groupon:"#82b548","Hacker News":"#ff6600",HelloWallet:"#0085ca","Heroku (light)":"#c7c5e6","Heroku (dark)":"#6567a5",HootSuite:"#003366",Houzz:"#73ba37",HTML5:"#ec6231",IKEA:"#ffcc33",IMDb:"#f3ce13",Instagram:"#3f729b",Intel:"#0071c5",Intuit:"#365ebf",Kickstarter:"#76cc1e",kippt:"#e03500",Kodery:"#00af81",LastFM:"#c3000d",LinkedIn:"#0e76a8",Livestream:"#cf0005",Lumo:"#576396",Mixpanel:"#a086d3",Meetup:"#e51937",Nokia:"#183693",NVIDIA:"#76b900",Opera:"#cc0f16",Path:"#e41f11","PayPal (dark)":"#1e477a","PayPal (light)":"#3b7bbf",Pinboard:"#0000e6",Pinterest:"#c8232c",PlayStation:"#665cbe",Pocket:"#ee4056",Prezi:"#318bff",Pusha:"#0f71b4",Quora:"#a82400","QUOTE.fm":"#66ceff",Rdio:"#008fd5",Readability:"#9c0000","Red Hat":"#cc0000",Resource:"#7eb400",Rockpack:"#0ba6ab",Roon:"#62b0d9",RSS:"#ee802f",Salesforce:"#1798c1",Samsung:"#0c4da2",Shopify:"#96bf48",Skype:"#00aff0",Snagajob:"#f47a20",Softonic:"#008ace",SoundCloud:"#ff7700","Space Box":"#f86960",Spotify:"#81b71a",Sprint:"#fee100",Squarespace:"#121212",StackOverflow:"#ef8236",Staples:"#cc0000","Status Chart":"#d7584f",Stripe:"#008cdd",StudyBlue:"#00afe1",StumbleUpon:"#f74425","T-Mobile":"#ea0a8e",Technorati:"#40a800","The Next Web":"#ef4423",Treehouse:"#5cb868",Trulia:"#5eab1f",Tumblr:"#34526f","Twitch.tv":"#6441a5",Twitter:"#00acee",TYPO3:"#ff8700",Ubuntu:"#dd4814",Ustream:"#3388ff",Verizon:"#ef1d1d",Vimeo:"#86c9ef",Vine:"#00a478",Virb:"#06afd8","Virgin Media":"#cc0000",Wooga:"#5b009c","WordPress (blue)":"#21759b","WordPress (orange)":"#d54e21","WordPress (grey)":"#464646",Wunderlist:"#2b88d9",XBOX:"#9bc848",XING:"#126567","Yahoo!":"#720e9e",Yandex:"#ffcc00",Yelp:"#c41200",YouTube:"#c4302b",Zalongo:"#5498dc",Zendesk:"#78a300",Zerply:"#9dcc7a",Zootool:"#5e8b1d"},_brandNames:function(){var e=[];for(var t in this._brandColors)e.push(t);return e},dataImage:function(t,i){var s,n=(s="undefined"!=typeof document?document.createElement("canvas"):new(e.require("canvas")))&&s.getContext&&s.getContext("2d");if(!s||!n)return"";t||(t=this.pick(this._adSize)),i=void 0!==i?i:t,t=t.split("x");var a=parseInt(t[0],10),r=parseInt(t[1],10),o=this._brandColors[this.pick(this._brandNames())];return s.width=a,s.height=r,n.textAlign="center",n.textBaseline="middle",n.fillStyle=o,n.fillRect(0,0,a,r),n.fillStyle="#FFF",n.font="bold 14px sans-serif",n.fillText(i,a/2,r/2,a),s.toDataURL("image/png")}}}).call(t,i(9)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,i){var s=i(11),n=i(12);e.exports={color:function(e){return e||n[e]?n[e].nicer:this.hex()},hex:function(){var e=this._goldenRatioColor(),t=s.hsv2rgb(e);return s.rgb2hex(t[0],t[1],t[2])},rgb:function(){var e=this._goldenRatioColor(),t=s.hsv2rgb(e);return"rgb("+parseInt(t[0],10)+", "+parseInt(t[1],10)+", "+parseInt(t[2],10)+")"},rgba:function(){var e=this._goldenRatioColor(),t=s.hsv2rgb(e);return"rgba("+parseInt(t[0],10)+", "+parseInt(t[1],10)+", "+parseInt(t[2],10)+", "+Math.random().toFixed(2)+")"},hsl:function(){var e=this._goldenRatioColor(),t=s.hsv2hsl(e);return"hsl("+parseInt(t[0],10)+", "+parseInt(t[1],10)+", "+parseInt(t[2],10)+")"},_goldenRatioColor:function(e,t){return this._goldenRatio=.618033988749895,this._hue=this._hue||Math.random(),this._hue+=this._goldenRatio,this._hue%=1,"number"!=typeof e&&(e=.5),"number"!=typeof t&&(t=.95),[360*this._hue,100*e,100*t]}}},function(e,t){e.exports={rgb2hsl:function(e){var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,r=Math.min(s,n,a),o=Math.max(s,n,a),l=o-r;return o==r?t=0:s==o?t=(n-a)/l:n==o?t=2+(a-s)/l:a==o&&(t=4+(s-n)/l),(t=Math.min(60*t,360))<0&&(t+=360),i=(r+o)/2,[t,100*(o==r?0:i<=.5?l/(o+r):l/(2-o-r)),100*i]},rgb2hsv:function(e){var t,i,s=e[0],n=e[1],a=e[2],r=Math.min(s,n,a),o=Math.max(s,n,a),l=o-r;return i=0===o?0:l/o*1e3/10,o==r?t=0:s==o?t=(n-a)/l:n==o?t=2+(a-s)/l:a==o&&(t=4+(s-n)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,i,o/255*1e3/10]},hsl2rgb:function(e){var t,i,s,n,a,r=e[0]/360,o=e[1]/100,l=e[2]/100;if(0===o)return[a=255*l,a,a];t=2*l-(i=l<.5?l*(1+o):l+o-l*o),n=[0,0,0];for(var h=0;h<3;h++)(s=r+1/3*-(h-1))<0&&s++,s>1&&s--,a=6*s<1?t+6*(i-t)*s:2*s<1?i:3*s<2?t+(i-t)*(2/3-s)*6:t,n[h]=255*a;return n},hsl2hsv:function(e){var t=e[0],i=e[1]/100,s=e[2]/100;return[t,2*(i*=(s*=2)<=1?s:2-s)/(s+i)*100,(s+i)/2*100]},hsv2rgb:function(e){var t=e[0]/60,i=e[1]/100,s=e[2]/100,n=Math.floor(t)%6,a=t-Math.floor(t),r=255*s*(1-i),o=255*s*(1-i*a),l=255*s*(1-i*(1-a));switch(s*=255,n){case 0:return[s,l,r];case 1:return[o,s,r];case 2:return[r,s,l];case 3:return[r,o,s];case 4:return[l,r,s];case 5:return[s,r,o]}},hsv2hsl:function(e){var t,i,s=e[0],n=e[1]/100,a=e[2]/100;return t=n*a,[s,100*(t/=(i=(2-n)*a)<=1?i:2-i),100*(i/=2)]},rgb2hex:function(e,t,i){return"#"+((256+e<<8|t)<<8|i).toString(16).slice(1)},hex2rgb:function(e){return[(e="0x"+e.slice(1).replace(e.length>4?e:/./g,"$&$&")|0)>>16,e>>8&255,255&e]}}},function(e,t){e.exports={navy:{value:"#000080",nicer:"#001F3F"},blue:{value:"#0000ff",nicer:"#0074D9"},aqua:{value:"#00ffff",nicer:"#7FDBFF"},teal:{value:"#008080",nicer:"#39CCCC"},olive:{value:"#008000",nicer:"#3D9970"},green:{value:"#008000",nicer:"#2ECC40"},lime:{value:"#00ff00",nicer:"#01FF70"},yellow:{value:"#ffff00",nicer:"#FFDC00"},orange:{value:"#ffa500",nicer:"#FF851B"},red:{value:"#ff0000",nicer:"#FF4136"},maroon:{value:"#800000",nicer:"#85144B"},fuchsia:{value:"#ff00ff",nicer:"#F012BE"},purple:{value:"#800080",nicer:"#B10DC9"},silver:{value:"#c0c0c0",nicer:"#DDDDDD"},gray:{value:"#808080",nicer:"#AAAAAA"},black:{value:"#000000",nicer:"#111111"},white:{value:"#FFFFFF",nicer:"#FFFFFF"}}},function(e,t,i){var s=i(6),n=i(14);function a(e,t,i,n){return void 0===i?s.natural(e,t):void 0===n?i:s.natural(parseInt(i,10),parseInt(n,10))}e.exports={paragraph:function(e,t){for(var i=a(3,7,e,t),s=[],n=0;n<i;n++)s.push(this.sentence());return s.join(" ")},cparagraph:function(e,t){for(var i=a(3,7,e,t),s=[],n=0;n<i;n++)s.push(this.csentence());return s.join("")},sentence:function(e,t){for(var i=a(12,18,e,t),s=[],r=0;r<i;r++)s.push(this.word());return n.capitalize(s.join(" "))+"."},csentence:function(e,t){for(var i=a(12,18,e,t),s=[],n=0;n<i;n++)s.push(this.cword());return s.join("")+""},word:function(e,t){for(var i=a(3,10,e,t),n="",r=0;r<i;r++)n+=s.character("lower");return n},cword:function(e,t,i){var s,n="               ";switch(arguments.length){case 0:e=n,s=1;break;case 1:"string"==typeof arguments[0]?s=1:(s=e,e=n);break;case 2:"string"==typeof arguments[0]?s=t:(s=this.natural(e,t),e=n);break;case 3:s=this.natural(t,i)}for(var a="",r=0;r<s;r++)a+=e.charAt(this.natural(0,e.length-1));return a},title:function(e,t){for(var i=a(3,7,e,t),s=[],n=0;n<i;n++)s.push(this.capitalize(this.word()));return s.join(" ")},ctitle:function(e,t){for(var i=a(3,7,e,t),s=[],n=0;n<i;n++)s.push(this.cword());return s.join("")}}},function(e,t,i){var s=i(3);e.exports={capitalize:function(e){return(e+"").charAt(0).toUpperCase()+(e+"").substr(1)},upper:function(e){return(e+"").toUpperCase()},lower:function(e){return(e+"").toLowerCase()},pick:function(e,t,i){return s.isArray(e)?(void 0===t&&(t=1),void 0===i&&(i=t)):(e=[].slice.call(arguments),t=1,i=1),1===t&&1===i?e[this.natural(0,e.length-1)]:this.shuffle(e,t,i)},shuffle:function(e,t,i){for(var s=(e=e||[]).slice(0),n=[],a=0,r=s.length,o=0;o<r;o++)a=this.natural(0,s.length-1),n.push(s[a]),s.splice(a,1);switch(arguments.length){case 0:case 1:return n;case 2:i=t;case 3:return t=parseInt(t,10),i=parseInt(i,10),n.slice(0,this.natural(t,i))}},order:function e(t){e.cache=e.cache||{},arguments.length>1&&(t=[].slice.call(arguments,0));var i=e.options.context.templatePath.join("."),s=e.cache[i]=e.cache[i]||{index:0,array:t};return s.array[s.index++%s.array.length]}}},function(e,t){e.exports={first:function(){var e=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"].concat(["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"]);return this.pick(e)},last:function(){return this.pick(["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"])},name:function(e){return this.first()+" "+(e?this.first()+" ":"")+this.last()},cfirst:function(){var e="                                                                                                    ".split(" ");return this.pick(e)},clast:function(){var e="                      ".split(" ");return this.pick(e)},cname:function(){return this.cfirst()+this.clast()}}},function(e,t){e.exports={url:function(e,t){return(e||this.protocol())+"://"+(t||this.domain())+"/"+this.word()},protocol:function(){return this.pick("http ftp gopher mailto mid cid news nntp prospero telnet rlogin tn3270 wais".split(" "))},domain:function(e){return this.word()+"."+(e||this.tld())},tld:function(){return this.pick("com net org edu gov int mil cn com.cn net.cn gov.cn org.cn  . . tel biz cc tv info name hk mobi asia cd travel pro museum coop aero ad ae af ag ai al am an ao aq ar as at au aw az ba bb bd be bf bg bh bi bj bm bn bo br bs bt bv bw by bz ca cc cf cg ch ci ck cl cm cn co cq cr cu cv cx cy cz de dj dk dm do dz ec ee eg eh es et ev fi fj fk fm fo fr ga gb gd ge gf gh gi gl gm gn gp gr gt gu gw gy hk hm hn hr ht hu id ie il in io iq ir is it jm jo jp ke kg kh ki km kn kp kr kw ky kz la lb lc li lk lr ls lt lu lv ly ma mc md mg mh ml mm mn mo mp mq mr ms mt mv mw mx my mz na nc ne nf ng ni nl no np nr nt nu nz om qa pa pe pf pg ph pk pl pm pn pr pt pw py re ro ru rw sa sb sc sd se sg sh si sj sk sl sm sn so sr st su sy sz tc td tf tg th tj tk tm tn to tp tr tt tv tw tz ua ug uk us uy va vc ve vg vn vu wf ws ye yu za zm zr zw".split(" "))},email:function(e){return this.character("lower")+"."+this.word()+"@"+(e||this.word()+"."+this.tld())},ip:function(){return this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)}}},function(e,t,i){var s=i(18),n=["","","","","","",""];e.exports={region:function(){return this.pick(n)},province:function(){return this.pick(s).name},city:function(e){var t=this.pick(s),i=this.pick(t.children);return e?[t.name,i.name].join(" "):i.name},county:function(e){var t=this.pick(s),i=this.pick(t.children),n=this.pick(i.children)||{name:"-"};return e?[t.name,i.name,n.name].join(" "):n.name},zip:function(e){for(var t="",i=0;i<(e||6);i++)t+=this.natural(0,9);return t}}},function(e,t){var i={11e4:"",110100:"",110101:"",110102:"",110105:"",110106:"",110107:"",110108:"",110109:"",110111:"",110112:"",110113:"",110114:"",110115:"",110116:"",110117:"",110228:"",110229:"",110230:"",12e4:"",120100:"",120101:"",120102:"",120103:"",120104:"",120105:"",120106:"",120110:"",120111:"",120112:"",120113:"",120114:"",120115:"",120116:"",120221:"",120223:"",120225:"",120226:"",13e4:"",130100:"",130102:"",130103:"",130104:"",130105:"",130107:"",130108:"",130121:"",130123:"",130124:" ",130125:"",130126:"",130127:"",130128:"",130129:"",130130:" ",130131:"",130132:"",130133:"",130181:"",130182:"",130183:"",130184:"",130185:"",130186:"",130200:"",130202:"",130203:"",130204:"",130205:"",130207:"",130208:"",130223:"",130224:"",130225:"",130227:"",130229:"",130230:"",130281:"",130283:"",130284:"",130300:"",130302:"",130303:"",130304:"",130321:"",130322:"",130323:"",130324:"",130398:"",130400:"",130402:"",130403:"",130404:"",130406:"",130421:"",130423:"",130424:"",130425:"",130426:"",130427:"",130428:"",130429:"",130430:"",130431:"",130432:"",130433:"",130434:"",130435:"",130481:"",130482:"",130500:"",130502:"",130503:"",130521:"",130522:"",130523:"",130524:"",130525:"",130526:"",130527:"",130528:"",130529:"",130530:"",130531:"",130532:"",130533:"",130534:"",130535:"",130581:"",130582:"",130583:"",130600:"",130602:"",130603:"",130604:"",130621:"",130622:"",130623:"",130624:"",130625:"",130626:"",130627:"",130628:"",130629:"",130630:"",130631:"",130632:"",130633:"",130634:"",130635:" ",130636:"",130637:"",130638:"",130681:"",130682:"",130683:"",130684:"",130699:"",130700:" ",130702:"",130703:"",130705:"",130706:"",130721:"",130722:" ",130723:"",130724:"",130725:"",130726:"",130727:"",130728:"",130729:"",130730:"",130731:"",130732:"",130733:"",130734:"",130800:"",130802:"",130803:"",130804:"",130821:"",130822:"",130823:"",130824:"",130825:"",130826:"",130827:"",130828:"",130829:"",130900:"",130902:"",130903:"",130921:"",130922:"",130923:"",130924:"",130925:"",130926:"",130927:"",130928:"",130929:"",130930:"",130981:"",130982:"",130983:"",130984:"",130985:"",131e3:"",131002:"",131003:"",131022:"",131023:"",131024:"",131025:"",131026:"",131028:"",131081:"",131082:"",131083:"",131100:"",131102:"",131121:"",131122:"",131123:"",131124:"",131125:"",131126:"",131127:"",131128:"",131181:"",131182:"",131183:"",14e4:"",140100:"",140105:"",140106:"",140107:"",140108:"",140109:"",140110:"",140121:"",140122:"",140123:"",140181:"",140182:"",140200:"",140202:"",140203:"",140211:"",140212:"",140221:"",140222:"",140223:"",140224:"",140225:"",140226:"",140227:"",140228:"",140300:"",140302:"",140303:"",140311:"",140321:"",140322:"",140323:"",140400:"",140421:"",140423:"",140424:"",140425:"",140426:"",140427:"",140428:"",140429:"",140430:"",140431:"",140481:"",140482:"",140483:"",140485:"",140500:"",140502:"",140521:"",140522:"",140524:"",140525:"",140581:"",140582:"",140600:"",140602:"",140603:"",140621:"",140622:"",140623:"",140624:"",140625:"",140700:"",140702:"",140721:"",140722:"",140723:"",140724:"",140725:"",140726:"",140727:"",140728:"",140729:"",140781:"",140782:"",140800:"",140802:"",140821:"",140822:"",140823:"",140824:"",140825:"",140826:"",140827:"",140828:"",140829:"",140830:"",140881:"",140882:"",140883:"",140900:"",140902:"",140921:"",140922:"",140923:"",140924:"",140925:"",140926:"",140927:" ",140928:"",140929:"",140930:"",140931:"",140932:"",140981:"",140982:"",141e3:"",141002:"",141021:"",141022:"",141023:"",141024:"",141025:"",141026:"",141027:"",141028:"",141029:"",141030:"",141031:"",141032:"",141033:"",141034:"",141081:"",141082:"",141083:"",141100:"",141102:"",141121:"",141122:"",141123:"",141124:"",141125:"",141126:"",141127:"",141128:"",141129:"",141130:"",141181:"",141182:"",141183:"",15e4:"",150100:"",150102:"",150103:"",150104:"",150105:"",150121:"",150122:"",150123:" ",150124:"",150125:"",150126:"",150200:"",150202:"",150203:"",150204:"",150205:"",150206:"",150207:"",150221:"",150222:"",150223:"",150224:"",150300:"",150302:"",150303:"",150304:"",150305:"",150400:"",150402:"",150403:"",150404:"",150421:"",150422:"",150423:"",150424:"",150425:"",150426:"",150428:"",150429:"",150430:"",150431:"",150500:"",150502:"",150521:"",150522:"",150523:"",150524:"",150525:"",150526:"",150581:"",150582:"",150600:"",150602:"",150621:"",150622:" ",150623:"",150624:"",150625:"",150626:"",150627:"",150628:"",150700:"",150702:"",150703:"",150721:"",150722:"",150723:"",150724:"",150725:"",150726:"",150727:"",150781:"",150782:"",150783:"",150784:"",150785:" ",150786:"",150800:"",150802:"",150821:"",150822:"",150823:"",150824:"",150825:"",150826:"",150827:"",150900:"",150902:"",150921:"",150922:"",150923:"",150924:"",150925:"",150926:"",150927:"",150928:"",150929:"",150981:"",150982:"",152200:"",152201:"",152202:"",152221:"",152222:"",152223:"",152224:"",152225:"",152500:"",152501:"",152502:"",152522:"",152523:"",152524:"",152525:" ",152526:" ",152527:"",152528:"",152529:"",152530:"",152531:"",152532:"",152900:"",152921:"",152922:"",152923:"",152924:"",21e4:"",210100:"",210102:"",210103:"",210104:"",210105:"",210106:"",210111:"",210112:"",210113:"",210114:"",210122:"",210123:"",210124:"",210181:"",210184:"",210185:"",210200:"",210202:"",210203:"",210204:"",210211:"",210212:"",210213:"",210224:"",210281:"",210282:"",210283:"",210298:"",210300:"",210302:"",210303:"",210304:"",210311:"",210321:"",210323:"",210381:"",210382:"",210400:"",210402:"",210403:"",210404:"",210411:"",210421:"",210422:"",210423:"",210424:"",210500:"",210502:"",210503:"",210504:"",210505:"",210521:"",210522:"",210523:"",210600:"",210602:"",210603:"",210604:"",210624:"",210681:"",210682:"",210683:"",210700:"",210702:"",210703:"",210711:"",210726:"",210727:"",210781:"",210782:"",210783:"",210800:"",210802:"",210803:"",210804:"",210811:"",210881:"",210882:"",210883:"",210900:"",210902:"",210903:"",210904:"",210905:"",210911:"",210921:"",210922:"",210923:"",211e3:"",211002:"",211003:"",211004:"",211005:"",211011:"",211021:"",211081:"",211082:"",211100:"",211102:"",211103:"",211121:"",211122:"",211123:"",211200:"",211202:"",211204:"",211221:"",211223:"",211224:"",211281:"",211282:"",211283:"",211300:"",211302:"",211303:"",211321:"",211322:"",211324:"",211381:"",211382:"",211383:"",211400:"",211402:"",211403:"",211404:"",211421:"",211422:"",211481:"",211482:"",22e4:"",220100:"",220102:"",220103:"",220104:"",220105:"",220106:"",220112:"",220122:"",220181:"",220182:" ",220183:" ",220188:"",220200:"",220202:"",220203:"",220204:"",220211:"",220221:"",220281:"",220282:"",220283:"",220284:"",220285:"",220300:"",220302:"",220303:"",220322:" ",220323:"",220381:"",220382:"",220383:"",220400:"",220402:"",220403:"",220421:"",220422:"",220423:"",220500:"",220502:"",220503:"",220521:"",220523:"",220524:"",220581:"",220582:"",220583:"",220600:"",220602:"",220621:"",220622:"",220623:"",220625:"",220681:"",220682:"",220700:"",220702:"",220721:"",220722:"",220723:"",220724:"",220725:"",220800:"",220802:"",220821:"",220822:"",220881:"",220882:"",220883:"",222400:"",222401:"",222402:"",222403:"",222404:"",222405:"",222406:"",222424:"",222426:"",222427:"",23e4:"",230100:"",230102:"",230103:"",230104:"",230106:"",230108:"",230109:"",230111:"",230123:"",230124:"",230125:"",230126:"",230127:"",230128:"",230129:"",230181:"",230182:"",230183:"",230184:"",230186:"",230200:"",230202:"",230203:"",230204:"",230205:"",230206:"",230207:"",230208:"",230221:"",230223:"",230224:"",230225:"",230227:"",230229:"",230230:"",230231:"",230281:"",230282:"",230300:"",230302:" ",230303:"",230304:"",230305:" ",230306:"",230307:"",230321:"",230381:"",230382:"",230383:"",230400:"",230402:"",230403:"",230404:"",230405:"",230406:"",230407:"",230421:"",230422:"",230423:"",230500:"",230502:"",230503:"",230505:"",230506:"",230521:"",230522:"",230523:"",230524:"",230525:"",230600:"",230602:"",230603:"",230604:"",230605:"",230606:"",230621:"",230622:"",230623:"",230624:"",230625:"",230700:"",230702:"",230703:"",230704:"",230705:"",230706:" ",230707:"",230708:"",230709:"",230710:"",230711:"",230712:"",230713:"",230714:"",230715:"",230716:"",230722:"",230781:"",230782:"",230800:"",230803:"",230804:"",230805:"",230811:"",230822:"",230826:"",230828:"",230833:"",230881:"",230882:"",230883:"",230900:"",230902:"",230903:"",230904:"",230921:"",230922:"",231e3:"",231002:"",231003:"",231004:"",231005:"",231024:"",231025:"",231081:"",231083:"",231084:"",231085:"",231086:"",231100:"",231102:"",231121:"",231123:"",231124:"",231181:"",231182:" ",231183:"",231200:"",231202:"",231221:"",231222:"",231223:"",231224:"",231225:"",231226:"",231281:"",231282:"",231283:"",231284:"",232700:"",232702:"",232703:"",232704:"",232721:"",232722:"",232723:" ",232724:"  ",232725:"",31e4:"",310100:"",310101:"",310104:"",310105:"",310106:"",310107:"",310108:"",310109:"",310110:"",310112:"",310113:"",310114:"",310115:"",310116:"",310117:"",310118:"",310120:"",310230:"",310231:"",32e4:"",320100:"",320102:"",320104:"",320105:"",320106:"",320111:"",320113:" ",320114:"",320115:"",320116:"",320124:"",320125:"",320126:"",320200:" ",320202:"",320203:"",320204:"",320205:"",320206:" ",320211:"",320281:"",320282:"",320297:"",320300:"",320302:"",320303:"",320305:"",320311:"",320321:"",320322:"",320323:"",320324:"",320381:"",320382:"",320383:"",320400:"",320402:"",320404:"",320405:" ",320411:"",320412:"",320481:"",320482:"",320483:"",320500:"",320505:"",320506:"",320507:"",320508:"",320581:"",320582:" ",320583:"",320584:"",320585:"",320596:"",320600:"",320602:"",320611:"",320612:"",320621:"",320623:"",320681:"",320682:"",320684:"",320694:"",320700:"",320703:"",320705:"",320706:"",320721:"",320722:"",320723:"",320724:"",320725:"",320800:"",320802:"",320803:"",320804:"",320811:"",320826:"",320829:"",320830:"",320831:"",320832:"",320900:"",320902:"",320903:"",320921:"",320922:"",320923:"",320924:"",320925:"",320981:"",320982:"",320983:"",321e3:"",321002:"",321003:"",321023:"",321081:"",321084:"",321088:"",321093:"",321100:"",321102:"",321111:"",321112:"",321181:"",321182:"",321183:"",321184:"",321200:"",321202:"",321203:"",321281:"",321282:"",321283:"",321284:" ",321285:"",321300:"",321302:"",321311:"",321322:"",321323:"",321324:"",321325:"",33e4:"",330100:"",330102:"",330103:"",330104:"",330105:"",330106:"",330108:"",330109:"",330110:"",330122:"",330127:"",330182:"",330183:"",330185:"",330186:"",330200:"",330203:"",330204:"",330205:"",330206:"",330211:"",330212:"",330225:"",330226:"",330281:"",330282:"",330283:"",330284:"",330300:"",330302:"",330303:"",330304:"",330322:"",330324:"",330326:"",330327:"",330328:"",330329:"",330381:"",330382:"",330383:"",330400:"",330402:"",330411:"",330421:"",330424:"",330481:"",330482:"",330483:"",330484:"",330500:"",330502:"",330503:"",330521:"",330522:"",330523:"",330524:"",330600:"",330602:"",330621:"",330624:"",330681:"",330682:"",330683:"",330684:"",330700:"",330702:"",330703:"",330723:"",330726:"",330727:"",330781:"",330782:"",330783:"",330784:"",330785:"",330800:"",330802:"",330803:"",330822:"",330824:"",330825:"",330881:"",330882:"",330900:"",330902:"",330903:"",330921:"",330922:"",330923:"",331e3:"",331002:"",331003:"",331004:"",331021:"",331022:"",331023:"",331024:"",331081:"",331082:"",331083:"",331100:"",331102:"",331121:"",331122:"",331123:"",331124:"",331125:"",331126:"",331127:"",331181:"",331182:"",34e4:"",340100:"",340102:"",340103:"",340104:"",340111:"",340121:"",340122:"",340123:"",340192:"",340200:"",340202:"",340203:"",340207:" ",340208:"",340221:"",340222:"",340223:"",340224:"",340300:" ",340302:"",340303:"",340304:"",340311:"",340321:"",340322:"",340323:"",340324:"",340400:"",340402:"",340403:"",340404:"",340405:"",340406:"",340421:"",340422:"",340500:"",340503:"",340504:"",340506:"",340521:"",340522:"",340600:"",340602:"",340603:"",340604:"",340621:"",340622:"",340700:"",340702:"",340703:"",340711:"",340721:"",340722:"",340800:"",340802:"",340803:"",340811:"",340822:"",340823:"",340824:"",340825:"",340826:"",340827:"",340828:"",340881:"",340882:"",341e3:"",341002:"",341003:"",341004:"",341021:"",341022:"",341023:"",341024:"",341025:"",341100:"",341102:"",341103:"",341122:"",341124:"",341125:"",341126:"",341181:"",341182:"",341183:"",341200:"",341202:"",341203:"",341204:"",341221:"",341222:"",341225:"",341226:"",341282:"",341283:"",341300:"",341302:"",341321:" ",341322:"",341323:"",341324:"",341325:"",341400:"",341421:"",341422:" ",341423:"",341424:"",341500:"",341502:"",341503:"",341521:"",341522:"",341523:"",341524:"",341525:"",341526:"",341600:"",341602:"",341621:"",341622:"",341623:"",341624:"",341700:" ",341702:" ",341721:"",341722:"",341723:"",341724:"",341800:"",341802:"",341821:"",341822:"",341823:"",341824:"",341825:"",341881:"",341882:"",35e4:"",350100:"",350102:"",350103:"",350104:"",350105:"",350111:"",350121:"",350122:"",350123:"",350124:"",350125:"",350128:"",350181:"",350182:"",350183:"",350200:"",350203:"",350205:"",350206:"",350211:"",350212:"",350213:"",350214:"",350300:"",350302:"",350303:"",350304:"",350305:"",350322:"",350323:"",350400:"",350402:"",350403:"",350421:"",350423:"",350424:"",350425:"",350426:"",350427:"",350428:"",350429:"",350430:"",350481:"",350482:"",350500:"",350502:"",350503:"",350504:"",350505:"",350521:" ",350524:"",350525:"",350526:"",350527:"",350581:"",350582:"",350583:"",350584:"",350600:"",350602:"",350603:"",350622:"",350623:"",350624:"",350625:"",350626:"",350627:"",350628:"",350629:"",350681:"",350682:"",350700:"",350702:"",350721:"",350722:"",350723:"",350724:"",350725:"",350781:"",350782:"",350783:"",350784:"",350785:"",350800:"",350802:"",350821:"",350822:"",350823:"",350824:"",350825:"",350881:"",350882:"",350900:"",350902:"",350921:"",350922:"",350923:"",350924:"",350925:"",350926:"",350981:"",350982:"",350983:"",36e4:"",360100:"",360102:"",360103:"",360104:"",360105:"",360111:"",360121:"",360122:"",360123:"",360124:"",360128:"",360200:"",360202:"",360203:" ",360222:"",360281:"",360282:"",360300:"",360302:"",360313:"",360321:"",360322:" ",360323:"",360324:"",360400:"",360402:"",360403:"",360421:"",360423:"",360424:"",360425:"",360426:"",360427:"",360428:"",360429:"",360430:"",360481:"",360482:"",360483:"",360500:"",360502:"",360521:"",360522:"",360600:"",360602:"",360622:"",360681:"",360682:"",360700:"",360702:" ",360721:"",360722:"",360723:"",360724:"",360725:"",360726:"",360727:"",360728:"",360729:"",360730:"",360731:"",360732:"",360733:"",360734:"",360735:"",360781:"",360782:"",360783:"",360800:"",360802:"",360803:"",360821:"",360822:"",360823:"",360824:"",360825:"",360826:"",360827:"",360828:"",360829:"",360830:"",360881:"",360882:"",360900:"",360902:"",360921:"",360922:"",360923:"",360924:"",360925:"",360926:"",360981:"",360982:" ",360983:"",360984:"",361e3:"",361002:"",361021:"",361022:"",361023:"",361024:"",361025:"",361026:"",361027:"",361028:"",361029:"",361030:"",361031:"",361100:"",361102:"",361121:"",361122:"",361123:"",361124:"",361125:"",361126:"",361127:"",361128:"",361129:"",361130:"",361181:"",361182:"",37e4:"",370100:"",370102:"",370103:"",370104:"",370105:"",370112:"",370113:"",370124:"",370125:"",370126:"",370181:" ",370182:"",370200:"",370202:"",370203:"",370211:"",370212:"",370213:"",370214:"",370281:"",370282:"",370283:"",370285:"",370286:"",370300:"",370302:"",370303:" ",370304:"",370305:"",370306:"",370321:"",370322:"",370323:"",370324:"",370400:"",370402:"",370403:"",370404:"",370405:"",370406:"",370481:"",370482:"",370500:"",370502:"",370503:"",370521:"",370522:"",370523:"",370591:"",370600:"",370602:"",370611:"",370612:"",370613:"",370634:"",370681:"",370682:"",370683:"",370684:"",370685:"",370686:" ",370687:"",370688:"",370700:"",370702:"",370703:"",370704:"",370705:"",370724:"",370725:"",370781:"",370782:"",370783:"",370784:"",370785:"",370786:"",370787:"",370800:"",370802:"",370811:"",370826:"",370827:"",370828:"",370829:"",370830:"",370831:"",370832:"",370881:"",370882:"",370883:"",370884:"",370900:"",370902:"",370903:"",370921:"",370923:"",370982:"",370983:"",370984:"",371e3:"",371002:" ",371081:"",371082:"",371083:"",371084:"",371100:"",371102:"",371103:"",371121:"",371122:"",371123:"",371200:"",371202:"",371203:"",371204:"",371300:"",371302:"",371311:"",371312:"",371321:"",371322:"",371323:"",371324:"",371325:"",371326:"",371327:"",371328:"",371329:"",371330:"",371400:"",371402:"",371421:"",371422:"",371423:"",371424:"",371425:"",371426:"",371427:"",371428:"",371481:"",371482:"",371483:"",371500:"",371502:"",371521:"",371522:"",371523:"",371524:"",371525:" ",371526:"",371581:"",371582:"",371600:"",371602:"",371621:" ",371622:"",371623:" ",371624:"",371625:"",371626:"",371627:"",371700:"",371702:"",371721:"",371722:"",371723:"",371724:"",371725:"",371726:"",371727:"",371728:"",371729:"",41e4:"",410100:"",410102:"",410103:"",410104:"",410105:"",410106:"",410108:" ",410122:"",410181:"",410182:"",410183:"",410184:"",410185:"",410188:"",410200:"",410202:"",410203:"",410204:"",410205:"",410211:"",410221:"",410222:"",410223:"",410224:"",410225:"",410226:"",410300:"",410302:"",410303:"",410304:"",410305:"",410306:"",410307:"",410322:"",410323:"",410324:" ",410325:"",410326:"",410327:"",410328:"",410329:"",410381:"",410400:"",410402:"",410403:"",410404:"",410411:"",410421:"",410422:"",410423:"",410425:"",410481:"",410482:"",410483:"",410500:"",410502:"",410503:"",410505:"",410506:"",410522:"",410523:"",410526:"",410527:"",410581:"",410582:"",410600:"",410602:"",410603:"",410611:"",410621:"",410622:"",410623:"",410700:"",410702:"",410703:"",410704:"",410711:"",410721:"",410724:"",410725:"",410726:"",410727:"",410728:"",410781:"",410782:"",410783:"",410800:"",410802:"",410803:"",410804:"",410811:"",410821:"",410822:"",410823:"",410825:"",410881:"",410882:"",410883:"",410884:"",410900:"",410902:"",410922:"",410923:"",410926:"",410927:"",410928:"",410929:"",411e3:"",411002:"",411023:"",411024:"",411025:"",411081:"",411082:"",411083:"",411100:"",411102:"",411103:"",411104:"",411121:"",411122:"",411123:"",411200:"",411202:"",411221:" ",411222:"",411224:"",411281:"",411282:"",411283:"",411300:"",411302:"",411303:"",411321:"",411322:"",411323:"",411324:"",411325:"",411326:"",411327:"",411328:"",411329:"",411330:"",411381:"",411382:"",411400:"",411402:"",411403:"",411421:"",411422:"",411423:"",411424:"",411425:"",411426:"",411481:"",411482:"",411500:"",411502:"",411503:"",411521:"",411522:"",411523:"",411524:"",411525:"",411526:"",411527:"",411528:"",411529:"",411600:"",411602:"",411621:"",411622:"",411623:"",411624:"",411625:"",411626:"",411627:"",411628:"",411681:"",411682:"",411700:"",411702:"",411721:"",411722:"",411723:"",411724:"",411725:"",411726:"",411727:"",411728:"",411729:"",411730:"",42e4:"",420100:"",420102:"",420103:"",420104:"",420105:"",420106:"",420107:"",420111:"",420112:"",420113:"",420114:"",420115:"",420116:"",420117:"",420118:"",420200:"",420202:"",420203:"",420204:"",420205:"",420222:"",420281:"",420282:"",420300:" ",420302:"",420303:" ",420321:"",420322:"",420323:"",420324:"",420325:"",420381:"",420383:"",420500:"",420502:"",420503:"",420504:"",420505:"",420506:"",420525:"",420526:"",420527:"",420528:"",420529:"",420581:"",420582:"",420583:"",420584:"",420600:"",420602:"",420606:"",420607:"",420624:"",420625:"",420626:"",420682:"",420683:"",420684:"",420685:"",420700:"",420702:"",420703:"",420704:"",420705:"",420800:"",420802:"",420804:"",420821:"",420822:"",420881:"",420882:"",420900:"",420902:"",420921:"",420922:"",420923:"",420981:"",420982:"",420984:"",420985:"",421e3:"",421002:"",421003:"",421022:"",421023:"",421024:"",421081:"",421083:"",421087:"",421088:"",421100:"",421102:"",421121:"",421122:"",421123:"",421124:"",421125:" ",421126:"",421127:"",421181:"",421182:"",421183:"",421200:"",421202:"",421221:"",421222:"",421223:"",421224:"",421281:"",421283:"",421300:"",421302:"",421321:"",421381:"",421382:"",422800:"",422801:"",422802:"",422822:"",422823:"",422825:"",422826:"",422827:"",422828:"",422829:"",429004:"",429005:"",429006:"",429021:"",43e4:"",430100:"",430102:"",430103:"",430104:"",430105:"",430111:"",430121:"",430122:"",430124:"",430181:"",430182:"",430200:" ",430202:"",430203:"",430204:"",430211:"",430221:" ",430223:"",430224:"",430225:"",430281:"",430282:"",430300:"",430302:"",430304:"",430321:"",430381:"",430382:"",430383:"",430400:"",430405:" ",430406:"",430407:"",430408:"",430412:"",430421:"",430422:"",430423:"",430424:"",430426:"",430481:"",430482:"",430483:"",430500:"",430502:"",430503:"",430511:"",430521:"",430522:"",430523:"",430524:"",430525:"",430527:"",430528:"",430529:"",430581:"",430582:"",430600:"",430602:"",430603:"",430611:"",430621:"",430623:"",430624:"",430626:"",430681:"",430682:"",430683:"",430700:"",430702:"",430703:"",430721:"",430722:"",430723:"",430724:"",430725:"",430726:"",430781:"",430782:"",430800:" ",430802:"",430811:"",430821:"",430822:"",430823:"",430900:"",430902:"",430903:"",430921:"",430922:"",430923:"",430981:"",430982:"",431e3:"",431002:"",431003:"",431021:"",431022:" ",431023:"",431024:"",431025:"",431026:"",431027:"",431028:"",431081:"",431082:"",431100:"",431102:"",431103:"",431121:"",431122:"",431123:"",431124:"",431125:"",431126:"",431127:"",431128:"",431129:"",431130:"",431200:"",431202:"",431221:"",431222:"",431223:"",431224:"",431225:"",431226:"",431227:"",431228:"",431229:"",431230:"",431281:"",431282:"",431300:"",431302:"",431321:"",431322:"",431381:"",431382:"",431383:"",433100:"",433101:"",433122:"",433123:"",433124:"",433125:"",433126:"",433127:"",433130:"",433131:"",44e4:"",440100:"",440103:"",440104:"",440105:" ",440106:"",440111:"",440112:"",440113:"",440114:"",440115:"",440116:"",440183:"",440184:"",440189:"",440200:"",440203:"",440204:"",440205:"",440222:"",440224:"",440229:"",440232:"",440233:"",440281:"",440282:"",440283:"",440300:"",440303:"",440304:"",440305:"",440306:"",440307:"",440308:"",440309:"",440320:"",440321:"",440322:"",440323:"",440400:" ",440402:"",440403:"",440404:"",440488:"",440500:"",440507:"",440511:"",440512:" ",440513:"",440514:"",440515:"",440523:"",440524:"",440600:"",440604:"",440605:"",440606:"",440607:"",440608:"",440609:"",440700:"",440703:"",440704:"",440705:"",440781:"",440783:"",440784:"",440785:"",440786:"",440800:"",440802:"",440803:"",440804:"",440811:" ",440823:"",440825:"",440881:"",440882:"",440883:"",440884:"",440900:"",440902:"",440903:"",440923:"",440981:"",440982:"",440983:"",440984:"",441200:"",441202:"",441203:"",441223:"",441224:"",441225:"",441226:"",441283:"",441284:"",441285:"",441300:" ",441302:" ",441303:" ",441322:"",441323:" ",441324:"",441325:"",441400:"",441402:"",441421:"",441422:"",441423:"",441424:"",441426:"",441427:"",441481:"",441482:"",441500:"",441502:"",441521:"",441523:"",441581:"",441582:"",441600:"",441602:"",441621:"",441622:"",441623:"",441624:"",441625:"",441626:"",441700:"",441702:"",441721:"",441723:"",441781:"",441782:"",441800:"",441802:"",441821:"",441823:"",441825:"",441826:"",441827:"",441881:"",441882:"",441883:"",441900:"",442e3:"",442101:"",445100:"",445102:"",445121:"",445122:"",445186:"",445200:"",445202:"",445221:"",445222:"",445224:" ",445281:"",445285:"",445300:"",445302:"",445321:"",445322:"",445323:"",445381:"",445382:"",45e4:"",450100:"",450102:"",450103:"",450105:"",450107:"",450108:"",450109:"",450122:"",450123:"",450124:"",450125:"",450126:"",450127:"",450128:"",450200:"",450202:"",450203:"",450204:"",450205:"",450221:"",450222:"",450223:"",450224:"",450225:"",450226:"",450227:"",450300:"",450302:"",450303:" ",450304:"",450305:"",450311:"",450321:"",450322:"",450323:"",450324:"",450325:"",450326:"",450327:"",450328:"",450329:"",450330:"",450331:"",450332:"",450333:"",450400:"",450403:"",450405:"",450406:"",450421:"",450422:"",450423:"",450481:"",450482:"",450500:"",450502:"",450503:"",450512:"",450521:"",450522:"",450600:"",450602:"",450603:"",450621:"",450681:"",450682:"",450700:"",450702:"",450703:"",450721:"",450722:"",450723:"",450800:"",450802:"",450803:"",450804:"",450821:"",450881:"",450882:"",450900:"",450902:"",450903:"",450921:"",450922:"",450923:"",450924:"",450981:"",450982:"",451e3:"",451002:"",451021:"",451022:"",451023:"",451024:"",451025:"",451026:"",451027:"",451028:"",451029:"",451030:"",451031:"",451032:"",451100:"",451102:"",451119:"",451121:"",451122:"",451123:"",451124:"",451200:" ",451202:"",451221:"",451222:"",451223:"",451224:"",451225:"",451226:"",451227:"",451228:"",451229:"",451281:"",451282:"",451300:"",451302:"",451321:"",451322:"",451323:"",451324:"",451381:"",451382:"",451400:"",451402:"",451421:"",451422:"",451423:"",451424:"",451425:"",451481:"",451482:"",46e4:"",460100:"",460105:"",460106:"",460107:"",460108:"",460109:"",460200:"",460300:"",460321:"",460322:"",460323:"",469001:"",469002:"",469003:"",469005:"",469006:"",469007:"",469025:"",469026:"",469027:"",469028:"",469030:"",469031:"",469033:"",469034:"",469035:"",469036:"",471005:"",5e5:"",500100:"",500101:"",500102:"",500103:"",500104:"",500105:"",500106:"",500107:"",500108:"",500109:"",500110:"",500111:"",500112:"",500113:"",500114:"",500115:"",500222:"",500223:"",500224:"",500225:"",500226:"",500227:"",500228:"",500229:"",500230:"",500231:"",500232:"",500233:" ",500234:"",500235:"",500236:"",500237:"",500238:"",500240:"",500241:"",500242:"",500243:"",500381:"",500382:"",500383:"",500384:"",500385:"",51e4:"",510100:"",510104:"",510105:"",510106:"",510107:"",510108:"",510112:"",510113:"",510114:"",510115:"",510121:" ",510122:"",510124:"",510129:"",510131:"",510132:"",510181:" ",510182:"",510183:"",510184:"",510185:"",510300:"",510302:"",510303:"",510304:"",510311:"",510321:"",510322:"",510323:"",510400:"",510402:"",510403:"",510411:"",510421:"",510422:"",510423:"",510500:"",510502:"",510503:"",510504:"",510521:"",510522:"",510524:"",510525:"",510526:"",510600:"",510603:"",510623:"",510626:"",510681:"",510682:"",510683:"",510684:"",510700:"",510703:"",510704:"",510722:"",510723:"",510724:"",510725:"",510726:"",510727:"",510781:"",510782:"",510800:"",510802:"",510811:"",510812:"",510821:"",510822:"",510823:"",510824:"",510825:"",510900:"",510903:"",510904:"",510921:"",510922:"",510923:"",510924:"",511e3:"",511002:"",511011:"",511024:"",511025:"",511028:"",511029:"",511100:"",511102:"",511111:"",511112:"",511113:"",511123:"",511124:" ",511126:"",511129:"",511132:"",511133:"",511181:"",511182:"",511300:"",511302:"",511303:"",511304:"",511321:"",511322:"",511323:"",511324:"",511325:"",511381:"",511382:"",511400:"",511402:"",511421:"",511422:"",511423:"",511424:"",511425:"",511426:"",511500:"",511502:" ",511521:"",511522:"",511523:"",511524:"",511525:"",511526:"",511527:" ",511528:"",511529:"",511530:"",511600:"",511602:"",511603:"",511621:" ",511622:"",511623:"",511681:"",511683:"",511700:"",511702:"",511721:"",511722:"",511723:"",511724:"",511725:" ",511781:"",511782:"",511800:"",511802:"",511821:"",511822:"",511823:"",511824:"",511825:"",511826:"",511827:"",511828:"",511900:"",511902:"",511903:"",511921:"",511922:"",511923:"",511924:"",512e3:"",512002:"",512021:"",512022:"",512081:"",512082:"",513200:"",513221:"",513222:"",513223:"",513224:"",513225:"",513226:"",513227:"",513228:"",513229:"",513230:"",513231:"",513232:"",513233:"",513234:"",513300:"",513321:"",513322:"",513323:"",513324:"",513325:"",513326:"",513327:"",513328:"",513329:"",513330:" ",513331:"",513332:" ",513333:"",513334:"",513335:"",513336:"",513337:"",513338:"",513339:"",513400:"",513401:"",513422:"",513423:"",513424:"",513425:"",513426:"",513427:"",513428:" ",513429:"",513430:"",513431:"",513432:"",513433:"",513434:"",513435:"",513436:"",513437:"",513438:"",52e4:"",520100:"",520102:"",520103:"",520111:"",520112:"",520113:"",520121:"",520122:"",520123:"",520151:"",520181:"",520182:"",520200:"",520201:"",520203:"",520221:"",520222:"",520223:"",520300:"",520302:"",520303:"",520321:"",520322:"",520323:"",520324:"",520325:"",520326:"",520327:"",520328:"",520329:"",520330:" ",520381:"",520382:"",520383:"",520400:"",520402:"",520421:"",520422:"",520423:"",520424:"",520425:"",520426:"",522200:"",522201:"",522222:"",522223:"",522224:"",522225:"",522226:"",522227:"",522228:"",522229:"",522230:"",522231:"",522300:"",522301:"",522322:"",522323:"",522324:"",522325:"",522326:"",522327:"",522328:"",522329:"",522400:"",522401:"",522422:"",522423:"",522424:"",522425:"",522426:"",522427:"",522428:" ",522429:"",522600:"",522601:"",522622:"",522623:"",522624:"",522625:"",522626:"",522627:"",522628:"",522629:"",522630:"",522631:"",522632:"",522633:"",522634:"",522635:"",522636:"",522637:"",522700:"",522701:"",522702:"",522722:"",522723:"",522725:"",522726:"",522727:"",522728:"",522729:"",522730:"",522731:" ",522732:"",522733:"",53e4:"",530100:"",530102:"",530103:"",530111:"",530112:"",530113:"",530121:"",530122:"",530124:"",530125:"",530126:"",530127:"",530128:"",530129:"",530181:"",530182:"",530300:"",530302:"",530321:"",530322:"",530323:"",530324:"",530325:"",530326:"",530328:"",530381:"",530382:"",530400:"",530402:"",530421:"",530422:"",530423:"",530424:"",530425:"",530426:"",530427:"",530428:"",530429:"",530500:"",530502:"",530521:"",530522:"",530523:"",530524:"",530525:"",530600:"",530602:"",530621:"",530622:"",530623:"",530624:"",530625:"",530626:"",530627:"",530628:"",530629:"",530630:"",530631:"",530700:"",530702:"",530721:"",530722:"",530723:"",530724:"",530725:"",530800:"",530802:"",530821:"",530822:"",530823:"",530824:"",530825:"",530826:"",530827:"",530828:"",530829:"",530830:"",530900:"",530902:"",530921:"",530922:"",530923:"",530924:"",530925:"",530926:"",530927:"",530928:"",532300:"",532301:"",532322:"",532323:"",532324:"",532325:"",532326:"",532327:"",532328:"",532329:"",532331:"",532332:"",532500:"",532501:"",532502:"",532522:"",532523:"",532524:"",532525:"",532526:"",532527:"",532528:"",532529:"",532530:"",532531:"",532532:"",532533:"",532600:"",532621:"",532622:" ",532623:"",532624:" ",532625:"",532626:"",532627:"",532628:"",532629:"",532800:"",532801:"",532822:"",532823:"",532824:"",532900:"",532901:"",532922:"",532923:"",532924:"",532925:"",532926:"",532927:"",532928:"",532929:"",532930:"",532931:"",532932:"",532933:"",533100:"",533102:"",533103:"",533122:"",533123:"",533124:"",533125:"",533300:"",533321:"",533323:"",533324:"",533325:"",533326:"",533400:"",533421:" ",533422:"",533423:"",533424:"",54e4:"",540100:"",540102:"",540121:"",540122:"",540123:"",540124:"",540125:" ",540126:"",540127:"",540128:"",542100:"",542121:"",542122:"",542123:"",542124:"",542125:"",542126:"",542127:"",542128:"",542129:"",542132:"",542133:"",542134:"",542200:"",542221:"",542222:"",542223:"",542224:"",542225:"",542226:"",542227:"",542228:"",542229:" ",542231:"",542232:"",542233:"",542234:"",542300:"",542301:"",542322:"",542323:"",542324:"",542325:"",542326:"",542327:"",542328:"",542329:"",542330:"",542331:"",542332:"",542333:"",542334:"",542335:"",542336:"",542337:"",542338:"",542339:"",542400:"",542421:"",542422:"",542423:"",542424:"",542425:"",542426:"",542427:"",542428:"",542429:"",542430:"",542431:"",542432:"",542500:"",542521:"",542522:"",542523:"",542524:"",542525:"",542526:"",542527:"",542528:"",542600:"",542621:"",542622:"",542623:"",542624:"",542625:"",542626:"",542627:"",542628:"",61e4:"",610100:"",610102:"",610103:"",610104:"",610111:"",610112:"",610113:"",610114:"",610115:"",610116:"",610122:"",610124:"",610125:"",610126:"",610127:"",610200:"",610202:"",610203:"",610204:"",610222:"",610223:"",610300:"",610302:"",610303:"",610304:"",610322:"",610323:"",610324:"",610326:"",610327:"",610328:"",610329:"",610330:"",610331:"",610332:"",610400:"",610402:"",610403:"",610404:"",610422:"",610423:"",610424:"",610425:"",610426:"",610427:"",610428:"",610429:"",610430:"",610431:"",610481:"",610482:"",610500:"",610502:"",610521:"",610522:"",610523:"",610524:"",610525:"",610526:"",610527:"",610528:"",610581:"",610582:"",610583:"",610600:"",610602:"",610621:"",610622:"",610623:"",610624:"",610625:"",610626:"",610627:"",610628:"",610629:"",610630:"",610631:"",610632:"",610633:"",610700:"",610702:"",610721:"",610722:"",610723:"",610724:"",610725:"",610726:"",610727:"",610728:"",610729:"",610730:"",610731:"",610800:"",610802:"",610821:"",610822:"",610823:"",610824:"",610825:"",610826:"",610827:"",610828:"",610829:" ",610830:"",610831:"",610832:"",610900:"",610902:"",610921:"",610922:"",610923:"",610924:"",610925:"",610926:"",610927:"",610928:"",610929:"",610930:"",611e3:"",611002:"",611021:"",611022:"",611023:"",611024:"",611025:"",611026:"",611027:"",62e4:"",620100:"",620102:"",620103:"",620104:"",620105:"",620111:"",620121:"",620122:"",620123:"",620124:"",620200:"",620300:"",620302:"",620321:"",620322:"",620400:"",620402:"",620403:"",620421:"",620422:"",620423:"",620424:"",620500:"",620502:"",620503:"",620521:"",620522:"",620523:"",620524:"",620525:" ",620526:"",620600:"",620602:"",620621:"",620622:"",620623:"",620624:"",620700:" ",620702:"",620721:"",620722:"",620723:"",620724:"",620725:"",620726:"",620800:"",620802:"",620821:"",620822:"",620823:"",620824:"",620825:"",620826:"",620827:"",620900:"",620902:"",620921:"",620922:"",620923:"",620924:"",620981:"",620982:"",620983:"",621e3:"",621002:"",621021:"",621022:"",621023:" ",621024:"",621025:"",621026:"",621027:"",621028:"",621100:"",621102:"",621121:"",621122:"",621123:"",621124:"",621125:"",621126:"",621127:"",621200:"",621202:"",621221:"",621222:"",621223:"",621224:"",621225:"",621226:"",621227:"",621228:"",621229:"",622900:"",622901:"",622921:"",622922:"",622923:"",622924:"",622925:"",622926:"",622927:"",622928:"",623e3:"",623001:"",623021:"",623022:"",623023:"",623024:"",623025:"",623026:"",623027:"",623028:"",63e4:"",630100:"",630102:"",630103:"",630104:"",630105:"",630121:"",630122:"",630123:"",630124:"",632100:"",632121:"",632122:"",632123:"",632126:"",632127:"",632128:"",632129:"",632200:"",632221:"",632222:"",632223:"",632224:"",632225:"",632300:"",632321:"",632322:"",632323:"",632324:"",632325:"",632500:"",632521:"",632522:"",632523:"",632524:"",632525:"",632526:"",632600:"",632621:"",632622:"",632623:"",632624:"",632625:"",632626:"",632627:"",632700:" ",632721:" ",632722:"",632723:"",632724:"",632725:"",632726:"",632727:"",632800:"",632801:" ",632802:"",632821:"",632822:"",632823:"",632824:"",64e4:"",640100:"",640104:"",640105:"",640106:"",640121:"",640122:"",640181:"",640182:"",640200:"",640202:"",640205:" ",640221:"",640222:"",640300:" ",640302:"",640303:" ",640323:" ",640324:"",640381:"",640382:"",640400:"",640402:"",640422:"",640423:"",640424:"",640425:"",640426:"",640500:"",640502:"",640521:"",640522:"",640523:"",65e4:"",650100:"",650102:"",650103:"",650104:"",650105:"",650106:"",650107:"",650109:"",650121:"",650122:"",650200:"",650202:"",650203:"",650204:"",650205:"",650206:"",652100:"",652101:"",652122:"",652123:"",652124:"",652200:"",652201:"",652222:"",652223:"",652224:"",652300:"",652301:"",652302:"",652323:"",652324:"",652325:"",652327:"",652328:"",652329:"",652700:"",652701:"",652702:"",652722:"",652723:"",652724:"",652800:"",652801:"",652822:"",652823:"",652824:"",652825:"",652826:"",652827:"",652828:"",652829:"",652830:"",652900:"",652901:"",652922:"",652923:"",652924:"",652925:"",652926:"",652927:"",652928:"",652929:"",652930:"",653e3:"",653001:"",653022:"",653023:"",653024:"",653025:"",653100:"",653101:"",653121:"",653122:"",653123:"",653124:"",653125:"",653126:"",653127:"",653128:"",653129:"",653130:"",653131:"",653132:"",653200:"",653201:"",653221:"",653222:"",653223:"",653224:"",653225:"",653226:"",653227:"",653228:"",654e3:"",654002:"",654003:"",654021:"",654022:"",654023:"",654024:"",654025:"",654026:"",654027:"",654028:"",654029:"",654200:"",654201:"",654202:"",654221:"",654223:"",654224:"",654225:"",654226:"",654227:"",654300:"",654301:"",654321:"",654322:"",654323:"",654324:"",654325:"",654326:"",654327:"",659001:"",659002:"",659003:"",659004:" ",71e4:"",710100:"",710101:"",710102:"",710103:"",710104:"",710105:"",710106:"",710107:"",710108:"",710109:"",710110:"",710111:"",710112:"",710113:"",710200:"",710201:"",710202:"",710203:"",710204:"",710205:"",710206:"",710207:"",710208:"",710209:"",710210:" ",710211:"",710212:"",710241:"",710242:"",710243:"",710244:"",710245:"",710246:"",710247:"",710248:"",710249:"",710250:"",710251:"",710252:"",710253:"",710254:"",710255:"",710256:"",710257:"",710258:" ",710259:"",710260:"",710261:"",710262:"",710263:"",710264:"",710265:"",710266:"",710267:"",710268:"",710300:"",710301:"",710302:"",710303:"",710304:"",710305:"",710306:"",710307:"",710339:"",710340:"",710341:"",710342:"",710343:"",710344:" ",710345:"",710346:"",710347:"",710348:"",710349:"",710350:"",710351:"",710352:"",710353:"",710354:"",710355:"",710356:"",710357:"",710358:"",710359:"",710360:"",710361:"",710362:"",710363:"",710364:"",710365:"",710366:"",710367:"",710368:"",710369:"",710400:"",710401:"",710402:"",710403:"",710404:"",710405:"",710406:"",710407:"",710408:"",710409:"",710431:"",710432:"",710433:"",710434:"",710435:"",710436:"",710437:"",710438:"",710439:"",710440:"",710441:"",710442:"",710443:"",710444:"",710445:"",710446:"",710447:" ",710448:"",710449:"",710450:"",710451:"",710500:"",710507:"",710508:"",710509:"",710510:"",710511:"",710512:"",710600:"",710614:"",710615:"",710616:"",710617:"",710618:"",710619:"",710620:"",710621:"",710622:"",710623:" ",710624:"",710625:"",710626:"",710700:"",710701:"",710702:"",710703:"",710704:"",710705:"",710706:"",710707:" ",710708:"",710800:"",710801:"",710802:"",710803:"",710804:"",710900:"",710901:"",710902:"",710903:"",711100:"",711130:"",711131:"",711132:"",711133:"",711134:"",711135:"",711136:"",711137:"",711138:"",711139:"",711140:"",711141:"",711142:"",711143:"",711144:"",711145:"",711146:"",711147:" ",711148:"",711149:"",711150:"",711151:"",711152:"",711153:"",711154:"",711155:"",711156:"",711157:"",711158:"",711200:"",711214:"",711215:"",711216:"",711217:"",711218:"",711219:"",711220:"",711221:"",711222:"",711223:"",711224:"",711225:"",711226:"",711300:"",711314:"",711315:"",711316:"",711317:"",711318:"",711319:"",711320:"",711321:"",711322:"",711323:"",711324:"",711325:"",711326:"",711400:"",711414:"",711415:"",711416:"",711417:"",711418:"",711419:"",711420:"",711421:"",711422:"",711423:"",711424:"",711425:"",711426:"",711500:" ",711519:"",711520:"",711521:"",711522:"",711523:"",711524:"",711525:"",711526:"",711527:" ",711528:" ",711529:"",711530:"",711531:"",711532:"",711533:"",711534:"",711535:"",711536:"",711700:"",711727:"",711728:"",711729:"",711730:"",711731:"",711732:"",711733:"",711734:"",711735:"",711736:"",711737:"",711738:"",711739:"",711740:"",711741:"",711742:"",711743:"",711744:"",711745:"",711746:"",711747:"",711748:"",711749:"",711750:"",711751:"",711752:"",711900:"",711919:"",711920:"",711921:"",711922:"",711923:"",711924:"",711925:"",711926:"",711927:"",711928:"",711929:"",711930:"",711931:"",711932:"",711933:"",711934:"",711935:"",711936:"",712100:"",712121:"",712122:"",712123:"",712124:"",712125:" ",712126:"",712127:"",712128:"",712129:"",712130:"",712131:"",712132:"",712133:"",712134:"",712135:"",712136:"",712137:"",712138:"",712139:"",712140:"",712400:"",712434:"",712435:"",712436:"",712437:"",712438:"",712439:"",712440:" ",712441:"",712442:"",712443:"",712444:"",712445:"",712446:"",712447:"",712448:"",712449:"",712450:"",712451:"",712452:"",712453:"",712454:"",712455:"",712456:"",712457:"",712458:"",712459:"",712460:"",712461:"",712462:"",712463:"",712464:"",712465:"",712466:"",712500:"",712517:"",712518:"",712519:"",712520:"",712521:"",712522:"",712523:"",712524:"",712525:" ",712526:"",712527:"",712528:"",712529:"",712530:"",712531:"",712532:"",712600:"",712615:"",712616:"",712617:"",712618:"",712619:"",712620:"",712621:"",712622:"",712623:"",712624:"",712625:"",712626:"",712627:"",712628:"",712700:"",712707:"",712708:"",712709:"",712710:"",712711:"",712712:"",712800:"",712805:"",712806:"",712807:"",712808:"",81e4:"",810100:"",810101:"",810102:"",810103:"",810104:"",810200:"",810201:"",810202:"",810203:"",810204:"",810205:"",810300:"",810301:"",810302:"",810303:"",810304:"",810305:"",810306:"",810307:"",810308:"",810309:"",82e4:"",820100:"",820200:"",99e4:"",990100:""},s=function(){var e=[];for(var t in i){var s="0000"===t.slice(2,6)?void 0:"00"==t.slice(4,6)?t.slice(0,2)+"0000":t.slice(0,4)+"00";e.push({id:t,pid:s,name:i[t]})}return function(e){for(var t,i={},s=0;s<e.length;s++)(t=e[s])&&t.id&&(i[t.id]=t);for(var n=[],a=0;a<e.length;a++)if(t=e[a])if(null!=t.pid||null!=t.parentId){var r=i[t.pid]||i[t.parentId];r&&(r.children||(r.children=[]),r.children.push(t))}else n.push(t);return n}(e)}();e.exports=s},function(e,t,i){var s=i(18);e.exports={d4:function(){return this.natural(1,4)},d6:function(){return this.natural(1,6)},d8:function(){return this.natural(1,8)},d12:function(){return this.natural(1,12)},d20:function(){return this.natural(1,20)},d100:function(){return this.natural(1,100)},guid:function(){var e="abcdefABCDEF1234567890";return this.string(e,8)+"-"+this.string(e,4)+"-"+this.string(e,4)+"-"+this.string(e,4)+"-"+this.string(e,12)},uuid:function(){return this.guid()},id:function(){var e,t=0,i=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"];e=this.pick(s).id+this.date("yyyyMMdd")+this.string("number",3);for(var n=0;n<e.length;n++)t+=e[n]*i[n];return e+["1","0","X","9","8","7","6","5","4","3","2"][t%11]},increment:function(){var e=0;return function(t){return e+=+t||1}}(),inc:function(e){return this.increment(e)}}},function(e,t,i){var s=i(21),n=i(22);e.exports={Parser:s,Handler:n}},function(e,t){function i(e){this.type=e,this.offset=i.offset(),this.text=i.text()}function s(e,t){i.call(this,"alternate"),this.left=e,this.right=t}function n(e){i.call(this,"match"),this.body=e.filter(Boolean)}function a(e,t){i.call(this,e),this.body=t}function r(e){a.call(this,"capture-group"),this.index=y[this.offset]||(y[this.offset]=b++),this.body=e}function o(e,t){i.call(this,"quantified"),this.body=e,this.quantifier=t}function l(e,t){i.call(this,"quantifier"),this.min=e,this.max=t,this.greedy=!0}function h(e,t){i.call(this,"charset"),this.invert=e,this.body=t}function d(e,t){i.call(this,"range"),this.start=e,this.end=t}function c(e){i.call(this,"literal"),this.body=e,this.escaped=this.body!=this.text}function u(e){i.call(this,"unicode"),this.code=e.toUpperCase()}function p(e){i.call(this,"hex"),this.code=e.toUpperCase()}function g(e){i.call(this,"octal"),this.code=e.toUpperCase()}function m(e){i.call(this,"back-reference"),this.code=e.toUpperCase()}function f(e){i.call(this,"control-character"),this.code=e.toUpperCase()}var v=function(){function e(e,t,i,s,n){this.expected=e,this.found=t,this.offset=i,this.line=s,this.column=n,this.name="SyntaxError",this.message=function(e,t){var i;switch(e.length){case 0:i="end of input";break;case 1:i=e[0];break;default:i=e.slice(0,-1).join(", ")+" or "+e[e.length-1]}return"Expected "+i+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0180-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1080-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(e,t)}return function(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}(e,Error),{SyntaxError:e,parse:function(t){function v(e){return wi!==e&&(wi>e&&(wi=0,Ti={line:1,column:1,seenCR:!1}),function(e,i,s){var n,a;for(n=i;s>n;n++)"\n"===(a=t.charAt(n))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(Ti,wi,e),wi=e),Ti}function b(e){Pi>xi||(xi>Pi&&(Pi=xi,_i=[]),_i.push(e))}function y(){var e,i,s,n,a;return e=xi,i=function(){var e,i,s,n,a;if(e=xi,i=function(){var e,i;return e=xi,94===t.charCodeAt(xi)?(i=Q,xi++):(i=null,0===Mi&&b(ee)),null!==i&&(Si=e,i=te()),null===i?(xi=e,e=i):e=i,e}(),null===i&&(i=H),null!==i)if(s=xi,Mi++,n=S(),Mi--,null===n?s=H:(xi=s,s=X),null!==s){for(n=[],null===(a=x())&&(a=C());null!==a;)n.push(a),null===(a=x())&&(a=C());null!==n?(a=function(){var e,i;return e=xi,36===t.charCodeAt(xi)?(i=ie,xi++):(i=null,0===Mi&&b(se)),null!==i&&(Si=e,i=ne()),null===i?(xi=e,e=i):e=i,e}(),null===a&&(a=H),null!==a?(Si=e,null===(i=Z(i,n,a))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X)}else xi=e,e=X;else xi=e,e=X;return e}(),null!==i?(s=xi,124===t.charCodeAt(xi)?(n=q,xi++):(n=null,0===Mi&&b(K)),null!==n&&null!==(a=y())?s=n=[n,a]:(xi=s,s=X),null===s&&(s=H),null!==s?(Si=e,null===(i=J(i,s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),e}function C(){var e,i,s,n,a;return i=xi,40===t.charCodeAt(xi)?(s=Ge,xi++):(s=null,0===Mi&&b(Ee)),null!==s?(null===(n=function(){var e,i,s;return e=xi,t.substr(xi,2)===Fe?(i=Fe,xi+=2):(i=null,0===Mi&&b(je)),null!==i&&null!==(s=y())?(Si=e,null===(i=Ne(s))?(xi=e,e=i):e=i):(xi=e,e=X),e}())&&null===(n=function(){var e,i,s;return e=xi,t.substr(xi,2)===ze?(i=ze,xi+=2):(i=null,0===Mi&&b(Ue)),null!==i&&null!==(s=y())?(Si=e,null===(i=We(s))?(xi=e,e=i):e=i):(xi=e,e=X),e}())&&null===(n=function(){var e,i,s;return e=xi,t.substr(xi,2)===De?(i=De,xi+=2):(i=null,0===Mi&&b(Be)),null!==i&&null!==(s=y())?(Si=e,null===(i=Le(s))?(xi=e,e=i):e=i):(xi=e,e=X),e}())&&(n=function(){var e,t;return e=xi,null!==(t=y())&&(Si=e,t=Ae(t)),null===t?(xi=e,e=t):e=t,e}()),null!==n?(41===t.charCodeAt(xi)?(a=Ve,xi++):(a=null,0===Mi&&b(Re)),null!==a?(Si=i,null===(s=Ie(n))?(xi=i,i=s):i=s):(xi=i,i=X)):(xi=i,i=X)):(xi=i,i=X),null===(e=i)&&(e=function(){var e,i,s,n,a;if(Mi++,e=xi,91===t.charCodeAt(xi)?(i=Xe,xi++):(i=null,0===Mi&&b(He)),null!==i)if(94===t.charCodeAt(xi)?(s=Q,xi++):(s=null,0===Mi&&b(ee)),null===s&&(s=H),null!==s){for(n=[],null===(a=T())&&(a=P());null!==a;)n.push(a),null===(a=T())&&(a=P());null!==n?(93===t.charCodeAt(xi)?(a=qe,xi++):(a=null,0===Mi&&b(Ke)),null!==a?(Si=e,null===(i=Je(s,n))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X)}else xi=e,e=X;else xi=e,e=X;return Mi--,null===e&&(i=null,0===Mi&&b(Ye)),e}(),null===e&&(e=function(){var e;return e=function(){var e,i;return e=xi,46===t.charCodeAt(xi)?(i=rt,xi++):(i=null,0===Mi&&b(ot)),null!==i&&(Si=e,i=lt()),null===i?(xi=e,e=i):e=i,e}(),null===e&&(e=function(){var e;return e=function(){var e,i;return e=xi,t.substr(xi,2)===ut?(i=ut,xi+=2):(i=null,0===Mi&&b(pt)),null!==i&&(Si=e,i=mt()),null===i?(xi=e,e=i):e=i,e}(),null===e&&(e=function(){var e,i;return e=xi,t.substr(xi,2)===ft?(i=ft,xi+=2):(i=null,0===Mi&&b(vt)),null!==i&&(Si=e,i=bt()),null===i?(xi=e,e=i):e=i,e}(),null===e&&null===(e=D())&&null===(e=_())&&null===(e=M())&&null===(e=O())&&null===(e=k())&&null===(e=$())&&null===(e=G())&&null===(e=E())&&null===(e=V())&&null===(e=R())&&null===(e=I())&&null===(e=A())&&(e=function(){var e,i,s;return e=xi,92===t.charCodeAt(xi)?(i=ii,xi++):(i=null,0===Mi&&b(si)),null!==i?(ni.test(t.charAt(xi))?(s=t.charAt(xi),xi++):(s=null,0===Mi&&b(ai)),null!==s?(Si=e,null===(i=ri(s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),e}(),null===e&&null===(e=B())&&null===(e=L())&&null===(e=F())&&null===(e=j())&&(e=N()))),e}(),null===e&&(e=function(){var e,i;return Mi++,e=xi,dt.test(t.charAt(xi))?(i=t.charAt(xi),xi++):(i=null,0===Mi&&b(ct)),null!==i&&(Si=e,i=at(i)),null===i?(xi=e,e=i):e=i,Mi--,null===e&&(i=null,0===Mi&&b(ht)),e}())),e}())),e}function x(){var e,t,i;return e=xi,null!==(t=C())&&null!==(i=S())?(Si=e,null===(t=ae(t,i))?(xi=e,e=t):e=t):(xi=e,e=X),e}function S(){var e,i,s;return Mi++,e=xi,i=function(){var e;return e=function(){var e,i,s,n,a,r;return e=xi,123===t.charCodeAt(xi)?(i=le,xi++):(i=null,0===Mi&&b(he)),null!==i&&null!==(s=w())?(44===t.charCodeAt(xi)?(n=de,xi++):(n=null,0===Mi&&b(ce)),null!==n&&null!==(a=w())?(125===t.charCodeAt(xi)?(r=ue,xi++):(r=null,0===Mi&&b(pe)),null!==r?(Si=e,null===(i=ge(s,a))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X)):(xi=e,e=X),e}(),null===e&&(e=function(){var e,i,s,n;return e=xi,123===t.charCodeAt(xi)?(i=le,xi++):(i=null,0===Mi&&b(he)),null!==i&&null!==(s=w())?(t.substr(xi,2)===me?(n=me,xi+=2):(n=null,0===Mi&&b(fe)),null!==n?(Si=e,null===(i=ve(s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),e}(),null===e&&(e=function(){var e,i,s,n;return e=xi,123===t.charCodeAt(xi)?(i=le,xi++):(i=null,0===Mi&&b(he)),null!==i&&null!==(s=w())?(125===t.charCodeAt(xi)?(n=ue,xi++):(n=null,0===Mi&&b(pe)),null!==n?(Si=e,null===(i=be(s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),e}(),null===e&&(e=function(){var e,i;return e=xi,43===t.charCodeAt(xi)?(i=ye,xi++):(i=null,0===Mi&&b(Ce)),null!==i&&(Si=e,i=xe()),null===i?(xi=e,e=i):e=i,e}(),null===e&&(e=function(){var e,i;return e=xi,42===t.charCodeAt(xi)?(i=Se,xi++):(i=null,0===Mi&&b(we)),null!==i&&(Si=e,i=Te()),null===i?(xi=e,e=i):e=i,e}(),null===e&&(e=function(){var e,i;return e=xi,63===t.charCodeAt(xi)?(i=Pe,xi++):(i=null,0===Mi&&b(_e)),null!==i&&(Si=e,i=Me()),null===i?(xi=e,e=i):e=i,e}()))))),e}(),null!==i?(s=function(){var e;return 63===t.charCodeAt(xi)?(e=Pe,xi++):(e=null,0===Mi&&b(_e)),e}(),null===s&&(s=H),null!==s?(Si=e,null===(i=oe(i,s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),Mi--,null===e&&(i=null,0===Mi&&b(re)),e}function w(){var e,i,s;if(e=xi,i=[],Oe.test(t.charAt(xi))?(s=t.charAt(xi),xi++):(s=null,0===Mi&&b(ke)),null!==s)for(;null!==s;)i.push(s),Oe.test(t.charAt(xi))?(s=t.charAt(xi),xi++):(s=null,0===Mi&&b(ke));else i=X;return null!==i&&(Si=e,i=$e(i)),null===i?(xi=e,e=i):e=i,e}function T(){var e,i,s,n;return Mi++,e=xi,null!==(i=P())?(45===t.charCodeAt(xi)?(s=Qe,xi++):(s=null,0===Mi&&b(et)),null!==s&&null!==(n=P())?(Si=e,null===(i=tt(i,n))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),Mi--,null===e&&(i=null,0===Mi&&b(Ze)),e}function P(){var e,i,s;return Mi++,e=function(){var e,i,s;return i=xi,t.substr(xi,2)===ut?(s=ut,xi+=2):(s=null,0===Mi&&b(pt)),null!==s&&(Si=i,s=gt()),null===s?(xi=i,i=s):i=s,null===(e=i)&&null===(e=D())&&null===(e=_())&&null===(e=M())&&null===(e=O())&&null===(e=k())&&null===(e=$())&&null===(e=G())&&null===(e=E())&&null===(e=V())&&null===(e=R())&&null===(e=I())&&null===(e=A())&&null===(e=B())&&null===(e=L())&&null===(e=F())&&null===(e=j())&&(e=N()),e}(),null===e&&(i=xi,st.test(t.charAt(xi))?(s=t.charAt(xi),xi++):(s=null,0===Mi&&b(nt)),null!==s&&(Si=i,s=at(s)),null===s?(xi=i,i=s):i=s,e=i),Mi--,null===e&&0===Mi&&b(it),e}function _(){var e,i;return e=xi,t.substr(xi,2)===yt?(i=yt,xi+=2):(i=null,0===Mi&&b(Ct)),null!==i&&(Si=e,i=xt()),null===i?(xi=e,e=i):e=i,e}function M(){var e,i;return e=xi,t.substr(xi,2)===St?(i=St,xi+=2):(i=null,0===Mi&&b(wt)),null!==i&&(Si=e,i=Tt()),null===i?(xi=e,e=i):e=i,e}function O(){var e,i;return e=xi,t.substr(xi,2)===Pt?(i=Pt,xi+=2):(i=null,0===Mi&&b(_t)),null!==i&&(Si=e,i=Mt()),null===i?(xi=e,e=i):e=i,e}function k(){var e,i;return e=xi,t.substr(xi,2)===Ot?(i=Ot,xi+=2):(i=null,0===Mi&&b(kt)),null!==i&&(Si=e,i=$t()),null===i?(xi=e,e=i):e=i,e}function $(){var e,i;return e=xi,t.substr(xi,2)===Gt?(i=Gt,xi+=2):(i=null,0===Mi&&b(Et)),null!==i&&(Si=e,i=Vt()),null===i?(xi=e,e=i):e=i,e}function G(){var e,i;return e=xi,t.substr(xi,2)===Rt?(i=Rt,xi+=2):(i=null,0===Mi&&b(It)),null!==i&&(Si=e,i=At()),null===i?(xi=e,e=i):e=i,e}function E(){var e,i;return e=xi,t.substr(xi,2)===Dt?(i=Dt,xi+=2):(i=null,0===Mi&&b(Bt)),null!==i&&(Si=e,i=Lt()),null===i?(xi=e,e=i):e=i,e}function V(){var e,i;return e=xi,t.substr(xi,2)===Ft?(i=Ft,xi+=2):(i=null,0===Mi&&b(jt)),null!==i&&(Si=e,i=Nt()),null===i?(xi=e,e=i):e=i,e}function R(){var e,i;return e=xi,t.substr(xi,2)===zt?(i=zt,xi+=2):(i=null,0===Mi&&b(Ut)),null!==i&&(Si=e,i=Wt()),null===i?(xi=e,e=i):e=i,e}function I(){var e,i;return e=xi,t.substr(xi,2)===Yt?(i=Yt,xi+=2):(i=null,0===Mi&&b(Xt)),null!==i&&(Si=e,i=Ht()),null===i?(xi=e,e=i):e=i,e}function A(){var e,i;return e=xi,t.substr(xi,2)===qt?(i=qt,xi+=2):(i=null,0===Mi&&b(Kt)),null!==i&&(Si=e,i=Jt()),null===i?(xi=e,e=i):e=i,e}function D(){var e,i,s;return e=xi,t.substr(xi,2)===Zt?(i=Zt,xi+=2):(i=null,0===Mi&&b(Qt)),null!==i?(t.length>xi?(s=t.charAt(xi),xi++):(s=null,0===Mi&&b(ei)),null!==s?(Si=e,null===(i=ti(s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),e}function B(){var e,i,s,n;if(e=xi,t.substr(xi,2)===oi?(i=oi,xi+=2):(i=null,0===Mi&&b(li)),null!==i){if(s=[],hi.test(t.charAt(xi))?(n=t.charAt(xi),xi++):(n=null,0===Mi&&b(di)),null!==n)for(;null!==n;)s.push(n),hi.test(t.charAt(xi))?(n=t.charAt(xi),xi++):(n=null,0===Mi&&b(di));else s=X;null!==s?(Si=e,null===(i=ci(s))?(xi=e,e=i):e=i):(xi=e,e=X)}else xi=e,e=X;return e}function L(){var e,i,s,n;if(e=xi,t.substr(xi,2)===ui?(i=ui,xi+=2):(i=null,0===Mi&&b(pi)),null!==i){if(s=[],gi.test(t.charAt(xi))?(n=t.charAt(xi),xi++):(n=null,0===Mi&&b(mi)),null!==n)for(;null!==n;)s.push(n),gi.test(t.charAt(xi))?(n=t.charAt(xi),xi++):(n=null,0===Mi&&b(mi));else s=X;null!==s?(Si=e,null===(i=fi(s))?(xi=e,e=i):e=i):(xi=e,e=X)}else xi=e,e=X;return e}function F(){var e,i,s,n;if(e=xi,t.substr(xi,2)===vi?(i=vi,xi+=2):(i=null,0===Mi&&b(bi)),null!==i){if(s=[],gi.test(t.charAt(xi))?(n=t.charAt(xi),xi++):(n=null,0===Mi&&b(mi)),null!==n)for(;null!==n;)s.push(n),gi.test(t.charAt(xi))?(n=t.charAt(xi),xi++):(n=null,0===Mi&&b(mi));else s=X;null!==s?(Si=e,null===(i=yi(s))?(xi=e,e=i):e=i):(xi=e,e=X)}else xi=e,e=X;return e}function j(){var e,i;return e=xi,t.substr(xi,2)===oi?(i=oi,xi+=2):(i=null,0===Mi&&b(li)),null!==i&&(Si=e,i=Ci()),null===i?(xi=e,e=i):e=i,e}function N(){var e,i,s;return e=xi,92===t.charCodeAt(xi)?(i=ii,xi++):(i=null,0===Mi&&b(si)),null!==i?(t.length>xi?(s=t.charAt(xi),xi++):(s=null,0===Mi&&b(ei)),null!==s?(Si=e,null===(i=at(s))?(xi=e,e=i):e=i):(xi=e,e=X)):(xi=e,e=X),e}var z,U=arguments.length>1?arguments[1]:{},W={regexp:y},Y=y,X=null,H="",q="|",K='"|"',J=function(e,t){return t?new s(e,t[1]):e},Z=function(e,t,i){return new n([e].concat(t).concat([i]))},Q="^",ee='"^"',te=function(){return new i("start")},ie="$",se='"$"',ne=function(){return new i("end")},ae=function(e,t){return new o(e,t)},re="Quantifier",oe=function(e,t){return t&&(e.greedy=!1),e},le="{",he='"{"',de=",",ce='","',ue="}",pe='"}"',ge=function(e,t){return new l(e,t)},me=",}",fe='",}"',ve=function(e){return new l(e,1/0)},be=function(e){return new l(e,e)},ye="+",Ce='"+"',xe=function(){return new l(1,1/0)},Se="*",we='"*"',Te=function(){return new l(0,1/0)},Pe="?",_e='"?"',Me=function(){return new l(0,1)},Oe=/^[0-9]/,ke="[0-9]",$e=function(e){return+e.join("")},Ge="(",Ee='"("',Ve=")",Re='")"',Ie=function(e){return e},Ae=function(e){return new r(e)},De="?:",Be='"?:"',Le=function(e){return new a("non-capture-group",e)},Fe="?=",je='"?="',Ne=function(e){return new a("positive-lookahead",e)},ze="?!",Ue='"?!"',We=function(e){return new a("negative-lookahead",e)},Ye="CharacterSet",Xe="[",He='"["',qe="]",Ke='"]"',Je=function(e,t){return new h(!!e,t)},Ze="CharacterRange",Qe="-",et='"-"',tt=function(e,t){return new d(e,t)},it="Character",st=/^[^\\\]]/,nt="[^\\\\\\]]",at=function(e){return new c(e)},rt=".",ot='"."',lt=function(){return new i("any-character")},ht="Literal",dt=/^[^|\\\/.[()?+*$\^]/,ct="[^|\\\\\\/.[()?+*$\\^]",ut="\\b",pt='"\\\\b"',gt=function(){return new i("backspace")},mt=function(){return new i("word-boundary")},ft="\\B",vt='"\\\\B"',bt=function(){return new i("non-word-boundary")},yt="\\d",Ct='"\\\\d"',xt=function(){return new i("digit")},St="\\D",wt='"\\\\D"',Tt=function(){return new i("non-digit")},Pt="\\f",_t='"\\\\f"',Mt=function(){return new i("form-feed")},Ot="\\n",kt='"\\\\n"',$t=function(){return new i("line-feed")},Gt="\\r",Et='"\\\\r"',Vt=function(){return new i("carriage-return")},Rt="\\s",It='"\\\\s"',At=function(){return new i("white-space")},Dt="\\S",Bt='"\\\\S"',Lt=function(){return new i("non-white-space")},Ft="\\t",jt='"\\\\t"',Nt=function(){return new i("tab")},zt="\\v",Ut='"\\\\v"',Wt=function(){return new i("vertical-tab")},Yt="\\w",Xt='"\\\\w"',Ht=function(){return new i("word")},qt="\\W",Kt='"\\\\W"',Jt=function(){return new i("non-word")},Zt="\\c",Qt='"\\\\c"',ei="any character",ti=function(e){return new f(e)},ii="\\",si='"\\\\"',ni=/^[1-9]/,ai="[1-9]",ri=function(e){return new m(e)},oi="\\0",li='"\\\\0"',hi=/^[0-7]/,di="[0-7]",ci=function(e){return new g(e.join(""))},ui="\\x",pi='"\\\\x"',gi=/^[0-9a-fA-F]/,mi="[0-9a-fA-F]",fi=function(e){return new p(e.join(""))},vi="\\u",bi='"\\\\u"',yi=function(e){return new u(e.join(""))},Ci=function(){return new i("null-character")},xi=0,Si=0,wi=0,Ti={line:1,column:1,seenCR:!1},Pi=0,_i=[],Mi=0;if("startRule"in U){if(!(U.startRule in W))throw new Error("Can't start parsing from rule \""+U.startRule+'".');Y=W[U.startRule]}if(i.offset=function(){return Si},i.text=function(){return t.substring(Si,xi)},null!==(z=Y())&&xi===t.length)return z;throw function(e){var t=0;for(e.sort();t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(_i),Si=Math.max(xi,Pi),new e(_i,Si<t.length?t.charAt(Si):null,Si,v(Si).line,v(Si).column)}}}(),b=1,y={};e.exports=v},function(e,t,i){var s=i(3),n=i(5),a={extend:s.extend},r=p(97,122),o=p(65,90),l=p(48,57),h=p(32,47)+p(58,64)+p(91,96)+p(123,126),d=p(32,126),c=" \f\n\r\t\v \u2028\u2029",u={"\\w":r+o+l+"_","\\W":h.replace("_",""),"\\s":c,"\\S":function(){for(var e=d,t=0;t<9;t++)e=e.replace(c[t],"");return e}(),"\\d":l,"\\D":r+o+h};function p(e,t){for(var i="",s=e;s<=t;s++)i+=String.fromCharCode(s);return i}a.gen=function(e,t,i){return i=i||{guid:1},a[e.type]?a[e.type](e,t,i):a.token(e,t,i)},a.extend({token:function(e,t,i){switch(e.type){case"start":case"end":case"backspace":case"word-boundary":return"";case"any-character":return n.character();case"non-word-boundary":case"form-feed":case"carriage-return":case"tab":case"vertical-tab":break;case"digit":return n.pick(l.split(""));case"non-digit":return n.pick((r+o+h).split(""));case"line-feed":return e.body||e.text;case"white-space":return n.pick(c.split(""));case"non-white-space":case"word":return n.pick((r+o+l).split(""));case"non-word":return n.pick(h.replace("_","").split(""))}return e.body||e.text},alternate:function(e,t,i){return this.gen(n.boolean()?e.left:e.right,t,i)},match:function(e,t,i){t="";for(var s=0;s<e.body.length;s++)t+=this.gen(e.body[s],t,i);return t},"capture-group":function(e,t,i){return t=this.gen(e.body,t,i),i[i.guid++]=t,t},"non-capture-group":function(e,t,i){return this.gen(e.body,t,i)},"positive-lookahead":function(e,t,i){return this.gen(e.body,t,i)},"negative-lookahead":function(e,t,i){return""},quantified:function(e,t,i){t="";for(var s=this.quantifier(e.quantifier),n=0;n<s;n++)t+=this.gen(e.body,t,i);return t},quantifier:function(e,t,i){var s=Math.max(e.min,0),a=isFinite(e.max)?e.max:s+n.integer(3,7);return n.integer(s,a)},charset:function(e,t,i){if(e.invert)return this["invert-charset"](e,t,i);var s=n.pick(e.body);return this.gen(s,t,i)},"invert-charset":function(e,t,i){for(var s,a=d,r=0;r<e.body.length;r++)switch((s=e.body[r]).type){case"literal":a=a.replace(s.body,"");break;case"range":for(var o=this.gen(s.start,t,i).charCodeAt(),l=this.gen(s.end,t,i).charCodeAt(),h=o;h<=l;h++)a=a.replace(String.fromCharCode(h),"");default:var c=u[s.text];if(c)for(var p=0;p<=c.length;p++)a=a.replace(c[p],"")}return n.pick(a.split(""))},range:function(e,t,i){var s=this.gen(e.start,t,i).charCodeAt(),a=this.gen(e.end,t,i).charCodeAt();return String.fromCharCode(n.integer(s,a))},literal:function(e,t,i){return e.escaped?e.body:e.text},unicode:function(e,t,i){return String.fromCharCode(parseInt(e.code,16))},hex:function(e,t,i){return String.fromCharCode(parseInt(e.code,16))},octal:function(e,t,i){return String.fromCharCode(parseInt(e.code,8))},"back-reference":function(e,t,i){return i[e.code]||""},CONTROL_CHARACTER_MAP:function(){for(var e="@ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \\ ] ^ _".split(" "),t="\0        \b \t \n \v \f \r                  ".split(" "),i={},s=0;s<e.length;s++)i[e[s]]=t[s];return i}(),"control-character":function(e,t,i){return this.CONTROL_CHARACTER_MAP[e.code]}}),e.exports=a},function(e,t,i){e.exports=i(24)},function(e,t,i){var s=i(2),n=i(3),a=i(4);e.exports=function e(t,i,r){r=r||[];var o={name:"string"==typeof i?i.replace(s.RE_KEY,"$1"):i,template:t,type:n.type(t),rule:a.parse(i)};switch(o.path=r.slice(0),o.path.push(void 0===i?"ROOT":o.name),o.type){case"array":o.items=[],n.each(t,(function(t,i){o.items.push(e(t,i,o.path))}));break;case"object":o.properties=[],n.each(t,(function(t,i){o.properties.push(e(t,i,o.path))}))}return o}},function(e,t,i){e.exports=i(26)},function(e,t,i){var s=i(2),n=i(3),a=i(23);function r(e,t){for(var i=a(e),s=o.diff(i,t),n=0;n<s.length;n++);return s}var o={diff:function(e,t,i){var s=[];return this.name(e,t,i,s)&&this.type(e,t,i,s)&&(this.value(e,t,i,s),this.properties(e,t,i,s),this.items(e,t,i,s)),s},name:function(e,t,i,s){var n=s.length;return l.equal("name",e.path,i+"",e.name+"",s),s.length===n},type:function(e,t,i,a){var r=a.length;switch(e.type){case"string":if(e.template.match(s.RE_PLACEHOLDER))return!0;break;case"array":if(e.rule.parameters){if(void 0!==e.rule.min&&void 0===e.rule.max&&1===e.rule.count)return!0;if(e.rule.parameters[2])return!0}break;case"function":return!0}return l.equal("type",e.path,n.type(t),e.type,a),a.length===r},value:function(e,t,i,n){var a,r=n.length,o=e.rule,h=e.type;if("object"===h||"array"===h||"function"===h)return!0;if(!o.parameters){switch(h){case"regexp":return l.match("value",e.path,t,e.template,n),n.length===r;case"string":if(e.template.match(s.RE_PLACEHOLDER))return n.length===r}return l.equal("value",e.path,t,e.template,n),n.length===r}switch(h){case"number":var d=(t+"").split(".");d[0]=+d[0],void 0!==o.min&&void 0!==o.max&&(l.greaterThanOrEqualTo("value",e.path,d[0],Math.min(o.min,o.max),n),l.lessThanOrEqualTo("value",e.path,d[0],Math.max(o.min,o.max),n)),void 0!==o.min&&void 0===o.max&&l.equal("value",e.path,d[0],o.min,n,"[value] "+i),o.decimal&&(void 0!==o.dmin&&void 0!==o.dmax&&(l.greaterThanOrEqualTo("value",e.path,d[1].length,o.dmin,n),l.lessThanOrEqualTo("value",e.path,d[1].length,o.dmax,n)),void 0!==o.dmin&&void 0===o.dmax&&l.equal("value",e.path,d[1].length,o.dmin,n));break;case"boolean":break;case"string":a=(a=t.match(new RegExp(e.template,"g")))?a.length:0,void 0!==o.min&&void 0!==o.max&&(l.greaterThanOrEqualTo("repeat count",e.path,a,o.min,n),l.lessThanOrEqualTo("repeat count",e.path,a,o.max,n)),void 0!==o.min&&void 0===o.max&&l.equal("repeat count",e.path,a,o.min,n);break;case"regexp":a=(a=t.match(new RegExp(e.template.source.replace(/^\^|\$$/g,""),"g")))?a.length:0,void 0!==o.min&&void 0!==o.max&&(l.greaterThanOrEqualTo("repeat count",e.path,a,o.min,n),l.lessThanOrEqualTo("repeat count",e.path,a,o.max,n)),void 0!==o.min&&void 0===o.max&&l.equal("repeat count",e.path,a,o.min,n)}return n.length===r},properties:function(e,t,i,s){var a=s.length,r=e.rule,o=n.keys(t);if(e.properties){if(e.rule.parameters?(void 0!==r.min&&void 0!==r.max&&(l.greaterThanOrEqualTo("properties length",e.path,o.length,Math.min(r.min,r.max),s),l.lessThanOrEqualTo("properties length",e.path,o.length,Math.max(r.min,r.max),s)),void 0!==r.min&&void 0===r.max&&1!==r.count&&l.equal("properties length",e.path,o.length,r.min,s)):l.equal("properties length",e.path,o.length,e.properties.length,s),s.length!==a)return!1;for(var h=0;h<o.length;h++)s.push.apply(s,this.diff(function(){var t;return n.each(e.properties,(function(e){e.name===o[h]&&(t=e)})),t||e.properties[h]}(),t[o[h]],o[h]));return s.length===a}},items:function(e,t,i,s){var n=s.length;if(e.items){var a=e.rule;if(e.rule.parameters){if(void 0!==a.min&&void 0!==a.max&&(l.greaterThanOrEqualTo("items",e.path,t.length,Math.min(a.min,a.max)*e.items.length,s,"[{utype}] array is too short: {path} must have at least {expected} elements but instance has {actual} elements"),l.lessThanOrEqualTo("items",e.path,t.length,Math.max(a.min,a.max)*e.items.length,s,"[{utype}] array is too long: {path} must have at most {expected} elements but instance has {actual} elements")),void 0!==a.min&&void 0===a.max){if(1===a.count)return s.length===n;l.equal("items length",e.path,t.length,a.min*e.items.length,s)}if(a.parameters[2])return s.length===n}else l.equal("items length",e.path,t.length,e.items.length,s);if(s.length!==n)return!1;for(var r=0;r<t.length;r++)s.push.apply(s,this.diff(e.items[r%e.items.length],t[r],r%e.items.length));return s.length===n}}},l={message:function(e){return(e.message||"[{utype}] Expect {path}'{ltype} {action} {expected}, but is {actual}").replace("{utype}",e.type.toUpperCase()).replace("{ltype}",e.type.toLowerCase()).replace("{path}",n.isArray(e.path)&&e.path.join(".")||e.path).replace("{action}",e.action).replace("{expected}",e.expected).replace("{actual}",e.actual)},equal:function(e,t,i,s,n,a){if(i===s)return!0;if("type"===e&&"regexp"===s&&"string"===i)return!0;var r={path:t,type:e,actual:i,expected:s,action:"is equal to",message:a};return r.message=l.message(r),n.push(r),!1},match:function(e,t,i,s,n,a){if(s.test(i))return!0;var r={path:t,type:e,actual:i,expected:s,action:"matches",message:a};return r.message=l.message(r),n.push(r),!1},notEqual:function(e,t,i,s,n,a){if(i!==s)return!0;var r={path:t,type:e,actual:i,expected:s,action:"is not equal to",message:a};return r.message=l.message(r),n.push(r),!1},greaterThan:function(e,t,i,s,n,a){if(i>s)return!0;var r={path:t,type:e,actual:i,expected:s,action:"is greater than",message:a};return r.message=l.message(r),n.push(r),!1},lessThan:function(e,t,i,s,n,a){if(i<s)return!0;var r={path:t,type:e,actual:i,expected:s,action:"is less to",message:a};return r.message=l.message(r),n.push(r),!1},greaterThanOrEqualTo:function(e,t,i,s,n,a){if(i>=s)return!0;var r={path:t,type:e,actual:i,expected:s,action:"is greater than or equal to",message:a};return r.message=l.message(r),n.push(r),!1},lessThanOrEqualTo:function(e,t,i,s,n,a){if(i<=s)return!0;var r={path:t,type:e,actual:i,expected:s,action:"is less than or equal to",message:a};return r.message=l.message(r),n.push(r),!1}};r.Diff=o,r.Assert=l,e.exports=r},function(e,t,i){e.exports=i(28)},function(t,i,s){var n=s(3);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch(d){window.Event=function(e,t,i,s){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t,i,s),n}}var a={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},r="readystatechange loadstart progress abort error load timeout loadend".split(" "),o="timeout withCredentials".split(" "),l="readyState responseURL status statusText responseType response responseText responseXML".split(" ");function h(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}h._settings={timeout:"10-100"},h.setup=function(e){return n.extend(h._settings,e),h._settings},n.extend(h,a),n.extend(h.prototype,a),h.prototype.mock=!0,h.prototype.match=!1,n.extend(h.prototype,{open:function(t,i,s,a,d){var c=this;n.extend(this.custom,{method:t,url:i,async:"boolean"!=typeof s||s,username:a,password:d,options:{url:i,type:t}}),this.custom.timeout=function(e){if("number"==typeof e)return e;if("string"==typeof e&&!~e.indexOf("-"))return parseInt(e,10);if("string"==typeof e&&~e.indexOf("-")){var t=e.split("-"),i=parseInt(t[0],10),s=parseInt(t[1],10);return Math.round(Math.random()*(s-i))+i}}(h._settings.timeout);var u=function(e){for(var t in h.Mock._mocked){var i=h.Mock._mocked[t];if((!i.rurl||s(i.rurl,e.url))&&(!i.rtype||s(i.rtype,e.type.toLowerCase())))return i}function s(e,t){return"string"===n.type(e)?e===t:"regexp"===n.type(e)?e.test(t):void 0}}(this.custom.options);function p(t){for(var i=0;i<l.length;i++)try{c[l[i]]=g[l[i]]}catch(e){}c.dispatchEvent(new Event(t.type))}if(u)this.match=!0,this.custom.template=u,this.readyState=h.OPENED,this.dispatchEvent(new Event("readystatechange"));else{var g=function(){var t,i,s,n,a=(t=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,i=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,s=location.href,n=i.exec(s.toLowerCase())||[],t.test(n[1]));return window.ActiveXObject?!a&&r()||function(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}():r();function r(){try{return new window._XMLHttpRequest}catch(e){}}}();this.custom.xhr=g;for(var m=0;m<r.length;m++)g.addEventListener(r[m],p);a?g.open(t,i,s,a,d):g.open(t,i,s);for(var f=0;f<o.length;f++)try{g[o[f]]=c[o[f]]}catch(e){}}},setRequestHeader:function(e,t){if(this.match){var i=this.custom.requestHeaders;i[e]?i[e]+=","+t:i[e]=t}else this.custom.xhr.setRequestHeader(e,t)},timeout:0,withCredentials:!1,upload:{},send:function(e){var t=this;function i(){var e,i;t.readyState=h.HEADERS_RECEIVED,t.dispatchEvent(new Event("readystatechange")),t.readyState=h.LOADING,t.dispatchEvent(new Event("readystatechange")),t.status=200,t.statusText="OK",t.response=t.responseText=JSON.stringify((e=t.custom.template,i=t.custom.options,n.isFunction(e.template)?e.template(i):h.Mock.mock(e.template)),null,4),t.readyState=h.DONE,t.dispatchEvent(new Event("readystatechange")),t.dispatchEvent(new Event("load")),t.dispatchEvent(new Event("loadend"))}this.custom.options.body=e,this.match?(this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(i,this.custom.timeout):i()):this.custom.xhr.send(e)},abort:function(){this.match?(this.readyState=h.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))):this.custom.xhr.abort()}}),n.extend(h.prototype,{responseURL:"",status:h.UNSENT,statusText:"",getResponseHeader:function(e){return this.match?this.custom.responseHeaders[e.toLowerCase()]:this.custom.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var e=this.custom.responseHeaders,t="";for(var i in e)e.hasOwnProperty(i)&&(t+=i+": "+e[i]+"\r\n");return t},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),n.extend(h.prototype,{addEventListener:function(e,t){var i=this.custom.events;i[e]||(i[e]=[]),i[e].push(t)},removeEventListener:function(e,t){for(var i=this.custom.events[e]||[],s=0;s<i.length;s++)i[s]===t&&i.splice(s--,1)},dispatchEvent:function(e){for(var t=this.custom.events[e.type]||[],i=0;i<t.length;i++)t[i].call(this,e);var s="on"+e.type;this[s]&&this[s](e)}}),t.exports=h}])},module.exports=factory()}(mock$1)),mock$1.exports}var mockExports=requireMock();const Mock=getDefaultExportFromCjs(mockExports);axios.defaults.withCredentials=!0;const changeData=(e=[])=>{EventBus.emit("item_change_event",{data:e})};class GameApi{constructor(e){this.homeVersion="",this.serverUnixTime=0,setInterval((()=>{(null==e?void 0:e.GameData.loginInfo.isLogin)&&(0!==this.serverUnixTime?(this.serverUnixTime++,this.serverUnixTime%60==0&&this.getServerTime()):this.getServerTime())}),1e3),this.showTips=e=>{console.log(e)},this.getServerTime=()=>{this.get("/ping?a=unix",{},(e=>{0===e.iRet&&(console.log("syncUnixTime",this.serverUnixTime),this.serverUnixTime=e.jData.time)}))},this.serverTime=()=>new Promise(((e,t)=>{this.get("/ping?a=unix",{},(t=>{0===t.iRet&&(this.serverUnixTime=t.jData.time),e(t)}),(e=>{t(e)}),"time")})),this.checkLogin=()=>new Promise(((e,t)=>{this.post("/user?a=login",{},(t=>{console.log("",t),e(t)}),(e=>{t(e)}),"login")})),this.init=async(t=!1)=>{var i,s,n,a;let r=0,o=0;return t&&(null==(i=e.GameData.userAssets[1e6])||i.iAmount,r=(null==(s=e.GameData.userAssets[1000001])?void 0:s.iAmount)||0,o=(null==(n=e.GameData.userAssets[1000002])?void 0:n.iAmount)||0,null==(a=e.GameData.userInfo)||a.iLevel),new Promise(((i,s)=>{this.post("/init?a=farm",{region:"am",nickName:""},(s=>{var n,a,l,h,d,c;if(console.log("",s),0===s.iRet){if(s.jData.items.forEach((t=>{e.GameData.gameItemSeetings[t.iItemId]=t})),console.log("",null==e?void 0:e.GameData),console.log("puuid ==========>",null==(n=s.jData.userInfo)?void 0:n.sPuuid),e.GameData.userAssets=s.jData.userAssetsMap,e.GameData.userInfo=s.jData.userInfo,e.GameData.userInfo.iExp=(null==(l=null==(a=null==e?void 0:e.GameData.userAssets)?void 0:a[GameConfig.Data.Level.ExpItemId])?void 0:l.iAmount)||0,e.GameData.gameConfig=s.jData.gameConfig,console.log("res.jData.userAssetsMap-----",s.jData.userAssetsMap),t){null==(h=s.jData.userAssetsMap[1e6])||h.iAmount;const e=null==(d=s.jData.userAssetsMap[1000001])?void 0:d.iAmount,t=null==(c=s.jData.userAssetsMap[1000002])?void 0:c.iAmount;s.jData.userInfo.iLevel;let i=[];r&&e&&r!=e&&i.push({iItemId:1000001,itemCount:e-r,itemIncr:1}),o&&t&&o!=t&&i.push({iItemId:1000001,itemCount:t-o,itemIncr:1}),(null==i?void 0:i.length)&&changeData(i)}}else this.showTips(s.sMsg);i(s)}),(e=>{s(e)}),"login")}))},this.getUserGardenInfo=async()=>new Promise(((e,t)=>{this.post("/farm?a=garden",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"garden")})),this.plantCrop=async(t,i)=>new Promise(((s,n)=>{this.post("/farm?a=plant",{landIndex:t,cropId:i},(t=>{0===t.iRet?(EventBus.emit("open-summary"),e.allInterface.bagInterface(1),s(t)):n(t)}),(e=>{n(e)}),"garden")})),this.waterCrop=async(e,t)=>new Promise(((t,i)=>{this.post("/farm?a=water",{landIndex:e},(e=>{var s;if(0===e.iRet){EventBus.emit("open-summary");const{assetsNotify:i={}}=e.jData;((null==i?void 0:i.length)||(null==(s=Object.keys(i||{}))?void 0:s.length))&&changeData([i]),t(e)}else i(e)}),(e=>{i(e)}),"garden")})),this.removeCrop=async e=>new Promise(((t,i)=>{this.post("/farm?a=eliminate",{landIndex:e},(e=>{var s;if(0===e.iRet){EventBus.emit("open-summary");const{assetsNotify:i={}}=e.jData;((null==i?void 0:i.length)||(null==(s=Object.keys(i||{}))?void 0:s.length))&&changeData([i]),t(e)}else i(e)}),(e=>{i(e)}),"garden")})),this.harvestCrop=async t=>new Promise(((i,s)=>{this.post("/farm?a=harvest",{landIndexs:`${t}`},(t=>{if(0===t.iRet){EventBus.emit("open-summary");const{assetsNotify:s}=t.jData;changeData(s),e.allInterface.bagInterface(2),e.allInterface.getShopItems(),i(t)}else s(t)}),(e=>{s(e)}),"category")})),this.getStoreCategories=async()=>new Promise(((e,t)=>{this.post("/shop?a=category",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"category")})),this.getStoreItems=async e=>new Promise(((t,i)=>{this.post("/shop?a=store",{shopPageId:e},(e=>{0===e.iRet?t(e):i(e)}),(e=>{i(e)}),"category")})),this.getStoreItemDetail=async e=>new Promise(((t,i)=>{this.post("/shop?a=proDetail",{commodityId:e},(e=>{0===e.iRet?t(e):i(e)}),(e=>{i(e)}),"category")})),this.exchangeItem=async(t,i)=>new Promise(((s,n)=>{this.post("/shop?a=buy",{commodityId:t,buyCount:i},(t=>{if(0===t.iRet){EventBus.emit("open-summary");const{assetsNotify:i}=t.jData,n=i.map((e=>({...e,iItemId:e.itemId})));changeData(n),n.some((e=>`${e.iItemId}`.startsWith("2")))&&e.allInterface.bagInterface(1),n.some((e=>`${e.iItemId}`.startsWith("3")))&&e.allInterface.bagInterface(2),n.some((e=>`${e.iItemId}`.startsWith("4")))&&e.allInterface.bagInterface(3),s(t)}else n(t)}),(e=>{n(e)}),"garden")})),this.getClickSeedDot=async t=>new Promise(((i,s)=>{this.post("/shop?a=clickSeedDot",{id:t},(t=>{0===t.iRet?(e.allInterface.storeInterface(1,"exchange"),i(t)):s(t)}),(e=>{s(e)}),"category")})),this.getPackageItems=async(e,t="")=>new Promise(((i,s)=>{this.post("/user?a=package",{itemType:e,subItemType:t},(e=>{0===e.iRet?i(e):s(e)}),(e=>{s(e)}),"garden")})),this.getPackageItemDetail=async e=>new Promise((e=>{setTimeout((()=>{const t=Mock.mock({ret:0,msg:"success",jData:{iItemId:"item_001",sIcoPath:"/assets/icons/item_001.png",iAmount:5,itemDesc:"",iLevelRequire:1,buildCellNum:4,buildWidth:2,buildHeight:2}});e(t.jData)}),200)})),this.getMainMission=async()=>new Promise(((e,t)=>{this.post("/mission?a=mainMission",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"mission")})),this.getChapterMission=async()=>new Promise(((e,t)=>{this.post("/mission?a=chapterMission",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"mission")})),this.getOrderMission=async()=>new Promise(((e,t)=>{this.post("/mission?a=orderMission",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"mission")})),this.getOrderMissionDetail=async e=>new Promise(((t,i)=>{this.post("/mission?a=orderMissionDetail",{orderMissionId:e},(e=>{0===e.iRet?t(e):i(e)}),(e=>{i(e)}),"mission")})),this.getOrderMissionSubmit=async(t,i)=>new Promise(((s,n)=>{this.post("/mission?a=missionSubmit",{missionType:t,missionId:i},(t=>{var i,a;if(0===t.iRet){const{rewards:n}=t.jData,r=n.map((e=>({...e,iItemId:e.rewardId,itemCount:Number(e.rewardAmount),itemIncr:1}))),o=r.find((e=>"1000000"==e.iItemId));o?o.curLevel<3&&changeData(r):(null==(a=null==(i=e.GameData)?void 0:i.userInfo)?void 0:a.iLevel)<3&&changeData(r),r.map((t=>{e.GameData.setUserAssets(t,t.itemCount,t.iItemId)})),r.some((e=>`${e.iItemId}`.startsWith("2")))&&e.allInterface.bagInterface(1),r.some((e=>`${e.iItemId}`.startsWith("3")))&&e.allInterface.bagInterface(2),e.allInterface.getShopItems(),s(t)}else n(t)}),(e=>{n(e)}),"mission")})),this.submitClickDot=async(e,t)=>new Promise(((i,s)=>{this.post("/mission?a=clickDot",{finishedTaskNum:e,missionId:t},(e=>{0===e.iRet?i(e):s(e)}),(e=>{s(e)}),"mission")})),this.getHouseShow=async(e="")=>new Promise(((e,t)=>{this.post("/home?a=info",{},(i=>{0===i.iRet?(this.homeVersion=i.jData.version,e(i)):t(i)}),(e=>{t(e)}),"home")})),this.getHouseSave=async e=>new Promise(((t,i)=>{this.post("/home?a=save",{buildings:JSON.stringify(e),version:this.homeVersion},(e=>{0===e.iRet?(EventBus.emit("open-summary"),t(e)):i(e)}),(e=>{i(e)}),"home")})),this.getOrderSummary=async()=>new Promise(((e,t)=>{this.post("/init?a=summary",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"mission")})),this.getAnnoucement=async()=>new Promise(((e,t)=>{this.post("/announcement?a=getAll",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"annoucement")})),this.readAnnoucement=async e=>new Promise(((t,i)=>{this.post("/announcement?a=read",{id:e},(e=>{0===e.iRet?t(e):i(e)}),(e=>{i(e)}),"annoucement")})),this.getSetting=async()=>new Promise(((e,t)=>{this.post("/user?a=getSetting",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"getSetting")})),this.getSettingSubmit=async(e,t,i)=>new Promise(((s,n)=>{this.post("/user?a=setting",{IsOpenBgMusic:e,IsOpenBgMusicEffect:t,Language:i},(e=>{0===e.iRet?s(e):n(e)}),(e=>{n(e)}),"getSetting")})),this.getGuide=async()=>new Promise(((e,t)=>{this.post("/user?a=getGuide",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"getGuide")})),this.submitGuide=async e=>new Promise(((t,i)=>{this.post("/user?a=submitGuide",{curStep:e},(e=>{0===e.iRet?t(e):i(e)}),(e=>{i(e)}),"getGuide")})),this.getGuideConfig=async()=>new Promise(((e,t)=>{this.post("/user?a=guideConfig",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"getGuide")})),this.firstGift=async()=>new Promise(((t,i)=>{this.post("/init?a=firstGift",{},(s=>{if(0===s.iRet){const{rewards:i}=s.jData;let n=i.map((e=>({...e,iItemId:e.rewardId,itemCount:Number(e.rewardAmount),itemIncr:1})));changeData(n),n.map((t=>{e.GameData.setUserAssets(t,t.itemCount,t.iItemId)})),e.allInterface.bagInterface(1),e.allInterface.bagInterface(2),t(s)}else i(s)}),(e=>{i(e)}),"getGuide")})),this.homeVisit=async()=>new Promise(((e,t)=>{this.post("/home?a=visit",{},(e=>{}),(e=>{}),"home")})),this.getCreatedAt=async(e,t)=>new Promise(((i,s)=>{this.post("/user?a=save",{createdAt:e,sRegion:t},(e=>{0===e.iRet?i(e):s(e)}),(e=>{s(e)}),"login")})),this.initBagStoreMissionData=async()=>new Promise(((e,t)=>{this.post("/init?a=getBagStoreMissionData",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"allData")})),this.getAllMissions=async()=>new Promise(((e,t)=>{this.post("/init?a=getAllMissions",{},(i=>{0===i.iRet?(EventBus.emit("open-summary"),e(i)):t(i)}),(e=>{t(e)}),"allData")})),this.getShopItems=async()=>new Promise(((e,t)=>{this.post("/init?a=getShopItems",{},(i=>{0===i.iRet?e(i):t(i)}),(e=>{t(e)}),"allData")})),this.post=(t,i,s,n)=>{let a;a=GameConfig.Server[null==e?void 0:e.GameData.loginInfo.region];var r=new FormData;for(var o in i)r.append(o,i[o]);a+=t;const l=window.location.search.substring(1);""!=l&&(a=a+"&"+l),axios.post(a,r,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{20008001==e.data.ret&&inGame()?closeWebview():s&&s(e.data)})).catch((e=>{console.error(`Error in post request for ${n}:`,e),20008001==response.data.ret&&inGame()?closeWebview():s&&s({error:e.message})}))},this.get=(t,i,s,n)=>{let a;a=GameConfig.Server[null==e?void 0:e.GameData.loginInfo.region],a+=t;const r=window.location.search.substring(1);""!=r&&(a=a+"&"+r),axios.get(a,{params:i}).then((e=>{20008001==e.data.ret&&inGame()?closeWebview():s&&s(e.data)})).catch((e=>{console.error(`Error in get request for ${n}:`,e),20008001==response.data.ret&&inGame()?closeWebview():s&&s({error:e.message})}))}}}class Language{static getText(e){var t=instance.t(e),i=localStorage.getItem("languageKey");return console.log("="+t),"ar_AE"==i&&(t=t.split("").reverse().join(""),console.log("="+t)),t}}class GeneralRtl{static rtlText(e,t,i,s,n){let a=null;return a="ar_AE"==localStorage.getItem("languageKey")?e.rexUI.add.BBCodeText(t,i,s,{...n,rtl:!0}):e.add.text(t,i,s,n),a}}class Preloader extends phaserExports.Scene{constructor(){super("Preloader"),__publicField(this,"bar"),__publicField(this,"cropRect"),__publicField(this,"userInfo",{bg:null,text:null,setVisible(e){var t,i;null==(t=this.bg)||t.setVisible(e),null==(i=this.text)||i.setVisible(e)}})}init(){this.closeGame=null,localStorage.getItem("languageKey"),inGame()&&(this.closeGame=this.add.image(this.cameras.main.width/2+600,60,"loading-atlas","btn_close5.png"),this.closeGame.setDepth(11),this.closeGame.setInteractive({hitArea:new Phaser.Geom.Rectangle(-40,-40,90,90),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{closeWebview()}))),this.bg=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"loading-background");const e=this.cameras.main.width/this.bg.width,t=this.cameras.main.height/this.bg.height,i=Math.max(e,t);this.bg.setScale(i),this.userInfo.bg=this.add.image(-15,20,"loading-atlas","frame_game player2.png").setOrigin(0,0),this.userInfo.text=this.add.text(this.userInfo.bg.x+this.userInfo.bg.displayWidth/2,60,this.game.GameData.loginInfo.nickName,{fontFamily:"BeaufortforLOL-Bold",fontSize:24,color:"#fff"}).setOrigin(.5,0),this.title=this.add.text(120,160,instance.t("Event_5_C2_Pandora_06"),{fontFamily:"BeaufortforLOL-Bold",fontSize:44,color:"#F9F19E",wordWrap:{width:400,useAdvancedWrap:!0}}).setOrigin(0,0),this.titleLine=this.add.image(120,this.title.y+this.title.displayHeight+10,"loading-atlas","line_title.png").setOrigin(0,0),this.info=GeneralRtl.rtlText(this,120,this.titleLine.y+this.titleLine.displayHeight+10,instance.t("Event_5_C2_Pandora_08"),{fontFamily:"BeaufortforLOL-Bold",fontSize:20,color:"#ffffff",wordWrap:{width:400,useAdvancedWrap:!0},lineSpacing:4}).setOrigin(0,0),this.progress=this.add.container(this.cameras.main.width/2,this.cameras.main.height/2+310),this.progressTips=GeneralRtl.rtlText(this,this.cameras.main.width/2,this.cameras.main.height/2+260,instance.t("Event_5_C2_Pandora_124"),{fontFamily:"BeaufortforLOL-Bold",fontSize:20,color:"#ffffff"}).setOrigin(.5,.5);const s=this.add.image(0,0,"loading-atlas","progress_experience_normal.png").setOrigin(.5,.5);this.bar=this.add.image(-s.width/2+62,-1,"loading-atlas","progress_experience_normal3.png").setOrigin(0,.5),this.load.on("progress",(e=>{console.log(s.width),this.bar.setCrop(0,0,500*e*.92,s.height)})),this.progress.add([s,this.bar])}preload(){this.load.setPath("assets"),this.load.atlas("plant","plant/atlas.png","plant/atlas.json"),this.load.atlas("plant-crop-atlas","plant/atlas2.png","plant/atlas2.json"),this.load.image("pop_small","pop-up_small.png"),this.load.image("shovel_icon","plant/itme_1.png"),this.load.image("plant_background","plant/bg_plant1.png"),this.load.image("plant_tool","plant/frame_tool bar.png"),this.load.image("bag_empty","bag/icon_empty1.png"),this.load.image("flower_empty","bag/icon_empty2.png"),this.load.atlas("bag-atlas","bag/atlas.png","bag/atlas.json"),this.load.atlas("bag-building-atlas","bag/atlas2.png","bag/atlas2.json"),this.load.atlas("bag-crop-atlas2","bag/atlas3.png","bag/atlas3.json"),this.load.image("shop_reward_bg","store/frame_itme_1.png"),this.load.atlas("store","store/atlas.png","store/atlas.json"),this.load.atlas("store-crop-atlas","store/atlas3.png","store/atlas3.json"),this.load.image("store_bg","store/bg_store.png"),this.load.atlas("shop-building-atlas","store/atlas2.png","store/atlas2.json"),this.load.atlas("shop-ingame-atlas","store/mini_game_ingame_assets.png","store/mini_game_ingame_assets.json"),this.load.image("house_bg2","home/house_bg2.png"),this.load.image("house_background","home/frame_bg2.png"),this.load.atlas("home-atlas","home/atlas.png","home/atlas.json"),this.load.atlas("home-atlas2","home/atlas2.png","home/atlas2.json"),this.load.image("house_edit","home/db_edit.png"),this.load.image("house_fence","home/bg_Flower bed.png"),this.load.image("house_but","home/bg_Flower-bed.png"),this.load.image("house_cloud","home/bg_cloud.png"),this.load.image("house_mask","home/home_mask.png"),this.load.atlas("common-atlas","common/atlas.png","common/atlas.json"),this.load.atlas("level_num","common/level_num.png","common/level_num.json"),this.load.image("bgginner_bg","common/TapToContinueLockup.png"),this.load.image("bgginner_finger","common/finger(1).png"),this.load.image("bgginner_Indicator","common/Indicator.png"),this.load.image("prop_tips_bg","common/propTipsBg.png"),this.load.image("prop_tips_flower","common/propTipsFlower.png"),this.load.image("currency1","common/icon_currency1-1.png"),this.load.image("currency2","common/icon_currency3-1.png"),this.load.image("currency0","common/icon_star2-1.png"),this.load.image("yangbanjian","common/yangbanjian.png"),this.load.image("icon_dots","task/icon_dots.png"),this.load.atlas("task-atlas","task/atlas.png","task/atlas.json"),this.load.atlas("setUp-atlas","setUp/atlas.png","setUp/atlas.json"),this.load.atlas("background-atlas","background/atlas2.png","background/atlas2.json"),this.load.atlas("announcement-atlas","announcement/atlas.png","announcement/atlas.json"),this.load.setPath("assets/ani"),this.load.spineBinary("levelUp-data","Up_Grade.skel.bytes.txt"),this.load.spineAtlas("levelUp-atlas","UP_zhe.atlas.txt"),this.load.spineBinary("watering-data","ui_2DSpine_Fx_Watering.skel.bytes.txt"),this.load.spineAtlas("watering-atlas","ui_2DSpine_Fx_Watering.atlas.txt"),this.load.spineBinary("shovel-data","ui_2DSpine_Fx_Shovel.skel.bytes.txt"),this.load.spineAtlas("shovel-atlas","ui_2DSpine_Fx_Shovel.atlas.txt"),this.load.spineBinary("fence-data","ui_2DSpine_Fx_Fence.skel.bytes.txt"),this.load.spineAtlas("fence-atlas","ui_2DSpine_Fx_Fence.atlas.txt"),this.load.spineBinary("cloud-data","ui_spine_minigame_cloud.skel.bytes.txt"),this.load.spineAtlas("cloud-atlas","ui_spine_minigame_cloud.atlas.txt"),this.load.spineBinary("vibe-data","ui_spine_minigame_vibe.skel.bytes.txt"),this.load.spineAtlas("vibe-atlas","ui_spine_minigame_vibe.atlas.txt"),this.load.spineBinary("popup-data","ui_spine_minigame_Popup.skel.bytes.txt"),this.load.spineAtlas("popup-atlas","ui_spine_minigame_Popup.atlas.txt")}create(){this.scale.on("resize",(function(e){var t,i,s,n,a,r,o,l,h=e.width,d=e.height;this.cameras.resize(h,d),null==(t=this.bg)||t.setPosition(h/2,d/2),null==(i=this.userInfo)||i.bg.setPosition(-15,20),null==(s=this.userInfo)||s.text.setPosition(this.userInfo.bg.x+this.userInfo.bg.displayWidth/2,60),null==(n=this.title)||n.setPosition(120,160),null==(a=this.titleLine)||a.setPosition(120,this.title.y+this.title.displayHeight+10),null==(r=this.info)||r.setPosition(120,this.titleLine.y+this.titleLine.displayHeight+10),null==(o=this.progress)||o.setPosition(h/2,d/2+325),null==(l=this.progressTips)||l.setPosition(h/2,d/2+275),this.closeGame&&this.closeGame.setPosition(h/2+600,60)}),this),this.game.events.on("langusge_change",(()=>{var e,t,i,s;this.title.setText(instance.t("Event_5_C2_Pandora_06")),null==(e=this.titleLine)||e.setPosition(50,this.title.y+this.title.displayHeight+10),"ar_AE"==localStorage.getItem("languageKey")?(this.progressTips.destroy(),this.progressTips=null,this.progressTips=GeneralRtl.rtlText(this,this.cameras.main.width/2,this.cameras.main.height/2+260,instance.t("Event_5_C2_Pandora_124"),{fontFamily:"BeaufortforLOL-Bold",fontSize:20,color:"#ffffff"}).setOrigin(.5,.5)):null==(t=this.progressTips)||t.setText(Language.getText("Event_5_C2_Pandora_124")),"ar_AE"==localStorage.getItem("languageKey")?(this.info.destroy(),this.info=null,this.info=GeneralRtl.rtlText(this,80,this.titleLine.y+this.titleLine.displayHeight+10,instance.t("Event_5_C2_Pandora_08"),{fontFamily:"BeaufortforLOL-Bold",fontSize:20,color:"#ffffff",wordWrap:{width:400,useAdvancedWrap:!0},lineSpacing:4}).setOrigin(0,0)):(null==(i=this.info)||i.setText(instance.t("Event_5_C2_Pandora_08")),null==(s=this.info)||s.setPosition(80,this.titleLine.y+this.titleLine.displayHeight+10))}));const e=new Promise((e=>{this.load.once("complete",(()=>{console.log(" "),e()}))})),t=(async()=>{var e,t,i,s,n;try{const[a,r,o]=await Promise.all([this.game.GameApi.init(),this.game.GameApi.initBagStoreMissionData(),this.game.GameApi.getGuide()]);console.log(""),console.log("",r.jData),this.game.GameData.infoData=r.jData,this.game.GameData.guideData=null==o?void 0:o.jData;const l=null==(e=this.cameras)?void 0:e.main,h={width:(null==l?void 0:l.width)||(null==(t=this.scale)?void 0:t.width)||window.innerWidth,height:(null==l?void 0:l.height)||(null==(i=this.scale)?void 0:i.height)||window.innerHeight,sound:null==(n=null==(s=this.game.GameData)?void 0:s.getUpInfo)?void 0:n.sound};return EventBus.emit("open-task-init",h),!0}catch(a){return console.error(":",a),!1}})();this.load.start();let i=!1,s=!1;e.then((()=>{i=!0,n()})),t.then((e=>{s=e,n()}));const n=()=>{i&&!s&&this.bar.setCrop(0,0,475,this.bar.height),i&&s&&(this.cropRect=new Phaser.Geom.Rectangle(0,0,475,this.bar.height),this.tweens.add({targets:this.cropRect,width:486,duration:1e3,ease:"Power1",onComplete:()=>{console.log(""),this.scene.start("Game",{pageViewKey:"FarmView"})},onUpdate:()=>{this.bar.setCrop(0,0,this.cropRect.width,this.bar.height)}}))}}}function assign(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)e[s]=i[s]}return e}var defaultConverter={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(t,i){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=assign({},i,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var r in n)n[r]&&(a+="; "+r,!0!==n[r]&&(a+="="+n[r].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(i){if("undefined"!=typeof document&&(!arguments.length||i)){for(var s=document.cookie?document.cookie.split("; "):[],n={},a=0;a<s.length;a++){var r=s[a].split("="),o=r.slice(1).join("=");try{var l=decodeURIComponent(r[0]);if(n[l]=t.read(o,l),i===l)break}catch(e){}}return i?n[i]:n}},remove:function(e,t){s(e,"",assign({},t,{expires:-1}))},withAttributes:function(e){return init(this.converter,assign({},this.attributes,e))},withConverter:function(e){return init(assign({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}var api=init(defaultConverter,{path:"/"});class ObjectFactory{constructor(e){this.scene=e,e.events.once("destroy",this.destroy,this)}destroy(){this.scene=null}static register(e,t){ObjectFactory.prototype[e]=t}}var SetGetFrameNameCallback=function(e){return void 0===e&&(e=DefaultGetFrameNameCallback),this.getFrameNameCallback=e,this},DefaultGetFrameNameCallback=function(e,t,i){return"__BASE"===i?`${e},${t}`:`${i}:${e},${t}`};function DeepClone(e){if(null===e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>DeepClone(e)));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=DeepClone(e[i]));return t}var SetBaseTexture=function(e,t,i,s){Array.isArray(t)&&(s=i,i=t,t=void 0),null==t&&(t="__BASE"),"number"==typeof i&&arguments.length>=6?(i=[arguments[2],void 0,arguments[3]],s=[arguments[4],void 0,arguments[5]]):void 0===i&&void 0===s&&void 0!==this.columns.data&&void 0!==this.rows.data?(i=this.columns.data,s=this.rows.data):(i=DeepClone(i),s=DeepClone(s)),this.textureKey=e,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=s,this.rows.count=s?s.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var n=this.scene.sys.textures.get(e);if(!n)return this.clear(),this;if(!i||!s)return this.clear(),this;for(var a=n.get(t),r=a.width,o=0,l=0,h=i.length;l<h;l++)void 0===i[l]?o++:"number"==typeof i[l]?r-=i[l]:r-=i[l].width;var d=o>0?r/o:0,c=a.height,u=0;for(l=0,h=s.length;l<h;l++)void 0===s[l]?u++:"number"==typeof s[l]?c-=s[l]:c-=s[l].width;for(var p,g,m,f,v,b=u?c/u:0,y=0,C=0,x=0,S=s.length;x<S;x++){void 0===s[x]&&(s[x]=b),"number"==typeof s[x]&&(s[x]={height:s[x],stretch:x%2}),m=(p=s[x]).height,this.rows.stretch+=0|p.stretch,this.rows.minHeight+=p.stretch>0?0:m,y=0,l=0;for(var w=i.length;l<w;l++){if(void 0===i[l]&&(i[l]=d),"number"==typeof i[l]&&(i[l]={width:i[l],stretch:l%2}),f=(g=i[l]).width,0===x&&(this.columns.stretch+=0|g.stretch,this.columns.minWidth+=g.stretch>0?0:f),f>=1&&m>=1){var T=typeof(v=this.getFrameNameCallback(l,x,t));"string"!==T&&"number"!==T||n.add(v,0,y+a.cutX,C+a.cutY,f,m)}y+=f}C+=m}return this.updateTexture(),this},UpdateTexture=function(){if(this.clear(),void 0===this.textureKey)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t,i,s,n,a,r,o,l=this.columns.minWidth*this.maxFixedPartScaleX,h=this.rows.minHeight*this.maxFixedPartScaleY,d=this.width-l,c=this.height-h,u=d>=0?this.maxFixedPartScaleX:this.width/l,p=c>=0?this.maxFixedPartScaleY:this.height/h;if(this.preserveRatio){var g=Math.min(u,p);if(u>g){var m=(u-g)*l;d>=0?d+=m:d=m,u=g}if(p>g){var f=(p-g)*h;c>=0?c+=f:c=f,p=g}}this.columns.scale=u,this.rows.scale=p,t=d>0&&this.columns.stretch>0?d/this.columns.stretch:0,i=c>0&&this.rows.stretch>0?c/this.rows.stretch:0;var v=0,b=0;this._beginDraw();for(var y=0,C=this.rows.count;y<C;y++){o=0===(a=this.rows.data[y]).stretch?a.height*p:i*a.stretch,v=0;for(var x=0,S=this.columns.count;x<S;x++)r=0===(n=this.columns.data[x]).stretch?n.width*u:t*n.stretch,s=this.getFrameNameCallback(x,y,this.baseFrameName),e.has(s)&&r>0&&o>0&&(0==(0===a.stretch&&0===n.stretch||0===this.getStretchMode(x,y)?0:1)?this._drawImage(this.textureKey,s,v,b,r,o):this._drawTileSprite(this.textureKey,s,v,b,r,o)),v+=r;b+=o}this._endDraw()};const IsPlainObject$W=Phaser.Utils.Objects.IsPlainObject,GetValue$3Y=Phaser.Utils.Objects.GetValue;var SetStretchMode=function(e){return IsPlainObject$W(e)?(this.stretchMode.edge=parseMode(GetValue$3Y(e,"edge",0)),this.stretchMode.internal=parseMode(GetValue$3Y(e,"internal",0))):(e=parseMode(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},parseMode=function(e){return"string"==typeof e&&(e=EXTENDMODE[e]),e};const EXTENDMODE={scale:0,repeat:1};var IsEdge=function(e,t){return 0===e||e===this.columns.count-1||0===t||t===this.rows.count-1},GetStretchMode=function(e,t){return IsEdge.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},SetPreserveRatio=function(e){return null==e&&(e=!0),this.preserveRatio=e,this},SetMaxFixedPartScale=function(e,t){return void 0===t&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},NOOP=function(){};const Methods$n={_beginDraw:NOOP,_drawImage:NOOP,_drawTileSprite:NOOP,_endDraw:NOOP,setGetFrameNameCallback:SetGetFrameNameCallback,setBaseTexture:SetBaseTexture,updateTexture:UpdateTexture,setStretchMode:SetStretchMode,getStretchMode:GetStretchMode,setPreserveRatio:SetPreserveRatio,setMaxFixedPartScale:SetMaxFixedPartScale},IsPlainObject$V=Phaser.Utils.Objects.IsPlainObject,GetValue$3X=Phaser.Utils.Objects.GetValue;var NinePatchBase=function(e,t){class i extends e{constructor(e,i,s,n,a,r,o,l,h,d){if(IsPlainObject$V(i)?(i=GetValue$3X(d=i,"x",0),s=GetValue$3X(d,"y",0),n=GetValue$3X(d,"width",1),a=GetValue$3X(d,"height",1),r=GetValue$3X(d,"key",void 0),o=GetValue$3X(d,"baseFrame",void 0),l=GetValue$3X(d,"columns",void 0),h=GetValue$3X(d,"rows",void 0)):IsPlainObject$V(n)?(n=GetValue$3X(d=n,"width",1),a=GetValue$3X(d,"height",1),r=GetValue$3X(d,"key",void 0),o=GetValue$3X(d,"baseFrame",void 0),l=GetValue$3X(d,"columns",void 0),h=GetValue$3X(d,"rows",void 0)):IsPlainObject$V(r)?(r=GetValue$3X(d=r,"key",void 0),o=GetValue$3X(d,"baseFrame",void 0),l=GetValue$3X(d,"columns",void 0),h=GetValue$3X(d,"rows",void 0)):IsPlainObject$V(o)?(o=GetValue$3X(d=o,"baseFrame",void 0),l=GetValue$3X(d,"columns",void 0),h=GetValue$3X(d,"rows",void 0)):Array.isArray(o)?(d=h,h=l,l=o,o=GetValue$3X(d,"baseFrame",void 0)):IsPlainObject$V(l)&&(l=GetValue$3X(d=l,"columns",void 0),h=GetValue$3X(d,"rows",void 0)),void 0===o&&(o=GetValue$3X(d,"frame",void 0)),void 0===l){var c=GetValue$3X(d,"leftWidth",void 0),u=GetValue$3X(d,"rightWidth",void 0);void 0!==c&&void 0!==u&&(l=[c,void 0,u])}if(void 0===h){var p=GetValue$3X(d,"topHeight",void 0),g=GetValue$3X(d,"bottomHeight",void 0);void 0!==p&&void 0!==g&&(h=[p,void 0,g])}super(e),this.type=t,this.setPosition(i,s).setSize(n,a).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(GetValue$3X(d,"getFrameNameCallback",void 0)),this.setStretchMode(GetValue$3X(d,"stretchMode",0)),this.setPreserveRatio(GetValue$3X(d,"preserveRatio",!0));var m=GetValue$3X(d,"maxFixedPartScale",1),f=GetValue$3X(d,"maxFixedPartScaleX",m),v=GetValue$3X(d,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(f,v),this.setBaseTexture(r,o,l,h)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(e,t){return this.width===e&&this.height===t||(super.resize?super.resize(e,t):super.setSize(e,t),this.updateTexture()),this}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(i.prototype,Methods$n),i};const GameClass=Phaser.Game;var IsGame=function(e){return e instanceof GameClass};const SceneClass=Phaser.Scene;var IsSceneObject=function(e){return e instanceof SceneClass},GetGame=function(e){return null==e||"object"!=typeof e?null:IsGame(e)?e:IsGame(e.game)?e.game:IsSceneObject(e)?e.sys.game:IsSceneObject(e.scene)?e.scene.sys.game:void 0};const GameObjectClasses=Phaser.GameObjects;var GameObjects=void 0,GetStampGameObject=function(e,t){if(GameObjects||(GameObjects={},GetGame(e).events.once("destroy",(function(){for(var e in GameObjects)GameObjects[e].destroy();GameObjects=void 0}))),!GameObjects.hasOwnProperty(t)){var i=GetGame(e).scene.systemScene;(e=new GameObjectClasses[t](i)).setOrigin(0),GameObjects[t]=e}return GameObjects[t]},DrawImage$2=function(e,t,i,s,n,a){var r=GetStampGameObject(this,"Image").setTexture(e,t).setDisplaySize(n,a);this.draw(r,i,s)},DrawTileSprite$1=function(e,t,i,s,n,a){var r=GetStampGameObject(this,"TileSprite").setTexture(e,t).setSize(n,a);this.draw(r,i,s)};const RenderTexture$2=Phaser.GameObjects.RenderTexture;let NinePatch$1=class extends(NinePatchBase(RenderTexture$2,"rexNinePatch")){};var Methods$m={_drawImage:DrawImage$2,_drawTileSprite:DrawTileSprite$1};Object.assign(NinePatch$1.prototype,Methods$m);var IsInValidKey=function(e){return null==e||""===e||0===e.length},GetEntry=function(e,t,i){var s=e;if(IsInValidKey(t));else{var n;"string"==typeof t&&(t=t.split("."));for(var a=0,r=t.length;a<r;a++){var o;null!=s[n=t[a]]&&"object"==typeof s[n]||(o={},s[n]=o),s=s[n]}}return s},SetValue=function(e,t,i,s){if(void 0===s&&(s="."),"object"==typeof e){if(IsInValidKey(t)){if(null==i)return;"object"==typeof i&&(e=i)}else{"string"==typeof t&&(t=t.split(s));var n=t.pop();GetEntry(e,t)[n]=i}return e}};ObjectFactory.register("ninePatch",(function(e,t,i,s,n,a,r,o){var l=new NinePatch$1(this.scene,e,t,i,s,n,a,r,o);return this.scene.add.existing(l),l})),SetValue(window,"RexPlugins.UI.NinePatch",NinePatch$1);const GetCalcMatrix$2=Phaser.GameObjects.GetCalcMatrix;var WebGLRenderer$3=function(e,t,i,s){var n=t.getRenderList();if(0!==n.length){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline),r=t.frame.glTexture,o=a.setGameObject(t),l=i.roundPixels,h=GetCalcMatrix$2(t,i,s),d=a.calcMatrix.copyFrom(h.calc),c=t._displayOriginX,u=t._displayOriginY,p=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var g=0,m=n.length;g<m;g++)n[g].webglRender(a,d,p,c,u,r,o,l);e.pipelines.postBatch(t)}};const SetTransform$2=Phaser.Renderer.Canvas.SetTransform;var CanvasRenderer$3=function(e,t,i,s){var n=e.currentContext,a=t.getRenderList();if(0!==a.length&&SetTransform$2(e,n,t,i,s)){i.addToRenderList(t);var r=i.roundPixels,o=-t._displayOriginX,l=-t._displayOriginY;n.translate(o,l);for(var h=0,d=a.length;h<d;h++)a[h].canvasRender(n,o,l,r);n.restore()}};const Render$4={renderWebGL:WebGLRenderer$3,renderCanvas:CanvasRenderer$3};var SetTexture=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},Resize$2=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},AddChild$4=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const RemoveItem$e=Phaser.Utils.Array.Remove;var RemoveChild$3=function(e){return this.poolManager&&this.poolManager.free(e),RemoveItem$e(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},RemoveChildren$1=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},GetLastAppendedChildren$1=function(){return this.lastAppendedChildren},GetChildren$1=function(){return this.children.list};const TintMethods={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var methods$K={setTexture:SetTexture,resize:Resize$2,setSize:Resize$2,addChild:AddChild$4,removeChild:RemoveChild$3,removeChildren:RemoveChildren$1,clear:RemoveChildren$1,getLastAppendedChildren:GetLastAppendedChildren$1,getChildren:GetChildren$1};Object.assign(methods$K,TintMethods);class Stack{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(e){return this.items.push(e),this}pushMultiple(e){return this.items.push.apply(this.items,e),e.length=0,this}clear(){return this.items.length=0,this}}const GetValue$3W=Phaser.Utils.Objects.GetValue;var Pools$1={};let PoolManager$1=class{constructor(e){this.pools=GetValue$3W(e,"pools",Pools$1)}destroy(){this.pools=void 0}free(e){if(!this.pools)return this;var t=e.type;return this.pools.hasOwnProperty(t)||(this.pools[t]=new Stack),this.pools[t].push(e),e.onFree(),this}freeMultiple(e){if(!this.pools)return this;for(var t=0,i=e.length;t<i;t++)this.free(e[t]);return this}allocate(e){return this.pools&&this.pools.hasOwnProperty(e)?this.pools[e].pop():null}};const MinVersion=60;var IsChecked=!1,CheckP3Version=function(e){if(!IsChecked){void 0===e&&(e=MinVersion);var t=Phaser.VERSION.split("."),i=parseInt(t[0]);if(3===i){var s=parseInt(t[1]);s<e&&console.error(`Minimum supported version : ${i}.${s}`)}else console.error(`Can't supported version : ${i}`);IsChecked=!0}};CheckP3Version();const GameObject$4=Phaser.GameObjects.GameObject,IsPlainObject$U=Phaser.Utils.Objects.IsPlainObject,GetValue$3V=Phaser.Utils.Objects.GetValue,List=Phaser.Structs.List,StableSort=Phaser.Utils.Array.StableSort;class Blitter extends GameObject$4{constructor(e,t,i,s,n,a){IsPlainObject$U(t)&&(t=GetValue$3V(a=t,"x",0),i=GetValue$3V(a,"y",0),s=GetValue$3V(a,"texture"),n=GetValue$3V(a,"frame")),void 0===t&&(t=0),void 0===i&&(i=0),super(e,"rexBlitter"),this.children=new List,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var r=GetValue$3V(a,"reuseBob",!0);this.poolManager=r?new PoolManager$1(a):void 0,this.setTexture(s,n),this.setPosition(t,i),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var e=!1,t=this.children.list,i=0,s=t.length;i<s;i++){var n=t[i];ChildCanRender(n)&&(this.renderList.push(n),e||(e=0!==n.depth))}e&&StableSort(this.renderList,SortByDepth),this.displayListDirty=!1}return this.renderList}}var ChildCanRender=function(e){return e.active&&e.visible&&e.alpha>0},SortByDepth=function(e,t){return e._depth-t._depth};const Components$4=Phaser.GameObjects.Components;Phaser.Class.mixin(Blitter,[Components$4.Alpha,Components$4.BlendMode,Components$4.ComputedSize,Components$4.Depth,Components$4.GetBounds,Components$4.Mask,Components$4.Origin,Components$4.Pipeline,Components$4.PostPipeline,Components$4.ScrollFactor,Components$4.Transform,Components$4.Visible,Render$4,methods$K]);const ImageTypeName$1="image";var GetValue$3U=function(e,t,i){if(!e||"number"==typeof e)return i;if("string"==typeof t){if(e.hasOwnProperty(t))return e[t];if(-1===t.indexOf("."))return i;t=t.split(".")}for(var s=t,n=e,a=i,r=0;r<s.length;r++){if(t=s[r],!n.hasOwnProperty(t)){a=i;break}n=a=n[t]}return a},Clear$1=function(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e};const DataMethods$2={enableData(){return void 0===this.data&&(this.data={}),this},setData(e,t){if(this.enableData(),1===arguments.length){var i=e;for(e in i)this.data[e]=i[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),void 0===e?this.data:GetValue$3U(this.data,e,t)},incData(e,t,i){return void 0===i&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)+t),this},mulData(e,t,i){return void 0===i&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)*t),this},clearData(){return this.data&&Clear$1(this.data),this}};let Base$4=class{constructor(e,t){this.type=t,this.data=void 0,this.setParent(e).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(e){return this.parent=e,this}setDisplayListDirty(e){return e&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(e){this.setDisplayListDirty(this._active!=e),this._active=e}setActive(e){return void 0===e&&(e=!0),this.active=e,this}modifyPorperties(e){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Base$4.prototype,DataMethods$2);const DegToRad$j=Phaser.Math.DegToRad,RadToDeg$e=Phaser.Math.RadToDeg,GetValue$3T=Phaser.Utils.Objects.GetValue;let RenderBase$1=class extends Base$4{get visible(){return this._visible}set visible(e){this.setDisplayListDirty(this._visible!=e),this._visible=e}setVisible(e){return void 0===e&&(e=!0),this.visible=e,this}get alpha(){return this._alpha}set alpha(e){this.setDisplayListDirty(!!this._alpha!=!!e),this._alpha=e}setAlpha(e){return this.alpha=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setPosition(e,t){return this.x=e,this.y=t,this}setRotation(e){return this.rotation=e,this}get angle(){return RadToDeg$e(this.rotation)}set angle(e){this.rotation=DegToRad$j(e)}setAngle(e){return this.angle=e,this}setScaleX(e){return this.scaleX=e,this}get width(){return this._width}set width(e){this._width=e}setWidth(e,t){return void 0===t&&(t=!1),this.width=e,t&&(this.scaleY=this.scaleX),this}setScaleY(e){return this.scaleY=e,this}setScale(e,t){return void 0===t&&(t=e),this.scaleX=e,this.scaleY=t,this}get height(){return this._height}set height(e){this._height=e}setHeight(e,t){return void 0===t&&(t=!1),this.height=e,t&&(this.scaleX=this.scaleY),this}setScale(e,t){return void 0===t&&(t=e),this.scaleX=e,this.scaleY=t,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(e){this.scaleX=e/this._width}setDisplayWidth(e,t){return void 0===t&&(t=!1),this.displayWidth=e,t&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(e){this.scaleY=e/this._height}setDisplayHeight(e,t){return void 0===t&&(t=!1),this.displayHeight=e,t&&(this.scaleX=this.scaleY),this}setOriginX(e){return this.originX=e,this._displayOriginX=this.width*e,this}setOriginY(e){return this.originY=e,this._displayOriginY=this.height*e,this}setOrigin(e,t){return void 0===t&&(t=e),this.setOriginX(e).setOriginY(t),this}get depth(){return this._depth}set depth(e){this.setDisplayListDirty(this._depth!=e),this._depth=e}setDepth(e){return void 0===e&&(e=0),this.depth=e,this}modifyPorperties(e){if(!e)return this;e.hasOwnProperty("x")&&this.setX(e.x),e.hasOwnProperty("y")&&this.setY(e.y),e.hasOwnProperty("rotation")?this.setRotation(e.rotation):e.hasOwnProperty("angle")&&this.setAngle(e.angle),e.hasOwnProperty("alpha")&&this.setAlpha(e.alpha);var t=GetValue$3T(e,"width",void 0),i=GetValue$3T(e,"height",void 0),s=GetValue$3T(e,"scale",void 0),n=GetValue$3T(e,"scaleX",s),a=GetValue$3T(e,"scaleY",s);void 0!==t?void 0===i&&void 0===a?this.setWidth(t,!0):this.setWidth(t):void 0!==n?this.setScaleX(n):e.hasOwnProperty("displayWidth")&&this.setDisplayWidth(e.displayWidth),void 0!==i?void 0===t&&void 0===n?this.setHeight(i,!0):this.setHeight(i):void 0!==a?this.setScaleY(a):e.hasOwnProperty("displayHeight")&&this.setDisplayHeight(e.displayHeight);var r=GetValue$3T(e,"origin",void 0);return void 0!==r?this.setOrigin(r):(e.hasOwnProperty("originX")&&this.setOriginX(e.originX),e.hasOwnProperty("originY")&&this.setOriginY(e.originY)),e.hasOwnProperty("depth")&&this.setDepth(e.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(e,t,i,s,n,a,r,o){}canvasRender(e,t,i,s){}};const TransformMatrix$2=Phaser.GameObjects.Components.TransformMatrix,GetTint$2=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var FrameMatrix=new TransformMatrix$2,WebglRender=function(e,t,i,s,n,a,r,o){var l=this.frame;if(l){var h,d,c,u,p,g,m,f,v=this._width,b=this._height,y=v*this.originX,C=b*this.originY,x=this.x-s,S=this.y-n;if(this.isCropped){var w=this._crop;w.flipX===this.flipX&&w.flipY===this.flipY||l.updateCropUVs(w,this.flipX,this.flipY),h=w.u0,d=w.v0,c=w.u1,u=w.v1,m=w.width,f=w.height,p=w.x,g=w.y}else h=this.frame.u0,d=this.frame.v0,c=this.frame.u1,u=this.frame.v1,m=v,f=b,p=0,g=0;var T=1,P=1;this.flipX&&(x+=v-2*y,T=-1),this.flipY&&(S+=b-2*C,P=-1),FrameMatrix.applyITRS(x,S,this.rotation,this.scaleX*T,this.scaleY*P),t.multiply(FrameMatrix,FrameMatrix);var _=-y+p,M=-C+g,O=_+m,k=M+f,$=FrameMatrix.setQuad(_,M,O,k,o),G=GetTint$2(this.tint,this.alpha*i);e.batchQuad(this.parent,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],h,d,c,u,G,G,G,G,this.tintFill,a,r)}},CanvasRender=function(e,t,i,s){var n=this.frame;if(n){e.save();var a,r,o,l,h=this._width,d=this._height,c=h*this.originX,u=d*this.originY,p=this.x-c,g=this.y-u;if(this.isCropped){var m=this._crop;m.flipX===this.flipX&&m.flipY===this.flipY||n.updateCropUVs(m,this.flipX,this.flipY),o=m.cw,l=m.ch,a=m.cx,r=m.cy}else o=n.cutWidth,l=n.cutHeight,a=n.cutX,r=n.cutY;var f=1,v=1;this.flipX&&(p+=h,f=-1),this.flipY&&(g+=d,v=-1);var b=n.source.resolution,y=o/b,C=l/b;s&&(p=Math.floor(p+.5),g=Math.floor(g+.5),y+=.5,C+=.5),e.translate(p,g),e.rotate(this.rotation),e.scale(this.scaleX*f,this.scaleY*v),e.drawImage(n.source.image,a,r,o,l,0,0,y,C),e.restore()}};const IsPlainObject$T=Phaser.Utils.Objects.IsPlainObject;let ImageData$1=class extends RenderBase$1{constructor(e,t){super(e,ImageTypeName$1),this._crop=ResetCropObject(),this.setFrame(t)}get width(){return this._width}set width(e){}get height(){return this._height}set height(e){}setFrame(e){return arguments.length>0&&!IsPlainObject$T(e)&&(e=this.parent.texture.get(e)),this.frame=e,e?(this._width=e.realWidth,this._height=e.realHeight):(this._width=0,this._height=0),this}setFlipX(e){return void 0===e&&(e=!0),this.flipX=e,this}setFlipY(e){return void 0===e&&(e=!0),this.flipY=e,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return void 0===this._tint?this.parent.tint:this._tint}set tint(e){this._tint=e}setTint(e){return this.tint=e,this.tintFill=!1,this}setTintFill(e){return this.tint=e,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return void 0===this._tintFill?this.parent.tintFill:this._tintFill}set tintFill(e){this._tintFill=e}setCrop(e,t,i,s){return void 0===e?(this.isCropped=!1,this):this.frame?0===e&&0===t&&i===this._width&&s===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,e,t,i,s,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(e){return e?(e.hasOwnProperty("width")&&(e.displayWidth=e.width,delete e.width),e.hasOwnProperty("height")&&(e.displayHeight=e.height,delete e.height),e.hasOwnProperty("frame")&&this.setFrame(e.frame),super.modifyPorperties(e),e.hasOwnProperty("flipX")&&this.setFlipX(e.flipX),e.hasOwnProperty("flipY")&&this.setFlipY(e.flipY),e.hasOwnProperty("tint")&&this.setTint(e.tint),e.hasOwnProperty("tintFill")&&this.setTintFill(e.tintFill),this):this}};var ResetCropObject=function(e){return void 0===e&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},methods$J={webglRender:WebglRender,canvasRender:CanvasRender};Object.assign(ImageData$1.prototype,methods$J);var AddImage$2=function(e,t){"string"==typeof t&&(t={frame:t});var i=e.poolManager?e.poolManager.allocate(ImageTypeName$1):null;return null===i?i=new ImageData$1(e):i.setParent(e).setActive(),i.modifyPorperties(t),e.addChild(i),i},DrawImage$1=function(e,t,i,s,n,a){AddImage$2(this,{frame:t,x:i,y:s,width:n,height:a})},DrawTileSprite=function(e,t,i,s,n,a){var r=this.texture.get(t),o=r.width,l=r.height,h=n%o,d=a%l;0===h&&(h=o),0===d&&(d=l);for(var c=Math.ceil(n/o),u=Math.ceil(a/l),p=c-1,g=u-1,m=0;m<c;m++)for(var f=0;f<u;f++){let e=AddImage$2(this,{frame:t,x:i+m*o,y:s+f*l});var v=m===p?h:o,b=f===g?d:l;v===o&&b===l||e.setCrop(0,0,v,b)}};const Methods$l={_drawImage:DrawImage$1,_drawTileSprite:DrawTileSprite};class NinePatch extends(NinePatchBase(Blitter,"rexNinePatch2")){setBaseTexture(e,t,i,s){return this.setTexture(e,t),super.setBaseTexture(e,t,i,s),this}}Object.assign(NinePatch.prototype,Methods$l),ObjectFactory.register("ninePatch2",(function(e,t,i,s,n,a,r,o){var l=new NinePatch(this.scene,e,t,i,s,n,a,r,o);return this.scene.add.existing(l),l})),SetValue(window,"RexPlugins.UI.NinePatch2",NinePatch);var Utils$4=Phaser.Renderer.WebGL.Utils,FillPathWebGL=function(e,t,i,s,n,a){for(var r=Utils$4.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*s),o=i.pathData,l=i.pathIndexes,h=0;h<l.length;h+=3){var d=2*l[h],c=2*l[h+1],u=2*l[h+2],p=o[d+0]-n,g=o[d+1]-a,m=o[c+0]-n,f=o[c+1]-a,v=o[u+0]-n,b=o[u+1]-a,y=t.getX(p,g),C=t.getY(p,g),x=t.getX(m,f),S=t.getY(m,f),w=t.getX(v,b),T=t.getY(v,b);e.batchTri(i,y,C,x,S,w,T,0,0,1,1,r,r,r,2)}},Utils$3=Phaser.Renderer.WebGL.Utils,StrokePathWebGL=function(e,t,i,s,n){var a=e.strokeTint,r=Utils$3.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);a.TL=r,a.TR=r,a.BL=r,a.BR=r;var o=t.pathData,l=o.length-1,h=t.lineWidth,d=h/2,c=o[0]-s,u=o[1]-n;t.closePath||(l-=2);for(var p=2;p<l;p+=2){var g=o[p]-s,m=o[p+1]-n;e.batchLine(c,u,g,m,d,d,h,p-2,!!t.closePath&&p===l-1),c=g,u=m}};const GetCalcMatrix$1=Phaser.GameObjects.GetCalcMatrix;var PolygonWebGLRenderer=function(e,t,i,s){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var n=e.pipelines.set(t.pipeline),a=GetCalcMatrix$1(t,i,s),r=n.calcMatrix.copyFrom(a.calc),o=t._displayOriginX,l=t._displayOriginY,h=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&FillPathWebGL(n,r,t,h,o,l),t.isStroked&&StrokePathWebGL(n,t,h,o,l),e.pipelines.postBatch(t)},FillStyleCanvas=function(e,t,i,s){var n=t.fillColor,a=t.fillAlpha,r=(16711680&n)>>>16,o=(65280&n)>>>8,l=255&n;e.fillStyle="rgba("+r+","+o+","+l+","+a+")"},LineStyleCanvas=function(e,t,i,s){var n=t.strokeColor,a=t.strokeAlpha,r=(16711680&n)>>>16,o=(65280&n)>>>8,l=255&n;e.strokeStyle="rgba("+r+","+o+","+l+","+a+")",e.lineWidth=t.lineWidth};const SetTransform$1=Phaser.Renderer.Canvas.SetTransform;var PolygonCanvasRenderer=function(e,t,i,s){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var n=e.currentContext;if(SetTransform$1(e,n,t,i,s)){var a=t._displayOriginX,r=t._displayOriginY,o=t.pathData,l=o.length-1,h=o[0]-a,d=o[1]-r;n.beginPath(),n.moveTo(h,d),t.closePath||(l-=2);for(var c=2;c<l;c+=2){var u=o[c]-a,p=o[c+1]-r;n.lineTo(u,p)}n.closePath(),t.isFilled&&(FillStyleCanvas(n,t),n.fill()),t.isStroked&&(LineStyleCanvas(n,t),n.stroke()),n.restore()}};const Render$3={renderWebGL:PolygonWebGLRenderer,renderCanvas:PolygonCanvasRenderer},Shape$1=Phaser.GameObjects.Shape;class PolygnBase extends Shape$1{get fillColor(){return this._fillColor}set fillColor(e){this._fillColor=e,this.isFilled=null!=e&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(e){this._fillAlpha=e,this.isFilled=e>0&&null!=this._fillColor}setFillStyle(e,t){return void 0===t&&(t=1),this.fillColor=e,this.fillAlpha=t,this}get strokeColor(){return this._strokeColor}set strokeColor(e){this._strokeColor=e,this.isStroked=null!=e&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(e){this._strokeAlpha=e,this.isStroked=e>0&&null!=this._strokeColor&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.isStroked=e>0&&null!=this._strokeColor}setStrokeStyle(e,t,i){return void 0===i&&(i=1),this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i,this}updateData(){return this}get width(){return this.geom.width}set width(e){this.resize(e,this.height)}get height(){return this.geom.height}set height(e){this.resize(this.width,e)}setSize(e,t){var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this}resize(e,t){return this.setSize(e,t),this}}Object.assign(PolygnBase.prototype,Render$3);const GetValue$3S=Phaser.Utils.Objects.GetValue;let RoundRectangle$3=class{constructor(e,t,i,s,n){void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(e,t,i,s,n)}setTo(e,t,i,s,n){return this.setPosition(e,t),this.setRadius(n),this.setSize(i,s),this}setPosition(e,t){return this.x=e,this.y=t,this}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}setSize(e,t){return this.width=e,this.height=t,this}get minWidth(){var e=this.cornerRadius;return Math.max(e.tl.x+e.tr.x,e.bl.x+e.br.x)}get minHeight(){var e=this.cornerRadius;return Math.max(e.tl.y+e.bl.y,e.tr.y+e.br.y)}get width(){return this._width}set width(e){null==e&&(e=0),this._width=Math.max(e,this.minWidth)}get height(){return this._height}set height(e){null==e&&(e=0),this._height=Math.max(e,this.minHeight)}get radius(){var e=this.cornerRadius;return Math.max(e.tl.x,e.tl.y,e.tr.x,e.tr.y,e.bl.x,e.bl.y,e.br.x,e.br.y)}set radius(e){var t,i;"number"==typeof e?(t=e,i=e):(t=GetValue$3S(e,"x",0),i=GetValue$3S(e,"y",0));var s=this.cornerRadius;s.tl=GetRadius(GetValue$3S(e,"tl",void 0),t,i),s.tr=GetRadius(GetValue$3S(e,"tr",void 0),t,i),s.bl=GetRadius(GetValue$3S(e,"bl",void 0),t,i),s.br=GetRadius(GetValue$3S(e,"br",void 0),t,i)}get radiusTL(){var e=this.cornerRadius.tl;return Math.max(e.x,e.y)}set radiusTL(e){SetRadius(this.cornerRadius.tl,e)}get radiusTR(){var e=this.cornerRadius.tr;return Math.max(e.x,e.y)}set radiusTR(e){SetRadius(this.cornerRadius.tr,e)}get radiusBL(){var e=this.cornerRadius.bl;return Math.max(e.x,e.y)}set radiusBL(e){SetRadius(this.cornerRadius.bl,e)}get radiusBR(){var e=this.cornerRadius.br;return Math.max(e.x,e.y)}set radiusBR(e){SetRadius(this.cornerRadius.br,e)}};var GetRadius=function(e,t,i){return void 0===e?e={x:t,y:i}:"number"==typeof e&&(e={x:e,y:e}),SetConvex(e),e},SetRadius=function(e,t){"number"==typeof t?(e.x=t,e.y=t):(e.x=GetValue$3S(t,"x",0),e.y=GetValue$3S(t,"y",0)),SetConvex(e)},SetConvex=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},IsArcCorner$1=function(e){return e.x>0&&e.y>0},LineTo=function(e,t,i){var s=i.length;if(s>=2){var n=i[s-2],a=i[s-1];if(e===n&&t===a)return i}return i.push(e,t),i};const DegToRad$i=Phaser.Math.DegToRad;var ArcTo$1=function(e,t,i,s,n,a,r,o,l){r&&a>n?a-=360:!r&&a<n&&(a+=360);var h=DegToRad$i(a-n)/o;n=DegToRad$i(n);for(var d=0;d<=o;d++){var c=n+h*d,u=e+i*Math.cos(c),p=t+s*Math.sin(c);LineTo(u,p,l)}return l};const IsPlainObject$S=Phaser.Utils.Objects.IsPlainObject,GetValue$3R=Phaser.Utils.Objects.GetValue,Earcut$2=Phaser.Geom.Polygon.Earcut;let RoundRectangle$2=class extends PolygnBase{constructor(e,t,i,s,n,a,r,o){var l,h,d,c;if(IsPlainObject$S(t)){var u=t;t=u.x,i=u.y,s=u.width,n=u.height,a=u.radius,r=u.color,o=u.alpha,l=u.strokeColor,h=u.strokeAlpha,d=u.strokeWidth,c=u.shape}void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=s),void 0===a&&(a=0),void 0===c&&(c=0);var p=new RoundRectangle$3;if(super(e,"rexRoundRectangleShape",p),this.setShapeType(c),0===this.shapeType){var g=GetValue$3R(a,"radius",a);p.setTo(0,0,s,n,g)}else g={x:s/2,y:n/2},p.setTo(0,0,s,n,g);this.setIteration(GetValue$3R(a,"iteration",void 0)),this.setPosition(t,i),this.setFillStyle(r,o),void 0===d&&(d=2),this.setStrokeStyle(d,l,h),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var e=this.geom,t=this.pathData;t.length=0;var i,s=e.width,n=e.height,a=e.cornerRadius,r=this.iteration+1;if(i=a.tl,IsArcCorner$1(i))if(i.convex){var o=i.x,l=i.y;ArcTo$1(o,l,i.x,i.y,180,270,!1,r,t)}else ArcTo$1(o=0,l=0,i.x,i.y,90,0,!0,r,t);else LineTo(0,0,t);return i=a.tr,IsArcCorner$1(i)?i.convex?(o=s-i.x,l=i.y,ArcTo$1(o,l,i.x,i.y,270,360,!1,r,t)):ArcTo$1(o=s,l=0,i.x,i.y,180,90,!0,r,t):LineTo(s,0,t),i=a.br,IsArcCorner$1(i)?i.convex?(o=s-i.x,l=n-i.y,ArcTo$1(o,l,i.x,i.y,0,90,!1,r,t)):ArcTo$1(o=s,l=n,i.x,i.y,270,180,!0,r,t):LineTo(s,n,t),i=a.bl,IsArcCorner$1(i)?i.convex?(o=i.x,l=n-i.y,ArcTo$1(o,l,i.x,i.y,90,180,!1,r,t)):ArcTo$1(o=0,l=n,i.x,i.y,360,270,!0,r,t):LineTo(0,n,t),t.push(t[0],t[1]),this.pathIndexes=Earcut$2(t),this}setShapeType(e){return"string"==typeof e&&(e=ShapeTypeMap[e]),this.shapeType=e,this}setSize(e,t){return void 0===t&&(t=e),this.geom.width===e&&this.geom.height===t||(this.geom.setSize(e,t),1===this.shapeType&&this.setRadius({x:e/2,y:t/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(e,t)),this}get radius(){return this.geom.radius}set radius(e){this.geom.setRadius(e),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(e){this.geom.radiusTL=e,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(e){this.geom.radiusTR=e,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(e){this.geom.radiusBL=e,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(e){this.geom.radiusBR=e,this.dirty=!0}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}setRadiusTL(e){return void 0===e&&(e=0),this.radiusTL=e,this}setRadiusTR(e){return void 0===e&&(e=0),this.radiusTR=e,this}setRadiusBL(e){return void 0===e&&(e=0),this.radiusBL=e,this}setRadiusBR(e){return void 0===e&&(e=0),this.radiusBR=e,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(e){this.radius=e}setCornerRadius(e){return this.setRadius(e)}get iteration(){return this._iteration}set iteration(e){void 0!==this._iteration?this._iteration!==e&&(this._iteration=e,this.dirty=!0):this._iteration=e}setIteration(e){return void 0===e&&(e=6),this.iteration=e,this}};const ShapeTypeMap={rectangle:0,circle:1};ObjectFactory.register("roundRectangle",(function(e,t,i,s,n,a,r){var o=new RoundRectangle$2(this.scene,e,t,i,s,n,a,r);return this.scene.add.existing(o),o})),SetValue(window,"RexPlugins.UI.RoundRectangle",RoundRectangle$2);const Utils$2=Phaser.Renderer.WebGL.Utils;var WebGLRenderer$2=function(e,t,i,s){if(t.dirty&&(t.updateTexture(),t.dirty=!1),0!==t.width&&0!==t.height){i.addToRenderList(t);var n=t.frame,a=n.width,r=n.height,o=Utils$2.getTintAppendFloatAlpha,l=e.pipelines.set(t.pipeline,t),h=l.setTexture2D(n.glTexture,t);e.pipelines.preBatch(t),l.batchTexture(t,n.glTexture,a,r,t.x,t.y,a/t.resolution,r/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,r,o(t.tintTopLeft,i.alpha*t._alphaTL),o(t.tintTopRight,i.alpha*t._alphaTR),o(t.tintBottomLeft,i.alpha*t._alphaBL),o(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,s,!1,h),e.pipelines.postBatch(t)}},CanvasRenderer$2=function(e,t,i,s){t.dirty&&(t.updateTexture(),t.dirty=!1),0!==t.width&&0!==t.height&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,s))};const Render$2={renderWebGL:WebGLRenderer$2,renderCanvas:CanvasRenderer$2},Color$5=Phaser.Display.Color,CanvasMethods={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,i,s,n,a,r,o,l,h){var d=this.scene.sys.textures.getFrame(e,t);if(!d)return this;var c=d.cutWidth,u=d.cutHeight;void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=c),void 0===a&&(a=u),void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=c),void 0===h&&(h=u);var p=d.cutX+r,g=d.cutY+o;return this.context.drawImage(d.source.image,p,g,l,h,i,s,n,a),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,i){void 0===i&&(i=new Color$5);var s=this.context.getImageData(e,t,1,1);return i.setTo(s.data[0],s.data[1],s.data[2],s.data[3]),i},setPixel(e,t,i,s,n,a){if("number"!=typeof i){var r=i;i=r.red,s=r.green,n=r.blue,a=r.alpha}void 0===a&&(a=0!==i||0!==s||0!==n?255:0);var o=this.context.createImageData(1,1);return o.data[0]=i,o.data[1]=s,o.data[2]=n,o.data[3]=a,this.context.putImageData(o,e,t),this.dirty=!0,this}};var CopyCanvasToTexture=function(e,t,i,s,n,a,r){var o,l=e.sys.textures,h=e.renderer;void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=t.width),void 0===r&&(r=t.height);var d=(o=l.exists(i)?l.get(i):l.createCanvas(i,a,r)).getSourceImage();d.width!==a&&(d.width=a),d.height!==r&&(d.height=r);var c=d.getContext("2d",{willReadFrequently:!0});c.clearRect(0,0,a,r),c.drawImage(t,s,n,a,r),h.gl&&o&&h.canvasToTexture(d,o.source[0].glTexture,!0,0)};const TextureMethods={updateTexture(e,t){if(e){var i=this.resolution;1!==i&&(this.context.save(),this.context.scale(i,i)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),1!==i&&this.context.restore()}this.canvas.width===this.frame.width&&this.canvas.height===this.frame.height||this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(e,t,i,s,n){var a=this.canvas;return void 0===s?s=a.width:s*=this.resolution,void 0===n?n=a.height:n*=this.resolution,CopyCanvasToTexture(this.scene,a,e,t,i,s,n),this},loadTexture(e,t){var i=this.scene.sys.textures.getFrame(e,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};CheckP3Version();const CanvasPool$4=Phaser.Display.Canvas.CanvasPool,GameObject$3=Phaser.GameObjects.GameObject,UUID$5=Phaser.Utils.String.UUID;let Canvas$1=class extends GameObject$3{constructor(e,t,i,s,n,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=1),void 0===a&&(a=1),super(e,"rexCanvas"),this.renderer=e.sys.game.renderer,this._width=s,this._height=n,this.resolution=a,s=Math.max(Math.ceil(s*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=CanvasPool$4.create(this,s,n),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(t,i),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=UUID$5(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){CanvasPool$4.remove(this.canvas),this.canvas=null,this.context=null;var e=this.texture;e&&e.destroy()}setResolution(e){if(this.resolution===e)return this;this.resolution=e;var t=Math.max(Math.ceil(this.width*e),1),i=Math.max(Math.ceil(this.height*e),1);return this.canvas.width=t,this.canvas.height=i,this.frame.source.resolution=e,this.dirty=!0,this}get width(){return this._width}set width(e){this.setSize(e,this._height)}get height(){return this._height}set height(e){this.setSize(this._width,e)}setCanvasSize(e,t){return this._width===e&&this._height===t||(this._width=e,this._height=t,this.updateDisplayOrigin(),e=Math.max(Math.ceil(e*this.resolution),1),t=Math.max(Math.ceil(t*this.resolution),1),this.canvas.width=e,this.canvas.height=t,this.frame.setSize(e,t),this.dirty=!0),this}setSize(e,t){return this.setCanvasSize(e,t),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(e){this.scaleX=e/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(e){this.scaleY=e/this._height}setDisplaySize(e,t){return this.displayWidth=e,this.displayHeight=t,this}getCanvas(e){return e||(this.dirty=!0),this.canvas}getContext(e){return e||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(e,t){return this.setSize(e,t),this}};const Components$3=Phaser.GameObjects.Components;Phaser.Class.mixin(Canvas$1,[Components$3.Alpha,Components$3.BlendMode,Components$3.Crop,Components$3.Depth,Components$3.Flip,Components$3.GetBounds,Components$3.Mask,Components$3.Origin,Components$3.Pipeline,Components$3.PostPipeline,Components$3.ScrollFactor,Components$3.Tint,Components$3.Transform,Components$3.Visible,Render$2,CanvasMethods,TextureMethods]);const Pad$1=Phaser.Utils.String.Pad;var GetStyle=function(e,t,i){if(null==e)return e;switch(typeof e){case"string":default:return e;case"number":return`#${Pad$1(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e}};const DegToRad$h=Phaser.Math.DegToRad;var AddRoundRectanglePath=function(e,t,i,s,n,a,r){var o,l,h,d,c,u=new RoundRectangle$3(t,i,s,n,a),p=u.minWidth,g=u.minHeight,m=s>=p?1:s/p,f=n>=g?1:n/g,v=u.cornerRadius;e.save(),e.beginPath(),e.translate(t,i),o=v.tl,IsArcCorner(o)?(l=o.x*m,h=o.y*f,IsConvexArc(o)?ArcTo(e,l,h,l,h,180,270,!1,r):ArcTo(e,0,0,l,h,90,0,!0,r),d=0,c=h):(e.lineTo(0,0),d=0,c=0),o=v.tr,IsArcCorner(o)?(l=o.x*m,h=o.y*f,IsConvexArc(o)?ArcTo(e,s-l,h,l,h,270,360,!1,r):ArcTo(e,s,0,l,h,180,90,!0,r)):e.lineTo(s,0),o=v.br,IsArcCorner(o)?(l=o.x*m,h=o.y*f,IsConvexArc(o)?ArcTo(e,s-l,n-h,l,h,0,90,!1,r):ArcTo(e,s,n,l,h,270,180,!0,r)):e.lineTo(s,n),o=v.bl,IsArcCorner(o)?(l=o.x*m,h=o.y*f,IsConvexArc(o)?ArcTo(e,l,n-h,l,h,90,180,!1,r):ArcTo(e,0,n,l,h,360,270,!0,r)):e.lineTo(0,n),e.lineTo(d,c),e.closePath(),e.restore()},IsConvexArc=function(e){return!e.hasOwnProperty("convex")||e.convex},IsArcCorner=function(e){return e.x>0&&e.y>0},ArcTo=function(e,t,i,s,n,a,r,o,l){if(o&&r>a?r-=360:!o&&r<a&&(r+=360),a=DegToRad$h(a),r=DegToRad$h(r),null==l)e.ellipse(t,i,s,n,0,a,r,o);else for(var h,d,c,u=(r-a)/(l+=1),p=0;p<=l;p++)c=a+u*p,h=t+s*Math.cos(c),d=i+n*Math.sin(c),e.lineTo(h,d)},DrawRoundRectangle=function(e,t,i,s,n,a,r,o,l,h,d,c,u){var p;(AddRoundRectanglePath(t,i,s,n,a,r,u),null!=o)&&(null!=d&&((p=c?t.createLinearGradient(0,0,n,0):t.createLinearGradient(0,0,0,a)).addColorStop(0,o),p.addColorStop(1,d),o=p),t.fillStyle=o,t.fill());null!=l&&h>0&&(t.strokeStyle=l,t.lineWidth=h,t.stroke())},DrawRoundRectangleBackground=function(e,t,i,s,n,a,r,o){if(null!=t||null!=i){var l=e.canvas.width,h=e.canvas.height;null==i&&(s=0);var d=s/2;l=Math.max(1,l-s),h=Math.max(1,h-s),DrawRoundRectangle(e.canvas,e.context,d,d,l,h,n,t,i,s,a,r,o)}},DrawContent$2=function(){DrawRoundRectangleBackground(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const GetValue$3Q=Phaser.Utils.Objects.GetValue;let RoundRectangle$1=class extends Canvas$1{constructor(e,t,i,s,n,a,r,o,l,h,d,c){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=s),void 0===a&&(a=0),void 0===c&&(c=1),super(e,t,i,s,n,c),this.type="rexRoundRectangleCanvas";var u=GetValue$3Q(a,"radius",a),p=GetValue$3Q(a,"iteration",void 0);this.setRadius(u),this.setIteration(p),this.setFillStyle(r,h,d),this.setStrokeStyle(o,l)}get radius(){return this._radius}set radius(e){this.dirty|=this._radius!=e,this._radius=e}setRadius(e){return this.radius=e,this}get iteration(){return this._iteration}set iteration(e){this.dirty|=this._iteration!=e,this._iteration=e}setIteration(e){return this.iteration=e,this}get fillStyle(){return this._fillStyle}set fillStyle(e){e=GetStyle(e,this.canvas,this.context),this.dirty|=this._fillStyle!=e,this._fillStyle=e}get fillColor2(){return this._fillColor2}set fillColor2(e){e=GetStyle(e,this.canvas,this.context),this.dirty|=this._fillColor2!=e,this._fillColor2=e}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(e){this.dirty|=this._isHorizontalGradient!=e,this._isHorizontalGradient=e}setFillStyle(e,t,i){return void 0===i&&(i=!0),this.fillStyle=e,this.fillColor2=t,this.isHorizontalGradient=i,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){e=GetStyle(e,this.canvas,this.context),this.dirty|=this._strokeStyle!=e,this._strokeStyle=e}get lineWidth(){return this._lineWidth}set lineWidth(e){this.dirty|=this._lineWidth!=e,this._lineWidth=e}setStrokeStyle(e,t){return this.strokeStyle=e,this.lineWidth=t,this}updateTexture(){return super.updateTexture((function(){this.clear(),DrawContent$2.call(this)}),this),this}};ObjectFactory.register("roundRectangleCanvas",(function(e,t,i,s,n,a,r,o,l,h){var d=new RoundRectangle$1(this.scene,e,t,i,s,n,a,r,o,l,h);return this.scene.add.existing(d),d})),SetValue(window,"RexPlugins.UI.RoundRectangleCanvas",RoundRectangle$1);var HasProperty=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},InjectPointAccessProperties=function(e,t,i){t&&!HasProperty(e,`${t}X`)&&(Object.defineProperty(e,`${t}X`,{get:function(){return i.x},set:function(t){i.x=t,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return i.y},set:function(t){i.y=t,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return i.t},set:function(t){i.t=t,e.dirty=!0}}))};const PointMethods={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,i,s){var n=this.geom.topSidePoints;if(Array.isArray(e))for(var a,r=0,o=(n=e).length;r<o;r++)a=n[r],this.geom.insertTopSidePoint(a.t,a.x,a.y),InjectPointAccessProperties(this,a.key,n[n.length-1]);else this.geom.insertTopSidePoint(e,t,i),InjectPointAccessProperties(this,s,n[n.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,i,s){var n=this.geom.rightSidePoints;if(Array.isArray(e))for(var a,r=0,o=(n=e).length;r<o;r++)a=n[r],this.geom.insertRightSidePoint(a.t,a.x,a.y),InjectPointAccessProperties(this,a.key,n[n.length-1]);else this.geom.insertRightSidePoint(e,t,i),InjectPointAccessProperties(this,s,n[n.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,i,s){var n=this.geom.bottomSidePoints;if(Array.isArray(e))for(var a,r=0,o=(n=e).length;r<o;r++)a=n[r],this.geom.insertBottomSidePoint(a.t,a.x,a.y),InjectPointAccessProperties(this,a.key,n[n.length-1]);else this.geom.insertBottomSidePoint(e,t,i),InjectPointAccessProperties(this,s,n[n.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,i,s){var n=this.geom.leftSidePoints;if(Array.isArray(e))for(var a,r=0,o=(n=e).length;r<o;r++)a=n[r],this.geom.insertLeftSidePoint(a.t,a.x,a.y),InjectPointAccessProperties(this,a.key,n[n.length-1]);else this.geom.insertLeftSidePoint(e,t,i),InjectPointAccessProperties(this,s,n[n.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class QuadGeom{constructor(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=0),void 0===s&&(s=0),this.setTo(e,t,i,s),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(e,t,i,s){return this.setPosition(e,t),this.setSize(i,s),this}setPosition(e,t){return this.x=e,this.y=t,this}setSize(e,t){return this.width=e,this.height=t,this}setTLPosition(e,t){return this.tlx=e,this.tly=t,this}setTRPosition(e,t){return this.trx=e,this.try=t,this}setBLPosition(e,t){return this.blx=e,this.bly=t,this}setBRPosition(e,t){return this.brx=e,this.bry=t,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(e,t,i){return AddPoint(this.topSidePoints,e,t,i),this}insertRightSidePoint(e,t,i){return AddPoint(this.rightSidePoints,e,t,i),this}insertBottomSidePoint(e,t,i){return AddPoint(this.bottomSidePoints,e,t,i),this}insertLeftSidePoint(e,t,i){return AddPoint(this.leftSidePoints,e,t,i),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var AddPoint=function(e,t,i,s){if("number"!=typeof t){var n=t;t=n.t,i=n.x,s=n.y}e.push({t:t,x:i,y:s})};const IsPlainObject$R=Phaser.Utils.Objects.IsPlainObject,GetValue$3P=Phaser.Utils.Objects.GetValue,Linear$q=Phaser.Math.Linear,Earcut$1=Phaser.Geom.Polygon.Earcut;class Quad extends PolygnBase{constructor(e,t,i,s,n,a,r){var o,l,h;if(IsPlainObject$R(t)){var d=t;t=d.x,i=d.y,s=d.width,n=d.height,a=d.color,r=d.alpha,o=d.strokeColor,l=d.strokeAlpha,h=d.strokeWidth}void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=s);var c=new QuadGeom;super(e,"rexQuadShape",c),c.setTo(0,0,s,n),this.setPosition(t,i),this.setFillStyle(a,r),void 0!==o&&void 0===h&&(h=2),this.setStrokeStyle(h,o,l),this.setTLPosition(GetValue$3P(d,"tlx",0),GetValue$3P(d,"tly",0)).setTRPosition(GetValue$3P(d,"trx",0),GetValue$3P(d,"try",0)).setBLPosition(GetValue$3P(d,"blx",0),GetValue$3P(d,"bly",0)).setBRPosition(GetValue$3P(d,"brx",0),GetValue$3P(d,"bry",0));var u=GetValue$3P(d,"leftSidePoints");u&&this.insertLeftSidePoint(u);var p=GetValue$3P(d,"topSidePoints");p&&this.insertTopSidePoint(p);var g=GetValue$3P(d,"rightSidePoints");g&&this.insertRightSidePoint(g);var m=GetValue$3P(d,"bottomSidePoints");m&&this.insertBottomSidePoint(m),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var e=this.geom,t=this.pathData;t.length=0;var i=e.width,s=e.height,n=0+e.tlx,a=0+e.tly,r=i+e.trx,o=0+e.try,l=i+e.brx,h=s+e.bry,d=0+e.blx,c=s+e.bly,u=e.topSidePoints,p=e.rightSidePoints,g=e.bottomSidePoints,m=e.leftSidePoints;LineTo(n,a,t),SortPoints(u);for(var f=0,v=u.length;f<v;f++){var b=u[f],y=Linear$q(n,r,b.t)+b.x,C=Linear$q(a,o,b.t)+b.y;LineTo(y,C,t)}for(LineTo(r,o,t),SortPoints(p),f=0,v=p.length;f<v;f++)b=p[f],y=Linear$q(r,l,b.t)+b.x,C=Linear$q(o,h,b.t)+b.y,LineTo(y,C,t);for(LineTo(l,h,t),SortPoints(g),f=g.length-1;f>=0;f--)b=g[f],y=Linear$q(d,l,b.t)+b.x,C=Linear$q(c,h,b.t)+b.y,LineTo(y,C,t);for(LineTo(d,c,t),SortPoints(m),f=m.length-1;f>=0;f--)b=m[f],y=Linear$q(n,d,b.t)+b.x,C=Linear$q(a,c,b.t)+b.y,LineTo(y,C,t);return t.push(t[0],t[1]),this.pathIndexes=Earcut$1(t),this}get tlx(){return this.geom.tlx}set tlx(e){this.geom.tlx=e,this.dirty=!0}get tly(){return this.geom.tly}set tly(e){this.geom.tly=e,this.dirty=!0}get trx(){return this.geom.trx}set trx(e){this.geom.trx=e,this.dirty=!0}get try(){return this.geom.try}set try(e){this.geom.try=e,this.dirty=!0}get blx(){return this.geom.blx}set blx(e){this.geom.blx=e,this.dirty=!0}get bly(){return this.geom.bly}set bly(e){this.geom.bly=e,this.dirty=!0}get brx(){return this.geom.brx}set brx(e){this.geom.brx=e,this.dirty=!0}get bry(){return this.geom.bry}set bry(e){this.geom.bry=e,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}var SortPoints=function(e){e.length<=1||e.sort((function(e,t){return e.t-t.t}))};Object.assign(Quad.prototype,PointMethods),ObjectFactory.register("QuadShape",(function(e,t,i,s,n,a){var r=new Quad(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.QuadShape",Quad);var Utils$1=Phaser.Renderer.WebGL.Utils,WebGLRenderer$1=function(e,t,i,s){if(0!==t.width&&0!==t.height){i.addToRenderList(t);var n=t.frame,a=n.width,r=n.height,o=Utils$1.getTintAppendFloatAlpha,l=e.pipelines.set(t.pipeline,t),h=l.setTexture2D(n.glTexture,t);e.pipelines.preBatch(t),l.batchTexture(t,n.glTexture,a,r,t.x,t.y,a/t.style.resolution,r/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,r,o(t.tintTopLeft,i.alpha*t._alphaTL),o(t.tintTopRight,i.alpha*t._alphaTR),o(t.tintBottomLeft,i.alpha*t._alphaBL),o(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,s,!1,h),e.pipelines.postBatch(t)}},CanvasRenderer$1=function(e,t,i,s){0!==t.width&&0!==t.height&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,s))};const Render$1={renderWebGL:WebGLRenderer$1,renderCanvas:CanvasRenderer$1},CanvasPool$3=Phaser.Display.Canvas.CanvasPool;var MeasureTextMargins=function(e,t,i){void 0===i&&(i={});var s=CanvasPool$3.create(this),n=s.getContext("2d",{willReadFrequently:!0});e.syncFont(s,n);var a=n.measureText(t),r=Math.ceil(a.width*e.baselineX),o=r,l=2*o;if(o=o*e.baselineY|0,s.width=r,s.height=l,n.fillStyle="#f00",n.fillRect(0,0,r,l),n.font=e._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(e.testString,0,o),i.left=0,0===r||0===l||!n.getImageData(0,0,r,l))return CanvasPool$3.remove(s),i;for(var h=n.getImageData(0,0,r,l).data,d=!1,c=0;c<r;c++){for(var u=0;u<l;u++)if(255!==h[4*(u*r+c)]){i.left=c,d=!0;break}if(d)break}return CanvasPool$3.remove(s),i};CheckP3Version();const GameObject$2=Phaser.GameObjects.GameObject;class TextBase extends GameObject$2{setStyle(e){return this.style.setStyle(e)}setFont(e){return this.style.setFont(e)}setFontFamily(e){return this.style.setFontFamily(e)}setFontSize(e){return this.style.setFontSize(e)}setFontStyle(e){return this.style.setFontStyle(e)}setTestString(e){return this.style.setTestString(e)}setFixedSize(e,t){return this.style.setFixedSize(e,t)}setBackgroundColor(e,t,i){return this.style.setBackgroundColor(e,t,i)}setBackgroundStrokeColor(e,t){return this.style.setBackgroundStrokeColor(e,t)}setBackgroundCornerRadius(e,t){return this.style.setBackgroundCornerRadius(e,t)}setFill(e){return this.style.setFill(e)}setColor(e){return this.style.setColor(e)}setStroke(e,t){return this.style.setStroke(e,t)}setShadow(e,t,i,s,n,a){return this.style.setShadow(e,t,i,s,n,a)}setShadowOffset(e,t){return this.style.setShadowOffset(e,t)}setShadowColor(e){return this.style.setShadowColor(e)}setShadowBlur(e){return this.style.setShadowBlur(e)}setShadowStroke(e){return this.style.setShadowStroke(e)}setShadowFill(e){return this.style.setShadowFill(e)}setUnderline(e,t,i){return this.style.setUnderline(e,t,i)}setUnderlineColor(e){return this.style.setUnderlineColor(e)}setUnderlineThickness(e){return this.style.setUnderlineThickness(e)}setUnderlineOffset(e){return this.style.setUnderlineOffset(e)}setStrikethrough(e,t,i){return this.style.setStrikethrough(e,t,i)}setStrikethroughColor(e){return this.style.setStrikethroughColor(e)}setStrikethroughThickness(e){return this.style.setStrikethroughThickness(e)}setStrikethroughOffset(e){return this.style.setStrikethroughOffset(e)}setWrapMode(e){return this.style.setWrapMode(e)}setWrapWidth(e){return this.style.setWrapWidth(e)}setWordWrapWidth(e){return this.style.setWrapWidth(e)}setAlign(e){return this.style.setHAlign(e)}setHAlign(e){return this.style.setHAlign(e)}setVAlign(e){return this.style.setVAlign(e)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(e){this.style.lineSpacing=e}setLineSpacing(e){return this.style.lineSpacing=e,this.updateText(!0),this}setXOffset(e){return this.style.setXOffset(e)}setMaxLines(e){return this.style.setMaxLines(e)}setResolution(e){return this.style.setResolution(e)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(e,t){return this.style.setTextMetrics(e,t)}measureTextMargins(e,t){return MeasureTextMargins(this.style,e,t)}}const Components$2=Phaser.GameObjects.Components;Phaser.Class.mixin(TextBase,[Components$2.Alpha,Components$2.BlendMode,Components$2.ComputedSize,Components$2.Crop,Components$2.Depth,Components$2.Flip,Components$2.GetBounds,Components$2.Mask,Components$2.Origin,Components$2.Pipeline,Components$2.PostPipeline,Components$2.ScrollFactor,Components$2.Tint,Components$2.Transform,Components$2.Visible,Render$1]);var PropertyMap={backgroundColor:["backgroundColor",null,GetStyle],backgroundColor2:["backgroundColor2",null,GetStyle],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,GetStyle],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",GetStyle],stroke:["stroke","#fff",GetStyle],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",GetStyle],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",GetStyle],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",GetStyle],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};const CanvasPool$2=Phaser.Display.Canvas.CanvasPool;var MeasureText=function(e){var t=CanvasPool$2.create(this),i=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,i);var s=i.measureText(e.testString);if("actualBoundingBoxAscent"in s){var n=s.actualBoundingBoxAscent,a=s.actualBoundingBoxDescent,r={ascent:n,descent:a,fontSize:n+a};return CanvasPool$2.remove(t),r}var o=Math.ceil(s.width*e.baselineX),l=o,h=2*l;if(l=l*e.baselineY|0,t.width=o,t.height=h,i.fillStyle="#f00",i.fillRect(0,0,o,h),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,l),r={ascent:0,descent:0,fontSize:0},!i.getImageData(0,0,o,h))return r.ascent=l,r.descent=l+6,r.fontSize=r.ascent+r.descent,CanvasPool$2.remove(t),r;var d,c,u=i.getImageData(0,0,o,h).data,p=u.length,g=4*o,m=0,f=!1;for(d=0;d<l;d++){for(c=0;c<g;c+=4)if(255!==u[m+c]){f=!0;break}if(f)break;m+=g}for(r.ascent=l-d,m=p-g,f=!1,d=h;d>l;d--){for(c=0;c<g;c+=4)if(255!==u[m+c]){f=!0;break}if(f)break;m-=g}return r.descent=d-l,r.fontSize=r.ascent+r.descent,CanvasPool$2.remove(t),r},CONST={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};const WRAPMODE$1={none:CONST.NO_WRAP,word:CONST.WORD_WRAP,char:CONST.CHAR_WRAP,character:CONST.CHAR_WRAP,mix:CONST.MIX_WRAP},GetAdvancedValue$7=Phaser.Utils.Objects.GetAdvancedValue,GetValue$3O=Phaser.Utils.Objects.GetValue;let TextStyle$1=class{constructor(e,t,i){this.parent=e,void 0===i&&(i=PropertyMap),this.propertyMap=i,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(t,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==CONST.NO_WRAP&&0===this.wrapWidth}setStyle(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!1),e&&e.hasOwnProperty("wordWrap")){var s=e.wordWrap;s.hasOwnProperty("width")&&(e.wrap={mode:"word",width:s.width})}if(e&&e.hasOwnProperty("wrap")){var n=e.wrap;if(n.hasOwnProperty("mode")){var a=n.mode;"string"==typeof a&&(n.mode=WRAPMODE$1[a])}else n.hasOwnProperty("width")&&(n.mode=1)}e&&e.rtl&&i&&!e.hasOwnProperty("halign")&&(e.halign="right"),e&&e.hasOwnProperty("fontSize")&&"number"==typeof e.fontSize&&(e.fontSize=e.fontSize.toString()+"px");var r=this.propertyMap;for(var o in r){var l=r[o],h=l[0],d=i?l[1]:this[o],c=l[2];if("wrapCallback"===o||"wrapCallbackScope"===o)this[o]=GetValue$3O(e,h,d);else{var u=GetAdvancedValue$7(e,h,d);c&&(u=c(u)),this[o]=u}}var p=GetValue$3O(e,"font",null);this._font=null===p?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:p;var g=GetValue$3O(e,"fill",null);null!==g&&(this.color=GetStyle(g));var m=GetValue$3O(e,"metrics",!1);return m?this.metrics={ascent:GetValue$3O(m,"ascent",0),descent:GetValue$3O(m,"descent",0),fontSize:GetValue$3O(m,"fontSize",0)}:!t&&this.metrics||(this.metrics=MeasureText(this)),t?this.parent.updateText():this.parent}syncFont(e,t){t.font=this._font}syncStyle(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"}syncShadow(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)}update(e){return e&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=MeasureText(this)),this.parent.updateText(e)}buildFont(){var e=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return e!==this._font&&(this._font=e),this}setFont(e){return"string"==typeof e?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=GetValue$3O(e,"fontFamily","Courier"),this.fontSize=GetValue$3O(e,"fontSize","16px"),this.fontStyle=GetValue$3O(e,"fontStyle","")),this.update(!0)}setFontFamily(e){return this.fontFamily=e,this.update(!0)}setFontStyle(e){return this.fontStyle=e,this.update(!0)}setFontSize(e){return"number"==typeof e&&(e=e.toString()+"px"),this.fontSize=e,this.update(!0)}setTestString(e){return this.testString=e,this.update(!0)}setFixedSize(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(this.isWrapFitMode)}setResolution(e){return this.resolution=e,this.update(!1)}setXOffset(e){return this.xOffset=e,this.update(!1)}setBackgroundColor(e,t,i){return void 0===i&&(i=!0),this.backgroundColor=GetStyle(e,this.parent.canvas,this.parent.context),this.backgroundColor2=GetStyle(t,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=i,this.update(!1)}setBackgroundStrokeColor(e,t){return this.backgroundStrokeColor=GetStyle(e,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=t,this.update(!1)}setBackgroundCornerRadius(e,t){return this.backgroundCornerRadius=e,this.backgroundCornerIteration=t,this.update(!1)}setFill(e){return this.color=GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setColor(e){return this.color=GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(e,t){return void 0===e?this.strokeThickness=0:(void 0===t&&(t=this.strokeThickness),this.stroke=GetStyle(e,this.parent.canvas,this.parent.context),this.strokeThickness=t),this.update(!0)}setShadow(e,t,i,s,n,a){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="#000"),void 0===s&&(s=0),void 0===n&&(n=!1),void 0===a&&(a=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=GetStyle(i,this.parent.canvas,this.parent.context),this.shadowBlur=s,this.shadowStroke=n,this.shadowFill=a,this.update(!1)}setShadowOffset(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)}setShadowColor(e){return void 0===e&&(e="#000"),this.shadowColor=GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(e){return void 0===e&&(e=0),this.shadowBlur=e,this.update(!1)}setShadowStroke(e){return this.shadowStroke=e,this.update(!1)}setShadowFill(e){return this.shadowFill=e,this.update(!1)}setUnderline(e,t,i){return void 0===e&&(e="#000"),void 0===t&&(t=0),void 0===i&&(i=0),this.underlineColor=GetStyle(e,this.parent.canvas,this.parent.context),this.underlineThickness=t,this.underlineOffset=i,this.update(!1)}setUnderlineColor(e){return void 0===e&&(e="#000"),this.underlineColor=GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(e){return void 0===e&&(e=0),this.underlineThickness=e,this.update(!1)}setUnderlineOffset(e){return void 0===e&&(e=0),this.underlineOffset=e,this.update(!1)}setStrikethrough(e,t,i){return void 0===e&&(e="#000"),void 0===t&&(t=0),void 0===i&&(i=0),this.strikethroughColor=GetStyle(e,this.parent.canvas,this.parent.context),this.strikethroughThickness=t,this.strikethroughOffset=i,this.update(!1)}setStrikethroughColor(e){return void 0===e&&(e="#000"),this.strikethroughColor=GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(e){return void 0===e&&(e=0),this.strikethroughThickness=e,this.update(!1)}setStrikethroughOffset(e){return void 0===e&&(e=0),this.strikethroughOffset=e,this.update(!1)}setWrapMode(e){return"string"==typeof e&&(e=WRAPMODE$1[e.toLowerCase()]||0),this.wrapMode=e,this.update(!0)}setWrapWidth(e){return this.wrapWidth=e,this.update(!1)}setAlign(e,t){return void 0===e&&(e="left"),void 0===t&&(t="top"),this.halign=e,this.valign=t,this.update(!1)}setHAlign(e){return void 0===e&&(e="left"),this.halign=e,this.update(!1)}setVAlign(e){return void 0===e&&(e="top"),this.valign=e,this.update(!1)}setMaxLines(e){return void 0===e&&(e=0),this.maxLines=e,this.update(!1)}getTextMetrics(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}}setTextMetrics(e,t){return this.metrics.ascent=e.ascent,this.metrics.descent=e.descent,this.metrics.fontSize=e.fontSize,t&&("string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=GetValue$3O(t,"fontFamily",this.fontFamily),this.fontSize=GetValue$3O(t,"fontSize",this.fontSize),this.fontStyle=GetValue$3O(t,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var e={},t=this.propertyMap;for(var i in t)e[i]=this[i];return e.metrics=this.getTextMetrics(),e}destroy(){this.parent=void 0}};var GetString=function(e){return null==e?e="":Array.isArray(e)?e=e.join("\n"):"number"==typeof e&&(e=e.toString()),e};const DrawMethods={draw(e,t,i,s){var n=this.penManager;this.hitAreaManager.clear();var a=this.context;a.save();var r=this.defaultStyle;this.clear(),DrawRoundRectangleBackground(this,r.backgroundColor,r.backgroundStrokeColor,r.backgroundStrokeLineWidth,r.backgroundCornerRadius,r.backgroundColor2,r.backgroundHorizontalGradient,r.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var o,l,h,d,c,u,p=r.halign,g=r.valign,m=r.lineHeight,f=n.lines,v=f.length,b=r.maxLines;b>0&&v>b?(l=b,h="center"===g?Math.floor((v-l)/2):"bottom"===g?v-l:0):(l=v,h=0),d=h+l;var y=this.rtl,C=y?this.parent.width:void 0;u="center"===g?Math.max((s-l*m)/2,0):"bottom"===g?Math.max(s-l*m-2,0):0,u+=t;for(var x=h;x<d;x++)if(0!==(o=n.getLineWidth(x))){for(var S=f[x],w=S.length,T=p,P=0;P<w;P++){var _=S[P].prop.align;if(void 0!==_){T=_;break}}for(c="center"===T?(i-o)/2:"right"===T?y?0:i-o:y?i-o:0,c+=e,P=0;P<w;P++)this.drawPen(S[P],c,u,C)}a.restore()},drawPen(e,t,i,s){t+=e.x,i+=e.y+(e.prop.y||0),void 0!==s&&(t=s-t);var n=this.canvas,a=this.context;a.save();var r=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(null!==r.bgcolor&&e.width>0){var o=this.defaultStyle.metrics,l=i-o.ascent,h=o.fontSize;this.drawRectangle(t,l,e.width,h,r.bgcolor,r)}if(r.underlineThickness>0&&e.width>0){var d=i+r.underlineOffset-r.underlineThickness/2;this.drawLine(t,d,e.width,r.underlineThickness,r.underlineColor,r)}if(e.isTextPen&&(r.buildFont(),r.syncFont(n,a),r.syncStyle(n,a),this.drawText(t,i,e.text,r)),e.isImagePen&&this.drawImage(t,i,e.prop.img,e.prop.color,r),r.strikethroughThickness>0&&e.width>0&&(d=i+r.strikethroughOffset-r.strikethroughThickness/2,this.drawLine(t,d,e.width,r.strikethroughThickness,r.strikethroughColor,r)),a.restore(),e.hasAreaMarker&&e.width>0){var c,u=e.prop.area;if(u)c={key:u};else{var p=e.prop.url;c={key:`url:${p}`,url:p}}this.hitAreaManager.add(t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight,c)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,i,s,n,a){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;r.fillStyle=n,r.fillRect(e,t,i,s)},drawLine(e,t,i,s,n,a){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;a.syncShadow(r,a.shadowStroke);var o=r.lineCap;r.lineCap="butt",r.strokeStyle=n,r.lineWidth=s,r.beginPath(),r.moveTo(e,t),r.lineTo(e+i,t),r.stroke(),r.lineCap=o},drawText(e,t,i,s){this.autoRound&&(e=Math.round(e),t=Math.round(t));var n=this.context;s.stroke&&"none"!==s.stroke&&s.strokeThickness>0&&(s.syncShadow(n,s.shadowStroke),n.strokeText(i,e,t)),s.color&&"none"!==s.color&&(s.syncShadow(n,s.shadowFill),n.fillText(i,e,t))},drawImage(e,t,i,s,n){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,s,this.autoRound)}},GetValue$3N=Phaser.Utils.Objects.GetValue,NO_NEWLINE$3=CONST.NO_NEWLINE,RAW_NEWLINE$1=CONST.RAW_NEWLINE;class Pen{constructor(e){this.prop={},this.resetFromJSON(e)}resetFromJSON(e){this.text=GetValue$3N(e,"text",""),this.x=GetValue$3N(e,"x",0),this.y=GetValue$3N(e,"y",0),this.width=GetValue$3N(e,"width",0);var t=GetValue$3N(e,"prop",null);null===t&&(t={}),this.prop=t,this.newLineMode=GetValue$3N(e,"newLineMode",0),this.startIndex=GetValue$3N(e,"startIndex",0)}get plainText(){var e=this.text;return this.newLineMode===RAW_NEWLINE$1&&(e+="\n"),e}get wrapText(){var e=this.text;return this.newLineMode!==NO_NEWLINE$3&&(e+="\n"),e}get rawTextLength(){var e=this.text.length;return this.newLineMode===RAW_NEWLINE$1&&(e+=1),e}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return""!==this.text}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Clone$2=function(e,t){var i=Array.isArray(e);if(void 0===t?t=i?[]:{}:Clear$1(t),i){t.length=e.length;for(var s=0,n=e.length;s<n;s++)t[s]=e[s]}else for(var a in e)t[a]=e[a];return t};const GetFastValue$2=Phaser.Utils.Objects.GetFastValue,NO_NEWLINE$2=CONST.NO_NEWLINE,WRAPPED_NEWLINE$2=CONST.WRAPPED_NEWLINE;class PenManager{constructor(e){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=e.pensPool,this.linesPool=e.linesPool,this.tagToText=GetFastValue$2(e,"tagToText",NOOP),this.tagToTextScope=GetFastValue$2(e,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var e=0,t=this.lines.length;e<t;e++)this.lines[e].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(e,t,i,s,n,a){var r=this.pensPool.pop();return null==r&&(r=new Pen),PEN_CONFIG.text=e,PEN_CONFIG.x=t,PEN_CONFIG.y=i,PEN_CONFIG.width=s,PEN_CONFIG.prop=n,PEN_CONFIG.newLineMode=a,r.resetFromJSON(PEN_CONFIG),this.addPen(r),this}addImagePen(e,t,i,s){return this.addTextPen("",e,t,i,s,NO_NEWLINE$2),this}addNewLinePen(){var e=this.lastPen,t=e?e.lastX:0,i=e?e.y:0,s=e?Clone$2(e.prop):null;return this.addTextPen("",t,i,0,s,WRAPPED_NEWLINE$2),this}addPen(e){var t=this.lastPen;e.startIndex=null==t?0:t.endIndex,this.pens.push(e);var i=this.lastLine;null==i&&(i=this.linesPool.pop()||[],this.lines.push(i)),i.push(e),e.newLineMode!==NO_NEWLINE$2&&(i=this.linesPool.pop()||[],this.lines.push(i)),this.maxLinesWidth=void 0}clone(e){null==e&&(e=new PenManager),e.clear();for(var t=0,i=this.lines.length;t<i;t++)for(var s=this.lines[t],n=0,a=s.length;n<a;n++){var r=s[n];e.addPen(r.text,r.x,r.y,r.width,Clone$2(r.prop),r.newLineMode)}return e}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(e){if(e>=this.lines.length)return this.getLineEndIndex(e);var t=this.lines[e];return t&&t[0]?t[0].startIndex:0}getLineEndIndex(e){e>=this.lines.length&&(e=this.lines.length-1);var t,i,s=!1;for(t=e;t>=0&&!(s=null!=(i=this.lines[t])&&i.length>0);t--);return s?i[i.length-1].endIndex:0}getLineWidth(e){var t=this.lines[e];if(!t)return 0;var i=t[t.length-1];return null==i?0:i.lastX}getMaxLineWidth(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var e,t=0,i=0,s=this.lines.length;i<s;i++)(e=this.getLineWidth(i))>t&&(t=e);return this.maxLinesWidth=t,t}getLineWidths(){for(var e=[],t=0,i=this.lines.length;t<i;t++)e.push(this.getLineWidth(t));return e}get linesCount(){return this.lines.length}get plainText(){for(var e="",t=this.pens,i=0,s=t.length;i<s;i++)e+=t[i].plainText;return e}get rawTextLength(){for(var e=0,t=this.pens,i=0,s=this.pens.length;i<s;i++)e+=t[i].rawTextLength;return e}getSliceTagText(e,t,i){var s=this.lastPen;if(null==s)return"";var n=s.endIndex;void 0!==e&&0!==e||(e=-1),void 0!==t&&t!==n||(t=n+1),void 0===i&&(i=!1);for(var a,r,o,l,h,d,c="",u=0,p=this.pens.length;u<p&&((l=(a=this.pens[u]).endIndex)<=e||(a=this.pens[u],r=i?a.wrapText:a.plainText,h=a.prop,(o=a.startIndex)>=e&&l<=t||(r=r.substring(e-o,t-o)),this.tagToTextScope?c+=this.tagToText.call(this.tagToTextScope,r,h,d):c+=this.tagToText(r,h,d),d=h,!(l>=t)));u++);return c}get length(){return this.lines.length}set length(e){this.clear()}}var PEN_CONFIG={};const Rectangle$6=Phaser.Geom.Rectangle;var RectanglePool=new Stack;class HitAreaManager{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var e=0,t=this.hitAreas.length;e<t;e++)this.hitAreas[e].data=null;return RectanglePool.pushMultiple(this.hitAreas),this}add(e,t,i,s,n){void 0===n&&(n={});var a=RectanglePool.pop();return null===a?a=new Rectangle$6(e,t,i,s):a.setTo(e,t,i,s),a.data=n,this.hitAreas.push(a),this}getFirst(e,t){for(var i=0,s=this.hitAreas.length;i<s;i++){var n=this.hitAreas[i];if(n.contains(e,t))return n}return null}getByKey(e){for(var t=0,i=this.hitAreas.length;t<i;t++){var s=this.hitAreas[t];if(s.data.key===e)return s}return null}drawBounds(e,t,i){void 0===t&&(t=16777215),i&&e.save().translateCanvas(i.x,i.y).rotateCanvas(i.rotation).scaleCanvas(i.scaleX,i.scaleY);for(var s=0,n=this.hitAreas.length;s<n;s++){var a=this.hitAreas[s];e.lineStyle(1,t).strokeRect(a.x,a.y,a.width,a.height)}return i&&e.restore(),this}}var SetInteractive$1=function(){this.parent.on("pointerdown",OnAreaDown,this).on("pointerup",OnAreaUp,this).on("pointermove",OnAreaOverOut,this).on("pointerover",OnAreaOverOut,this).on("pointerout",(function(e,t){OnAreaOverOut.call(this,e,null,null,t)}),this)},OnAreaDown=function(e,t,i,s){var n=this.hitAreaManager.getFirst(t,i);if(null!==n){var a=n.data.key;FireEvent$2.call(this,"areadown",a,e,t,i,s),n.data&&(n.data.isDown=!0)}},OnAreaUp=function(e,t,i,s){var n=this.hitAreaManager.getFirst(t,i);if(null!==n){var a=n.data.key;if(FireEvent$2.call(this,"areaup",a,e,t,i,s),n.data){if(n.data.isDown){if(FireEvent$2.call(this,"areaclick",a,e,t,i,s),!n.data)return;var r=n.data.url;r&&window.open(r,"_blank")}n.data.isDown=!1}}},OnAreaOverOut=function(e,t,i,s){if(null!==t){var n=(r=this.hitAreaManager.getFirst(t,i))?r.data.key:null;if(this.lastHitAreaKey!==n){if(null!==this.lastHitAreaKey){FireEvent$2.call(this,"areaout",this.lastHitAreaKey,e,t,i,s);var a=this.hitAreaManager.getByKey(this.lastHitAreaKey);a&&(this.urlTagCursorStyle&&SetCursorStyle(this.scene,a,""),a.data.isDown=!1)}null!==n&&(FireEvent$2.call(this,"areaover",n,e,t,i,s),r.data&&this.urlTagCursorStyle&&SetCursorStyle(this.scene,r,this.urlTagCursorStyle)),this.lastHitAreaKey=n}}else{var r;null!==this.lastHitAreaKey&&(FireEvent$2.call(this,"areaout",this.lastHitAreaKey,e,t,i,s),(r=this.hitAreaManager.getByKey(this.lastHitAreaKey))&&r.data&&(r.data.isDown=!1),this.lastHitAreaKey=null)}},FireEvent$2=function(e,t,i,s,n,a){this.parent.emit(`${e}-${t}`,i,s,n,a),this.parent.emit(e,t,i,s,n,a)},SetCursorStyle=function(e,t,i){t&&t.data&&t.data.url&&(e.input.manager.canvas.style.cursor=i)};const TransformMatrix$1=Phaser.GameObjects.Components.TransformMatrix,TransformXY=Phaser.Math.TransformXY;var WorldXYToGameObjectLocalXY=function(e,t,i,s,n){void 0===s&&(s=e.scene.cameras.main),void 0===n?n={}:!0===n&&(n=globOut$2);var a=s.scrollX,r=s.scrollY,o=t+a*e.scrollFactorX-a,l=i+r*e.scrollFactorY-r;return e.parentContainer?(void 0===tempMatrix$2&&(tempMatrix$2=new TransformMatrix$1,parentMatrix$1=new TransformMatrix$1),e.getWorldTransformMatrix(tempMatrix$2,parentMatrix$1),tempMatrix$2.applyInverse(o,l,n)):TransformXY(o,l,e.x,e.y,e.rotation,e.scaleX,e.scaleY,n),n.x+=e.displayOriginX,n.y+=e.displayOriginY,n},tempMatrix$2,parentMatrix$1,globOut$2={},GetHitArea=function(e,t,i){var s=WorldXYToGameObjectLocalXY(this.parent,e,t,i,!0),n=this.hitAreaManager.getFirst(s.x,s.y);if(null!==n)return n.data.key},RE_ASCII=/^[\x00-\x7F]+$/,IsASCIIString=function(e){return RE_ASCII.test(e)};const NO_NEWLINE$1=CONST.NO_NEWLINE,RAW_NEWLINE=CONST.RAW_NEWLINE,WRAPPED_NEWLINE$1=CONST.WRAPPED_NEWLINE,NO_WRAP$1=CONST.NO_WRAP,WORD_WRAP=CONST.WORD_WRAP,CHAR_WRAP=CONST.CHAR_WRAP,splitRegExp=CONST.SPLITREGEXP;var WrapText=function(e,t,i,s,n,a){s<=0&&(i=NO_WRAP$1);var r=[];if(!e||!e.length)return r;for(var o,l,h,d=i===NO_WRAP$1,c=e.split(splitRegExp),u=0,p=c.length;u<p;u++)if(o=c[u],h=u===p-1?NO_NEWLINE$1:RAW_NEWLINE,d){var g=t.measureText(o).width;r.push(a.getLine(o,g,h))}else{if(l=0===u?s-n:s,o.length<=100&&(g=t.measureText(o).width)<=l){r.push(a.getLine(o,g,h));continue}for(var m,f,v,b=ParseLine(o,i),y="",C=0,x=0,S=b.length;x<S;x++)if(m=b[x],(f=t.measureText(m).width)>s&&IsWord(m)){""!==y?r.push(a.getLine(y,C,WRAPPED_NEWLINE$1)):0===x&&n>0&&r.push(a.getLine("",0,WRAPPED_NEWLINE$1)),r.push(...WrapText(m,t,CHAR_WRAP,s,0,a));var w=r.pop();y=w.text,C=w.width,a.freeLine(w)," "===y&&(y="",C=0)}else(v=C+f)>l?(r.push(a.getLine(y,C,WRAPPED_NEWLINE$1)),y=m,C=f,l=s):(y+=m,C=v),x===S-1&&r.push(a.getLine(y,C,h))}return r},ParseLine=function(e,t){var i;switch(t){case WORD_WRAP:i=[];for(var s=0,n=(e=e.split(" ")).length;s<n;s++){var a=e[s];s<n-1?i.push(a+" "):""!==a&&i.push(a)}break;case CHAR_WRAP:i=e.split("");break;default:for(i=[],s=0,n=(e=e.split(" ")).length;s<n;s++)a=e[s],s<n-1?IsASCIIString(a)?i.push(a+" "):(i.push(...a.split("")),i.push(" ")):""!==a&&(IsASCIIString(a)?i.push(a):i.push(...a.split("")))}return i},IsWord=function(e){switch(e.length){case 1:return!1;case 2:return" "!==e.charAt(1);default:return!0}};const GetValue$3M=Phaser.Utils.Objects.GetValue,NO_WRAP=CONST.NO_WRAP,NO_NEWLINE=CONST.NO_NEWLINE,WRAPPED_NEWLINE=CONST.WRAPPED_NEWLINE;class CanvasText{constructor(e){this.parent=e.parent,this.scene=this.parent.scene,this.context=GetValue$3M(e,"context",null),this.canvas=this.context.canvas,this.parser=GetValue$3M(e,"parser",null),this.defaultStyle=GetValue$3M(e,"style",null),this.autoRound=!0,this.pensPool=e.pensPool,this.linesPool=e.linesPool,this.wrapTextLinesPool=e.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new HitAreaManager,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(e,t,i,s,n){if(void 0===n&&(n=this.penManager),n.clear(),""===e)return n;var a=this.parent.style;if(a.isWrapFitMode){var r=this.parent.padding;i=a.fixedWidth-r.left-r.right}for(var o,l,h,d,c,u=this.canvas,p=this.context,g=0,m=0,f=a.wrapCallback,v=a.wrapCallbackScope,b=!0,y=this.parser.splitText(e),C=this.wrapTextLinesPool,x=0,S=y.length;x<S;x++)if(o=(d=this.parser.tagTextToProp(y[x],l)).plainText,(l=d.prop).img){var w=this.imageManager.getOuterWidth(l.img);i>0&&t!==NO_WRAP&&i<g+w&&(n.addNewLinePen(),m+=s,g=0),n.addImagePen(g,m,w,Clone$2(l)),g+=w}else if(""!==o){if(p.save(),(h=this.parser.propToContextStyle(this.defaultStyle,l)).buildFont(),h.syncFont(u,p),h.syncStyle(u,p),f){"string"==typeof(c=f.call(v,o,p,i,g))&&(c=c.split("\n"));for(var T=0,P=c.length;T<P;T++)"string"==typeof(_=c[T])?c[T]=C.getLine(_,p.measureText(_).width,T<P-1?WRAPPED_NEWLINE:NO_NEWLINE):b=!1}else c=WrapText(o,p,t,i,g,C);var _;for(T=0,P=c.length;T<P;T++)_=c[T],n.addTextPen(_.text,g,m,_.width,Clone$2(l),_.newLineMode),_.newLineMode!==NO_NEWLINE?(g=0,m+=s):g+=_.width;b&&C.freeLines(c),c=null,p.restore()}for(x=0,S=this.lines.length;x<S;x++){var M=this.lines[x],O=M[M.length-1];O&&(O.width+=this.parser.getStrokeThinkness(this.defaultStyle,O.prop))}return n}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var e=this.penManager.linesCount,t=this.defaultStyle.maxLines;return t>0&&e>t&&(e=t),e}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var e=this.displayLinesCount,t=this.defaultStyle.lineHeight*e;return e>0&&(t-=this.defaultStyle.lineSpacing),t}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new PenManager({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(e,t,i){var s;if(null==e)s=this.penManager.plainText;else{var n=this.parser.splitText(e,1);s="";for(var a=0,r=n.length;a<r;a++)s+=n[a]}return null==t&&null==i||(null==t&&(t=0),null==i&&(i=s.length),s=s.substring(t,i)),s}getPenManager(e,t){if(void 0===e)return this.copyPenManager(t,this.penManager);void 0===t&&(t=this.newPenManager());var i=this.defaultStyle;return this.updatePenManager(e,i.wrapMode,i.wrapWidth,i.lineHeight,t),t}getText(e,t,i,s){if(null==e)return this.penManager.getSliceTagText(t,i,s);var n=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(e,a.wrapMode,a.wrapWidth,a.lineHeight,n),n.getSliceTagText(t,i,s)}copyPenManager(e,t){return void 0===t&&(t=this.penManager),t.copy(e)}getTextWidth(e){return void 0===e&&(e=this.penManager),e.getMaxLineWidth()}getLastPen(e){return void 0===e&&(e=this.penManager),e.lastPen}}var methods$I={setInteractive:SetInteractive$1,getHitArea:GetHitArea};Object.assign(CanvasText.prototype,DrawMethods,methods$I);class WrapTextLinesPool extends Stack{freeLine(e){if(e)return this.push(e),this}freeLines(e){if(e)return this.pushMultiple(e),this}getLine(e,t,i){var s=this.pop();return null===s&&(s={}),s.text=e,s.width=t,s.newLineMode=i,s}}const IsPlainObject$Q=Phaser.Utils.Objects.IsPlainObject,GetValue$3L=Phaser.Utils.Objects.GetValue;var AddImage$1=function(e,t){IsPlainObject$Q(e)?e=(t=e).key:void 0===t&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,s=t.frame,n=t.width,a=t.height;if(void 0===n||void 0===a){var r=this.textureManager.getFrame(i,s),o=r?r.cutWidth:0,l=r?r.cutHeight:0;void 0===n&&void 0===a?(n=o,a=l):void 0===n?n=o*(a/l):void 0===a&&(a=l*(n/o))}this.images[e]={key:i,frame:s,width:n,height:a,y:GetValue$3L(t,"y",0),left:GetValue$3L(t,"left",0),right:GetValue$3L(t,"right",0),originX:GetValue$3L(t,"originX",0),originY:GetValue$3L(t,"originY",0),tintFill:GetValue$3L(t,"tintFill",!1)}};const CanvasPool$1=Phaser.Display.Canvas.CanvasPool;var DrawFrameToCanvas=function(e,t,i,s,n,a,r,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=e.cutWidth),void 0===a&&(a=e.cutHeight),void 0===o&&(o=!1),o&&(i=Math.round(i),s=Math.round(s));var l=t.getContext("2d",{willReadFrequently:!0});if(r){var h=CanvasPool$1.create(null,n,a,Phaser.CANVAS,!0),d=h.getContext("2d",{willReadFrequently:!0});d.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,n,a),d.globalCompositeOperation="source-in",d.fillStyle=r,d.fillRect(0,0,n,a),l.drawImage(h,0,0,n,a,i,s,n,a),CanvasPool$1.remove(h)}else l.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,i,s,n,a)},DrawImage=function(e,t,i,s,n,a){var r=this.get(e);if(r){var o=this.textureManager.getFrame(r.key,r.frame),l=r.width,h=r.height;i+=r.left-r.originX*l,s+=r.y-r.originY*h,r.tintFill||(n=void 0),DrawFrameToCanvas(o,t.canvas,i,s,l,h,n,a)}};class ImageManager{constructor(e){this.textureManager=e.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(e,t){if("string"==typeof e)AddImage$1.call(this,e,t);else if(Array.isArray(e))for(var i=0,s=(n=e).length;i<s;i++)AddImage$1.call(this,n[i]);else{var n=e;for(var e in n)AddImage$1.call(this,e,n[e])}return this}has(e){return this.images.hasOwnProperty(e)}remove(e){return this.has(e)&&delete this.images[e],this}get(e){return this.has(e)||this.textureManager.exists(e)&&this.add(e),this.images[e]}getOuterWidth(e){var t=this.get(e);return t?t.width+t.left+t.right:0}getFrame(e){var t=this.get(e);return t?this.textureManager.getFrame(t.key,t.frame):void 0}hasTexture(e){return!!this.getFrame(e)}}var methods$H={draw:DrawImage};Object.assign(ImageManager.prototype,methods$H);var AppendText$1=function(e,t){var i;return e||0===e||(e=""),void 0===t&&(t=!0),Array.isArray(e)&&(e=e.join("\n")),(i=t?`${this.text}\n${e}`:`${this.text}${e}`)!=this.text&&this.setText(i),this};const IsPlainObject$P=Phaser.Utils.Objects.IsPlainObject,AddToDOM=Phaser.DOM.AddToDOM,CanvasPool=Phaser.Display.Canvas.CanvasPool,GameObject$1=Phaser.GameObjects.GameObject,GetValue$3K=Phaser.Utils.Objects.GetValue,RemoveFromDOM$1=Phaser.DOM.RemoveFromDOM,SPLITREGEXP=CONST.SPLITREGEXP,UUID$4=Phaser.Utils.String.UUID;var SharedPensPools=null,SharedLinesPool=null,SharedWrapTextLinesPool=null;class Text extends TextBase{constructor(e,t,i,s,n,a,r){if(IsPlainObject$P(t)){var o=t;t=GetValue$3K(o,"x",0),i=GetValue$3K(o,"y",0),s=GetValue$3K(o,"text",""),n=GetValue$3K(o,"style")}if(void 0===t&&(t=0),void 0===i&&(i=0),super(e,a),this.renderer=e.sys.game.renderer,this.setPosition(t,i),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=CanvasPool.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var l=n.align;delete n.align,n.halign=l}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new TextStyle$1(this,n);var h,d,c,u=GetValue$3K(n,"images",void 0);u&&this.addImage(u),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=UUID$4(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),GetValue$3K(n,"sharedPool",!0)?(SharedPensPools||(SharedPensPools={},SharedLinesPool=new Stack,SharedWrapTextLinesPool=new WrapTextLinesPool,this.scene.game.events.once("destroy",(function(){SharedPensPools=null,SharedLinesPool=null,SharedWrapTextLinesPool=null}))),SharedPensPools.hasOwnProperty(a)||(SharedPensPools[a]=new Stack),h=SharedPensPools[a],d=SharedLinesPool,c=SharedWrapTextLinesPool):(h=new Stack,d=new Stack,c=new WrapTextLinesPool),this.canvasText=new CanvasText({parent:this,context:this.context,parser:r,style:this.style,pensPool:h,linesPool:d,wrapTextLinesPool:c}),this.parser=r,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(s),this.setUrlTagCursorStyle(GetValue$3K(n,"urlTagCursorStyle","pointer")),GetValue$3K(n,"interactive",!1)&&this.setInteractive()}preDestroy(){RemoveFromDOM$1(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),CanvasPool.remove(this.canvas);var e=this.texture;e&&e.destroy()}set text(e){this.setText(e)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",AddToDOM(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(e){void 0===e&&(e=!0);var t=this.style;if(t.rtl===e)return this;if(t.rtl=e,e?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",AddToDOM(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),"left"===t.halign?t.halign="right":"right"===t.halign&&(t.halign="left"),this._imageManager){var i=this._imageManager.images;for(var s in i)i[s].originX=1-i[s].originX}return this}setText(e){return(e=GetString(e))===this._text||(this._text=e,this.updateText()),this}setPadding(e,t,i,s){if("object"==typeof e){var n=e,a=GetValue$3K(n,"x",null);null!==a?(e=a,i=a):(e=GetValue$3K(n,"left",0),i=GetValue$3K(n,"right",e));var r=GetValue$3K(n,"y",null);null!==r?(t=r,s=r):(t=GetValue$3K(n,"top",0),s=GetValue$3K(n,"bottom",t))}else void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=e),void 0===s&&(s=t);return this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=s,this.updateText(!1)}updateText(e){void 0===e&&(e=!0);var t=this.canvasText,i=this.style;e&&t.updatePenManager(this._text,i.wrapMode,i.wrapWidth,i.lineHeight);var s,n,a=this.padding,r=Math.ceil(t.linesWidth);0===i.fixedWidth?(this.width=r+a.left+a.right,s=r):(this.width=i.fixedWidth,(s=this.width-a.left-a.right)<r&&(s=r)),0===i.fixedHeight?(this.height=t.linesHeight+a.top+a.bottom,n=t.linesHeight):(this.height=i.fixedHeight,(n=this.height-a.top-a.bottom)<t.linesHeight&&(n=t.linesHeight));var o=this.width,l=this.height;this.updateDisplayOrigin();var h=i.resolution;o*=h,l*=h,o=Math.max(Math.ceil(o),1),l=Math.max(Math.ceil(l),1);var d=this.canvas,c=this.context;d.width!==o||d.height!==l?(d.width=o,d.height=l,this.frame.setSize(o,l)):c.clearRect(0,0,o,l),c.save(),c.scale(h,h);var u=this.style.rtl?a.right:a.left,p=a.top;t.draw(u,p,s,n),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=this.width,g.hitArea.height=this.height),this}toJSON(){var e=Components.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return e.data=t,e}setInteractive(e,t,i){var s=!!this.input;return GameObject$1.prototype.setInteractive.call(this,e,t,i),s||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(e){return this.urlTagCursorStyle=e,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(e){this.canvasText.urlTagCursorStyle=e}getWrappedText(e,t,i){return"number"==typeof e&&(i=t,t=e,e=void 0),(e=this.canvasText.getText(e,t,i,!0)).split(SPLITREGEXP)}getPlainText(e,t,i){return"number"==typeof e&&(i=t,t=e,e=void 0),this.canvasText.getPlainText(e,t,i)}getText(e,t,i,s){return"number"==typeof e&&(s=i,i=t,t=e,e=void 0),void 0===s&&(s=!1),this.canvasText.getText(e,t,i,s)}getSubString(e,t,i){return"number"==typeof e&&(i=t,t=e,e=void 0),this.getText(e,t,i)}copyPenManager(e){return this.canvasText.copyPenManager(e)}getPenManager(e,t){return this.canvasText.getPenManager(e,t)}setSize(e,t){return this.setFixedSize(e,t)}resize(e,t){return this.setFixedSize(e,t)}get imageManager(){return this._imageManager||(this._imageManager=new ImageManager(this.scene)),this._imageManager}addImage(e,t){return this.imageManager.add(e,t),this}drawAreaBounds(e,t){return this.canvasText.hitAreaManager.drawBounds(e,t,this),this}generateTexture(e,t,i,s,n){var a=this.canvas;return void 0===s?s=a.width:s*=this.resolution,void 0===n?n=a.height:n*=this.resolution,CopyCanvasToTexture(this.scene,a,e,t,i,s,n),this}getHitArea(e,t,i){return this.canvasText.getHitArea(e,t,i)}}var methods$G={appendText:AppendText$1};Object.assign(Text.prototype,methods$G);var SplitText=function(e,t){for(var i=this.tagRegex,s=[],n=0,a=!1,r=!1;;){var o=i.RE_SPLITTEXT.exec(e);if(!o)break;var l=o[0];if(r){if(!i.RE_ESC_CLOSE.test(l))continue;r=!1}else if(a){if(!i.RE_RAW_CLOSE.test(l))continue;a=!1}else i.RE_ESC_OPEN.test(l)?r=!0:i.RE_RAW_OPEN.test(l)&&(a=!0);var h=i.RE_SPLITTEXT.lastIndex,d=h-l.length;if(n<d){var c=e.substring(n,d);s.push(c)}void 0===t&&s.push(l),n=h}var u=e.length;return n<u&&s.push(e.substring(n,u)),s};const PROP_REMOVE=!1,PROP_ADD=!0;var GETPROP_RESULT$1={plainText:null,prevProp:null},TagTextToProp=function(e,t){var i=this.tagRegex;null==t&&(t={});var s="";if(t.img&&UpdateProp(t,PROP_REMOVE,"img"),t.esc)i.RE_ESC_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"esc"):s=e;else if(t.raw)i.RE_RAW_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"raw"):s=e;else if(i.RE_ESC_OPEN.test(e))UpdateProp(t,PROP_ADD,"esc",!0);else if(i.RE_ESC_CLOSE.test(e))UpdateProp(t,PROP_REMOVE,"esc");else if(i.RE_RAW_OPEN.test(e))UpdateProp(t,PROP_ADD,"raw",!0);else if(i.RE_RAW_CLOSE.test(e))UpdateProp(t,PROP_REMOVE,"raw");else if(i.RE_BLOD_OPEN.test(e))UpdateProp(t,PROP_ADD,"b",!0);else if(i.RE_BLOD_CLOSE.test(e))UpdateProp(t,PROP_REMOVE,"b");else if(i.RE_ITALICS_OPEN.test(e))UpdateProp(t,PROP_ADD,"i",!0);else if(i.RE_ITALICS_CLOSE.test(e))UpdateProp(t,PROP_REMOVE,"i");else if(i.RE_WEIGHT_OPEN.test(e)){var n=e.match(i.RE_WEIGHT_OPEN);UpdateProp(t,PROP_ADD,"weight",n[1])}else i.RE_WEIGHT_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"weight"):i.RE_SIZE_OPEN.test(e)?(n=e.match(i.RE_SIZE_OPEN),UpdateProp(t,PROP_ADD,"size",`${n[1]}px`)):i.RE_SIZE_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"size"):i.RE_FAMILY_OPEN.test(e)?(n=e.match(i.RE_FAMILY_OPEN),UpdateProp(t,PROP_ADD,"family",n[1])):i.RE_FAMILY_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"family"):i.RE_COLOR_OPEN.test(e)?(n=e.match(i.RE_COLOR_OPEN),UpdateProp(t,PROP_ADD,"color",n[1])):i.RE_COLOR_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"color"):i.RE_UNDERLINE_OPEN.test(e)?UpdateProp(t,PROP_ADD,"u",!0):i.RE_UNDERLINE_OPENC.test(e)?(n=e.match(i.RE_UNDERLINE_OPENC),UpdateProp(t,PROP_ADD,"u",n[1])):i.RE_UNDERLINE_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"u"):i.RE_STRIKETHROUGH_OPEN.test(e)?UpdateProp(t,PROP_ADD,"s",!0):i.RE_STRIKETHROUGH_OPENC.test(e)?(n=e.match(i.RE_STRIKETHROUGH_OPENC),UpdateProp(t,PROP_ADD,"s",n[1])):i.RE_STRIKETHROUGH_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"s"):i.RE_SHADOW_OPEN.test(e)?UpdateProp(t,PROP_ADD,"shadow",!0):i.RE_SHADOW_OPENC.test(e)?(n=e.match(i.RE_SHADOW_OPENC),UpdateProp(t,PROP_ADD,"shadow",n[1])):i.RE_SHADOW_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"shadow"):i.RE_STROKE_OPEN.test(e)?UpdateProp(t,PROP_ADD,"stroke",!0):i.RE_STROKE_OPENC.test(e)?(n=e.match(i.RE_STROKE_OPENC),UpdateProp(t,PROP_ADD,"stroke",n[1])):i.RE_STROKE_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"stroke"):i.RE_BGCOLOR_OPEN.test(e)?(n=e.match(i.RE_BGCOLOR_OPEN),UpdateProp(t,PROP_ADD,"bgcolor",n[1])):i.RE_BGCOLOR_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"bgcolor"):i.RE_OFFSETY_OPEN.test(e)?(n=e.match(i.RE_OFFSETY_OPEN),UpdateProp(t,PROP_ADD,"y",parseFloat(n[1]))):i.RE_OFFSETY_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"y"):i.RE_IMAGE_OPEN.test(e)?(n=e.match(i.RE_IMAGE_OPEN),UpdateProp(t,PROP_ADD,"img",n[1])):i.RE_IMAGE_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"img"):i.RE_AREA_OPEN.test(e)?(n=e.match(i.RE_AREA_OPEN),UpdateProp(t,PROP_ADD,"area",n[1])):i.RE_AREA_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"area"):i.RE_URL_OPEN.test(e)?(n=e.match(i.RE_URL_OPEN),UpdateProp(t,PROP_ADD,"url",n[1])):i.RE_URL_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"url"):i.RE_ALIGN_OPEN.test(e)?(n=e.match(i.RE_ALIGN_OPEN),UpdateProp(t,PROP_ADD,"align",n[1])):i.RE_ALIGN_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"align"):i.RE_ID_OPEN.test(e)?(n=e.match(i.RE_ID_OPEN),UpdateProp(t,PROP_ADD,"id",n[1])):i.RE_ID_CLOSE.test(e)?UpdateProp(t,PROP_REMOVE,"id"):s=e;var a=GETPROP_RESULT$1;return a.plainText=s,a.prop=t,a},UpdateProp=function(e,t,i,s){return t===PROP_ADD?e[i]=s:e.hasOwnProperty(i)&&delete e[i],e},PropToContextStyle=function(e,t){var i=STYLE_RESULT$1;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var s=t.size;"number"==typeof s&&(s=`${s}px`),i.fontSize=s}else i.fontSize=e.fontSize;i.fontStyle=GetFontStyle(t),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?!0===t.stroke?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?!0===t.shadow?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?!0===t.u?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),t.hasOwnProperty("s")?!0===t.s?(i.strikethroughColor=e.strikethroughColor,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor=t.s,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor="#000",i.strikethroughThickness=0,i.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?i.bgcolor=t.bgcolor:i.bgcolor=null,i},GetFontStyle=function(e){var t=e.b,i=e.weight,s=e.i;return t||i||s?s?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},STYLE_RESULT$1=new TextStyle$1,PropToTagText=function(e,t,i){null==i&&(i=EMPTYPROP);var s=this.delimiters[0],n=this.delimiters[1],a=[];for(var r in i)t.hasOwnProperty(r)||a.push(`${s}/${r}${n}`);for(var r in t){var o=t[r];if("img"===r);else if(i[r]===o)continue;switch(r){case"size":a.push(`${s}size=${o.replace("px","")}${n}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":a.push(`${s}${r}=${o}${n}`);break;case"u":case"s":!0===o?a.push(`${s}${r}${n}`):a.push(`${s}${r}=${o}${n}`);break;default:a.push(`${s}${r}${n}`)}}return a.push(e),a.join("")},EMPTYPROP={},EscapeRegex=function(e){return e.replace(re0,"\\$&").replace(re1,"\\x2d")},re0=/[|\\{}()[\]^$+*?.]/g,re1=/-/g,DelimiterLeftSave,DelimiterRightSave,TagRegexSave={},GetOpenTagRegString=function(e,t,i,s){return void 0===s?`${e}${i}${t}`:`${e}${i}=(${s})${t}`},GetCloseTagRegString=function(e,t,i){return`${e}/${i}${t}`},GenerateStringRegEx=function(e){return`[^${e}]+`},NUMBER_PARAM="[-.0-9]+",colorParameterList=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],COLOR_PARAM=colorParameterList.join("|"),SetDelimiters=function(e,t){if(void 0===t){var i=e;e=i[0],t=i[1]}if(DelimiterLeftSave===e&&DelimiterRightSave===t)return!1;DelimiterLeftSave=e,DelimiterRightSave=t,e=EscapeRegex(e),t=EscapeRegex(t);var s=GenerateStringRegEx(t),n=GetOpenTagRegString(e,t,"esc"),a=GetCloseTagRegString(e,t,"esc"),r=GetOpenTagRegString(e,t,"raw"),o=GetCloseTagRegString(e,t,"raw"),l=GetOpenTagRegString(e,t,"b"),h=GetCloseTagRegString(e,t,"b"),d=GetOpenTagRegString(e,t,"i"),c=GetCloseTagRegString(e,t,"i"),u="weight",p=GetOpenTagRegString(e,t,u,NUMBER_PARAM),g=GetCloseTagRegString(e,t,u),m="size",f=GetOpenTagRegString(e,t,m,NUMBER_PARAM),v=GetCloseTagRegString(e,t,m),b="family",y=GetOpenTagRegString(e,t,b,s),C=GetCloseTagRegString(e,t,b),x="color",S=GetOpenTagRegString(e,t,x,COLOR_PARAM),w=GetCloseTagRegString(e,t,x),T=GetOpenTagRegString(e,t,"u"),P=GetOpenTagRegString(e,t,"u",COLOR_PARAM),_=GetCloseTagRegString(e,t,"u"),M=GetOpenTagRegString(e,t,"s"),O=GetOpenTagRegString(e,t,"s",COLOR_PARAM),k=GetCloseTagRegString(e,t,"s"),$="shadow",G=GetOpenTagRegString(e,t,$),E=GetOpenTagRegString(e,t,$,COLOR_PARAM),V=GetCloseTagRegString(e,t,$),R="stroke",I=GetOpenTagRegString(e,t,R),A=GetOpenTagRegString(e,t,R,COLOR_PARAM),D=GetCloseTagRegString(e,t,R),B="bgcolor",L=GetOpenTagRegString(e,t,B,COLOR_PARAM),F=GetCloseTagRegString(e,t,B),j=GetOpenTagRegString(e,t,"y",NUMBER_PARAM),N=GetCloseTagRegString(e,t,"y"),z=GetOpenTagRegString(e,t,"img",s),U=GetCloseTagRegString(e,t,"img"),W="area",Y=GetOpenTagRegString(e,t,W,s),X=GetCloseTagRegString(e,t,W),H=GetOpenTagRegString(e,t,"url",s),q=GetCloseTagRegString(e,t,"url"),K="align",J=GetOpenTagRegString(e,t,K,s),Z=GetCloseTagRegString(e,t,K),Q=GetOpenTagRegString(e,t,"id",s),ee=GetCloseTagRegString(e,t,"id");return TagRegexSave.RE_ESC_OPEN=new RegExp(n,"i"),TagRegexSave.RE_ESC_CLOSE=new RegExp(a,"i"),TagRegexSave.RE_RAW_OPEN=new RegExp(r,"i"),TagRegexSave.RE_RAW_CLOSE=new RegExp(o,"i"),TagRegexSave.RE_BLOD_OPEN=new RegExp(l,"i"),TagRegexSave.RE_BLOD_CLOSE=new RegExp(h,"i"),TagRegexSave.RE_ITALICS_OPEN=new RegExp(d,"i"),TagRegexSave.RE_ITALICS_CLOSE=new RegExp(c,"i"),TagRegexSave.RE_WEIGHT_OPEN=new RegExp(p,"i"),TagRegexSave.RE_WEIGHT_CLOSE=new RegExp(g,"i"),TagRegexSave.RE_SIZE_OPEN=new RegExp(f,"i"),TagRegexSave.RE_SIZE_CLOSE=new RegExp(v,"i"),TagRegexSave.RE_FAMILY_OPEN=new RegExp(y,"i"),TagRegexSave.RE_FAMILY_CLOSE=new RegExp(C,"i"),TagRegexSave.RE_COLOR_OPEN=new RegExp(S,"i"),TagRegexSave.RE_COLOR_CLOSE=new RegExp(w,"i"),TagRegexSave.RE_UNDERLINE_OPEN=new RegExp(T,"i"),TagRegexSave.RE_UNDERLINE_OPENC=new RegExp(P,"i"),TagRegexSave.RE_UNDERLINE_CLOSE=new RegExp(_,"i"),TagRegexSave.RE_STRIKETHROUGH_OPEN=new RegExp(M,"i"),TagRegexSave.RE_STRIKETHROUGH_OPENC=new RegExp(O,"i"),TagRegexSave.RE_STRIKETHROUGH_CLOSE=new RegExp(k,"i"),TagRegexSave.RE_SHADOW_OPEN=new RegExp(G,"i"),TagRegexSave.RE_SHADOW_OPENC=new RegExp(E,"i"),TagRegexSave.RE_SHADOW_CLOSE=new RegExp(V,"i"),TagRegexSave.RE_STROKE_OPEN=new RegExp(I,"i"),TagRegexSave.RE_STROKE_OPENC=new RegExp(A,"i"),TagRegexSave.RE_STROKE_CLOSE=new RegExp(D,"i"),TagRegexSave.RE_BGCOLOR_OPEN=new RegExp(L,"i"),TagRegexSave.RE_BGCOLOR_CLOSE=new RegExp(F,"i"),TagRegexSave.RE_OFFSETY_OPEN=new RegExp(j,"i"),TagRegexSave.RE_OFFSETY_CLOSE=new RegExp(N,"i"),TagRegexSave.RE_IMAGE_OPEN=new RegExp(z,"i"),TagRegexSave.RE_IMAGE_CLOSE=new RegExp(U,"i"),TagRegexSave.RE_AREA_OPEN=new RegExp(Y,"i"),TagRegexSave.RE_AREA_CLOSE=new RegExp(X,"i"),TagRegexSave.RE_URL_OPEN=new RegExp(H,"i"),TagRegexSave.RE_URL_CLOSE=new RegExp(q,"i"),TagRegexSave.RE_ALIGN_OPEN=new RegExp(J,"i"),TagRegexSave.RE_ALIGN_CLOSE=new RegExp(Z,"i"),TagRegexSave.RE_ID_OPEN=new RegExp(Q,"i"),TagRegexSave.RE_ID_CLOSE=new RegExp(ee,"i"),TagRegexSave.RE_SPLITTEXT=new RegExp([r,o,n,a,l,h,d,c,p,g,f,v,y,C,S,w,T,P,_,M,O,k,G,E,V,I,A,D,L,F,j,N,z,U,Y,X,H,q,J,Z,Q,ee].join("|"),"ig"),!0},GetTagRegex=function(e,t){return void 0!==e&&SetDelimiters(e,t),Object.assign({},TagRegexSave)};const GetValue$3J=Phaser.Utils.Objects.GetValue;let Parser$2=class{constructor(e){var t=GetValue$3J(e,"delimiters","[]");this.tagRegex=GetTagRegex(t),this.delimiters=t}getStrokeThinkness(e,t){return t.hasOwnProperty("stroke")?e.strokeThickness:0}setDelimiters(e,t){return SetDelimiters(e,t)&&(this.tagRegex=GetTagRegex()),this}};var methods$F={splitText:SplitText,tagTextToProp:TagTextToProp,propToContextStyle:PropToContextStyle,propToTagText:PropToTagText};Object.assign(Parser$2.prototype,methods$F);class BBCodeText extends Text{constructor(e,t,i,s,n){super(e,t,i,s,n,"rexBBCodeText",new Parser$2(n))}setDelimiters(e,t){return this.parser.setDelimiters(e,t),this}}ObjectFactory.register("BBCodeText",(function(e,t,i,s){var n=new BBCodeText(this.scene,e,t,i,s);return this.scene.add.existing(n),n})),SetValue(window,"RexPlugins.UI.BBCodeText",BBCodeText);var GETPROP_RESULT={plainText:null,prevProp:null},STYLE_RESULT=new TextStyle$1;let Parser$1=class{constructor(e){void 0===e&&(e={}),this.tags=e}addTag(e,t){this.tags[e]=t}getTag(e){return this.tags[e]}splitText(e,t){for(var i=[],s=0;;){var n=RE_SPLITTEXT.exec(e);if(!n)break;var a=n[0],r=RE_SPLITTEXT.lastIndex-a.length;if(s<r&&i.push(e.substring(s,r)),void 0===t)i.push(a);else if(1===t)if(RE_CLASS_HEADER.test(a)){var o=a.match(RE_CLASS);i.push(o[2])}else RE_STYLE_HEADER.test(a)&&(o=a.match(RE_STYLE),i.push(o[2]));s=RE_SPLITTEXT.lastIndex}var l=e.length;return s<l&&i.push(e.substring(s,l)),i}tagTextToProp(e,t){var i,s;if(RE_CLASS_HEADER.test(e)){if(null!=(r=e.match(RE_CLASS))){var n=r[1],a=this.tags;(s=a.hasOwnProperty(n)?a[n]:{})._class=n,i=r[2]}}else if(RE_STYLE_HEADER.test(e)){var r;if(null!=(r=e.match(RE_STYLE))){var o=r[1];(s=StyleToProp(o))._style=o,i=r[2]}}null==i&&(i=e),null==s&&(s={});var l=GETPROP_RESULT;return l.plainText=i,l.prop=s,l}propToContextStyle(e,t){var i=STYLE_RESULT;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")||t.hasOwnProperty("fontFamily")||t.hasOwnProperty("font-family")){var s=t.hasOwnProperty("family")?t.family:t.hasOwnProperty("fontFamily")?t.fontFamily:t["font-family"];i.fontFamily=s}else i.fontFamily=e.fontFamily;if(t.hasOwnProperty("size")||t.hasOwnProperty("fontSize")||t.hasOwnProperty("font-size")){var n=t.hasOwnProperty("size")?t.size:t.hasOwnProperty("fontSize")?t.fontSize:t["font-size"];"number"==typeof n&&(n=`${n}px`),i.fontSize=n}else i.fontSize=e.fontSize;if(t.hasOwnProperty("style")||t.hasOwnProperty("fontStyle")||t.hasOwnProperty("font-style")){var a=t.hasOwnProperty("style")?t.style:t.hasOwnProperty("fontStyle")?t.fontStyle:t["font-style"];i.fontStyle=a}else i.fontStyle=e.fontStyle;if(t.hasOwnProperty("color")||t.hasOwnProperty("font-color")){var r=t.hasOwnProperty("color")?t.color:t["font-color"];i.color=r}else i.color=e.color;if(t.hasOwnProperty("stroke")){var o=t.stroke;i.stroke=o.hasOwnProperty("color")?o.color:e.stroke,i.strokeThickness=o.hasOwnProperty("thickness")?o.thickness:e.strokeThickness}else i.stroke=e.stroke,i.strokeThickness=e.strokeThickness}if(t.hasOwnProperty("shadow")){var l=t.shadow;i.shadowColor=l.hasOwnProperty("color")?l.color:e.shadowColor,i.shadowOffsetX=l.hasOwnProperty("offsetX")?l.offsetX:e.shadowOffsetX,i.shadowOffsetY=l.hasOwnProperty("offsetY")?l.offsetY:e.shadowOffsetY,i.shadowBlur=l.hasOwnProperty("blur")?l.blur:e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0}else i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=e.shadowStroke,i.shadowFill=e.shadowFill;if(t.hasOwnProperty("u")||t.hasOwnProperty("underline")){var h=t.hasOwnProperty("u")?t.u:t.underline;i.underlineColor=h.hasOwnProperty("color")?h.color:e.underlineColor,i.underlineThickness=h.hasOwnProperty("thickness")?h.thickness:e.underlineThickness,i.underlineOffset=h.hasOwnProperty("offset")?h.offset:e.underlineOffset}else i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset;if(t.hasOwnProperty("s")||t.hasOwnProperty("strikethrough")){var d=t.hasOwnProperty("s")?t.s:t.strikethrough;i.strikethroughColor=d.hasOwnProperty("color")?d.color:e.strikethroughColor,i.strikethroughThickness=d.hasOwnProperty("thickness")?d.thickness:e.strikethroughThickness,i.strikethroughOffset=d.hasOwnProperty("offset")?d.offset:e.strikethroughOffset}else i.strikethroughColor=e.strikethroughColor,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset;return i}getStrokeThinkness(e,t){var i;if(t.hasOwnProperty("stroke")){var s=t.stroke;i=s.hasOwnProperty("thickness")?s.thickness:e.strokeThickness}else i=e.strokeThickness;return i}propToTagText(e,t,i){return t.hasOwnProperty("_class")?""===e&&this.isTextTag(t._class)?"":`<class='${t._class}'>${e}</class>`:t.hasOwnProperty("_style")?`<style='${t._style}'>${e}</style>`:e}destroy(){this.tags=void 0}isTextTag(e){var t=this.tags[e];return!!t&&null==t.img}};var StyleToProp=function(e){for(var t,i,s,n={},a=0,r=(e=e.split(";")).length;a<r;a++)if(i=(t=e[a].split(":"))[0],s=t[1],!isEmpty(i)&&!isEmpty(s)){switch(i){case"stroke":var o=s.split(" ");s={},(l=o.length)>=1&&(s.color=o[0]),l>=2&&(s.thickness=parseInt(o[1].replace("px","")));break;case"shadow":o=s.split(" "),s={},(l=o.length)>=1&&(s.color=o[0]),l>=2&&(s.offsetX=parseInt(o[1].replace("px",""))),l>=3&&(s.offsetY=parseInt(o[2].replace("px",""))),l>=4&&(s.blur=parseInt(o[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var l;o=s.split(" "),s={},(l=o.length)>=1&&(s.color=o[0]),l>=2&&(s.thickness=parseInt(o[1].replace("px",""))),l>=3&&(s.offset=parseInt(o[2].replace("px",""))),"underline"===i?i="u":"strikethrough"===i&&(i="s");break;case"y":s=parseFloat(s)}n[i]=s}return n},isEmpty=function(e){return 0===(e=e.replace(RE_SPACE,"")).length},RE_SPLITTEXT=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,RE_CLASS_HEADER=/<\s*class=/i,RE_CLASS=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,RE_STYLE_HEADER=/<\s*style=/i,RE_STYLE=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,RE_SPACE=/^\s+|\s+$/;const GetValue$3I=Phaser.Utils.Objects.GetValue;class TagText extends Text{constructor(e,t,i,s,n){var a=GetValue$3I(n,"tags",void 0);super(e,t,i,s,n,"rexTagText",new Parser$1(a))}addTag(e,t){return this.parser.addTag(e,t),this.updateText(!0)}addTags(e){for(var t in e)this.parser.addTag(t,e[t]);return this.updateText(!0)}getTag(e){return this.parser.getTag(e)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}ObjectFactory.register("tagText",(function(e,t,i,s){var n=new TagText(this.scene,e,t,i,s);return this.scene.add.existing(n),n})),SetValue(window,"RexPlugins.UI.TagText",TagText);const GetValue$3H=Phaser.Utils.Objects.GetValue;var GetPadding$1=function(e,t){return void 0===t?e:e[t]},SetPadding$1=function(e,t,i){void 0===e&&(e={}),void 0===t&&(t=0);var s=typeof t;return"string"===s?e[t]=i:"number"===s?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=GetValue$3H(t,"left",0),e.right=GetValue$3H(t,"right",0),e.top=GetValue$3H(t,"top",0),e.bottom=GetValue$3H(t,"bottom",0)),e};let Base$3=class{constructor(e,t){this.setParent(e),this.type=t,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(e){return this.parent=e,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(e){return e&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(e){this.setDirty(this._active!=e),this._active=e}setActive(e){return void 0===e&&(e=!0),this.active=e,this}modifyPorperties(e){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(e,t){return!1}};Object.assign(Base$3.prototype,DataMethods$2);const RenderMethods={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,i=this.drawY;this.autoRound&&(t=Math.round(t),i=Math.round(i)),e.translate(t,i),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}},RotateAround$8=Phaser.Math.RotateAround;var CanvasPositionToBobPosition=function(e,t,i,s){return void 0===s?s={}:!0===s&&(void 0===globPoint$1&&(globPoint$1={}),s=globPoint$1),s.x=(e-i.drawX)/i.scaleX,s.y=(t-i.drawY)/i.scaleY,0!==i.rotation&&RotateAround$8(s,0,0,-i.rotation),s},globPoint$1;const Rectangle$5=Phaser.Geom.Rectangle;var Contains$2=function(e,t){if(0===this.width||0===this.height)return!1;var i=CanvasPositionToBobPosition(e,t,this,!0);return GetBobBounds(this).contains(i.x,i.y)},GetBobBounds=function(e){void 0===bobBounds&&(bobBounds=new Rectangle$5);var t=e.drawTLX,i=e.drawTLY;return bobBounds.setTo(t,i,e.drawTRX-t,e.drawBLY-i),bobBounds},bobBounds;const RotateAround$7=Phaser.Math.RotateAround;var BobPositionToCanvasPosition=function(e,t,i,s){return void 0===s?s={}:!0===s&&(void 0===globPoint&&(globPoint={}),s=globPoint),s.x=t,s.y=i,0!==e.rotation&&RotateAround$7(s,0,0,e.rotation),s.x=s.x*e.scaleX+e.drawX,s.y=s.y*e.scaleY+e.drawY,s},globPoint;const TransformMatrix=Phaser.GameObjects.Components.TransformMatrix;var GameObjectLocalXYToWorldXY=function(e,t,i,s){void 0===s?s={}:!0===s&&(s=globOut$1);var n=t-e.width*e.originX,a=i-e.height*e.originY;return void 0===tempMatrix$1&&(tempMatrix$1=new TransformMatrix,parentMatrix=new TransformMatrix),e.parentContainer?e.getWorldTransformMatrix(tempMatrix$1,parentMatrix):tempMatrix$1.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),tempMatrix$1.transformPoint(n,a,s),s},tempMatrix$1,parentMatrix,globOut$1={},BobPositionToWorldPosition=function(e,t,i,s,n){var a=BobPositionToCanvasPosition(t,i,s,!0);return GameObjectLocalXYToWorldXY(e,a.x,a.y,n)},GetBobWorldPosition=function(e,t,i,s,n){"number"!=typeof i&&(n=i,i=0,s=0);var a=t.drawCenterX+i,r=t.drawCenterY+s;return BobPositionToWorldPosition(e,t,a,r,n)},GetWorldPosition=function(e,t,i){return GetBobWorldPosition(this.parent,this,e,t,i)},Methods$k={contains:Contains$2,getWorldPosition:GetWorldPosition};Object.assign(Methods$k,RenderMethods);const DegToRad$g=Phaser.Math.DegToRad,RadToDeg$d=Phaser.Math.RadToDeg,GetValue$3G=Phaser.Utils.Objects.GetValue;class RenderBase extends Base$3{constructor(e,t){super(e,t),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(e){this.setDirty(this._visible!=e),this._visible=e}setVisible(e){return void 0===e&&(e=!0),this.visible=e,this}get alpha(){return this._alpha}set alpha(e){this.setDirty(this._alpha!=e),this._alpha=e}setAlpha(e){return this.alpha=e,this}get x(){return this._x}set x(e){this.setDirty(this._x!=e),this._x=e}setX(e){return this.x=e,this}get y(){return this._y}set y(e){this.setDirty(this._y!=e),this._y=e}setY(e){return this.y=e,this}setPosition(e,t){return this.x=e,this.y=t,this}setInitialPosition(e,t){return this.x0=e,this.y0=t,this}setScrollFactorX(e){return this.scrollFactorX=e,this}setScrollFactorY(e){return this.scrollFactorY=e,this}setScrollFactor(e,t){return void 0===t&&(t=e),this.scrollFactorX=e,this.scrollFactorY=t,this}get rotation(){return this._rotation}set rotation(e){this.setDirty(this._rotation!=e),this._rotation=e}setRotation(e){return this.rotation=e,this}get angle(){return RadToDeg$d(this._rotation)}set angle(e){this.rotation=DegToRad$g(e)}setAngle(e){return this.angle=e,this}get scaleX(){return this._scaleX}set scaleX(e){this.setDirty(this._scaleX!==e),this._scaleX=e}setScaleX(e){return this.scaleX=e,this}get width(){return 0}set width(e){}setWidth(e,t){return void 0===t&&(t=!1),this.width=e,t&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(e){this.setDirty(this._leftSpace!==e),this._leftSpace=e}setLeftSpace(e){return this.leftSpace=e,this}get rightSpace(){return this._rightSpace}set rightSpace(e){this.setDirty(this._rightSpace!==e),this._rightSpace=e}setRightSpace(e){return this.rightSpace=e,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(e){this.setDirty(this._scaleY!==e),this._scaleY=e}setScaleY(e){return this.scaleY=e,this}get height(){return 0}set height(e){}setHeight(e,t){return void 0===t&&(t=!1),this.height=e,t&&(this.scaleX=this.scaleY),this}setScale(e,t){return void 0===t&&(t=e),this.scaleX=e,this.scaleY=t,this}setOrigin(e){return this.originX=e,this}setAlign(e){return this.align=e,this}modifyPorperties(e){if(!e)return this;e.hasOwnProperty("x")&&this.setX(e.x),e.hasOwnProperty("y")&&this.setY(e.y),e.hasOwnProperty("rotation")?this.setRotation(e.rotation):e.hasOwnProperty("angle")&&this.setAngle(e.angle),e.hasOwnProperty("alpha")&&this.setAlpha(e.alpha);var t=GetValue$3G(e,"width",void 0),i=GetValue$3G(e,"height",void 0),s=GetValue$3G(e,"scaleX",void 0),n=GetValue$3G(e,"scaleY",void 0);return void 0!==t?void 0===i&&void 0===n?this.setWidth(t,!0):this.setWidth(t):void 0!==s&&this.setScaleX(s),void 0!==i?void 0===t&&void 0===s?this.setHeight(i,!0):this.setHeight(i):void 0!==n&&this.setScaleY(n),e.hasOwnProperty("leftSpace")&&this.setLeftSpace(e.leftSpace),e.hasOwnProperty("rightSpace")&&this.setRightSpace(e.rightSpace),e.hasOwnProperty("align")&&this.setAlign(e.align),this}setDrawBelowCallback(e){return this.drawBelowCallback=e,this}setDrawAboveCallback(e){return this.drawAboveCallback=e,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+e}get drawY(){var e=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+e}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(RenderBase.prototype,Methods$k);var GetProperty=function(e,t,i){return t.hasOwnProperty(e)?t[e]:i[e]};const GetValue$3F=Phaser.Utils.Objects.GetValue;class Background extends RenderBase{constructor(e,t){super(e,"background"),this.setScrollFactor(0),this.setColor(GetValue$3F(t,"color",null),GetValue$3F(t,"color2",null),GetValue$3F(t,"horizontalGradient",!0)),this.setStroke(GetValue$3F(t,"stroke",null),GetValue$3F(t,"strokeThickness",2)),this.setCornerRadius(GetValue$3F(t,"cornerRadius",0),GetValue$3F(t,"cornerIteration",null))}set color(e){e=GetStyle(e,this.canvas,this.context),this.setDirty(this._color!=e),this._color=e}get color(){return this._color}set color2(e){e=GetStyle(e,this.canvas,this.context),this.setDirty(this._color2!=e),this._color2=e}get color2(){return this._color2}set horizontalGradient(e){this.setDirty(this._horizontalGradient!=e),this._horizontalGradient=e}get horizontalGradient(){return this._horizontalGradient}setColor(e,t,i){return void 0===i&&(i=!0),this.color=e,this.color2=t,this.horizontalGradient=i,this}set stroke(e){e=GetStyle(e,this.canvas,this.context),this.setDirty(this._stroke!=e),this._stroke=e}get stroke(){return this._stroke}set strokeThickness(e){this.setDirty(this._strokeThickness!=e),this._strokeThickness=e}get strokeThickness(){return this._strokeThickness}setStroke(e,t){return null!=e&&void 0===t&&(t=2),this.stroke=e,this.strokeThickness=t,this}set cornerRadius(e){this.setDirty(this._cornerRadius!=e),this._cornerRadius=e}get cornerRadius(){return this._cornerRadius}set cornerIteration(e){this.setDirty(this._cornerIteration!=e),this._cornerIteration=e}get cornerIteration(){return this._cornerIteration}modifyStyle(e){return e.hasOwnProperty("color")&&this.setColor(e.color,GetProperty("color2",e,this),GetProperty("horizontalGradient",e,this)),e.hasOwnProperty("stroke")&&this.setStroke(e.stroke,GetProperty("strokeThickness",e,this)),e.hasOwnProperty("cornerRadius")&&this.setCornerRadius(e.cornerRadius,GetProperty("cornerIteration",e,this)),this}modifyPorperties(e){return super.modifyPorperties(e),this.modifyStyle(e),this}setCornerRadius(e,t){return this.cornerRadius=e,this.cornerIteration=t,this}renderContent(){DrawRoundRectangleBackground(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const GetValue$3E=Phaser.Utils.Objects.GetValue;class InnerBounds extends RenderBase{constructor(e,t){super(e,"innerbounds"),this.setScrollFactor(0),this.setColor(GetValue$3E(t,"color",null),GetValue$3E(t,"color2",null),GetValue$3E(t,"horizontalGradient",!0)),this.setStroke(GetValue$3E(t,"stroke",null),GetValue$3E(t,"strokeThickness",2))}set color(e){e=GetStyle(e,this.canvas,this.context),this.setDirty(this._color!=e),this._color=e}get color(){return this._color}set color2(e){e=GetStyle(e,this.canvas,this.context),this.setDirty(this._color2!=e),this._color2=e}get color2(){return this._color2}set horizontalGradient(e){this.setDirty(this._horizontalGradient!=e),this._horizontalGradient=e}get horizontalGradient(){return this._horizontalGradient}setColor(e,t,i){return void 0===i&&(i=!0),this.color=e,this.color2=t,this.horizontalGradient=i,this}set stroke(e){e=GetStyle(e,this.canvas,this.context),this.setDirty(this._stroke!=e),this._stroke=e}get stroke(){return this._stroke}set strokeThickness(e){this.setDirty(this._strokeThickness!=e),this._strokeThickness=e}get strokeThickness(){return this._strokeThickness}setStroke(e,t){return null!=e&&void 0===t&&(t=2),this.stroke=e,this.strokeThickness=t,this}modifyPorperties(e){super.modifyPorperties(e),e.hasOwnProperty("color")&&this.setColor(e.color,GetValue$3E(e,"color2",null),GetValue$3E(e,"horizontalGradient",!0)),e.hasOwnProperty("stroke")&&this.setStroke(e.stroke,GetValue$3E(e,"strokeThickness",2))}renderContent(){var e,t,i=this.parent.padding,s=i.left,n=i.top,a=this.parent.width-i.left-i.right,r=this.parent.height-i.top-i.bottom,o=this.context;null!=this.color&&(null!=this.color2?((t=this.horizontalGradient?o.createLinearGradient(0,0,a,0):o.createLinearGradient(0,0,0,r)).addColorStop(0,this.color),t.addColorStop(1,this.color2),e=t):e=this.color,o.fillStyle=e,o.fillRect(s,n,a,r));null!=this.stroke&&this.strokeThickness>0&&(o.strokeStyle=this.stroke,o.lineWidth=this.strokeThickness,o.strokeRect(s,n,a,r))}}const GetValue$3D=Phaser.Utils.Objects.GetValue;class TextStyle{constructor(e,t){this.parent=e,this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(e){return this.setBold(GetValue$3D(e,"bold",!1)),this.setItalic(GetValue$3D(e,"italic",!1)),this.setFontSize(GetValue$3D(e,"fontSize","16px")),this.setFontFamily(GetValue$3D(e,"fontFamily","Courier")),this.setColor(GetValue$3D(e,"color","#fff")),this.setStrokeStyle(GetValue$3D(e,"stroke",null),GetValue$3D(e,"strokeThickness",0)),this.setShadow(GetValue$3D(e,"shadowColor",null),GetValue$3D(e,"shadowOffsetX",0),GetValue$3D(e,"shadowOffsetY",0),GetValue$3D(e,"shadowBlur",0)),this.setOffset(GetValue$3D(e,"offsetX",0),GetValue$3D(e,"offsetY",0)),this.setSpace(GetValue$3D(e,"leftSpace",0),GetValue$3D(e,"rightSpace",0)),this.setAlign(GetValue$3D(e,"align",void 0)),this.setBackgroundColor(GetValue$3D(e,"backgroundColor",null)),this.setBackgroundHeight(GetValue$3D(e,"backgroundHeight",void 0)),this.setBackgroundBottomY(GetValue$3D(e,"backgroundBottomY",void 0)),this.setBackgroundLeftX(GetValue$3D(e,"backgroundLeftX",0)),this.setBackgroundRightX(GetValue$3D(e,"backgroundRightX",0)),this}modify(e){return e.hasOwnProperty("bold")&&this.setBold(e.bold),e.hasOwnProperty("italic")&&this.setItalic(e.italic),e.hasOwnProperty("fontSize")&&this.setFontSize(e.fontSize),e.hasOwnProperty("fontFamily")&&this.setFontFamily(e.fontFamily),e.hasOwnProperty("color")&&this.setColor(e.color),(e.hasOwnProperty("stroke")||e.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(GetProperty("stroke",e,this),GetProperty("strokeThickness",e,this)),e.hasOwnProperty("shadowColor")&&this.setShadowColor(e.shadowColor),(e.hasOwnProperty("shadowOffsetX")||e.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(GetProperty("shadowOffsetX",e,this),GetProperty("shadowOffsetY",e,this)),e.hasOwnProperty("shadowBlur")&&this.setShadowBlur(e.shaodwBlur),e.hasOwnProperty("offsetX")&&this.setOffsetX(e.offsetX),e.hasOwnProperty("offsetY")&&this.setOffsetY(e.offsetY),e.hasOwnProperty("leftSpace")&&this.setLeftSpace(e.leftSpace),e.hasOwnProperty("rightSpace")&&this.setRightSpace(e.rightSpace),e.hasOwnProperty("align")&&this.setAlign(e.align),e.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(e.backgroundColor),e.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(e.backgroundHeight),e.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(e.backgroundBottomY),e.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(e.backgroundLeftX),e.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(e.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new TextStyle(null,this.toJSON())}copyFrom(e){return this.set(e.toJSON()),this}copyTo(e){return e.set(this.toJSON()),this}setBold(e){return void 0===e&&(e=!0),this.bold=e,this.setUpdateTextFlag(),this}setItalic(e){return void 0===e&&(e=!0),this.italic=e,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(e){return"number"==typeof e&&(e=`${e}px`),this.fontSize=e,this.setUpdateTextFlag(),this}setFontFamily(e){return this.fontFamily=e,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(e){return this.color=GetStyle(e),this}get hasFill(){return null!=this.color}setStrokeStyle(e,t){return this.stroke=GetStyle(e),void 0!==t&&(this.strokeThickness=t),this}setStrokeThickness(e){return this.strokeThickness=e,this}get hasStroke(){return null!=this.stroke&&this.strokeThickness>0}setShadowColor(e){return this.shadowColor=GetStyle(e),this}setShadowOffset(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.shadowOffsetX=e,this.shadowOffsetY=t,this}setShadowBlur(e){return void 0===e&&(e=0),this.shaodwBlur=e,this}setShadow(e,t,i,s){return this.setShadowColor(e).setShadowOffset(t,i).setShadowBlur(s),this}setBackgroundColor(e){return this.backgroundColor=GetStyle(e),this}get hasBackgroundColor(){return null!=this.backgroundColor}setBackgroundHeight(e){return this.backgroundHeight=e,this}setBackgroundBottomY(e){return this.backgroundBottomY=e,this}setBackgroundLeftX(e){return this.backgroundLeftX=e,this}setBackgroundRightX(e){return this.backgroundRightX=e,this}setOffsetX(e){return void 0===e&&(e=0),this.offsetX=e,this}setOffsetY(e){return void 0===e&&(e=0),this.offsetY=e,this}setOffset(e,t){return this.setOffsetX(e).setOffsetY(t),this}setLeftSpace(e){return void 0===e&&(e=0),this.leftSpace=e,this}setRightSpace(e){return void 0===e&&(e=0),this.rightSpace=e,this}setSpace(e,t){return this.setLeftSpace(e).setRightSpace(t),this}setAlign(e){return this.align=e,this}syncFont(e){return e.font=this.font,this}syncStyle(e){e.textBaseline="alphabetic";var t=this.hasFill,i=this.hasStroke;return e.fillStyle=t?this.color:"#000",e.strokeStyle=i?this.stroke:"#000",e.lineWidth=i?this.strokeThickness:0,e.lineCap="round",e.lineJoin="round",this}syncShadow(e){null!=e.shadowColor?(e.shadowColor=this.shadowColor,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowBlur=this.shadowBlur):(e.shadowColor=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0)}getTextMetrics(e,t){return this.syncFont(e).syncStyle(e),e.measureText(t)}}var SetFixedSize=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.fixedWidth===e&&this.fixedHeight===t||(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height)),this},SetPadding=function(e,t){var i=this.padding,s=i.left,n=i.right,a=i.top,r=i.bottom;return SetPadding$1(i,e,t),this.dirty=this.dirty||s!=i.left||n!=i.right||a!=i.top||r!=i.bottom,this},GetPadding=function(e){return GetPadding$1(this.padding,e)},ModifyTextStyle=function(e){return this.textStyle.modify(e),this},ModifyDefaultTextStyle=function(e){return this.defaultTextStyle.modify(e),this},ResetTextStyle=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},SetTestString=function(e){return this.testString=e,this};const RemoveItem$d=Phaser.Utils.Array.Remove;var RemoveChild$2=function(e){return this.poolManager.free(e),RemoveItem$d(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},RemoveChildren=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const RemoveItem$c=Phaser.Utils.Array.Remove;var PopChild=function(e){return RemoveItem$c(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},ClearContent=function(){return this.setText(),this},AddChild$3=function(e,t){var i=Array.isArray(e);return void 0===t||t===this.children.length?i?this.children.push(...e):this.children.push(e):i?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,i?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this};const CharTypeName="text",ImageTypeName="image",DrawerTypeName="drawer",SpaceTypeName="space",CmdTypeName="command";var IsNewLineChar=function(e){return e.type===CharTypeName&&"\n"===e.text},IsPageBreakChar=function(e){return e.type===CharTypeName&&"\f"===e.text},IsSpaceChar=function(e){return e.type===CharTypeName&&" "===e.text},IsChar=function(e){return e.type===CharTypeName},IsCommand=function(e){return e.type===CmdTypeName};class CharData extends RenderBase{constructor(e,t,i){super(e,CharTypeName),this.updateTextFlag=!1,this.style=new TextStyle(this,i),this.setText(t)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(e){this.style&&(this.style.offsetX=e)}get offsetY(){return this.style.offsetY}set offsetY(e){this.style&&(this.style.offsetY=e)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(e){this.style&&(this.style.leftSpace=e),super.leftSpace=e}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(e){this.style&&(this.style.rightSpace=e),super.rightSpace=e}get align(){return this.style.align}set align(e){this.style&&(this.style.align=e)}modifyStyle(e){return this.setDirty(!0),this.style.modify(e),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(e){return e?(this.modifyStyle(e),super.modifyPorperties(e),this):this}setText(e){return this.setDirty(this.text!=e),this.text=e,this.updateTextSize(),this}updateTextSize(){var e=this.text;if("\n"===e||"\f"===e||""===e)this.clearTextSize();else{var t,i,s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width,"actualBoundingBoxAscent"in s?(t=s.actualBoundingBoxAscent,i=s.actualBoundingBoxDescent):(t=0,i=0),this.textHeight=t+i,this.ascent=t,this.descent=i}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(e){return this.textWidth=e.textWidth,this.textHeight=e.textHeight,this.ascent=e.ascent,this.descent=e.descent,this}get width(){return this.textWidth*this.scaleX}set width(e){this.textWidth>0?this.scaleX=e/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(e){this.textHeight>0?this.scaleY=e/this.textHeight:this.scaleY=1}get willRender(){return 0!==this.textWidth&&super.willRender}renderContent(){var e=this.context,t=this.style;if(t.hasBackgroundColor){e.fillStyle=t.backgroundColor;var i=this.drawTLX+t.backgroundLeftX,s=i,n=this.drawTRX+t.backgroundRightX-i+1;if(n>0){var a=t.backgroundBottomY;null==a&&(a=this.drawBLY);var r=t.backgroundHeight;null==r&&(r=a-this.drawTLY);var o=a-r;e.fillRect(s,o,n,r)}}var l=t.hasFill,h=t.hasStroke;(l||h)&&(t.syncFont(e).syncStyle(e),h&&(t.syncShadow(e),e.strokeText(this.text,0,0)),l&&(t.syncShadow(e),e.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var CreateCharChild=function(e,t){t&&this.textStyle.modify(t);var i=this.poolManager.allocate(CharTypeName);return null===i?i=new CharData(this,e,this.textStyle):i.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),i},CreateCharChildren=function(e,t){t&&this.textStyle.modify(t);for(var i=[],s=0,n=e.length;s<n;s++){var a=e.charAt(s),r=this.poolManager.allocate(CharTypeName);null===r?r=new CharData(this,a,this.textStyle):r.setParent(this).setActive().modifyStyle(this.textStyle).setText(a),i.push(r)}return i},AppendText=function(e,t){var i=this.createCharChildren(e,t);return this.addChild(i),this},SetText$2=function(e,t){return void 0===e&&(e=""),this.removeChildren(),AppendText.call(this,e,t),this.dirty=!0,this},InsertText=function(e,t,i){var s=this.createCharChildren(t,i);return e=this.getCharChildIndex(e,!0),this.addChild(s,e),this},RemoveText=function(e,t){void 0===t&&(t=1);for(var i=0;i<t;i++){var s=this.getCharChildIndex(e,!0);if(void 0===s)break;this.removeChild(this.children[s])}return this},GetText=function(e){var t="";return this.forEachCharChild((function(e){t+=e.text}),void 0,e),t};Phaser.Display.Canvas.CanvasPool;class ImageData extends RenderBase{constructor(e,t,i){super(e,ImageTypeName),this.setTexture(t,i),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(e){}get key(){return this._key}set key(e){this.setDirty(this._key!=e),this._key=e}get frame(){return this._frame}set frame(e){this.setDirty(this._frame!=e),this._frame=e}setTexture(e,t){return this.key=e,this.frame=t,this.frameObj=this.scene.sys.textures.getFrame(e,t),this}get width(){return this.frameWidth*this.scaleX}set width(e){this.setDirty(this.width!==e),this.scaleX=e/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(e){this.setDirty(this.height!==e),this.scaleY=e/this.frameHeight}setHeight(e,t){return void 0===t&&(t=!1),this.height=e,t&&(this.scaleX=this.scaleY),this}setColor(e){return this.color=e,this}modifyPorperties(e){return e.hasOwnProperty("color")&&this.setColor(e.color),super.modifyPorperties(e),this}renderContent(){DrawFrameToCanvas(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var CreateImageChild=function(e,t,i){var s=this.poolManager.allocate(ImageTypeName);return null===s?s=new ImageData(this,e,t):s.setParent(this).setActive().setTexture(e,t),s.modifyPorperties(i),s},AppendImage=function(e,t,i){var s=this.createImageChild(e,t,i);return this.addChild(s),this};class Drawer extends RenderBase{constructor(e,t,i,s){super(e,DrawerTypeName),this.setRenderCallback(t),this.setDrawerSize(i,s)}setRenderCallback(e){return e?this.renderContent=e.bind(this):delete this.renderContent,this}setDrawerSize(e,t){return!0===e?(this.toLocalPosition=!1,e=void 0,t=void 0):this.toLocalPosition=!0,void 0===e&&(e=0),void 0===t&&(t=e),this.drawerWidth=e,this.drawerHeight=t,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(e){this.setDirty(this.width!==e),this.scaleX=this.drawerWidth>0?e/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(e){this.setDirty(this.height!==e),this.scaleY=this.drawerHeight>0?e/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(e){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var CreateDrawerChild=function(e,t,i){var s=this.poolManager.allocate(DrawerTypeName);return null===s?s=new Drawer(this,e,t,i):s.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,i),s},AppendDrawer=function(e,t,i){var s=this.createDrawerChild(e,t,i);return this.addChild(s),this};let Space$1=class extends RenderBase{constructor(e,t){super(e,SpaceTypeName),this.setSpaceWidth(t)}get width(){return this.spaceWidth*this.scaleX}set width(e){this.spaceWidth>0?this.scaleX=e/this.spaceWidth:this.scaleX=1}setSpaceWidth(e){return this.spaceWidth=e,this}};var CreateSpaceChild=function(e){var t=this.poolManager.allocate(SpaceTypeName);return null===t?t=new Space$1(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},AppendSpace=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class Command extends Base$3{constructor(e,t,i,s,n){super(e,CmdTypeName),this.setName(t).setParameter(s).setCallback(i,n)}setName(e){return this.name=e,this}setParameter(e){return this.param=e,this}setCallback(e,t){return this.callback=e,this.scope=t,this}exec(){return this.scope?this.callback.call(this.scope,this.param,this.name):this.callback(this.param,this.name)}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var CreateCommandChild=function(e,t,i,s){var n=this.poolManager.allocate(CmdTypeName);return null===n?n=new Command(this,e,t,i,s):n.setParent(this).setActive().setName(e).setCallback(t,s).setParameter(i),n},AppendCommand$3=function(e,t,i,s){var n=this.createCommandChild(e,t,i,s);return this.addChild(n),this},SetWrapConfig=function(e){return void 0===e?e={}:"object"==typeof e&&(e=DeepClone(e)),this.wrapConfig=e,this},CreateWrapResultData=function(e){return Object.assign({callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0},e)};const WRAPMODE={none:0,word:1,char:2,character:2,mix:3};var GetWord=function(e,t,i,s){void 0===s&&(s={word:[],width:0}),s.word.length=0;for(var n=2===i,a=3===i,r=!n&&!a,o=e.length,l=t,h=s.word,d=0,c=!1;l<o;){var u=e[l];if(u.renderable){var p=u.type===CharTypeName?u.text:null;if(null===p||"\n"===p||"\f"===p){l===t&&(h.push(u),d+=u.outerWidth);break}if(r){if(h.push(u),d+=u.outerWidth," "===p)break;l++}else{if(n){h.push(u),d+=u.outerWidth;break}if(a){if(!IsASCIIString(p)){if(c)break;h.push(u),d+=u.outerWidth;var g=e[l+1];g&&g.type===CharTypeName&&" "===g.text&&(h.push(g),d+=g.outerWidth);break}if(h.push(u),d+=u.outerWidth," "===p)break;l++,c=!0}}}else h.push(u),l++}return s.width=d,s},GetChildrenAlign=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];if(void 0!==s.align)return s.align}},OffsetChildren=function(e,t,i){if(0!==t||0!==i)for(var s=0,n=e.length;s<n;s++){var a=e[s];a.renderable&&(a.x+=t,a.y+=i)}},AlignLines$1=function(e,t,i){for(var s,n,a=e.hAlign,r=e.vAlign,o=e.justifyPercentage,l=e.lines,h=0,d=l.length;h<d;h++){var c=l[h],u=c.width,p=c.children,g=GetChildrenAlign(p);switch(void 0===g&&(g=a),g){case 0:case"left":default:s=0;break;case 1:case"center":s=(m=t-u)/2;break;case 2:case"right":s=m=t-u;break;case 3:case"justify":case"justify-left":(m=t-u)/t<o?(JustifyChildren(p,m),s=0):s=0;break;case 4:case"justify-center":(m=t-u)/t<o?(JustifyChildren(p,m),s=0):s=m/2;break;case 5:case"justify-right":var m;(m=t-u)/t<o?(JustifyChildren(p,m),s=0):s=m}var f=e.linesHeight;switch(r){case 1:case"center":n=(i-f)/2;break;case 2:case"bottom":n=i-f;break;default:n=0}OffsetChildren(p,s,n)}},JustifyChildren=function(e,t){for(var i=t/e.length,s=0,n=e.length;s<n;s++){var a=e[s];a.renderable&&(a.x+=i*s)}},GetDefaultTextHeight=function(){var e,t,i=this.defaultTextStyle.getTextMetrics(this.context,this.testString);return"actualBoundingBoxAscent"in i?(e=i.actualBoundingBoxAscent,t=i.actualBoundingBoxDescent):(e=0,t=0),Result.ascent=e,Result.descent=t,Result.height=e+t,Result},Result={};const GetValue$3C=Phaser.Utils.Objects.GetValue;var RunWordWrap$1=function(e){var t=GetValue$3C(e,"start",0);SetPadding$1(this.wrapPadding,GetValue$3C(e,"padding",0));var i,s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,n=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,a=GetValue$3C(e,"lineHeight"),r=GetValue$3C(e,"ascent",a);if(void 0===a){var o=GetValue$3C(e,"useDefaultTextHeight",!1);if(i=GetValue$3C(e,"maxLines",0),this.fixedHeight>0&&!o){var l=this.fixedHeight-s;i>0?a=l/i:(a=(h=GetDefaultTextHeight.call(this)).height,r=h.ascent,i=Math.floor((l-r)/a))}else{var h;a=(h=GetDefaultTextHeight.call(this)).height,r=h.ascent}}else this.fixedHeight>0?void 0===(i=GetValue$3C(e,"maxLines"))&&(l=this.fixedHeight-s,i=Math.floor(l/a)):i=GetValue$3C(e,"maxLines",0);void 0===r&&(r=a);var d=0===i,c=GetValue$3C(e,"wrapMode");void 0===c&&(c=GetValue$3C(e,"charWrap",!1)?"char":"word"),"string"==typeof c&&(c=WRAPMODE[c]);var u=GetValue$3C(e,"wrapWidth",void 0);void 0===u&&(this.fixedWidth>0?u=this.fixedWidth-n:(u=1/0,c=0));for(var p=GetValue$3C(e,"letterSpacing",0),g=GetValue$3C(e,"hAlign",0),m=GetValue$3C(e,"vAlign",0),f=GetValue$3C(e,"justifyPercentage",.25),v=CreateWrapResultData({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:p,maxLines:i,hAlign:g,vAlign:m,justifyPercentage:f,ascent:r,lineHeight:a,wrapWidth:u,wrapMode:c}),b=this.children,y=0,C=b.length;y<C;y++)b[y].setActive(!1);u+=p;for(var x,S=this.padding.left+this.wrapPadding.left,w=S,T=this.padding.top+this.wrapPadding.top+r,P=u,_=t,M=b.length,O=v.children,k=v.lines,$=[],G=0,E=0,V=!1;_<M;){var R=(x=GetWord(b,_,c,x)).word,I=R.length,A=x.width+I*p;_+=I;var D=IsNewLineChar(R[0]);V=IsPageBreakChar(R[0]);var B=D||V;if(P<A||B){if(B){var L=R[0];L.setActive().setPosition(w,T),O.push(L),$.push(L)}if(w=S,T+=a,P=u,k.push({children:$,width:G}),E=Math.max(E,G),G=0,$=[],V||!d&&k.length===i)break;if(B)continue}for(P-=A,G+=A,y=0,C=R.length;y<C;y++)(N=R[y]).setActive(),O.push(N),$.push(N),N.renderable&&(N.setPosition(w,T),w+=N.outerWidth+p)}$.length>0&&(k.push({children:$,width:G}),E=Math.max(E,G)),v.start+=O.length,v.isLastPage=!V&&v.start===M,v.maxLineWidth=E,v.linesHeight=k.length*a;var F=this.fixedWidth>0?this.fixedWidth:v.maxLineWidth+n,j=this.fixedHeight>0?this.fixedHeight:v.linesHeight+s;for(AlignLines$1(v,F-n,l=j-s),this.setCanvasSize(F,j),y=0,C=O.length;y<C;y++){var N;(N=O[y]).renderable&&(N.x0=N.x,N.y0=N.y)}return v};const Merge$6=Phaser.Utils.Objects.Merge;var RunWordWrap=function(e){return void 0===e&&(e={}),RunWordWrap$1.call(this,Merge$6(e,this.wrapConfig))},AlignLines=function(e,t,i){var s,n,a=e.hAlign,r=e.vAlign,o=e.rtl,l=e.lines,h=e.lineWidth,d=e.linesWidth;switch(a){case 1:case"center":s=(t-d)/2;break;case 2:case"right":s=t-d;break;default:s=0}o&&(s+=h);for(var c=0,u=l.length;c<u;c++){var p=l[o?u-c-1:c],g=p.children,m=p.height,f=GetChildrenAlign(g);switch(void 0===f&&(f=r),f){case 1:case"center":n=(i-m)/2;break;case 2:case"bottom":n=i-m;break;default:n=0}OffsetChildren(g,s,n),s+=h}};const GetValue$3B=Phaser.Utils.Objects.GetValue;var RunVerticalWrap$1=function(e){var t=GetValue$3B(e,"start",0);SetPadding$1(this.wrapPadding,GetValue$3B(e,"padding",0));var i,s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,n=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,a=GetValue$3B(e,"lineWidth",void 0);if(void 0===a)i=GetValue$3B(e,"maxLines",0),a=this.fixedWidth>0?(r=this.fixedWidth-n)/i:0;else if(this.fixedWidth>0){if(void 0===(i=GetValue$3B(e,"maxLines",void 0))){var r=this.fixedWidth-n;i=Math.floor(r/a)+1}}else i=GetValue$3B(e,"maxLines",0);var o=0===i,l=GetValue$3B(e,"fixedCharacterHeight",void 0);if(void 0===l){var h=GetValue$3B(e,"charPerLine",void 0);if(void 0!==h){var d=this.fixedHeight-s;l=Math.floor(d/h)}}var c=GetValue$3B(e,"wrapHeight",void 0);void 0===c&&(c=this.fixedHeight>0?this.fixedHeight-s:1/0);for(var u=GetValue$3B(e,"letterSpacing",0),p=GetValue$3B(e,"rtl",!0),g=GetValue$3B(e,"hAlign",p?2:0),m=GetValue$3B(e,"vAlign",0),f=CreateWrapResultData({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:u,maxLines:i,hAlign:g,vAlign:m,lineWidth:a,fixedCharacterHeight:l,wrapHeight:c,rtl:p}),v=this.children,b=0,y=v.length;b<y;b++)v[b].setActive(!1);c+=u;for(var C=this.padding.left+this.wrapPadding.left,x=this.padding.top+this.wrapPadding.top,S=C,w=x,T=c,P=t,_=v.length,M=f.children,O=f.lines,k=[],$=0,G=0;P<_;){var E=v[P];if(P++,E.renderable){var V=(void 0!==l?l:E.height)+u,R=IsNewLineChar(E),I=IsPageBreakChar(E),A=R||I;if(T<V||A){if(R&&(E.setActive().setPosition(S,w).setOrigin(.5),M.push(E),k.push(E)),S=C,w=x,T=c,O.push({children:k,height:$}),G=Math.max(G,$),$=0,k=[],I||!o&&O.length===i)break;if(A)continue}T-=V,$+=V,E.setActive().setPosition(S,w).setOrigin(.5),M.push(E),k.push(E),w+=V}else E.setActive(),M.push(E),k.push(E)}k.length>0&&(O.push({children:k,height:$}),G=Math.max(G,$)),f.start+=M.length,f.isLastPage=f.start===_,f.maxLineHeight=G,f.linesWidth=O.length*a;var D=this.fixedWidth>0?this.fixedWidth:f.linesWidth+n,B=this.fixedHeight>0?this.fixedHeight:f.maxLineHeight+s;for(AlignLines(f,r=D-n,d=B-s),this.setCanvasSize(D,B),b=0,y=M.length;b<y;b++)(E=M[b]).renderable&&(E.x0=E.x,E.y0=E.y);return f};const Merge$5=Phaser.Utils.Objects.Merge;var RunVerticalWrap=function(e){return void 0===e&&(e={}),RunVerticalWrap$1.call(this,Merge$5(e,this.wrapConfig))};const GetValue$3A=Phaser.Utils.Objects.GetValue;var RunWrap=function(e){var t=GetValue$3A(this.wrapConfig,"callback");return t||(t=GetValue$3A(e,"callback",this.runWordWrap)),"string"==typeof t&&(t=this[t]),t.call(this,e)};const SetAlignMethods={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},SetTextOXYMethods$1={setTextOX(e){return e===this._textOX||(this._textOX=e),this},setTextOY(e){return e===this._textOY||(this._textOY=e),this},setTextOXY(e,t){if(e!==this._textOX||t!==this._textOY)return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}};var RenderContent=function(){var e;this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var t=0,i=this.children.length;t<i;t++)(e=this.children[t]).active&&e.render();this.innerBounds.active&&this.innerBounds.render()},ForEachChild=function(e,t,i){void 0===i&&(i=!0);for(var s=this.children.filter((function(e){return!(i&&!e.active)})),n=0,a=s.length;n<a;n++){var r=s[n];if(t?e.call(this,r,n,s):e(r,n,s))break}return this},ForEachRenderableChild=function(e,t,i){void 0===i&&(i=!0);for(var s=this.children.filter((function(e){return!(i&&!e.active||!e.renderable||e.removed)})),n=0,a=s.length;n<a;n++){var r=s[n];if(t?e.call(this,r,n,s):e(r,n,s))break}return this},ForEachCharChild=function(e,t,i){void 0===i&&(i=!0);for(var s=this.children.filter((function(e){return!(i&&!e.active||!IsChar(e)||e.removed)})),n=0,a=s.length;n<a;n++){var r=s[n];if(t?e.call(this,r,n,s):e(r,n,s))break}return this},GetChildren=function(){return this.children};const GetAll=Phaser.Utils.Array.GetAll;var GetActiveChildren=function(){return GetAll(this.children,"active",!0)},GetCharChildren=function(e,t){return void 0===t&&(t=[]),this.forEachCharChild((function(e){t.push(e)}),void 0,e),t},GetLastAppendedChildren=function(){return this.lastAppendedChildren},GetBobCenterPosition=function(e,t,i,s){"number"!=typeof t&&(s=t,t=0,i=0);var n=e.drawCenterX+t,a=e.drawCenterY+i;return BobPositionToCanvasPosition(e,n,a,s)};const GetDistance$1=Phaser.Math.Distance.BetweenPointsSquared;var GetNearestChild=function(e,t){var i={x:e,y:t},s=1/0,n=null;return this.forEachRenderableChild((function(e){var t=GetDistance$1(i,GetBobCenterPosition(e,!0));s>t&&(s=t,n=e)})),n},GetCharWorldPosition=function(e,t,i,s){return"number"==typeof e&&(e=this.getCharChild(e,!0)),GetBobWorldPosition(this,e,t,i,s)},SetToMinSize=function(){for(var e=this.children,t=0,i=0,s=0,n=e.length;s<n;s++){var a=e[s];if(a.renderable&&a.active&&a.visible){var r=void 0!==a.x0?a.x0:a.x,o=void 0!==a.y0?a.y0:a.y;t=Math.max(t,r),i=Math.max(i,o)}}var l=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,h=i+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return this.width===l&&this.height===h||(this.dirty=!0,this.setCanvasSize(l,h)),this},GetCharChildIndex=function(e,t){void 0===t&&(t=!0);for(var i=this.children,s=0,n=i.length;s<n;s++){var a=i[s];if((!t||a.active)&&IsChar(a)&&!a.removed){if(0===e)return s;e--}}},GetCharChild=function(e,t){void 0===t&&(t=!0);for(var i=this.children,s=0,n=i.length;s<n;s++){var a=i[s];if((!t||a.active)&&IsChar(a)&&!a.removed){if(0===e)return a;e--}}},GetCharIndex=function(e,t){if("number"!=typeof e&&(e=this.children.indexOf(e))<0)return null;void 0===t&&(t=!0);var i=this.children;e>=i.length&&(e=i.length);for(var s=0,n=0;n<e;n++){var a=i[n];t&&!a.active||IsChar(a)&&!a.removed&&s++}return s},SetChildrenInteractiveEnable=function(e){return void 0===e&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},GetFirstChildContains=function(e,t,i){for(var s=0,n=e.length;s<n;s++){var a=e[s];if(a.active&&a.renderable&&a.contains(t,i))return a}return null},SetChildrenInteractive$2=function(){return this.on("pointerdown",OnPointerDown$1,this).on("pointerdown",OnPointerUp$1,this).on("pointermove",OnPointOverOut,this).on("pointerover",OnPointOverOut,this).on("pointerout",(function(e,t){OnPointOverOut.call(this,e,null,null,t)}),this),this},OnPointerDown$1=function(e,t,i,s){if(this.childrenInteractiveEnable){var n=GetFirstChildContains(this.children,t,i);n&&this.emit("child.pointerdown",n,e,t,i,s)}},OnPointerUp$1=function(e,t,i,s){if(this.childrenInteractiveEnable){var n=GetFirstChildContains(this.children,t,i);n&&this.emit("child.pointerup",n,e,t,i,s)}},OnPointOverOut=function(e,t,i,s){if(this.childrenInteractiveEnable)if(null!==t){var n=GetFirstChildContains(this.children,t,i);n!==this.lastOverChild&&(null!==this.lastOverChild&&this.emit("child.pointerout",this.lastOverChild,e,t,i,s),null!==n&&this.emit("child.pointerover",n,e,t,i,s),this.lastOverChild=n)}else null!==this.lastOverChild&&(this.emit("child.pointerout",this.lastOverChild,e,t,i,s),this.lastOverChild=null)};const GameObject=Phaser.GameObjects.GameObject;var SetInteractive=function(e,t,i){var s=!!this.input;return GameObject.prototype.setInteractive.call(this,e,t,i),s||SetChildrenInteractive$2.call(this),this};const BringToTop=Phaser.Utils.Array.BringToTop,SendToBack=Phaser.Utils.Array.SendToBack,MoveUp=Phaser.Utils.Array.MoveUp,MoveDown=Phaser.Utils.Array.MoveDown,MoveAbove=Phaser.Utils.Array.MoveAbove,MoveBelow=Phaser.Utils.Array.MoveBelow,MoveChildMethods={moveChildToFist(e){return SendToBack(this.children,e),this},moveChildToLast(e){return BringToTop(this.children,e),this},movechildUp(e){return MoveUp(this.children,e),this},movechildDown(e){return MoveDown(this.children,e),this},movechildAbove(e,t){return MoveAbove(this.children,e,t),this},movechildBelow(e,t){return MoveBelow(this.children,e,t),this}},BackgroundMethods={setBackgroundColor(e,t,i){return this.background.setColor(e,t,i),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},InnerBoundsMethods={setInnerBoundsColor(e,t,i){return this.innerBounds.setColor(e,t,i),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}};var Methods$j={setFixedSize:SetFixedSize,setPadding:SetPadding,getPadding:GetPadding,modifyTextStyle:ModifyTextStyle,modifyDefaultTextStyle:ModifyDefaultTextStyle,resetTextStyle:ResetTextStyle,setTestString:SetTestString,removeChild:RemoveChild$2,removeChildren:RemoveChildren,popChild:PopChild,clearContent:ClearContent,addChild:AddChild$3,createCharChild:CreateCharChild,createCharChildren:CreateCharChildren,setText:SetText$2,appendText:AppendText,insertText:InsertText,removeText:RemoveText,getText:GetText,createImageChild:CreateImageChild,appendImage:AppendImage,createDrawerChild:CreateDrawerChild,appendDrawer:AppendDrawer,createSpaceChild:CreateSpaceChild,appendSpace:AppendSpace,createCommandChild:CreateCommandChild,appendCommand:AppendCommand$3,setWrapConfig:SetWrapConfig,runWordWrap:RunWordWrap,runVerticalWrap:RunVerticalWrap,runWrap:RunWrap,renderContent:RenderContent,forEachChild:ForEachChild,forEachRenderableChild:ForEachRenderableChild,forEachCharChild:ForEachCharChild,getChildren:GetChildren,getActiveChildren:GetActiveChildren,getCharChildren:GetCharChildren,getLastAppendedChildren:GetLastAppendedChildren,getNearestChild:GetNearestChild,getCharWorldPosition:GetCharWorldPosition,setToMinSize:SetToMinSize,getCharChildIndex:GetCharChildIndex,getCharChild:GetCharChild,getCharIndex:GetCharIndex,setChildrenInteractiveEnable:SetChildrenInteractiveEnable,setInteractive:SetInteractive};Object.assign(Methods$j,MoveChildMethods,BackgroundMethods,InnerBoundsMethods,SetAlignMethods,SetTextOXYMethods$1);const GetFastValue$1=Phaser.Utils.Objects.GetFastValue;var Pools={};class PoolManager{constructor(e){this.pools=GetFastValue$1(e,"pools",Pools)}free(e){if(!this.pools)return this;var t=e.type;return this.pools.hasOwnProperty(t)||(this.pools[t]=new Stack),this.pools[t].push(e),e.onFree(),this}freeMultiple(e){if(!this.pools)return this;for(var t=0,i=e.length;t<i;t++)this.free(e[t]);return this}allocate(e){return this.pools&&this.pools.hasOwnProperty(e)?this.pools[e].pop():null}}const IsPlainObject$O=Phaser.Utils.Objects.IsPlainObject,GetValue$3z=Phaser.Utils.Objects.GetValue;class DynamicText extends Canvas$1{constructor(e,t,i,s,n,a,r){IsPlainObject$O(t)?(t=GetValue$3z(r=t,"x",0),i=GetValue$3z(r,"y",0),s=GetValue$3z(r,"width",0),n=GetValue$3z(r,"height",0),a=GetValue$3z(r,"resolution",1)):IsPlainObject$O(s)?(s=GetValue$3z(r=s,"width",0),n=GetValue$3z(r,"height",0),a=GetValue$3z(r,"resolution",1)):IsPlainObject$O(a)&&(a=GetValue$3z(r=a,"resolution",1)),super(e,t,i,0===s?1:s,0===n?1:n,a),this.type="rexDynamicText",this.autoRound=!0,this.padding=SetPadding$1(),this.wrapPadding=SetPadding$1();var o=GetValue$3z(r,"style",void 0);this.defaultTextStyle=new TextStyle(null,o),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(GetValue$3z(r,"testString","|Mqgy")),this._textOX=0,this._textOY=0,this.background=new Background(this,GetValue$3z(r,"background",void 0)),this.innerBounds=new InnerBounds(this,GetValue$3z(r,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new PoolManager(r),this.setFixedSize(s,n),this.setPadding(GetValue$3z(r,"padding",0)),this.setWrapConfig(GetValue$3z(r,"wrap",void 0)),this.setChildrenInteractiveEnable(GetValue$3z(r,"childrenInteractive",!1));var l=GetValue$3z(r,"text",void 0);l&&this.setText(l)}updateTexture(){return super.updateTexture((function(){this.renderContent()}),this),this}get text(){return this.getText(!0)}set text(e){this.setText(e)}setSize(e,t){return this.setFixedSize(e,t),this}get textOX(){return this._textOX}set textOX(e){this.setTextOX(e)}get textOY(){return this._textOY}set textOY(e){this.setTextOY(e)}}Object.assign(DynamicText.prototype,Methods$j),ObjectFactory.register("dynamicText",(function(e,t,i,s,n){var a=new DynamicText(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.DynamicText",DynamicText);const EventEmitterMethods$1={setEventEmitter(e,t){return void 0===t&&(t=Phaser.Events.EventEmitter),this._privateEE=!0===e||void 0===e,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},PropertyMethods$1={hasProperty(e){var t=this.gameObject;return!!t.hasOwnProperty(e)||void 0!==t[e]},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(e){var t=e.property,i=e.value,s=e.duration,n=e.delay,a=e.ease,r=e.repeat,o=e.yoyo,l=e.from,h=e.complete,d=e.target;if(void 0===s&&(s=1e3),void 0===n&&(n=0),void 0===a&&(a="Linear"),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===d&&(d=this.gameObject),l){var c=i;i=d[t],d[t]=c}return(e={targets:d,duration:s,delay:n,ease:a,repeat:r,yoyo:o,onComplete:h})[t]=i,this.addTweenTask(t,e),this},addTweenTask(e,t){var i=this.tweens,s=i[e];s&&s.remove();var n=t.onComplete;return t.onComplete=function(){i[e].remove(),i[e]=null,n&&n(t.targets,e)},(s=this.scene.tweens.add(t)).timeScale=this.timeScale,i[e]=s,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e,t=this.tweens;for(var i in t)(e=t[i])&&e.remove(),t[i]=null;return this}},CallMethods$1={hasMethod(e){return"function"==typeof this.gameObject[e]},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var i=this.gameObject;return i[e].apply(i,t),this}},DataMethods$1={hasData(e){var t=this.gameObject;return!!t.data&&t.data.has(e)},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class BobBase{constructor(e,t,i){this.GOManager=e,this.tweens={},this.effects={},this.setGO(t,i)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(e,t){return e.goName=t,e.goType=this.GOManager.name,e.bob=this,this.gameObject=e,this.name=t,this.freeTweens(),this}setTimeScale(e){var t=this.tweens;for(var i in t){var s=t[i];s&&(s.timeScale=e)}return this}}Object.assign(BobBase.prototype,PropertyMethods$1,CallMethods$1,DataMethods$1);var IsEmpty=function(e){for(var t in e)return!1;return!0},IsSingleBob=function(e){return e&&"!"!==e.charAt(0)};const GetMethods={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(IsSingleBob(e))return this.bobs[e];for(var i in void 0===t&&(t=[]),e&&(e=e.substring(1)),this.bobs)e&&i===e||t.push(this.bobs[i]);return t},getFitst(e){for(var t in e&&"!"===e.charAt(0)&&(e=e.substring(1)),this.bobs)if(!e||e!==t)return this.bobs[t];return null},getGO(e,t){var i=this.get(e);return i?Array.isArray(i)?(void 0===t&&(t=[]),i.forEach((function(e){t.push(e.gameObject)})),t):i.gameObject:null},forEachGO(e,t){for(var i in this.bobs){var s=this.bobs[i].gameObject;if(t?e.call(t,s,i,this):e(s,i,this))break}return this},getAllGO(e){for(var t in void 0===e&&(e=[]),this.bobs){var i=this.bobs[t].gameObject;e.push(i)}return e}};var GetR=function(e){return e>>16&255},GetG=function(e){return e>>8&255},GetB=function(e){return 255&e},GetRGB=function(e,t){return void 0===t&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=255&e,t};const MaskR=65535,MaskG=16711935,MaskB=16776960;var SetR=function(e,t){return(255&t)<<16|e&MaskR},SetG=function(e,t){return(255&t)<<8|e&MaskG},SetB=function(e,t){return 255&t|e&MaskB},SetRGB=function(e,t,i,s){return(255&t)<<16|(255&i)<<8|255&s},AddTintRGBProperties=function(e,t){if(e.hasOwnProperty("tintR"))return e;void 0===t&&(t=16777215);var i=GetR(t),s=GetG(t),n=GetB(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(a){a=16777215&Math.floor(a),e.setTint&&e.setTint(a),t!==a&&(i=GetR(t=a),s=GetG(t),n=GetB(t))}}),Object.defineProperty(e,"tintR",{get:function(){return i},set:function(s){s=255&Math.floor(s),i!==s&&(i=s,e.tint=SetR(t,s))}}),Object.defineProperty(e,"tintG",{get:function(){return s},set:function(i){i=255&Math.floor(i),s!==i&&(s=i,e.tint=SetG(t,i))}}),Object.defineProperty(e,"tintB",{get:function(){return n},set:function(i){i=255&Math.floor(i),n!==i&&(n=i,e.tint=SetB(t,i))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((i+s+n)/3)},set:function(a){a=255&Math.floor(a),i===a&&s===a&&n===a||(i=a,s=a,n=a,e.tint=SetRGB(t,a,a,a))}}),e.tint=t,e};const EventEmitter$1=Phaser.Events.EventEmitter;var MonitorViewport=function(e){if(e.events)return e;var t=new EventEmitter$1,i=e.x;Object.defineProperty(e,"x",{get:function(){return i},set:function(s){i!==s&&(i=s,t.emit("update",e))}});var s=e.y;Object.defineProperty(e,"y",{get:function(){return s},set:function(i){s!==i&&(s=i,t.emit("update",e))}});var n=e.width;Object.defineProperty(e,"width",{get:function(){return n},set:function(i){n!==i&&(n=i,t.emit("update",e))}});var a=e.height;return Object.defineProperty(e,"height",{get:function(){return a},set:function(i){a!==i&&(a=i,t.emit("update",e))}}),e.events=t,e},VPXYToXY=function(e,t,i,s,n,a){return void 0===a?a={}:!0===a&&(a=GlobXY),"number"!=typeof i&&(i=0,s=0),a.x=n.x+n.width*e+i,a.y=n.y+n.height*t+s,a},GlobXY={},AddViewportCoordinateProperties=function(e,t,i,s,n,a,r){if(e.hasOwnProperty("vp"))return e;"function"==typeof i&&(r=i,i=void 0),"function"==typeof n&&(r=n,n=void 0),void 0===i&&(i=.5),void 0===s&&(s=.5),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=VPXYToXY),MonitorViewport(t);var o=t.events;e.vp=t;var l=function(){r(i,s,n,a,t,e)};o.on("update",l),e.once("destroy",(function(){o.off("update",l),e.vp=void 0})),Object.defineProperty(e,"vpx",{get:function(){return i},set:function(e){i!==e&&(i=e,l())}}),Object.defineProperty(e,"vpy",{get:function(){return s},set:function(e){s!==e&&(s=e,l())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return n},set:function(e){n!==e&&(n=e,l())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return a},set:function(e){a!==e&&(a=e,l())}}),l()},GetFXFactory=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},AddClearEffectCallback=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var t=e._effectSwitchNames,i=0,s=t.length;i<s;i++)e[t[i]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},AddBarrelProperties=function(e){if(HasProperty(e,"barrel"))return e;var t,i=GetFXFactory(e);return i?(Object.defineProperty(e,"barrel",{get:function(){return t},set:function(s){t!==s&&(null===(t=s)||!1===t?e._barrelEffect&&(i.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=i.addBarrel()),e._barrelEffect.amount=t))}}),e.barrel=null,AddClearEffectCallback(e,"barrel"),e):e},AddColorMatrixEffectPropertiesBase=function(e,t,i){if(HasProperty(e,t))return e;var s=GetFXFactory(e);if(!s)return e;var n,a=`_${t}Effect`;return Object.defineProperty(e,t,{get:function(){return n},set:function(r){n!==r&&(null===(n=r)||!1===n?e[a]&&(s.remove(e[a]),e[a]=void 0):(e[a]||(e[a]=s.addColorMatrix()),e[a][t](1===i?r:void 0)))}}),e[t]=null,AddClearEffectCallback(e,t),e},AddBlackWhiteProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"blackWhite"),e},AddBloomProperties=function(e){if(HasProperty(e,"bloomColor"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=1,n=1,a=1,r=1,o=4;return Object.defineProperty(e,"bloomColor",{get:function(){return i},set:function(l){i!==l&&(null===(i=l)||!1===i?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(i,s,n,a,r,o),t.setPadding(Math.max(s,n)+1)),e._bloom.color=i))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return s},set:function(i){if(s!==i&&(s=i,e._bloom)){var a=Math.max(s,n);t.setPadding(a+1),e._bloom.offsetX=s}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return n},set:function(i){if(n!==i&&(n=i,e._bloom)){var a=Math.max(s,n);t.setPadding(a+1),e._bloom.offsetY=n}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return a},set:function(t){a!==t&&(a=t,e._bloom&&(e._bloom.blurStrength=a))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return r},set:function(t){r!==t&&(r=t,e._bloom&&(e._bloom.strength=r))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return o},set:function(t){o!==t&&(o=t,e._bloom&&(e._bloom.steps=o))}}),e.bloomColor=null,AddClearEffectCallback(e,"bloomColor"),e},AddBlurProperties=function(e){if(HasProperty(e,"blurColor"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=0,n=1,a=1,r=1,o=4;return Object.defineProperty(e,"blurColor",{get:function(){return i},set:function(l){i!==l&&(null===(i=l)||!1===i?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(s,n,a,r,i,o),t.setPadding(Math.max(n,a)+1)),e._blur.color=i))}}),Object.defineProperty(e,"blurQuality",{get:function(){return s},set:function(t){s!==t&&(s=t,e._blur&&(e._blur.quality=s))}}),Object.defineProperty(e,"blurX",{get:function(){return n},set:function(i){if(n!==i&&(n=i,e._blur)){var s=Math.max(n,a);t.setPadding(s+1),e._blur.x=n}}}),Object.defineProperty(e,"blurY",{get:function(){return a},set:function(i){if(a!==i&&(a=i,e._blur)){var s=Math.max(n,a);t.setPadding(s+1),e._blur.y=a}}}),Object.defineProperty(e,"blurStrength",{get:function(){return r},set:function(t){r!==t&&(r=t,e._blur&&(e._blur.strength=r))}}),Object.defineProperty(e,"blurSteps",{get:function(){return o},set:function(t){o!==t&&(o=t,e._blur&&(e._blur.steps=o))}}),e.blurColor=null,AddClearEffectCallback(e,"blurColor"),e},AddBokehProperties=function(e){if(HasProperty(e,"bokehRadius"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=1,n=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return i},set:function(a){i!==a&&(null===(i=a)||!1===i?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(i,s,n)),e._bokeh.radius=i))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return s},set:function(t){s!==t&&(s=t,e._bokeh&&(e._bokeh.amount=s))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return n},set:function(t){n!==t&&(n=t,e._bokeh&&(e._bokeh.contrast=n))}}),e.bokehRadius=null,AddClearEffectCallback(e,"bokehRadius"),e},AddBrightnessProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"brightness",1),e},AddBrownProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"brown"),e},AddCircleProperties=function(e){if(HasProperty(e,"circleColor"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=8,n=0,a=.4,r=1,o=.005;return Object.defineProperty(e,"circleColor",{get:function(){return i},set:function(l){i!==l&&(null===(i=l)||!1===i?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(s,i,n,r,o),e.circleBackgroundAlpha=a),e._circle.color=i))}}),Object.defineProperty(e,"circleThickness",{get:function(){return s},set:function(t){s!==t&&(s=t,e._circle&&(e._circle.thickness=s))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return n},set:function(t){n!==t&&(n=t,e._circle&&(e._circle.backgroundColor=n))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return a},set:function(t){a!==t&&(a=t,e._circle&&(e._circle.glcolor2[3]=a))}}),Object.defineProperty(e,"circleScale",{get:function(){return r},set:function(t){r!==t&&(r=t,e._circle&&(e._circle.scale=r))}}),Object.defineProperty(e,"circleFeather",{get:function(){return o},set:function(t){o!==t&&(o=t,e._circle&&(e._circle.feather=o))}}),e.circleColor=null,AddClearEffectCallback(e,"circleColor"),e},AddContrastProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"contrast",1),e},AddDesaturateProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"desaturate",1),e},AddDesaturateLuminanceProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"desaturateLuminance"),e},AddDisplacementProperties=function(e){if(HasProperty(e,"displacementKey"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=.005,n=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return i},set:function(a){i!==a&&(null===(i=a)||!1===i?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(i,s,n)),e._displacement.setTexture(i)))}}),Object.defineProperty(e,"displacementX",{get:function(){return s},set:function(t){s!==t&&(s=t,e._displacement&&(e._displacement.x=s))}}),Object.defineProperty(e,"displacementY",{get:function(){return n},set:function(t){n!==t&&(n=t,e._displacement&&(e._displacement.y=n))}}),e.displacementKey=null,AddClearEffectCallback(e,"displacementKey"),e},AddGlowProperties=function(e){if(HasProperty(e,"glowColor"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=4,n=0;return Object.defineProperty(e,"glowColor",{get:function(){return i},set:function(a){i!==a&&(null===(i=a)||!1===i?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(i,s,n),t.setPadding(s+1)),e._glow.color=i))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return s},set:function(i){s!==i&&(s=i,e._glow&&(t.setPadding(s+1),e._glow.outerStrength=s))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return n},set:function(t){n!==t&&(n=t,e._glow&&(e._glow.innerStrength=n))}}),e.glowColor=null,AddClearEffectCallback(e,"glowColor"),e},AddGradientProperties=function(e){if(HasProperty(e,"gradientColor"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s,n=.5,a=0,r=0,o=0,l=1,h=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[i,s]},set:function(d){var c,u;null===d||!1===d?(c=null,u=null):(c=d[0],u=d[1]),i===c&&s===u||(s=u,null===(i=c)||!1===i?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(i,s,n,a,r,o,l,h)),e._gradient.color1=i,e._gradient.color2=s))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return i},set:function(t){null!==t&&!1!==t?i!==t&&(i=t,e._gradient&&(e._gradient.color1=i)):e.gradientColor=t}}),Object.defineProperty(e,"gradientColor2",{get:function(){return s},set:function(t){null!==t&&!1!==t?s!==t&&(s=t,e._gradient&&(e._gradient.color2=s)):e.gradientColor=t}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return n},set:function(t){n!==t&&(n=t,e._gradient&&(e._gradient.alpha=n))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return a},set:function(t){a!==t&&(a=t,e._gradient&&(e._gradient.fromX=a))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return r},set:function(t){r!==t&&(r=t,e._gradient&&(e._gradient.fromY=r))}}),Object.defineProperty(e,"gradientToX",{get:function(){return o},set:function(t){o!==t&&(o=t,e._gradient&&(e._gradient.toX=o))}}),Object.defineProperty(e,"gradientToY",{get:function(){return l},set:function(t){l!==t&&(l=t,e._gradient&&(e._gradient.toY=l))}}),Object.defineProperty(e,"gradientSize",{get:function(){return h},set:function(t){h!==t&&(h=t,e._gradient&&(e._gradient.size=h))}}),e.gradientColor=null,AddClearEffectCallback(e,"gradientColor"),e},AddGrayscaleProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"grayscale",1),e},AddHueProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"hue",1),e},AddKodachromeProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"kodachrome"),e},AddLSDProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"lsd"),e},AddNegativeProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"negative"),e},AddPixelateProperties=function(e){if(HasProperty(e,"pixelate"))return e;var t,i=GetFXFactory(e);return i?(Object.defineProperty(e,"pixelate",{get:function(){return t},set:function(s){t!==s&&(null===(t=s)||!1===t?e._pixelateEffect&&(i.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=i.addPixelate()),e._pixelateEffect.amount=t))}}),e.pixelate=null,AddClearEffectCallback(e,"pixelate"),e):e},AddPolaroidProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"polaroid"),e},AddRevealProperties=function(e){if(HasProperty(e,"revealLeft"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s,n,a,r=.1,o=function(){i=null,s=null,n=null,a=null},l=function(e){e._revealEffect&&(t.remove(e._revealEffect),e._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return i},set:function(s){i!==s&&(o(),null===(i=s)||!1===i?l(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=i))}}),Object.defineProperty(e,"revealRight",{get:function(){return s},set:function(i){s!==i&&(o(),null===(s=i)||!1===s?l(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealUp",{get:function(){return n},set:function(i){n!==i&&(o(),null===(n=i)||!1===n?l(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=n))}}),Object.defineProperty(e,"revealDown",{get:function(){return a},set:function(i){a!==i&&(o(),null===(a=i)||!1===a?l(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=a))}}),Object.defineProperty(e,"revealWidth",{get:function(){return r},set:function(t){r!==t&&(r=t,e._revealEffect&&(e._revealEffect.wipeWidth=r))}}),e.revealLeft=null,AddClearEffectCallback(e,"revealLeft"),AddClearEffectCallback(e,"revealRight"),AddClearEffectCallback(e,"revealUp"),AddClearEffectCallback(e,"revealDown"),e},AddSaturateProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"saturate",1),e},AddSepiaProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"sepia"),e},AddShadowProperties=function(e){if(HasProperty(e,"shadowColor"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=0,n=0,a=.1,r=1,o=6,l=1;return Object.defineProperty(e,"shadowColor",{get:function(){return i},set:function(h){i!==h&&(null===(i=h)||!1===i?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(s,n,a,r,i,o,l)),e._shadow.color=i))}}),Object.defineProperty(e,"shadowX",{get:function(){return s},set:function(t){s!==t&&(s=t,e._shadow&&(e._shadow.x=s))}}),Object.defineProperty(e,"shadowY",{get:function(){return n},set:function(t){n!==t&&(n=t,e._shadow&&(e._shadow.y=n))}}),Object.defineProperty(e,"decay",{get:function(){return a},set:function(t){a!==t&&(a=t,e._shadow&&(e._shadow.decay=a))}}),Object.defineProperty(e,"shadowPower",{get:function(){return r},set:function(t){r!==t&&(r=t,e._shadow&&(e._shadow.power=r))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return o},set:function(t){o!==t&&(o=t,e._shadow&&(e._shadow.samples=o))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return l},set:function(t){l!==t&&(l=t,e._shadow&&(e._shadow.intensity=l))}}),e.shadowColor=null,AddClearEffectCallback(e,"shadowColor"),e},AddShiftToBGRProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"shiftToBGR"),e},AddShineProperties=function(e){if(HasProperty(e,"shineSpeed"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=.5,n=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return i},set:function(a){i!==a&&(null===(i=a)||!1===i?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(i,s,n)),e._shine.speed=i))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return s},set:function(t){s!==t&&(s=t,e._shine&&(e._shine.lineWidth=s))}}),Object.defineProperty(e,"shineGradient",{get:function(){return n},set:function(t){n!==t&&(n=t,e._shine&&(e._shine.gradient=n))}}),e.shineSpeed=null,AddClearEffectCallback(e,"shineSpeed"),e},AddTechnicolorProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"technicolor"),e},AddTiltShiftProperties=function(e){if(HasProperty(e,"tiltShiftRadius"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=1,n=.2,a=1,r=1,o=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return i},set:function(l){i!==l&&(null===(i=l)||!1===i?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(i,s,n,a,r,o)),e._tiltShift.radius=i))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return s},set:function(t){s!==t&&(s=t,e._tiltShift&&(e._tiltShift.amount=s))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return n},set:function(t){n!==t&&(n=t,e._tiltShift&&(e._tiltShift.contrast=n))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return a},set:function(t){a!==t&&(a=t,e._tiltShift&&(e._tiltShift.blurX=a))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return r},set:function(t){r!==t&&(r=t,e._tiltShift&&(e._tiltShift.blurY=r))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return o},set:function(t){o!==t&&(o=t,e._tiltShift&&(e._tiltShift.strength=o))}}),e.tiltShiftRadius=null,AddClearEffectCallback(e,"tiltShiftRadius"),e},AddVignetteProperties=function(e){if(HasProperty(e,"vignetteRadius"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s=.5,n=.5,a=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return i},set:function(r){i!==r&&(null===(i=r)||!1===i?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(s,n,i,a)),e._vignette.radius=i))}}),Object.defineProperty(e,"vignetteX",{get:function(){return s},set:function(t){s!==t&&(s=t,e._vignette&&(e._vignette.x=s))}}),Object.defineProperty(e,"vignetteY",{get:function(){return n},set:function(t){n!==t&&(n=t,e._vignette&&(e._vignette.y=n))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return a},set:function(t){a!==t&&(a=t,e._vignette&&(e._vignette.strength=a))}}),e.vignetteRadius=null,AddClearEffectCallback(e,"vignetteRadius"),e},AddVintagePinholeProperties=function(e){return AddColorMatrixEffectPropertiesBase(e,"vintagePinhole"),e},AddWipeProperties=function(e){if(HasProperty(e,"wipeLeft"))return e;var t=GetFXFactory(e);if(!t)return e;var i,s,n,a,r=.1,o=function(){i=null,s=null,n=null,a=null},l=function(e){e._wipeEffect&&(t.remove(e._wipeEffect),e._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return i},set:function(s){i!==s&&(o(),null===(i=s)||!1===i?l(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=i))}}),Object.defineProperty(e,"wipeRight",{get:function(){return s},set:function(i){s!==i&&(o(),null===(s=i)||!1===s?l(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeUp",{get:function(){return n},set:function(i){n!==i&&(o(),null===(n=i)||!1===n?l(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=n))}}),Object.defineProperty(e,"wipeDown",{get:function(){return a},set:function(i){a!==i&&(o(),null===(a=i)||!1===a?l(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=a))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return r},set:function(t){r!==t&&(r=t,e._wipeEffect&&(e._wipeEffect.wipeWidth=r))}}),e.wipeLeft=null,AddClearEffectCallback(e,"wipeLeft"),AddClearEffectCallback(e,"wipeRight"),AddClearEffectCallback(e,"wipeUp"),AddClearEffectCallback(e,"wipeDown"),e};const EffectMap={barrel:AddBarrelProperties,blackWhite:AddBlackWhiteProperties,bloom:AddBloomProperties,blur:AddBlurProperties,bokeh:AddBokehProperties,brightness:AddBrightnessProperties,brown:AddBrownProperties,circle:AddCircleProperties,contrast:AddContrastProperties,desaturate:AddDesaturateProperties,desaturateLuminance:AddDesaturateLuminanceProperties,displacement:AddDisplacementProperties,glow:AddGlowProperties,gradient:AddGradientProperties,grayscale:AddGrayscaleProperties,hue:AddHueProperties,kodachrome:AddKodachromeProperties,lsd:AddLSDProperties,negative:AddNegativeProperties,pixelate:AddPixelateProperties,polaroid:AddPolaroidProperties,reveal:AddRevealProperties,saturate:AddSaturateProperties,sepia:AddSepiaProperties,shadow:AddShadowProperties,shiftToBGR:AddShiftToBGRProperties,shine:AddShineProperties,technicolor:AddTechnicolorProperties,tiltShift:AddTiltShiftProperties,vignette:AddVignetteProperties,vintagePinhole:AddVintagePinholeProperties,wipe:AddWipeProperties};var AddEffectProperties=function(e,t){if(void 0===t)t=!0;else if("string"==typeof t)t={config:!0};else if(Array.isArray(t))for(var i=t,s=(t={},0),n=i.length;s<n;s++)t[i[s]]=!0;if(!0===t)for(var a in EffectMap)EffectMap[a](e);else for(var a in t)t[a]&&EffectMap[a]&&EffectMap[a](e);return e};const RemoveItem$b=Phaser.Utils.Array.Remove,AddMethods$1={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&AddTintRGBProperties(t),this.viewportCoordinateEnable&&AddViewportCoordinateProperties(t,this.viewport),this.effectPropertiesConfig&&AddEffectProperties(t,this.effectPropertiesConfig),t.setName(e).once("destroy",(function(){RemoveItem$b(this.removedGOs,t),this.isEmpty&&this.emit("empty")}),this);var i=new this.BobClass(this,t,e);return this.bobs[e]=i,this},add(e,...t){var i=this.createGameObjectCallback,s=this.createGameObjectScope,n=i.call(s,this.scene,...t);this.addGO(e,n),null!=this.gameObjectDepth&&n.setDepth(this.gameObjectDepth);var a=this.get(e);return this.fadeBob(a,0,1),this}},RemoveMethods$1={remove(e,t){var i=this.get(e);if(!i)return this;Array.isArray(i)||(i=[i]);var s=this;return i.forEach((function(e){delete s.bobs[e.name];var i=e.gameObject;s.removedGOs.push(i),i.setName(),t?e.destroy():s.fadeBob(e,void 0,0,(function(){e.destroy()}))})),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){void 0===e&&(e=!0);var t=this.bobs;for(var i in t)e&&t[i].destroy(),delete t[i];return this.removedGOs.length=0,this}},PropertyMethods={hasProperty(e,t){var i=IsSingleBob(e)?this.get(e):this.getFitst(e);return!!i&&i.hasProperty(t)},getProperty(e,t){var i=IsSingleBob(e)?this.get(e):this.getFitst(e);if(i)return i.getProperty(t)},isNumberProperty(e,t){return"number"==typeof this.getProperty(e,t)},setProperty(e,t,i){var s=this.get(e);return s?(Array.isArray(s)||(s=[s]),this.symbols&&"string"==typeof i&&this.isNumberProperty(e,t)&&(i in this.symbols?i=this.symbols[i]:console.warn(`Can't find symbol ${i}`)),s.forEach((function(e){e.setProperty(t,i)})),this):this},easeProperty(e,t){var i=this.get(e);if(!i)return this;Array.isArray(i)||(i=[i]);var s=t.value,n=t.property;return this.symbols&&"string"==typeof s&&this.isNumberProperty(e,n)&&s in this.symbols&&(t.value=this.symbols[s]),i.forEach((function(e){e.easeProperty(t)})),this},hasTweenTask(e,t){var i=IsSingleBob(e)?this.get(e):this.getFitst(e);return!!i&&i.tweens.hasOwnProperty(t)},getTweenTask(e,t){var i=IsSingleBob(e)?this.get(e):this.getFitst(e);return i&&i.tweens[t]||null}},CallMethods={hasMethod(e,t){var i=IsSingleBob(e)?this.get(e):this.getFitst(e);return!!i&&i.hasMethod(t)},call(e,t,...i){var s=this.get(e);return s?(Array.isArray(s)||(s=[s]),s.forEach((function(e){e.call(t,...i)})),this):this}},DataMethods={hasData(e,t){var i=IsSingleBob(e)?this.get(e):this.getFitst(e);return!!i&&i.hasData(t)},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,i){var s=this.get(e);return s?(Array.isArray(s)||(s=[s]),s.forEach((function(e){e.setData(t,i)})),this):this}},FadeTint=0,FadeAlpha=1,FadeRevealUp=2,FadeRevealDown=3,FadeRevealLeft=4,FadeRevealRight=5,FadeMode={tint:FadeTint,alpha:FadeAlpha,revealUp:FadeRevealUp,revealDown:FadeRevealDown,revealLeft:FadeRevealLeft,revealRight:FadeRevealRight},FadeMethods$1={setGOFadeMode(e){return"string"==typeof e&&(e=FadeMode[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(void 0===this.fadeMode||this.fadeMode===FadeTint)&&this.fadeTime>0&&void 0!==e.setTint},useAlphaFadeEffect(e){return(void 0===this.fadeMode||this.fadeMode===FadeAlpha)&&this.fadeTime>0&&void 0!==e.setAlpha},useRevealEffect(e){return this.fadeMode>=FadeRevealUp&&this.fadeMode<=FadeRevealRight&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,i,s){var n=e.gameObject;if(this.useTintFadeEffect(n))void 0!==t&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*i),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s});else if(this.useAlphaFadeEffect(n))void 0!==t&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s});else if(this.useRevealEffect(n)){var a;switch(AddEffectProperties(n,"reveal"),this.fadeMode){case FadeRevealUp:a="revealUp";break;case FadeRevealDown:a="revealDown";break;case FadeRevealLeft:a="revealLeft";break;case FadeRevealRight:a="revealRight"}void 0===t&&(t=0),n[a]=t,e.easeProperty({property:a,value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s}),e.getTweenTask(a).once("complete",(function(){n[a]=null}))}else s&&s(n);return this}};var GetDisplayWidth=function(e){return void 0!==e.displayWidth?e.displayWidth:e.width},GetDisplayHeight=function(e){return void 0!==e.displayHeight?e.displayHeight:e.height};const Rectangle$4=Phaser.Geom.Rectangle,Vector2$1=Phaser.Math.Vector2,RotateAround$6=Phaser.Math.RotateAround,P3Container$2=Phaser.GameObjects.Container;var GetBounds=function(e,t){if(void 0===t?t=new Rectangle$4:!0===t&&(void 0===GlobRect$2&&(GlobRect$2=new Rectangle$4),t=GlobRect$2),e.getBounds&&!(e instanceof P3Container$2))return e.getBounds(t);var i,s,n,a,r,o,l,h;if(e.parentContainer){var d=e.parentContainer.getBoundsTransformMatrix();GetTopLeft(e,t),d.transformPoint(t.x,t.y,t),i=t.x,s=t.y,GetTopRight(e,t),d.transformPoint(t.x,t.y,t),n=t.x,a=t.y,GetBottomLeft(e,t),d.transformPoint(t.x,t.y,t),r=t.x,o=t.y,GetBottomRight(e,t),d.transformPoint(t.x,t.y,t),l=t.x,h=t.y}else GetTopLeft(e,t),i=t.x,s=t.y,GetTopRight(e,t),n=t.x,a=t.y,GetBottomLeft(e,t),r=t.x,o=t.y,GetBottomRight(e,t),l=t.x,h=t.y;return t.x=Math.min(i,n,r,l),t.y=Math.min(s,a,o,h),t.width=Math.max(i,n,r,l)-t.x,t.height=Math.max(s,a,o,h)-t.y,t},GlobRect$2=void 0,GetTopLeft=function(e,t,i){return void 0===t?t=new Vector2$1:!0===t&&(void 0===GlobVector&&(GlobVector=new Vector2$1),t=GlobVector),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-GetDisplayWidth(e)*e.originX,t.y=e.y-GetDisplayHeight(e)*e.originY,PrepareBoundsOutput(e,t,i))},GetTopRight=function(e,t,i){return void 0===t?t=new Vector2$1:!0===t&&(void 0===GlobVector&&(GlobVector=new Vector2$1),t=GlobVector),e.getTopRight?e.getTopRight(t):(t.x=e.x-GetDisplayWidth(e)*e.originX+GetDisplayWidth(e),t.y=e.y-GetDisplayHeight(e)*e.originY,PrepareBoundsOutput(e,t,i))},GetBottomLeft=function(e,t,i){return void 0===t?t=new Vector2$1:!0===t&&(void 0===GlobVector&&(GlobVector=new Vector2$1),t=GlobVector),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-GetDisplayWidth(e)*e.originX,t.y=e.y-GetDisplayHeight(e)*e.originY+GetDisplayHeight(e),PrepareBoundsOutput(e,t,i))},GetBottomRight=function(e,t,i){return void 0===t?t=new Vector2$1:!0===t&&(void 0===GlobVector&&(GlobVector=new Vector2$1),t=GlobVector),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-GetDisplayWidth(e)*e.originX+GetDisplayWidth(e),t.y=e.y-GetDisplayHeight(e)*e.originY+GetDisplayHeight(e),PrepareBoundsOutput(e,t,i))},GetCenter=function(e,t,i){void 0===t?t=new Vector2$1:!0===t&&(void 0===GlobVector&&(GlobVector=new Vector2$1),t=GlobVector);var s=GetDisplayWidth(e),n=GetDisplayHeight(e);return t.x=e.x+s*(.5-e.originX),t.y=e.y+n*(.5-e.originY),PrepareBoundsOutput(e,t,i)},GlobVector=void 0,PrepareBoundsOutput=function(e,t,i){return void 0===i&&(i=!1),0!==e.rotation&&RotateAround$6(t,e.x,e.y,e.rotation),i&&e.parentContainer&&e.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t};const GetValue$3y=Phaser.Utils.Objects.GetValue;var DrawBounds$2=function(e,t,i){var s,n,a,r,o;if("number"==typeof i?s=i:(s=GetValue$3y(i,"color"),n=GetValue$3y(i,"lineWidth"),a=GetValue$3y(i,"fillColor"),r=GetValue$3y(i,"fillAlpha",1),o=GetValue$3y(i,"padding",0)),Array.isArray(e))for(var l=0,h=e.length;l<h;l++)Draw(e[l],t,s,n,a,r,o);else Draw(e,t,s,n,a,r,o)},Draw=function(e,t,i,s,n,a,r){if(e.getBounds||void 0!==e.width&&void 0!==e.height){void 0===i&&(i=16777215),void 0===s&&(s=1),void 0===n&&(n=null),void 0===a&&(a=1),void 0===r&&(r=0);var o=GetTopLeft(e,Points[0]);o.x-=r,o.y-=r;var l=GetTopRight(e,Points[1]);l.x+=r,l.y-=r;var h=GetBottomRight(e,Points[2]);h.x+=r,h.y+=r;var d=GetBottomLeft(e,Points[3]);d.x-=r,d.y+=r,null!==n&&t.fillStyle(n,a).fillPoints(Points,!0,!0),null!==i&&t.lineStyle(s,i).strokePoints(Points,!0,!0)}},Points=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],DrawGameObjectsBounds=function(e,t){return this.forEachGO((function(i){i.drawBounds?i.drawBounds(e,t):DrawBounds$2(i,e,t)})),this},GetCameraByName=function(e,t){var i,s=e.cameras;if(void 0===t)i=s.main;else switch(typeof t){case"string":i=s.getCamera(t);break;case"number":i=s.cameras[t];break;default:i=t}return i};const CameraMethods$1={setCamera(e,t){var i=this.get(e);if(!i)return this;var s=GetCameraByName(this.scene,t);return s?(i.gameObject.cameraFilter=4294967295^s.id,i.camera=s,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}};var Methods$i={drawGameObjectsBounds:DrawGameObjectsBounds};Object.assign(Methods$i,GetMethods,AddMethods$1,RemoveMethods$1,PropertyMethods,CallMethods,DataMethods,FadeMethods$1,CameraMethods$1);const CameraClass=Phaser.Cameras.Scene2D.BaseCamera;var IsCameraObject=function(e){return e instanceof CameraClass};const Rectangle$3=Phaser.Geom.Rectangle;var GetViewport=function(e,t,i){return IsCameraObject(t)||(i=t,t=void 0),void 0===i?i=new Rectangle$3:!0===i&&(i=globRect),t?e.scale.getViewPort(t,i):e.scale.getViewPort(i)},globRect=new Rectangle$3;const GetValue$3x=Phaser.Utils.Objects.GetValue;class GOManager{constructor(e,t){this.scene=e,this.BobClass=GetValue$3x(t,"BobClass",BobBase),this.setCreateGameObjectCallback(GetValue$3x(t,"createGameObject"),GetValue$3x(t,"createGameObjectScope")),this.setEventEmitter(GetValue$3x(t,"eventEmitter",void 0)),this.setGameObjectDepth(GetValue$3x(t,"depth",void 0));var i=GetValue$3x(t,"fade",500);"number"==typeof i?(this.setGOFadeMode(),this.setGOFadeTime(i)):(this.setGOFadeMode(GetValue$3x(i,"mode")),this.setGOFadeTime(GetValue$3x(i,"time",500)));var s=GetValue$3x(t,"viewportCoordinate",!1);!1!==s?(this.setViewportCoordinateEnable(GetValue$3x(t,"enable",!0)),this.setViewport(GetValue$3x(s,"viewport"))):this.setViewportCoordinateEnable(!1);var n=GetValue$3x(t,"effectProperties",!1);this.setEffectPropertiesConfig(n),this.setSymbols(GetValue$3x(t,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=GetValue$3x(t,"name")}destroy(e){this.clear(!e),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(e){if(this._timeScale!==e){this._timeScale=e;var t=this.bobs;for(var i in t)t[i].setTimeScale(e)}}get timeScale(){return this._timeScale}setTimeScale(e){return this.timeScale=e,this}setCreateGameObjectCallback(e,t){return this.createGameObjectCallback=e,this.createGameObjectScope=t,this}setGameObjectDepth(e){return this.gameObjectDepth=e,this}setViewportCoordinateEnable(e){return void 0===e&&(e=!0),this.viewportCoordinateEnable=e,this}setEffectPropertiesConfig(e){return void 0===e&&(e=!0),this.effectPropertiesConfig=e,this}setViewport(e){return void 0===e&&(e=GetViewport(this.scene,this.scene.cameras.main)),this.viewport=e,this}setSymbols(e){return this.symbols=e,this}get isEmpty(){return IsEmpty(this.bobs)&&0===this.removedGOs.length}}Object.assign(GOManager.prototype,EventEmitterMethods$1,Methods$i);const GameObjectClass=Phaser.GameObjects.GameObject,LayerClass$1=Phaser.GameObjects.Layer;var IsGameObject=function(e){return e instanceof GameObjectClass||e instanceof LayerClass$1};const LayerClass=Phaser.GameObjects.Layer;var IsLayerGameObject=function(e){return e instanceof LayerClass},GetLayer=function(e){var t=e.displayList;return IsLayerGameObject(t)?t:null},SortGameObjectsByDepth=function(e,t){if(e.length<=1)return e;var i;void 0===t&&(t=!1);for(var s=0,n=e.length;s<n;s++){var a=e[s];if(a.displayList?i=a.displayList:a.parentContainer&&(i=a.parentContainer.list),i)break}return i||(i=a.scene.sys.displayList),i.depthSort&&(i.depthSort(),i=i.list),t?e.sort((function(e,t){return i.indexOf(t)-i.indexOf(e)})):e.sort((function(e,t){return i.indexOf(e)-i.indexOf(t)})),e};const LayerMethods={getLayer(e){return this.getGO(e)},getLayers(e){return void 0===e&&(e=[]),this.forEachGO((function(t){e.push(t)})),SortGameObjectsByDepth(e,!1),e},addToLayer(e,t){var i=this.getGO(e);if(i){Array.isArray(t)||(t=[t]);for(var s=0,n=t.length;s<n;s++){var a=t[s];a.isRexContainerLite?a.addToLayer(i):i.add(a)}return void 0!==i.scrollFactorX&&a.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this}console.warn(`[LayerManager] Can't get layer "${e}"`)},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),i=t[t.length-1];return this.addToLayer(i.goName,e),this},removeFromLayer(e,t,i){var s=this.getGO(e);if(s)return void 0===i&&(i=!0),t.isRexContainerLite?t.removeFromLayer(s,i):(s.remove(t),i&&t.addToDisplayList()),this;console.warn(`[LayerManager] Can't get layer "${e}"`)},clearLayer(e,t){void 0===t&&(t=!0);var i=this.getGO(e);if(i){if(t)for(var s=i.getAll(),n=0,a=s.length;n<a;n++)s[n].destroy();else i.removeAll();return this}console.warn(`Can't get layer "${e}"`)}},ScrollFactorMethods={setScrollFactor(e,t,i){void 0===i&&(i=t);var s=this.getLayer(e);if(!s)return this;s.scrollFactorX=t,s.scrollFactorY=i;for(var n=s.getAll(),a=0,r=n.length;a<r;a++)n[a].setScrollFactor(t,i);return this}},ArrayUtils$1=Phaser.Utils.Array,BringMeToTop=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(ArrayUtils$1.BringToTop(e,this),this):this},SendMeToBack=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(ArrayUtils$1.SendToBack(e,this),this):this},MoveMyDepthBelow=function(e){var t;return e.parentContainer?-1===(t=e.parentContainer.list).indexOf(this)&&e.parentContainer.add(this):e.displayList&&-1===(t=e.displayList.list).indexOf(this)&&e.displayList.add(this),t?(ArrayUtils$1.MoveBelow(t,this,e),this):this},MoveMyDepthAbove=function(e){var t;return e.parentContainer?-1===(t=e.parentContainer.list).indexOf(this)&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e)):e.displayList&&-1===(t=e.displayList.list).indexOf(this)&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e)),t?(ArrayUtils$1.MoveAbove(t,this,e),this):this},DisplayListMethods={bringMeToTop:BringMeToTop,sendMeToBack:SendMeToBack,moveMyDepthBelow:MoveMyDepthBelow,moveMyDepthAbove:MoveMyDepthAbove},DepthMethods={bringLayerToTop(e){var t=this.getLayer(e);return t?(DisplayListMethods.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(DisplayListMethods.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var i=this.getLayer(e),s=this.getLayer(t);return i&&s?(DisplayListMethods.moveMyDepthBelow.call(i,s),this):this},moveLayerAbove(e,t){if(e===t)return this;var i=this.getLayer(e),s=this.getLayer(t);return i&&s?(DisplayListMethods.moveMyDepthAbove.call(i,s),this):this}},SetCamera=GOManager.prototype.setCamera,CameraMethods={setCamera(e,t){var i=GetCameraByName(this.scene,t);return i||(i=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),SetCamera.call(this,e,i),this}};var methods$E={};Object.assign(methods$E,LayerMethods,ScrollFactorMethods,DepthMethods,CameraMethods);const GetValue$3w=Phaser.Utils.Objects.GetValue;class LayerManager extends GOManager{constructor(e,t){void 0===t?t={}:Array.isArray(t)&&(t={layers:t}),t.hasOwnProperty("fade")||(t.fade=0),t.viewportCoordinate=!1,super(e,t);var i=GetValue$3w(t,"rootLayer");this.setRootLayer(i);var s=GetValue$3w(t,"layers");if(s)for(var n=0,a=s.length;n<a;n++){var r=s[n];if("string"==typeof r)this.add(r);else{var o=r.name;this.add(o);var l=r.scrollFactor,h=GetValue$3w(r,"scrollFactorX",l),d=GetValue$3w(r,"scrollFactorY",l);void 0!==h&&this.setScrollFactor(o,h,d),this.setCamera(o,r.cameraName)}}}setCreateGameObjectCallback(e,t){return e||(e=CreateLayer),super.setCreateGameObjectCallback(e,t),this}setRootLayer(e){if(e===this.rootLayer)return this;var t=this.getAllGO();return e?e.add(t):this.scene.displayList.add(t),this.rootLayer=e,this}addGO(e,t){return super.addGO(e,t),t.name=e,this.rootLayer&&this.rootLayer.add(t),this}get(e,t){if(IsGameObject(e)){var i=GetLayer(e);if(!i)return;if(!(e=i.name))return}return super.get(e,t)}}var CreateLayer=function(e,t){var i=e.add.layer();return void 0!==t&&i.setDepth(t),i};Object.assign(LayerManager.prototype,methods$E);var GetSoundManager=function(e){return IsSceneObject(e)?e.sys.sound:e.sound},HasaAudio=function(e){return this.sound.game.cache.audio.has(e)},GetSceneObject=function(e){return null==e||"object"!=typeof e?null:IsSceneObject(e)?e:e.scene&&IsSceneObject(e.scene)?e.scene:e.parent&&e.parent.scene&&IsSceneObject(e.parent.scene)?e.parent.scene:null};const GetValue$3v=Phaser.Utils.Objects.GetValue;class ComponentBase{constructor(e,t){this.setParent(e),this.isShutdown=!1,this.setEventEmitter(GetValue$3v(t,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(e){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(e){this.shutdown(e)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(e,t){this.destroy(t)}setParent(e){return this.parent=e,this.scene=GetSceneObject(e),this.game=GetGame(e),this}}Object.assign(ComponentBase.prototype,EventEmitterMethods$1);const GetValue$3u=Phaser.Utils.Objects.GetValue;class TickTask extends ComponentBase{constructor(e,t){super(e,t),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(GetValue$3u(t,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(e){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(e))}setTickingMode(e){"string"==typeof e&&(e=TICKINGMODE[e]),this.tickingMode=e}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(e){this._isRunning!==e&&(this._isRunning=e,1===this.tickingMode&&e!=this.tickingState&&(e?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const TICKINGMODE={no:0,lazy:1,always:2},GetValue$3t=Phaser.Utils.Objects.GetValue;class SceneUpdateTickTask extends TickTask{constructor(e,t){super(e,t);var i=this.scene?"update":"step";this.tickEventName=GetValue$3t(t,"tickEventName",i),this.isSceneTicker=!IsGameUpdateEvent(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var IsGameUpdateEvent=function(e){return"step"===e||"poststep"===e};const GetValue$3s=Phaser.Utils.Objects.GetValue,Clamp$g=Phaser.Math.Clamp;let Timer$1=class{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){this.state=GetValue$3s(e,"state",IDLE$8),this.timeScale=GetValue$3s(e,"timeScale",1),this.delay=GetValue$3s(e,"delay",0),this.repeat=GetValue$3s(e,"repeat",0),this.repeatCounter=GetValue$3s(e,"repeatCounter",0),this.repeatDelay=GetValue$3s(e,"repeatDelay",0),this.duration=GetValue$3s(e,"duration",0),this.nowTime=GetValue$3s(e,"nowTime",0),this.justRestart=GetValue$3s(e,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(e){return this.timeScale=e,this}setDelay(e){return void 0===e&&(e=0),this.delay=e,this}setDuration(e){return this.duration=e,this}setRepeat(e){return this.repeat=e,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(e){return this.repeatDelay=e,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?COUNTDOWN:DELAY,this.repeatCounter=0,this}stop(){return this.state=IDLE$8,this}update(e,t){this.state!==IDLE$8&&this.state!==DONE&&0!==t&&0!==this.timeScale&&(this.nowTime+=t*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=REPEATDELAY)):(this.nowTime=this.duration,this.state=DONE):this.nowTime>=0&&(this.state=COUNTDOWN))}get t(){var e;switch(this.state){case IDLE$8:case DELAY:case REPEATDELAY:e=0;break;case COUNTDOWN:e=this.nowTime/this.duration;break;case DONE:e=1}return Clamp$g(e,0,1)}set t(e){(e=Clamp$g(e,-1,1))<0?(this.state=DELAY,this.nowTime=-this.delay*e):(this.state=COUNTDOWN,this.nowTime=this.duration*e,1===e&&0!==this.repeat&&this.repeatCounter++)}setT(e){return this.t=e,this}get isIdle(){return this.state===IDLE$8}get isDelay(){return this.state===DELAY}get isCountDown(){return this.state===COUNTDOWN}get isRunning(){return this.state===DELAY||this.state===COUNTDOWN}get isDone(){return this.state===DONE}get isOddIteration(){return!(1&~this.repeatCounter)}get isEvenIteration(){return!(1&this.repeatCounter)}};const IDLE$8=0,DELAY=1,COUNTDOWN=2,REPEATDELAY=3,DONE=-1;class TimerTickTask extends SceneUpdateTickTask{constructor(e,t){super(e,t),this.timer=new Timer$1}shutdown(e){this.isShutdown||(super.shutdown(e),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const GetValue$3r=Phaser.Utils.Objects.GetValue,GetAdvancedValue$6=Phaser.Utils.Objects.GetAdvancedValue,GetEaseFunction=Phaser.Tweens.Builders.GetEaseFunction;class EaseValueTaskBase extends TimerTickTask{resetFromJSON(e){return this.timer.resetFromJSON(GetValue$3r(e,"timer")),this.setEnable(GetValue$3r(e,"enable",!0)),this.setTarget(GetValue$3r(e,"target",this.parent)),this.setDelay(GetAdvancedValue$6(e,"delay",0)),this.setDuration(GetAdvancedValue$6(e,"duration",1e3)),this.setEase(GetValue$3r(e,"ease","Linear")),this.setRepeat(GetValue$3r(e,"repeat",0)),this}setEnable(e){return null==e&&(e=!0),this.enable=e,this}setTarget(e){return void 0===e&&(e=this.parent),this.target=e,this}setDelay(e){return this.delay=e,this}setDuration(e){return this.duration=e,this}setRepeat(e){return this.repeat=e,this}setRepeatDelay(e){return this.repeatDelay=e,this}setEase(e){return void 0===e&&(e="Linear"),this.ease=e,this.easeFn=GetEaseFunction(e),this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(e){return void 0===e&&(e=!1),super.stop(),e&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(e,t){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var i=this.target,s=this.timer;return s.update(e,t),s.isDelay||this.updateTarget(i,s),this.emit("update",i,this),s.isDone&&this.complete(),this}updateTarget(e,t){}}const SoundObjectClass=Phaser.Sound.BaseSound;var IsSoundObject=function(e){return e instanceof SoundObjectClass};const GetValue$3q=Phaser.Utils.Objects.GetValue,GetAdvancedValue$5=Phaser.Utils.Objects.GetAdvancedValue,Linear$p=Phaser.Math.Linear;let Fade$3=class extends EaseValueTaskBase{constructor(e,t,i){IsSoundObject(e)&&(i=t,t=e,e=void 0),t.active=!0,t.scene=e,t.game=t.manager.game,super(t,i),this.volume={},this.resetFromJSON(i)}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(GetValue$3q(e,"mode",0)),this.setEnable(GetValue$3q(e,"enable",!0)),this.setVolumeRange(GetAdvancedValue$5(e,"volume.start",this.parent.volume),GetAdvancedValue$5(e,"volume.end",0)),this}setMode(e){return"string"==typeof e&&(e=MODE$4[e]),this.mode=e,this}setVolumeRange(e,t){return this.volume.start=e,this.volume.end=t,this}start(){return this.timer.isRunning||(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start()),this}updateTarget(e,t){e.volume=Linear$p(this.volume.start,this.volume.end,t.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy()}return this}};const MODE$4={stop:1,destroy:2};var FadeIn$1=function(e,t,i,s,n){IsSoundObject(e)&&(n=s,s=i,i=t,t=e,e=void 0),void 0===s&&(s=1),void 0===n&&(n=0);var a,r={mode:0,volume:{start:n,end:s},duration:i};return"string"==typeof t&&(t=e.sys.sound.add(t)),t.hasOwnProperty("_fade")?(a=t._fade).stop().resetFromJSON(r):(a=new Fade$3(e,t,r),t._fade=a),a.start(),t.isPlaying||t.setVolume(n).play(),t},FadeOut=function(e,t,i,s){IsSoundObject(e)&&(s=i,i=t,t=e,e=void 0),void 0===s&&(s=!0);var n,a={mode:s?2:1,volume:{start:t.volume,end:0},duration:i};return t.hasOwnProperty("_fade")?(n=t._fade).stop().resetFromJSON(a):(n=new Fade$3(e,t,a),t._fade=n),n.start(),t.isPlaying||t.play(),t};const GetValue$3p=Phaser.Utils.Objects.GetValue,BackgroundMusicMethods={setBackgroundMusicLoop(e){return void 0===e&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",(function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)}),this).once("destroy",(function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)}),this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var i=this.sound.add(e,{loop:GetValue$3p(t,"loop",this.backgroundMusicLoop),mute:GetValue$3p(t,"mute",this.backgroundMusicMute),volume:GetValue$3p(t,"volume",this.backgroundMusicVolume),detune:GetValue$3p(t,"detune",0),rate:GetValue$3p(t,"rate",1)});return this.setCurrentBackgroundMusic(i),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&FadeIn$1(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&FadeOut(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=i,this},setBackgroundMusicMute(e){return void 0===e&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}},GetValue$3o=Phaser.Utils.Objects.GetValue,BackgroundMusic2Methods={setBackgroundMusic2Loop(e){return void 0===e&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",(function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)}),this).once("destroy",(function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)}),this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var i=this.sound.add(e,{loop:GetValue$3o(t,"loop",this.backgroundMusicLoop),mute:GetValue$3o(t,"mute",this.backgroundMusic2Mute),volume:GetValue$3o(t,"volume",this.backgroundMusic2Volume),detune:GetValue$3o(t,"detune",0),rate:GetValue$3o(t,"rate",1)});return this.setCurrentBackgroundMusic2(i),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&FadeIn$1(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&FadeOut(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=i,this},setBackgroundMusic2Mute(e){return void 0===e&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}},RemoveItem$a=Phaser.Utils.Array.Remove,GetValue$3n=Phaser.Utils.Objects.GetValue,SoundEffectsMethods={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:GetValue$3n(t,"mute",this.soundEffectsMute),volume:GetValue$3n(t,"volume",this.soundEffectsVolume),detune:GetValue$3n(t,"detune",0),rate:GetValue$3n(t,"rate",1)});return this.soundEffects.push(i),i.once("complete",(function(){i.destroy(),this.sound&&RemoveItem$a(this.soundEffects,i)}),this).once("destroy",(function(){this.sound&&RemoveItem$a(this.soundEffects,i)}),this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&FadeIn$1(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var i=this.getLastSoundEffect();return i&&FadeOut(i,e,t),this},fadeOutAllSoundEffects(e,t){for(var i=this.soundEffects.length-1;i>=0;i--)FadeOut(this.soundEffects[i],e,t);return this},setSoundEffectMute(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(void 0===t&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){var i;void 0===t&&(t=!1);for(var s=0,n=(i=t?[this.getLastSoundEffect()]:this.soundEffects).length;s<n;s++)i[s].setDetune(e);return this},setSoundEffectRate(e,t){var i;void 0===t&&(t=!1);for(var s=0,n=(i=t?[this.getLastSoundEffect()]:this.soundEffects).length;s<n;s++)i[s].setRate(e);return this}},RemoveItem$9=Phaser.Utils.Array.Remove,GetValue$3m=Phaser.Utils.Objects.GetValue,SoundEffects2Methods={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:GetValue$3m(t,"mute",this.soundEffects2Mute),volume:GetValue$3m(t,"volume",this.soundEffects2Volume),detune:GetValue$3m(t,"detune",0),rate:GetValue$3m(t,"rate",1)});return this.soundEffects2.push(i),i.once("complete",(function(){i.destroy(),this.sound&&RemoveItem$9(this.soundEffects2,i)}),this).once("destroy",(function(){this.sound&&RemoveItem$9(this.soundEffects2,i)}),this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&FadeIn$1(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var i=this.getLastSoundEffect2();return i&&FadeOut(i,e,t),this},fadeOutAllSoundEffects2(e,t){for(var i=this.soundEffects2.length-1;i>=0;i--)FadeOut(this.soundEffects2[i],e,t);return this},setSoundEffect2Mute(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(void 0===t&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){var i;void 0===t&&(t=!1);for(var s=0,n=(i=t?[this.getLastSoundEffect2()]:this.soundEffects2).length;s<n;s++)i[s].setDetune(e);return this},setSoundEffect2Rate(e,t){var i;void 0===t&&(t=!1);for(var s=0,n=(i=t?[this.getLastSoundEffect2()]:this.soundEffects2).length;s<n;s++)i[s].setRate(e);return this}};var Methods$h={hasAudio:HasaAudio};Object.assign(Methods$h,BackgroundMusicMethods,BackgroundMusic2Methods,SoundEffectsMethods,SoundEffects2Methods);const GetValue$3l=Phaser.Utils.Objects.GetValue;class SoundManager{constructor(e,t){this.sound=GetSoundManager(e),this.backgroundMusic=void 0,this._backgroundMusicVolume=GetValue$3l(t,"bgm.volume",1),this._backgroundMusicMute=GetValue$3l(t,"bgm.mute",!1),this.setBackgroundMusicLoop(GetValue$3l(t,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(GetValue$3l(t,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=GetValue$3l(t,"bgm2.volume",1),this._backgroundMusic2Mute=GetValue$3l(t,"bgm2.mute",!1),this.setBackgroundMusic2Loop(GetValue$3l(t,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(GetValue$3l(t,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=GetValue$3l(t,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=GetValue$3l(t,"soundEffect2.volume",1);var i=GetValue$3l(t,"bgm.initial",void 0);i&&this.setCurrentBackgroundMusic(i);var s=GetValue$3l(t,"bgm2.initial",void 0);s&&this.setCurrentBackgroundMusic2(s)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(e=this.soundEffects2.length-1;e>=0;e--)this.soundEffects2[e].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(e){this._backgroundMusicMute=e,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(e){this._backgroundMusicVolume=e,this.backgroundMusic&&this.backgroundMusic.setVolume(e)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(e){this._backgroundMusic2Mute=e,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(e){this._backgroundMusic2Volume=e,this.backgroundMusic2&&this.backgroundMusic2.setVolume(e)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(e){this._soundEffectsMute=e;for(var t=this.soundEffects,i=0,s=t.length;i<s;i++)t[i].setMute(e)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(e){this._soundEffectsVolume=e;for(var t=this.soundEffects,i=0,s=t.length;i<s;i++)t[i].setVolume(e)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(e){this._soundEffects2Mute=e;for(var t=this.soundEffects,i=0,s=soundEffects2.length;i<s;i++)t[i].setMute(e)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(e){this._soundEffects2Volume=e;for(var t=this.soundEffects2,i=0,s=t.length;i<s;i++)t[i].setVolume(e)}}Object.assign(SoundManager.prototype,Methods$h);const GetValue$3k=Phaser.Utils.Objects.GetValue;class BaseClock extends TickTask{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.isRunning=GetValue$3k(e,"isRunning",!1),this.timeScale=GetValue$3k(e,"timeScale",1),this.now=GetValue$3k(e,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(e){return void 0===e&&(e=0),this.delta=0,this.now=e,super.start(),this}seek(e){return this.now=e,this}setTimeScale(e){return this.timeScale=e,this}tick(e){return e*=this.timeScale,this.now+=e,this.delta=e,this.emit("update",this.now,this.delta),this}}class Clock extends BaseClock{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(e,t){return this.isRunning&&0!==this.timeScale?(this.tick(t),this):this}}var Yoyo$1=function(e,t){return void 0===t&&(t=.5),e<=t?e/=t:e=1-(e-t)/(1-t),e};const Clamp$f=Phaser.Math.Clamp;class Timer{constructor(e,t){this.setTimeline(e).reset(t)}setTimeline(e){return this.timeline=e,this}setName(e){return this.name=e,this}setCallbacks(e,t,i,s){return this.target=e,this.onStart=t,this.onProgress=i,this.onComplete=s,this}setDuration(e,t){return void 0===t&&(t=!1),this.duration=e,this.remainder=e,this.t=0,this.yoyo=t,this}setPaused(e){return this.isPaused=e,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(e){return this.removed=e,this}remove(){return this.removed=!0,this}seek(e){return this.remainder=this.duration*(1-e),this}reset(e){return this.setName(e.name).setDuration(e.duration,e.yoyo).setCallbacks(e.target,e.onStart,e.onProgress,e.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var e=1-this.remainder/this.duration;return e=Clamp$f(e,0,1),this.yoyo&&(e=Yoyo$1(e)),e}setProgress(e){e=Clamp$f(e,0,1),this.remainder=this.duration*(1-e)}runCallback(e){e&&e(this.target,this.t,this)}update(e,t){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=t,this.t=this.getProgress(),this.runCallback(this.onProgress);var i=this.remainder<=0;return i&&this.runCallback(this.onComplete),i}}let TimerPool$1=class extends Stack{allocate(){return this.pop()}free(e){e.onFree(),this.push(e)}freeMultiple(e){for(var t=0,i=e.length;t<i;t++)this.free(e[t]);return this}};const GetValue$3j=Phaser.Utils.Objects.GetValue,TimerPool=new TimerPool$1;let Timeline$1=class extends Clock{constructor(e,t){super(e,t),this.addedTimers=[],this.timers=[],this.timerPool=GetValue$3j(t,"pool",TimerPool)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(e){var t=this.timerPool.allocate();return t?t.setTimeline(this).reset(e):t=new Timer(this,e),this.addedTimers.push(t),t.runCallback(t.onStart),this.isRunning||this.start(),t}delayCall(e,t,i,s){return this.addTimer({duration:e,onComplete:function(e,n,a){void 0===i&&(i=[]),i.push(a),t.apply(s,i)}})}delayEvent(e,t){this.removeDelayEvent(t);var i=this.delayCall(e,(function(){this.removeDelayEvent(t),this.emit(t)}),[],this);return this.once(`_remove.${t}`,(function(){i.remove(),i=void 0})),this}removeDelayEvent(e){return this.emit(`_remove.${e}`),this}getTimers(e){for(var t=[],i=[this.addedTimers,this.timers],s=0,n=i.length;s<n;s++)for(var a=i[s],r=0,o=a.length;r<o;r++){var l=a[r];l.name===e&&t.push(l)}return t}update(e,t){if(super.update(e,t),this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var i=[],s=0,n=this.timers.length;s<n;s++){var a=this.timers[s];a.update(this.now,this.delta)?this.timerPool.free(a):i.push(a)}this.timers=i,0===this.timers.length&&0===this.addedTimers.length&&this.complete()}}};const WaitCompleteEvent="_wait.complete",RemoveWaitEvents="_remove.wait";var PreUpdateDelayCall=function(e,t,i,s,n){var a=GetSceneObject(e);return a.time.delayedCall(t,(function(){a.sys.events.once("preupdate",(function(){i.call(s,n)}))}))};let WaitEvent$1=class{constructor(e){e||(this.setEventEmitter(!0),e=this),this.parent=e,this.waitId=0,this.waitCompleteEventName=WaitCompleteEvent,this.removeWaitEventsEventName=RemoveWaitEvents}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(e,t,i){var s=this.getWaitCompleteTriggerCallback(i);return e.once(t,s,this),this.parent.once(this.removeWaitEventsEventName,(function(){e.off(t,s,this)})),this.parent}getWaitCompleteTriggerCallback(e){void 0===e&&(e=!0);var t=this.waitId,i=this,s=function(){t<i.waitId||(i.waitId++,i.removeWaitEvents(),i.parent.emit(i.waitCompleteEventName))};return e?function(){PreUpdateDelayCall(i.parent,0,s)}:s}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(e,t){return this.parent.on(this.waitCompleteEventName,e,t),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(WaitEvent$1.prototype,EventEmitterMethods$1);const WaitTimeMethods={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,(function(){t.removeDelayEvent("delay")})),this.waitEvent(t,"delay")}};var Split=function(e,t){var i=`(?<!\\\\)\\${t}`,s=`\\${t}`;return e.split(new RegExp(i,"g")).map((function(e){return e.replace(s,t)}))};const WaitInputMethods={setClickTarget(e){return this.clickTarget=e,e?IsSceneObject(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if("string"==typeof e){if(-1===e.indexOf("|"))return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var i=Split(e,"|"),s=0,n=i.length;s<n;s++)this.waitEvent(t,`keydown-${i[s].toUpperCase()}`);return this.parent}return this.waitEvent(t,"keydown")}},WaitGameObjectMethods={waitGameObjectTweenComplete(e,t,i){var s=this.parent.getGameObjectTweenTask(e,t,i);return s?this.waitEvent(s,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,i,s){var n=this.parent.getGameObject(e,t);if(!n)return this.waitTime(0);if(n.getData(i)===s)return this.waitTime(0);var a=`changedata-${i}`,r=function(e,t,i){(t=!!t)===s&&e.emit("_dataFlagMatch")};return n.on(a,r),this.parent.once(this.removeWaitEventsEventName,(function(){n.off(a,r)})),this.waitEvent(n,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var i=this.parent.getGameObject(e,t);return i?this.waitEvent(i,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}var i=this.parent.gameObjectManagers,s=!1;for(var n in i)s=!0,this.waitEvent(i[n],"empty");return s?this.parent:this.waitTime(0)}},WaitCameraMethods={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var i,s,n;if(!(i=t?this.scene.cameras.getCamera(t):this.cameraTarget))return this.waitTime(0);switch(e){case"camera.fadein":s=i.fadeEffect,n="camerafadeincomplete";break;case"camera.fadeout":s=i.fadeEffect,n="camerafadeoutcomplete";break;case"camera.flash":s=i.flashEffect,n="cameraflashcomplete";break;case"camera.shake":s=i.shakeEffect,n="camerashakecomplete";break;case"camera.zoom":s=i.zoomEffect,n="camerazoomcomplete";break;case"camera.rotate":s=i.rotateToEffect,n="camerarotatecomplete";break;case"camera.scroll":s=i.panEffect,n="camerapancomplete"}return s.isRunning?this.waitEvent(i,n):this.waitTime(0)}},WaitMusicMethods={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}};var WaitAny$1=function(e){if(!e)return this.waitTime(0);var t=!1;for(var i in e)switch(i){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var s=i.split(".");if(2===s.length){var n=s[0],a=s[1],r=this.parent.getGameObjectManager(void 0,n);if(!r)continue;if("destroy"===a)return this.waitGameObjectDestroy(void 0,n);if("number"==typeof r.getProperty(n,a)){t=!0,this.waitGameObjectTweenComplete(void 0,n,a);continue}var o=a,l=o.startsWith("!");if(l&&(o=o.substring(1)),r.hasData(n,a)){t=!0,this.waitGameObjectDataFlag(void 0,n,o,!l);continue}this.waitEvent(gameObject,a);continue}s.length}return t||this.waitTime(0),this.parent},methods$D={waitAny:WaitAny$1};Object.assign(methods$D,WaitTimeMethods,WaitInputMethods,WaitGameObjectMethods,WaitCameraMethods,WaitMusicMethods);class WaitEventManager extends WaitEvent$1{constructor(e,t){super(e),this.waitCompleteEventName=GetValue$3U(t,"completeEventName",this.waitCompleteEventName),this.setClickTarget(GetValue$3U(t,"clickTarget",this.scene)),this.setClickShortcutKeys(GetValue$3U(t,"clickShortcutKeys",void 0)),this.setCameraTarget(GetValue$3U(t,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(e){this.parent.clickTarget=e}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(e){this.parent.clickShortcutKeys=e}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(e){this.parent.cameraTarget=e}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(WaitEventManager.prototype,methods$D);const GetValue$3i=Phaser.Utils.Objects.GetValue;var InitManagers=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var i=GetValue$3i(t,"layers",!1);if(!1!==i){var s=new LayerManager(e,{name:"LAYER",layers:i,rootLayer:GetValue$3i(t,"rootLayer",void 0),depth:GetValue$3i(t,"layerDepth",void 0)});this.addGameObjectManager(s),this.layerManager=s}var n=GetValue$3i(t,"sounds");return!1!==n&&(this.soundManager=new SoundManager(e,n)),this.timeline=new Timeline$1(this),this.waitEventManager=new WaitEventManager(this,t),this},SetTimeScale=function(e){for(var t in this.timeline.timeScale=e,this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},GetTimeScale=function(){return this.timeline.timeScale},DestroyManagers=function(e){for(var t in this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer,this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0};const GameObjectManagerMethods$1={addGameObjectManager(e,t){var i;return e instanceof GOManager?i=e:"string"==typeof e?(i=t).name=e:(void 0===e&&(e={}),void 0===t&&(t=GOManager),e.createGameObjectScope||(e.createGameObjectScope=this),i=new t(this.managersScene,e)),this.gameObjectManagers[i.name]=i,this},getGameObjectManager(e,t){if(e)return this.gameObjectManagers[e];for(var e in t&&"!"===t.charAt(0)&&(t=t.substring(1)),this.gameObjectManagers){var i;if((i=this.gameObjectManagers[e]).has(t))return i}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},GameObjectMethods={createGameObject(e,t,...i){return this.getGameObjectManager(e,t).add(t,...i),this},destroyGameObject(e,t){var i=this.getGameObjectManager(e,t);return void 0===t?i.removeAll():i.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,i,...s){return this.getGameObjectManager(e,t).call(t,i,...s),this},setGameObjectProperty(e,t,i,s){return this.getGameObjectManager(e,t).setProperty(t,i,s),this},easeGameObjectProperty(e,t,i){return this.getGameObjectManager(e,t).easeProperty(t,i),this},getGameObjectTweenTask(e,t,i){return this.getGameObjectManager(e,t).getTweenTask(t,i)},getGameObject(e,t,i){var s=this.getGameObjectManager(e,t);if(!s)return i;if("string"==typeof t)return s.getGO(t);void 0===i&&(i=[]);var n=t;void 0===n&&(n=Object.keys(s.bobs));for(var a=Array.isArray(i),r=0,o=n.length;r<o;r++){t=n[r];var l=s.getGO(t);l&&(a?i.push(l):i[t]=l)}return i},addGameObject(e,t,i){var s=this.getGameObjectManager(e,t);if("string"==typeof t)s.addGO(t,i);else{var n=t;for(t in n)s.addGO(t,n[t])}return this},drawGameObjectsBounds(e,t,i){e instanceof Phaser.GameObjects.Graphics&&(i=t,t=e,e=void 0),void 0===e&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var s=0,n=e.length;s<n;s++)this.getGameObjectManager(e[s]).drawGameObjectsBounds(t,i);return this}};var Extend=function(e){class t extends e{}var i={initManagers:InitManagers,setTimeScale:SetTimeScale,getTimeScale:GetTimeScale,destroyManagers:DestroyManagers};return Object.assign(t.prototype,i,GameObjectManagerMethods$1,GameObjectMethods),t},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function a(e,t,s,a,r){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new n(s,a||e,r),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function r(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,s,n=[];if(0===this._eventsCount)return n;for(s in e=this._events)t.call(e,s)&&n.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,a=s.length,r=new Array(a);n<a;n++)r[n]=s[n].fn;return r},o.prototype.listenerCount=function(e){var t=i?i+e:e,s=this._events[t];return s?s.fn?1:s.length:0},o.prototype.emit=function(e,t,s,n,a,r){var o=i?i+e:e;if(!this._events[o])return!1;var l,h,d=this._events[o],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,n),!0;case 5:return d.fn.call(d.context,t,s,n,a),!0;case 6:return d.fn.call(d.context,t,s,n,a,r),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];d.fn.apply(d.context,l)}else{var u,p=d.length;for(h=0;h<p;h++)switch(d[h].once&&this.removeListener(e,d[h].fn,void 0,!0),c){case 1:d[h].fn.call(d[h].context);break;case 2:d[h].fn.call(d[h].context,t);break;case 3:d[h].fn.call(d[h].context,t,s);break;case 4:d[h].fn.call(d[h].context,t,s,n);break;default:if(!l)for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];d[h].fn.apply(d[h].context,l)}}return!0},o.prototype.on=function(e,t,i){return a(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return a(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,s,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return r(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||s&&o.context!==s||r(this,a);else{for(var l=0,h=[],d=o.length;l<d;l++)(o[l].fn!==t||n&&!o[l].once||s&&o[l].context!==s)&&h.push(o[l]);h.length?this._events[a]=1===h.length?h[0]:h:r(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&r(this,t)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EE=getDefaultExportFromCjs(eventemitter3Exports);class EventEmitter extends EE{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}const EventEmitterMethods={setEventEmitter(e,t){return void 0===t&&(t=EventEmitter),this._privateEE=!0===e||void 0===e,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var FLOAT=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,HEX=/^0x[0-9A-F]+$/i,TypeConvert=function(e){if("string"!=typeof e)return e;if(""===e)e=null;else if(FLOAT.test(e))e=parseFloat(e);else if(HEX.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0}return e};let BracketParser$1=class{constructor(e){this.setEventEmitter(GetValue$3U(e,"eventEmitter",void 0)),this.setValueConverter(GetValue$3U(e,"valueConvert",!0)),this.setLoopEnable(GetValue$3U(e,"loop",!1)),this.setMultipleLinesTagEnable(GetValue$3U(e,"multipleLinesTag",!1));var t=GetValue$3U(e,"delimiters","<>");this.setDelimiters(t[0],t[1]),this.setTranslateTagNameCallback(GetValue$3U(e,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(e){return void 0===e&&(e=!0),this.multipleLinesTagEnable=e,this}setDelimiters(e,t){void 0===t&&(t=e[1],e=e[0]),this.delimiterLeft=e,this.delimiterRight=t,e=EscapeRegex(this.delimiterLeft),t=EscapeRegex(this.delimiterRight);var i=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${e}(.+?)${t}`,i),this}setTranslateTagNameCallback(e){return this.translateTagNameCallback=e,this}setValueConverter(e){return!0===e?e=TypeConvert:e||(e=BypassValueConverter),this.valueConverter=e,this}setLoopEnable(e){return void 0===e&&(e=!0),this.loopEnable=e,this}setSource(e){return this.source=e,this}resetIndex(e){return void 0===e&&(e=0),this.progressIndex=e,this.reSplit.lastIndex=e,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(e){return this.setSource(e).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;0===this.reSplit.lastIndex&&this.onStart();var e=this.source,t=e.length;for(this.reSplit.lastIndex=this.progressIndex;;){var i=this.reSplit.exec(e);if(!i){if(this.progressIndex<t&&(this.onContent(e.substring(this.progressIndex,t)),this.isPaused)){this.progressIndex=t;break}return this.onComplete(),void(this.isRunning=!1)}var s=this.reSplit.lastIndex,n=s-i[0].length;if(this.progressIndex<n&&(this.onContent(e.substring(this.progressIndex,n)),this.isPaused)){this.progressIndex=n;break}if(this.lastTagSource=i[0],this.onTag(i[1]),this.lastTagSource=void 0,this.progressIndex=s,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(e,t){return this.isPaused||(this.pause(),e.once(t,(function(){this.next()}),this)),this}onContent(e){this.skipEventFlag=!1,this.emit("content",e),this.lastContent=e}onTag(e){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const BypassValueConverter=function(e){return e};Object.assign(BracketParser$1.prototype,EventEmitterMethods);var StringToValues=function(e,t,i){if(null==e)return[];void 0===t&&(t=TypeConvert),void 0===i&&(i=",");for(var s=e.split(i),n=0,a=s.length;n<a;n++)s[n]=t(s[n]);return s};class BracketParser extends BracketParser$1{constructor(e){void 0===e&&(e={}),e.hasOwnProperty("multipleLinesTag")||(e.multipleLinesTag=!1),super(e),this.setTagExpression(GetValue$3U(e,"regex.tag",void 0)),this.setValueExpression(GetValue$3U(e,"regex.value",void 0));var t=GetValue$3U(e,"delimiters","<>");this.setDelimiters(t[0],t[1])}setTagExpression(e){return e||(e=DefaultTokenExpression),this.tagExpression=e,this}setValueExpression(e){return e||(e=DefaultTokenExpression),this.valueExpression=e,this}setDelimiters(e,t){super.setDelimiters(e,t);var i=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(i,"i"),this.tagExpression!==DefaultTokenExpression||this.valueExpression!==DefaultTokenExpression){var s=`${this.tagExpression}(=${this.valueExpression})?`,n=`/${this.tagExpression}`;e=EscapeRegex(this.delimiterLeft),t=EscapeRegex(this.delimiterRight);var a=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${e}((${s})|(${n}))${t}`,a)}return this}onTag(e){var t=e.match(this.reTag),i=t[1],s="/"===i.charAt(0);if(s&&(i=i.substring(1,i.length)),this.translateTagNameCallback&&(i=this.translateTagNameCallback(i)),this.skipEventFlag=!1,s)this.emit(`-${i}`),this.skipEventFlag||this.emit("-",i),this.lastTagEnd=i;else{var n=StringToValues(t[3],this.valueConverter);this.emit(`+${i}`,...n),this.skipEventFlag||this.emit("+",i,...n),this.lastTagStart=i}}}const DefaultTokenExpression="[^=]+";var OnParseColorTag=function(e,t,i){var s,n="color";t.on("start",(function(){s=e.textStyle.color})).on(`+${n}`,(function(i){e.textStyle.setColor(i),t.skipEvent()})).on(`-${n}`,(function(){e.textStyle.setColor(s),t.skipEvent()})).on("complete",(function(){e.textStyle.setColor(s)}))},OnParseStrokeColorTag=function(e,t,i){var s,n="stroke";t.on("start",(function(){s=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)})).on(`+${n}`,(function(i){void 0===i&&(i=s),e.textStyle.setStrokeStyle(i),t.skipEvent()})).on(`-${n}`,(function(){e.textStyle.setStrokeStyle(null),t.skipEvent()})).on("complete",(function(){e.textStyle.setStrokeStyle(s)}))},OnParseBoldTag=function(e,t,i){t.on("start",(function(){e.textStyle.setBold(!1)})).on("+b",(function(){e.textStyle.setBold(!0),t.skipEvent()})).on("-b",(function(){e.textStyle.setBold(!1),t.skipEvent()}))},OnParseItalicTag=function(e,t,i){t.on("start",(function(){e.textStyle.setItalic(!1)})).on("+i",(function(){e.textStyle.setItalic(!0),t.skipEvent()})).on("-i",(function(){e.textStyle.setItalic(!1),t.skipEvent()}))},OnParseFontSizeTag=function(e,t,i){var s,n="size";t.on("start",(function(){s=e.textStyle.fontSize})).on(`+${n}`,(function(i){e.textStyle.setFontSize(i),t.skipEvent()})).on(`-${n}`,(function(){e.textStyle.setFontSize(s),t.skipEvent()})).on("complete",(function(){e.textStyle.setFontSize(s)}))},OnParseOffsetYTag=function(e,t,i){var s;t.on("start",(function(){s=e.textStyle.offsetY,e.textStyle.setOffsetY(0)})).on("+y",(function(i){void 0===i&&(i=s),e.textStyle.setOffsetY(i),t.skipEvent()})).on("-y",(function(){e.textStyle.setOffsetY(0),t.skipEvent()})).on("complete",(function(){e.textStyle.setOffsetY(0)}))},OnParseOffsetXTag=function(e,t,i){var s;t.on("start",(function(){s=e.textStyle.offsetY,e.textStyle.setOffsetX(0)})).on("+x",(function(i){void 0===i&&(i=s),e.textStyle.setOffsetX(i),t.skipEvent()})).on("-x",(function(){e.textStyle.setOffsetX(0),t.skipEvent()})).on("complete",(function(){e.textStyle.setOffsetX(0)}))},OnParseLeftSpaceTag=function(e,t,i){var s,n="left";t.on("start",(function(){s=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)})).on(`+${n}`,(function(i){void 0===i&&(i=s),e.textStyle.setLeftSpace(i),t.skipEvent()})).on(`-${n}`,(function(){e.textStyle.setLeftSpace(0),t.skipEvent()})).on("complete",(function(){e.textStyle.setLeftSpace(0)}))},OnParseRightSpaceTag=function(e,t,i){var s,n="right";t.on("start",(function(){s=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)})).on(`+${n}`,(function(i){void 0===i&&(i=s),e.textStyle.setRightSpace(i),t.skipEvent()})).on(`-${n}`,(function(){e.textStyle.setRightSpace(0),t.skipEvent()})).on("complete",(function(){e.textStyle.setRightSpace(0)}))},OnParseShadowColorTag=function(e,t,i){var s,n="shadow";t.on("start",(function(){s=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)})).on(`+${n}`,(function(i){void 0===i&&(i=s),e.textStyle.setShadowColor(i),t.skipEvent()})).on(`-${n}`,(function(){e.textStyle.setShadowColor(null),t.skipEvent()})).on("complete",(function(){e.textStyle.setShadowColor(s)}))},OnParseAlignTag=function(e,t,i){var s="align";t.on(`+${s}`,(function(i){e.textStyle.setAlign(i),t.skipEvent()})).on(`-${s}`,(function(){e.textStyle.setAlign(),t.skipEvent()})).on("complete",(function(){e.textStyle.setAlign()}))},OnParseImageTag$1=function(e,t,i){t.on("+img",(function(i){var s=e.imageManager.get(i);s&&AppendImage.call(e,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right,color:s.tintFill?e.textStyle.color:void 0}),t.skipEvent()})).on("-img",(function(){t.skipEvent()}))},OnParseImageTag=function(e,t,i){var s="space";t.on(`+${s}`,(function(i){AppendSpace.call(e,i),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},OnParseTypingSpeedTag=function(e,t,i){var s="speed";t.on(`+${s}`,(function(i){AppendCommand$2(e,i),t.skipEvent()})).on(`-${s}`,(function(){AppendCommand$2(e,void 0),t.skipEvent()}))},SetTypingSpeed=function(e){this.typeWriter.setTypingSpeed(e)},AppendCommand$2=function(e,t){AppendCommand$3.call(e,"speed",SetTypingSpeed,t,e)},OnParsePlaySoundEffectTag=function(e,t,i){var s="se";t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,PlaySoundEffect,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se2",t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,PlaySoundEffect2,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},PlaySoundEffect=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}},PlaySoundEffect2=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect2(t),i&&this.soundManager.fadeInSoundEffect2(i)}},OnParseFadeInSoundEffectTag=function(e,t,i){var s="se.fadein";t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,FadeInSoundEffect,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se2.fadein",t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,FadeInSoundEffect2,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},FadeInSoundEffect=function(e){this.soundManager.fadeInSoundEffect(e)},FadeInSoundEffect2=function(e){this.soundManager.fadeInSoundEffect2(e)},OnParseFadeOutSoundEffectTag=function(e,t,i){var s="se.fadeout";t.on(`+${s}`,(function(i,n){n="stop"===n,AppendCommand$3.call(e,s,FadeOutSoundEffect,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se2.fadeout",t.on(`+${s}`,(function(i,n){n="stop"===n,AppendCommand$3.call(e,s,FadeOutSoundEffect2,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},FadeOutSoundEffect=function(e){this.soundManager.fadeOutSoundEffect(...e)},FadeOutSoundEffect2=function(e){this.soundManager.fadeOutSoundEffect2(...e)},OnParseSetSoundEffectVolumeTag=function(e,t,i){var s="se.volume";t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,SetSoundEffectVolume,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se2.volume",t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,SetSoundEffectVolume2,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},SetSoundEffectVolume=function(e){this.soundManager.setSoundEffectVolume(e,!0)},SetSoundEffectVolume2=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},OnParseSetSoundEffectMuteTag=function(e,t,i){var s="se.mute";t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetSoundEffectMute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se2.mute",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetSoundEffect2Mute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se.unmute",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetSoundEffectUnMute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="se2.unmute",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetSoundEffect2UnMute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},SetSoundEffectMute=function(){this.soundManager.setSoundEffectMute(!0)},SetSoundEffect2Mute=function(){this.soundManager.setSoundEffect2Mute(!0)},SetSoundEffectUnMute=function(){this.soundManager.setSoundEffectMute(!1)},SetSoundEffect2UnMute=function(){this.soundManager.setSoundEffect2Mute(!1)},OnParsePlayBackgroundMusicTag=function(e,t,i){var s="bgm";t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,PlayBackgroundMusic,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){AppendCommand$3.call(e,"bgm.stop",StopBackgroundMusic,void 0,e),t.skipEvent()})),s="bgm2",t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,PlayBackgroundMusic2,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){AppendCommand$3.call(e,"bgm2.stop",StopBackgroundMusic2,void 0,e),t.skipEvent()}))},PlayBackgroundMusic=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},StopBackgroundMusic=function(){this.soundManager.stopBackgroundMusic()},PlayBackgroundMusic2=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic2(t),i&&this.soundManager.fadeInBackgroundMusic2(i)},StopBackgroundMusic2=function(){this.soundManager.stopBackgroundMusic2()},OnParseFadeInBackgroundMusicTag=function(e,t,i){var s="bgm.fadein";t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,FadeInBackgroundMusic,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm2.fadein",t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,FadeInBackgroundMusic2,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},FadeInBackgroundMusic=function(e){this.soundManager.fadeInBackgroundMusic(e)},FadeInBackgroundMusic2=function(e){this.soundManager.fadeInBackgroundMusic2(e)},OnParseFadeOutBackgroundMusicTag=function(e,t,i){var s="bgm.fadeout";t.on(`+${s}`,(function(i,n){n="stop"===n,AppendCommand$3.call(e,s,FadeOutBackgroundMusic,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm2.fadeout",t.on(`+${s}`,(function(i,n){n="stop"===n,AppendCommand$3.call(e,s,FadeOutBackgroundMusic2,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},FadeOutBackgroundMusic=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},FadeOutBackgroundMusic2=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},OnParseCrossFadeBackgroundMusicTag=function(e,t,i){var s="bgm.cross";t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,CrossFadeBackgroundMusic,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm2.cross",t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,CrossFadeBackgroundMusic2,[i,n],e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},CrossFadeBackgroundMusic=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},CrossFadeBackgroundMusic2=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},OnParsePauseBackgroundMusicTag=function(e,t,i){var s="bgm.pause";t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,PauseBackgroundMusic,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){AppendCommand$3.call(e,"bgm.resume",ResumeBackgroundMusic,void 0,e),t.skipEvent()})),s="bgm2.pause",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,PauseBackgroundMusic2,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){AppendCommand$3.call(e,"bgm2.resume",ResumeBackgroundMusic2,void 0,e),t.skipEvent()}))},PauseBackgroundMusic=function(){this.soundManager.pauseBackgroundMusic()},ResumeBackgroundMusic=function(){this.soundManager.resumeBackgroundMusic()},PauseBackgroundMusic2=function(){this.soundManager.pauseBackgroundMusic2()},ResumeBackgroundMusic2=function(){this.soundManager.resumeBackgroundMusic2()},OnParseSetBackgroundMusicVolumeTag=function(e,t,i){var s="bgm.volume";t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,SetBackgroundMusicVolume,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm2.volume",t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,SetBackgroundMusicVolume2,i,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},SetBackgroundMusicVolume=function(e){this.soundManager.setBackgroundMusicVolume(e)},SetBackgroundMusicVolume2=function(e){this.soundManager.setBackgroundMusicVolume2(e)},OnParseSetBackgroundMusicMuteTag=function(e,t,i){var s="bgm.mute";t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetBackgroundMusicMute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm2.mute",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetBackgroundMusic2Mute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm.unmute",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetBackgroundMusicUnMute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})),s="bgm2.unmute",t.on(`+${s}`,(function(){AppendCommand$3.call(e,s,SetBackgroundMusic2UnMute,void 0,e),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()}))},SetBackgroundMusicMute=function(){this.soundManager.setBackgroundMusicMute(!0)},SetBackgroundMusic2Mute=function(){this.soundManager.setBackgroundMusic2Mute(!0)},SetBackgroundMusicUnMute=function(){this.soundManager.setBackgroundMusicMute(!1)},SetBackgroundMusic2UnMute=function(){this.soundManager.setBackgroundMusic2Mute(!1)},OnParseFadeInCameraTag=function(e,t,i){var s="camera.fadein";t.on(`+${s}`,(function(i,n,a,r){AppendCommand$3.call(e,s,PlayFadeInEffect,[i,n,a,r],e),t.skipEvent()}))},PlayFadeInEffect=function(e){this.cameraTarget.fadeIn(...e)},OnParseFadeOutCameraTag=function(e,t,i){var s="camera.fadeout";t.on(`+${s}`,(function(i,n,a,r){AppendCommand$3.call(e,s,PlayFadeOutEffect,[i,n,a,r],e),t.skipEvent()}))},PlayFadeOutEffect=function(e){this.cameraTarget.fadeOut(...e)},OnParseShakeCameraTag=function(e,t,i){var s="camera.shake";t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,PlayShakeEffect,[i,n],e),t.skipEvent()}))},PlayShakeEffect=function(e){this.cameraTarget.shake(...e)},OnParseFlashCameraTag=function(e,t,i){var s="camera.flash";t.on(`+${s}`,(function(i,n,a,r){AppendCommand$3.call(e,s,PlayFlashEffect,[i,n,a,r],e),t.skipEvent()}))},PlayFlashEffect=function(e){this.cameraTarget.flash(...e)},OnParseZoomCameraTag=function(e,t,i){var s="camera.zoom";t.on(`+${s}`,(function(i){AppendCommand$3.call(e,s,Zoom,i,e),t.skipEvent()})).on(`+${s}.to`,(function(i,s,n){AppendCommand$3.call(e,"camera.zoom.to",ZoomTo,[i,s,n],e),t.skipEvent()}))},Zoom=function(e){this.cameraTarget.setZoom(e)},ZoomTo=function(e){this.cameraTarget.zoomTo(...e)};const DegToRad$f=Phaser.Math.DegToRad;var OnParseRotateCameraTag=function(e,t,i){var s="camera.rotate";t.on(`+${s}`,(function(i){i=DegToRad$f(i),AppendCommand$3.call(e,s,Rotate$1,i,e),t.skipEvent()})).on(`+${s}.to`,(function(i,s,n){i=DegToRad$f(i),AppendCommand$3.call(e,"camera.rotate.to",RotateTo,[i,s,n],e),t.skipEvent()}))},Rotate$1=function(e){this.cameraTarget.setRotation(e)},RotateTo=function(e){var t=e[0],i=e[1],s=e[2];this.cameraTarget.rotateTo(t,!1,i,s)},OnParseScrollCameraTag=function(e,t,i){var s="camera.scroll";t.on(`+${s}`,(function(i,n){AppendCommand$3.call(e,s,Scroll,[i,n],e),t.skipEvent()})).on(`+${s}.to`,(function(i,s,n,a){AppendCommand$3.call(e,"camera.scroll.to",ScrollTo,[i,s,n,a],e),t.skipEvent()}))},Scroll=function(e){this.cameraTarget.setScroll(...e)},ScrollTo=function(e){var t=e[0],i=e[1],s=e[2],n=e[3],a=this.cameraTarget,r=a.scrollX,o=a.scrollY;a.setScroll(t,i),t+=a.centerX,i+=a.centerY,a.setScroll(r,o),a.pan(t,i,s,n)},OnParseWaitTag=function(e,t,i){var s="wait",n="click";t.on(`+${s}`,(function(i){AppendCommand$1(e,i),t.skipEvent()})).on(`-${s}`,(function(){t.skipEvent()})).on(`+${n}`,(function(){AppendCommand$1(e,"click"),t.skipEvent()})).on(`-${n}`,(function(){t.skipEvent()}))},Wait$2=function(e){this.typeWriter.wait(e)},AppendCommand$1=function(e,t){AppendCommand$3.call(e,"wait",Wait$2,t,e)},OnParseNewLineTag=function(e,t,i){t.on("+r",(function(){AppendText.call(e,"\n"),t.skipEvent()})).on("-r",(function(){t.skipEvent()}))},OnParsePageBreakTag=function(e,t,i){for(var s=["pagebreak","pb"],n=0,a=s.length;n<a;n++){var r=s[n];t.on(`+${r}`,(function(){AppendText.call(e,"\f"),t.skipEvent()})).on(`-${r}`,(function(){t.skipEvent()}))}},OnParseContentOff=function(e,t,i){t.on("+content.off",(function(){t.setContentOutputEnable(!1),t.skipEvent()}))},OnParseContentOn=function(e,t,i){t.on("+content.on",(function(){t.setContentOutputEnable(),t.skipEvent()}))},OnParseContent=function(e,t,i){t.on("content",(function(i){if(t.contentOutputEnable)AppendText.call(e,i);else{var s=`+${t.lastTagStart}`;e.emit(`parser.${s}#content`,t,i)}}))},OnParseCustomTag=function(e,t,i){t.on("start",(function(){e.emit("parser.start",t)})).on("+",(function(i,...s){if(!t.skipEventFlag){var n=`+${i}`,a=s;e.emit(`parser.${n}`,t,...s,a),AppendCommand(e,n,a)}})).on("-",(function(i){if(!t.skipEventFlag){var s=`-${i}`,n=[];e.emit(`parser.${s}`,t,n),AppendCommand(e,s,n)}})).on("complete",(function(){e.emit("parser.complete",t)}))},FireEvent$1=function(e,t){var i=`tag.${t}`;null==e?this.emit(i):this.emit(i,...e)},AppendCommand=function(e,t,i){AppendCommand$3.call(e,t,FireEvent$1,i,e)};const ParseCallbacks$2=[OnParseColorTag,OnParseStrokeColorTag,OnParseBoldTag,OnParseItalicTag,OnParseFontSizeTag,OnParseShadowColorTag,OnParseAlignTag,OnParseOffsetYTag,OnParseOffsetXTag,OnParseLeftSpaceTag,OnParseRightSpaceTag,OnParseImageTag$1,OnParseImageTag,OnParseTypingSpeedTag,OnParsePlaySoundEffectTag,OnParseFadeInSoundEffectTag,OnParseFadeOutSoundEffectTag,OnParseSetSoundEffectVolumeTag,OnParseSetSoundEffectMuteTag,OnParsePlayBackgroundMusicTag,OnParseFadeInBackgroundMusicTag,OnParseFadeOutBackgroundMusicTag,OnParseCrossFadeBackgroundMusicTag,OnParsePauseBackgroundMusicTag,OnParseSetBackgroundMusicVolumeTag,OnParseSetBackgroundMusicMuteTag,OnParseFadeInCameraTag,OnParseFadeOutCameraTag,OnParseShakeCameraTag,OnParseFlashCameraTag,OnParseZoomCameraTag,OnParseRotateCameraTag,OnParseScrollCameraTag,OnParseWaitTag,OnParseNewLineTag,OnParsePageBreakTag,OnParseContentOff,OnParseContentOn,OnParseContent,OnParseCustomTag];var AddParseCallbacks=function(e,t,i){for(var s=0,n=ParseCallbacks$2.length;s<n;s++)ParseCallbacks$2[s](e,t,i)},PreProcess=function(e,t){for(var i=e.commentLineStart,s=t.split("\n"),n=0,a=s.length;n<a;n++){var r=s[n];""===r||(0===r.trim().length||i&&r.startsWith(i))&&(s[n]="")}return s.join("")};const GetValue$3h=Phaser.Utils.Objects.GetValue;class Parser extends BracketParser{constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("delimiters")||(t.delimiters="[]"),super(t),AddParseCallbacks(e,this,t),this.setCommentLineStartSymbol(GetValue$3h(t,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(e){return this.commentLineStart=e,this}setContentOutputEnable(e){return void 0===e&&(e=!0),this.contentOutputEnable=e,this}start(e){return super.start(PreProcess(this,e)),this}}const TypingSpeedMethods$1={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return void 0===e&&(e=this.defaultSpeed),this.speed=e,this}},PageFadeOutCompleteEvent="page.fadeout",StopPlayEvent="_remove.play",ClearEvents$1=[PageFadeOutCompleteEvent,StopPlayEvent];var FadeOutPage=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(PageFadeOutCompleteEvent),this;var e=this.children.filter((function(e){return e.renderable})),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(t)if(t.once)t.once("complete",(function(){this.emit(PageFadeOutCompleteEvent)}),this);else if(t.then){var i=this;t.then((function(){i.emit(PageFadeOutCompleteEvent)}))}else this.emit(PageFadeOutCompleteEvent);else this.emit(PageFadeOutCompleteEvent);return this},WaitEvent=function(e,t){return new Promise((function(i,s){e.once(t,(function(){i()}))}))},WaitComplete=function(e){return WaitEvent(e,"complete")},Start$1=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),WaitComplete(this)};const TypingDelayTimerType="delay",TypingAnimationTimerType="anim";var Typing=function(e){void 0===e&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",(function(){this.isPageTyping=!1,this.emit("complete")}),this):(this.isPageTyping=!1,this.emit("complete"));break}if(i.renderable){var s=this.animationConfig;if(s.duration>0){var n=this.timeline.addTimer({name:TypingAnimationTimerType,target:i,duration:s.duration,yoyo:s.yoyo,onStart:s.onStart,onProgress:s.onProgress,onComplete:s.onComplete});this.skipTypingAnimation&&n.seek(1)}else s.onStart&&s.onStart(i,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",i);var a=this.nextChild;if(a)if(this.skipSpaceEnable&&IsSpaceChar(a));else if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:TypingDelayTimerType,target:this,duration:t,onComplete:function(e,t,i){e.typingTimer=void 0,Typing.call(e,i.remainder)}});break}}else IsCommand(i)&&i.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},Pause$1=function(){return this.timeline.pause(),this},Resume$1=function(){return this.timeline.resume(),this},PauseTyping$1=function(){return this.isTypingPaused||(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0)),this},ResumeTyping$1=function(e){return this.isTypingPaused?(void 0===e&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},IsWaitCameraEffect=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},IsWaitGameObject=function(e,t){var i=t.split(".");return e.gameObjectManagers.hasOwnProperty(i[0])},WaitGameObject=function(e,t,i,s){var n=e.waitEventManager,a=t.split("."),r=a[0],o=e.getGameObjectManager(r),l=`wait.${r}`;switch(a.length){case 1:return n.waitGameObjectManagerEmpty(r),void e.emit(l);case 2:var h=a[1];return n.waitGameObjectDestroy(r,h),void e.emit(l,h);case 3:h=a[1];var d=a[2];if("number"==typeof o.getProperty(h,d))return n.waitGameObjectTweenComplete(r,h,d),void e.emit(l,h,d);var c=d,u=c.startsWith("!");return u&&(c=c.substring(1)),o.hasData(h,c)?(n.waitGameObjectDataFlag(r,h,c,!u),void e.emit(l,h,c)):void n.waitTime(0)}};const KeyCodes=Phaser.Input.Keyboard.KeyCodes;var WaitAny=function(e,t,i,s){var n=e.waitEventManager;n.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,s);for(var a=0,r=(t="string"==typeof t&&t.length>1&&-1!==t.indexOf("|")?t.split("|"):[t]).length;a<r;a++){var o=t[a];if(null==o||"wait"===o){var l=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",l)}else if("number"!=typeof o&&isNaN(o))if("click"===o)n.waitClick(),e.emit("wait.click");else if("se"===o){n.waitSoundEffectComplete();var h=e.soundManager.getLastSoundEffect();e.emit("wait.music",h)}else"se2"===o?(n.waitSoundEffect2Complete(),h=e.soundManager.getLastSoundEffect2(),e.emit("wait.music",h)):"bgm"===o?(n.waitBackgroundMusicComplete(),h=e.soundManager.getBackgroundMusic(),e.emit("wait.music",h)):"bgm2"===o?(n.waitBackgroundMusic2Complete(),h=e.soundManager.getBackgroundMusic2(),e.emit("wait.music",h)):KeyCodes.hasOwnProperty(o.toUpperCase())?(n.waitKeyDown(o),e.emit("wait.keydown",o)):IsWaitCameraEffect(o)?(n.waitCameraEffectComplete(o),e.emit("wait.camera",o)):IsWaitGameObject(e,o)?WaitGameObject(e,o):(l=e.waitEventManager.getWaitCompleteTriggerCallback(),e.emit(`wait.${o}`,l));else{var d=parseFloat(o);n.waitTime(d),e.emit("wait.time",d)}}},Wait$1=function(e){return this.ignoreWait||(this.pauseTyping(),WaitAny(this.textPlayer,e,this.resumeTyping,this)),this},SetIgnoreWait$1=function(e){return void 0===e&&(e=!0),this.ignoreWait=e,this},SetSkipSpaceEnable=function(e){return void 0===e&&(e=!0),this.skipSpaceEnable=e,this},SetSkipTypingAnimation=function(e){if(void 0===e&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(TypingAnimationTimerType),i=0,s=t.length;i<s;i++)t[i].seek(1);return this},SetSkipSoundEffect=function(e){if(void 0===e&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},SkipCurrentTypingDelay=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Methods$g={fadeOutPage:FadeOutPage,start:Start$1,typing:Typing,pause:Pause$1,resume:Resume$1,pauseTyping:PauseTyping$1,resumeTyping:ResumeTyping$1,wait:Wait$1,setIgnoreWait:SetIgnoreWait$1,setSkipSpaceEnable:SetSkipSpaceEnable,setSkipTypingAnimation:SetSkipTypingAnimation,setSkipSoundEffect:SetSkipSoundEffect,skipCurrentTypingDelay:SkipCurrentTypingDelay};Object.assign(Methods$g,TypingSpeedMethods$1);const GetValue$3g=Phaser.Utils.Objects.GetValue;class TypeWriter{constructor(e,t){this.setEventEmitter(),this.textPlayer=e,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(GetValue$3g(t,"onTypingStart",SetChildrenInvisible)),this.setDefaultTypingSpeed(GetValue$3g(t,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(GetValue$3g(t,"skipSpace",!1)),this.setAnimationConfig(GetValue$3g(t,"animation",void 0)),this.setMinSizeEnable(GetValue$3g(t,"minSizeEnable",!1)),this.setFadeOutPageCallback(GetValue$3g(t,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(e){return this.onTypeStart=e,this}setAnimationConfig(e){return e||(e={}),e.hasOwnProperty("duration")||(e.duration=0),e.hasOwnProperty("onStart")||(e.onStart=SetChildVisible),this.animationConfig=e,this}setFadeOutPageCallback(e){return this.fadeOutPageCallback=e,this}setMinSizeEnable(e){return void 0===e&&(e=!0),this.minSizeEnable=e,this}getNextChild(){var e=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,e}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var SetChildVisible=function(e){e.setVisible&&e.setVisible()},SetChildrenInvisible=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];s.setVisible&&s.setVisible(!1)}};Object.assign(TypeWriter.prototype,EventEmitterMethods$1,Methods$g);class SpriteBob extends BobBase{playAnimation(e){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(e),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(e){return this.gameObject.chain(e),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(e){return super.setTimeScale(e),this.gameObject.anims&&(this.gameObject.anims.timeScale=e),this}}const AnimationMethods={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}};var Methods$f={};Object.assign(Methods$f,AnimationMethods);var GetCreateGameObjectCallback=function(e){return e&&"sprite"!==e?"image"===e&&(e=CreateImage$1):e=CreateSprite,e},CreateSprite=function(e,t,i){return"string"!=typeof i&&"number"!=typeof i&&(i=void 0),e.add.sprite(0,0,t,i)},CreateImage$1=function(e,t,i){return"string"!=typeof i&&"number"!=typeof i&&(i=void 0),e.add.image(0,0,t,i)};class SpriteManager extends GOManager{constructor(e,t){void 0===t&&(t={}),t.BobClass=SpriteBob,super(e,t)}setCreateGameObjectCallback(e,t){return e=GetCreateGameObjectCallback(e),super.setCreateGameObjectCallback(e,t),this}}Object.assign(SpriteManager.prototype,Methods$f);var IsPlayAnimationTag=function(e,t){return 3===e.length&&e[0]===t&&"play"===e[2]},IsStopAnimationTag=function(e,t){return 3===e.length&&e[0]===t&&"stop"===e[2]},OnParsePlayAnimationTag=function(e,t,i){var s=i.name;t.on("+",(function(i,...n){if(!t.skipEventFlag){var a,r=i.split(".");IsPlayAnimationTag(r,s)&&(a=r[1],AppendCommand$3.call(e,`${s}.play`,PlayAnimation,[s,a,n],e),t.skipEvent())}})).on("+",(function(i){if(!t.skipEventFlag){var n,a=i.split(".");IsStopAnimationTag(a,s)&&(n=a[1],AppendCommand$3.call(e,`${s}.stop`,StopAnimation,[s,n],e),t.skipEvent())}})).on("-",(function(i){if(!t.skipEventFlag){var n,a=i.split(".");IsPlayAnimationTag(a,s)&&(n=a[1],AppendCommand$3.call(e,`${s}.stop`,StopAnimation,[s,n],e),t.skipEvent())}}))},PlayAnimation=function(e){var t,i,s;[t,i,s]=e;var n=s.shift(),a=this.getGameObjectManager(t);a.playAnimation(i,n),s.length>0&&a.chainAnimation(i,s)},StopAnimation=function(e){var t,i;[t,...i]=e,this.getGameObjectManager(t).stopAnimation(...i)},IsPauseAnimationTag=function(e,t){return 3===e.length&&e[0]===t&&"pause"===e[2]},OnParsePauseAnimationTag=function(e,t,i){var s=i.name;t.on("+",(function(i){if(!t.skipEventFlag){var n,a=i.split(".");IsPauseAnimationTag(a,s)&&(n=a[1],AppendCommand$3.call(e,`${s}.pause`,PauseAnimation,[s,n],e),t.skipEvent())}}))},PauseAnimation=function(e){var t,i;[t,...i]=e,this.getGameObjectManager(t).pauseAnimation(...i)},IsChainAnimationTag=function(e,t){return 3===e.length&&e[0]===t&&"chain"===e[2]},OnParseChainAnimationTag=function(e,t,i){var s=i.name;t.on("+",(function(i){if(!t.skipEventFlag){var n,a=i.split(".");if(IsChainAnimationTag(a,s)){n=a[1];var r=Array.prototype.slice.call(arguments,1);AppendCommand$3.call(e,`${s}.chain`,ChainAnimation,[s,n,r],e),t.skipEvent()}}}))},ChainAnimation=function(e){var t,i;[t,...i]=e,this.getGameObjectManager(t).chainAnimation(...i)};const ParseCallbacks$1=[OnParsePlayAnimationTag,OnParsePauseAnimationTag,OnParseChainAnimationTag];var AddSpriteManager=function(e){void 0===e&&(e={}),e.name="sprite",e.parseCallbacks=ParseCallbacks$1,e.createGameObject=GetCreateGameObjectCallback(e.createGameObject),this.addGameObjectManager(e,SpriteManager)},IsAddGameObjectTag=function(e,t){return 2===e.length&&e[0]===t},OnParseAddGameObjectTag=function(e,t,i){var s=i.name;t.on("+",(function(i,...n){if(!t.skipEventFlag){var a,r=i.split(".");IsAddGameObjectTag(r,s)&&(a=r[1],AppendCommand$3.call(e,`${s}.add`,AddGameObject,[s,a,...n],e),t.skipEvent())}})).on("-",(function(i){if(!t.skipEventFlag){var n,a=i.split(".");IsAddGameObjectTag(a,s)&&(n=a[1],AppendCommand$3.call(e,`${s}.remove`,RemoveGameObject,[s,n],e),t.skipEvent())}}))},AddGameObject=function(e){var t,i;[t,...i]=e,this.getGameObjectManager(t).add(...i)},RemoveGameObject=function(e){var t,i;[t,...i]=e,this.getGameObjectManager(t).remove(...i)},OnParseRemoveAllGameObjectsTag=function(e,t,i){var s=i.name;t.on("-",(function(i){t.skipEventFlag||i===s&&(AppendCommand$3.call(e,`${s}.removeall`,RemoveAllSprites,s,e),t.skipEvent())}))},RemoveAllSprites=function(e){this.getGameObjectManager(e).removeAll()},IsPropTag=function(e,t){return 3===e.length&&e[0]===t},OnParseCallGameObjectMethodTag=function(e,t,i){var s=i.name;t.on("+",(function(i,...n){if(!t.skipEventFlag){var a,r,o=i.split(".");IsPropTag(o,s)&&(a=o[1],r=o[2],AppendCommand$3.call(e,`${s}.call`,CallMethod,[s,a,r,...n],e),t.skipEvent())}}))},CallMethod=function(e){var t,i,s,n;[t,i,s,...n]=e;var a=`${t}.${s}`;if(this.emit(a,i,...n),!(this.listenerCount(a)>0)){var r=this.getGameObjectManager(t);r.hasMethod(i,s)?r.call(i,s,...n):r.setProperty(i,s,n[0])}},EaseMode={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},IsEasePropertyTag=function(e,t){return 4===e.length&&e[0]===t&&EaseMode[e[3]]},OnParseEaseGameObjectPropertyTag=function(e,t,i){var s=i.name;e.getGameObjectManager(s),t.on("+",(function(i,n,a,r,o){if(!t.skipEventFlag){var l,h,d,c=i.split(".");IsEasePropertyTag(c,s)&&(l=c[1],h=c[2],d=c[3],"number"==typeof r&&(o=r,r=void 0),AppendCommand$3.call(e,`${s}.ease`,EaseProperty,[s,l,h,n,a,r,o,d],e),t.skipEvent())}}))},EaseProperty=function(e){var t,i,s,n,a,r,o,l;[t,i,s,n,a,r,o,l]=e;var h=this.getGameObjectManager(t),d=h.getProperty(i,s);if("number"==typeof d){l.endsWith("Left")||l.endsWith("Up")?l.startsWith("to")||l.startsWith("yoyo")?n=d-n:l.startsWith("from")&&(h.setProperty(i,s,d-n),n=d):l.endsWith("Right")||l.endsWith("Down")?l.startsWith("to")||l.startsWith("yoyo")?n=d+n:l.startsWith("from")&&(h.setProperty(i,s,d+n),n=d):"from"===l&&(h.setProperty(i,s,n),n=d);var c=l.startsWith("yoyo");h.easeProperty(i,{property:s,value:n,duration:a,ease:r,repeat:o,yoyo:c})}};const ParseCallbacks=[OnParseAddGameObjectTag,OnParseRemoveAllGameObjectsTag,OnParseCallGameObjectMethodTag,OnParseEaseGameObjectPropertyTag],AddGameObjectManager=GameObjectManagerMethods$1.addGameObjectManager,GameObjectManagerMethods={addGameObjectManager(e,t){(e=e?Clone$2(e):{}).name||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var i=e.defaultLayer,s=e.createGameObject,n=this.layerManager;e.createGameObject=function(e,...t){var a=s.call(this,e,...t);return i&&n&&n.addToLayer(i,a),a},AddGameObjectManager.call(this,e,t);for(var a=e.parseCallbacks,r=0,o=(a=a?[...a,...ParseCallbacks]:ParseCallbacks).length;r<o;r++)a[r](this,this.parser,e);return this}};var SetClickTarget=function(e){return this.waitEventManager.setClickTarget(e),this},SetCameraTarget=function(e){return this.waitEventManager.setCameraTarget(e),this},SetNextPageInput=function(e){var t=this;this.nextPageInput=e?"function"==typeof e?function(i,s){var n=t.waitEventManager;n.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,s);var a=n.getWaitCompleteTriggerCallback();e.call(t,a)}:function(i,s){WaitAny(t,e,i,s)}:null},AddImage=function(e,t){return this.imageManager.add(e,t),this};const PlayMethods={play(e){return this.isPlaying||(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",(function(){this.isPlaying=!1}),this),this.lastWrapResult=void 0,this.typingNextPage()),this},playPromise(e){var t=WaitComplete(this);return this.play(e),t}};var TypingNextPage=function(){return!this.isPlaying||this.isPageTyping||this.typeWriter.once(PageFadeOutCompleteEvent,_TypingNextPage,this).fadeOutPage(),this},_TypingNextPage=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(StopPlayEvent),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?TypingNextPage.call(this):this.nextPageInput&&this.nextPageInput(TypingNextPage,this))};this.once(StopPlayEvent,(function(){this.typeWriter.off("complete",t,this)}),this),this.typeWriter.once("complete",t,this).start(e.children)};const PauseMethods={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}},ResumeMethods={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}};var Wait=function(e){return this.typeWriter.wait(e),this};const TypingSpeedMethods={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}};var SetIgnoreWait=function(e){return this.typeWriter.setIgnoreWait(e),this},SetIgnoreNextPageInput=function(e){return void 0===e&&(e=!0),this.ignoreNextPageInput=e,this},ShowPage=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,s=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",(function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(s)}),this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const SpriteMethods={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},ContentMethods={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}};var Methods$e={setClickTarget:SetClickTarget,setCameraTarget:SetCameraTarget,setNextPageInput:SetNextPageInput,addImage:AddImage,typingNextPage:TypingNextPage,wait:Wait,setIgnoreWait:SetIgnoreWait,setIgnoreNextPageInput:SetIgnoreNextPageInput,showPage:ShowPage};Object.assign(Methods$e,GameObjectManagerMethods,PlayMethods,PauseMethods,ResumeMethods,TypingSpeedMethods,SpriteMethods,ContentMethods);var ClearEvents=function(e){for(var t=0,i=ClearEvents$1.length;t<i;t++)e.emit(ClearEvents$1[t])};const IsPlainObject$N=Phaser.Utils.Objects.IsPlainObject,GetValue$3f=Phaser.Utils.Objects.GetValue;class TextPlayer extends(Extend(DynamicText)){constructor(e,t,i,s,n,a){IsPlainObject$N(t)?a=t:IsPlainObject$N(s)&&(a=s),void 0===a&&(a={});var r=a.text;delete a.text,super(e,t,i,s,n,a),this.type="rexTextPlayer",this.initManagers(e,a),this.parser=new Parser(this,GetValue$3f(a,"parser",void 0)),this.typeWriter=new TypeWriter(this,GetValue$3f(a,"typing",void 0)),this._imageManager=void 0;var o=GetValue$3f(a,"images",void 0);o&&this.addImage(o);var l=GetValue$3f(a,"sprites");!1!==l&&null!==l&&AddSpriteManager.call(this,l),this.setIgnoreNextPageInput(GetValue$3f(a,"ignoreNextPageInput",!1)),this.setNextPageInput(GetValue$3f(a,"nextPageInput",null)),this.isPlaying=!1,r&&this.play(r)}get imageManager(){return void 0===this._imageManager&&(this._imageManager=new ImageManager(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(e){this.scene&&!this.ignoreDestroy&&(ClearEvents(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(e),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(e),this._imageManager=void 0,this.destroyManagers(e),super.destroy(e))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(e){this.typeWriter.setDefaultTypingSpeed(e)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(e){this.typeWriter.setTypingSpeed(e)}get typingSpeed(){return this.typeWriter.speed}set timeScale(e){this.setTimeScale(e)}get timeScale(){return this.getTimeScale()}}Object.assign(TextPlayer.prototype,Methods$e),ObjectFactory.register("textPlayer",(function(e,t,i,s,n){var a=new TextPlayer(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.TextPlayer",TextPlayer);const ElementProperties$1={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},StyleProperties$1={direction:["direction",void 0]};var CopyProperty=function(e,t,i){if("string"==typeof i)e.hasOwnProperty(i)&&(t[i]=e[i]);else{var s=i;if(Array.isArray(s))for(var n=0,a=s.length;n<a;n++)CopyProperty(e,t,s[n]);else for(var i in s)CopyProperty(e,t,i)}},CopyElementConfig=function(e){void 0===e&&(e={});var t={};return CopyProperty(e,t,"inputType"),CopyProperty(e,t,"type"),CopyProperty(e,t,"style"),CopyProperty(e,t,StyleProperties$1),CopyProperty(e,t,ElementProperties$1),t},IsPointerInHitArea=function(e,t,i,s,n){if(t)return!(i&&!i(e,t)||!HitTest(e,t)||s&&!s(e,t));void 0===n&&(n=!1);for(var a=e.scene.input.manager,r=a.pointersTotal,o=a.pointers,l=0;l<r;l++)if(t=o[l],(!i||i(e,t))&&HitTest(e,t)&&(!s||s(e,t)))return!n||t;return!1},HitTest=function(e,t){for(var i=e.scene,s=i.input.cameras.getCamerasBelowPointer(t),n=i.input.manager,a=[e],r=0,o=s.length;r<o;r++)if(n.hitTest(t,a,s[r],HitTestResult),HitTestResult.length>0)return HitTestResult.length=0,!0;return HitTestResult.length=0,!1},HitTestResult=[],LastOpenedEditor$1=void 0,SetLastOpenedEditor$1=function(e){e!==LastOpenedEditor$1&&(void 0!==LastOpenedEditor$1&&LastOpenedEditor$1.close(),LastOpenedEditor$1=e)},CloseLastOpenEditor$1=function(e){e===LastOpenedEditor$1&&(LastOpenedEditor$1=void 0)};const GetValue$3e=Phaser.Utils.Objects.GetValue;var SetProperties=function(e,t,i){var s,n;for(var a in void 0===i&&(i={}),e)s=e[a],void 0!==(n=GetValue$3e(t,a,s[1]))&&(i[s[0]]=n);return i},StopPropagationTouchEvents=function(e){e.addEventListener("touchstart",callback,!1),e.addEventListener("touchmove",callback,!1),e.addEventListener("touchend",callback,!1),e.addEventListener("mousedown",callback,!1),e.addEventListener("mouseup",callback,!1),e.addEventListener("mousemove",callback,!1)},callback=function(e){e.stopPropagation()},EnterClose=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},OnOpen=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",EnterClose,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(MoveMyDepthAbove.call(this.clickOutSideTarget,this.parent),MoveMyDepthBelow.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},RemoveElement=function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}},OnClose=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",EnterClose,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),RemoveElement(this.node),this.node=void 0,this.emit("close",this)};const GetValue$3d=Phaser.Utils.Objects.GetValue;var CreateElement=function(e,t){var i,s=GetValue$3d(t,"inputType",void 0);void 0===s&&(s=GetValue$3d(t,"type","text")),"textarea"===s?(i=document.createElement("textarea")).style.resize="none":(i=document.createElement("input")).type=s;var n=GetValue$3d(t,"style",void 0),a=i.style;SetProperties(StyleProperties$1,n,a),a.position="absolute",a.opacity=0,a.pointerEvents="none",a.zIndex=0,a.transform="scale(0)",SetProperties(ElementProperties$1,t,i),StopPropagationTouchEvents(i);var r=e.scene.sys.scale;return(r.isFullscreen?r.fullscreenTarget:document.body).appendChild(i),i.addEventListener("focus",(function(t){OnOpen.call(e)})),i.addEventListener("blur",(function(t){OnClose.call(e)})),i},Open$2=function(){return this.isOpened||this.readOnly||(SetLastOpenedEditor$1(this),this.node||(this.node=CreateElement(this,this.nodeConfig)),this.setFocus()),this},Close$1=function(){return this.isOpened?(CloseLastOpenEditor$1(this),this.setBlur(),this):this},Methods$d={open:Open$2,close:Close$1};const GetValue$3c=Phaser.Utils.Objects.GetValue;class HiddenTextEditBase extends ComponentBase{constructor(e,t){super(e);var i=GetValue$3c(t,"inputType",void 0);void 0===i&&(i=GetValue$3c(t,"type","text")),this.setEnterCloseEnable(GetValue$3c(t,"enterClose","textarea"!==i));var s=GetValue$3c(t,"onOpen",void 0);s||(s=GetValue$3c(t,"onFocus",void 0)),this.onOpenCallback=s,this.clickOutSideTarget=GetValue$3c(t,"clickOutSideTarget",void 0);var n=GetValue$3c(t,"onClose",void 0);n||(n=GetValue$3c(t,"onBlur",void 0)),this.onCloseCallback=n,this.onUpdateCallback=GetValue$3c(t,"onUpdate",void 0),this.isOpened=!1,e.on("pointerdown",(function(){this.open()}),this).setInteractive(),this.nodeConfig=CopyElementConfig(t),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(e){IsPointerInHitArea(this.parent,e)||this.close()}setEnterCloseEnable(e){return void 0===e&&(e=!0),this.enterCloseEnable=e,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(e){this.node&&(this.node.value=e)}setText(e){return this.text=e,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(e){this.nodeConfig.maxLength=e,this.node&&(this.node.maxLength=e)}setMaxLength(e){return this.maxLength=e,this}get minLength(){return this.nodeConfig.minLength}set minLength(e){this.nodeConfig.minLength=e,this.node&&(this.node.minLength=e)}setMinLength(e){return this.minLength=e,this}get placeholder(){return this.node.placeholder}set placeholder(e){this.node&&(this.node.placeholder=e)}setPlaceholder(e){return this.placeholder=e,this}selectText(e,t){return this.node?(void 0===e?this.node.select():this.node.setSelectionRange(e,t),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var e=this.node;return e.value.substring(e.selectionStart,e.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(e){this.node&&this.node.setSelectionRange(e,e)}setCursorPosition(e){return void 0===e?e=this.text.length:e<0&&(e=this.text.length+e),this.cursorPosition=e,this}get tooltip(){return this.node?this.node.title:""}set tooltip(e){if(!this.node)return this;this.node.title=e}setTooltip(e){return this.tooltip=e,this}setTextChangedCallback(e){return this.onTextChanged=e,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(e){this.nodeConfig.readOnly=e,this.node&&(this.node.readOnly=e)}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(e){this.node&&(this.node.spellcheck=e)}setSpellCheck(e){return this.spellCheck=e,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(e){this.node&&(this.node.style.color=e)}setFontColor(e){return this.fontColor=e,this}setStyle(e,t){return this.node?(this.node.style[e]=t,this):this}getStyle(e){if(this.node)return this.node.style[e]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(e){return this.node?(void 0===e&&(e=!0),this.node.disabled=!e,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(HiddenTextEditBase.prototype,Methods$d);var NumberInputUpdateCallback=function(e,t,i){e=e.replace(" ","");var s=i.previousText;if(e===s)return e;if(isNaN(e)){i.emit("nan",e,i),e=s;var n=i.cursorPosition-1;i.setText(e),i.setCursorPosition(n)}else i.previousText=e;return e},SelectRange=function(e){var t=e.parent,i=e.isOpened?e.selectionStart:null,s=e.isOpened?e.selectionEnd:null,n=e.prevSelectionStart,a=e.prevSelectionEnd;if(n!==i||a!==s){var r,o;null===n?(r=i,o=s):null===i?(r=n,o=a):(r=Math.min(n,i),o=Math.max(a,s));for(var l=r;l<o;l++){var h;if((h=null!==n&&l>=n&&l<a)!=(null!==i&&l>=i&&l<s)){var d=t.getCharChild(l);if(d){var c=h?"rangeout":"rangein";t.emit(c,d,l,t)}}}e.prevSelectionStart=i,e.prevSelectionEnd=s}},ScrollToBob=function(e){var t,i,s=e.parent,n=s.width,a=s.height,r=e.drawX,o=e.drawY,l=r+e.drawTLX,h=r+e.drawTRX,d=o+e.drawTLY,c=o+e.drawBLY;t=l<0?0-l:h>n?n-h:0,i=d<0?0-d:c>a?a-c:0,s._textOX+=t,s._textOY+=i},MoveCursor=function(e){var t=e.parent,i=t.text;null!==e.requestCursorPosition&&(e.setCursorPosition(e.requestCursorPosition),e.requestCursorPosition=null);var s,n=e.cursorPosition;e.prevCursorPosition!==n&&(null!==e.prevCursorPosition&&e.prevCursorPosition>i.length&&(e.prevCursorPosition=null),null!==e.prevCursorPosition&&(s=t.getCharChild(e.prevCursorPosition))&&("\n"===s.text&&s.clearTextSize(),t.emit("cursorout",s,e.prevCursorPosition,t)),null!=n&&(s=t.getCharChild(n))&&("\n"===s.text&&s.copyTextSize(t.lastInsertCursor),ScrollToBob(s),t.emit("cursorin",s,n,t)),t.emit("movecursor",n,e.prevCursorPosition,t),e.prevCursorPosition=n)},ClearSelectRange=function(e){var t=e.prevSelectionStart;if(null!==t){for(var i=e.prevSelectionEnd,s=e.parent,n=t;n<i;n++){var a=s.getCharChild(n);a&&s.emit("cursorout",a,n,s)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},ClearCursor=function(e){var t=e.prevCursorPosition;if(null!==t){var i=e.parent,s=i.getCharChild(t);s&&i.emit("cursorout",s,t,i),e.prevCursorPosition=null}};const GetValue$3b=Phaser.Utils.Objects.GetValue;let HiddenTextEdit$1=class extends HiddenTextEditBase{constructor(e,t){super(e,t),this.setSelectAllWhenFocusEnable(GetValue$3b(t,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,e.on("pointerdown",(function(t,i,s,n){var a=e.getNearestChild(i,s),r=e.getCharIndex(a);this.selectAllWhenFocus&&this.firstClickAfterOpen||this.setCursorPosition(r),this.cursorMoveStartIndex=r,this.firstClickAfterOpen=!1}),this).on("pointermove",(function(t,i,s,n){if(t.isDown){var a=e.getNearestChild(i,s),r=e.getCharIndex(a);this.cursorMoveStartIndex<r?this.selectText(this.cursorMoveStartIndex,r+1):this.selectText(r,this.cursorMoveStartIndex+1)}}),this),this.on("open",(function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,e.emit("open")}),this).on("close",(function(){e.emit("close")})).on("keydown-ENTER",(function(){e.emit("keydown-ENTER")}))}initText(){var e=this.parent;return this.prevCursorPosition=null,this.setText(e.text),this}updateText(){var e=this.parent,t=this.text;if(this.onUpdateCallback){var i=this.onUpdateCallback(t,e,this);null!=i&&(t=i)}return e.text!==t&&e.setText(t),this.isOpened?this.selectionStart!==this.selectionEnd?(ClearCursor(this),SelectRange(this)):(ClearSelectRange(this),MoveCursor(this)):(ClearSelectRange(this),ClearCursor(this)),this}setNumberInput(){return this.onUpdateCallback=NumberInputUpdateCallback,this}setSelectAllWhenFocusEnable(e){return void 0===e&&(e=!0),this.selectAllWhenFocus=e,this}setRequestCursorPosition(e){return this.isOpened?(this.requestCursorPosition=e,this):this}};const GetValue$3a=Phaser.Utils.Objects.GetValue,PropertiesList=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var CreateHiddenTextEdit=function(e,t){var i=GetValue$3a(t,"edit");return void 0===i&&(i={}),CopyProperty(t,i,PropertiesList),new HiddenTextEdit$1(e,i)},HasValue=function(e,t){if(e&&"number"!=typeof e){if(e.hasOwnProperty(t))return!0;if(-1!==t.indexOf(".")){for(var i=t.split("."),s=e,n=0;n<i.length;n++){if(!s.hasOwnProperty(i[n]))return!1;s=s[i[n]]}return!0}return!1}return!1},GetRootGameObject=function(e){if(e.parentContainer)return GetRootGameObject(e.parentContainer);var t=GetLayer(e);return t?GetRootGameObject(t):e},GetFirstRenderCamera=function(e){for(var t,i=GetRootGameObject(e).cameraFilter,s=e.scene.sys.cameras.cameras,n=0,a=s.length;n<a;n++)if(!((i&(t=s[n]).id)>0))return t;return null};class FullWindow extends ComponentBase{constructor(e,t){super(e),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var e=this.scene,t=this.parent,i=GetFirstRenderCamera(t);if(i){t.setScrollFactor(0).setOrigin(.5);var s=e.sys.scale.gameSize,n=s.width,a=s.height,r=1/i.zoom,o=n/2,l=a/2,h=n*r,d=a*r;t.x===o&&t.y===l||t.setPosition(o,l),t.width===h&&t.height===d||t.setSize(h,d)}}}const Zone$2=Phaser.GameObjects.Zone;let FullWindowRectangle$1=class extends Zone$2{constructor(e){super(e,0,0,2,2),this.fullWindow=new FullWindow(this)}};var InjectDefaultConfig=function(e,t){var i=!t.textArea;if(HasValue(t,"wrap.vAlign")||SetValue(t,"wrap.vAlign",s=i?"center":"top"),HasValue(t,"wrap.wrapMode")||SetValue(t,"wrap.wrapMode","char"),HasValue(t,"wrap.maxLines")||SetValue(t,"wrap.maxLines",s=i?1:void 0),i&&SetValue(t,"wrap.wrapWidth",1/0),HasValue(t,"wrap.useDefaultTextHeight")||SetValue(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!HasValue(t.edit,"inputType")){var s=i?"text":"textarea";SetValue(t.edit,"inputType",s)}if(!0===t.clickOutSideTarget){var n=new FullWindowRectangle$1(e);e.add.existing(n),t.clickOutSideTarget=n}return t},ExtractByPrefix=function(e,t,i,s){if(void 0===i&&(i="."),void 0===s&&(s={}),!e)return s;if(t in e)return Object.assign(s,e[t]);for(var n in t+=i,e)n.startsWith(t)&&(s[n.replace(t,"")]=e[n]);return s},RegisterArrowKeysEvent=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",(function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)}),this).on("close",(function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)}),this)},GetPartialData=function(e,t,i){if(void 0===i&&(i={}),Array.isArray(t))for(var s=0,n=t.length;s<n;s++)i[a=t[s]]=e[a];else for(var a in t)i[a]=e[a];return i},IsKeyValueEqual=function(e,t){for(var i in e){if(!(i in t))return!1;if(e[i]!==t[i])return!1}for(var i in t)if(!(i in e))return!1;return!0},RegisterCursorStyle=function(e){IsEmpty(e)||this.setCursorStyle(e).on("cursorin",(function(e){var t=this.cursorStyle,i=GetPartialData(e.style,t);IsKeyValueEqual(t,i)||(e.styleSave=i,e.modifyStyle(t))}),this).on("cursorout",(function(e){e.styleSave&&(e.modifyStyle(e.styleSave),e.styleSave=void 0)}),this)},RegisterRangeStyle=function(e){IsEmpty(e)||this.setRangeStyle(e).on("rangein",(function(e){var t=this.rangeStyle,i=GetPartialData(e.style,t);IsKeyValueEqual(t,i)||(e.styleSave=i,e.modifyStyle(t))}),this).on("rangeout",(function(e){e.styleSave&&(e.modifyStyle(e.styleSave),e.styleSave=void 0)}),this)},RegisterFocusStyle=function(e){IsEmpty(e)||this.setFocusStyle(e).on("open",(function(){var e=this.background,t=this.focusStyle,i=GetPartialData(e,t);IsKeyValueEqual(t,i)||(e.styleSave=i,e.modifyStyle(t))}),this).on("close",(function(){var e=this.background;e.styleSave&&(e.modifyStyle(e.styleSave),e.styleSave=void 0)}),this)},CreateInsertCursorChild=function(e){var t=e.createCharChild("|");return t.text="",t};function Diff(){}function buildValues(e,t,i,s,n){let a=0,r=t.length,o=0,l=0;for(;a<r;a++){let r=t[a];if(r.removed){if(r.value=e.join(s.slice(l,l+r.count)),l+=r.count,a&&t[a-1].added){let e=t[a-1];t[a-1]=t[a],t[a]=e}}else{if(!r.added&&n){let t=i.slice(o,o+r.count);t=t.map((function(e,t){let i=s[l+t];return i.length>e.length?i:e})),r.value=e.join(t)}else r.value=e.join(i.slice(o,o+r.count));o+=r.count,r.added||(l+=r.count)}}let h=t[r-1];return r>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(t[r-2].value+=h.value,t.pop()),t}function clonePath(e){return{newPos:e.newPos,components:e.components.slice(0)}}Diff.prototype={diff(e,t,i={}){let s=i.callback;"function"==typeof i&&(s=i,i={}),this.options=i;let n=this;function a(e){return s?(setTimeout((function(){s(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));let r=(t=this.removeEmpty(this.tokenize(t))).length,o=e.length,l=1,h=r+o;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));let d=[{newPos:-1,components:[]}],c=this.extractCommon(d[0],t,e,0);if(d[0].newPos+1>=r&&c+1>=o)return a([{value:this.join(t),count:t.length}]);function u(){for(let i=-1*l;i<=l;i+=2){let s,l=d[i-1],h=d[i+1],c=(h?h.newPos:0)-i;l&&(d[i-1]=void 0);let u=l&&l.newPos+1<r,p=h&&0<=c&&c<o;if(u||p){if(!u||p&&l.newPos<h.newPos?(s=clonePath(h),n.pushComponent(s.components,void 0,!0)):(s=l,s.newPos++,n.pushComponent(s.components,!0,void 0)),c=n.extractCommon(s,t,e,i),s.newPos+1>=r&&c+1>=o)return a(buildValues(n,s.components,t,e,n.useLongestToken));d[i]=s}else d[i]=void 0}l++}if(s)!function e(){setTimeout((function(){if(l>h)return s();u()||e()}),0)}();else for(;l<=h;){let e=u();if(e)return e}},pushComponent(e,t,i){let s=e[e.length-1];s&&s.added===t&&s.removed===i?e[e.length-1]={count:s.count+1,added:t,removed:i}:e.push({count:1,added:t,removed:i})},extractCommon(e,t,i,s){let n=t.length,a=i.length,r=e.newPos,o=r-s,l=0;for(;r+1<n&&o+1<a&&this.equals(t[r+1],i[o+1]);)r++,o++,l++;return l&&e.components.push({count:l}),e.newPos=r,o},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},castInput:e=>e,tokenize:e=>e.split(""),join:e=>e.join("")};const characterDiff=new Diff;function diffChars(e,t,i){return characterDiff.diff(e,t,i)}const extendedWordChars=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,reWhitespace=/\S/,wordDiff=new Diff;wordDiff.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!reWhitespace.test(e)&&!reWhitespace.test(t)},wordDiff.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let i=0;i<t.length-1;i++)!t[i+1]&&t[i+2]&&extendedWordChars.test(t[i])&&extendedWordChars.test(t[i+2])&&(t[i]+=t[i+2],t.splice(i+1,2),i--);return t};const lineDiff=new Diff;lineDiff.tokenize=function(e){let t=[],i=e.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(let s=0;s<i.length;s++){let e=i[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=e:(this.options.ignoreWhitespace&&(e=e.trim()),t.push(e))}return t};const sentenceDiff=new Diff;sentenceDiff.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};const cssDiff=new Diff;cssDiff.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const objectPrototypeToString=Object.prototype.toString,jsonDiff=new Diff;function canonicalize(e,t,i,s,n){let a,r;for(t=t||[],i=i||[],s&&(e=s(n,e)),a=0;a<t.length;a+=1)if(t[a]===e)return i[a];if("[object Array]"===objectPrototypeToString.call(e)){for(t.push(e),r=new Array(e.length),i.push(r),a=0;a<e.length;a+=1)r[a]=canonicalize(e[a],t,i,s,n);return t.pop(),i.pop(),r}if(e&&e.toJSON&&(e=e.toJSON()),"object"==typeof e&&null!==e){t.push(e),r={},i.push(r);let n,o=[];for(n in e)e.hasOwnProperty(n)&&o.push(n);for(o.sort(),a=0;a<o.length;a+=1)n=o[a],r[n]=canonicalize(e[n],t,i,s,n);t.pop(),i.pop()}else r=e;return r}jsonDiff.useLongestToken=!0,jsonDiff.tokenize=lineDiff.tokenize,jsonDiff.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:i=(e,i)=>void 0===i?t:i}=this.options;return"string"==typeof e?e:JSON.stringify(canonicalize(e,null,null,i),i,"  ")},jsonDiff.equals=function(e,t){return Diff.prototype.equals.call(jsonDiff,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};const arrayDiff=new Diff;arrayDiff.tokenize=function(e){return e.slice()},arrayDiff.join=arrayDiff.removeEmpty=function(e){return e};const RemoveItem$8=Phaser.Utils.Array.Remove;var SetText$1=function(e,t){var i=e.text;if(t!==i){if(null==i&&(i=""),RemoveItem$8(e.children,e.lastInsertCursor),""===t)e.removeChildren();else for(var s=diffChars(i,t),n=0,a=0,r=s.length;a<r;a++){var o=s[a];o.removed?e.removeText(n,o.count):o.added?(e.insertText(n,o.value),n+=o.count):n+=o.count}e.children.push(e.lastInsertCursor),e.runWrap(),e.isOpened&&e.textEdit.setText(t),e.emit("textchange",t,e)}};const SetTextOXYMethods={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return 0===e?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return 0===e?0:this._textOX/-e}},Clamp$e=Phaser.Math.Clamp;var GetIndex=function(e,t){var i={lineIndex:0,position:0};if(t<0)return i;for(var s=0,n=e.length;s<n;s++){var a=e[s];if(t<=a){i.lineIndex=s;break}t-=a}return i.position=t,i},GetPosition=function(e,t){var i=0,s=t.lineIndex;if(s<0)return i;for(var n=0,a=e.length;n<a;n++){var r=e[n];if(s>n)i+=r;else{if(s!==n)break;i+=Math.min(t.position,r)}}return i};const MoveCursorMethods={cursorMoveLeft(){if(!this.isOpened)return this;var e=Clamp$e(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=Clamp$e(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=GetIndex(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=Clamp$e(GetPosition(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=GetIndex(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=Clamp$e(GetPosition(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}},IsPlainObject$M=Phaser.Utils.Objects.IsPlainObject;class CanvasInput extends DynamicText{constructor(e,t,i,s,n,a){IsPlainObject$M(t)?a=t:IsPlainObject$M(s)&&(a=s),void 0===a&&(a={}),InjectDefaultConfig(e,a);var r=a.text;r&&delete a.text;var o=ExtractByPrefix(a.background,"focus"),l=ExtractByPrefix(a.style,"cursor"),h=ExtractByPrefix(a.style,"range");super(e,t,i,s,n,a),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=CreateHiddenTextEdit(this,a),RegisterArrowKeysEvent.call(this),a.focusStyle&&Object.assign(o,a.focusStyle),RegisterFocusStyle.call(this,o),a.cursorStyle&&Object.assign(l,a.cursorStyle),RegisterCursorStyle.call(this,l),a.rangeStyle&&Object.assign(h,a.rangeStyle),IsEmpty(h)&&Object.assign(h,l),RegisterRangeStyle.call(this,h);var d=a.onAddChar;d&&this.on("addchar",d);var c=a.onCursorIn;c&&this.on("cursorin",c);var u=a.onCursorOut;u&&this.on("cursorout",u);var p=!a.onRangeIn&&!a.onRangeOut,g=p?a.onCursorIn:a.onRangeIn;g&&this.on("rangein",g);var m=p?a.onCursorOut:a.onRangeOut;m&&this.on("rangeout",m);var f=a.onMoveCursor;f&&this.on("movecursor",f),this.setParseTextCallback(a.parseTextCallback),this.lastInsertCursor=CreateInsertCursorChild(this),r||(r=""),this.setText(r)}addChild(e,t){if(super.addChild(e,t),Array.isArray(e))for(var i=e,s=0,n=i.length;s<n;s++)e=i[s],IsChar(e)&&this.emit("addchar",e,t+s,this);else IsChar(e)&&this.emit("addchar",e,t,this);return this}get text(){return this._text}set text(e){e=null==e?"":e.toString(),this._text!==e&&(SetText$1(this,e),this._text=e)}setText(e){return this.text=e,this}appendText(e){return this.setText(this.text+e),this}runWrap(e){var t=super.runWrap(e);this.contentWidth=t.maxLineWidth,this.contentHeight=t.linesHeight,this.lineHeight=t.lineHeight,this.linesCount=t.lines.length,this.characterCountOfLines.length=0;for(var i=t.lines,s=0,n=i.length;s<n;s++){for(var a=i[s].children,r=0,o=0,l=a.length;o<l;o++){var h=a[o];h.active&&!h.removed&&IsChar(h)&&r++}this.characterCountOfLines.push(r)}return t}setSize(e,t){return this.width===e&&this.height===t||(super.setSize(e,t),this.runWrap()),this}get displayText(){return this.text}set displayText(e){this.text=e}setDisplayText(e){return this.displayText=e,this}get inputText(){return this.textEdit.text}set inputText(e){this.textEdit.text=e}setInputText(e){return this.inputText=e,this}setParseTextCallback(e){return e||(e=DefaultParseTextCallback),this.parseTextCallback=e,this}get value(){return this.parseTextCallback(this.text)}set value(e){this.setText(e)}getValue(){return this.value}setValue(e){return this.value=e,this}get readOnly(){return this.textEdit.readOnly}set readOnly(e){this.textEdit.readOnly=e}setReadOnly(e){return this.textEdit.setReadOnly(e),this}open(e){return e&&this.textEdit.once("close",e),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(e){return this.focusStyle=e,this}setCursorStyle(e){return this.cursorStyle=e,this}setRangeStyle(e){return this.rangeStyle=e,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(e){this.textEdit.maxLength=e}setMaxLength(e){return this.maxLength=e,this}get minLength(){return this.textEdit.minLength}set minLength(e){this.textEdit.minLength=e}setMinLength(e){return this.minLength=e,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(e){this.isOpened&&(this.textEdit.cursorPosition=e,this.textEdit.requestCursorPosition=e)}setCursorPosition(e){return this.cursorPosition=e,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var e=this.contentHeight-this.height;return e<0&&(e=0),e}get textVisibleWidth(){var e=this.contentWidth-this.width;return e<0&&(e=0),e}set t(e){this.setTextOYByPercentage(e).updateTexture()}get t(){return this.getTextOYPercentage()}set s(e){this.setTextOXByPercentage(e).updateTexture()}get s(){return this.getTextOXPercentage()}}var DefaultParseTextCallback=function(e){return e};Object.assign(CanvasInput.prototype,SetTextOXYMethods,MoveCursorMethods),ObjectFactory.register("canvasInput",(function(e,t,i,s,n){var a=new CanvasInput(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.CanvasInput",CanvasInput);var GetTickDelta=function(e){return GetGame(e).loop.delta};const GetValue$39=Phaser.Utils.Objects.GetValue,Wrap$3=Phaser.Math.Wrap;class HiddenTextEdit extends HiddenTextEditBase{constructor(e,t){void 0===t&&(t={}),"number"===t.onUpdate&&(t.onUpdate=NumberInputUpdateCallback),super(e,t),this.setCursor(GetValue$39(t,"cursor","|")),this.setCursorFlashDuration(GetValue$39(t,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var e=this.parent,t=this.text;if(this.onUpdateCallback){var i=this.onUpdateCallback(t,e,this);null!=i&&(t=i)}if(this.isOpened&&this.hasCursor){var s=this.cursorPosition;t=t.substring(0,s)+this.cursor+t.substring(s),this.prevCursorPosition!==s&&(this.prevCursorPosition=s)}return e.text!==t&&(e.setText(t),this.emit("textchange",t,e,this)),this}setCursor(e){return this._cursor=e,this.hasCursor=e&&""!==e,e}setCursorFlashDuration(e){return this.cursorFlashDuration=e,this}get cursor(){if(!this._isFocused)return this._cursor;var e;e=this.cursorFlashTimer<this.cursorFlashDuration/2?this._cursor:" ";var t=this.cursorFlashTimer+GetTickDelta(this.scene);return this.cursorFlashTimer=Wrap$3(t,0,this.cursorFlashDuration),e}}ObjectFactory.register("hiddenEdit",(function(e,t){return new HiddenTextEdit(e,t)})),SetValue(window,"RexPlugins.UI.HiddenEdit",HiddenTextEdit);const GetCalcMatrix=Phaser.GameObjects.GetCalcMatrix;var WebGLRenderer=function(e,t,i,s){t.updateData(),i.addToRenderList(t);var n=e.pipelines.set(t.pipeline),a=GetCalcMatrix(t,i,s),r=n.calcMatrix.copyFrom(a.calc),o=t._displayOriginX,l=t._displayOriginY,h=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var d,c=t.geom,u=0,p=c.length;u<p;u++)(d=c[u]).visible&&d.webglRender(n,r,h,o,l);e.pipelines.postBatch(t)};const SetTransform=Phaser.Renderer.Canvas.SetTransform;var CanvasRenderer=function(e,t,i,s){t.updateData(),i.addToRenderList(t);var n=e.currentContext;if(SetTransform(e,n,t,i,s)){for(var a,r=t._displayOriginX,o=t._displayOriginY,l=t.geom,h=0,d=l.length;h<d;h++)(a=l[h]).visible&&a.canvasRender(n,r,o);n.restore()}};const Render={renderWebGL:WebGLRenderer,renderCanvas:CanvasRenderer},Shape=Phaser.GameObjects.Shape,RemoveItem$7=Phaser.Utils.Array.Remove;class BaseShapes extends Shape{constructor(e,t,i,s,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=2),void 0===n&&(n=s),super(e,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(t,i),this.setSize(s,n),this.updateDisplayOrigin()}get width(){return this._width}set width(e){this.setSize(e,this._height)}get height(){return this._height}set height(e){this.setSize(this._width,e)}setDirty(e){return void 0===e&&(e=!0),this.dirty=e,this}setSize(e,t){this.isSizeChanged=this.isSizeChanged||this._width!==e||this._height!==t,this.dirty=this.dirty||this.isSizeChanged,this._width=e,this._height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this}resize(e,t){return this.setSize(e,t),this}get fillColor(){return this._fillColor}set fillColor(e){this.setFillStyle(e,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(e){this.setFillStyle(this._fillColor,e)}setFillStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.fillColor!==e||this.fillAlpha!==t,this._fillColor=e,this._fillAlpha=t,this}get lineWidth(){return this._lineWidth}set lineWidth(e){this.setStrokeStyle(e,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(e){this.setStrokeStyle(this._lineWidth,e,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(e){this.setStrokeStyle(this._lineWidth,this._strokeColor,e)}setStrokeStyle(e,t,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.lineWidth!==e||this.strokeColor!==t||this.strokeAlpha!==i,this._lineWidth=e,this._strokeColor=t,this._strokeAlpha=i,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var e=this.geom,t=0,i=e.length;t<i;t++){var s=e[t];s.dirty&&s.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Clear$1(this.shapes),this.dirty=!0,this}getShape(e){return this.shapes[e]}getShapes(){return this.geom}addShape(e){this.geom.push(e);var t=e.name;return t&&(this.shapes[t]=e),this.dirty=!0,this}deleteShape(e){var t=this.getShape(e);return t&&(delete this.shapes[e],RemoveItem$7(this.geom,t)),this}}Object.assign(BaseShapes.prototype,Render);const StyleMethods$2={setBoxFillStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==i,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=i,this},setUncheckedBoxStrokeStyle(e,t,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==i,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=i,this},setCheckerStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return void 0===e&&(e=!1),this.isCircleShape===e||(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0),this}},SizeMethods$1={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}};var FillStyle=function(e,t){return null==e?this.isFilled=!1:(void 0===t&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},LineStyle=function(e,t,i){return null==e||null==t?this.isStroked=!1:(void 0===i&&(i=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i),this};const StyleMethods$1={fillStyle:FillStyle,lineStyle:LineStyle};class BaseGeom{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(e){return this.name=e,this}setVisible(e){return void 0===e&&(e=!0),this.visible=e,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(e,t,i,s,n){}canvasRender(e,t,i){}updateData(){this.dirty=!1}}Object.assign(BaseGeom.prototype,StyleMethods$1,DataMethods$2);const Earcut=Phaser.Geom.Polygon.Earcut;class PathBase extends BaseGeom{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Earcut(this.pathData),super.updateData(),this}webglRender(e,t,i,s,n){this.isFilled&&FillPathWebGL(e,t,this,i,s,n),this.isStroked&&StrokePathWebGL(e,this,i,s,n)}canvasRender(e,t,i){var s=this.pathData,n=s.length-1,a=s[0]-t,r=s[1]-i;e.beginPath(),e.moveTo(a,r),this.closePath||(n-=2);for(var o=2;o<n;o+=2){var l=s[o]-t,h=s[o+1]-i;e.lineTo(l,h)}this.closePath&&e.closePath(),this.isFilled&&(FillStyleCanvas(e,this),e.fill()),this.isStroked&&(LineStyleCanvas(e,this),e.stroke())}}const DegToRad$e=Phaser.Math.DegToRad;class Arc extends PathBase{constructor(e,t,i,s,n,a,r,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=360),void 0===r&&(r=!1),void 0===o&&(o=!1),super(),this.setCenterPosition(e,t),this.setRadius(i,s),this.setAngle(n,a,r),this.setPie(o),this.setIterations(32)}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setCenterPosition(e,t){return void 0===t&&(t=e),this.x=e,this.y=t,this}get radiusX(){return this._radiusX}set radiusX(e){this.dirty=this.dirty||this._radiusX!==e,this._radiusX=e}get radiusY(){return this._radiusY}set radiusY(e){this.dirty=this.dirty||this._radiusY!==e,this._radiusY=e}setRadius(e,t){return void 0===t&&(t=e),this.radiusX=e,this.radiusY=t,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!==e,this._startAngle=e}get endAngle(){return this._endAngle}set endAngle(e){this.dirty=this.dirty||this._endAngle!==e,this._endAngle=e}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!==e,this._anticlockwise=e}setAngle(e,t,i){return void 0===i&&(i=!1),this.startAngle=e,this.endAngle=t,this.anticlockwise=i,this}get pie(){return this._pie}set pie(e){this.dirty=this.dirty||this._pie!==e,this._pie=e}setPie(e){return void 0===e&&(e=!0),this.pie=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),ArcTo$1(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(e,t,i){e.beginPath();var s=this.x-t,n=this.y-i,a=DegToRad$e(this.startAngle),r=DegToRad$e(this.endAngle);this.pie&&(e.moveTo(s,n),e.lineTo(s+Math.cos(a)*this.radiusX,n+Math.sin(a)*this.radiusY)),e.ellipse(s,n,this.radiusX,this.radiusY,0,a,r,this.anticlockwise),this.pie&&e.lineTo(s,n),this.isFilled&&(FillStyleCanvas(e,this),e.fill()),this.isStroked&&(LineStyleCanvas(e,this),e.stroke())}}class Circle extends Arc{constructor(e,t,i){super(e,t,i,i,0,360)}}class Curve extends PathBase{constructor(e){super(),this.setCurve(e),this.setIterations(32)}get curve(){return this._curve}set curve(e){this.dirty=this.dirty||this._curve!==e,this._curve=e}setCurve(e){return this.curve=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){this.pathData.length=0;for(var e=this.curve.getPoints(this.iterations),t=0,i=e.length;t<i;t++)this.pathData.push(e[t].x,e[t].y);return this.pathData.push(e[0].x,e[0].y),super.updateData(),this}}class Ellipse extends Arc{constructor(e,t,i,s){super(e,t,i,s,0,360)}}class Line extends PathBase{constructor(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),super(),this.setP0(e,t),this.setP1(i,s)}get x0(){return this._x0}set x0(e){this.dirty=this.dirty||this._x0!==e,this._x0=e}get y0(){return this._y0}set y0(e){this.dirty=this.dirty||this._y0!==e,this._y0=e}setP0(e,t){return this.x0=e,this.y0=t,this}get x1(){return this._x1}set x1(e){this.dirty=this.dirty||this._x1!==e,this._x1=e}get y1(){return this._y1}set y1(e){this.dirty=this.dirty||this._y1!==e,this._y1=e}setP1(e,t){return this.x1=e,this.y1=t,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var StartAt=function(e,t,i){return i.length=0,null!=e&&i.push(e,t),i};const QuadraticBezierInterpolation=Phaser.Math.Interpolation.QuadraticBezier;var QuadraticBezierTo=function(e,t,i,s,n,a){for(var r=a.length,o=a[r-2],l=a[r-1],h=1,d=n-1;h<=d;h++){var c=h/d;a.push(QuadraticBezierInterpolation(c,o,e,i),QuadraticBezierInterpolation(c,l,t,s))}return a};const CubicBezierInterpolation=Phaser.Math.Interpolation.CubicBezier;var CubicBezierCurveTo=function(e,t,i,s,n,a,r,o){for(var l=o.length,h=o[l-2],d=o[l-1],c=1,u=r-1;c<=u;c++){var p=c/u;o.push(CubicBezierInterpolation(p,h,e,i,n),CubicBezierInterpolation(p,d,t,s,a))}return o};const CatmullRomInterpolation=Phaser.Math.Interpolation.CatmullRom;var CatmullRomTo=function(e,t,i){for(var s=i.length,n=[i[s-2]],a=[i[s-1]],r=0,o=e.length;r<o;r+=2)n.push(e[r]),a.push(e[r+1]);r=1;for(var l=t-1;r<=l;r++){var h=r/l;i.push(CatmullRomInterpolation(n,h),CatmullRomInterpolation(a,h))}return i},DuplicateLast=function(e){var t=e.length;if(t<2)return e;var i=e[t-2],s=e[t-1];return e.push(i),e.push(s),e};const AddPathMethods={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,StartAt(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,i){return void 0===i&&(i=!1),i&&(e+=this.lastPointX,t+=this.lastPointY),LineTo(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,i,s,n,a,r){return void 0===r&&(r=!1),ArcTo$1(e,t,i,s,n,a,r,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,i,s,n,a){return this.ellipticalArc(e,t,i,i,s,n,a),this},quadraticBezierTo(e,t,i,s){return QuadraticBezierTo(e,t,i,s,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=s,this},cubicBezierTo(e,t,i,s,n,a){return CubicBezierCurveTo(e,t,i,s,n,a,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=a,this},catmullRomTo(...e){return CatmullRomTo(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return e===this.lastPointX&&t===this.lastPointY||this.lineTo(e,t),this.closePath=!0,this},end(){return DuplicateLast(this.pathData),this}},PointRotateAround=Phaser.Math.RotateAround;var RotateAround$5=function(e,t,i,s){for(var n={x:0,y:0},a=0,r=s.length-1;a<r;a+=2)n.x=s[a],n.y=s[a+1],PointRotateAround(n,e,t,i),s[a]=n.x,s[a+1]=n.y;return s},Scale$2=function(e,t,i,s,n){for(var a=0,r=n.length-1;a<r;a+=2){var o=n[a]-e,l=n[a+1]-t;o*=i,l*=s,n[a]=o+e,n[a+1]=l+t}return n},Offset=function(e,t,i){for(var s=0,n=i.length-1;s<n;s+=2)i[s]+=e,i[s+1]+=t;return i};const DegToRad$d=Phaser.Math.DegToRad;Phaser.Math.RotateAround;const TransformPointsMethods={rotateAround(e,t,i){if(0===this.pathData.length)return this;i=DegToRad$d(i),RotateAround$5(e,t,i,this.pathData);var s=this.pathData.length;return this.lastPointX=this.pathData[s-2],this.lastPointY=this.pathData[s-1],this},scale(e,t,i,s){return 0===this.pathData.length||(Scale$2(e,t,i,s,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1]),this},offset(e,t){return Offset(e,t,this.pathData),this}};var Copy=function(e,t,i,s){void 0===i&&(i=0),void 0===s&&(s=t.length),e.length=s-i;for(var n=0,a=e.length;n<a;n++)e[n]=t[n+i];return e};const SavePathDataMethods={savePathData(){return this.pathDataSaved||(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0),this},restorePathData(){return this.pathDataSaved?(Copy(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},DistanceBetween$7=Phaser.Math.Distance.Between,Wrap$2=Phaser.Math.Wrap,Linear$o=Phaser.Math.Linear;var AppendFromPathSegment=function(e,t,i,s,n){if(void 0===s&&(s=i,i=0),(i=WrapT(i))!==(s=WrapT(s))){var a=t[t.length-1],r=a*i,o=a*s;i<s?AddPathSegment(e,t,r,o,n):(AddPathSegment(e,t,r,a,n),AddPathSegment(e,t,0,o,n)),DuplicateLast(n)}},AddPathSegment=function(e,t,i,s,n){for(var a=i>0,r=0,o=t.length;r<o;r++){var l=2*r,h=t[r];if(a){if(h<i)continue;if(h==i)a=!1;else{var d=1-(h-i)/(h-t[r-1]);n.push(GetInterpolation(e,l-2,l,d)),n.push(GetInterpolation(e,l-1,l+1,d)),a=!1}}if(!(h<=s)){d=1-(h-s)/(h-t[r-1]),n.push(GetInterpolation(e,l-2,l,d)),n.push(GetInterpolation(e,l-1,l+1,d));break}if(n.push(e[l]),n.push(e[l+1]),h===s)break}},GetInterpolation=function(e,t,i,s){var n=e[t],a=e[i];return Linear$o(n,a,s)},WrapT=function(e){return 0===e?0:e%1==0?1:Wrap$2(e,0,1)};const PathSegmentMethods={updateAccumulationLengths(){if(null==this.accumulationLengths)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e,t,i,s,n=this.accumulationLengths,a=this.pathData,r=0,o=0,l=a.length;o<l;o+=2)i=a[o],s=a[o+1],r+=void 0===e?0:DistanceBetween$7(e,t,i,s),n.push(r),e=i,t=s;return this.totalPathLength=r,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,AppendFromPathSegment(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,i){return void 0===t?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),AppendFromPathSegment(e.pathData,e.accumulationLengths,t,i,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},GraphicsMethods={draw(e,t,i){var s=this.toPoints();return t&&e.fillPoints(s,this.closePath,this.closePath),i&&e.strokePoints(s,this.closePath,this.closePath),this}};var ToPoints=function(e,t){void 0===t&&(t=[]);for(var i=0,s=e.length-1;i<s;i+=2)t.push({x:e[i],y:e[i+1]});return t};const Polygon=Phaser.Geom.Polygon;var ToPolygon=function(e,t){return void 0===t&&(t=new Polygon),t.setTo(e),t};class PathDataBuilder{constructor(e){void 0===e&&(e=[]),this.pathData=e,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(e){return this.iterations=e,this}toPoints(){return ToPoints(this.pathData)}toPolygon(e){return ToPolygon(this.pathData,e)}}Object.assign(PathDataBuilder.prototype,AddPathMethods,TransformPointsMethods,SavePathDataMethods,PathSegmentMethods,GraphicsMethods);class Lines extends PathBase{constructor(){super(),this.builder=new PathDataBuilder(this.pathData)}get iterations(){return this.builder.iterations}set iterations(e){this.dirty=this.dirty||this.builder.iterations!==e,this.builder.setIterations(e)}setIterations(e){return this.iterations=e,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(e,t){return this.builder.startAt(e,t),this.dirty=!0,this}lineTo(e,t,i){return this.builder.lineTo(e,t,i),this.dirty=!0,this}verticalLineTo(e,t){return this.builder.verticalLineTo(e,t),this.dirty=!0,this}horizontalLineTo(e,t){return this.builder.horizontalLineTo(e,t),this.dirty=!0,this}ellipticalArc(e,t,i,s,n,a,r){return this.builder.ellipticalArc(e,t,i,s,n,a,r),this.dirty=!0,this}arc(e,t,i,s,n,a){return this.builder.arc(e,t,i,s,n,a),this.dirty=!0,this}quadraticBezierTo(e,t,i,s){return this.builder.quadraticBezierTo(e,t,i,s),this.dirty=!0,this}cubicBezierTo(e,t,i,s,n,a){return this.builder.cubicBezierTo(e,t,i,s,n,a),this.dirty=!0,this}catmullRomTo(...e){return this.builder.catmullRomTo(...e),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(e,t,i){return this.builder.rotateAround(e,t,i),this.dirty=!0,this}scale(e,t,i,s){return this.builder.scale(e,t,i,s),this.dirty=!0,this}offset(e,t){return this.builder.offset(e,t),this.dirty=!0,this}toPolygon(e){return this.builder.toPolygon(e)}appendPathFrom(e,t,i){return this.builder.appendFromPathSegment(e.builder,t,i),this}copyPathFrom(e,t,i){return this.builder.clear().appendFromPathSegment(e.builder,t,i),this}setDisplayPathSegment(e,t){return this.builder.setDisplayPathSegment(e,t),this}}const GetTint$1=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let Rectangle$2=class extends BaseGeom{constructor(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=i),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(e,t),this.setSize(i,s)}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setTopLeftPosition(e,t){return this.x=e,this.y=t,this}get width(){return this._width}set width(e){this.dirty=this.dirty||this._width!==e,this._width=e}get height(){return this._height}set height(e){this.dirty=this.dirty||this._height!==e,this._height=e}setSize(e,t){return this.width=e,this.height=t,this}get centerX(){return this.x+this.width/2}set centerX(e){this.x=e-this.width/2}get centerY(){return this.y+this.height/2}set centerY(e){this.y=e-this.height/2}setCenterPosition(e,t){return this.centerX=e,this.centerY=t,this}updateData(){this.pathData.length=0;var e=this.x,t=e+this.width,i=this.y,s=i+this.height;return this.pathData.push(e,i),this.pathData.push(t,i),this.pathData.push(t,s),this.pathData.push(e,s),this.pathData.push(e,i),super.updateData(),this}webglRender(e,t,i,s,n){if(this.isFilled){var a=e.fillTint,r=GetTint$1(this.fillColor,this.fillAlpha*i);a.TL=r,a.TR=r,a.BL=r,a.BR=r,e.batchFillRect(-s+this.x,-n+this.y,this.width,this.height)}this.isStroked&&StrokePathWebGL(e,this,i,s,n)}canvasRender(e,t,i){this.isFilled&&(FillStyleCanvas(e,this),e.fillRect(-t,-i,this.width,this.height)),this.isStroked&&(LineStyleCanvas(e,this),e.beginPath(),e.rect(-t,-i,this.width,this.height),e.stroke())}};const GetValue$38=Phaser.Utils.Objects.GetValue;class RoundRectangle extends PathBase{constructor(e,t,i,s,n,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=i),void 0===n&&(n=0),void 0===a&&(a=6),super(),this.setTopLeftPosition(e,t),this.setSize(i,s),this.setRadius(n),this.setIterations(a),this.closePath=!0}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setTopLeftPosition(e,t){return this.x=e,this.y=t,this}get width(){return this._width}set width(e){this.dirty=this.dirty||this._width!==e,this._width=e}get height(){return this._height}set height(e){this.dirty=this.dirty||this._height!==e,this._height=e}setSize(e,t){return this.width=e,this.height=t,this}get centerX(){return this.x+this.width/2}set centerX(e){this.x=e-this.width/2}get centerY(){return this.y+this.height/2}set centerY(e){this.y=e-this.height/2}setCenterPosition(e,t){return this.centerX=e,this.centerY=t,this}get radiusTL(){return this._radiusTL}set radiusTL(e){var t=e>0;this.dirty=this.dirty||this._radiusTL!==e||this._convexTL!==t,this._convexTL=t,this._radiusTL=Math.abs(e)}get radiusTR(){return this._radiusTR}set radiusTR(e){var t=e>0;this.dirty=this.dirty||this._radiusTR!==e||this._convexTR!==t,this._convexTR=t,this._radiusTR=Math.abs(e)}get radiusBL(){return this._radiusBL}set radiusBL(e){var t=e>0;this.dirty=this.dirty||this._radiusBL!==e||this._convexBL!==t,this._convexBL=t,this._radiusBL=Math.abs(e)}get radiusBR(){return this._radiusBR}set radiusBR(e){var t=e>0;this.dirty=this.dirty||this._radiusBR!==e||this._convexBR!==t,this._convexBR=t,this._radiusBR=Math.abs(e)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(e){"number"==typeof e?(this.radiusTL=e,this.radiusTR=e,this.radiusBL=e,this.radiusBR=e):(this.radiusTL=GetValue$38(e,"tl",0),this.radiusTR=GetValue$38(e,"tr",0),this.radiusBL=GetValue$38(e,"bl",0),this.radiusBR=GetValue$38(e,"br",0))}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){var e=this.pathData;e.length=0;var t,i=this.width,s=this.height,n=this.iterations+1;return(t=this.radiusTL)>0?this._convexTL?ArcTo$1(t,t,t,t,180,270,!1,n,e):ArcTo$1(0,0,t,t,90,0,!0,n,e):LineTo(0,0,e),(t=this.radiusTR)>0?this._convexTR?ArcTo$1(i-t,t,t,t,270,360,!1,n,e):ArcTo$1(i,0,t,t,180,90,!0,n,e):LineTo(i,0,e),(t=this.radiusBR)>0?this._convexBR?ArcTo$1(i-t,s-t,t,t,0,90,!1,n,e):ArcTo$1(i,s,t,t,270,180,!0,n,e):LineTo(i,s,e),(t=this.radiusBL)>0?this._convexBL?ArcTo$1(t,s-t,t,t,90,180,!1,n,e):ArcTo$1(0,s,t,t,360,270,!0,n,e):LineTo(0,s,e),e.push(e[0],e[1]),Offset(this.x,this.y,e),super.updateData(),this}}const GetTint=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let Triangle$1=class extends BaseGeom{constructor(e,t,i,s,n,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=0),super(),this.pathData=[],this.closePath=!0,this.setP0(e,t),this.setP1(i,s),this.setP2(n,a)}get x0(){return this._x0}set x0(e){this.dirty=this.dirty||this._x0!==e,this._x0=e}get y0(){return this._y0}set y0(e){this.dirty=this.dirty||this._y0!==e,this._y0=e}setP0(e,t){return this.x0=e,this.y0=t,this}get x1(){return this._x1}set x1(e){this.dirty=this.dirty||this._x1!==e,this._x1=e}get y1(){return this._y1}set y1(e){this.dirty=this.dirty||this._y1!==e,this._y1=e}setP1(e,t){return this.x1=e,this.y1=t,this}get x2(){return this._x2}set x2(e){this.dirty=this.dirty||this._x2!==e,this._x2=e}get y2(){return this._y2}set y2(e){this.dirty=this.dirty||this._y2!==e,this._y2=e}setP2(e,t){return this.dirty=this.dirty||this.x2!==e||this.y2!==t,this.x2=e,this.y2=t,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(e,t,i,s,n){if(this.isFilled){var a=GetTint(this.fillColor,this.fillAlpha*i),r=this.x0-s,o=this.y0-n,l=this.x1-s,h=this.y1-n,d=this.x2-s,c=this.y2-n,u=t.getX(r,o),p=t.getY(r,o),g=t.getX(l,h),m=t.getY(l,h),f=t.getX(d,c),v=t.getY(d,c);e.batchTri(u,p,g,m,f,v,a,a,a)}this.isStroked&&StrokePathWebGL(e,this,i,s,n)}canvasRender(e,t,i){var s=this.x1-t,n=this.y1-i,a=this.x2-t,r=this.y2-i,o=this.x3-t,l=this.y3-i;e.beginPath(),e.moveTo(s,n),e.lineTo(a,r),e.lineTo(o,l),e.closePath(),this.isFilled&&(FillStyleCanvas(e,this),e.fill()),this.isStroked&&(LineStyleCanvas(e,this),e.stroke())}};const ShapesUpdateMethods$4={buildShapes(){this.addShape((new RoundRectangle).setName("box")).addShape((new Lines).setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,i=Math.min(e,t),s=2*i,n=e-i,a=t-i,r=this.boxLineWidth,o=Math.max(s/10,2),l=this.getShape("box"),h=this.getShape("checker");if(this.isSizeChanged){var d=s*(1-this.boxSize)/2,c=r/2,u=s*this.boxSize-r;l.setTopLeftPosition(n+c+d,a+c+d).setSize(u,u),this.isCircleShape?l.setRadius(u/2):l.setRadius(0),d=s*(1-this.checkerSize)/2;var p=s*this.checkerSize/4,g=1*p,m=2*p,f=3*p;h.startAt(g,m).lineTo(m,f).lineTo(f,g).offset(n+d,a+d).end()}this.checked?(l.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(r,this.boxStrokeColor,this.boxStrokeAlpha),h.lineStyle(o,this.checkerColor)):(l.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(r,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),h.lineStyle()),this.checked&&h.setDisplayPathSegment(this.checkerAnimProgress)}},GetValue$37=Phaser.Utils.Objects.GetValue,Linear$n=Phaser.Math.Linear;class EaseValueTask extends EaseValueTaskBase{constructor(e,t){super(e,t),this.resetFromJSON(),this.boot()}start(e){if(this.timer.isRunning)return this;var t=this.target;this.propertyKey=GetValue$37(e,"key","value");var i=t[this.propertyKey];return this.fromValue=GetValue$37(e,"from",i),this.toValue=GetValue$37(e,"to",i),this.setEase(GetValue$37(e,"ease",this.ease)),this.setDuration(GetValue$37(e,"duration",this.duration)),this.setRepeat(GetValue$37(e,"repeat",0)),this.setDelay(GetValue$37(e,"delay",0)),this.setRepeatDelay(GetValue$37(e,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),t[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(e,t){var i=t.t;i=this.easeFn(i),e[this.propertyKey]=Linear$n(this.fromValue,this.toValue,i)}}const CheckerAnimationMethods={setCheckerAnimationDuration(e){return void 0===e&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return void 0===this.checkerAnimProgressTask&&(this.checkerAnimProgressTask=new EaseValueTask(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return void 0===this.checkerAnimProgressTask||this.checkerAnimProgressTask.stop(),this}};var methods$C={};Object.assign(methods$C,StyleMethods$2,SizeMethods$1,ShapesUpdateMethods$4,CheckerAnimationMethods);const DefaultBoxFillColor=23730,DefaultCheckerColor=16777215,GetValue$36=Phaser.Utils.Objects.GetValue,IsPlainObject$L=Phaser.Utils.Objects.IsPlainObject;class CheckboxShape extends BaseShapes{constructor(e,t,i,s,n,a,r){IsPlainObject$L(t)?(t=GetValue$36(r=t,"x",0),i=GetValue$36(r,"y",0),s=GetValue$36(r,"width",2),n=GetValue$36(r,"height",2),a=GetValue$36(r,"color",DefaultBoxFillColor)):IsPlainObject$L(a)&&(a=GetValue$36(r=a,"color",DefaultBoxFillColor)),super(e,t,i,s,n),this.type="rexCheckbox",void 0===a&&(a=DefaultBoxFillColor),this.setBoxShape(GetValue$36(r,"circleBox",!1)),this.setBoxFillStyle(a,GetValue$36(r,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(GetValue$36(r,"uncheckedColor",null),GetValue$36(r,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(GetValue$36(r,"boxLineWidth",4),GetValue$36(r,"boxStrokeColor",a),GetValue$36(r,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,GetValue$36(r,"uncheckedBoxStrokeColor",this.boxStrokeColor),GetValue$36(r,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(GetValue$36(r,"checkerColor",DefaultCheckerColor),GetValue$36(r,"checkerAlpha",1)),this.setBoxSize(GetValue$36(r,"boxSize",1)),this.setCheckerSize(GetValue$36(r,"checkerSize",1)),this.setCheckerAnimationDuration(GetValue$36(r,"animationDuration",150)),this.buildShapes();var o=GetValue$36(r,"checked");void 0===o&&(o=GetValue$36(r,"value",!1)),this.setValue(o)}get value(){return this._value}set value(e){e=!!e,this._value!==e&&(this.dirty=!0,this._value=e,e?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",e))}setValue(e){return this.value=e,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(e){this.value=e}setChecked(e){return void 0===e&&(e=!0),this.setValue(e),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(e){this._checkerAnimProgress!==e&&(this._checkerAnimProgress=e,this.dirty=!0)}}Object.assign(CheckboxShape.prototype,methods$C);const GetValue$35=Phaser.Utils.Objects.GetValue;class Button extends ComponentBase{constructor(e,t){super(e,t),this._enable=void 0,e.setInteractive(GetValue$35(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(GetValue$35(e,"enable",!0)),this.setMode(GetValue$35(e,"mode",1)),this.setClickInterval(GetValue$35(e,"clickInterval",100)),this.setDragThreshold(GetValue$35(e,"threshold",void 0)),this}boot(){var e=this.parent;e.on("pointerdown",this.onPress,this),e.on("pointerup",this.onRelease,this),e.on("pointerout",this.onPointOut,this),e.on("pointermove",this.onMove,this),e.on("pointerover",this.onOver,this),e.on("pointerout",this.onOut,this)}shutdown(e){this.isShutdown||(this.pointer=null,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e){e||this.cancel(),this._enable=e;var t=e?"enable":"disable";this.emit(t,this,this.parent)}}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(e){return"string"==typeof e&&(e=CLICKMODE$1[e]),this.mode=e,this}setClickInterval(e){return this.clickInterval=e,this}setDragThreshold(e){return this.dragThreshold=e,this}onPress(e,t,i,s){void 0===this.pointer&&(this.pointer=e,this.isDown=!0,this.emit("down",this,this.parent,e,s),0===this.mode&&this.click(e.downTime,e,s))}onRelease(e,t,i,s){this.pointer===e&&(this.isDown=!1,this.emit("up",this,this.parent,e,s),1===this.mode&&this.click(e.upTime,e,s),this.pointer=void 0)}onPointOut(e,t){this.pointer===e&&this.cancel()}onMove(e,t,i,s){this.pointer===e&&void 0!==this.dragThreshold&&1===this.mode&&e.getDistance()>=this.dragThreshold&&this.cancel()}onOver(e,t,i,s){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,e,s),this):this}onOut(e,t){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,e,t),this):this}click(e,t,i){if(!this.enable)return this;if(void 0===e)return this.emit("click",this,this.parent,t,i),this;this.pointer=void 0;var s=this.lastClickTime;return void 0!==s&&e-s<=this.clickInterval||(this.lastClickTime=e,this.emit("click",this,this.parent,t,i)),this}cancel(){return this.pointer=void 0,this}}const CLICKMODE$1={press:0,pointerdown:0,release:1,pointerup:1},GetValue$34=Phaser.Utils.Objects.GetValue,IsPlainObject$K=Phaser.Utils.Objects.IsPlainObject;class Checkbox extends CheckboxShape{constructor(e,t,i,s,n,a,r){IsPlainObject$K(t)?(t=GetValue$34(r=t,"x",0),i=GetValue$34(r,"y",0),s=GetValue$34(r,"width",2),n=GetValue$34(r,"height",2),a=GetValue$34(r,"color",DefaultBoxFillColor)):IsPlainObject$K(a)&&(a=GetValue$34(r=a,"color",DefaultBoxFillColor)),super(e,t,i,s,n,a,r),this._click=new Button(this,GetValue$34(r,"click")),this._click.on("click",(function(){this.toggleValue()}),this),this.setReadOnly(GetValue$34(r,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(e){this._click.enable=!e}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}}ObjectFactory.register("checkbox",(function(e,t,i,s,n,a){var r=new Checkbox(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.Checkbox",Checkbox);const StyleMethods={setTrackFillStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return void 0===t&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},SizeMethods={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return void 0===t&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},PositionMethods={setThumbPosition(e,t){return void 0===t&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}};var Linear$m=function(e,t,i){return(t-e)*i+e},MixColor=function(e,t,i){return(255&Linear$m(GetR(e),GetR(t),i))<<16|(255&Linear$m(GetG(e),GetG(t),i))<<8|255&Linear$m(GetB(e),GetB(t),i)};const Linear$l=Phaser.Math.Linear,ShapesUpdateMethods$3={buildShapes(){this.addShape((new RoundRectangle).setName("track")).addShape((new RoundRectangle).setName("thumb"))},updateShapes(){var e=this.width,t=this.height,i=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,s=this.getShape("track");if(this.isSizeChanged){var n=e*this.trackWidth,a=t*this.trackHeight,r=(e-n)/2,o=(t-a)/2,l=t*this.trackRadius;s.setTopLeftPosition(r,o).setSize(n,a).setRadius(l)}var h=MixColor(this.falseValueTrackColor,this.trackFillColor,i),d=Linear$l(this.falseValueTrackFillAlpha,this.trackFillAlpha,i);s.fillStyle(h,d);var c=this.getShape("thumb");if(this.isSizeChanged){var u=e*this.thumbWidth,p=t*this.thumbHeight,g=t*this.thumbRadius;c.setSize(u,p).setRadius(g)}var m=Linear$l(this.thumbLeftX,this.thumbRightX,i)*e;this.rtl&&(m=e-m);var f=t/2;c.setCenterPosition(m,f),c.fillStyle(this.thumbColor,this.thumbAlpha)}},ToggleAnimationMethods={setToggleAnimationDuration(e){return void 0===e&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return void 0===this.toggleAnimProgressTask&&(this.toggleAnimProgressTask=new EaseValueTask(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return void 0===this.toggleAnimProgressTask||this.toggleAnimProgressTask.stop(),this}};var methods$B={};Object.assign(methods$B,StyleMethods,SizeMethods,PositionMethods,ShapesUpdateMethods$3,ToggleAnimationMethods);var GrayScale=function(e){var t=.3*GetR(e)+.59*GetG(e)+.11*GetB(e);return(255&t)<<16|(255&t)<<8|255&t};const GetValue$33=Phaser.Utils.Objects.GetValue,IsPlainObject$J=Phaser.Utils.Objects.IsPlainObject,DefaultTrackFillColor=23730,DefaultThumbFillColor=16777215;class ToggleSwitchShape extends BaseShapes{constructor(e,t,i,s,n,a,r){IsPlainObject$J(t)?(t=GetValue$33(r=t,"x",0),i=GetValue$33(r,"y",0),s=GetValue$33(r,"width",2),n=GetValue$33(r,"height",2),a=GetValue$33(r,"color",DefaultTrackFillColor)):IsPlainObject$J(a)&&(a=GetValue$33(r=a,"color",DefaultTrackFillColor)),super(e,t,i,s,n),this.type="rexToggleSwitch",void 0===a&&(a=DefaultTrackFillColor),this.setTrackFillStyle(a,GetValue$33(r,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(GetValue$33(r,"falseValueTrackColor",GrayScale(a)),GetValue$33(r,"falseValueTrackFillAlpha",1)),this.setThumbStyle(GetValue$33(r,"thumbColor",DefaultThumbFillColor),GetValue$33(r,"thumbAlpha",1)),this.setTrackSize(GetValue$33(r,"trackWidth",.9),GetValue$33(r,"trackHeight",.5)),this.setTrackRadius(GetValue$33(r,"trackRadius",.5*this.trackHeight));var o=GetValue$33(r,"thumbHeight",void 0),l=GetValue$33(r,"thumbWidth",o);void 0===l&&(l=.9*this.trackHeight),this.setThumbSize(l,o),this.setThumbRadius(GetValue$33(r,"thumbRadius",.5*this.thumbHeight)),this.setThumbPosition(GetValue$33(r,"thumbLeft",.3),GetValue$33(r,"thumbRight",void 0)),this.setRTL(GetValue$33(r,"rtl",!1)),this.setToggleAnimationDuration(GetValue$33(r,"animationDuration",150)),this.buildShapes(),this.setValue(GetValue$33(r,"value",!1),0)}get value(){return this._value}set value(e){e=!!e,this._value!==e&&(this.dirty=!0,this._value=e,this.playToggleAnimation(),this.emit("valuechange",e))}setValue(e,t){void 0===t&&(t=this.toggleAnimDuration);var i=this.toggleAnimDuration;return this.toggleAnimDuration=t,this.value=e,this.toggleAnimDuration=i,this}toggleValue(e){return this.setValue(!this.value,e),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(e){this._toggleAnimProgress!==e&&(this._toggleAnimProgress=e,this.dirty=!0)}}Object.assign(ToggleSwitchShape.prototype,methods$B);const GetValue$32=Phaser.Utils.Objects.GetValue;class ToggleSwitch extends ToggleSwitchShape{constructor(e,t,i,s,n,a,r){super(e,t,i,s,n,a,r),this._click=new Button(this,GetValue$32(r,"click")),this._click.on("click",(function(){this.toggleValue()}),this),this.setReadOnly(GetValue$32(r,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(e){this._click.enable=!e}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}}ObjectFactory.register("toggleSwitch",(function(e,t,i,s,n,a){var r=new ToggleSwitch(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.ToggleSwitch",ToggleSwitch);const LoadImageMethods={loadFromURL(e,t){var i=this,s=new Image;return s.onload=function(){i.width!==s.width||i.height!==s.height?i.resize(s.width,s.height):i.clear(),i.context.drawImage(s,0,0),i.updateTexture(),t&&t(),s.onload=null,s.src="",s.remove()},s.src=e,this},loadFromURLPromise(e){var t=this;return new Promise((function(i,s){t.loadFromURL(e,i)}))},loadFromFile(e,t){var i=URL.createObjectURL(e);return this.loadFromURL(i,(function(){URL.revokeObjectURL(i),t&&t()})),this},loadFromFilePromise(e){var t=this;return new Promise((function(i,s){t.loadFromFile(e,i)}))}};class Canvas extends Canvas$1{}Object.assign(Canvas.prototype,LoadImageMethods),ObjectFactory.register("canvas",(function(e,t,i,s){var n=new Canvas(this.scene,e,t,i,s);return this.scene.add.existing(n),n})),SetValue(window,"RexPlugins.UI.Canvas",Canvas);const GetValue$31=Phaser.Utils.Objects.GetValue;class CircleMaskImage extends Canvas$1{constructor(e,t,i,s,n,a){super(e,t,i),this.type="rexCircleMaskImage",this.setTexture(s,n,a)}setTexture(e,t,i){"object"==typeof t&&(i=t,t=void 0),"string"==typeof i&&(i={maskType:i});var s=GetValue$31(i,"maskType",0),n=GetValue$31(i,"backgroundColor",void 0),a=GetValue$31(i,"strokeColor",void 0),r=GetValue$31(i,"strokeWidth",null!=a?10:0);if(void 0===s?s=0:"string"==typeof s&&(s=MASKTYPE[s]),this._textureKey=e,this._frameName=t,null===s)return this.loadTexture(e,t),this.dirty=!0,this;var o=this.scene.sys.textures.getFrame(e,t);if(!o)return this;o.cutWidth!==this.width||o.cutHeight!==this.height?this.setCanvasSize(o.cutWidth,o.cutHeight):this.clear();var l=this.canvas,h=this.context,d=l.width,c=l.height;null!=n&&(h.fillStyle=n,h.fillRect(0,0,d,c)),h.save(),h.beginPath();var u=r/2;switch(s){case 1:var p=(v=Math.floor(d/2))-u,g=(b=Math.floor(c/2))-u;h.ellipse(v,b,p,g,0,0,2*Math.PI);break;case 2:var m=GetValue$31(i,"radius",0),f=GetValue$31(i,"iteration",void 0);AddRoundRectanglePath(h,u,u,d-r,c-r,m,f);break;default:var v=Math.floor(d/2),b=Math.floor(c/2),y=Math.min(v,b)-u;h.arc(v,b,y,0,2*Math.PI)}return null!=a&&(h.strokeStyle=a,h.lineWidth=r,h.stroke()),h.clip(),this.loadTexture(e,t),h.restore(),this.dirty=!0,this}resize(e,t){return this.setDisplaySize(e,t),this}}const MASKTYPE={circle:0,ellipse:1,roundRectangle:2};ObjectFactory.register("circleMaskImage",(function(e,t,i,s,n){var a=new CircleMaskImage(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.CircleMaskImage",CircleMaskImage);const GetValue$30=Phaser.Utils.Objects.GetValue;class AlphaMaskImage extends Canvas$1{constructor(e,t,i,s,n,a){super(e,t,i),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(s,n,a)}setTexture(e,t,i){"object"==typeof t&&(i=t,t=void 0),"string"==typeof i&&(i={mask:{key:i}});var s=GetValue$30(i,"mask.key"),n=GetValue$30(i,"mask.frame"),a=GetValue$30(i,"mask.invertAlpha",!1),r=GetValue$30(i,"mask.scale"),o=GetValue$30(i,"backgroundColor");if(s){this._maskKey=s,this._maskFrame=n,this._maskScale=r;var l=s?this.scene.sys.textures.get(s):null;this.maskFrame=l?l.get(n):null}this._textureKey=e,this._frameName=t;var h=this.maskFrame;if(null===h)return this.loadTexture(e,t),this.dirty=!0,this;var d=null!=o;this.loadTexture(e,t);var c,u,p=this.canvas,g=this.context,m=p.width,f=p.height;g.save(),g.globalCompositeOperation=a?"destination-out":"destination-in",null!=this._maskScale?(c=h.cutWidth*this._maskScale,u=h.cutHeight*this._maskScale):(c=m,u=f);var v=(m-c)/2,b=(f-u)/2;return this.drawFrame(this._maskKey,this._maskFrame,v,b,c,u),g.restore(),d&&(g.save(),g.globalCompositeOperation="destination-over",g.fillStyle=o,g.fillRect(0,0,m,f),g.restore()),this.dirty=!0,this}resize(e,t){return this.setDisplaySize(e,t),this}}ObjectFactory.register("alphaMaskImage",(function(e,t,i,s,n){var a=new AlphaMaskImage(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.AlphaMaskImage",AlphaMaskImage);const Linear$k=Phaser.Math.Linear,Percent$5=Phaser.Math.Percent,ProgressValueMethods={setValue(e,t,i){return null==e||(void 0!==t&&(e=Percent$5(e,t,i)),this.value=e),this},addValue(e,t,i){return void 0!==t&&(e=Percent$5(e,t,i)),this.value+=e,this},getValue(e,t){var i=this.value;return void 0!==e&&void 0!==t&&(i=Linear$k(e,t,i)),i}},Percent$4=Phaser.Math.Percent,EaseValueMethods$1={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,i){return null==e||(void 0!==t&&(e=Percent$4(e,t,i)),void 0===this.easeValueTask&&(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction})),this},easeValueRepeat(e,t,i,s){return void 0===i&&(i=-1),void 0===s&&(s=0),void 0===this.easeValueTask&&(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:i,repeatDelay:s}),this}},GetValue$2$=Phaser.Utils.Objects.GetValue,Clamp$d=Phaser.Math.Clamp;function ProgressBase(e){class t extends e{bootProgressBase(e){this.eventEmitter=GetValue$2$(e,"eventEmitter",this);var t=GetValue$2$(e,"valuechangeCallback",null);if(null!==t){var i=GetValue$2$(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",t,i)}return this.setEaseValuePropName("value").setEaseValueDuration(GetValue$2$(e,"easeValue.duration",0)).setEaseValueFunction(GetValue$2$(e,"easeValue.ease","Linear")),this}get value(){return this._value}set value(e){e=Clamp$d(e,0,1);var t=this._value,i=t!=e;this.dirty=this.dirty||i,this._value=e,i&&this.eventEmitter.emit("valuechange",this._value,t,this.eventEmitter)}}return Object.assign(t.prototype,ProgressValueMethods,EaseValueMethods$1),t}const RadToDeg$c=Phaser.Math.RadToDeg,DegToRad$c=Phaser.Math.DegToRad;var FillArc=function(e,t,i,s,n,a,r,o){var l=360===Math.abs(r-a),h=DegToRad$c(a),d=DegToRad$c(r),c=Math.cos(h),u=Math.sin(h),p=Math.cos(d),g=Math.sin(d);return e.startAt(t+c*s,i+u*s),e.arc(t,i,s,a,r,o),l&&0===n||(e.lineTo(t+p*n,i+g*n),n>0&&e.arc(t,i,n,r,a,!0)),e.close(),e};const ShapesUpdateMethods$2={buildShapes(){var e=this.iterations;this.addShape((new Lines).setIterations(e).setName("track")).addShape((new Lines).setIterations(e).setName("bar")).addShape((new Circle).setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,i=this.radius,s=i-t,n=this.getShape("track");null!=this.trackColor&&this.thickness>0?(n.fillStyle(this.trackColor),FillArc(n,e,e,i,s,0,360,!1)):n.reset();var a,r,o,l=this.getShape("bar");null!=this.barColor&&this.thickness>0?(1===this.value?(a=!1,r=0,o=360):(a=this.anticlockwise,r=RadToDeg$c(this.startAngle),o=360*(a?1-this.value:this.value)+r),l.fillStyle(this.barColor),FillArc(l,e,e,i+1,s-1,r,o,!1)):l.reset();var h=this.getShape("center");this.centerColor&&s>0?h.setCenterPosition(e,e).setRadius(s).fillStyle(this.centerColor):h.reset()}},GetValue$2_=Phaser.Utils.Objects.GetValue,IsPlainObject$I=Phaser.Utils.Objects.IsPlainObject,Clamp$c=Phaser.Math.Clamp,DefaultStartAngle$1=Phaser.Math.DegToRad(270);let CircularProgress$1=class extends(ProgressBase(BaseShapes)){constructor(e,t,i,s,n,a,r){IsPlainObject$I(t)&&(t=GetValue$2_(r=t,"x",0),i=GetValue$2_(r,"y",0),s=GetValue$2_(r,"radius",1),n=GetValue$2_(r,"barColor",void 0),a=GetValue$2_(r,"value",0)),void 0===s&&(s=1);var o=2*s;super(e,t,i,o,o),this.type="rexCircularProgress",this.bootProgressBase(r),this.setRadius(s),this.setTrackColor(GetValue$2_(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(GetValue$2_(r,"centerColor",void 0)),this.setThickness(GetValue$2_(r,"thickness",.2)),this.setStartAngle(GetValue$2_(r,"startAngle",DefaultStartAngle$1)),this.setAnticlockwise(GetValue$2_(r,"anticlockwise",!1)),this.iterations=GetValue$2_(r,"iterations",128),this.buildShapes(),this.setValue(a)}resize(e,t){return(e=Math.floor(Math.min(e,t)))===this.width||(super.resize(e,e),this.setRadius(e/2)),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e;var t=2*e;this.resize(t,t)}setRadius(e){return this.radius=e,this}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!=e,this._startAngle=e}setStartAngle(e){return this.startAngle=e,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!=e,this._anticlockwise=e}setAnticlockwise(e){return void 0===e&&(e=!0),this.anticlockwise=e,this}get thickness(){return this._thickness}set thickness(e){e=Clamp$c(e,0,1),this.dirty=this.dirty||this._thickness!=e,this._thickness=e}setThickness(e){return this.thickness=e,this}get centerColor(){return this._centerColor}set centerColor(e){this.dirty=this.dirty||this._centerColor!=e,this._centerColor=e}setCenterColor(e){return this.centerColor=e,this}};Object.assign(CircularProgress$1.prototype,ShapesUpdateMethods$2),ObjectFactory.register("circularProgress",(function(e,t,i,s,n,a){var r=new CircularProgress$1(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.CircularProgress",CircularProgress$1);var DrawCircle=function(e,t,i,s,n,a,r,o,l,h,d,c){void 0===h&&(h=0),void 0===d&&(d=2*Math.PI),void 0===c&&(c=!1),t.beginPath(),t.ellipse(i,s,n,a,0,h,d,c),null!=r&&(t.fillStyle=r,t.fill()),null!=o&&(t.strokeStyle=o,t.lineWidth=l,t.stroke())};const ColorNames=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],ColorValues=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var ColorNameToIntegerDict={},name$1,i=0,cnt=ColorNames.length;i<cnt;i++)name$1=ColorNames[i].toLowerCase(),ColorNameToIntegerDict[name$1]=ColorValues[i];var ColorNameToInteger=function(e){return e=e.toLowerCase(),ColorNameToIntegerDict.hasOwnProperty(e)?ColorNameToIntegerDict[e]:null},ColorStringToInteger=function(e){return"string"!=typeof e?e:e=e.startsWith("#")?parseInt(e.substring(1),16):e.startsWith("0x")?parseInt(e.substring(2),16):ColorNameToInteger(e)};const DegToRad$b=Phaser.Math.DegToRad,Linear$j=Phaser.Math.Linear;var DrawGradientArc=function(e,t,i,s,n,a,r,o,l,h,d,c,u){void 0===h&&(h=0),void 0===d&&(d=2*Math.PI),void 0===c&&(c=!1),void 0===u&&(u=2),r=ColorStringToInteger(r),o=ColorStringToInteger(o),StartRGB=GetRGB(r,StartRGB),EndRGB=GetRGB(o,EndRGB);var p,g=DegToRad$b(u);(p=c?h-d:d-h)<0&&(p+=2*Math.PI);var m=Math.ceil(p/g),f=p/m;c&&(f=-f);for(var v=0;v<m;v++){var b=v/m,y=Math.round(Linear$j(StartRGB.r,EndRGB.r,b)),C=Math.round(Linear$j(StartRGB.g,EndRGB.g,b)),x=Math.round(Linear$j(StartRGB.b,EndRGB.b,b)),S=h+v*f,w=S+f;v<m-1&&(w+=f/2),t.beginPath(),t.ellipse(i,s,n,a,0,S,w,c),t.strokeStyle=`rgb(${y},${C},${x})`,t.lineWidth=l,t.stroke()}},StartRGB,EndRGB,DrawText=function(e,t,i,s,n,a,r,o,l,h,d){void 0===l&&null!=o&&(l=2),t.font=a,t.textAlign=h,t.textBaseline=d,t.fillStyle=r,t.strokeStyle=o,t.lineWidth=l,t.lineCap="round",t.lineJoin="round",null!=o&&"none"!==o&&l>0&&t.strokeText(n,i,s),null!=r&&"none"!==r&&t.fillText(n,i,s)};const PI2$1=Phaser.Math.PI2;var DrawContent$1=function(){var e,t,i=this.radius,s=this.thickness*this.radius,n=this.radius-s/2,a=this.radius-s,r=this.canvas,o=this.context,l=this.anticlockwise,h=this.startAngle,d=this.endAngle,c=this._deltaAngle;this.trackColor&&s>0&&(o.save(),DrawCircle(r,o,i,i,n,n,void 0,this.trackColor,s,h,d,l),o.restore()),this.barColor&&n>0&&(e=this.value>=1?d:l?(h-c*this.value+PI2$1)%PI2$1:(h+c*this.value)%PI2$1,o.save(),this.barColor2?DrawGradientArc(r,o,i,i,n,n,this.barColor2,this.barColor,s,h,e,l):DrawCircle(r,o,i,i,n,n,void 0,this.barColor,s,h,e,l),o.restore()),this.centerColor&&a>0&&(this.centerColor2?((t=this.context.createRadialGradient(i,i,0,i,i,a)).addColorStop(0,this.centerColor),t.addColorStop(1,this.centerColor2)):t=this.centerColor,o.save(),DrawCircle(r,o,i,i,a,a,t),o.restore()),this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(o.save(),DrawText(r,o,i,i,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),o.restore())};const GetValue$2Z=Phaser.Utils.Objects.GetValue,IsPlainObject$H=Phaser.Utils.Objects.IsPlainObject,Clamp$b=Phaser.Math.Clamp,DefaultStartAngle=Phaser.Math.DegToRad(270),PI2=Phaser.Math.PI2;class CircularProgress extends(ProgressBase(Canvas$1)){constructor(e,t,i,s,n,a,r){IsPlainObject$H(t)&&(t=GetValue$2Z(r=t,"x",0),i=GetValue$2Z(r,"y",0),s=GetValue$2Z(r,"radius",1),n=GetValue$2Z(r,"barColor",void 0),a=GetValue$2Z(r,"value",0));var o=2*s;super(e,t,i,o,o,GetValue$2Z(r,"resolution",1)),this.type="rexCircularProgressCanvas",this.bootProgressBase(r),this.setRadius(s),this.setTrackColor(GetValue$2Z(r,"trackColor",void 0)),this.setBarColor(n),this.setBarColor2(GetValue$2Z(r,"barColor2",void 0)),this.setCenterColor(GetValue$2Z(r,"centerColor",void 0)),this.setThickness(GetValue$2Z(r,"thickness",.2)),this.setAnticlockwise(GetValue$2Z(r,"anticlockwise",!1)),this.setStartAngle(GetValue$2Z(r,"startAngle",DefaultStartAngle));var l=GetValue$2Z(r,"endAngle");void 0===l&&(l=this.anticlockwise?this.startAngle-PI2:this.startAngle+PI2),this.setEndAngle(GetValue$2Z(r,"endAngle",l)),this.setTextColor(GetValue$2Z(r,"textColor",void 0)),this.setTextStrokeColor(GetValue$2Z(r,"textStrokeColor",void 0),GetValue$2Z(r,"textStrokeThickness",void 0));var h=GetValue$2Z(r,"textFont",void 0);h?this.setTextFont(h):this.setTextFont(GetValue$2Z(r,"textSize","16px"),GetValue$2Z(r,"textFamily","Courier"),GetValue$2Z(r,"textStyle","")),this.setTextFormatCallback(GetValue$2Z(r,"textFormatCallback",void 0),GetValue$2Z(r,"textFormatCallbackScope",void 0)),this.setValue(a)}resize(e,t){return(e=Math.floor(Math.min(e,t)))===this.width||(super.resize(e,e),this.setRadius(e/2)),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e;var t=2*e;this.resize(t,t)}setRadius(e){return this.radius=e,this}get trackColor(){return this._trackColor}set trackColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get barColor(){return this._barColor}set barColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get barColor2(){return this._barColor2}set barColor2(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=e,this._barColor2=e}setBarColor2(e){return this.barColor2=e,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!=e,this._startAngle=e,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(e){return this.startAngle=e,this}get endAngle(){return this._endAngle}set endAngle(e){this.dirty=this.dirty||this._endAngle!=e,this._endAngle=e,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(e){return this.endAngle=e,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!=e,this._anticlockwise=e,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(e){return void 0===e&&(e=!0),this.anticlockwise=e,this}get thickness(){return this._thickness}set thickness(e){e=Clamp$b(e,0,1),this.dirty=this.dirty||this._thickness!=e,this._thickness=e}setThickness(e){return this.thickness=e,this}get centerColor(){return this._centerColor}set centerColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=e,this._centerColor=e}get centerColor2(){return this._centerColor2}set centerColor2(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=e,this._centerColor2=e}setCenterColor(e,t){return this.centerColor=e,this.centerColor2=t,this}get textColor(){return this._textColor}set textColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=e,this._textColor=e}setTextColor(e){return this.textColor=e,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=e,this._textStrokeColor=e}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(e){this.dirty=this.dirty||this._textStrokeThickness!=e,this._textStrokeThickness=e}setTextStrokeColor(e,t){return void 0===t&&(t=2),this.textStrokeColor=e,this.textStrokeThickness=t,this}get textFont(){return this._textFont}set textFont(e){this.dirty=this.dirty||this._textFont!=e,this._textFont=e}setTextFont(e,t,i){var s;return s=void 0===t?e:i+" "+e+" "+t,this.textFont=s,this}setTextFormatCallback(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this}updateTexture(){return super.updateTexture((function(){this.clear(),DrawContent$1.call(this)}),this),this}getFormatText(e){return void 0===e&&(e=this.value),this.textFormatCallbackScope?this.textFormatCallback(e):this.textFormatCallback.call(this.textFormatCallbackScope,e)}}var GetDeltaAngle=function(e,t,i){return i?e<=t?PI2+e-t:e-t:e>=t?PI2+t-e:t-e};ObjectFactory.register("circularProgressCanvas",(function(e,t,i,s,n,a){var r=new CircularProgress(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.CircularProgressCanvas",CircularProgress);var UpdateShapes$1=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,s=this.getShape("trackFill");s.fillStyle(this.trackColor),s.isFilled&&BuildRectangle(s,0,0,t,i,e);var n,a,r=this.getShape("bar");r.fillStyle(this.barColor),r.isFilled&&(this.rtl?(n=t*(1-this.value),a=t):(n=0,a=t*this.value),BuildRectangle(r,n,0,a,i,e));var o=this.getShape("trackStroke");o.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),o.isStroked&&BuildRectangle(o,0,0,t,i,e)},BuildRectangle=function(e,t,i,s,n,a){var r=(t+s)/2;return a>=0?e.startAt(r+a,i).lineTo(s+a,i).lineTo(s,n).lineTo(t,n).lineTo(t+a,i).lineTo(r+a,i):e.startAt(r,i).lineTo(s,i).lineTo(s-a,n).lineTo(t-a,n).lineTo(t,i).lineTo(r,i),e.close(),e};const GetValue$2Y=Phaser.Utils.Objects.GetValue,IsPlainObject$G=Phaser.Utils.Objects.IsPlainObject;let LineProgress$1=class extends(ProgressBase(BaseShapes)){constructor(e,t,i,s,n,a,r,o){IsPlainObject$G(t)?(t=(o=t).x,i=o.y,s=o.width,n=o.height,a=o.barColor,r=o.value):IsPlainObject$G(s)?(s=(o=s).width,n=o.height,a=o.barColor,r=o.value):IsPlainObject$G(a)&&(a=(o=a).barColor,r=o.value),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=2),void 0===n&&(n=s),void 0===r&&(r=0),super(e,t,i,s,n,o),this.type="rexLineProgress",this.bootProgressBase(o),this.addShape((new Lines).setName("trackFill")).addShape((new Lines).setName("bar")).addShape((new Lines).setName("trackStroke")),this.setTrackColor(GetValue$2Y(o,"trackColor",void 0)),this.setBarColor(a),this.setTrackStroke(GetValue$2Y(o,"trackStrokeThickness",2),GetValue$2Y(o,"trackStrokeColor",void 0)),this.setSkewX(GetValue$2Y(o,"skewX",0)),this.setRTL(GetValue$2Y(o,"rtl",!1)),this.setValue(r)}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,t){return this.trackStrokeThickness=e,this.trackStrokeColor=t,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get skewX(){return this._skewX}set skewX(e){this.dirty=this.dirty||this._skewX!=e,this._skewX=e}setSkewX(e){return this.skewX=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}};var Methods$c={updateShapes:UpdateShapes$1};Object.assign(LineProgress$1.prototype,Methods$c),ObjectFactory.register("lineProgress",(function(e,t,i,s,n,a,r){var o=new LineProgress$1(this.scene,e,t,i,s,n,a,r);return this.scene.add.existing(o),o})),SetValue(window,"RexPlugins.UI.LineProgress",LineProgress$1);var BuildRoundRectangle=function(e,t,i,s,n){e.setIterations(n).start();var a=s.tl;if(IsArcCorner$1(a))if(a.convex){var r=a.x,o=a.y;e.ellipticalArc(r,o,a.x,a.y,180,270,!1)}else r=0,o=0,e.ellipticalArc(r,o,a.x,a.y,90,0,!0);else e.lineTo(0,0);return a=s.tr,IsArcCorner$1(a)?a.convex?(r=t-a.x,o=a.y,e.ellipticalArc(r,o,a.x,a.y,270,360,!1)):(r=t,o=0,e.ellipticalArc(r,o,a.x,a.y,180,90,!0)):e.lineTo(t,0),a=s.br,IsArcCorner$1(a)?a.convex?(r=t-a.x,o=i-a.y,e.ellipticalArc(r,o,a.x,a.y,0,90,!1)):(r=t,o=i,e.ellipticalArc(r,o,a.x,a.y,270,180,!0)):e.lineTo(t,i),a=s.bl,IsArcCorner$1(a)?a.convex?(r=a.x,o=i-a.y,e.ellipticalArc(r,o,a.x,a.y,90,180,!1)):(r=0,o=i,e.ellipticalArc(r,o,a.x,a.y,360,270,!0)):e.lineTo(0,i),e.close(),e},RadToDeg$b=Phaser.Math.RadToDeg,BuildRoundRectangleBarDirection0=function(e,t,i,s,n){var a=t*n,r=s.tl;if(IsArcCorner$1(r)){h=a>r.x?90:RadToDeg$b(Math.acos((r.x-a)/r.x));var o=r.x,l=r.y;e.ellipticalArc(o,l,r.x,r.y,180,180+h,!1)}else e.lineTo(0,0);if(r=s.tr,IsArcCorner$1(r)&&a>t-r.x){var h=90-RadToDeg$b(Math.acos((a-(t-r.x))/r.x));o=t-r.x,l=r.y,e.ellipticalArc(o,l,r.x,r.y,270,270+h,!1)}else e.lineTo(a,0);r=s.br,IsArcCorner$1(r)&&a>t-r.x?(h=90-RadToDeg$b(Math.acos((a-(t-r.x))/r.x)),o=t-r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,90-h,90,!1)):e.lineTo(a,i),r=s.bl,IsArcCorner$1(r)?(h=a>r.x?90:RadToDeg$b(Math.acos((r.x-a)/r.x)),o=r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,180-h,180,!1)):e.lineTo(0,i)},RadToDeg$a=Phaser.Math.RadToDeg,BuildRoundRectangleBarDirection1=function(e,t,i,s,n){var a=i*n,r=s.tl;if(IsArcCorner$1(r)){h=a>r.y?90:RadToDeg$a(Math.acos((r.y-a)/r.y));var o=r.x,l=r.y;e.ellipticalArc(o,l,r.x,r.y,270-h,270,!1)}else e.lineTo(0,0);if(r=s.tr,IsArcCorner$1(r)?(h=a>r.y?90:RadToDeg$a(Math.acos((r.y-a)/r.y)),o=t-r.x,l=r.y,e.ellipticalArc(o,l,r.x,r.y,270,270+h,!1)):e.lineTo(t,0),r=s.br,IsArcCorner$1(r)&&a>i-r.y){var h=90-RadToDeg$a(Math.acos((a-(i-r.y))/r.y));o=t-r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,0,0+h,!1)}else e.lineTo(t,a);r=s.bl,IsArcCorner$1(r)&&a>i-r.y?(h=90-RadToDeg$a(Math.acos((a-(i-r.y))/r.y)),o=r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,180-h,180,!1)):e.lineTo(0,a)},RadToDeg$9=Phaser.Math.RadToDeg,BuildRoundRectangleBarDirection2=function(e,t,i,s,n){var a=t*n,r=s.tr;if(IsArcCorner$1(r)){h=a>r.x?90:RadToDeg$9(Math.acos((r.x-a)/r.x));var o=t-r.x,l=r.y;e.ellipticalArc(o,l,r.x,r.y,360-h,360,!1)}else e.lineTo(t,0);if(r=s.br,IsArcCorner$1(r)?(h=a>r.x?90:RadToDeg$9(Math.acos((r.x-a)/r.x)),o=t-r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,0,0+h,!1)):e.lineTo(t,i),r=s.bl,IsArcCorner$1(r)&&a>t-r.x){var h=90-RadToDeg$9(Math.acos((a-(t-r.x))/r.x));o=r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,90,90+h,!1)}else e.lineTo(t-a,i);r=s.tl,IsArcCorner$1(r)&&a>t-r.x?(h=90-RadToDeg$9(Math.acos((a-(t-r.x))/r.x)),o=r.x,l=r.y,e.ellipticalArc(o,l,r.x,r.y,270-h,270,!1)):e.lineTo(t-a,0)},RadToDeg$8=Phaser.Math.RadToDeg,BuildRoundRectangleBarDirection3=function(e,t,i,s,n){var a=i*n,r=s.br;if(IsArcCorner$1(r)){h=a>r.y?90:RadToDeg$8(Math.acos((r.y-a)/r.y));var o=t-r.x,l=i-r.y;e.ellipticalArc(o,l,r.x,r.y,90-h,90,!1)}else e.lineTo(t,i);if(r=s.bl,IsArcCorner$1(r)?(h=a>r.y?90:RadToDeg$8(Math.acos((r.y-a)/r.y)),o=r.x,l=i-r.y,e.ellipticalArc(o,l,r.x,r.y,90,90+h,!1)):e.lineTo(0,i),r=s.tl,IsArcCorner$1(r)&&a>i-r.y){var h=90-RadToDeg$8(Math.acos((a-(i-r.y))/r.y));o=r.x,l=r.y,e.ellipticalArc(o,l,r.x,r.y,180,180+h,!1)}else e.lineTo(0,i-a);r=s.tr,IsArcCorner$1(r)&&a>i-r.y?(h=90-RadToDeg$8(Math.acos((a-(i-r.y))/r.y)),o=t-r.x,l=r.y,e.ellipticalArc(o,l,r.x,r.y,360-h,360,!1)):e.lineTo(t,i-a)},BuildRoundRectangleBar=function(e,t,i,s,n,a,r,o){return e.setIterations(o).start(),0===n?e:1===n?BuildRoundRectangle(e,t,i,s,o):((0===a?r?BuildRoundRectangleBarDirection2:BuildRoundRectangleBarDirection0:r?BuildRoundRectangleBarDirection3:BuildRoundRectangleBarDirection1)(e,t,i,s,n),e.close(),e)},UpdateShapes=function(){var e=this.width,t=this.height,i=this.rrGeom.cornerRadius,s=this.value,n=this.orientation,a=this.rtl,r=this.iteration+1,o=this.getShape("trackFill");o.fillStyle(this.trackColor),o.isFilled&&BuildRoundRectangle(o,e,t,i,r);var l=this.getShape("bar");l.fillStyle(this.barColor),l.isFilled&&BuildRoundRectangleBar(l,e,t,i,s,n,a,r);var h=this.getShape("trackStroke");h.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),h.isStroked&&BuildRoundRectangle(h,e,t,i,r)},OrientationMode={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},GetOrientationMode=function(e){return"string"==typeof e&&(e=OrientationMode[e]),e};const GetValue$2X=Phaser.Utils.Objects.GetValue,IsPlainObject$F=Phaser.Utils.Objects.IsPlainObject;class RoundRectangleProgress extends(ProgressBase(BaseShapes)){constructor(e,t,i,s,n,a,r,o,l){IsPlainObject$F(t)?(t=(l=t).x,i=l.y,s=l.width,n=l.height,a=l.radius,r=l.barColor,o=l.value):IsPlainObject$F(s)?(s=(l=s).width,n=l.height,a=l.radius,r=l.barColor,o=l.value):IsPlainObject$F(a)&&(a=(l=a).radius,r=l.barColor,o=l.value),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=s),void 0===a&&(a=0),void 0===o&&(o=0),super(e,t,i,s,n,l),this.type="rexRoundRectangleProgress",this.rrGeom=new RoundRectangle$3,this.bootProgressBase(l),this.addShape((new Lines).setName("trackFill")).addShape((new Lines).setName("bar")).addShape((new Lines).setName("trackStroke")),this.setTrackColor(GetValue$2X(l,"trackColor",void 0)),this.setBarColor(r),this.setTrackStroke(GetValue$2X(l,"trackStrokeThickness",2),GetValue$2X(l,"trackStrokeColor",void 0)),this.setOrientation(GetValue$2X(l,"orientation",0)),this.setRTL(GetValue$2X(l,"rtl",!1)),this.setRadius(a),this.setIteration(GetValue$2X(a,"iteration",void 0)),this.setValue(o)}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,t){return this.trackStrokeThickness=e,this.trackStrokeColor=t,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get orientation(){return this._orientation}set orientation(e){e=GetOrientationMode(e),this.dirty=this.dirty||this._orientation!=e,this._orientation=e}setOrientation(e){return this.orientation=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}get radius(){return this.rrGeom.radius}set radius(e){this.rrGeom.setRadius(e),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(e){this.rrGeom.radiusTL=e,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(e){this.rrGeom.radiusTR=e,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(e){this.rrGeom.radiusBL=e,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(e){this.rrGeom.radiusBR=e,this.dirty=!0}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}setRadiusTL(e){return void 0===e&&(e=0),this.radiusTL=e,this}setRadiusTR(e){return void 0===e&&(e=0),this.radiusTR=e,this}setRadiusBL(e){return void 0===e&&(e=0),this.radiusBL=e,this}setRadiusBR(e){return void 0===e&&(e=0),this.radiusBR=e,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(e){this.radius=e}setCornerRadius(e){return this.setRadius(e)}get iteration(){return this._iteration}set iteration(e){void 0!==this._iteration?this._iteration!==e&&(this._iteration=e,this.dirty=!0):this._iteration=e}setIteration(e){return void 0===e&&(e=6),this.iteration=e,this}}var Methods$b={updateShapes:UpdateShapes};Object.assign(RoundRectangleProgress.prototype,Methods$b),ObjectFactory.register("roundRectanleProgress",(function(e,t,i,s,n,a,r,o){var l=new RoundRectangleProgress(this.scene,e,t,i,s,n,a,r,o);return this.scene.add.existing(l),l})),SetValue(window,"RexPlugins.UI.RoundRectangleProgress",RoundRectangleProgress);var AddPolygonPath=function(e,t){e.save(),e.beginPath();var i=t[0];e.moveTo(i.x,i.y);for(var s=1,n=t.length;s<n;s++)i=t[s],e.lineTo(i.x,i.y);e.closePath(),e.restore()},DrawPolygon=function(e,t,i,s,n,a,r){void 0===r&&(r="round"),AddPolygonPath(t,i),t.lineJoin=r,null!=s&&(t.fillStyle=s,t.fill()),null!=n&&(t.strokeStyle=n,t.lineWidth=a,t.stroke())},DrawContent=function(){var e,t,i=this.skewX,s=this.width-Math.abs(i),n=this.height,a=this.canvas,r=this.context;if((this.trackColor||this.trackStrokeColor)&&BuildPolygon(0,0,s,n,i,this.trackPoints),this.barColor&&(this.rtl?(e=s*(1-this.value),t=s):(e=0,t=s*this.value),BuildPolygon(e,0,t,n,i,this.barPoints)),this.trackColor&&(r.save(),DrawPolygon(a,r,this.trackPoints,this.trackColor),r.restore()),this.barColor){var o;if(r.save(),this.barColor2){var l;if(this.isHorizontalGradient){var h=n/2;l=r.createLinearGradient(e,h,t,h)}else{var d=s/2;l=r.createLinearGradient(d,0,d,n)}l.addColorStop(0,this.rtl?this.barColor:this.barColor2),l.addColorStop(1,this.rtl?this.barColor2:this.barColor),o=l}else o=this.barColor;DrawPolygon(a,r,this.barPoints,o),r.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(r.save(),DrawPolygon(a,r,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),r.restore())},BuildPolygon=function(e,t,i,s,n,a){void 0===a&&(a=[]),a.length=4;for(var r=0;r<4;r++)a[r]||(a[r]={});var o;return n>=0?((o=a[0]).x=e+n,o.y=t,(o=a[1]).x=i+n,o.y=t,(o=a[2]).x=i,o.y=s,(o=a[3]).x=e,o.y=s):((o=a[0]).x=e,o.y=t,(o=a[1]).x=i,o.y=t,(o=a[2]).x=i-n,o.y=s,(o=a[3]).x=e-n,o.y=s),a};const GetValue$2W=Phaser.Utils.Objects.GetValue,IsPlainObject$E=Phaser.Utils.Objects.IsPlainObject;class LineProgress extends(ProgressBase(Canvas$1)){constructor(e,t,i,s,n,a,r,o){IsPlainObject$E(t)?(t=GetValue$2W(o=t,"x",0),i=GetValue$2W(o,"y",0),s=GetValue$2W(o,"width",2),n=GetValue$2W(o,"height",2),a=GetValue$2W(o,"barColor",void 0),r=GetValue$2W(o,"value",0)):IsPlainObject$E(s)?(s=GetValue$2W(o=s,"width",2),n=GetValue$2W(o,"height",2),a=GetValue$2W(o,"barColor",void 0),r=GetValue$2W(o,"value",0)):IsPlainObject$E(a)&&(a=GetValue$2W(o=a,"barColor",void 0),r=GetValue$2W(o,"value",0)),super(e,t,i,s,n,GetValue$2W(o,"resolution",1)),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(o),this.setTrackColor(GetValue$2W(o,"trackColor",void 0)),this.setBarColor(a,GetValue$2W(o,"barColor2",void 0),GetValue$2W(o,"isHorizontalGradient",void 0)),this.setTrackStroke(GetValue$2W(o,"trackStrokeThickness",2),GetValue$2W(o,"trackStrokeColor",void 0)),this.setSkewX(GetValue$2W(o,"skewX",0)),this.setRTL(GetValue$2W(o,"rtl",!1)),this.setValue(r)}get trackColor(){return this._trackColor}set trackColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,t){return this.trackStrokeThickness=e,this.trackStrokeColor=t,this}get barColor(){return this._barColor}set barColor(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=e,this._barColor=e}get barColor2(){return this._barColor2}set barColor2(e){e=GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=e,this._barColor2=e}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(e){this.dirty|=this._isHorizontalGradient!=e,this._isHorizontalGradient=e}setBarColor(e,t,i){return void 0===i&&(i=!0),this.barColor=e,this.barColor2=t,this.isHorizontalGradient=i,this}get skewX(){return this._skewX}set skewX(e){this.dirty=this.dirty||this._skewX!=e,this._skewX=e}setSkewX(e){return this.skewX=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}updateTexture(){return super.updateTexture((function(){this.clear(),DrawContent.call(this)}),this),this}}ObjectFactory.register("circularProgressCanvas",(function(e,t,i,s,n,a,r){var o=new LineProgress(this.scene,e,t,i,s,n,a,r);return this.scene.add.existing(o),o})),SetValue(window,"RexPlugins.UI.LineProgressCanvas",LineProgress),Phaser.Math.Wrap;const Linear$i=Phaser.Math.Linear;var DrawFitTriangle=function(){var e,t,i,s,n,a,r=this.getShape("triangle"),o=this.padding,l=this.width-o.right,h=0+o.left,d=this.height-o.bottom,c=0+o.top,u=(h+l)/2,p=(c+d)/2,g={0:{a:{x:h,y:c},b:{x:l,y:p},c:{x:h,y:d}},1:{a:{x:h,y:c},b:{x:u,y:d},c:{x:l,y:c}},2:{a:{x:l,y:c},b:{x:h,y:p},c:{x:l,y:d}},3:{a:{x:h,y:d},b:{x:u,y:c},c:{x:l,y:d}}};if(void 0===this.previousDirection){var m=g[this.direction],f=m.a,v=m.b,b=m.c;e=f.x,t=f.y,i=v.x,s=v.y,n=b.x,a=b.y}else{var y=g[this.previousDirection],C=g[this.direction],x=this.easeDirectionProgress;e=Linear$i(y.a.x,C.a.x,x),t=Linear$i(y.a.y,C.a.y,x),i=Linear$i(y.b.x,C.b.x,x),s=Linear$i(y.b.y,C.b.y,x),n=Linear$i(y.c.x,C.c.x,x),a=Linear$i(y.c.y,C.c.y,x)}r.startAt(e,t).lineTo(i,s).lineTo(n,a),this.arrowOnly?r.end():r.close()};const DegToRad$a=Phaser.Math.DegToRad,Rad120=DegToRad$a(120);var DrawCircleVerticesTriangle=function(e){e=this.getShape("triangle");var t=this.width/2,i=this.height/2,s=Math.min(t,i)*this.radius,n=this.verticeRotation;e.startAt(t+s*Math.cos(n+Rad120),i+s*Math.sin(n+Rad120)).lineTo(t+s*Math.cos(n),i+s*Math.sin(n)).lineTo(t+s*Math.cos(n-Rad120),i+s*Math.sin(n-Rad120)),this.arrowOnly?e.end():e.close()};const ShapesUpdateMethods$1={buildShapes(){this.addShape((new Lines).setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),0===this.shapeMode?DrawFitTriangle.call(this):DrawCircleVerticesTriangle.call(this)}},EaseDirectionMethods={setEaseDuration(e){return void 0===e&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return void 0===this.easeDirectionProgressTask&&(this.easeDirectionProgressTask=new EaseValueTask(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return void 0===this.easeDirectionProgressTask||this.easeDirectionProgressTask.stop(),this}},GetValue$2V=Phaser.Utils.Objects.GetValue,IsPlainObject$D=Phaser.Utils.Objects.IsPlainObject,DegToRad$9=Phaser.Math.DegToRad,RadToDeg$7=Phaser.Math.RadToDeg;class Triangle extends BaseShapes{constructor(e,t,i,s,n,a,r){var o,l,h,d,c,u,p,g;if(IsPlainObject$D(t)){var m=t;t=m.x,i=m.y,s=m.width,n=m.height,a=m.color,r=m.alpha,o=m.strokeColor,l=m.strokeAlpha,h=m.strokeWidth,d=m.arrowOnly,c=m.direction,u=m.easeDuration,p=m.padding,g=m.radius}void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=s),void 0===d&&(d=!1),void 0===c&&(c=0),void 0===u&&(u=0),void 0===p&&(p=0),void 0===g&&(g=void 0),super(e,t,i,s,n),this.type="rexTriangle",this.setFillStyle(a,r),void 0!==o&&void 0===h&&(h=2),this.setStrokeStyle(h,o,l),this.setArrowOnly(d),this.setDirection(c,u),this.setPadding(p),this.setRadius(g),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(e){this.dirty=this.dirty||this._arrowOnly!=e,this._arrowOnly=e}setArrowOnly(e){return void 0===e&&(e=!0),this.arrowOnly=e,this}get direction(){return this._direction}set direction(e){e=ParseDirection(e),this._direction!==e&&(this.easeDuration>0&&void 0!==this._direction?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=e,this.verticeAngle=90*e,this.dirty=!0,void 0!==this.previousDirection?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(e,t){return void 0!==t&&this.setEaseDuration(t),this.direction=e,this}toggleDirection(e){return this.setDirection(this.direction+2,e),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(e){this._easeDirectionProgress!==e&&(this._easeDirectionProgress=e,this.dirty=!0)}setPadding(e,t,i,s){if("object"==typeof e){var n=e,a=GetValue$2V(n,"x",null);null!==a?(e=a,i=a):(e=GetValue$2V(n,"left",0),i=GetValue$2V(n,"right",e));var r=GetValue$2V(n,"y",null);null!==r?(t=r,s=r):(t=GetValue$2V(n,"top",0),s=GetValue$2V(n,"bottom",t))}else void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=e),void 0===s&&(s=t);return void 0===this.padding&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=e||this.padding.top!=t||this.padding.right!=i||this.padding.bottom!=s,this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=s,this.setRadius(),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e}setRadius(e){return this.radius=e,this.shapeMode=null==e?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(e){this.dirty=this.dirty||this._verticeRotation!=e,this._verticeRotation=e}setVerticeRotation(e){return this.verticeRotation=e,this}get verticeAngle(){return RadToDeg$7(this.verticeRotation)}set verticeAngle(e){this.verticeRotation=DegToRad$9(e)}setVerticeAngle(e){return this.verticeAngle=e,this}}const DirectionNameMap={right:0,down:1,left:2,up:3};var ParseDirection=function(e){return"string"==typeof e&&(e=DirectionNameMap[e]),e%4};Object.assign(Triangle.prototype,ShapesUpdateMethods$1,EaseDirectionMethods),ObjectFactory.register("triangle",(function(e,t,i,s,n,a){var r=new Triangle(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.Triangle",Triangle),CheckP3Version();const Zone$1=Phaser.GameObjects.Zone,AddItem=Phaser.Utils.Array.Add,RemoveItem$6=Phaser.Utils.Array.Remove;let Base$2=class extends Zone$1{constructor(e,t,i,s,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=1),super(e,t,i,s,n),this.children=[]}destroy(e){if(this.scene&&!this.ignoreDestroy){if(e)for(var t,i=this.children.length-1;i>=0;i--)(t=this.children[i]).parentContainer||t.displayList||t.destroy(e);this.clear(!e),super.destroy(e)}}contains(e){return-1!==this.children.indexOf(e)}add(e){var t=this;return AddItem(this.children,e,0,(function(e){e.once("destroy",t.onChildDestroy,t)}),this),this}remove(e,t){var i=this;return RemoveItem$6(this.children,e,(function(e){e.off("destroy",i.onChildDestroy,i),t&&e.destroy()})),this}onChildDestroy(e,t){this.remove(e,!1)}clear(e){for(var t,i=0,s=this.children.length;i<s;i++)(t=this.children[i]).off("destroy",this.onChildDestroy,this),e&&t.destroy();return this.children.length=0,this}};const Components$1=Phaser.GameObjects.Components;Phaser.Class.mixin(Base$2,[Components$1.Alpha,Components$1.Flip]);var GetParent$1=function(e,t){var i;if(void 0===t)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent);else for(i=GetParent$1(e);i&&i.name!==t;)i=GetParent$1(i);return i},GetTopmostParent$1=function(e){for(var t=GetParent$1(e);t;)e=t,t=GetParent$1(t);return e};const DegToRad$8=Phaser.Math.DegToRad,RadToDeg$6=Phaser.Math.RadToDeg;var GetLocalState=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return RadToDeg$6(this.rotation)},set:function(e){this.rotation=DegToRad$8(e)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(t){this.scaleX=t/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(t){this.scaleY=t/e.height}}),e.rexContainer=t}return e.rexContainer};const Parent={setParent(e,t){void 0===t&&(t=this);var i=GetLocalState(e);return t?(i.parent=t,i.self=e):(i.parent=null,i.self=null),this},getParent(e,t){return"string"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this),GetParent$1(e,t)},getTopmostParent(e){return void 0===e&&(e=this),GetTopmostParent$1(e)}},GetValue$2U=Phaser.Utils.Objects.GetValue,BaseAdd=Base$2.prototype.add;var Add$8=function(e,t){this.setParent(e);var i=GetLocalState(e);return SetupSyncFlags(i,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),BaseAdd.call(this,e),SyncDisplayList$1.call(this,e,i),this},AddLocal=function(e,t){this.setParent(e);var i=GetLocalState(e);return SetupSyncFlags(i,t),i.x=e.x,i.y=e.y,i.rotation=e.rotation,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.alpha=e.alpha,i.visible=e.visible,i.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),BaseAdd.call(this,e),SyncDisplayList$1.call(this,e,i),this},SetupSyncFlags=function(e,t){void 0===t&&(t=!0),"boolean"==typeof t?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=GetValue$2U(t,"syncPosition",!0),e.syncRotation=GetValue$2U(t,"syncRotation",!0),e.syncScale=GetValue$2U(t,"syncScale",!0),e.syncAlpha=GetValue$2U(t,"syncAlpha",!0),e.syncScrollFactor=GetValue$2U(t,"syncScrollFactor",!0),e.syncCameraFilter=GetValue$2U(t,"syncCameraFilter",!0),e.syncDisplayList=GetValue$2U(t,"syncDisplayList",!0))},SyncDisplayList$1=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)};const AddChild$2={add(e){return Array.isArray(e)?this.addMultiple(e):Add$8.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):Add$8.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),i=0,s=e.length;i<s;i++)t[0]=e[i],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):AddLocal.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):AddLocal.call(this,e,t),this},addLocalMultiple(e){for(var t=0,i=e.length;t<i;t++)AddLocal.call(this,e[t]);return this}},BaseRemove=Base$2.prototype.remove,BaseClear=Base$2.prototype.clear,RemoveChild$1={remove(e,t){return GetParent$1(e)!==this||(this.setParent(e,null),t||this.removeFromRenderLayer(e),BaseRemove.call(this,e,t)),this},unpin(e,t){return GetParent$1(e)!==this||(this.setParent(e,null),t||this.removeFromRenderLayer(e),BaseRemove.call(this,e,t)),this},clear(e){for(var t=this.children,i=0,s=t.length;i<s;i++){var n=t[i];this.setParent(n,null),e||this.removeFromRenderLayer(n)}return BaseClear.call(this,e),this}},ChildState={getLocalState:e=>GetLocalState(e),resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,i=e.length;t<i;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Transform$2={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),i=Math.sin(-this.rotation),s=e.x,n=e.y;return e.x=s*t-n*i,e.y=s*i+n*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),i=Math.sin(this.rotation),s=e.x,n=e.y;return e.x=s*t-n*i,e.y=s*i+n*t,e.x+=this.x,e.y+=this.y,e}};var GetScale=function(e,t){return e===t?1:e/t};const Position={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=GetLocalState(e),i=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,i.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+i.rotation),t.syncScale&&(e.scaleX=t.scaleX*i.scaleX,e.scaleY=t.scaleY*i.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=GetLocalState(e),i=t.parent;return t.x=e.x,t.y=e.y,i.worldToLocal(t),t.scaleX=GetScale(e.scaleX,i.scaleX),t.scaleY=GetScale(e.scaleY,i.scaleY),t.rotation=e.rotation-i.rotation,this},setChildPosition(e,t,i){return e.x=t,e.y=i,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,i){var s=GetLocalState(e);return s.x=t,s.y=i,this.updateChildPosition(e),this},resetLocalPositionState(){var e=GetLocalState(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX:e=>GetLocalState(e).x,getChildLocalY:e=>GetLocalState(e).y},DegToRad$7=Phaser.Math.DegToRad,Rotation={updateChildRotation(e){var t=GetLocalState(e),i=t.parent;return t.syncRotation&&(e.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=GetLocalState(e),i=t.parent;return t.rotation=e.rotation-i.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){return GetLocalState(e).rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){return GetLocalState(e).rotation=DegToRad$7(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=GetLocalState(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation:e=>GetLocalState(e).rotation},Scale$1={updateChildScale(e){var t=GetLocalState(e),i=t.parent;return t.syncScale&&(e.scaleX=i.scaleX*t.scaleX,e.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=GetLocalState(e),i=t.parent;return t.scaleX=GetScale(e.scaleX,i.scaleX),t.scaleY=GetScale(e.scaleY,i.scaleY),this},setChildScale(e,t,i){return void 0===i&&(i=t),e.scaleX=t,e.scaleY=i,this.resetChildScaleState(e),this},setChildLocalScale(e,t,i){void 0===i&&(i=t);var s=GetLocalState(e);return s.scaleX=t,s.scaleY=i,this.updateChildScale(e),this},setChildDisplaySize(e,t,i){return e.setDisplaySize(t,i),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=GetLocalState(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX:e=>GetLocalState(e).scaleX,getChildLocalScaleY:e=>GetLocalState(e).scaleY},Visible$2={updateChildVisible(e){var t=GetLocalState(e),i=t.parent,s=!t.hasOwnProperty("maskVisible")||t.maskVisible,n=!i||i.visible;return e.visible=n&&t.visible&&s,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=GetLocalState(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){return void 0===t&&(t=!0),GetLocalState(e).visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){return void 0===t&&(t=!0),GetLocalState(e).maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=GetLocalState(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible:e=>GetLocalState(e).visible},Alpha$1={updateChildAlpha(e){var t=GetLocalState(e),i=t.parent;return t.syncAlpha&&(e.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=GetLocalState(e),i=t.parent;return t.alpha=GetScale(e.alpha,i.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){return GetLocalState(e).alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=GetLocalState(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha:e=>GetLocalState(e).alpha},Active={updateChildActive(e){var t=GetLocalState(e),i=t.parent;return e.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){return GetLocalState(e).active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){return void 0===t&&(t=!0),GetLocalState(e).active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=GetLocalState(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive:e=>GetLocalState(e).active},ScrollFactor$1={updateChildScrollFactor(e){var t=GetLocalState(e),i=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=i.scrollFactorX,e.scrollFactorY=i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},CameraFilter={updateCameraFilter(e){var t=GetLocalState(e),i=t.parent;return t.syncCameraFilter&&(e.cameraFilter=i.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},Mask={updateChildMask(e){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){void 0===e&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach((function(e){e.clearMask&&e.clearMask(!1),e.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(e)})),e&&this.mask&&this.mask.destroy(),this}};var FilterDisplayGameObjects=function(e){return e.filter((function(e){return!!e.displayList||!!e.parentContainer||void 0}))};const Depth$1={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var i=this.getAllChildren(),s=0,n=i.length;s<n;s++)i[s].depth=e;return this},swapDepth(e){var t=this.depth,i=e.depth;return this.setDepth(i),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),i=0,s=t.length;i<s;i++)t[i].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);SortGameObjectsByDepth(t,!1);for(var i=0,s=t.length;i<s;i++){var n=t[i];e.exists(n)&&e.bringToTop(n)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);SortGameObjectsByDepth(t,!0);for(var i=0,s=t.length;i<s;i++){var n=t[i];e.exists(n)&&e.sendToBack(n)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);SortGameObjectsByDepth(i,!1);for(var s=0,n=i.length;s<n;s++){var a=i[s];if(t.exists(a)){t.moveBelow(e,a);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);SortGameObjectsByDepth(i,!0);for(var s=0,n=i.length;s<n;s++){var a=i[s];if(t.exists(a)){t.moveAbove(e,a);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=FilterDisplayGameObjects(t),t=SortGameObjectsByDepth(t,!1)):t=[e];var i=this.getAllChildren([this]);i=FilterDisplayGameObjects(i);for(var s=(i=SortGameObjectsByDepth(i,!1))[i.length-1],n=0,a=t.length;n<a;n++){var r=t[n];s!==r&&(r!==this&&s.displayList!==r.displayList||(s.displayList.moveAbove(r,s),s=r))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=FilterDisplayGameObjects(t),t=SortGameObjectsByDepth(t,!1)):t=[e];var i=this.getAllChildren([this]);i=FilterDisplayGameObjects(i);for(var s=(i=SortGameObjectsByDepth(i,!1))[0],n=t.length-1;n>=0;n--){var a=t[n];s!==a&&(a!==this&&s.displayList!==a.displayList||(s.displayList.moveBelow(a,s),s=a))}return this}};var DepthFirstSearch=function(e,t){if(!t(e)&&e.isRexContainerLite)for(var i=e.children,s=0,n=i.length;s<n;s++)DepthFirstSearch(i[s],t)},BreadthFirstSearch=function(e,t){for(var i=[e];i.length>0;){var s=i.shift();!t(s)&&s.isRexContainerLite&&i.push(...s.children)}};const ArrayUtils=Phaser.Utils.Array,Children={getChildren(e){if(e)for(var t=0,i=this.children.length;t<i;t++)e.push(this.children[t]);else e=this.children;return e},getAllChildren(e){void 0===e&&(e=[]);var t=this;return BreadthFirstSearch(t,(function(i){i!==t&&e.push(i)})),e},getAllVisibleChildren(e){void 0===e&&(e=[]);var t=this;return BreadthFirstSearch(t,(function(i){if(i!==t)return!i.visible||void e.push(i)})),e},bfs(e,t){return void 0===t&&(t=this),BreadthFirstSearch(t,e),this},dfs(e,t){return void 0===t&&(t=this),DepthFirstSearch(t,e),this},contains(e){var t=GetParent$1(e);return!!t&&(t===this||this.contains(t))},getByName(e,t){if(t){for(var i,s,n=[this];n.length;)for(var a=0,r=(i=n.shift()).children.length;a<r;a++){if((s=i.children[a]).name===e)return s;s.isRexContainerLite&&n.push(s)}return null}return ArrayUtils.GetFirst(this.children,"name",e)},getRandom(e,t){return ArrayUtils.GetRandom(this.children,e,t)},getFirst(e,t,i,s){return ArrayUtils.GetFirstElement(this.children,e,t,i,s)},getAll(e,t,i,s){return ArrayUtils.GetAll(this.children,e,t,i,s)},count(e,t,i,s){return ArrayUtils.CountAllMatching(this.children,e,t,i,s)},swap(e,t){return ArrayUtils.Swap(this.children,e,t),this},setAll(e,t,i,s){return ArrayUtils.SetAll(this.children,e,t,i,s),this}};var GetLocalStates=function(e){for(var t=[],i=0,s=e.length;i<s;i++){var n=e[i];n.hasOwnProperty("rexContainer")&&t.push(n.rexContainer)}return t},GetScene=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t].scene;if(s)return s}return null},UpdateChild=function(e,t,i){if(i.parent){var s=i.parent,n=i.self;switch(t){case"x":case"y":s.updateChildPosition(n);break;case"angle":case"rotation":s.updateChildRotation(n);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":s.updateChildScale(n);break;case"alpha":s.updateChildAlpha(n);break;default:s.updateChildPosition(n),s.updateChildRotation(n),s.updateChildScale(n),s.updateChildAlpha(n)}}else e.remove()};const Tween={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var i=this.scene||GetScene(t);if(i){e.targets=GetLocalStates(t);var s=i.tweens.add(e);return s.on("update",UpdateChild),s}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=GetLocalStates(t));var i=e.onUpdate;return e.onUpdate=function(e,t){i&&i(e,t),UpdateChild(e,void 0,t)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}},ContainerClass=Phaser.GameObjects.Container;var IsContainerGameObject=function(e){return e instanceof ContainerClass},GetValidChildren=function(e){var t=e.getAllChildren([e]);return t.filter((function(e){return!!e.displayList||!!e.parentContainer}))},AddToContainer=function(e){var t=GetValidChildren(this);-1===t.indexOf(this)&&t.push(this),SortGameObjectsByDepth(t),e.add(t)},RemoveFromContainer=function(e,t,i){if(this.scene){var s=GetValidChildren(this);SortGameObjectsByDepth(s,t),e.remove(s),i&&s.forEach((function(e){e.addToDisplayList()}))}};const P3Container$1={addToContainer(e){return IsContainerGameObject(e)?(this._setParentContainerFlag=!0,AddToContainer.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return IsLayerGameObject(e)?(AddToContainer.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,RemoveFromContainer.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return void 0===e&&(e=!0),IsLayerGameObject(this.displayList)?(RemoveFromContainer.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList||IsLayerGameObject(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this}},RenderLayer={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();return t?(t===e.displayList||(e.isRexContainerLite?e.addToLayer(t):t.add(e),GetLocalState(e).layer=t),this):this},removeFromRenderLayer(e){var t=GetLocalState(e),i=t.layer;return i?(e.isRexContainerLite?e.removeFromLayer(!0):i.remove(e),t.layer=null,this):this}},Rectangle$1=Phaser.Geom.Rectangle,Union=Phaser.Geom.Rectangle.Union;var GetBoundsOfGameObjects=function(e,t){var i;void 0===t?t=new Rectangle$1:!0===t&&(void 0===GlobRect$1&&(GlobRect$1=new Rectangle$1),t=GlobRect$1),t.setTo(0,0,0,0);for(var s=!0,n=0,a=e.length;n<a;n++)if((i=e[n]).getBounds){var r=GetBounds(i,!0);s?(t.setTo(r.x,r.y,r.width,r.height),s=!1):Union(r,t,t)}return t},GlobRect$1,GetValue$2T=Phaser.Utils.Objects.GetValue,Snapshot=function(e){if(e){var t,i,s=e.gameObjects,n=e.renderTexture,a=e.saveTexture,r=GetValue$2T(e,"x",void 0),o=GetValue$2T(e,"y",void 0),l=GetValue$2T(e,"width",void 0),h=GetValue$2T(e,"height",void 0),d=GetValue$2T(e,"originX",0),c=GetValue$2T(e,"originY",0),u=GetValue$2T(e,"padding",0);if(void 0===l||void 0===h||void 0===r||void 0===o){var p=GetBoundsOfGameObjects(s,!0);void 0!==r&&void 0!==o?(l=2*Math.max(r-p.left,p.right-r),h=2*Math.max(o-p.top,p.bottom-o),d=.5,c=.5):(r=p.x,o=p.y,l=p.width,h=p.height,d=0,c=0),t=p.x,i=p.y}else t=r+(0-d)*l,i=o+(0-c)*h;t-=u,i-=u,l+=2*u,h+=2*u;var g=s[0].scene,m=g.sys.textures;return a&&!n&&(n=m.addDynamicTexture(a,l,h)),n||(n=g.add.renderTexture(0,0,l,h)),n.setPosition&&n.setPosition(r,o),n.width===l&&n.height===h||n.setSize(l,h),n.setOrigin&&n.setOrigin(d,c),n.camera.setScroll(t,i),s=SortGameObjectsByDepth(Clone$2(s)),n.draw(s),a&&(IsGameObject(n)?n.saveTexture(a):n.key!==a&&m.renameTexture(n.key,key)),n}};const RenderTexture$1={snapshot(e){var t=this.scaleX,i=this.scaleY,s=1===t&&1===i;s||this.setScale(1),void 0===e&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var n=Snapshot(e),a=!!n.scene;return s||(this.setScale(t,i),a&&n.setScale(t,i)),a?n:this}},GetValue$2S=Phaser.Utils.Objects.GetValue;var DrawBounds$1=function(e,t){var i=GetValue$2S(t,"drawContainer",!0),s=GetValue$2S(t,"children");return void 0===s&&(s=this.getAllVisibleChildren([this])),i||(s=s.filter((function(e){return!e.isRexContainerLite}))),DrawBounds$2(s,e,t),this};const RotateAround$4=Phaser.Math.RotateAround;var ChangeOrigin$1=function(e,t,i){void 0===i&&(i=t);var s={x:(t-e.originX)*e.displayWidth,y:(i-e.originY)*e.displayHeight};return RotateAround$4(s,0,0,e.rotation),e.originX=t,e.originY=i,e.x=e.x+s.x,e.y=e.y+s.y,e},ChangeOrigin=function(e,t){this.syncChildrenEnable=!1,ChangeOrigin$1(this,e,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),s=0,n=i.length;s<n;s++)this.resetChildPositionState(i[s]);return this},methods$A={changeOrigin:ChangeOrigin,drawBounds:DrawBounds$1};Object.assign(methods$A,Parent,AddChild$2,RemoveChild$1,ChildState,Transform$2,Position,Rotation,Scale$1,Visible$2,Alpha$1,Active,ScrollFactor$1,CameraFilter,Mask,Depth$1,Children,Tween,P3Container$1,RenderLayer,RenderTexture$1);class ContainerLite extends Base$2{constructor(e,t,i,s,n,a){Array.isArray(s)&&(a=s,s=void 0,n=void 0),super(e,t,i,s,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,a&&this.add(a)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.syncChildrenEnable=!1,super.destroy(e),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(e,t){return this.setSize(e,t),this}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.syncPosition())}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.syncPosition())}get rotation(){return super.rotation}set rotation(e){this.rotation!==e&&(super.rotation=e,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(e){this.scaleX!==e&&(super.scaleX=e,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(e){this.scaleY!==e&&(super.scaleY=e,this.syncPosition())}get scale(){return super.scale}set scale(e){this.scale!==e&&(super.scale=e,this.syncPosition())}get visible(){return super.visible}set visible(e){super.visible!==e&&(super.visible=e,this.syncVisible())}get alpha(){return super.alpha}set alpha(e){super.alpha!==e&&(super.alpha=e,this.syncAlpha())}get active(){return this._active}set active(e){this._active!==e&&(this._active=e,this.syncActive())}get mask(){return this._mask}set mask(e){this._mask!==e&&(this._mask=e,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(e){this._scrollFactorX!==e&&(this._scrollFactorX=e,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(e){this._scrollFactorY!==e&&(this._scrollFactorY=e,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(e){this._cameraFilter!==e&&(this._cameraFilter=e,this.syncCameraFilter())}get list(){return this.children}static GetParent(e){return GetParent$1(e)}get parentContainer(){return this._parentContainer}set parentContainer(e){this._parentContainer||e?this.setParentContainerFlag?this._parentContainer=e:this._parentContainer&&!e?(this.removeFromContainer(),this._parentContainer=e):e?(this._parentContainer=e,this.addToContainer(e)):this._parentContainer=e:this._parentContainer=e}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var e=GetParent$1(this);return!!e&&e.setParentContainerFlag}}Object.assign(ContainerLite.prototype,methods$A);var GetSizerConfig$1=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};function GetSizerConfig(e){return void 0===e&&(e=this),GetSizerConfig$1(e)}var GetChildPrevState=function(e){var t=GetSizerConfig$1(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},PushIntoBounds=function(e){return void 0===e&&(e=GetViewport(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const ALIGN$1=Phaser.Display.Align,AlignConst={center:ALIGN$1.CENTER,left:ALIGN$1.LEFT_CENTER,right:ALIGN$1.RIGHT_CENTER,top:ALIGN$1.TOP_CENTER,bottom:ALIGN$1.BOTTOM_CENTER,"left-top":ALIGN$1.TOP_LEFT,"top-left":ALIGN$1.TOP_LEFT,"left-center":ALIGN$1.LEFT_CENTER,"center-left":ALIGN$1.LEFT_CENTER,"left-bottom":ALIGN$1.BOTTOM_LEFT,"bottom-left":ALIGN$1.BOTTOM_LEFT,"center-top":ALIGN$1.TOP_CENTER,"top-center":ALIGN$1.TOP_CENTER,"center-center":ALIGN$1.CENTER,"center-bottom":ALIGN$1.BOTTOM_CENTER,"bottom-center":ALIGN$1.BOTTOM_CENTER,"right-top":ALIGN$1.TOP_RIGHT,"top-right":ALIGN$1.TOP_RIGHT,"right-center":ALIGN$1.RIGHT_CENTER,"center-right":ALIGN$1.RIGHT_CENTER,"right-bottom":ALIGN$1.BOTTOM_RIGHT,"bottom-right":ALIGN$1.BOTTOM_RIGHT};var globZone=new Phaser.GameObjects.Zone({sys:{queueDepthSort:NOOP,events:{once:NOOP}}},0,0,1,1);globZone.setOrigin(0);var ALIGN_CONST={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},GetBottom=function(e){var t=GetDisplayHeight(e);return e.y+t-t*e.originY},GetCenterX=function(e){var t=GetDisplayWidth(e);return e.x-t*e.originX+.5*t},SetBottom=function(e,t){var i=GetDisplayHeight(e);return e.y=t-i+i*e.originY,e},SetCenterX=function(e,t){var i=GetDisplayWidth(e),s=i*e.originX;return e.x=t+s-.5*i,e},BottomCenter=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetCenterX(e,GetCenterX(t)+i),SetBottom(e,GetBottom(t)+s),e},GetLeft=function(e){var t=GetDisplayWidth(e);return e.x-t*e.originX},SetLeft=function(e,t){var i=GetDisplayWidth(e);return e.x=t+i*e.originX,e},BottomLeft=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetLeft(e,GetLeft(t)-i),SetBottom(e,GetBottom(t)+s),e},GetRight=function(e){var t=GetDisplayWidth(e);return e.x+t-t*e.originX},SetRight=function(e,t){var i=GetDisplayWidth(e);return e.x=t-i+i*e.originX,e},BottomRight=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetRight(e,GetRight(t)+i),SetBottom(e,GetBottom(t)+s),e},SetCenterY=function(e,t){var i=GetDisplayHeight(e),s=i*e.originY;return e.y=t+s-.5*i,e},CenterOn=function(e,t,i){return SetCenterX(e,t),SetCenterY(e,i)},GetCenterY=function(e){var t=GetDisplayHeight(e);return e.y-t*e.originY+.5*t},Center=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),CenterOn(e,GetCenterX(t)+i,GetCenterY(t)+s),e},LeftCenter=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetLeft(e,GetLeft(t)-i),SetCenterY(e,GetCenterY(t)+s),e},RightCenter=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetRight(e,GetRight(t)+i),SetCenterY(e,GetCenterY(t)+s),e},GetTop=function(e){var t=GetDisplayHeight(e);return e.y-t*e.originY},SetTop=function(e,t){var i=GetDisplayHeight(e);return e.y=t+i*e.originY,e},TopCenter=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetCenterX(e,GetCenterX(t)+i),SetTop(e,GetTop(t)-s),e},TopLeft=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetLeft(e,GetLeft(t)-i),SetTop(e,GetTop(t)-s),e},TopRight=function(e,t,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),SetRight(e,GetRight(t)+i),SetTop(e,GetTop(t)-s),e},AlignInMap=[];AlignInMap[ALIGN_CONST.BOTTOM_CENTER]=BottomCenter,AlignInMap[ALIGN_CONST.BOTTOM_LEFT]=BottomLeft,AlignInMap[ALIGN_CONST.BOTTOM_RIGHT]=BottomRight,AlignInMap[ALIGN_CONST.CENTER]=Center,AlignInMap[ALIGN_CONST.LEFT_CENTER]=LeftCenter,AlignInMap[ALIGN_CONST.RIGHT_CENTER]=RightCenter,AlignInMap[ALIGN_CONST.TOP_CENTER]=TopCenter,AlignInMap[ALIGN_CONST.TOP_LEFT]=TopLeft,AlignInMap[ALIGN_CONST.TOP_RIGHT]=TopRight;var QuickSet=function(e,t,i,s,n){return AlignInMap[i](e,t,s,n)},AlignIn=function(e,t,i,s,n,a){globZone.setPosition(t,i).setSize(s,n),QuickSet(e,globZone,a)};const GetValue$2R=Phaser.Utils.Objects.GetValue,Group$1=Phaser.GameObjects.Group,P3Container=Phaser.GameObjects.Container;var DrawBounds=function(e,t){var i,s,n,a,r,o=e.scene;if("number"==typeof t)i=t;else{i=GetValue$2R(t,"color"),s=GetValue$2R(t,"lineWidth");var l=GetValue$2R(t,"name",!1);l&&(n=GetValue$2R(l,"createTextCallback",DefaultCreateTextCallback),a=GetValue$2R(l,"createTextCallbackScope",void 0),"string"==typeof(r=GetValue$2R(l,"align","left-top"))&&(r=AlignConst[r]))}if(void 0===i&&(i=16777215),void 0===s&&(s=1),n&&!e.children){e.children=new Group$1(o),e.once("destroy",(function(e,t){e.children.destroy(!t),e.children=void 0}));var h=e.clear.bind(e);e.clear=function(){h(),e.children.clear(!1,!0)}}var d,c,u=this.getAllShownChildren([this]);GetP3ContainerChildren(u,u);for(var p=0,g=u.length;p<g;p++)((d=u[p]).getBounds||void 0!==d.width&&void 0!==d.height)&&(GlobRect=GetBounds(d,GlobRect),null!=i&&e.lineStyle(s,i).strokeRectShape(GlobRect),d.name&&n&&(c=a?n.call(a,o):n(o))&&(c.setText(d.name),e.children.add(c),AlignIn(c,GlobRect.x,GlobRect.y,GlobRect.width,GlobRect.height,r)));return this},DefaultCreateTextCallback=function(e,t,i){return e.add.text(0,0,"")},GetP3ContainerChildren=function(e,t){Array.isArray(e)||(e=[e]),void 0===t&&(t=[]);for(var i=0,s=e.length;i<s;i++){var n=e[i];n instanceof P3Container&&(t.push(...n.list),GetP3ContainerChildren(n.list,t))}return t},GlobRect=void 0;const GetValue$2Q=Phaser.Utils.Objects.GetValue;var GetBoundsConfig$1=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),"number"==typeof e?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=GetValue$2Q(e,"left",0),t.right=GetValue$2Q(e,"right",0),t.top=GetValue$2Q(e,"top",0),t.bottom=GetValue$2Q(e,"bottom",0)),t};const ContainerAdd=ContainerLite.prototype.add;var AddChild$1=function(e){return ContainerAdd.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this};const AddChildMethods$8={addBackground(e,t,i){return void 0===this.backgroundChildren&&(this.backgroundChildren=[]),"string"==typeof t&&(i=t,t=void 0),void 0===t&&(t=0),AddChild$1.call(this,e),this.backgroundChildren.push(e),this.getSizerConfig(e).padding=GetBoundsConfig$1(t),void 0!==i&&this.addChildrenMap(i,e),this},isBackground(e){return void 0!==this.backgroundChildren&&-1!==this.backgroundChildren.indexOf(e)}};var GetParent=function(e,t){var i=null;if(void 0===t)e.hasOwnProperty("rexContainer")&&((i=e.rexContainer.parent)?i.isRexSizer||(i=GetParent(i)):i=null);else for(i=GetParent(e);i&&i.name!==t;)i=GetParent(i);return i},GetTopmostParent=function(e){for(var t=GetParent(e);t;)e=t,t=GetParent(t);return e};const GetParentSizerMethods={getParentSizer(e,t){return"string"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this),GetParent(e,t)},getTopmostSizer(e){return void 0===e&&(e=this),GetTopmostParent(e)},hasParentSizer(e,t){void 0===t&&(t=this);for(var i=GetParent(t);i;){if(i===e)return!0;i=GetParent(i)}return!1},hasChild(e,t){return void 0===t&&(t=this),this.hasParentSizer(t,e)}},RemoveItem$5=Phaser.Utils.Array.Remove,ContainerRemove=ContainerLite.prototype.remove,GetParentSizer$1=GetParentSizerMethods.getParentSizer;var RemoveChild=function(e,t){for(var i=GetParentSizer$1(e);i;)i.removeChildCallback&&i.removeChildCallback(e,t),i=GetParentSizer$1(i);return this.isBackground(e)&&RemoveItem$5(this.backgroundChildren,e),ContainerRemove.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const RemoveItem$4=Phaser.Utils.Array.Remove,GetParentSizer=GetParentSizerMethods.getParentSizer,RemoveChildMethods$7={removeFromParentSizer(){var e=GetParentSizer(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return void 0===this.backgroundChildren||this.getParentSizer(e)!==this||(RemoveItem$4(this.backgroundChildren,e),RemoveChild.call(this,e,t)),this},removeAllBackgrounds(e){if(void 0===this.backgroundChildren)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}};var AddChildrenMap=function(e,t){if("string"==typeof e)this.childrenMap[e]=t;else{var i=e;for(e in i)this.childrenMap[e]=i[e]}return this},RemoveChildrenMap=function(e){if("object"==typeof e){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},GetElement=function(e,t){if("string"==typeof e&&(e=e.split(".")),0!==e.length){void 0===t&&(t=!1);var i=e.shift(),s=null;if("#"===i.charAt(0))i=i.substring(1),s=this.getByName(i,t);else if(0===e.length&&t){var n=this.childrenMap;if(n)for(var a,r=[n];r.length;){for(var o in n=r.shift()){if(a=n[o],o===i){s=a;break}a&&"object"==typeof a&&a.childrenMap&&r.push(a.childrenMap)}if(s)break}}else if(-1===i.indexOf("["))this.childrenMap&&(s=this.childrenMap[i]);else{var l=i.match(RE_OBJ);if(null!=l&&this.childrenMap){var h=this.childrenMap[l[1]];h&&(s=h[l[2]])}}return 0===e.length?s:s&&s.childrenMap?s.getElement(e):null}};const RE_OBJ=/(\S+)\[(\d+)\]/i;var GetChildIndex=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return-1===t&&(t=null),t}if(this.getParentSizer(e)!==this)return null;for(var i in this.sizerChildren)if(this.sizerChildre[i]===e)return i;return null};const PaddingMethods={getInnerPadding(e){return GetPadding$1(this.space,e)},setInnerPadding(e,t){return SetPadding$1(this.space,e,t),this},getOuterPadding(e){return GetPadding$1(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return SetPadding$1(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return"string"==typeof e&&(e=this.getElement(e)),GetPadding$1(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,i){return"string"==typeof e&&(e=this.getElement(e)),SetPadding$1(this.getSizerConfig(e).padding,t,i),this}};var ResolveWidth$3=function(e){var t=this.childrenWidth;if(void 0!==t){var i=void 0!==this.minWidth?this.minWidth*this.scaleX:0;return void 0===e?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) or childrenWidth (${t} > targetWidth ${e})`),e}},HasWidthWrap$2=function(){var e;for(var t in this.sizerChildren)if(!(!(e=this.sizerChildren[t])||e.isRexSizer&&e.ignoreLayout)&&e.runWidthWrap&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},ResolveChildrenWidth$1=function(e){var t,i,s;for(var n in this.sizerChildren)(t=this.sizerChildren[n])&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,e),void 0===(s=t.resolveWidth(i))&&(s=i),t.resolveChildrenWidth(s))},RunWidthWrap$3=function(e){var t,i,s;for(var n in this.sizerChildren)!(t=this.sizerChildren[n])||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap||(i=this.getExpandedChildWidth(t,e),t.isRexSizer?void 0===(s=t.resolveWidth(i))&&(s=i):s=i,t.runWidthWrap(s));return this},ResolveHeight$3=function(e){var t=this.childrenHeight;if(void 0!==t){var i=void 0!==this.minHeight?this.minHeight*this.scaleY:0;return void 0===e?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) or childrenHeight (${t}) > targetHeight (${e})`),e}},HasHeightWrap$2=function(){var e;for(var t in this.sizerChildren)if(!(!(e=this.sizerChildren[t])||e.isRexSizer&&e.ignoreLayout)&&e.runHeightWrap&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},ResolveChildrenHeight$1=function(e){var t,i,s;for(var n in this.sizerChildren)(t=this.sizerChildren[n])&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildHeight(t,e),void 0===(s=t.resolveHeight(i))&&(s=i),t.resolveChildrenHeight(s))},RunHeightWrap$3=function(e){var t,i,s;for(var n in this.sizerChildren)!(t=this.sizerChildren[n])||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap||(i=this.getExpandedChildHeight(t,e),t.isRexSizer?void 0===(s=t.resolveHeight(i))&&(s=i):s=i,t.runHeightWrap(s));return this},GetChildWidth=function(e){var t;if(e.isRexSizer){var i=e.childrenWidth;if(null==i)return;var s=e.minWidth*e.scaleX;t=Math.max(s,i)}else t=void 0!==e.minWidth?e.minWidth:void 0!==e._minWidth?e._minWidth:GetDisplayWidth(e);return t},GetChildHeight=function(e){var t;if(e.isRexSizer){var i=e.childrenHeight;if(void 0===i)return;var s=e.minHeight*e.scaleY;t=Math.max(s,i)}else t=void 0!==e.minHeight?e.minHeight:void 0!==e._minHeight?e._minHeight:GetDisplayHeight(e);return t},GetExpandedChildWidth$4=function(e,t){return t},GetExpandedChildHeight$4=function(e,t){return t},GetChildrenWidth$5=function(){return 0},GetChildrenHeight$5=function(){return 0},GetAllChildrenSizers=function(e){void 0===e&&(e=[]);for(var t=e.length,i=this.getChildrenSizers(e),s=e.length,n=t;n<s;n++)i[n].getAllChildrenSizers(e);return e},GetChildrenSizers$5=function(e){return void 0===e&&(e=[]),e};const GetShownChildrenMethods={getShownChildren(e){void 0===e&&(e=[]);for(var t,i=this.children,s=0,n=i.length;s<n;s++)(t=i[s]).rexSizer&&t.rexSizer.hidden||e.push(t);return e},getAllShownChildren(e){void 0===e&&(e=[]);for(var t=[this];t.length>0;){var i=t.shift();i.rexSizer&&i.rexSizer.hidden||(i!==this&&e.push(i),i.isRexContainerLite&&t.push(...i.children))}return e}};var PreLayout$4=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e,t=this.getChildrenSizers(),i=0,s=t.length;i<s;i++)(e=t[i]).ignoreLayout||e.preLayout()},Layout=function(){return this.runLayout(),this},HasResizeMethod=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,i=ExcludeClassList$1.length;t<i;t++){var s=ExcludeClassList$1[t];if(s&&e instanceof s)return!1}return!0},ExcludeClassList$1=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],CanSetDisplaySize=function(e){if(void 0===e.displayWidth)return!1;for(var t=0,i=ExcludeClassList.length;t<i;t++){var s=ExcludeClassList[t];if(s&&e instanceof s)return!1}return!0},ExcludeClassList=[Phaser.GameObjects.BitmapText],ResizeGameObject=function(e,t,i){if(e&&(void 0!==t||void 0!==i))if(HasResizeMethod(e)){var s,n;s=void 0===t?e.width:t/e.scaleX,n=void 0===i?e.height:i/e.scaleY,e.resize?e.resize(s,n):e.setSize(s,n)}else{var a=CanSetDisplaySize(e);void 0!==t&&(a?e.displayWidth=t:e.scaleX=t/e.width),void 0!==i&&(a?e.displayHeight=i:e.scaleY=i/e.height)}},RunLayout$1=function(e,t,i){if(this.ignoreLayout)return this;var s,n,a=!e;a&&this.preLayout(),a||e.runChildrenWrapFlag?(s=this.hasWidthWrap(),n=this.hasHeightWrap()):(s=!1,n=!1);var r=ResolveSize(this,t,i,s,n);r||console.error("Can't resolve size of ",this);var o=r.width,l=r.height;return ResizeGameObject(this,o,l),this.sizerEventsEnable&&void 0===this.layoutedChildren&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,o,l),a&&this._anchor&&this._anchor.updatePosition(),this},ResolveSize=function(e,t,i,s,n){var a=ResolveWidth$2(e,t,s),r=ResolveHeight$2(e,i,n);return void 0===a&&(a=ResolveWidth$2(e,t,s)),void 0!==a&&void 0!==r&&{width:a,height:r}},ResolveWidth$2=function(e,t,i){return void 0!==(t=e.resolveWidth(t))&&i&&(e.resolveChildrenWidth(t),e.runWidthWrap(t)),t},ResolveHeight$2=function(e,t,i){return void 0!==(t=e.resolveHeight(t))&&i&&(e.resolveChildrenHeight(t),e.runHeightWrap(t)),t},LayoutChildren$6=function(){},PostLayout=function(e,t,i){return this},DefaultResizeCallback=function(e,t,i,s){ResizeGameObject(i,e,t)};const GetValue$2P=Phaser.Utils.Objects.GetValue;class Anchor extends ComponentBase{constructor(e,t){super(e,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(t)}shutdown(e){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(e))}resetFromJSON(e){var t,i,s,n,a,r,o,l;void 0===e&&(e={}),void 0!==e.x?(t=null,i=e.x):void 0!==e.left?(t=0,i=e.left):void 0!==e.right?(t=1,i=e.right):void 0!==e.centerX&&(t=.5,i=e.centerX),void 0!==e.y?(s=null,n=e.y):void 0!==e.top?(s=0,n=e.top):void 0!==e.bottom?(s=1,n=e.bottom):void 0!==e.centerY&&(s=.5,n=e.centerY),void 0!==i&&(i=i.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),a=parseFloat(i[0])/100,r=""===i[1]?0:parseFloat(i[1])),void 0!==n&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),o=parseFloat(n[0])/100,l=""===n[1]?0:parseFloat(n[1]));var h,d,c=e.width;void 0!==c&&(c=c.split("%"),h=parseFloat(c[0])/100,d=""===c[1]?0:parseFloat(c[1]));var u,p,g=e.height;void 0!==g&&(g=g.split("%"),u=parseFloat(g[0])/100,p=""===g[1]?0:parseFloat(g[1])),this.setAlign(t,s),this.setPercentage(a,o),this.setOffset(r,l),this.setSizePercentage(h,u),this.setSizePadding(d,p);var m=GetValue$2P(e,"onResizeCallback",DefaultResizeCallback),f=GetValue$2P(e,"onResizeCallbackScope");this.setResizeCallback(m,f);var v=GetValue$2P(e,"onUpdateViewportCallback"),b=GetValue$2P(e,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(v,b),this.autoAnchor(e.enable),this}autoAnchor(e){return void 0===e&&(e=!0),e=!!e,this.autoAnchorEnable===e||(e?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=e),this}setAlign(e,t){return this.alignX=e,this.alignY=t,this}setPercentage(e,t){return this.percentageX=e,this.percentageY=t,this}setOffset(e,t){return this.offsetX=e,this.offsetY=t,this}setSizePercentage(e,t){return this.percentageWidth=e,this.percentageHeight=t,this}setSizePadding(e,t){return this.paddingWidth=e,this.paddingHeight=t,this}setResizeCallback(e,t){return this.onResizeCallback=e,this.onResizeCallbackScope=t,this}setUpdateViewportCallback(e,t){return this.onUpdateViewportCallback=e,this.onUpdateViewportCallbackScope=t,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var e=this.onResizeCallback,t=this.onResizeCallbackScope,i=this.anchorWidth,s=this.anchorHeight;if((void 0!==i||void 0!==s)&&e){var n=this.parent;void 0===i&&(i=n.width),void 0===s&&(s=n.height),t?e.call(t,i,s,n,this):e(i,s,n,this)}}updatePosition(){var e=this.parent;return null===this.alignX?e.x=this.anchorX:void 0!==this.alignX&&(e.x=this.anchorX+e.displayWidth*(e.originX-this.alignX)),null===this.alignY?e.y=this.anchorY:void 0!==this.alignY&&(e.y=this.anchorY+e.displayHeight*(e.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(void 0!==this.percentageWidth)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(void 0!==this.percentageHeight)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var e=this.parent.scene.cameras.main;this.viewport=GetViewport(this.scene,e,this.viewport);var t=this.viewport,i=this.onUpdateViewportCallback,s=this.onUpdateViewportCallbackScope;i&&(s?i.call(s,t,this.parent,this):i(t,this.parent,this))}}var SetAnchor=function(e){void 0===e&&(e={});var t=e.hasOwnProperty("width"),i=e.hasOwnProperty("height"),s=e.hasOwnProperty("onResizeCallback");return!t&&!i||s||(e.onResizeCallback=function(e,s,n){t&&n.setMinWidth(e),i&&n.setMinHeight(s),n.layout()}),void 0===this._anchor?this._anchor=new Anchor(this,e):this._anchor.resetFromJSON(e),this};const GetValue$2O=Phaser.Utils.Objects.GetValue,GetAdvancedValue$4=Phaser.Utils.Objects.GetAdvancedValue,Linear$h=Phaser.Math.Linear;class Scale extends EaseValueTaskBase{constructor(e,t){super(e,t),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(GetValue$2O(e,"mode",0)),this.setScaleRange(GetAdvancedValue$4(e,"start",void 0),GetAdvancedValue$4(e,"end",0)),this}setMode(e){return"string"==typeof e&&(e=MODE$3[e]),this.mode=e,this}setScaleRange(e,t){return"number"==typeof e?(this.startX=e,this.startY=e):(this.startX=GetAdvancedValue$4(e,"x",this.parent.scaleX),this.startY=GetAdvancedValue$4(e,"y",this.parent.scaleY)),"number"==typeof t?(this.endX=t,this.endY=t):(this.endX=GetAdvancedValue$4(t,"x",void 0),this.endY=GetAdvancedValue$4(t,"y",void 0)),this.hasScaleX=void 0!==this.startX&&void 0!==this.endX,this.hasScaleY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var e=this.parent;this.hasScaleX&&(e.scaleX=this.startX),this.hasScaleY&&(e.scaleY=this.startY);var t=this.repeat;return 2===this.mode&&-1!==t&&(t=2*(t+1)-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(t),super.start(),this}updateTarget(e,t){var i=t.t;t.isOddIteration&&(i=1-i),i=this.easeFn(i),this.hasScaleX&&(e.scaleX=Linear$h(this.startX,this.endX,i)),this.hasScaleY&&(e.scaleY=Linear$h(this.startY,this.endY,i))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}}const MODE$3={stop:0,destroy:1,yoyo:2};var PopUp$1=function(e,t,i,s,n){var a,r;switch(void 0===s&&(s="Cubic"),i){case 0:case"x":a={x:0},r={x:e.scaleX};break;case 1:case"y":a={y:0},r={y:e.scaleY};break;default:a=0,r=e.scale}var o={mode:0,start:a,end:r,duration:t,ease:s};return void 0===n?n=new Scale(e,o):n.resetFromJSON(o),n.restart(),n},ScaleDownDestroy=function(e,t,i,s,n,a){void 0===s&&(s="Linear"),n instanceof Scale&&(a=n,n=void 0),void 0===n&&(n=!0);var r={};switch(r.mode=n?1:0,i){case 0:case"x":r.end={x:0};break;case 1:case"y":r.end={y:0};break;default:r.end=0}return r.duration=t,r.ease=s,void 0===a?a=new Scale(e,r):a.resetFromJSON(r),a.restart(),a},Yoyo=function(e,t,i,s,n,a,r){var o,l;switch(void 0===i&&(i=1.2),void 0===s&&(s=0),void 0===a&&(a="Cubic"),n){case 0:case"x":o={x:e.scaleX},l={x:i};break;case 1:case"y":o={y:e.scaleX},l={y:i};break;default:o=e.scaleX,l=i}var h={mode:2,start:o,end:l,duration:t/2,ease:a,repeat:s};return void 0===r?r=new Scale(e,h):r.resetFromJSON(h),r.restart(),r};const IsPlainObject$C=Phaser.Utils.Objects.IsPlainObject,ScaleMethods={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",(function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)}))},popUp(e,t,i){if(IsPlainObject$C(e)){var s=e;e=s.duration,t=s.orientation,i=s.ease}var n=void 0===this._scaleBehavior;return this._scaleBehavior=PopUp$1(this,e,t,i,this._scaleBehavior),n&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,i){return this.popUp(e,t,i),WaitComplete(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&"popup.complete"===this._scaleBehavior.completeEventName},scaleDownDestroy(e,t,i,s){if(IsPlainObject$C(e)){var n=e;e=n.duration,t=n.orientation,i=n.ease,s=n.destroy}var a=void 0===this._scaleBehavior;return this._scaleBehavior=ScaleDownDestroy(this,e,t,i,s,this._scaleBehavior),a&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,i,s){return this.scaleDownDestroy(e,t,i,s),WaitComplete(this._scaleBehavior)},scaleDown(e,t,i){return this.scaleDownDestroy(e,t,i,!1),this},scaleDownPromise(e,t,i){return this.scaleDown(e,t,i),WaitComplete(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&"scaledown.complete"===this._scaleBehavior.completeEventName},scaleYoyo(e,t,i,s,n){if(IsPlainObject$C(e)){var a=e;e=a.duration,t=a.peakValue,i=a.repeat,s=a.orientation,n=a.ease}var r=void 0===this._scaleBehavior;return this._scaleBehavior=Yoyo(this,e,t,i,s,n,this._scaleBehavior),r&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,i,s,n){return this.scaleYoyo(e,t,i,s,n),WaitComplete(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}};var methods$z={};Object.assign(methods$z,ScaleMethods),methods$z.onInitScale=function(){ScaleMethods.onInitScale.call(this);var e=this;this._scaleBehavior.on("update",(function(){var t=GetParentSizerMethods.getParentSizer(e);t&&t.resetChildPositionState(e)}))};const GetValue$2N=Phaser.Utils.Objects.GetValue,GetAdvancedValue$3=Phaser.Utils.Objects.GetAdvancedValue,Linear$g=Phaser.Math.Linear;let Fade$2=class extends EaseValueTaskBase{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(GetValue$2N(e,"mode",0)),this.setAlphaRange(GetAdvancedValue$3(e,"start",this.parent.alpha),GetAdvancedValue$3(e,"end",0)),this}setMode(e){return"string"==typeof e&&(e=MODE$2[e]),this.mode=e,this}setAlphaRange(e,t){return this.alphaStart=e,this.alphaEnd=t,this}start(){return this.timer.isRunning||(this.parent.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start()),this}updateTarget(e,t){var i=t.t;t.isOddIteration&&(i=1-i),e.alpha=Linear$g(this.alphaStart,this.alphaEnd,i)}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}};const MODE$2={stop:0,destroy:1,yoyo:2},IsPlainObject$B=Phaser.Utils.Objects.IsPlainObject;var FadeIn=function(e,t,i,s){var n,a;IsPlainObject$B(i)?(n=i.start,a=i.end):a=i,void 0===n&&(n=0),void 0===a&&(a=1);var r={mode:0,start:n,end:a,duration:t};return void 0===s?s=new Fade$2(e,r):s.resetFromJSON(r),s.restart(),s},FadeOutDestroy=function(e,t,i,s){i instanceof Fade$2&&(s=i,i=void 0),void 0===i&&(i=!0);var n={mode:i?1:0,end:0,duration:t};return void 0===s?s=new Fade$2(e,n):s.resetFromJSON(n),s.restart(),s};const IsPlainObject$A=Phaser.Utils.Objects.IsPlainObject,FadeMethods={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",(function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)}))},fadeIn(e,t){if(IsPlainObject$A(e)){var i=e;e=i.duration,t=i.alpha}var s=void 0===this._fade;return this._fade=FadeIn(this,e,t,this._fade),s&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),WaitComplete(this._fade)},isRunningFadeIn(){return this._fade&&"fadein.complete"===this._fade.completeEventName},fadeOutDestroy(e,t){if(IsPlainObject$A(e)){var i=e;e=i.duration,t=i.destroy}var s=void 0===this._fade;return this._fade=FadeOutDestroy(this,e,t,this._fade),s&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),WaitComplete(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),WaitComplete(this._fade)},isRunningFadeOut(){return this._fade&&"fadeout.complete"===this._fade.completeEventName},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}};var methods$y={};Object.assign(methods$y,FadeMethods),methods$y.onInitFade=function(){FadeMethods.onInitFade.call(this);var e=this;this._fade.on("update",(function(){var t=GetParentSizerMethods.getParentSizer(e);t&&t.resetChildAlphaState(e)}))};const GetValue$2M=Phaser.Utils.Objects.GetValue,GetAdvancedValue$2=Phaser.Utils.Objects.GetAdvancedValue,Linear$f=Phaser.Math.Linear;class EaseMove extends EaseValueTaskBase{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){if(super.resetFromJSON(e),this.setMode(GetValue$2M(e,"mode",0)),e&&(e.hasOwnProperty("x")||e.hasOwnProperty("y"))){var t=GetAdvancedValue$2(e,"x",void 0),i=GetAdvancedValue$2(e,"y",void 0);this.setTargetPosition(t,i)}else this.setTargetPosition(e);return this}setMode(e){return"string"==typeof e&&(e=MODE$1[e]),this.mode=e,this}setTargetPosition(e,t){if("number"==typeof e||"number"==typeof t)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=e,this.endY=t;else{var i=e;this.startX=GetAdvancedValue$2(i,"startX",void 0),this.startY=GetAdvancedValue$2(i,"startY",void 0),this.endX=GetAdvancedValue$2(i,"endX",void 0),this.endY=GetAdvancedValue$2(i,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var e=this.parent;return this.hasMoveX&&(e.x=this.startX),this.hasMoveY&&(e.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateTarget(e,t){var i=t.t;t.isOddIteration&&(i=1-i),i=this.easeFn(i),this.hasMoveX&&(e.x=Linear$f(this.startX,this.endX,i)),this.hasMoveY&&(e.y=Linear$f(this.startY,this.endY,i))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}}const MODE$1={stop:0,destroy:1,yoyo:2};var ParseValue=function(e,t){if("number"==typeof e)return e;var i=e[0],s=parseFloat(e.substr(2));switch(i){case"+":return t+s;case"-":return t-s;case"*":return t*s;case"/":return t/s}},EaseMoveTo=function(e,t,i,s,n,a,r){a instanceof EaseMove&&(r=a,a=void 0),void 0===a&&(a=!1);var o={};return o.mode=a?1:0,void 0!==i&&(o.startX=e.x,o.endX=ParseValue(i,e.x)),void 0!==s&&(o.startY=e.y,o.endY=ParseValue(s,e.y)),o.duration=t,o.ease=void 0===n?"Linear":n,void 0===r?r=new EaseMove(e,o):r.resetFromJSON(o),r.restart(),r},EaseMoveFrom=function(e,t,i,s,n,a,r){a instanceof EaseMove&&(r=a,a=void 0),void 0===a&&(a=!1);var o={};return o.mode=a?1:0,void 0!==i&&(o.startX=ParseValue(i,e.x),o.endX=e.x),void 0!==s&&(o.startY=ParseValue(s,e.y),o.endY=e.y),o.duration=t,o.ease=void 0===n?"Linear":n,void 0===r?r=new EaseMove(e,o):r.resetFromJSON(o),r.restart(),r};const IsPlainObject$z=Phaser.Utils.Objects.IsPlainObject,DistanceBetween$6=Phaser.Math.Distance.Between,EaseMoveMethods={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",(function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)}))},moveFrom(e,t,i,s,n){if(IsPlainObject$z(e)){var a=e;t=a.x,i=a.y,e=a.hasOwnProperty("speed")?1e3*DistanceBetween$6(t,i,this.x,this.y)/a.speed:a.duration,s=a.ease}var r=void 0===this._easeMove;return this._easeMove=EaseMoveFrom(this,e,t,i,s,n,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,i,s,n){return this.moveFrom(e,t,i,s,n),WaitComplete(this._easeMove)},moveFromDestroy(e,t,i,s){return this.moveFrom(e,t,i,s,!0),this},moveFromDestroyPromise(e,t,i,s){return this.moveFromDestroy(e,t,i,s),WaitComplete(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,i,s,n){if(IsPlainObject$z(e)){var a=e;t=a.x,i=a.y,e=a.hasOwnProperty("speed")?1e3*DistanceBetween$6(t,i,this.x,this.y)/a.speed:a.duration,s=a.ease}var r=void 0===this._easeMove;return this._easeMove=EaseMoveTo(this,e,t,i,s,n,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,i,s,n){return this.moveTo(e,t,i,s,n),WaitComplete(this._easeMove)},moveToDestroy(e,t,i,s){return this.moveTo(e,t,i,s,!0),this},moveToDestroyPromise(e,t,i,s){return this.moveToDestroy(e,t,i,s,!0),WaitComplete(this._easeMove)},isRunningMoveTo(){return this._easeMove&&"moveto.complete"===this._easeMove.completeEventName},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}};var methods$x={};Object.assign(methods$x,EaseMoveMethods),methods$x.onInitEaseMove=function(){EaseMoveMethods.onInitEaseMove.call(this);var e=this;this._easeMove.on("update",(function(){var t=GetParentSizerMethods.getParentSizer(e);t&&t.resetChildPositionState(e)}))};const GetValue$2L=Phaser.Utils.Objects.GetValue;class ShakePosition extends TickTask{constructor(e,t){super(e,t),this.timer=new Timer$1,this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.timer.resetFromJSON(GetValue$2L(e,"timer")),this.setEnable(GetValue$2L(e,"enable",!0)),this.setMode(GetValue$2L(e,"mode",1)),this.isRunning=GetValue$2L(e,"isRunning",!1),this.setMagnitudeMode(GetValue$2L(e,"magnitudeMode",1)),this.setAxisMode(GetValue$2L(e,"axis",0)),this.setDuration(GetValue$2L(e,"duration",500)),this.setMagnitude(GetValue$2L(e,"magnitude",10)),this.ox=GetValue$2L(e,"ox",void 0),this.oy=GetValue$2L(e,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode:magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(e){this.isShutdown||(super.shutdown(e),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),0===this.mode?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(0===this.mode?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(e){return null==e&&(e=!0),this.enable=e,this}setMode(e){return"string"==typeof e&&(e=MODE[e]),this.mode=e,this}setMagnitudeMode(e){return"string"==typeof e&&(e=MANITUDEMODE[e]),this.magnitudeMode=e,this}setAxisMode(e){return"string"==typeof e&&(e=DIRECTIONNODE$1[e]),this.axisMode=e,this}setDuration(e){return this.duration=e,this}setMagnitude(e){return this.magnitude=e,this}start(e,t){if("number"!=typeof e){var i=e;t=GetValue$2L(i,"magnitude",void 0),e=GetValue$2L(i,"duration",void 0)}return void 0!==t&&this.setMagnitude(t),void 0!==e&&this.setDuration(e),this.timer.setDuration(this.duration).start(),super.start(),this}shake(e,t){return this.start(e,t),this}update(e,t){if(!this.isRunning||!this.enable)return this;var i=this.parent;if(!i.active)return this;if(this.timer.update(e,t),this.timer.isDone)this.backToOrigin(),this.complete();else{void 0===this.ox&&(this.ox=i.x,this.oy=i.y);var s=this.magnitude;1===this.magnitudeMode&&(s*=1-this.timer.t);var n=Math.random()*Math.PI*2,a=this.ox+Math.cos(n)*s,r=this.oy+Math.sin(n)*s;switch(this.axisMode){case 1:i.x=a;break;case 2:i.y=r;break;default:i.x=a,i.y=r}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(void 0===this.ox)return this;var e=this.parent;switch(this.axisMode){case 1:e.x=this.ox;break;case 2:e.y=this.oy;break;default:e.x=this.ox,e.y=this.oy}return this.ox=void 0,this.oy=void 0,this}}const MODE={effect:0,behavior:1},DIRECTIONNODE$1={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},MANITUDEMODE={constant:0,decay:1},IsPlainObject$y=Phaser.Utils.Objects.IsPlainObject;var OnInitShake=function(e,t){t.on("complete",(function(){e.emit("shake.complete",e)}))};const ShakeMethods={shake(e,t,i){if(IsPlainObject$y(e)){var s=e;e=s.duration,t=s.magnitude,i=s.magnitudeMode}return void 0===this._shake&&(this._shake=new ShakePosition(this,{mode:0,magnitudeMode:1}),OnInitShake(this,this._shake)),void 0!==e&&this._shake.setDuration(e),void 0!==t&&this._shake.setMagnitude(t),void 0!==i&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),WaitComplete(this._shake)}},IsPlainObject$x=Phaser.Utils.Objects.IsPlainObject;class EaseData extends ComponentBase{constructor(e,t){super(e,t),this.parent.setDataEnabled(),this.easeTasks={}}complete(e){this.emit(`complete-${e}`,this.parent,this),this.emit("complete",e,this.parent,this)}getEaseTask(e){var t=this.easeTasks[e];return void 0===t&&(t=new EaseValueTask(this.parent),this.easeTasks[e]=t,t.setTarget(this.parent.data.values).on("complete",(function(){this.complete(e)}),this)),t}easeTo(e,t,i,s){if(IsPlainObject$x(e)){var n=e;e=n.key,t=n.value,i=n.duration,s=n.ease;var a=n.speed;void 0===i&&void 0!==a&&(i=Math.abs(t-this.parent.data.values[e])/a*1e3)}return void 0===i&&(i=1e3),void 0===s&&(s="Linear"),this.getEaseTask(e).restart({key:e,to:t,duration:i,ease:s}),this}easeFrom(e,t,i,s){if(IsPlainObject$x(e)){var n=e;e=n.key,t=n.value,i=n.duration,s=n.ease;var a=n.speed;void 0===i&&void 0!==a&&(i=Math.abs(t-this.parent.data.values[e])/a*1e3)}return void 0===i&&(i=1e3),void 0===s&&(s="Linear"),this.getEaseTask(e).restart({key:e,from:t,duration:i,ease:s}),this}stopEase(e,t){void 0===t&&(t=!0);var i=this.easeTasks[e];return i&&i.stop(t),this}stopAll(e){for(var t in void 0===e&&(e=!0),this.easeTasks)this.stopEase(t,e);return this}}var OnInitEaseData=function(e,t){t.on("complete",(function(t){e.emit(`easedata.${t}.complete`,e),e.emit("easedata.complete",t,e)}))};const EaseDataMethods={easeDataTo(e,t,i,s){return this._easeData||(this._easeData=new EaseData(this),OnInitEaseData(this,this._easeData)),this._easeData.easeTo(e,t,i,s),this},easeDataToPromise(e,t,i,s){return this.easeDataTo(e,t,i,s),WaitEvent(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}};var RemoveItem$3=Phaser.Utils.Array.Remove,OnInitDelayCallTimers=function(e){e._delayCallTimers=[],e.once("destroy",(function(){for(var t=e._delayCallTimers,i=0,s=t.length;i<s;i++)t[i].remove();e._delayCallTimers=void 0}))};const DelayCallMethods$2={delayCall(e,t,i){var s;void 0===this._delayCallTimers&&OnInitDelayCallTimers(this);var n=this;return s=this.scene.time.delayedCall(e,(function(){RemoveItem$3(n._delayCallTimers,s),i?t.call(i):t()})),this._delayCallTimers.push(s),this}};var Show=function(e){_hide(e,!1)},Hide=function(e){_hide(e,!0)},IsShown=function(e){return!!e&&!GetSizerConfig$1(e).hidden},_hide=function(e,t){if(e){GetSizerConfig$1(e).hidden=t;var i=GetParent$1(e);i?i.setChildVisible(e,!t):e.setVisible(!t)}};const HideMethods={show(e){return void 0===e&&(e=this),Show(e),this},hide(e){return void 0===e&&(e=this),Hide(e),this},isShow(e){return void 0===e&&(e=this),IsShown(e)}},StateProperties$1=["next","exit","enter"];let FSM$1=class{constructor(e){var t=GetValue$3U(e,"states",void 0);t&&this.addStates(t);var i=GetValue$3U(e,"extend",void 0);if(i)for(var s in i)this.hasOwnProperty(s)&&void 0!==this[s]||(this[s]=i[s]);var n=GetValue$3U(e,"eventEmitter",void 0),a=GetValue$3U(e,"EventEmitterClass",void 0);this.setEventEmitter(n,a),this._stateLock=!1,this.resetFromJSON(e)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(e){this.setEnable(GetValue$3U(e,"enable",!0)),this.start(GetValue$3U(e,"start",void 0));var t=GetValue$3U(e,"init",void 0);return t&&t.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(e){if(this.enable&&!this._stateLock&&this._state!==e){if(this._prevState=this._state,this._state=e,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var t="exit_"+this._prevState,i=this[t];i&&i.call(this),this.emit(t,this)}if(this._stateLock=!1,null!=this._state){var s="enter_"+this._state,n=this[s];n&&n.call(this),this.emit(s,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(e){return this._start=e,this._prevState=void 0,this._state=e,this}goto(e){return null!=e&&(this.state=e),this}next(){var e,t=this["next_"+this.state];return t&&(e="string"==typeof t?t:t.call(this)),this.goto(e),this}get stateProperties(){return StateProperties$1}addState(e,t){"string"!=typeof e&&(e=(t=e).name);for(var i=this.stateProperties,s=0,n=i.length;s<n;s++){var a=i[s],r=t[a];r&&(this[`${a}_${e}`]=r)}return this}addStates(e){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.addState(e[t]);else for(var s in e)this.addState(s,e[s]);return this}runMethod(e,t,i,s,n,a){var r=this[e+"_"+this.state];if(r){var o=arguments.length;switch(o){case 1:return r.call(this);case 2:return r.call(this,t);case 3:return r.call(this,t,i);case 4:return r.call(this,t,i,s);case 5:return r.call(this,t,i,s,n);case 6:return r.call(this,t,i,s,n,a)}for(var l=new Array(o-1),h=1;h<o;h++)l[h-1]=arguments[h];return r.apply(this,l)}}};Object.assign(FSM$1.prototype,EventEmitterMethods);var HasListener=function(e,t,i,s,n){void 0===n&&(n=!1);var a=e._events[t];if(!a)return!1;for(var r=0,o=a.length;r<o;r++){var l=a[r];if(l.fn===i&&l.context===s&&l.once===n)return!0}return!1};const StateProperties=["next","exit","enter","update","preupdate","postupdate"];class FSM extends FSM$1{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(e){return super.resetFromJSON(e),this._scene=GetValue$3U(e,"scene",void 0),this}get stateProperties(){return StateProperties}update(e,t){this.runMethod("update",e,t)}preupdate(e,t){this.runMethod("preupdate",e,t)}postupdate(e,t){this.runMethod("postupdate",e,t)}startUpdate(e){e||(e=this._scene);var t=e.sys.events;return HasListener(t,"update",this.update,this)||(this._scene=e,t.on("update",this.update,this)),this}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(e){e||(e=this._scene);var t=e.sys.events;return HasListener(t,"preupdate",this.preupdate,this)||(this._scene=e,t.on("preupdate",this.preupdate,this)),this}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(e){e||(e=this._scene);var t=e.sys.events;return HasListener(t,"postupdate",this.postupdate,this)||(this._scene=e,t.on("postupdate",this.postupdate,this)),this}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let State$1=class extends FSM{constructor(e,t){super(t),this.parent=e;var i=t.initState||"IDLE";this.start(i)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var e=this.parent;if(e.transitInTime>0){var t=e.runTransitionInCallback();e.delayCall(t,this.next,this)}else this.next()}exit_TRANS_OPNE(){this.parent.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){this.parent.onOpen()}exit_OPEN(){this.parent.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var e=this.parent;if(e.transitOutTime>0){var t=e.runTransitionOutCallback();e.delayCall(t,this.next,this)}else this.next()}exit_TRANS_CLOSE(){this.parent.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){this.parent.onClose()}exit_CLOSE(){}canOpen(){return"IDLE"===this.state||"CLOSE"===this.state}canClose(){return"IDLE"===this.state||"OPEN"===this.state}};var PostStepDelayCall=function(e,t,i,s,n){var a=GetSceneObject(e);return a.time.delayedCall(t,(function(){a.game.events.once("poststep",(function(){i.call(s,n)}))}))};const DelayCallMethods$1={delayCall(e,t,i){return this.delayCallTimer=PostStepDelayCall(this,e,t,i),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},ConfigurationMethods$3={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=NOOP),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=NOOP),this.transitOutCallback=e,this}},OpenMethods$1={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var i=this.transitInTime;return void 0!==t&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=i,this}},CloseMethods={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var i=this.transitOutTime;return void 0!==t&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=i,this}};var methods$w={};Object.assign(methods$w,DelayCallMethods$1,ConfigurationMethods$3,OpenMethods$1,CloseMethods);const GetValue$2K=Phaser.Utils.Objects.GetValue;class OpenCloseTransition extends ComponentBase{constructor(e,t){super(e,t),this.setTransitInTime(GetValue$2K(t,"duration.in",200)),this.setTransitOutTime(GetValue$2K(t,"duration.out",200)),this.setTransitInCallback(GetValue$2K(t,"transitIn")),this.setTransitOutCallback(GetValue$2K(t,"transitOut")),this.oneShotMode=GetValue$2K(t,"destroy",!1),this.delayCallTimer=void 0,this._state=new State$1(this,{eventEmitter:!1,initState:GetValue$2K(t,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(e){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(e))}}Object.assign(OpenCloseTransition.prototype,methods$w);const Rectangle=Phaser.GameObjects.Rectangle;class FullWindowRectangle extends Rectangle{constructor(e,t,i){super(e,0,0,2,2,t,1),this.fullWindow=new FullWindow(this),this.setAlpha(i)}get tint(){return this.fillColor}set tint(e){this.setFillStyle(e,this.fillAlpha)}}const GetValue$2J=Phaser.Utils.Objects.GetValue;class TouchEventStop extends ComponentBase{constructor(e,t){super(e,{eventEmitter:!1}),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.setHitAreaMode(GetValue$2J(e,"hitAreaMode",0)),this.setEnable(GetValue$2J(e,"enable",!0)),this.setStopMode(GetValue$2J(e,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",(function(e,t,i,s){this.stopAllLevels&&s.stopPropagation()}),this).on("pointerup",(function(e,t,i,s){this.stopAllLevels&&s.stopPropagation()}),this).on("pointermove",(function(e,t,i,s){this.stopAllLevels&&s.stopPropagation()}),this).on("pointerover",(function(e,t,i,s){this.stopAllLevels&&s.stopPropagation()}),this).on("pointerout",(function(e,t){this.stopAllLevels&&t.stopPropagation()}),this)}setHitAreaMode(e){"string"==typeof e&&(e=HitAreaMode[e]);var t=this.parent;return t.input&&t.removeInteractive(),0===e?t.setInteractive():t.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(e){return void 0===e&&(e=!0),e?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=e,this}setStopMode(e){return void 0===e&&(e=!0),this.stopAllLevels=e,this}toggleEnable(){return this.setEnable(!this.enable),this}}var HitAreaMode={default:0,fullWindow:1};const GetValue$2I=Phaser.Utils.Objects.GetValue;class Cover extends FullWindowRectangle{constructor(e,t){super(e,GetValue$2I(t,"color",0),GetValue$2I(t,"alpha",.8)),this.touchEventStop=new TouchEventStop(this,{hitAreaMode:1})}}var CreateCover=function(e,t){var i=e.scene,s=new Cover(i,t);return i.add.existing(s),e.isRexContainerLite?(e.pin(s,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(s)):i.children.moveBelow(s,e),s};const DefaultTransitCallbacks={popUp(e,t){void 0!==e._modalScaleSave?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,PopUp$1(e,t)},scaleDown(e,t){ScaleDownDestroy(e,t,void 0,void 0,!1)},fadeIn(e,t){void 0!==e._modalAlphaSave?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,FadeIn(e,t)},fadeOut(e,t){FadeOutDestroy(e,t,!1)}};var DefaultCoverTransitInCallback=function(e,t){void 0!==e._modalAlphaSave?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,FadeIn(e,t,e.alpha)},DefaultCoverTransitOutCallback=function(e,t){FadeOutDestroy(e,t,!1)},IsPointInBounds=function(e,t,i,s,n){return!(!e||s&&!s(e,t,i)||!GetBounds(e,!0).contains(t,i)||n&&!n(e,t,i))};const GetValue$2H=Phaser.Utils.Objects.GetValue;let Modal$3=class extends OpenCloseTransition{constructor(e,t){void 0===t&&(t={}),null==t.transitIn&&(t.transitIn=TransitionMode$1.popUp),null==t.transitOut&&(t.transitOut=TransitionMode$1.scaleDown),t.destroy=GetValue$2H(t,"destroy",!0),super(e,t);var i=GetValue$2H(t,"cover");this.cover=!1!==i?CreateCover(e,i):void 0,this.cover&&(this.setCoverTransitInCallback(GetValue$2H(i,"transitIn",DefaultCoverTransitInCallback)),this.setCoverTransitOutCallback(GetValue$2H(i,"transitOut",DefaultCoverTransitOutCallback)));var s=GetValue$2H(t,"touchOutsideClose",!1),n=GetValue$2H(t,"duration.hold",-1),a=GetValue$2H(t,"timeOutClose",n>=0),r=GetValue$2H(t,"anyTouchClose",!1);GetValue$2H(t,"manualClose",!1)&&(s=!1,r=!1,a=!1),r&&(s=!1),a?this.setDisplayTime(n):this.setDisplayTime(-1),r?this.once("open",this.anyTouchClose,this):s&&this.once("open",this.touchOutsideClose,this),GetValue$2H(t,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(e){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!e&&(this.cover.destroy(),this.cover=void 0),super.shutdown(e))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(e){this.clickOutsideTest&&IsPointInBounds(this.parent,e.worldX,e.worldY)||this.requestClose()}runTransitionInCallback(){var e=super.runTransitionInCallback(),t=this.cover;return t&&this.coverTransitInCallback&&this.coverTransitInCallback(t,e),e}runTransitionOutCallback(){var e=super.runTransitionOutCallback(),t=this.cover;return t&&this.coverTransitOutCallback&&this.coverTransitOutCallback(t,e),e}onOpen(){var e=this.displayTime;e>=0&&this.delayCall(e,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(e){return this.displayTime=e,this}setTransitInCallback(e){switch("string"==typeof e&&(e=TransitionMode$1[e]),e){case TransitionMode$1.popUp:e=DefaultTransitCallbacks.popUp;break;case TransitionMode$1.fadeIn:e=DefaultTransitCallbacks.fadeIn}return super.setTransitInCallback(e),this}setTransitOutCallback(e){switch("string"==typeof e&&(e=TransitionMode$1[e]),e){case TransitionMode$1.scaleDown:e=DefaultTransitCallbacks.scaleDown;break;case TransitionMode$1.fadeOut:e=DefaultTransitCallbacks.fadeOut}return super.setTransitOutCallback(e),this}setCoverTransitInCallback(e){return this.coverTransitInCallback=e,this}setCoverTransitOutCallback(e){return this.coverTransitOutCallback=e,this}};const TransitionMode$1={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Modal$2=function(e,t){var i=new Modal$3(e,t);return i.on("open",(function(){e.emit("modal.open",i)})),i.on("close",(function(t){e.emit("modal.close",t,i)})),e.on("modal.requestClose",i.requestClose,i),i},ModalPromise=function(e,t){var i=Modal$2(e,t);return new Promise((function(e,t){i.once("close",(function(t){e(t)}))}))},ModalClose=function(e,t){e.emit("modal.requestClose",t)},IsFunction=function(e){return e&&"function"==typeof e};const ModalMethods$1={modal(e,t){return IsFunction(e)&&(t=e,e=void 0),void 0===this._modalBehavior&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=Modal$2(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise((function(i,s){t.modal(e,i)}))},modalClose(e){return ModalClose(this,e),this}};var BindEventWithGameObject=function(e,t,i,s,n,a){return void 0===a&&(a=!1),t[a?"once":"on"](i,s,n),e.once("destroy",(function(){t.off(i,s,n)})),e},BindSceneEvent=function(e,t,i,s,n){IsFunction(t)&&(n=s,s=i,i=t,t=this);var a=this.scene.events;return this.bindEvent(t,a,e,i,s,n),this};const BindEventMethods={bindEvent(e,t,i,s,n,a){return"string"==typeof t&&(a=n,n=s,s=i,i=t,t=e,e=this),BindEventWithGameObject(e,t,i,s,n,a),this},bindScenePreupdateEvent(e,t,i,s){return BindSceneEvent.call(this,"preupdate",e,t,i,s),this},bindSceneUpdateEvent(e,t,i,s){return BindSceneEvent.call(this,"update",e,t,i,s),this},bindScenePostupdateEvent(e,t,i,s){return BindSceneEvent.call(this,"postupdate",e,t,i,s),this},bindSceneRenderEvent(e,t,i,s){return BindSceneEvent.call(this,"render",e,t,i,s),this},bindScenePauseEvent(e,t,i,s){return BindSceneEvent.call(this,"pause",e,t,i,s),this},bindSceneResumeEvent(e,t,i,s){return BindSceneEvent.call(this,"resume",e,t,i,s),this},bindSceneSleepEvent(e,t,i,s){return BindSceneEvent.call(this,"sleep",e,t,i,s),this},bindSceneWakeEvent(e,t,i,s){return BindSceneEvent.call(this,"wake",e,t,i,s),this},bindSceneShutdownEvent(e,t,i,s){return BindSceneEvent.call(this,"shutdown",e,t,i,s),this}};var GetPointerWorldXY=function(e,t,i){var s=e.camera;return s?(void 0===i?i={}:!0===i&&(i=globalOut$1),s===t?(i.x=e.worldX,i.y=e.worldY):s.getWorldPoint(e.x,e.y,i),i):null},globalOut$1={},PointerTest=function(e,t,i,s,n){var a,r=e.scene.sys.cameras.main,o=0===e.scrollFactorX&&0===e.scrollFactorY;if(t)return o?i(e,t.x,t.y,s,n):!!(a=GetPointerWorldXY(t,r,!0))&&i(e,a.x,a.y,s,n);for(var l=e.scene.input.manager,h=l.pointersTotal,d=l.pointers,c=0;c<h;c++)if(t=d[c],o){if(i(e,t.x,t.y,s,n))return!0}else{if(!(a=GetPointerWorldXY(t,r,!0)))continue;if(i(e,a.x,a.y,s,n))return!0}return!1},IsPointerInBounds=function(e,t,i,s){return PointerTest(e,t,IsPointInBounds,i,s)},IsInTouching=function(e,t){return(IsGameObject(e)||"string"==typeof e)&&(t=e,e=void 0),void 0===t?t=this:"string"==typeof t&&(t=this.getElement(t)),IsPointerInBounds(t,e)},IsArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},ContainsPoint$1=function(e,t,i,s,n){return IsPointInBounds(e,t,i,GetPreTestCallback(s),n)},IsShownSizer=function(e){return!(e.rexSizer&&e.rexSizer.hidden)},GetPreTestCallback=function(e){return e?function(t,i,s){return!!IsShownSizer(t)&&(e(t,i,s),!0)}:IsShownSizer},PointToChild$2=function(e,t,i,s,n){if(IsFunction(i)||(n=i,i=void 0,s=void 0),void 0===n&&(n=this.sizerChildren?this.sizerChildren:this.isRexContainerLite?this.children:this.list),IsArray(n)){for(var a,r=0,o=n.length;r<o;r++)if(a=n[r],ContainsPoint$1(a,e,t,i,s))return a}else for(var l in n)if(a=n[l],ContainsPoint$1(a,e,t,i,s))return a;return null},CopyState=function(e,t){return void 0===t?t={}:!0===t&&(t=GlobState),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},GlobState={},PreLayoutChild=function(e){this.sizerEventsEnable&&(CopyState(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},LayoutChild=function(e,t,i,s,n,a,r,o){void 0===r&&(r=0),void 0===o&&(o=0),AlignIn(e,t,i,s,n,a),e.x+=r,e.y+=o,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const ALIGN_CENTER$4=Phaser.Display.Align.CENTER;var LayoutBackgrounds=function(){if(void 0!==this.backgroundChildren)for(var e,t,i,s,n,a,r,o=this.backgroundChildren,l=this.left,h=this.top,d=this.width*this.scaleX,c=this.height*this.scaleY,u=0,p=o.length;u<p;u++)(t=(e=o[u]).rexSizer).hidden||(i=t.padding,PreLayoutChild.call(this,e),s=l+i.left*this.scaleX,n=h+i.top*this.scaleY,a=d-(i.left+i.right)*this.scaleX,r=c-(i.top+i.bottom)*this.scaleY,ResizeGameObject(e,a,r),LayoutChild.call(this,e,s,n,a,r,ALIGN_CENTER$4,0,0))};const IsPlainObject$w=Phaser.Utils.Objects.IsPlainObject;var SetDraggable=function(e,t,i){if(IsPlainObject$w(e)){var s=e;e=s.sensor,i=s.target,t=s.draggable}else"boolean"!=typeof t&&(i=t,t=void 0);var n=typeof e;if("string"===n){var a=e;if(!(e=this.getElement(a)))return console.error(`Can get element '${a}'`),this}else void 0!==e&&"object"==n||(t=e,e=this);return void 0===t&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",(function(t,s,n){var a=void 0===i?this.getTopmostSizer():i;a.x+=s-e.x,a.y+=n-e.y,a.emit("sizer.drag",t,s,n)}),this).on("dragstart",(function(e,t,s){(void 0===i?this.getTopmostSizer():i).emit("sizer.dragstart",e,t,s)}),this).on("dragend",(function(e,t,s,n){(void 0===i?this.getTopmostSizer():i).emit("sizer.dragend",e,t,s,n)}),this).on("drop",(function(e,t){(void 0===i?this.getTopmostSizer():i).emit("sizer.drop",e,t)})),e.input._rexUIDragSizer=!0),this};const ClickMethods={onClick(e,t,i,s){return e?("function"==typeof e&&(s=i,i=t,t=e,e=this),void 0===e._click&&(e._click=new Button(e,s)),e._click.on("click",t,i),this):this},offClick(e,t,i){return"function"==typeof e&&(i=t,t=e,e=this),void 0===e._click||e._click.off("click",t,i),this},enableClick(e,t){return"boolean"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this),void 0===e._click||e._click.setEnable(t),this},disableClick(e){return void 0===e&&(e=this),void 0===e._click||e._click.setEnable(!1),this}},GetValue$2G=Phaser.Utils.Objects.GetValue;class ClickOutside extends ComponentBase{constructor(e,t){super(e,t),this._enable=void 0;var i=GetValue$2G(t,"inputConfig",void 0);i&&e.setInteractive(i),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(GetValue$2G(e,"enable",!0)),this.setMode(GetValue$2G(e,"mode",1)),this.setClickInterval(GetValue$2G(e,"clickInterval",100)),this.setDragThreshold(GetValue$2G(e,"threshold",void 0)),this}boot(){var e=this.parent.scene;e.input.on("pointerdown",this.onPress,this),e.input.on("pointerup",this.onRelease,this),e.input.on("pointermove",this.onMove,this)}shutdown(e){if(!this.isShutdown){var t=this.parent.scene;t.input.off("pointerdown",this.onPress,this),t.input.off("pointerup",this.onRelease,this),t.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(e)}}get enable(){return this._enable}set enable(e){if(this._enable!==e){e||this.cancel(),this._enable=e;var t=e?"enable":"disable";this.emit(t,this,this.parent)}}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(e){return"string"==typeof e&&(e=CLICKMODE[e]),this.mode=e,this}setClickInterval(e){return this.clickInterval=e,this}setDragThreshold(e){return this.dragThreshold=e,this}isPointerInside(e){var t=this.parent;return(t.input?IsPointerInHitArea:IsPointerInBounds)(t,e)}onPress(e){this.parent.willRender(e.camera)&&void 0===this.pointer&&(this.isPointerInside(e)||(this.pointer=e,0===this.mode&&(this.isPointerInside(e)||this.click(e.downTime,e))))}onRelease(e){this.parent.willRender(e.camera)&&this.pointer===e&&(1===this.mode&&(this.isPointerInside(e)||this.click(e.upTime,e)),this.pointer=void 0)}onMove(e,t,i,s){this.pointer===e&&void 0!==this.dragThreshold&&1===this.mode&&(e.getDistance()>=this.dragThreshold||this.isPointerInside(e))&&this.cancel()}click(e,t){if(!this.enable)return this;if(void 0===e)return this.emit("clickoutside",this,this.parent,t),this;this.pointer=void 0;var i=this.lastClickTime;return void 0!==i&&e-i<=this.clickInterval||(this.lastClickTime=e,this.emit("clickoutside",this,this.parent,t)),this}cancel(){return this.pointer=void 0,this}}const CLICKMODE={press:0,pointerdown:0,release:1,pointerup:1},ClickOutsideMethods={onClickOutside(e,t,i,s){return e?("function"==typeof e&&(s=i,i=t,t=e,e=this),void 0===e._clickOutside&&(e._clickOutside=new ClickOutside(e,s)),e._clickOutside.on("clickoutside",t,i),this):this},offClickOutside(e,t,i){return"function"==typeof e&&(i=t,t=e,e=this),void 0===e._clickOutside||e._clickOutside.off("clickoutside",t,i),this},enableClickOutside(e,t){return"boolean"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this),void 0===e._clickOutside||e._clickOutside.setEnable(t),this},disableClickOutside(e){return void 0===e&&(e=this),void 0===e._clickOutside||e._clickOutside.setEnable(!1),this}};class Cooldown extends FSM{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(e){return this.cooldownTime=e,this.cooldownMode=void 0!==e,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(e,t){this.remainderTime-=t,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>t?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const GetValue$2F=Phaser.Utils.Objects.GetValue;class InTouching extends ComponentBase{constructor(e,t){super(e,t),this._enable=void 0,this.cooldown=new Cooldown,this.parent.setInteractive(GetValue$2F(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(GetValue$2F(e,"enable",!0)),this.setCooldown(GetValue$2F(e,"cooldown",void 0)),this}boot(){var e=this.parent;e.on("pointerdown",this.onPointIn,this),e.on("pointerover",this.onPointIn,this),e.on("pointerup",this.onPointOut,this),e.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(e){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(e){this.cooldown.setCooldownTime(e)}setCooldown(e){return this.cooldownTime=e,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(e,t,i){this.enable&&e.isDown&&void 0===this.pointer&&(this.pointer=e,this.isInTouching=!0)}onPointOut(e){this.enable&&this.pointer===e&&(this.pointer=void 0,this.isInTouching=!1)}preupdate(e,t){this.cooldown.update(e,t),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const TouchingMethods={isPointerInBounds(e){return void 0===e?e=this:"string"==typeof e&&(e=this.getElement(e)),!!e&&IsPointerInBounds(e)},onTouching(e,t,i,s){return e?("function"==typeof e&&(s=i,i=t,t=e,e=this),void 0===e._inTouching&&(e._inTouching=new InTouching(e,s)),e._inTouching.on("intouch",t,i),this):this},offTouching(e,t,i){return"function"==typeof e&&(i=t,t=e,e=this),void 0===e._inTouching||e._inTouching.off("intouch",t,i),this},onTouchingEnd(e,t,i,s){return e?("function"==typeof e&&(s=i,i=t,t=e,e=this),void 0===e._inTouching&&(e._inTouching=new InTouching(e,s)),e._inTouching.on("touchend",t,i),this):this},offTouchingEnd(e,t,i){return"function"==typeof e&&(i=t,t=e,e=this),void 0===e._inTouching||e._inTouching.off("touchend",t,i),this},enableTouching(e,t){return"boolean"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this),void 0===e._inTouching||e._inTouching.setEnable(t),this},disableTouching(e){return void 0===e&&(e=this),void 0===e._inTouching||e._inTouching.setEnable(!1),this}},HoverMethods={onOver(e,t,i){return e?("function"==typeof e&&(i=t,t=e,e=this),e.setInteractive().on("pointerover",t,i),this):this},onOut(e,t,i){return e?("function"==typeof e&&(i=t,t=e,e=this),e.setInteractive().on("pointerout",t,i),this):this}};var ContainsPoint=function(e,t,i,s){if("parent"===e){for(var n,a=0,r=t.length;a<r;a++)if(n=t[a],ContainsPoint$1(n,i,s))return n.pointToChild?n.pointToChild(i,s):PointToChild$2.call(n,i,s)}else for(a=0,r=t.length;a<r;a++){var o=t[a];if(ContainsPoint$1(o,i,s))return o}return null},EmitChildEvent=function(e,t,i,s,n,a,r,o){var l;if(void 0===a)l=n;else{var h=i[0];if(!h)return;var d=r.camera,c=n+d.scrollX*(h.scrollFactorX-1),u=a+d.scrollY*(h.scrollFactorY-1);l=ContainsPoint(s,i,c,u)}l&&e.emit(t,l,r,o)};const GetValue$2E=Phaser.Utils.Objects.GetValue;var DownChild=function(e){var t=GetValue$2E(e,"down",void 0);!1!==t&&(!0===t&&(t=void 0),this.on("pointerdown",OnDown,this))},OnDown=function(e,t,i,s){var n=this._childrenInteractive;EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}down`,n.targetSizers,n.targetMode,e.worldX,e.worldY,e,s)};const GetValue$2D=Phaser.Utils.Objects.GetValue;var UpChild=function(e){var t=GetValue$2D(e,"up",void 0);!1!==t&&(!0===t&&(t=void 0),this.on("pointerup",OnUp,this))},OnUp=function(e,t,i,s){var n=this._childrenInteractive;EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}up`,n.targetSizers,n.targetMode,e.worldX,e.worldY,e,s)};const GetValue$2C=Phaser.Utils.Objects.GetValue;var OverChild=function(e){var t=GetValue$2C(e,"over",void 0);!1!==t&&(!0===t&&(t=void 0),this.on("pointermove",OnMove$1,this).on("pointerover",OnMove$1,this).on("pointerout",OnOut$1,this))},OnMove$1=function(e,t,i,s){var n=this._childrenInteractive,a=n.targetSizers[0];if(a){var r=e.camera,o=e.worldX+r.scrollX*(a.scrollFactorX-1),l=e.worldY+r.scrollY*(a.scrollFactorY-1),h=ContainsPoint(n.targetMode,n.targetSizers,o,l),d=n.lastOverChild;h&&d&&h===d||(n.lastOverChild=h,EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,n.targetMode,d,void 0,e,s),EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}over`,n.targetSizers,n.targetMode,h,void 0,e,s))}},OnOut$1=function(e,t){var i=this._childrenInteractive,s=i.lastOverChild;i.lastOverChild=null,EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,i.targetMode,s,void 0,e,t)};const GetValue$2B=Phaser.Utils.Objects.GetValue;var ClickChild=function(e){var t=GetValue$2B(e,"click",void 0);if(!1!==t){!0===t&&(t=void 0),void 0===t&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new Button(this,t),this._click.on("click",(function(e,t,s,n){EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,i.targetMode,s.worldX,s.worldY,s,n)}),this)}};const GetValue$2A=Phaser.Utils.Objects.GetValue;class OnePointerTracer extends TickTask{constructor(e,t){var i=GetSceneObject(e);i===e&&(e=void 0),super(i,t),this.gameObject=e,e&&e.setInteractive(GetValue$2A(t,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.setEnable(GetValue$2A(e,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(GetValue$2A(e,"bounds",void 0)):this.setDetectBounds(),this.tracerState=TOUCH0$2,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(e){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.dragCancel(),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setDetectBounds(e){return this.bounds=e,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(e,t){this.enable&&void 0===this.pointer&&(!this.bounds||this.bounds.contains(e.x,e.y))&&this.pointer!==e&&(this.pointer=e,this.pointerCamera=e.camera,this.lastPointer=e,this.movedState=!1,this.tracerState=TOUCH1$2,void 0===this.gameObject&&(this.isTouchingAnyObject=t.length>0),this.onDragStart())}onPointerUp(e){this.enable&&(!this.bounds||this.bounds.contains(e.x,e.y))&&this.pointer===e&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=TOUCH0$2,this.onDragEnd())}onPointerMove(e){if(this.enable&&e.isDown){var t=!this.bounds||this.bounds.contains(e.x,e.y),i=this.pointer===e;!i&&t||(i&&!t?this.onPointerUp(e):(this.movedState||(this.movedState=e.x!==e.downX||e.y!==e.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===TOUCH1$2&&this.onDragEnd(),this.pointer=void 0,this.tracerState=TOUCH0$2,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(e,t){}postUpdate(e,t){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(e){return this.recongizedState=e,this}get state(){return this.recongizedState.state}set state(e){this.recongizedState.state=e}cancel(){return this.state=IDLE$7,this}isPointerInGameObject(e,t,i){var s=this.lastPointer;return!!s&&IsPointerInBounds(e,s,t,i)}}const TOUCH0$2=0,TOUCH1$2=1,IDLE$7="IDLE",GetValue$2z=Phaser.Utils.Objects.GetValue,DistanceBetween$5=Phaser.Math.Distance.Between;class Tap extends OnePointerTracer{constructor(e,t){super(e,t);var i=this,s={states:{IDLE:{enter:function(){i.stop(),i.tapsCount=0,i.x=0,i.y=0,i.worldX=0,i.worldY=0,i.lastPointer=void 0},exit:function(){var e=i.lastPointer;i.x=e.x,i.y=e.y,i.worldX=e.worldX,i.worldY=e.worldY}},BEGIN:{enter:function(){i.start(),i.tapsCount=0,i.emit("tappingstart",i,i.gameObject,i.lastPointer)}},RECOGNIZED:{enter:function(){i.start(),i.emit("tap",i,i.gameObject,i.lastPointer),i.emit(`${i.tapsCount}tap`,i,i.gameObject,i.lastPointer)}}},init:function(){this.state=IDLE$6},eventEmitter:!1};this.setRecongizedStateObject(new FSM(s))}resetFromJSON(e){super.resetFromJSON(e),this.setHoldTime(GetValue$2z(e,"time",250)),this.setTapInterval(GetValue$2z(e,"tapInterval",200)),this.setDragThreshold(GetValue$2z(e,"threshold",9)),this.setTapOffset(GetValue$2z(e,"tapOffset",10));var t=GetValue$2z(e,"taps",void 0);return void 0!==t?this.setTaps(t):(this.setMaxTaps(GetValue$2z(e,"maxTaps",void 0)),this.setMinTaps(GetValue$2z(e,"minTaps",void 0))),this}onDragStart(){switch(this.state){case IDLE$6:this.state=BEGIN$5;break;case BEGIN$5:var e=this.lastPointer;DistanceBetween$5(e.upX,e.upY,e.x,e.y)>this.tapOffset&&(this.state=RECOGNIZED$5,this.state=BEGIN$5);break;case RECOGNIZED$5:this.state=BEGIN$5}}onDragEnd(){this.state===BEGIN$5&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=RECOGNIZED$5))}onDrag(){this.state!==IDLE$6&&this.pointer.getDistance()>this.dragThreshold&&(this.state=IDLE$6)}preUpdate(e,t){if(this.isRunning&&this.enable&&this.state===BEGIN$5){var i=this.lastPointer;i.isDown?e-i.downTime>this.holdTime&&(this.state=IDLE$6):e-i.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=RECOGNIZED$5:this.state=IDLE$6)}}postUpdate(e,t){this.isRunning&&this.enable&&this.state===RECOGNIZED$5&&(this.state=IDLE$6)}get isTapping(){return this.state===RECOGNIZED$5}get isTapped(){return this.isTapping}setHoldTime(e){return this.holdTime=e,this}setTapInterval(e){return this.tapInterval=e,this}setDragThreshold(e){return this.dragThreshold=e,this}setTapOffset(e){return this.tapOffset=e,this}setMaxTaps(e){return this.maxTaps=e,this}setMinTaps(e){return this.minTaps=e,this}setTaps(e,t){return void 0===t&&(t=e),this.setMinTaps(e).setMaxTaps(t),this}}const IDLE$6="IDLE",BEGIN$5="BEGIN",RECOGNIZED$5="RECOGNIZED",GetValue$2y=Phaser.Utils.Objects.GetValue;class Press extends OnePointerTracer{constructor(e,t){super(e,t);var i=this,s={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0,i.lastPointer=void 0},exit:function(){var e=i.lastPointer;i.x=e.x,i.y=e.y,i.worldX=e.worldX,i.worldY=e.worldY}},BEGIN:{enter:function(){i.start()},exit:function(){i.stop()}},RECOGNIZED:{enter:function(){i.emit("pressstart",i,i.gameObject,i.lastPointer)},exit:function(){i.emit("pressend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=IDLE$5},eventEmitter:!1};this.setRecongizedStateObject(new FSM(s))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(GetValue$2y(e,"threshold",9)),this.setHoldTime(GetValue$2y(e,"time",251)),this}onDragStart(){this.state=BEGIN$4,0===this.holdTime&&(this.state=RECOGNIZED$4)}onDragEnd(){this.state=IDLE$5}onDrag(){this.state!==IDLE$5&&this.pointer.getDistance()>this.dragThreshold&&(this.state=IDLE$5)}preUpdate(e,t){this.isRunning&&this.enable&&this.state===BEGIN$4&&e-this.pointer.downTime>=this.holdTime&&(this.state=RECOGNIZED$4)}get isPressing(){return this.state===RECOGNIZED$4}get isPressed(){return this.isPressing}setHoldTime(e){return this.holdTime=e,this}setDragThreshold(e){return this.dragThreshold=e,this}}const IDLE$5="IDLE",BEGIN$4="BEGIN",RECOGNIZED$4="RECOGNIZED",GetValue$2x=Phaser.Utils.Objects.GetValue;class Pan extends OnePointerTracer{constructor(e,t){super(e,t);var i=this,s={states:{IDLE:{},BEGIN:{enter:function(){var e=i.pointer;i.startX=e.x,i.startY=e.y,i.startWorldX=e.worldX,i.startWorldY=e.worldY}},RECOGNIZED:{enter:function(){i.emit("panstart",i,i.gameObject,i.lastPointer)},exit:function(){var e=i.lastPointer;i.endX=e.x,i.endY=e.y;var t=GetPointerWorldXY(e,i.pointerCamera,!0);i.endWorldX=t.x,i.endWorldY=t.y,i.emit("panend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=IDLE$4},eventEmitter:!1};this.setRecongizedStateObject(new FSM(s))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(GetValue$2x(e,"threshold",10)),this}onDragStart(){this.state=BEGIN$3,0===this.dragThreshold&&(this.state=RECOGNIZED$3)}onDragEnd(){this.state=IDLE$4}onDrag(){switch(this.state){case BEGIN$3:if(this.pointer.getDistance()>=this.dragThreshold){this.state=RECOGNIZED$3,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var e=this.pointer;this.x=e.x,this.y=e.y,this.worldX=e.worldX,this.worldY=e.worldY}break;case RECOGNIZED$3:var t=this.pointerCamera,i=this.pointer.position,s=this.pointer.prevPosition;this.dx=i.x-s.x,this.dy=i.y-s.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom,e=this.pointer,this.x=e.x,this.y=e.y;var n=GetPointerWorldXY(e,t,!0);this.worldX=n.x,this.worldY=n.y,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanning(){return this.state===RECOGNIZED$3}get isPanned(){return this.isPanning}setDragThreshold(e){return this.dragThreshold=e,this}}const IDLE$4="IDLE",BEGIN$3="BEGIN",RECOGNIZED$3="RECOGNIZED",DistanceBetween$4=Phaser.Math.Distance.Between,AngleBetween$1=Phaser.Math.Angle.Between,VelocityMethods={getDt:function(){return GetTickDelta(this.scene)},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return DistanceBetween$4(t.x,t.y,e.x,e.y)/(.001*this.getDt())},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return Math.abs(e.x-t.x)/(.001*this.getDt())},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return Math.abs(e.y-t.y)/(.001*this.getDt())},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return AngleBetween$1(t.x,t.y,e.x,e.y)}},DIRMODE$1={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var AngleToDirections=function(e,t,i){switch(void 0===i?i={}:!0===i&&(i=globOut),i.left=!1,i.right=!1,i.up=!1,i.down=!1,e=(e+360)%360,t){case 0:e<180?i.down=!0:i.up=!0;break;case 1:e>90&&e<=270?i.left=!0:i.right=!0;break;case 2:e>45&&e<=135?i.down=!0:e>135&&e<=225?i.left=!0:e>225&&e<=315?i.up=!0:i.right=!0;break;case 3:e>22.5&&e<=67.5?(i.down=!0,i.right=!0):e>67.5&&e<=112.5?i.down=!0:e>112.5&&e<=157.5?(i.down=!0,i.left=!0):e>157.5&&e<=202.5?i.left=!0:e>202.5&&e<=247.5?(i.left=!0,i.up=!0):e>247.5&&e<=292.5?i.up=!0:e>292.5&&e<=337.5?(i.up=!0,i.right=!0):i.right=!0}return i},globOut={};const GetValue$2w=Phaser.Utils.Objects.GetValue,RadToDeg$5=Phaser.Math.RadToDeg;class Swipe extends OnePointerTracer{constructor(e,t){super(e,t);var i=this,s={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var e=i.lastPointer;i.x=e.x,i.y=e.y,i.worldX=e.worldX,i.worldY=e.worldY}},BEGIN:{enter:function(){i.validDrag=!1}},RECOGNIZED:{enter:function(){i.start(),i.updateDirectionStates(),i.emit("swipe",i,i.gameObject,i.lastPointer)},exit:function(){i.stop(),i.clearDirectionStates()}}},init:function(){this.state=IDLE$3},eventEmitter:!1};this.setRecongizedStateObject(new FSM(s)),this.clearDirectionStates()}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(GetValue$2w(e,"threshold",10)),this.setVelocityThreshold(GetValue$2w(e,"velocityThreshold",1e3)),this.setDirectionMode(GetValue$2w(e,"dir","8dir")),this}onDragStart(){this.state=BEGIN$2}onDragEnd(){this.state=IDLE$3}onDrag(){this.state===BEGIN$2&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=RECOGNIZED$2))}postUpdate(e,t){this.isRunning&&this.enable&&this.state===RECOGNIZED$2&&(this.state=IDLE$3)}get isSwiping(){return this.state===RECOGNIZED$2}get isSwiped(){return this.isSwiping}get dragVelocity(){var e;switch(this.dirMode){case 0:e=this.getVelocityY();break;case 1:e=this.getVelocityX();break;default:e=this.getVelocity()}return e}setDragThreshold(e){return this.dragThreshold=e,this}setVelocityThreshold(e){return this.velocityThreshold=e,this}setDirectionMode(e){return"string"==typeof e&&(e=DIRMODE$1[e]),this.dirMode=e,this}updateDirectionStates(){var e=RadToDeg$5(this.getVelocityAngle());return AngleToDirections(e,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Swipe.prototype,VelocityMethods);const IDLE$3="IDLE",BEGIN$2="BEGIN",RECOGNIZED$2="RECOGNIZED",GetValue$2v=Phaser.Utils.Objects.GetValue,SpliceOne$2=Phaser.Utils.Array.SpliceOne,DistanceBetween$3=Phaser.Math.Distance.Between,AngleBetween=Phaser.Math.Angle.Between;class TwoPointersTracer{constructor(e,t){var i=GetSceneObject(e);i===e&&(e=void 0);var s=i.input.manager.pointersTotal-1;s<2&&i.input.addPointer(2-s),this.scene=i,this.gameObject=e,e&&e.setInteractive(GetValue$2v(t,"inputConfig",void 0)),this.setEventEmitter(GetValue$2v(t,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.setEnable(GetValue$2v(e,"enable",!0)),this.bounds=GetValue$2v(e,"bounds",void 0),this.tracerState=TOUCH0$1,this.pointers.length=0,Clear$1(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Clear$1(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.dragCancel(),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(e){if(this.enable&&2!==this.pointers.length&&(!this.bounds||this.bounds.contains(e.x,e.y))&&-1===this.pointers.indexOf(e))switch(this.movedState[e.id]=!1,this.pointers.push(e),this.pointerCamera=e.camera,this.tracerState){case TOUCH0$1:this.tracerState=TOUCH1$1,this.onDrag1Start();break;case TOUCH1$1:this.tracerState=TOUCH2,this.onDrag2Start()}}onPointerUp(e){if(this.enable&&(!this.bounds||this.bounds.contains(e.x,e.y))){var t=this.pointers.indexOf(e);if(-1!==t)switch(delete this.movedState[e.id],SpliceOne$2(this.pointers,t),this.tracerState){case TOUCH1$1:this.tracerState=TOUCH0$1,this.onDrag1End();break;case TOUCH2:this.tracerState=TOUCH1$1,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(e){if(this.enable&&e.isDown){var t=!this.bounds||this.bounds.contains(e.x,e.y),i=-1!==this.pointers.indexOf(e);if(!i&&t);else if(i&&!t)this.onPointerUp(e);else if(this.movedState[e.id]||(this.movedState[e.id]=e.x!==e.downX||e.y!==e.downY),this.movedState[e.id])switch(this.tracerState){case TOUCH1$1:this.onDrag1();break;case TOUCH2:this.onDrag2()}}}dragCancel(){return this.tracerState===TOUCH2&&this.onDrag2End(),this.pointers.length=0,Clear$1(this.movedState),this.tracerState=TOUCH0$1,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==TOUCH2)return 0;var e=this.pointers[0],t=this.pointers[1];return DistanceBetween$3(e.x,e.y,t.x,t.y)}get angleBetween(){if(this.tracerState!==TOUCH2)return 0;var e=this.pointers[0],t=this.pointers[1];return AngleBetween(e.x,e.y,t.x,t.y)}get drag1Vector(){var e=this.pointers[0];if(e&&this.movedState[e.id]){var t=e.position,i=e.prevPosition;tmpDragVector.x=t.x-i.x,tmpDragVector.y=t.y-i.y}else tmpDragVector.x=0,tmpDragVector.y=0;return tmpDragVector}get centerX(){if(this.tracerState!==TOUCH2)return 0;var e=this.pointers[0].position,t=this.pointers[1].position;return(e.x+t.x)/2}get centerY(){if(this.tracerState!==TOUCH2)return 0;var e=this.pointers[0].position,t=this.pointers[1].position;return(e.y+t.y)/2}get prevCenterX(){if(this.tracerState!==TOUCH2)return 0;var e=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,t=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(e.x+t.x)/2}get prevCenterY(){if(this.tracerState!==TOUCH2)return 0;var e=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,t=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(e.y+t.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(e){return this.recongizedState=e,this}get state(){return this.recongizedState.state}set state(e){this.recongizedState.state=e}cancel(){return this.state=IDLE$2,this}isPointer0InGameObject(e,t,i){var s=this.pointers[0];return!!s&&IsPointerInBounds(e,s,t,i)}isPointer1InGameObject(e,t,i){var s=this.pointers[1];return!!s&&IsPointerInBounds(e,s,t,i)}}Object.assign(TwoPointersTracer.prototype,EventEmitterMethods$1);var tmpDragVector={};const TOUCH0$1=0,TOUCH1$1=1,TOUCH2=2,IDLE$2="IDLE",GetValue$2u=Phaser.Utils.Objects.GetValue;class Pinch extends TwoPointersTracer{constructor(e,t){super(e,t);var i=this,s={states:{IDLE:{enter:function(){i.prevDistance=void 0,i.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("pinchstart",i)},exit:function(){i.emit("pinchend",i)}}},init:function(){this.state=IDLE$1},eventEmitter:!1};this.setRecongizedStateObject(new FSM(s))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(GetValue$2u(e,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=BEGIN$1,0===this.dragThreshold&&(this.state=RECOGNIZED$1)}onDrag2End(){this.state=IDLE$1}onDrag2(){switch(this.state){case BEGIN$1:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var e=this.distanceBetween;this.scaleFactor=e/this.prevDistance,this.prevDistance=e,this.state=RECOGNIZED$1}break;case RECOGNIZED$1:e=this.distanceBetween,this.scaleFactor=e/this.prevDistance,this.emit("pinch",this),this.prevDistance=e}}get isPinching(){return this.state===RECOGNIZED$1}get isPinched(){return this.isPinching}setDragThreshold(e){return this.dragThreshold=e,this}}const IDLE$1="IDLE",BEGIN$1="BEGIN",RECOGNIZED$1="RECOGNIZED",RotateAround$3=Phaser.Math.RotateAround;var RotateObjectAround=function(e,t,i,s){return RotateAround$3(e,t,i,s),e.rotation+=s,e},ScreenXYToWorldXY=function(e,t,i,s){return void 0===s?s={}:!0===s&&(s=globalOut),i.getWorldPoint(e,t,s),s},globalOut={},SpinObject=function(e,t){if(!this.isRotation)return this;void 0===t&&(t=this.pointers[0].camera);var i=this.movementCenterX,s=this.movementCenterY,n=ScreenXYToWorldXY(this.centerX,this.centerY,t,!0),a=n.x,r=n.y,o=this.rotation;if(Array.isArray(e))for(var l=e,h=0,d=l.length;h<d;h++)(e=l[h]).x+=i,e.y+=s,RotateObjectAround(e,a,r,o);else e.x+=i,e.y+=s,RotateObjectAround(e,a,r,o);return this};const GetValue$2t=Phaser.Utils.Objects.GetValue,WrapDegrees$1=Phaser.Math.Angle.WrapDegrees,ShortestBetween$1=Phaser.Math.Angle.ShortestBetween,RadToDeg$4=Phaser.Math.RadToDeg,DegToRad$6=Phaser.Math.DegToRad;class Rotate extends TwoPointersTracer{constructor(e,t){super(e,t);var i=this,s={states:{IDLE:{enter:function(){i.prevAngle=void 0,i.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("rotatestart",i)},exit:function(){i.emit("rotateend",i)}}},init:function(){this.state=IDLE},eventEmitter:!1};this.setRecongizedStateObject(new FSM(s))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(GetValue$2t(e,"threshold",0)),this}onDrag2Start(){this.prevAngle=WrapDegrees$1(RadToDeg$4(this.angleBetween)),this.state=BEGIN,0===this.dragThreshold&&(this.state=RECOGNIZED)}onDrag2End(){this.state=IDLE}onDrag2(){switch(this.state){case BEGIN:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var e=WrapDegrees$1(RadToDeg$4(this.angleBetween));this.angle=ShortestBetween$1(this.prevAngle,e),this.prevAngle=e,this.state=RECOGNIZED}break;case RECOGNIZED:e=WrapDegrees$1(RadToDeg$4(this.angleBetween)),this.angle=ShortestBetween$1(this.prevAngle,e),this.prevAngle=e,this.emit("rotate",this)}}get isRotating(){return this.state===RECOGNIZED}get isRotated(){return this.isRotating}get rotation(){return DegToRad$6(this.angle)}setDragThreshold(e){return this.dragThreshold=e,this}}var methods$v={spinObject:SpinObject};Object.assign(Rotate.prototype,methods$v);const IDLE="IDLE",BEGIN="BEGIN",RECOGNIZED="RECOGNIZED",GetValue$2s=Phaser.Utils.Objects.GetValue;var TapChild=function(e){var t=GetValue$2s(e,"tap",void 0);if(!1!==t){!0===t&&(t=void 0);var i=this._childrenInteractive;this._tap=new Tap(this,t),this._tap.on("tap",(function(e,t,s){EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}${e.tapsCount}tap`,i.targetSizers,i.targetMode,e.worldX,e.worldY,s,e),EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}tap`,i.targetSizers,i.targetMode,e.worldX,e.worldY,s,e)}),this)}};const GetValue$2r=Phaser.Utils.Objects.GetValue;var PressChild=function(e){var t=GetValue$2r(e,"press",void 0);if(!1!==t){!0===t&&(t=void 0);var i=this._childrenInteractive;this._press=new Press(this,t),this._press.on("pressstart",(function(e,t,s){EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,i.targetMode,e.worldX,e.worldY,s,e)}),this).on("pressend",(function(e,t,s){EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,i.targetMode,e.worldX,e.worldY,s,e)}),this)}};const GetValue$2q=Phaser.Utils.Objects.GetValue;var SwipeChild=function(e){var t=GetValue$2q(e,"swipe",void 0);if(!1!==t){!0===t&&(t=void 0),void 0===t&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Swipe(this,t),this._swipe.on("swipe",(function(e,t,s){var n=e.left?"left":e.right?"right":e.up?"up":"down";EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}swipe${n}`,i.targetSizers,i.targetMode,e.worldX,e.worldY,s,e),EmitChildEvent(i.eventEmitter,`${i.eventNamePrefix}swipe`,i.targetSizers,i.targetMode,e.worldX,e.worldY,s,e)}),this)}};const GetValue$2p=Phaser.Utils.Objects.GetValue;var SetChildrenInteractive$1=function(e,t){return e.setInteractive(),GetValue$2p(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:GetValue$2p(t,"targets",[e]),targetMode:GetValue$2p(t,"targetMode","parent"),eventEmitter:GetValue$2p(t,"eventEmitter",e),eventNamePrefix:GetValue$2p(t,"inputEventPrefix","child.")},DownChild.call(e,t),UpChild.call(e,t),OverChild.call(e,t),ClickChild.call(e,t),TapChild.call(e,t),PressChild.call(e,t),SwipeChild.call(e,t),e},SetChildrenInteractiveWrap=function(e){return SetChildrenInteractive$1(this,e),this},BroadcastEvent=function(){for(var e=this.getAllChildren([this]),t=0,i=e.length;t<i;t++){var s=e[t];s.emit.apply(s,arguments)}return this},methods$u={getSizerConfig:GetSizerConfig,getChildPrevState:GetChildPrevState,pushIntoBounds:PushIntoBounds,drawBounds:DrawBounds,resolveWidth:ResolveWidth$3,hasWidthWrap:HasWidthWrap$2,resolveChildrenWidth:ResolveChildrenWidth$1,runWidthWrap:RunWidthWrap$3,resolveHeight:ResolveHeight$3,hasHeightWrap:HasHeightWrap$2,resolveChildrenHeight:ResolveChildrenHeight$1,runHeightWrap:RunHeightWrap$3,getChildWidth:GetChildWidth,getChildHeight:GetChildHeight,getExpandedChildWidth:GetExpandedChildWidth$4,getExpandedChildHeight:GetExpandedChildHeight$4,getChildrenWidth:GetChildrenWidth$5,getChildrenHeight:GetChildrenHeight$5,addChildrenMap:AddChildrenMap,addElement:AddChildrenMap,removeChildrenMap:RemoveChildrenMap,getElement:GetElement,getChildIndex:GetChildIndex,getAllChildrenSizers:GetAllChildrenSizers,getChildrenSizers:GetChildrenSizers$5,preLayout:PreLayout$4,layout:Layout,runLayout:RunLayout$1,layoutChildren:LayoutChildren$6,layoutBackgrounds:LayoutBackgrounds,postLayout:PostLayout,setAnchor:SetAnchor,isInTouching:IsInTouching,pointToChild:PointToChild$2,setDraggable:SetDraggable,setChildrenInteractive:SetChildrenInteractiveWrap,broadcastEvent:BroadcastEvent};Object.assign(methods$u,PaddingMethods,AddChildMethods$8,RemoveChildMethods$7,GetParentSizerMethods,methods$z,methods$y,methods$x,ShakeMethods,EaseDataMethods,DelayCallMethods$2,ClickMethods,ClickOutsideMethods,TouchingMethods,HoverMethods,HideMethods,ModalMethods$1,GetShownChildrenMethods,BindEventMethods);const GetValue$2o=Phaser.Utils.Objects.GetValue;let Base$1=class extends ContainerLite{constructor(e,t,i,s,n,a){super(e,t,i,1,1),this.isRexSizer=!0;var r=GetValue$2o(a,"origin",.5),o=GetValue$2o(a,"originX",r),l=GetValue$2o(a,"originY",r);this.setOrigin(o,l),this.setMinSize(s,n),this.setName(GetValue$2o(a,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var h=GetValue$2o(a,"anchor",void 0);h&&this.setAnchor(h),this.setInnerPadding(GetValue$2o(a,"space",0));var d=GetValue$2o(a,"draggable",!1);d&&this.setDraggable(d),this.setSizerEventsEnable(GetValue$2o(a,"sizerEvents",!1)),this.setDirty(!0),GetValue$2o(a,"enableLayer",!1)&&this.enableLayer()}destroy(e){if(this.scene&&!this.ignoreDestroy){if(e)for(var t=this.getAllChildrenSizers([this]),i=0,s=t.length;i<s;i++)t[i].sizerEventsEnable=!1;super.destroy(e),Clear$1(this.backgroundChildren),Clear$1(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(e,t){return this.setMinWidth(e).setMinHeight(t),this}setMinWidth(e){return null==e&&(e=0),this.minWidth=e,this}setMinHeight(e){return null==e&&(e=0),this.minHeight=e,this}setDirty(e){return void 0===e&&(e=!0),this.dirty=e,this}setSizerEventsEnable(e){return void 0===e&&(e=!0),this.sizerEventsEnable=e,this}enableLayoutWarn(e){return void 0===e&&(e=!0),this.layoutWarnEnable=e,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-GetDisplayWidth(this)*this.originX}set left(e){this.x+=e-this.left}alignLeft(e){return this.left=e,this}get right(){return this.left+GetDisplayWidth(this)}set right(e){this.x+=e-this.right}alignRight(e){return this.right=e,this}get centerX(){return this.left+GetDisplayWidth(this)/2}set centerX(e){this.x+=e-this.centerX}alignCenterX(e){return this.centerX=e,this}get top(){return this.y-GetDisplayHeight(this)*this.originY}set top(e){this.y+=e-this.top}alignTop(e){return this.top=e,this}get bottom(){return this.top+GetDisplayHeight(this)}set bottom(e){this.y+=e-this.bottom}alignBottom(e){return this.bottom=e,this}get centerY(){return this.top+GetDisplayHeight(this)/2}set centerY(e){this.y+=e-this.centerY}alignCenterY(e){return this.centerY=e,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var e=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(e,0)}get minInnerHeight(){var e=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(e,0)}};Object.assign(Base$1.prototype,methods$u);var GetChildrenWidth$4=function(){if(this.rexSizer.hidden)return 0;var e,t,i,s=0,n=this.sizerChildren,a=!1;for(var r in n)e=n[r],void 0===(i=this.getChildWidth(e))&&(a=!0),a||(i+=((t=e.rexSizer.padding).left+t.right)*this.scaleX,s=Math.max(i,s));return a?void 0:s+(this.space.left+this.space.right)*this.scaleX},GetChildrenHeight$4=function(){if(this.rexSizer.hidden)return 0;var e,t,i,s=0,n=this.sizerChildren,a=!1;for(var r in n)e=n[r],void 0===(i=this.getChildHeight(e))&&(a=!0),a||(i+=((t=e.rexSizer.padding).top+t.bottom)*this.scaleY,s=Math.max(i,s));return a?void 0:s+(this.space.top+this.space.bottom)*this.scaleY},GetExpandedChildWidth$3=function(e,t){var i;void 0===t&&(t=this.width*this.scaleX);var s=e.rexSizer;if(s.expandWidth){var n=t-(this.space.left+this.space.right)*this.scaleX,a=s.padding;i=n-(a.left+a.right)*this.scaleX}return i},GetExpandedChildHeight$3=function(e,t){var i;void 0===t&&(t=this.height);var s=e.rexSizer;if(s.expandHeight){var n=t-(this.space.top+this.space.bottom)*this.scaleY,a=s.padding;i=n-(a.top+a.bottom)*this.scaleY}return i},GetChildrenSizers$4=function(e){void 0===e&&(e=[]);var t,i=this.sizerChildren;for(var s in i)(t=i[s]).isRexSizer&&e.push(t);return e},FitTo=function(e,t,i,s){if(void 0===i)i=0;else{var n=typeof i;"boolean"===n?(s=i,i=0):"string"===n&&(i=FitModeMap[i])}void 0===s?s={}:!0===s&&(s=globalSize);var a=t.width/e.width,r=t.height/e.height,o=i?Math.max(a,r):Math.min(a,r);return s.width=e.width*o,s.height=e.height*o,s};const FitModeMap={fit:0,FIT:0,envelop:1,ENVELOP:1};var globalSize={},CheckSize=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},LayoutChildren$5=function(){var e,t,i,s,n,a,r,o,l,h,d,c,u=this.innerLeft,p=this.innerTop,g=this.innerWidth,m=this.innerHeight,f=this.sizerChildren;for(var v in f)(e=f[v]).rexSizer.hidden||(i=(t=e.rexSizer).padding,PreLayoutChild.call(this,e),h=this.getExpandedChildWidth(e),d=this.getExpandedChildHeight(e),t.aspectRatio>0&&(sourceSize.width=t.aspectRatio,sourceSize.height=1,targetSize.width=h,targetSize.height=d,h=(c=FitTo(sourceSize,targetSize,"FIT",!0)).width,d=c.height),e.isRexSizer?(e.runLayout(this,h,d),CheckSize(e,this)):ResizeGameObject(e,h,d),s=u+i.left*this.scaleX,a=g-(i.left+i.right)*this.scaleX,n=p+i.top*this.scaleY,r=m-(i.top+i.bottom)*this.scaleY,void 0===h&&(h=GetDisplayWidth(e)),void 0===d&&(d=GetDisplayHeight(e)),o=(t.alignOffsetX+t.alignOffsetOriginX*h)*this.scaleX,l=(t.alignOffsetY+t.alignOffsetOriginY*d)*this.scaleY,LayoutChild.call(this,e,s,n,a,r,t.align,o,l))},sourceSize={},targetSize={};const IsPlainObject$v=Phaser.Utils.Objects.IsPlainObject,GetValue$2n=Phaser.Utils.Objects.GetValue,ALIGN_CENTER$3=Phaser.Display.Align.CENTER,UUID$3=Phaser.Utils.String.UUID;var Add$7=function(e,t,i,s,n,a,r,o,l,h){var d,c;AddChild$1.call(this,e),IsPlainObject$v(t)&&(t=GetValue$2n(u=t,"key",void 0),i=GetValue$2n(u,"align",ALIGN_CENTER$3),s=GetValue$2n(u,"padding",0),n=GetValue$2n(u,"expand",!0),e.isRexSizer||(a=GetValue$2n(u,"minWidth",e._minWidth),r=GetValue$2n(u,"minHeight",e._minHeighted)),o=GetValue$2n(u,"offsetX",0),l=GetValue$2n(u,"offsetY",0),d=GetValue$2n(u,"offsetOriginX",0),c=GetValue$2n(u,"offsetOriginY",0),h=GetValue$2n(u,"aspectRatio",0));var u,p=void 0!==t;return p||(t=UUID$3()),"string"==typeof i&&(i=AlignConst[i]),void 0===i&&(i=ALIGN_CENTER$3),void 0===s&&(s=0),void 0===n&&(n=!0),e.isRexSizer||(void 0===a&&(a=e._minWidth),void 0===r&&(r=e._minHeight)),void 0===o&&(o=0),void 0===l&&(l=0),void 0===d&&(d=0),void 0===c&&(c=0),void 0===h?h=0:!0===h&&(h=GetDisplayWidth(e)/GetDisplayHeight(e)),h>0&&(n=!0,void 0===a&&(a=0),void 0===r&&(r=0)),(u=this.getSizerConfig(e)).align=i,u.padding=GetBoundsConfig$1(s),IsPlainObject$v(n)?(u.expandWidth=GetValue$2n(n,"width",!1),u.expandHeight=GetValue$2n(n,"height",!1)):(u.expandWidth=n,u.expandHeight=n),e.isRexSizer||(u.expandWidth&&(e.minWidth=void 0===a?GetDisplayWidth(e):a),u.expandHeight&&(e.minHeight=void 0===r?GetDisplayHeight(e):r)),u.alignOffsetX=o,u.alignOffsetY=l,u.alignOffsetOriginX=d,u.alignOffsetOriginY=c,u.aspectRatio=h,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,p&&this.addChildrenMap(t,e),this};const AddChildMethods$7={add:Add$7},ContainerClear=ContainerLite.prototype.clear;var ClearChildren=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t,i=!e&&this.sizerEventsEnable;if(i&&(t=this.getChildren([])),ContainerClear.call(this,e),i)for(var s,n=0,a=t.length;n<a;n++)(s=t[n]).emit("sizer.remove",s,this),this.emit("remove",s,this);return this};const RemoveChildMethods$6={remove(e,t){var i;if("string"==typeof e){if(i=e,!(e=this.sizerChildren[i]))return this}else{if(this.getParentSizer(e)!==this)return this;i=this.childToKey(e)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),RemoveChild.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return ClearChildren.call(this,e),this}};var methods$t={getChildrenWidth:GetChildrenWidth$4,getChildrenHeight:GetChildrenHeight$4,getExpandedChildWidth:GetExpandedChildWidth$3,getExpandedChildHeight:GetExpandedChildHeight$3,getChildrenSizers:GetChildrenSizers$4,layoutChildren:LayoutChildren$5};Object.assign(methods$t,AddChildMethods$7,RemoveChildMethods$6);var IndexOf=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var i in e)if(e[i]===t)return i;return null};const IsPlainObject$u=Phaser.Utils.Objects.IsPlainObject,GetValue$2m=Phaser.Utils.Objects.GetValue;class OverlapSizer extends Base$1{constructor(e,t,i,s,n,a){IsPlainObject$u(t)?(t=GetValue$2m(a=t,"x",0),i=GetValue$2m(a,"y",0),s=GetValue$2m(a,"width",void 0),n=GetValue$2m(a,"height",void 0)):IsPlainObject$u(s)&&(s=GetValue$2m(a=s,"width",void 0),n=GetValue$2m(a,"height",void 0)),super(e,t,i,s,n,a),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(e){if("string"!=typeof e)return IndexOf(this.sizerChildren,e);var t=e;return this.sizerChildren.hasOwnPropery(t)?t:null}}Object.assign(OverlapSizer.prototype,methods$t);var GetDistance=Phaser.Math.Distance.Between,IsLocalPointInKnob=function(e,t,i){var s=e.width/2;return GetDistance(s,s,t,i)<=s};const GetAngle$1=Phaser.Math.Angle.Between,NormalizeAngle=Phaser.Math.Angle.Normalize;var OnTouchPad=function(e,t,i){if(this.enable&&e.isDown){var s=this.sizerChildren.knob;if(IsLocalPointInKnob(s,t,i)){var n=s.width/2,a=s.startAngle,r=GetAngle$1(n,n,t,i),o=s.anticlockwise?a-r:r-a,l=NormalizeAngle(o)/(2*Math.PI);this.stopEaseValue(),0===this.easeValueDuration||Math.abs(this.value-l)<.1?this.value=l:this.easeValueTo(l)}}},InstallEvents$1=function(){this.sizerChildren.knob.on("pointerdown",OnTouchPad,this).on("pointermove",OnTouchPad,this).setInteractive()};const GetAngle=Phaser.Math.Angle.Between,WrapAngle=Phaser.Math.Angle.Wrap;var OnPointerDown=function(e,t,i){if(this.enable&&!this.panPointer){var s=this.sizerChildren.knob;IsLocalPointInKnob(s,t,i)&&OnPanStart.call(this,e)}},OnPointerMove=function(e,t,i){if(this.enable&&e.isDown){var s=this.sizerChildren.knob;switch(this.panState){case TOUCH0:IsLocalPointInKnob(s,t,i)&&OnPanStart.call(this,e);break;case TOUCH1:IsLocalPointInKnob(s,t,i)?OnPan.call(this):OnPanEnd.call(this)}}},OnPointerUp=function(e,t,i){this.enable&&this.panPointer===e&&OnPanEnd.call(this)},OnPanStart=function(e){this.panPointer=e,this.panState=TOUCH1},OnPanEnd=function(){this.panPointer=void 0,this.panState=TOUCH0},OnPan=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,s=GetAngle(i.x,i.y,e.x,e.y),n=GetAngle(i.x,i.y,t.x,t.y),a=i.anticlockwise?s-n:n-s,r=WrapAngle(a)/(2*Math.PI);this.stopEaseValue(),this.value+=r};const TOUCH0=0,TOUCH1=1;var InstallEvents=function(){this.sizerChildren.knob.on("pointerdown",OnPointerDown,this).on("pointermove",OnPointerMove,this).on("pointerup",OnPointerUp,this).setInteractive(),this.panPointer=void 0,this.panState=TOUCH0},SetTextFormatCallback=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},GetFormatText=function(e){return void 0===e&&(e=this.value),this.textFormatCallbackScope?this.textFormatCallback(e):this.textFormatCallback.call(this.textFormatCallbackScope,e)},UpdateText=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(GetFormatText.call(this,e)),t.layout&&t.layout()),this};const TextObjectMethods={setTextFormatCallback:SetTextFormatCallback,getFormatText:GetFormatText,updateText:UpdateText},GetValue$2l=Phaser.Utils.Objects.GetValue,SnapTo$3=Phaser.Math.Snap.To;class Knob extends(ProgressBase(OverlapSizer)){constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexKnob",this.bootProgressBase(t);var i=GetValue$2l(t,"background",void 0),s=GetValue$2l(t,"text",void 0);i&&this.addBackground(i),s&&(t.textColor=void 0,t.textStrokeColor=void 0,this.setTextFormatCallback(GetValue$2l(t,"textFormatCallback",void 0),GetValue$2l(t,"textFormatCallbackScope",void 0)),t.textFormatCallback=void 0,t.textFormatCallbackScope=void 0);var n=new CircularProgress(e,t);n.setDepth(GetValue$2l(t,"knobDepth",0)),n._value=-1,e.add.existing(n),this.add(n,"knob"),s&&(this.add(s,"text","center",0,!1),e.children.moveBelow(n,s)),this.addChildrenMap("background",i),this.addChildrenMap("knob",n),this.addChildrenMap("text",s),this.setEnable(GetValue$2l(t,"enable",void 0)),this.setGap(GetValue$2l(t,"gap",void 0)),this.setValue(GetValue$2l(t,"value",0),GetValue$2l(t,"min",void 0),GetValue$2l(t,"max",void 0));var a=GetValue$2l(t,"input",0);switch("string"==typeof a&&(a=INPUTMODE$1[a]),a){case 0:InstallEvents.call(this);break;case 1:InstallEvents$1.call(this)}}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setGap(e){return this.gap=e,this}get value(){return this.sizerChildren.knob.value}set value(e){void 0!==this.gap&&(e=SnapTo$3(e,this.gap));var t=this.value;this.sizerChildren.knob.value=e;var i=this.value;t!==i&&(this.updateText(),this.eventEmitter.emit("valuechange",i,t,this.eventEmitter))}}const INPUTMODE$1={pan:0,drag:0,click:1,none:-1};Object.assign(Knob.prototype,TextObjectMethods),ObjectFactory.register("knob",(function(e){var t=new Knob(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Knob",Knob);const ShapeClasses={arc:Arc,circle:Circle,curve:Curve,ellipse:Ellipse,line:Line,lines:Lines,rectangle:Rectangle$2,roundRectangle:RoundRectangle,triangle:Triangle$1},GetValue$2k=Phaser.Utils.Objects.GetValue,IsPlainObject$t=Phaser.Utils.Objects.IsPlainObject,ClearAll=function(){for(var e=this.getShapes(),t=0,i=e.length;t<i;t++)e[t].lineStyle().fillStyle()},ShapesUpdateMethods={createShape(e,t){var i=new(0,ShapeClasses[e]);return t&&i.setName(t),i},buildShapes(e){var t=GetValue$2k(e,"create",void 0);if(IsPlainObject$t(t)){var i=t;for(var s in i){var n=i[s];switch(typeof n){case"number":for(var a=0;a<n;a++)this.addShape(this.createShape(s));break;case"string":this.addShape(this.createShape(s,n));break;default:for(var r=n,o=(a=0,r.length);a<o;a++)this.addShape(this.createShape(s,r[a]))}}}else if(Array.isArray(t))for(a=0,o=(i=t).length;a<o;a++){var l=i[a];this.addShape(this.createShape(l.type,l.name))}else"function"==typeof t&&t.call(this);this.setUpdateShapesCallback(GetValue$2k(e,"update"))},setUpdateShapesCallback(e){return void 0===e&&(e=ClearAll),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}},GetValue$2j=Phaser.Utils.Objects.GetValue,IsPlainObject$s=Phaser.Utils.Objects.IsPlainObject;class CustomShapes extends BaseShapes{constructor(e,t,i,s,n,a){IsPlainObject$s(t)&&(t=GetValue$2j(a=t,"x",0),i=GetValue$2j(a,"y",0),s=GetValue$2j(a,"width",2),n=GetValue$2j(a,"height",2)),super(e,t,i,s,n),this.type=GetValue$2j(a,"type","rexCustomShapes"),this.buildShapes(a)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(e,t,i,s){return"boolean"==typeof i&&(s=i,i=void 0),WorldXYToGameObjectLocalXY(this,e,t,i,s)}}Object.assign(CustomShapes.prototype,ShapesUpdateMethods),ObjectFactory.register("customShapes",(function(e,t,i,s,n){var a=new CustomShapes(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.CustomShapes",CustomShapes);const GetValue$2i=Phaser.Utils.Objects.GetValue,IsPlainObject$r=Phaser.Utils.Objects.IsPlainObject;class CustomProgress extends(ProgressBase(CustomShapes)){constructor(e,t,i,s,n,a){IsPlainObject$r(t)&&(t=GetValue$2i(a=t,"x",0),i=GetValue$2i(a,"y",0),s=GetValue$2i(a,"width",2),n=GetValue$2i(a,"height",2)),void 0===a&&(a={}),a.type||(a.type="rexCustomProgress"),super(e,t,i,s,n,a),this.bootProgressBase(a),this.setValue(GetValue$2i(a,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}ObjectFactory.register("customProgress",(function(e,t,i,s,n){var a=new CustomProgress(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.CustomProgress",CustomProgress);var Start=function(e){return this.easeValueTask||(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),void 0!==e&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning||(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty()),this},Stop$1=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},Pause=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},Resume=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this};const EaseValueMethods={start:Start,stop:Stop$1,pause:Pause,resume:Resume},GetValue$2h=Phaser.Utils.Objects.GetValue;class Base extends BaseShapes{constructor(e,t){super(e,GetValue$2h(t,"x",0),GetValue$2h(t,"y",0),GetValue$2h(t,"width",64),GetValue$2h(t,"height",64)),this.resetFromConfig(t,!0),this.buildShapes(t),GetValue$2h(t,"start",!0)&&this.start()}resetFromConfig(e,t){var i;return void 0===t&&(t=!1),i=t?1e3:this.duration,this.setDuration(GetValue$2h(e,"duration",i)),i=t?"Linear":this.ease,this.setEase(GetValue$2h(e,"ease",i)),i=t?0:this.delay,this.setDelay(GetValue$2h(e,"delay",i)),i=t?0:this.repeatDelay,this.setRepeatDelay(GetValue$2h(e,"repeatDelay",i)),i=t?16777215:this.color,this.setColor(GetValue$2h(e,"color",i)),i=t?0:this.value,this.setValue(GetValue$2h(e,"value",i)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(e){this.isColorChanged=this.isColorChanged||this._color!==e,this.dirty=this.dirty||this.isColorChanged,this._color=e,this.setShapesColor(e)}setColor(e){return this.color=e,this}setShapesColor(e){}get value(){return this._value}set value(e){e=Phaser.Math.Clamp(e,0,1),this.dirty=this.dirty||this._value!=e,this._value=e}setValue(e){return this.value=e,this}setDuration(e){return this.duration=e,this}setDelay(e){return this.delay=e,this}setRepeatDelay(e){return this.repeatDelay=e,this}setEase(e){return this.ease=e,this}get isRunning(){return!!this.tweenTask&&this.tweenTask.isRunning}}Object.assign(Base.prototype,EaseValueMethods);const DegToRad$5=Phaser.Math.DegToRad,Linear$e=Phaser.Math.Linear,ExpoIn$4=Phaser.Math.Easing.Expo.In,DIRMAP={right:0,down:1,left:2,up:3};var ArrowPolygon=function(e,t,i,s,n,a,r,o,l,h,d){var c=Transform$1(t,0,s,n,a,r,o,l,h,d);e.startAt(c.x,c.y);var u=Transform$1(i,0,s,n,a,r,o,l,h,d);e.lineTo(u.x,u.y);var p=Transform$1(i,i,s,n,a,r,o,l,h,d);e.lineTo(p.x,p.y);var g=Transform$1(0,i,s,n,a,r,o,l,h,d);e.lineTo(g.x,g.y);var m=Transform$1(0,t,s,n,a,r,o,l,h,d);e.lineTo(m.x,m.y);var f=Transform$1(t,t,s,n,a,r,o,l,h,d);e.lineTo(f.x,f.y),e.close()},GlobPoint={},Transform$1=function(e,t,i,s,n,a,r,o,l,h){var d=e*i,c=t*s;return GlobPoint.x=r*d+o*c+n,GlobPoint.y=l*d+h*c+a,GlobPoint};const ArrowUpdateShapesMethods={setDirection(e){return"string"==typeof e&&(e=DIRMAP[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new Lines)},updateShapes(){var e,t,i,s,n,a;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var r=DegToRad$5(315);i=Math.cos(r),s=Math.sin(r);var o=DegToRad$5(45);n=Math.cos(o),a=Math.sin(o);break;case 3:e=this.centerX,t=this.centerY+this.radius,r=DegToRad$5(135),i=Math.cos(r),s=Math.sin(r),o=DegToRad$5(225),n=Math.cos(o),a=Math.sin(o);break;case 2:e=this.centerX+this.radius,t=this.centerY,r=DegToRad$5(225),i=Math.cos(r),s=Math.sin(r),o=DegToRad$5(315),n=Math.cos(o),a=Math.sin(o);break;default:e=this.centerX-this.radius,t=this.centerY,r=DegToRad$5(45),i=Math.cos(r),s=Math.sin(r),o=DegToRad$5(135),n=Math.cos(o),a=Math.sin(o)}for(var l=this.radius/7,h=this.getShapes(),d=0,c=h.length;d<c;d++){var u=h[d],p=(this.value+.1*(c-d))%1;p=ExpoIn$4(Yoyo$1(p));var g=Linear$e(.25,1,p);u.fillStyle(this.color,g);var m=3*d+1;ArrowPolygon(u,m,m+2,l,l,e,t,i,s,n,a)}}},Linear$d=Phaser.Math.Linear,AudioUpdateShapeMethods={buildShapes(){for(var e=0;e<4;e++)this.addShape(new Line);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=t+i,a=2*i,r=this.getShapes(),o=r.length,l=2*i/o,h=.7*l;if(void 0===this.prevValue||this.prevValue>this.value)for(var d=0;d<o;d++){var c=r[d],u=void 0===this.prevValue?Math.random():c.getData("to");c.setData("from",u).setData("to",Math.random())}for(this.prevValue=this.value,d=0;d<o;d++){u=(c=r[d]).getData("from");var p=c.getData("to"),g=Linear$d(u,p,this.value)*a,m=s+l*(d+.5);c.lineStyle(h,this.color,1).setP0(m,n).setP1(m,n-g)}}},Linear$c=Phaser.Math.Linear,BallUpdateShapeMethods={buildShapes(){for(var e=0;e<3;e++)this.addShape(new Circle)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=.1*i,n=Math.ceil(.25*s),a=1-Yoyo$1(this.value),r=Linear$c(.3,.9,a)*i,o=this.getShapes(),l=0,h=o.length;l<h;l++){var d=o[l],c=(a=(this.value+l/h)%1,2*Math.PI*a);d.lineStyle(n,this.color).setRadius(s).setCenterPosition(e+Math.cos(c)*r,t+Math.sin(c)*r)}}},Linear$b=Phaser.Math.Linear,ExpoIn$3=Phaser.Math.Easing.Expo.In,BarsUpdateShapeMethods={buildShapes(){for(var e=0;e<5;e++){var t=new Line;this.addShape(t);var i=Yoyo$1(e/4)/2;t.setData("offset",i)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=2*i,a=this.getShapes(),r=a.length,o=2*i/r,l=.7*o,h=0;h<r;h++){var d=a[h],c=(this.value+d.getData("offset"))%1;c=ExpoIn$3(Yoyo$1(c));var u=Linear$b(.4,1,c)*n,p=s+o*(h+.5);d.lineStyle(l,this.color,1).setP0(p,t-u/2).setP1(p,t+u/2)}}},BoxUpdateShapeMethods={buildShapes(){this.addShape((new Lines).setName("border")),this.addShape((new Lines).setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,i=.7*this.radius,s=e-i,n=t-i,a=2*i;if(this.getShape("border").lineStyle(2,this.color,1).startAt(s,n).lineTo(a,0,!0).lineTo(0,a,!0).lineTo(-a,0,!0).lineTo(0,-a,!0).close(),this.value<.5){var r=a*(2*(.5-this.value));this.getShape("fill").fillStyle(this.color,1).startAt(s,n).lineTo(a,0,!0).lineTo(0,r,!0).lineTo(-a,0,!0).lineTo(0,-r,!0).close()}else{var o=2*(this.value-.5)*180;this.getShape("border").rotateAround(e,t,o),this.getShape("fill").fillStyle().lineStyle()}}},RadToDeg$3=Phaser.Math.RadToDeg,WrapDegrees=Phaser.Math.Angle.WrapDegrees,WrapRad=Phaser.Math.Angle.Wrap,ShortestBetween=Phaser.Math.Angle.ShortestBetween,DegToRad$4=Phaser.Math.DegToRad,Rad270=Phaser.Math.DegToRad(270),ClockUpdateShapeMethods={buildShapes(){this.addShape((new Circle).setName("border")),this.addShape((new Line).setName("minuteHand")),this.addShape((new Line).setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s/2,a=.8*i,r=.5*i,o=this.minuteHandAngle;this.minuteHandAngle=2*Math.PI*this.value;var l=WrapDegrees(RadToDeg$3(o)),h=WrapDegrees(RadToDeg$3(this.minuteHandAngle)),d=ShortestBetween(l,h);this.hourHandAngle=WrapRad(this.hourHandAngle+DegToRad$4(d)/12),this.getShape("border").lineStyle(s,this.color).setRadius(n).setCenterPosition(e,t);var c=this.minuteHandAngle+Rad270;this.getShape("minuteHand").lineStyle(s,this.color).setP0(e,t).setP1(e+Math.cos(c)*a,t+Math.sin(c)*a),c=this.hourHandAngle+Rad270,this.getShape("hourHand").lineStyle(s,this.color).setP0(e,t).setP1(e+Math.cos(c)*r,t+Math.sin(c)*r)}},Linear$a=Phaser.Math.Linear,ExpoIn$2=Phaser.Math.Easing.Expo.In,RowNum$1=2,ColNum$1=2,CubeUpdateShapeMethods={buildShapes(){for(var e=RowNum$1*ColNum$1,t=0;t<e;t++){var i=new Line;this.addShape(i)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=t-i,a=2*i/ColNum$1,r=2*i/RowNum$1,o=this.getShapes(),l=o.length,h=0;h<l;h++){var d=s+a*(h%ColNum$1+.5),c=n+r*(Math.floor(h/RowNum$1)+.5),u=o[h],p=(this.value+.1*(l-h))%1;p=ExpoIn$2(Yoyo$1(p));var g=(l-h)/l,m=Linear$a(.7,1,p)*r,f=Linear$a(.7,1,p)*a;u.lineStyle(f,this.color,g).setP0(d-m/2,c).setP1(d+m/2,c)}}},Linear$9=Phaser.Math.Linear,DotsUpdateShapeMethods={buildShapes(){for(var e=0;e<3;e++){var t=new Circle;this.addShape(t);var i=Yoyo$1(e/2)/2;t.setData("offset",i)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=this.getShapes(),a=n.length,r=2*i/a,o=r/2,l=0;l<a;l++){var h=n[l],d=(this.value+h.getData("offset"))%1;d=Yoyo$1(d);var c=Linear$9(.25,1,d),u=Linear$9(.5,1,d)*o;h.fillStyle(this.color,c).setRadius(u).setCenterPosition(s+r*(l+.5),t)}}},Linear$8=Phaser.Math.Linear,ExpoIn$1=Phaser.Math.Easing.Expo.In,FacebookUpdateShapeMethods={buildShapes(){for(var e=0;e<3;e++){var t=new Line;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=this.getShapes(),a=n.length,r=2*i/a,o=2*i,l=0;l<a;l++){var h=n[l],d=(this.value+.1*(a-l))%1;d=ExpoIn$1(Yoyo$1(d));var c=(l+1)/a,u=Linear$8(.7,1,d)*o,p=Linear$8(.7,1,d)*r,g=s+r*(l+.5);h.lineStyle(p,this.color,c).setP0(g,t-u/2).setP1(g,t+u/2)}}},Linear$7=Phaser.Math.Linear,RowNum=3,ColNum=3,GridUpdateShapeMethods={buildShapes(){for(var e=RowNum*ColNum,t=0;t<e;t++){var i=new Circle;this.addShape(i),i.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=this.isInitialize||this.isSizeChanged,n=e-i,a=t-i,r=2*i/ColNum,o=2*i/RowNum,l=Math.min(r,o)/2*.8,h=this.getShapes(),d=0,c=h.length;d<c;d++){var u=n+r*(d%ColNum+.5),p=a+o*(Math.floor(d/RowNum)+.5),g=h[d],m=(this.value+g.getData("offset"))%1;m=Yoyo$1(m),g.fillStyle(this.color,Linear$7(.25,1,m)),s&&g.setRadius(l).setCenterPosition(u,p)}this.isInitialize=!1}},HeartsUpdateShapeMethods={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Lines)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s,a=.6*n,r=.7*n,o=1.2*n,l=this.getShapes(),h=0,d=l.length;h<d;h++){var c=l[h],u=(this.value+h/d)%1,p=Yoyo$1(u),g=e,m=t-15*u,f=n*u,v=a*u,b=r*u,y=o*u;c.lineStyle(s,this.color,p).startAt(g,m).cubicBezierTo(g,m-v,g-f,m-v,g-f,m).cubicBezierTo(g-f,m+v,g,m+b,g,m+y).cubicBezierTo(g,m+b,g+f,m+v,g+f,m).cubicBezierTo(g+f,m-v,g,m-v,g,m).close()}}},Linear$6=Phaser.Math.Linear,IosUpdateShapeMethods={buildShapes(){for(var e=0;e<12;e++)this.addShape(new Line);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.isInitialize||this.isSizeChanged,s=this.radius,n=s/2,a=Math.ceil(s/20),r=this.getShapes(),o=0,l=r.length;o<l;o++){var h=r[o],d=o/l,c=2*Math.PI*d,u=Linear$6(.25,1,(1-this.value+d)%1);h.lineStyle(a,this.color,u),i&&h.setP0(e+Math.cos(c)*n,t+Math.sin(c)*n).setP1(e+Math.cos(c)*s,t+Math.sin(c)*s)}this.isInitialize=!1}},OribitUpdateShapeMethods={buildShapes(){this.addShape((new Circle).setName("track")),this.addShape((new Circle).setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=.9*i,n=Math.ceil(s/25),a=.1*i,r=2*Math.PI*this.value;this.getShape("track").lineStyle(n,this.color,.7).setRadius(s).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(a).setCenterPosition(e+Math.cos(r)*s,t+Math.sin(r)*s)}},OvalUpdateShapeMethods={buildShapes(){this.addShape((new Circle).setName("track")),this.addShape((new Arc).setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s/2;this.getShape("track").lineStyle(s,this.color,.5).setRadius(n).setCenterPosition(e,t);var a=360*this.value,r=a+60;this.getShape("arc").lineStyle(s,this.color,1).setRadius(n).setCenterPosition(e,t).setAngle(a,r)}},Linear$5=Phaser.Math.Linear,PieUpdateShapeMethods={buildShapes(){for(var e=0;e<4;e++){var t=(new Arc).setPie();this.addShape(t),t.setData("speed",Linear$5(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e,t=this.centerX,i=this.centerY,s=this.radius;void 0!==this.prevValue&&(e=this.value-this.prevValue,this.prevValue>this.value&&(e+=1));for(var n=this.getShapes(),a=0,r=n.length;a<r;a++){var o=n[a],l=(a+1)/r;if(void 0===this.prevValue){var h=90+(d=a/r*360);o.fillStyle(this.color,l).setRadius(s).setCenterPosition(t,i).setAngle(d,h).setData("angle",d)}else{var d=o.getData("angle")+o.getData("speed")*e;h=90+(d%=360),o.fillStyle(this.color,l).setRadius(s).setCenterPosition(t,i).setAngle(d,h).setData("angle",d)}}this.prevValue=this.value}},PuffUpdateShapeMethods={buildShapes(){this.addShape(new Circle)},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=i*this.value,n=Math.ceil(i/25),a=Yoyo$1(this.value);this.getShapes()[0].lineStyle(n,this.color,a).setRadius(s).setCenterPosition(e,t)}},Linear$4=Phaser.Math.Linear,ExpoIn=Phaser.Math.Easing.Expo.In,RadioUpdateShapeMethods={buildShapes(){this.addShape((new Circle).setName("center")),this.addShape((new Lines).setName("arc0")),this.addShape((new Lines).setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=this.isInitialize||this.isSizeChanged,n=2*i/6,a=e-i+n,r=t+i-n,o=this.getShapes(),l=0,h=o.length;l<h;l++){var d=o[l],c=(this.value+.1*(h-l))%1;c=ExpoIn(Yoyo$1(c));var u=Linear$4(.25,1,c);switch(d.name){case"center":d.fillStyle(this.color,u),s&&d.setRadius(n).setCenterPosition(a,r);break;case"arc0":if(d.fillStyle(this.color,u),s){var p=2*n,g=3*n;d.startAt(a,r-p).lineTo(a,r-g).setIterations(8).arc(a,r,g,270,360).lineTo(a+p,r).setIterations(6).arc(a,r,p,360,270,!0).close()}break;case"arc1":d.fillStyle(this.color,u),s&&(p=4*n,g=5*n,d.startAt(a,r-p).lineTo(a,r-g).setIterations(8).arc(a,r,g,270,360).lineTo(a+p,r).setIterations(6).arc(a,r,p,360,270,!0).close())}}this.isInitialize=!1}},RingsUpdateShapeMethods={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Circle)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s,a=this.getShapes(),r=0,o=a.length;r<o;r++){var l=a[r],h=(this.value+r/o)%1,d=Yoyo$1(h);l.lineStyle(s,this.color,d).setRadius(h*n).setCenterPosition(e,t)}}},SpinnerUpdateShapeMethods={buildShapes(){this.addShape((new Arc).setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/10),n=i-s,a=720*this.value,r=a-180*Yoyo$1(this.value);this.getShape("arc").lineStyle(s,this.color,1).setRadius(n).setCenterPosition(e,t).setAngle(r+315,a+315)}};Phaser.Utils.Objects.GetValue;const AnimationModeMap={leftArrow:ArrowUpdateShapesMethods,rightArrow:ArrowUpdateShapesMethods,upArrow:ArrowUpdateShapesMethods,downArrow:ArrowUpdateShapesMethods,audio:AudioUpdateShapeMethods,ball:BallUpdateShapeMethods,bars:BarsUpdateShapeMethods,box:BoxUpdateShapeMethods,clock:ClockUpdateShapeMethods,cube:CubeUpdateShapeMethods,dots:DotsUpdateShapeMethods,facebook:FacebookUpdateShapeMethods,grid:GridUpdateShapeMethods,hearts:HeartsUpdateShapeMethods,ios:IosUpdateShapeMethods,oribit:OribitUpdateShapeMethods,oval:OvalUpdateShapeMethods,pie:PieUpdateShapeMethods,puff:PuffUpdateShapeMethods,radio:RadioUpdateShapeMethods,rings:RingsUpdateShapeMethods,spinner:SpinnerUpdateShapeMethods},AnimationModeList=[];for(var name in AnimationModeMap)AnimationModeList.push(name);const GetRandomItem$1=Phaser.Utils.Array.GetRandom,UpdateShapeMethods={setAnimationMode(e,t){AnimationModeMap.hasOwnProperty(e)||(e=GetRandomItem$1(AnimationModeList)),this.animationMode=e;var i=AnimationModeMap[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":i.setDirection.call(this,"left");break;case"rightArrow":i.setDirection.call(this,"right");break;case"upArrow":i.setDirection.call(this,"up");break;case"downArrow":i.setDirection.call(this,"down")}return this.clear(),i.buildShapes.call(this),this.updateShapes=i.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=GetRandomItem$1(AnimationModeList);return this.setAnimationMode(t,e),this}},GetValue$2g=Phaser.Utils.Objects.GetValue;class AIO extends Base{constructor(e,t){super(e,t),this.type="rexSpinnerAIO",this.setAnimationMode(GetValue$2g(t,"animationMode"))}}Object.assign(AIO.prototype,UpdateShapeMethods),ObjectFactory.register("aioSpinner",(function(e){var t=new AIO(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.AIOSpinner",AIO);const SetTransitionCallbackMethods={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}};var FitImages=function(){for(var e=this.scaleMode-1,t=0,i=this.images.length;t<i;t++){var s=this.images[t],n=FitTo(s,this,e,!0).width/s.width;this.setChildLocalScale(s,n),s.biasScale=n}},OnTextureChange=function(e){0===this.scaleMode?this.resize(e.width,e.height):FitImages.call(this)};const IsPlainObject$q=Phaser.Utils.Objects.IsPlainObject,GetValue$2f=Phaser.Utils.Objects.GetValue,GetRandomItem=Phaser.Utils.Array.GetRandom;var DirMode={out:0,in:1},GetValueFromConfigs=function(e,t,...i){for(var s=0,n=i.length;s<n;s++){var a=i[s];if(a&&a.hasOwnProperty(e))return a[e]}return t};const TransitionMethods={setTransitionDirection(e){return"string"==typeof e&&(e=DirMode[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),OnTextureChange.call(this,this.nextImage),this},transit(e,t,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),void 0!==i&&(e={key:e,frame:t,mode:i}),this.currentTransitionMode=void 0,IsPlainObject$q(e)){var s,n=e;e=GetValue$2f(n,"key",void 0),t=GetValue$2f(n,"frame",void 0),i=GetValue$2f(n,"mode"),Array.isArray(i)&&(i=GetRandomItem(i)),this.transitionModes&&this.transitionModes.hasOwnProperty(i)&&(s=this.transitionModes[i],this.currentTransitionMode=i),this.setDuration(GetValueFromConfigs("duration",this.duration,n,s)).setEaseFunction(GetValueFromConfigs("ease",this.easeFunction,n,s)).setTransitionDirection(GetValueFromConfigs("dir",this.dir,n,s));var a=GetValueFromConfigs("mask",void 0,n,s);a&&this.setMaskGameObject(a),this.setMaskEnable(!0===a);var r=GetValueFromConfigs("onStart",void 0,n,s),o=GetValueFromConfigs("onProgress",void 0,n,s),l=GetValueFromConfigs("onComplete",void 0,n,s);void 0===r&&void 0===o&&void 0===l||this.setTransitionStartCallback(r,GetValueFromConfigs("onStartScope",void 0,n,s)).setTransitionProgressCallback(o,GetValueFromConfigs("onProgressScope",void 0,n,s)).setTransitionCompleteCallback(l,GetValueFromConfigs("onCompleteScope",void 0,n,s))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return void 0===this.transitionModes&&(this.transitionModes={}),IsPlainObject$q(e)&&(e=(t=e).name,delete t.name),this.transitionModes[e]=t,this},start(){return void 0===this.easeValueTask&&(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},SetPositionBase=Phaser.GameObjects.Graphics.prototype.setPosition;var SetPosition$1=function(e,t){var i=this.parent;return void 0===e&&(e=i.x),void 0===t&&(t=i.y),SetPositionBase.call(this,e,t),this};const RectangleGeom=Phaser.Geom.Rectangle,CircleGemo=Phaser.Geom.Circle;var GetGeom=function(e,t,i,s,n,a,r){if(1===e){s=s.left;var o=-t*(n-.5),l=-i*(a-.5),h=Math.min(t,i)/2+s;void 0!==r&&r instanceof CircleGemo||(r=new CircleGemo),r.setTo(o,l,h)}else{var d=-t*n-s.left,c=-i*a-s.top,u=t+s.left+s.right,p=i+s.top+s.bottom;void 0!==r&&r instanceof RectangleGeom||(r=new RectangleGeom),r.setTo(d,c,u,p)}return r},DrawShape=function(e,t,i,s,n){this.geom=GetGeom(this.shapeType,e,t,i,s,n,this.geom),this.clear().fillStyle(16777215),1===this.shapeType?this.fillCircleShape(this.geom):this.fillRectShape(this.geom)},Resize$1=function(e,t,i){var s=this.parent;void 0===e&&(e=s.width),void 0===t&&(t=s.height),void 0===i?i=this.padding:"number"==typeof i&&(i=GetBoundsConfig(i));var n=this.width!==e||this.height!==t,a=this.padding!==i&&!IsKeyValueEqual(this.padding,i);return n||a?(this.width=e,this.height=t,a&&Clone$2(i,this.padding),this.originX=s.originX,this.originY=s.originY,DrawShape.call(this,e,t,i,s.originX,s.originY),this):this},SetOrigin=function(e,t){void 0===t&&(t=e);var i=this.parent;return void 0===e&&(e=i.originX),void 0===t&&(t=i.originY),this.originX===e&&this.originY===t||(this.originX=e,this.originY=t,DrawShape.call(this,this.width,this.height,this.padding,e,t)),this},Contains$1=function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)},Methods$a={setPosition:SetPosition$1,resize:Resize$1,setOrigin:SetOrigin,contains:Contains$1};const Graphics=Phaser.GameObjects.Graphics;class DefaultMaskGraphics extends Graphics{constructor(e,t,i){void 0===t&&(t=0),"string"==typeof t&&(t=SHAPEMODE[t]),super(e.scene),this.parent=e,this.shapeType=t,this.padding=GetBoundsConfig$1(i),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}}const SHAPEMODE={rectangle:0,circle:1};Object.assign(DefaultMaskGraphics.prototype,Methods$a);const MaskMethods={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(!0===e&&this.maskGameObject instanceof DefaultMaskGraphics)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return!0===e&&(e=new DefaultMaskGraphics(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",(function(){e._maskObject.destroy(),e._maskObject=void 0}))),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return void 0===e&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(i)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var i=this.getCellImages(),s=0,n=i.length;s<n;s++)this.setImageMaskEnable(i[s],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}};var GetFrameNameCallback=function(e,t){return"object"==typeof e&&(e=e.name),void 0===t&&(t=","),"__BASE"===e?function(e,i){return`${e}${t}${i}`}:function(i,s){return`${e}_${i}${t}${s}`}},GenerateFrames=function(e,t,i,s,n,a){null==i&&(i="__BASE"),a||(a=GetFrameNameCallback(i,a));for(var r,o,l,h=e.sys.textures.get(t),d="object"==typeof i?i:h.get(i),c=d.width/s,u=d.height/n,p=d.cutX,g=d.cutY,m=0,f=0,v=0;v<n;v++){m=0;for(var b=0;b<s;b++)l=a(b,v),r=m+p,o=f+g,h.add(l,0,r,o,c,u),m+=c;f+=u}return{getFrameNameCallback:a,cellWidth:c,cellHeight:u,columns:s,rows:n}};const GetValue$2e=Phaser.Utils.Objects.GetValue,DefaultImageClass=Phaser.GameObjects.Image,IsPlainObject$p=Phaser.Utils.Objects.IsPlainObject,RotateAround$2=Phaser.Math.RotateAround;var GridCutImage=function(e,t,i,s){IsPlainObject$p(t)&&(t=GetValue$2e(s=t,"columns",1),i=GetValue$2e(s,"rows",1));var n=GetValue$2e(s,"createImageCallback");if(!n){var a=GetValue$2e(s,"ImageClass",DefaultImageClass);n=function(e,t,i){return new a(e,0,0,t,i)}}for(var r=GetValue$2e(s,"originX",.5),o=GetValue$2e(s,"originY",.5),l=GetValue$2e(s,"add",!0),h=GetValue$2e(s,"align",l),d=GetValue$2e(s,"objectPool",void 0),c=e.scene,u=e.texture,p=e.frame,g=GenerateFrames(c,u,p,t,i),m=g.getFrameNameCallback,f=e.scaleX,v=e.scaleY,b=e.rotation,y=e.getTopLeft(),C=y.x,x=y.y,S=[],w=g.cellWidth*f,T=g.cellHeight*v,P=0;P<i;P++)for(var _=0;_<t;_++){var M,O=m(_,P);if(M=d&&d.length>0?d.pop().setTexture(u,O):n(c,u,O),l&&c.add.existing(M),h){var k=C+w*_+r*w,$=x+T*P+o*T;M.setOrigin(r,o).setPosition(k,$).setScale(f,v).setRotation(b),RotateAround$2(M,C,x,b)}S.push(M)}return S};const GridCutMethods={gridCutImage(e,t,i,s){void 0===s&&(s={}),s.objectPool=this.imagesPool;for(var n,a=GridCutImage(e,t,i,s),r=0,o=a.length;r<o;r++)(n=a[r]).setVisible(!0),this.add(n);return this.cellImages=a,this.setChildLocalVisible(e,!1),a},gridCutCurrentImage(e,t,i){return this.gridCutImage(this.currentImage,e,t,i)},gridCutNextImage(e,t,i){return this.gridCutImage(this.nextImage,e,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(0===this.cellImages.length)return this;for(var e,t,i=this.cellImages[0].texture,s=this.cellImages,n=0,a=s.length;n<a;n++)e=s[n],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),t=e.frame.name,e.setTexture(),i.remove(t);return this.imagesPool.push(...s),s.length=0,this}},FlipMethods={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var methods$s={};Object.assign(methods$s,SetTransitionCallbackMethods,TransitionMethods,MaskMethods,GridCutMethods,FlipMethods);var OnStart=function(e,t,i,s){},OnProgress=function(e,t,i,s){e.setChildLocalAlpha(t,1-s).setChildLocalAlpha(i,s)},OnComplete=function(e,t,i,s){e.setChildLocalAlpha(t,1)};const IsPlainObject$o=Phaser.Utils.Objects.IsPlainObject,GetValue$2d=Phaser.Utils.Objects.GetValue,Clamp$a=Phaser.Math.Clamp;class TransitionImage extends ContainerLite{constructor(e,t,i,s,n,a){IsPlainObject$o(t)?(t=GetValue$2d(a=t,"x",0),i=GetValue$2d(a,"y",0),s=GetValue$2d(a,"key",void 0),n=GetValue$2d(a,"frame",void 0)):IsPlainObject$o(n)&&(a=n,n=void 0);var r=GetValue$2d(a,"back",void 0),o=GetValue$2d(a,"front",void 0);r||(r=e.add.image(t,i,s,n)),o||(o=e.add.image(t,i,s,n));var l=GetValue$2d(a,"width",void 0),h=GetValue$2d(a,"height",void 0),d=void 0!==l&&void 0!==h?1:0;void 0===l&&(l=o.width),void 0===h&&(h=o.height),super(e,t,i,l,h),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,"string"==typeof(d=GetValue$2d(a,"scaleMode",d))&&(d=ScaleModeMap[d]),this.scaleMode=d,r.setVisible(!1),this.addMultiple([r,o]),this.backImage=r,this.frontImage=o,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var c=GetValue$2d(a,"onStart",void 0),u=GetValue$2d(a,"onProgress",void 0),p=GetValue$2d(a,"onComplete",void 0),g=GetValue$2d(a,"dir",0);void 0===c&&void 0===u&&void 0===p&&(c=OnStart,u=OnProgress,p=OnComplete,g=0),this.setTransitionStartCallback(c,GetValue$2d(a,"onStartScope",void 0)).setTransitionProgressCallback(u,GetValue$2d(a,"onProgressScope",void 0)).setTransitionCompleteCallback(p,GetValue$2d(a,"onCompleteScope",void 0)).setTransitionDirection(g).setDuration(GetValue$2d(a,"duration",1e3)).setEaseFunction(GetValue$2d(a,"ease","Linear"));var m=GetValue$2d(a,"mask",void 0);m&&this.setMaskGameObject(m),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,OnTextureChange.call(this,this.frontImage)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(e),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return 0===this.dir?this.frontImage:this.backImage}get nextImage(){return 0===this.dir?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(e){this._tint!==e&&(this._tint=e,this.backImage.setTint(e),this.frontImage.setTint(e))}setTint(e){return this.tint=e,this}get flipX(){return this._flipX}set flipX(e){this._flipX!==e&&(this._flipX=e,this.backImage.setFlipX(e),this.frontImage.setFlipX(e))}setFlipX(e){return this.flipX=e,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(e){this._flipY!==e&&(this._flipY=e,this.backImage.setFlipY(e),this.frontImage.setFlipY(e))}setFlipY(e){return this.flipY=e,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(e,t){return this.flipX=e,this.flipY=t,this}get t(){return this._t}set t(e){if(e=Clamp$a(e,0,1),this._t!==e){this._t=e;var t=this.currentImage,i=this.nextImage;if(0===e&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),RunCallback.call(this,this.onStartCallback,this.onStartCallbackScope,this,t,i,e)),RunCallback.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,t,i,e),1===e){RunCallback.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,t,i,e);var s=i.texture.key,n=i.frame.name;this.frontImage.setTexture(s,n),this.backImage.setTexture(s,n),OnTextureChange.call(this,i),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}1!==e||this.ignoreCompleteEvent||this.emit("complete")}}setT(e){return this.t=e,this}get isRunning(){return!!this.easeValueTask&&this.easeValueTask.isRunning}setOrigin(e,t){return super.setOrigin(e,t),this.backImage.setOrigin(e,t),this.frontImage.setOrigin(e,t),this.maskGameObject&&this.maskGameObject.setOrigin(e,t),this}setTexture(e,t){return this.frontImage.setTexture(e,t),this.backImage.setTexture(e,t).setVisible(!1),OnTextureChange.call(this,this.frontImage),this}setSize(e,t){return super.setSize(e,t),this.scaleMode&&FitImages.call(this),this}}var RunCallback=function(e,t,i,s,n,a){var r;e&&(this.scaleMode&&(s.biasScale>0&&(r=this.getChildLocalScaleX(s),r/=s.biasScale,this.setChildLocalScale(s,r)),n.biasScale&&(r=this.getChildLocalScaleX(n),r/=n.biasScale,this.setChildLocalScale(n,r))),t?e.call(t,i,s,n,a):e(i,s,n,a),this.scaleMode&&(s.biasScale>0&&(r=this.getChildLocalScaleX(s),r*=s.biasScale,this.setChildLocalScale(s,r)),n.biasScale&&(r=this.getChildLocalScaleX(n),r*=n.biasScale,this.setChildLocalScale(n,r))))};Object.assign(TransitionImage.prototype,methods$s);const ScaleModeMap={fit:1,FIT:1,envelop:2,ENVELOP:2};ObjectFactory.register("transitionImage",(function(e,t,i,s,n){var a=new TransitionImage(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.TransitionImage",TransitionImage);const SlideLeft="slideLeft",SlideRight="slideRight",SlideUp="slideUp",SlideDown="slideDown",SlideAwayLeft="slideAwayLeft",SlideAwayRight="slideAwayRight",SlideAwayUp="slideAwayUp",SlideAwayDown="slideAwayDown",PushLeft="pushLeft",PushRight="pushRight",PushUp="pushUp",PushDown="pushDown",ZoomOut="zoomOut",ZoomIn="zoomIn",ZoomInOut="zoomInOut",Fade$1="fade",CrossFade="crossFade",WipeLeft="wipeLeft",WipeRight="wipeRight",WipeUp="wipeUp",WipeDown="wipeDown",IrisOut="irisOut",IrisIn="irisIn",IrisInOut="irisInOut",PieOut="pieOut",PieIn="pieIn",PieInOut="pieInOut",Blinds="blinds",Squares="squares",Diamonds="diamonds",Circles="circles",Curtain="curtain",Pixellate="pixellate",Dissolve="dissolve",RevealLeft="revealLeft",RevealRight="revealRight",RevealUp="revealUp",RevealDown="revealDown";var AddSlideAwayModes=function(e){e.addTransitionMode(SlideAwayRight,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.width*s;e.setChildLocalPosition(t,n,0)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0)}}).addTransitionMode(SlideAwayLeft,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.width*-s;e.setChildLocalPosition(t,n,0)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0)}}).addTransitionMode(SlideAwayDown,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.height*s;e.setChildLocalPosition(t,0,n)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0)}}).addTransitionMode(SlideAwayUp,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.height*-s;e.setChildLocalPosition(t,0,n)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0)}})},AddSlideModes=function(e){e.addTransitionMode(SlideRight,{ease:"Linear",dir:"in",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=i.width*(s-1);e.setChildLocalPosition(i,n,0)},onComplete:function(e,t,i,s){e.setChildLocalPosition(i,0,0)}}).addTransitionMode(SlideLeft,{ease:"Linear",dir:"in",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=i.width*(1-s);e.setChildLocalPosition(i,n,0)},onComplete:function(e,t,i,s){e.setChildLocalPosition(i,0,0)}}).addTransitionMode(SlideDown,{ease:"Linear",dir:"in",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=i.height*(s-1);e.setChildLocalPosition(i,0,n)},onComplete:function(e,t,i,s){e.setChildLocalPosition(i,0,0)}}).addTransitionMode(SlideUp,{ease:"Linear",dir:"in",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=i.height*(1-s);e.setChildLocalPosition(i,0,n)},onComplete:function(e,t,i,s){e.setChildLocalPosition(i,0,0)}})},AddSliderModes=function(e){e.addTransitionMode(PushRight,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.width*s;e.setChildLocalPosition(t,n,0),n=i.width*(s-1),e.setChildLocalPosition(i,n,0)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0),e.setChildLocalPosition(i,0,0)}}).addTransitionMode(PushLeft,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.width*-s;e.setChildLocalPosition(t,n,0),n=i.width*(1-s),e.setChildLocalPosition(i,n,0)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0),e.setChildLocalPosition(i,0,0)}}).addTransitionMode(PushDown,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.height*s;e.setChildLocalPosition(t,0,n),n=i.height*(s-1),e.setChildLocalPosition(i,0,n)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0),e.setChildLocalPosition(i,0,0)}}).addTransitionMode(PushUp,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=t.height*-s;e.setChildLocalPosition(t,0,n),n=i.height*(1-s),e.setChildLocalPosition(i,0,n)},onComplete:function(e,t,i,s){e.setChildLocalPosition(t,0,0),e.setChildLocalPosition(i,0,0)}})},AddZoomModes=function(e){e.addTransitionMode(ZoomOut,{ease:"Linear",dir:"out",mask:!1,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=1-s;e.setChildLocalScale(t,n,n)},onComplete:function(e,t,i,s){e.setChildLocalScale(t,1,1)}}).addTransitionMode(ZoomIn,{ease:"Linear",dir:"in",mask:!1,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){var n=s;e.setChildLocalScale(i,n,n)},onComplete:function(e,t,i,s){e.setChildLocalScale(i,1,1)}}).addTransitionMode(ZoomInOut,{ease:"Linear",dir:"out",mask:!1,onStart:function(e,t,i,s){i.tint=0},onProgress:function(e,t,i,s){var n;s<.5?(n=1-Yoyo$1(s),e.setChildLocalScale(t,n,n)):(t.visible&&e.setChildVisible(t,!1),n=1-Yoyo$1(s),e.setChildLocalScale(i,n,n))},onComplete:function(e,t,i,s){e.setChildLocalScale(t,1,1),e.setChildVisible(t,!0),t.tint=16777215,e.setChildLocalScale(i,1,1),e.setChildVisible(i,!0),i.tint=16777215}})},AddFadeModes=function(e){e.addTransitionMode(Fade$1,{ease:"Linear",dir:"out",mask:!1,onStart:function(e,t,i,s){i.tint=0},onProgress:function(e,t,i,s){var n;s<.5?(s=Yoyo$1(s),n=Math.floor(255*(1-s)),t.tint=(n<<16)+(n<<8)+n):(t.visible&&e.setChildVisible(t,!1),s=Yoyo$1(s),n=Math.floor(255*(1-s)),i.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,t,i,s){e.setChildVisible(t,!0),t.tint=16777215,e.setChildVisible(i,!0),i.tint=16777215}}).addTransitionMode(CrossFade,{ease:"Linear",dir:"out",mask:!1,onStart:function(e,t,i,s){},onProgress:function(e,t,i,s){e.setChildLocalAlpha(t,1-s),e.setChildLocalAlpha(i,s)},onComplete:function(e,t,i,s){e.setChildLocalAlpha(t,1)}})},CreateMask$7=function(e){return new CustomProgress(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var e=this.getShape("rect").fillStyle(16777215),t=1-this.value;switch(this.wipeMode){case"right":e.setSize(this.width*t,this.height).setTopLeftPosition(this.width-e.width,0);break;case"left":e.setSize(this.width*t,this.height).setTopLeftPosition(0,0);break;case"down":e.setSize(this.width,this.height*t).setTopLeftPosition(0,this.height-e.height);break;case"up":e.setSize(this.width,this.height*t).setTopLeftPosition(0,0)}}})},AddWipeModes=function(e){var t=CreateMask$7(e.scene);e.once("destroy",(function(){t.destroy()})).addTransitionMode(WipeRight,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="right"},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(WipeLeft,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="left"},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(WipeDown,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="down"},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(WipeUp,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="up"},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}})},CreateMask$6=function(e){return new CustomProgress(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}})},AddIrisModes=function(e){var t=CreateMask$6(e.scene);e.once("destroy",(function(){t.destroy()})).addTransitionMode(IrisOut,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(IrisIn,{ease:"Linear",dir:"in",mask:t,onStart:function(e,t,i,s){e.setNextImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(1-s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(IrisInOut,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){i.tint=0,e.setCurrentImageMaskEnable(!0),e.setNextImageMaskEnable(!0)},onProgress:function(e,t,i,s){var n;s<.5?(s=Yoyo$1(s),n=Math.floor(255*(1-s)),e.maskGameObject.setValue(1-s),t.tint=(n<<16)+(n<<8)+n):(t.visible&&e.setChildVisible(t,!1),s=Yoyo$1(s),n=Math.floor(255*(1-s)),e.maskGameObject.setValue(1-s),i.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1),e.setChildVisible(t,!0),t.tint=16777215,e.setChildVisible(i,!0),i.tint=16777215}})},CreateMask$5=function(e){return new CustomProgress(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var e=2*Math.max(this.width,this.height),t=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(e).setAngle(90-t,90+t).setPie()}})},AddPieModes=function(e){var t=CreateMask$5(e.scene);e.once("destroy",(function(){t.destroy()})).addTransitionMode(PieOut,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(PieIn,{ease:"Linear",dir:"in",mask:t,onStart:function(e,t,i,s){e.setNextImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(1-s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}}).addTransitionMode(PieInOut,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){i.tint=0,e.setCurrentImageMaskEnable(!0),e.setNextImageMaskEnable(!0)},onProgress:function(e,t,i,s){var n;s<.5?(s=Yoyo$1(s),n=Math.floor(255*(1-s)),e.maskGameObject.setValue(1-s),t.tint=(n<<16)+(n<<8)+n):(t.visible&&e.setChildVisible(t,!1),s=Yoyo$1(s),n=Math.floor(255*(1-s)),e.maskGameObject.setValue(1-s),i.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1),e.setChildVisible(t,!0),t.tint=16777215,e.setChildVisible(i,!0),i.tint=16777215}})},CreateMask$4=function(e,t){return new CustomProgress(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var e=this.getShapes(),i=this.width/t,s=0;s<t;s++)e[s].fillStyle(16777215).setSize(i*this.value,this.height).setTopLeftPosition(i*s,0)}})},AddBlindsModes=function(e){var t=CreateMask$4(e.scene,10);e.once("destroy",(function(){t.destroy()})).addTransitionMode(Blinds,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}})},CreateMask$3=function(e,t,i){return new CustomProgress(e,{type:"Graphics",create:{rectangle:t*i},update:function(){for(var e=this.getShapes(),s=this.width/t,n=this.height/i,a=0;a<i;a++)for(var r=0;r<t;r++)e[r*i+a].fillStyle(16777215).setSize(s*this.value,n*this.value).setCenterPosition(s*(r+.5),n*(a+.5))}})},AddSquaresModes=function(e){var t=CreateMask$3(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",(function(){t.destroy()})).addTransitionMode(Squares,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}})},CreateMask$2=function(e,t,i){return new CustomProgress(e,{type:"Graphics",create:{lines:t*i},update:function(){for(var e=this.getShapes(),s=this.width/(t-1),n=this.height/i,a=2*n,r=s*this.value,o=n*this.value,l=0;l<i;l++)for(var h=0;h<t;h++){var d=h*s,c=l*a+h%2*n;e[h*i+l].fillStyle(16777215).start(d+r,c).lineTo(d,c+o).lineTo(d-r,c).lineTo(d,c-o).lineTo(d+r,c).close()}}})},AddDiamondsMode=function(e){var t=CreateMask$2(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",(function(){t.destroy()})).addTransitionMode(Diamonds,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}})},CreateMask$1=function(e,t,i){return new CustomProgress(e,{type:"Graphics",create:{circle:t*i},update:function(){for(var e=this.getShapes(),s=this.width/(t-1),n=this.height/i,a=2*n,r=Math.max(s,n)*this.value,o=0;o<i;o++)for(var l=0;l<t;l++){var h=l*s,d=o*a+l%2*n;e[l*i+o].fillStyle(16777215).setCenterPosition(h,d).setRadius(r)}}})},AddCirclesMode=function(e){var t=CreateMask$1(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",(function(){t.destroy()})).addTransitionMode(Circles,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){e.maskGameObject.setValue(s)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1)}})},CreateMask=function(e,t){return new CustomProgress(e,{type:"Graphics",create:{lines:t},update:function(){for(var e=this.getShapes(),i=this.width/t,s=i/2,n=0;n<t;n++){var a=i*n,r=this.height*this.value,o=a+s;e[n].fillStyle(16777215).start(a,0).horizontalLineTo(r).arc(o,r,s,180,0,!0).horizontalLineTo(-r).lineTo(a,0).close()}}})},AddCurtainMode=function(e){var t=CreateMask(e.scene,10);e.once("destroy",(function(){t.destroy()})).addTransitionMode(Curtain,{ease:"Linear",dir:"out",mask:t,onStart:function(e,t,i,s){i.tint=0,e.setCurrentImageMaskEnable(!0,!0),e.setNextImageMaskEnable(!0,!0)},onProgress:function(e,t,i,s){var n;s<.5?(s=Yoyo$1(s),n=Math.floor(255*(1-s)),e.maskGameObject.setValue(s),t.tint=(n<<16)+(n<<8)+n):(t.visible&&e.setChildVisible(t,!1),s=Yoyo$1(s),n=Math.floor(255*(1-s)),e.maskGameObject.setValue(s),i.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,t,i,s){e.removeMaskGameObject(!1),e.setChildVisible(t,!0),t.tint=16777215,e.setChildVisible(i,!0),i.tint=16777215}})},AddPixellateMode=function(e){e.addTransitionMode(Pixellate,{ease:"Linear",dir:"out",mask:!0,onStart:function(e,t,i,s){e.setChildVisible(i,!1),t.effect=t.preFX.addPixelate(0),i.effect=i.preFX.addPixelate(0)},onProgress:function(e,t,i,s){if(s<.5){s=Yoyo$1(s);var n=Math.min(t.width,t.height)/5;t.effect.amount=Math.ceil(n*s)}else t.visible&&e.setChildVisible(t,!1),i.visible||e.setChildVisible(i,!0),s=Yoyo$1(s),n=Math.min(i.width,i.height)/5,i.effect.amount=Math.ceil(n*s)},onComplete:function(e,t,i,s){t.preFX.remove(t.effect),delete t.effect,e.setChildVisible(t,!0),i.preFX.remove(i.effect),delete i.effect}})};const frag$1="vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }\nfloat Perlin(vec3 P) {\n    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));\n    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);\n    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);\n    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0); gx1 = fract(gx1);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),\n        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),\n        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),\n        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));\n    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;\n    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;\n    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),\n        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),\n        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),\n            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);\n    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);\n}\nfloat Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }\n",frag=`#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n// Scene buffer\nuniform sampler2D uMainSampler;\nuniform sampler2D uMainSampler2;\n\nuniform int resizeMode;\nuniform float progress;\nuniform float fromRatio;\nuniform float toRatio;\nvarying vec2 outFragCoord;\n// Effect parameters\nuniform float noiseX;\nuniform float noiseY;\nuniform float noiseZ;\nuniform float fromEdgeStart;\nuniform float fromEdgeWidth;\nuniform float toEdgeStart;\nuniform float toEdgeWidth;\n\n${frag$1}\n\nvec4 getFromColor (vec2 uv) {\n  return texture2D(uMainSampler, uv);\n}\n\nvec4 getToColor (vec2 uv) {\n  if (resizeMode == 2) {\n    //  cover\n    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));\n  } else if (resizeMode == 1) {\n    //  contain\n    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));\n  } else {\n    //  stretch\n    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));\n  }\n}\n\nvec4 transition (vec2 uv) {    \n  vec4 colorFront = getFromColor(uv);\n  vec4 colorTo = getToColor(uv);\n\n  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0\n    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))\n    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;\n  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)\n    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));\n  return colorResult;\n}\n\nvoid main () {\n  vec2 uv = outFragCoord;\n  gl_FragColor = transition(uv);\n}\n`,PostFXPipeline=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,GetValue$2c=Phaser.Utils.Objects.GetValue,Clamp$9=Phaser.Math.Clamp;class DissolvePostFxPipeline extends PostFXPipeline{constructor(e){super({name:"rexDissolvePostFx",game:e,renderTarget:!0,fragShader:frag}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(e){return this.setProgress(GetValue$2c(e,"progress",0)),this.setTransitionTargetTexture(GetValue$2c(e,"toTexture","__DEFAULT"),GetValue$2c(e,"toFrame",void 0),GetValue$2c(e,"resizeMode",1)),this.setNoise(GetValue$2c(e,"noiseX",void 0),GetValue$2c(e,"noiseY",void 0),GetValue$2c(e,"noiseZ",void 0)),this.setFromEdge(GetValue$2c(e,"fromEdgeStart",.01),GetValue$2c(e,"fromEdgeWidth",.05)),this.setToEdge(GetValue$2c(e,"toEdgeStart",.01),GetValue$2c(e,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(e){this.set1f("fromRatio",e.width/e.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(e)}get progress(){return this._progress}set progress(e){this._progress=Clamp$9(e,0,1)}setProgress(e){return this.progress=e,this}setTransitionTargetTexture(e,t,i){void 0===e&&(e="__DEFAULT");var s=this.game.textures.getFrame(e,t);return s||(s=this.game.textures.getFrame("__DEFAULT")),this.toRatio=s.width/s.height,this.toFrame=s,this.targetTexture=s.glTexture,void 0!==i&&(this.resizeMode=i),this}setResizeMode(e){return"string"==typeof e&&(e=ResizeMode$1[e]),this.resizeMode=e,this}setNoise(e,t,i){return void 0===e&&(e=4+6*Math.random()),void 0===t&&(t=4+6*Math.random()),void 0===i&&(i=10*Math.random()),this.noiseX=e,this.noiseY=t,this.noiseZ=i,this}setFromEdge(e,t){return this.fromEdgeStart=e,this.fromEdgeWidth=t,this}setToEdge(e,t){return this.toEdgeStart=e,this.toEdgeWidth=t,this}}var ResizeMode$1={stretch:0,contain:1,cover:2},RegisterPostPipeline=function(e,t,i){GetGame(e).renderer.pipelines.addPostPipeline(t,i)},AddPostFxPipelineInstance=function(e,t,i){void 0===i&&(i={}),e.setPostPipeline(t);var s=e.postPipelines[e.postPipelines.length-1];return s.resetFromJSON(i),i.name&&(s.name=i.name),s};const SpliceOne$1=Phaser.Utils.Array.SpliceOne;var RemovePostFxPipelineInstance=function(e,t,i){for(var s,n=(s=e.postPipelines).length-1;n>=0;n--){var a;(a=s[n])instanceof t&&(a.destroy(),SpliceOne$1(s,n))}e.hasPostPipeline=e.postPipelines.length>0},AddDissolveMode=function(e){RegisterPostPipeline(e.scene.game,"rexDissolvePostFx",DissolvePostFxPipeline),e.addTransitionMode(Dissolve,{ease:"Linear",dir:"out",mask:!1,onStart:function(e,t,i,s){t.effect=AddPostFxPipelineInstance(t,DissolvePostFxPipeline)},onProgress:function(e,t,i,s){t.effect.setProgress(s)},onComplete:function(e,t,i,s){RemovePostFxPipelineInstance(t,DissolvePostFxPipeline),delete t.effect}})};const WipeWidth=.1,DirLeftToRight=0,DirTopToBottom=0,DirRightToLeft=1,DirBottomToTop=1,AxisX=0,AxisY=1;var AddRevealModes=function(e){e.addTransitionMode(RevealRight,{ease:"Linear",dir:"in",mask:!1,onStart:function(e,t,i,s){i.effect=i.preFX.addReveal(WipeWidth,DirLeftToRight,AxisX)},onProgress:function(e,t,i,s){i.effect.progress=s},onComplete:function(e,t,i,s){i.preFX.remove(i.effect),delete i.effect}}).addTransitionMode(RevealLeft,{ease:"Linear",dir:"in",mask:!1,onStart:function(e,t,i,s){i.effect=i.preFX.addReveal(WipeWidth,DirRightToLeft,AxisX)},onProgress:function(e,t,i,s){i.effect.progress=s},onComplete:function(e,t,i,s){i.preFX.remove(i.effect),delete i.effect}}).addTransitionMode(RevealDown,{ease:"Linear",dir:"in",mask:!1,onStart:function(e,t,i,s){i.effect=i.preFX.addReveal(WipeWidth,DirTopToBottom,AxisY)},onProgress:function(e,t,i,s){i.effect.progress=s},onComplete:function(e,t,i,s){i.preFX.remove(i.effect),delete i.effect}}).addTransitionMode(RevealUp,{ease:"Linear",dir:"in",mask:!1,onStart:function(e,t,i,s){i.effect=i.preFX.addReveal(WipeWidth,DirBottomToTop,AxisY)},onProgress:function(e,t,i,s){i.effect.progress=s},onComplete:function(e,t,i,s){i.preFX.remove(i.effect),delete i.effect}})};const Modes=[AddSlideAwayModes,AddSlideModes,AddSliderModes,AddZoomModes,AddFadeModes,AddIrisModes,AddPieModes,AddWipeModes,AddBlindsModes,AddSquaresModes,AddDiamondsMode,AddCirclesMode,AddCurtainMode,AddPixellateMode,AddDissolveMode,AddRevealModes];class TransitionImagePack extends TransitionImage{constructor(e,t,i,s,n,a){super(e,t,i,s,n,a);for(var r=0,o=Modes.length;r<o;r++)Modes[r](this)}}ObjectFactory.register("transitionImagePack",(function(e,t,i,s,n){var a=new TransitionImagePack(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.TransitionImagePack",TransitionImagePack);var ScaleImage=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=FitTo(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},methods$r={scaleImage:ScaleImage};Object.assign(methods$r,FlipMethods);var ResizeBackground=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),ResizeGameObject(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const IsPlainObject$n=Phaser.Utils.Objects.IsPlainObject,GetValue$2b=Phaser.Utils.Objects.GetValue;class ImageBox extends ContainerLite{constructor(e,t,i,s,n,a){IsPlainObject$n(t)?(t=GetValue$2b(a=t,"x",0),i=GetValue$2b(a,"y",0),s=GetValue$2b(a,"key",void 0),n=GetValue$2b(a,"frame",void 0)):IsPlainObject$n(n)&&(a=n,n=void 0);var r=GetValue$2b(a,"image");r?r.setPosition(t,i).setOrigin(.5):(r=e.add.image(t,i,s,n),void 0===s&&r.setVisible(!1)),super(e,t,i,1,1),this.type="rexImageBox";var o=GetValue$2b(a,"background");o&&this.add(o),this.background=o,this.add(r),this.image=r,this.scaleUp=GetValue$2b(a,"scaleUp",!1);var l=GetValue$2b(a,"width",r.width),h=GetValue$2b(a,"height",r.height);this.resize(l,h)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(e){this._flipX!==e&&(this._flipX=e,this.image.setFlipX(e))}get flipY(){return this._flipY}set flipY(e){this._flipY!==e&&(this._flipY=e,this.image.setFlipY(e))}resize(e,t){return super.resize(e,t),ResizeBackground.call(this),this.scaleImage(),this}setTexture(e,t){var i=this.image;return i.setTexture(e,t),null!==e?(this.setChildVisible(i,!0),this.scaleImage()):this.setChildVisible(i,!1),this}}Object.assign(ImageBox.prototype,methods$r),ObjectFactory.register("imageBox",(function(e,t,i,s,n){var a=new ImageBox(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.ImageBox",ImageBox),ObjectFactory.register("fullWindowRectangle",(function(e,t){var i=new FullWindowRectangle(this.scene,e,t);return this.scene.add.existing(i),i})),SetValue(window,"RexPlugins.UI.FullWindowRectangle",FullWindowRectangle),ObjectFactory.register("fullWindowZone",(function(){var e=new FullWindowRectangle$1(this.scene);return this.scene.add.existing(e),e})),SetValue(window,"RexPlugins.UI.FullWindowZone",FullWindowRectangle$1),ObjectFactory.register("cover",(function(e){var t=new Cover(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Cover",Cover);var Resize=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var i=this.node.style;return i.width=`${e}px`,i.height=`${t}px`,this.updateSize(),this};const ElementProperties={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},StyleProperties={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},ElementEvents={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},GetValue$2a=Phaser.Utils.Objects.GetValue;var RouteEvents=function(e,t,i,s){var n=GetValue$2a(s,"preventDefault",!1),a=GetValue$2a(s,"preTest");for(let r in i)t.addEventListener(r,(function(t){a&&!a(e,r)||e.emit(i[r],e,t),n&&t.preventDefault()}))};const DOMElement$2=Phaser.GameObjects.DOMElement,IsPlainObject$m=Phaser.Utils.Objects.IsPlainObject,GetValue$29=Phaser.Utils.Objects.GetValue;class InputText extends DOMElement$2{constructor(e,t,i,s,n,a){var r;IsPlainObject$m(t)?(t=GetValue$29(a=t,"x",0),i=GetValue$29(a,"y",0),s=GetValue$29(a,"width",0),n=GetValue$29(a,"height",0)):IsPlainObject$m(s)&&(s=GetValue$29(a=s,"width",0),n=GetValue$29(a,"height",0)),void 0===a&&(a={});var o=GetValue$29(a,"inputType",void 0);void 0===o&&(o=GetValue$29(a,"type","text")),"textarea"===o?(r=document.createElement("textarea")).style.resize="none":(r=document.createElement("input")).type=o,SetProperties(ElementProperties,a,r);var l=GetValue$29(a,"style",void 0);l=SetProperties(StyleProperties,a,l);var h=r.style;for(var d in a)if(!(d in ElementProperties)&&!(d in StyleProperties))if(d in h)l[d]=a[d];else if(d in r){if("type"===d)continue;r[d]=a[d]}l["box-sizing"]="border-box",super(e,t,i,r,l),this.type="rexInputText",this.resize(s,n),RouteEvents(this,r,ElementEvents),StopPropagationTouchEvents(r),GetValue$29(a,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",(function(){this._isFocused=!0}),this).on("blur",(function(){this._isFocused=!1}),this)}get inputType(){return"textarea"===this.node.tagName.toLowerCase()?"textarea":this.node.type}get text(){return this.node.value}set text(e){this.node.value=e}setText(e){return this.text=e,this}get maxLength(){return this.node.maxLength}set maxLength(e){this.node.maxLength=e}setMaxLength(e){return this.maxLength=e,this}get minLength(){return this.node.minLength}set minLength(e){this.node.minLength=e}setMinLength(e){return this.minLength=e,this}get placeholder(){return this.node.placeholder}set placeholder(e){this.node.placeholder=e}setPlaceholder(e){return this.placeholder=e,this}selectText(e,t){return void 0===e?this.node.select():this.node.setSelectionRange(e,t),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var e=this.node;return e.value.substring(e.selectionStart,e.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(e){this.node.setSelectionRange(e,e)}setCursorPosition(e){return void 0===e?e=this.text.length:e<0&&(e=this.text.length+e),this.cursorPosition=e,this}get tooltip(){return this.node.title}set tooltip(e){this.node.title=e}setTooltip(e){return this.tooltip=e,this}setTextChangedCallback(e){return this.onTextChanged=e,this}get readOnly(){return this.node.readOnly}set readOnly(e){this.node.readOnly=e}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}get spellCheck(){return this.node.spellcheck}set spellCheck(e){this.node.spellcheck=e}setSpellCheck(e){return this.spellCheck=e,this}get fontColor(){return this.node.style.color}set fontColor(e){this.node.style.color=e}setFontColor(e){return this.fontColor=e,this}setStyle(e,t){return this.node.style[e]=t,this}getStyle(e){return this.node.style[e]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(e){return void 0===e&&(e=!0),this.node.disabled=!e,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var methods$q={resize:Resize};Object.assign(InputText.prototype,methods$q),ObjectFactory.register("inputText",(function(e){var t=new InputText(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.InputText",InputText);const GetValue$28=Phaser.Utils.Objects.GetValue;var CreateFileInput=function(e,t){var i=document.createElement("input");i.type="file";var s=GetValue$28(t,"accept",""),n=GetValue$28(t,"multiple",!1);return i.setAttribute("accept",s),n?i.setAttribute("multiple",""):i.removeAttribute("multiple"),i},Delay=function(e,t){return void 0===e&&(e=0),new Promise((function(i,s){setTimeout((function(){i(t)}),e)}))},ClickPromise=function({game:e,fileInput:t,closeDelay:i}){return WaitEvent(GetGame(e).events,"focus").then((function(){return Delay(i)})).then((function(){var e={files:t.files};return Promise.resolve(e)}))};const GetValue$27=Phaser.Utils.Objects.GetValue,RemoveFromDOM=Phaser.DOM.RemoveFromDOM;var Open$1=function(e,t){var i=GetValue$27(t,"closeDelay",200),s=CreateFileInput(e,t);return s.click(),ClickPromise({game:e,fileInput:s,closeDelay:i}).then((function(e){return RemoveFromDOM(s),s.remove(),Promise.resolve(e)}))},SyncTo=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},GetCache=function(e,t,i){if(void 0===i)switch(t){case"image":case"svg":i="textures";break;case"animation":i="json";break;case"tilemapTiledJSON":case"tilemapCSV":i="tilemap";break;case"glsl":i="shader";break;default:i=t}return e=GetGame(e),"textures"===i?e.textures:e.cache[i]},FileObjectToCache=function(e,t,i,s,n,a){if(null===n||!1===n);else if(IsFunction(n))n();else{var r=GetCache(e,i,n);r.exists(s)&&r.remove(s)}var o=e.load;if(a&&o.once(`filecomplete-${i}-${s}`,(function(e,t,i){a(i)})),IsFunction(t))t();else{var l=window.URL.createObjectURL(t);o[i](s,l)}o.start()},LoadFile=function(e,t,i,s,n){var a=this.scene;return FileObjectToCache(a,e,t,i,s,n),this},LoadFilePromise=function(e,t,i,s){var n=this.scene;return new Promise((function(a,r){FileObjectToCache(n,e,t,i,s,(function(e){a(e)}))}))};const LoadFileMethods={loadFile:LoadFile,loadFilePromise:LoadFilePromise},DOMElement$1=Phaser.GameObjects.DOMElement,IsPlainObject$l=Phaser.Utils.Objects.IsPlainObject,GetValue$26=Phaser.Utils.Objects.GetValue;class FileChooser extends DOMElement$1{constructor(e,t,i,s,n,a){IsPlainObject$l(t)?(t=GetValue$26(a=t,"x",0),i=GetValue$26(a,"y",0),s=GetValue$26(a,"width",0),n=GetValue$26(a,"height",0)):IsPlainObject$l(s)&&(s=GetValue$26(a=s,"width",0),n=GetValue$26(a,"height",0));var r=document.createElement("input");r.type="file",r.style.display="none";var o=document.createElement("label");o.appendChild(r);var l=GetValue$26(a,"style",void 0);super(e,t,i,o,l),this.type="rexFileChooser",this.resetFromJSON(a),this.resize(s,n);var h=this;r.onchange=function(){h.emit("change",h)},this.setCloseDelay(GetValue$26(a,"closeDelay",200)),r.onclick=function(){ClickPromise({game:e,fileInput:r,closeDelay:h.closeDelay}).then((function(){h.emit("select",h)}))}}resetFromJSON(e){return this.setAccept(GetValue$26(e,"accept","")),this.setMultiple(GetValue$26(e,"multiple",!1)),this}setAccept(e){return void 0===e&&(e=""),this.fileInput.setAttribute("accept",e),this}setMultiple(e){return void 0===e&&(e=!0),e?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(e){return void 0===e&&(e=200),this.closeDelay=e,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(e){return void 0===e&&(e=!0),this.fileInput.disabled=!e,this}}var methods$p={resize:Resize,syncTo:SyncTo};Object.assign(FileChooser.prototype,methods$p,LoadFileMethods),ObjectFactory.register("fileChooser",(function(e){var t=new FileChooser(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.FileChooser",FileChooser);const DropEnableMethods={setDropEnable(e){return void 0===e&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},FilterMethods={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){for(var t in this.filters||(this.filters={}),e)this.filters[t]=e[t];return this}};var Methods$9={resize:Resize,syncTo:SyncTo};Object.assign(Methods$9,DropEnableMethods,FilterMethods,LoadFileMethods);const DragDropEvents={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},DOMElement=Phaser.GameObjects.DOMElement,IsPlainObject$k=Phaser.Utils.Objects.IsPlainObject,GetValue$25=Phaser.Utils.Objects.GetValue;class FileDropZone extends DOMElement{constructor(e,t,i,s,n,a){IsPlainObject$k(t)?(t=GetValue$25(a=t,"x",0),i=GetValue$25(a,"y",0),s=GetValue$25(a,"width",0),n=GetValue$25(a,"height",0)):IsPlainObject$k(s)&&(s=GetValue$25(a=s,"width",0),n=GetValue$25(a,"height",0)),void 0===a&&(a={});var r=document.createElement("div");super(e,t,i,r,GetValue$25(a,"style",void 0)),this.type="rexFileDropZone",this.resize(s,n),this._files=[],this.setDropEnable(GetValue$25(a,"dropEnable",!0));var o=GetValue$25(a,"filters");o&&this.addFilters(o),RouteEvents(this,r,DragDropEvents,{preventDefault:!0,preTest:e=>e.dropEnable}),this.on("drop",(function(e,t){this._files=t.dataTransfer.files;var i=this._files;if(i&&this.filters)for(var s in this.filters){for(var n=this.filters[s],a=[],r=0,o=i.length;r<o;r++){var l=i[r];n(l,i)&&a.push(l)}a.length>0&&this.emit(`drop.${s}`,a)}}),this)}get files(){return this._files}}Object.assign(FileDropZone.prototype,Methods$9),ObjectFactory.register("fileDropZone",(function(e){var t=new FileDropZone(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.FileDropZone",FileDropZone);var GetChildrenWidth$3=function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var t,i,s,n,a,r=0,o=this.sizerChildren,l=!1;if(this.childrenProportion,0===this.orientation)for(var h=!0,d=0,c=o.length;d<c;d++)(t=o[d]).hasOwnProperty("rexSizer")&&((i=t.rexSizer).hidden||(0===(s=i.proportion)||e?(a=this.getChildWidth(t),i.fitRatio>0&&!i.resolved&&(a=void 0),void 0===a&&(0===s||this.hasProportion0Child?l=!0:a=0)):a=0,l||(a+=((n=t.rexSizer.padding).left+n.right)*this.scaleX,h?h=!1:a+=this.space.item*this.scaleX,r+=a)));else for(d=0,c=o.length;d<c;d++)(t=o[d]).hasOwnProperty("rexSizer")&&((i=t.rexSizer).hidden||(void 0===(a=this.getChildWidth(t))&&(l=!0),l||(a+=((n=i.padding).left+n.right)*this.scaleX,r=Math.max(a,r))));return l?void 0:r+(this.space.left+this.space.right)*this.scaleX},GetChildrenHeight$3=function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var t,i,s,n,a,r=0,o=this.sizerChildren,l=!1;if(this.childrenProportion,0===this.orientation)for(var h=0,d=o.length;h<d;h++)(t=o[h]).hasOwnProperty("rexSizer")&&((i=t.rexSizer).hidden||(void 0===(a=this.getChildHeight(t))&&(l=!0),l||(a+=((n=i.padding).top+n.bottom)*this.scaleY,r=Math.max(a,r))));else{var c=!0;for(h=0,d=o.length;h<d;h++)(t=o[h]).hasOwnProperty("rexSizer")&&((i=t.rexSizer).hidden||(0===(s=i.proportion)||e?(a=this.getChildHeight(t),i.fitRatio>0&&!i.resolved&&(a=void 0),void 0===a&&(0===s||this.hasProportion0Child?l=!0:a=0)):a=0,l||(a+=((n=i.padding).top+n.bottom)*this.scaleY,c?c=!1:a+=this.space.item*this.scaleY,r+=a)))}return l?void 0:r+(this.space.top+this.space.bottom)*this.scaleY},GetExpandedChildWidth$2=function(e,t){var i;void 0===t&&(t=this.width*this.scaleX);var s=e.rexSizer;if(0===this.orientation)s.proportion>0&&this.proportionLength>0&&(i=s.proportion*this.proportionLength);else if(s.expand){var n=this.space,a=t-(n.left+n.right)*this.scaleX,r=s.padding;i=a-(r.left+r.right)*this.scaleX}return i},GetExpandedChildHeight$2=function(e,t){var i;void 0===t&&(t=this.height);var s=e.rexSizer;if(0===this.orientation){if(s.expand){var n=this.space,a=t-(n.top+n.bottom)*this.scaleY,r=s.padding;i=a-(r.top+r.bottom)*this.scaleY}}else s.proportion>0&&this.proportionLength>0&&(i=s.proportion*this.proportionLength);return i},GetChildrenSizers$3=function(e){void 0===e&&(e=[]);for(var t,i=this.sizerChildren,s=0,n=i.length;s<n;s++)(t=i[s]).isRexSizer&&e.push(t);return e},PreLayout$3=function(){var e,t;this.hasRatioFitChild=!1;for(var i=this.sizerChildren,s=0,n=i.length;s<n;s++)(t=(e=i[s]).rexSizer).hidden||t.fitRatio>0&&(ResizeGameObject(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,PreLayout$4.call(this),this};const Wrap$1=Phaser.Math.Wrap;var LayoutChildren$4=function(){for(var e,t,i,s,n,a,r,o,l,h,d,c,u=this.sizerChildren,p=this.innerLeft,g=this.innerTop,m=this.innerWidth,f=this.innerHeight,v=p,b=g,y=this.startChildIndex,C=0,x=u.length;C<x;C++)c=0===y?C:Wrap$1(C+y,0,x),this.rtl&&(c=x-c-1),(e=u[c]).rexSizer.hidden||(i=(t=e.rexSizer).padding,PreLayoutChild.call(this,e),e.isRexSpace?(h=0,d=0):(h=this.getExpandedChildWidth(e),d=this.getExpandedChildHeight(e)),e.isRexSizer?(e.runLayout(this,h,d),CheckSize(e,this)):ResizeGameObject(e,h,d),void 0===h&&(h=GetDisplayWidth(e)),void 0===d&&(d=GetDisplayHeight(e)),0===this.orientation?(s=v+i.left*this.scaleX,a=0===t.proportion||0===this.proportionLength?h:t.proportion*this.proportionLength,n=b+i.top*this.scaleY,r=f-(i.top+i.bottom)*this.scaleY):(s=v+i.left*this.scaleX,a=m-(i.left+i.right)*this.scaleX,n=b+i.top*this.scaleY,r=0===t.proportion||0===this.proportionLength?d:t.proportion*this.proportionLength),void 0===h&&(h=GetDisplayWidth(e)),void 0===d&&(d=GetDisplayHeight(e)),o=(t.alignOffsetX+t.alignOffsetOriginX*h)*this.scaleX,l=(t.alignOffsetY+t.alignOffsetOriginY*d)*this.scaleY,LayoutChild.call(this,e,s,n,a,r,t.align,o,l),0===this.orientation?v+=a+(i.left+i.right)*this.scaleX+this.space.item*this.scaleX:b+=r+(i.top+i.bottom)*this.scaleY+this.space.item*this.scaleY)},ResolveWidth$1=function(e){if(void 0!==(e=ResolveWidth$3.call(this,e))&&0===this.orientation&&void 0===this.proportionLength){var t=e-this.childrenWidth;t>0?(t=e-this.getChildrenWidth(!1),this.proportionLength=t/this.childrenProportion):this.proportionLength=0}return e},ResolveHeight$1=function(e){if(void 0!==(e=ResolveHeight$3.call(this,e))&&1===this.orientation&&void 0===this.proportionLength){var t=e-this.childrenHeight;t>0?(t=e-this.getChildrenHeight(!1),this.proportionLength=t/this.childrenProportion):this.proportionLength=0}return e},HasWidthWrap$1=function(){return!(!this.hasRatioFitChild||1!==this.orientation)||HasWidthWrap$2.call(this)},ExpandFitRatioChildren=function(e,t){if(this.hasRatioFitChild){var i,s,n;0===this.orientation?i=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:(this.getInnerPadding("left"),this.getInnerPadding("right"),this.scaleX);for(var a=this.sizerChildren,r=0,o=a.length;r<o;r++){var l,h;if(!(h=(l=a[r]).rexSizer).hidden){var d=h.fitRatio;d&&(0===this.orientation?s=(n=i-(this.getChildOuterPadding(l,"top")+this.getChildOuterPadding(l,"bottom"))*this.scaleY)*d:n=(s=i-(this.getChildOuterPadding(l,"top")+this.getChildOuterPadding(l,"bottom"))*this.scaleX)/d,ResizeGameObject(l,s,n),l.isRexSizer&&l.setMinSize(s,n),h.resolved=!0)}}}},RunWidthWrap$2=function(e){this.wrapResult||(1===this.orientation&&ExpandFitRatioChildren.call(this,e,void 0),RunWidthWrap$3.call(this,e))},HasHeightWrap$1=function(){return!(!this.hasRatioFitChild||0!==this.orientation)||HasHeightWrap$2.call(this)},RunHeightWrap$2=function(e){this.wrapResult||(0===this.orientation&&ExpandFitRatioChildren.call(this,void 0,e),RunHeightWrap$3.call(this,e))};const Zone=Phaser.GameObjects.Zone;class Space extends Zone{constructor(e){super(e,0,0,1,1),this.isRexSpace=!0}}var GetNearestChildIndex$1=function(e,t){var i,s=this.sizerChildren;if(0===s.length)return-1;for(var n=-1,a=1/0,r=0,o=s.length;r<o;r++){var l=s[r];a>(i=0===this.orientation?Math.abs(l.left-e):Math.abs(l.top-t))&&(a=i,n=r)}return l=s[s.length-1],a>(i=0===this.orientation?Math.abs(l.right-e):Math.abs(l.bottom-t))&&(a=i,n=r+1),n};const IsPlainObject$j=Phaser.Utils.Objects.IsPlainObject,GetValue$24=Phaser.Utils.Objects.GetValue,ALIGN_CENTER$2=Phaser.Display.Align.CENTER,PROPORTIONMODE={min:0,full:-1};var Add$6=function(e,t,i,s,n,a,r,o,l,h){var d,c,u,p;AddChild$1.call(this,e);var g=e.isRexSpace,m=typeof t;if(null===t)return this;if("number"===m);else if("string"===m)t=PROPORTIONMODE[t];else if(IsPlainObject$j(t)){var f;t=GetValue$24(f=t,"proportion",void 0),i=GetValue$24(f,"align",ALIGN_CENTER$2),s=GetValue$24(f,"padding",0),n=GetValue$24(f,"expand",!1),a=GetValue$24(f,"key",void 0),r=GetValue$24(f,"index",void 0),e.isRexSizer||(o=GetValue$24(f,"minWidth",void 0),l=GetValue$24(f,"minHeight",void 0)),h=GetValue$24(f,"fitRatio",0),d=GetValue$24(f,"offsetX",0),c=GetValue$24(f,"offsetY",0),u=GetValue$24(f,"offsetOriginX",0),p=GetValue$24(f,"offsetOriginY",0)}return"string"==typeof i&&(i=AlignConst[i]),void 0===t&&(t=g?1:0),void 0===i&&(i=ALIGN_CENTER$2),void 0===s&&(s=0),void 0===n&&(n=!1),void 0===o&&(g?o=0:e.isRexSizer||(o=e._minWidth)),void 0===l&&(g?l=0:e.isRexSizer||(l=e._minHeight)),void 0===h||!1===h?h=0:!0===h&&(h=GetDisplayWidth(e)/GetDisplayHeight(e)),void 0===d&&(d=0),void 0===c&&(c=0),void 0===u&&(u=0),void 0===p&&(p=0),(f=this.getSizerConfig(e)).proportion=t,f.align=i,f.padding=GetBoundsConfig$1(s),f.expand=n,f.fitRatio=0===t?h:0,f.alignOffsetX=d,f.alignOffsetY=c,f.alignOffsetOriginX=u,f.alignOffsetOriginY=p,void 0===r||r>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(r,0,e),e.isRexSizer||(t>0&&(0===this.orientation?e.minWidth=void 0===o?GetDisplayWidth(e):o:e.minHeight=void 0===l?GetDisplayHeight(e):l),n&&(0===this.orientation?e.minHeight=l:e.minWidth=o)),void 0!==a&&this.addChildrenMap(a,e),this};const AddChildMethods$6={add:Add$6,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return void 0===t&&(t=1),Add$6.call(this,new Space(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,i,s,n,a,r,o){return IsPlainObject$j(i)&&(i.index=e),Add$6.call(this,t,i,s,n,a,r,e,o),this},insertAtPosition(e,t,i,s,n,a,r,o,l){var h=GetNearestChildIndex$1.call(this,e,t);return-1===h&&(h=void 0),this.insert(h,i,s,n,a,r,o,l),this}},RemoveItem$2=Phaser.Utils.Array.Remove,RemoveChildMethods$5={remove(e,t){return this.getParentSizer(e)!==this||(RemoveItem$2(this.sizerChildren,e),RemoveChild.call(this,e,t)),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,ClearChildren.call(this,e),this}},AlignMethods={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return"string"==typeof t&&(t=AlignConst[t]),this.getSizerConfig(e).align=t,this}},ProportionMethods={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},ExpandMethods$1={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}};var SetChildrenAlignMode=function(e){void 0===e&&(e="left");var t=this.sizerChildren,i=t[0],s=i&&i.isRexSpace;"right"===e||"bottom"===e||"center"===e?s||this.insertSpace(0):s&&this.remove(i,!0);var n=t.length-1,a=t[n],r=a&&a.isRexSpace;return"center"===e?r||this.insertSpace(n+1):r&&this.remove(a,!0),this};const SortChildrenMethods={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort((function(i,s){var n=i.getData(e),a=s.getData(e);return t?a-n:n-a})),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort((function(i,s){var n=i[e],a=s[e];return t?a-n:n-a})),this}};var methods$o={getChildrenWidth:GetChildrenWidth$3,getChildrenHeight:GetChildrenHeight$3,getExpandedChildWidth:GetExpandedChildWidth$2,getExpandedChildHeight:GetExpandedChildHeight$2,getChildrenSizers:GetChildrenSizers$3,preLayout:PreLayout$3,layoutChildren:LayoutChildren$4,resolveWidth:ResolveWidth$1,resolveHeight:ResolveHeight$1,hasWidthWrap:HasWidthWrap$1,runWidthWrap:RunWidthWrap$2,hasHeightWrap:HasHeightWrap$1,runHeightWrap:RunHeightWrap$2,setChildrenAlignMode:SetChildrenAlignMode};Object.assign(methods$o,AddChildMethods$6,RemoveChildMethods$5,AlignMethods,ProportionMethods,ExpandMethods$1,SortChildrenMethods);var GetChildrenProportion=function(){for(var e,t,i=0,s=this.sizerChildren,n=0,a=s.length;n<a;n++)(e=s[n]).rexSizer.hidden||((t=e.rexSizer.proportion)>0?i+=t:0===t&&(this.hasProportion0Child=!0));return i};const IsPlainObject$i=Phaser.Utils.Objects.IsPlainObject,GetValue$23=Phaser.Utils.Objects.GetValue;class Sizer extends Base$1{constructor(e,t,i,s,n,a,r){IsPlainObject$i(t)?(t=GetValue$23(r=t,"x",0),i=GetValue$23(r,"y",0),s=GetValue$23(r,"width",void 0),n=GetValue$23(r,"height",void 0),a=GetValue$23(r,"orientation",0)):IsPlainObject$i(s)?(s=GetValue$23(r=s,"width",void 0),n=GetValue$23(r,"height",void 0),a=GetValue$23(r,"orientation",0)):IsPlainObject$i(a)&&(a=GetValue$23(r=a,"orientation",0)),void 0===a&&(a=0),super(e,t,i,s,n,r),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(a),this.setItemSpacing(GetValue$23(r,"space.item",0)),this.setStartChildIndex(GetValue$23(r,"startChildIndex",0)),this.setRTL(GetValue$23(r,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(e){return this.orientation=GetOrientationMode(e),this}setItemSpacing(e){return this.space.item=e,this}setStartChildIndex(e){return this.startChildIndex=e,this}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}get childrenProportion(){return void 0===this._childrenProportion&&(this._childrenProportion=GetChildrenProportion.call(this)),this._childrenProportion}}Object.assign(Sizer.prototype,methods$o);var SetDisplaySize=function(e,t,i){if(e){var s=null==t,n=null==i;return s&&n||(s||(e.displayWidth=t),n||(e.displayHeight=i),s&&(e.scaleX=e.scaleY),n&&(e.scaleY=e.scaleX)),e}},ResetDisplayContent$2=function(e){void 0===e?e={}:"string"==typeof e&&(e={text:e});var t=e.text||"";this.setText(t);var i=this.childrenMap.icon;if(i){e.icon?this.show(i):this.hide(i);var s=e.iconSize;s&&(this.setChildDisplaySize(i,s,s),void 0!==this.iconWidth&&this.setIconSize(s)),!0!==e.icon&&this.setIconTexture(e.icon,e.iconFrame)}var n=this.childrenMap.action;if(n){e.action?this.show(n):this.hide(n);var a=e.actionSize;a&&(this.setChildDisplaySize(n,a,a),void 0!==this.actionWidth&&this.setActionSize(a)),!0!==e.action&&this.setActionTexture(e.action,e.actionFrame)}return this},methods$n={appendText:AppendText$1,resetDisplayContent:ResetDisplayContent$2};class LabelBase extends Sizer{get text(){var e=this.childrenMap.text;return e?e.text:""}set text(e){var t=this.childrenMap.text;t&&t.setText(e)}setText(e){return this.text=e,this}setIconTexture(e,t){var i=this.childrenMap.icon;return i&&i.setTexture?(i.setTexture(e,t),void 0!==this.iconWidth&&void 0!==this.iconHeight&&(SetDisplaySize(i,this.iconWidth,this.iconHeight),this.resetChildScaleState(i)),this):this}setTexture(e,t){return this.setIconTexture(e,t),this}setIconSize(e,t){return void 0===t&&(t=e),this.iconWidth=e,this.iconHeight=t,this}get texture(){var e=this.childrenMap.icon;if(e)return e.texture}get frame(){var e=this.childrenMap.icon;if(e)return e.frame}setActionTexture(e,t){var i=this.childrenMap.action;return i&&i.setTexture?(i.setTexture(e,t),void 0!==this.actionWidth&&void 0!==this.actionHeight&&(SetDisplaySize(i,this.actionWidth,this.actionHeight),this.resetChildScaleState(i)),this):this}get actionTexture(){var e=this.childrenMap.action;if(e)return e.texture}get actionFrame(){var e=this.childrenMap.action;if(e)return e.frame}setActionSize(e,t){return void 0===t&&(t=e),this.actionWidth=e,this.actionHeight=t,this}preLayout(){var e=this.childrenMap.icon;e&&void 0!==this.iconWidth&&void 0!==this.iconHeight&&SetDisplaySize(e,this.iconWidth,this.iconHeight);var t=this.childrenMap.action;t&&void 0!==this.actionWidth&&void 0!==this.actionHeight&&SetDisplaySize(t,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(e,t,i){var s=this.childrenMap.iconMask;s&&(s.setPosition(),this.resetChildPositionState(s));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),super.postLayout(e,t,i),this}resize(e,t){super.resize(e,t);var i=this.childrenMap.iconMask;i&&i.resize();var s=this.childrenMap.actionMask;return s&&s.resize(),this}}Object.assign(LabelBase.prototype,methods$n);var AddChildMask=function(e,t,i,s){var n=new DefaultMaskGraphics(t,i,s);if(e&&!e.isRexSizer){var a=n.createGeometryMask();e.setMask(a),this.once("destroy",(function(){e.setMask(),a.destroy()}))}return this.pin(n),n};const TextClass=Phaser.GameObjects.Text;var IsTextGameObject=function(e){return e instanceof TextClass};const BitmapTextClass=Phaser.GameObjects.BitmapText;var IsBitmapTextGameObject=function(e){return e instanceof BitmapTextClass};const TextType=0,TagTextType=1,BitmapTextType=2;var GetTextObjectType=function(e){return IsBitmapTextGameObject(e)?BitmapTextType:IsTextGameObject(e)?TextType:TagTextType},TextWrapByCharCallback=function(e,t){for(var i=[],s=e.split("\n"),n=t.style,a=n.wordWrapWidth,r=n.hasOwnProperty("wrapMode")?n.wrapMode:3,o=t.context,l=0,h=s.length;l<h;l++)WrapLine(o,s[l],a,r,i);return i},GetTokenArray=function(e,t){var i;if(2===t)i=e.split("");else{i=[];for(var s,n=e.split(" "),a=0,r=n.length;a<r;a++)s=n[a],a<r-1?IsASCIIString(s)?i.push(s+" "):(i.push(...s.split("")),i.push(" ")):""!==s&&(IsASCIIString(s)?i.push(s):i.push(...s.split("")))}return i},WrapLine=function(e,t,i,s,n){if(t.length<=100&&e.measureText(t).width<=i)return n.push(t),n;for(var a,r,o=GetTokenArray(t,s),l=[],h=i,d=0,c=o.length;d<c;d++)a=o[d],(h-=r=e.measureText(a).width)<0&&(n.push(l.join("")),l.length=0,h=i-r),l.push(a);return l.length>0&&n.push(l.join("")),n},SetWrapMode=function(e,t){switch(GetTextObjectType(e)){case TextType:switch("string"==typeof t&&(t=WRAPMODE$1[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=TextWrapByCharCallback;break;default:e.style.wordWrapCallback=null}break;case TagTextType:"string"==typeof t&&(t=WRAPMODE$1[t]||0),e.style.wrapMode=t}},TextRunWidthWrap=function(e){return function(t){var i=e.padding,s=t-(i.left+i.right)*e.scaleX,n=e.style;return IsTextGameObject(e)?(n.wordWrapWidth=s,n.maxLines=0):(0===n.wrapMode&&(n.wrapMode=1),n.wrapWidth=s,n.maxLines=0),n.fixedWidth=t,n.fixedHeight=0,e.updateText(),e.minHeight=e.height,e}},DynamicTextRunWidthWrap=function(e){return function(t){return e.setFixedSize(t,0).runWordWrap(),e.minHeight=e.height,e}},BitmapTextRunWidthWrap=function(e){return function(t){return e.setMaxWidth(t),e.minHeight=e.height,e}},IsDynamicTextGameObject=function(e){return e instanceof DynamicText},WrapExpandText=function(e,t){return void 0===t&&(t=0),e._minWidth=t,e.runWidthWrap=IsDynamicTextGameObject(e)?DynamicTextRunWidthWrap(e):IsBitmapTextGameObject(e)?BitmapTextRunWidthWrap(e):TextRunWidthWrap(e),e};const MaxTestCount=65535;var FontSizeFit=function(e,t,i){if(null==t)return e;if(0===t)return SetTextWidth(e,0,i),e;var s=e.text.length;if(0===s)return SetTextWidth(e,t,i),e;var n=Math.floor(1.5*t/s);void 0!==i&&n>i&&(n=Math.floor(i));for(var a={},r=TestFontSize(e,n,t,i,a),o=0;o<=MaxTestCount&&0!==r;o++){if((n+=r)<0){n=0;break}r=TestFontSize(e,n,t,i,a)}return o===MaxTestCount&&console.warn(`FontSizeFit: Test count exceeds ${MaxTestCount}`),e.setFontSize(n),SetTextWidth(e,t,i),e},GetTextSize=function(e,t,i){return void 0===i[t]&&(e.setFontSize(t),i[t]={width:e.width,height:e.height}),i[t]},TestFontSize=function(e,t,i,s,n){var a,r=GetTextSize(e,t,n),o=GetTextSize(e,t+1,n);if(void 0!==s)if(r.height<=s&&o.height>s)a=0;else{if(r.height>s)return-1;a=Math.floor(s-r.height)}if(r.width<=i&&o.width>i)return 0;if(r.width>i)return-1;var l=Math.floor(i-r.width);return void 0===a?l:Math.min(l,a)},SetTextWidth=function(e,t,i){var s=e.style;s&&(s.fixedWidth=t,s.parent.width=t,void 0!==i&&(s.fixedHeight=i,s.parent.height=i),s.update(!1))};const GetValue$22=Phaser.Utils.Objects.GetValue;var FontSizeExpandText=function(e,t){"number"==typeof t&&(t={minWidth:t});var i=GetValue$22(t,"minWidth",0),s=GetValue$22(t,"minHeight",0),n=GetValue$22(t,"fitHeight",!1);return e._minWidth=i,e._minHeight=s,n?(e.runWidthWrap=function(t){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(t,i){return FontSizeFit(e,t,i),e}):(e.runWidthWrap=function(t){return e.setFixedSize&&e.setFixedSize(0,0),FontSizeFit(e,t,void 0),e},e.resize=function(t,i){return e.width===t&&e.height===i||e.setFixedSize(t,i),e}),e};const GetValue$21=Phaser.Utils.Objects.GetValue;class Label extends LabelBase{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexLabel";var i,s=GetValue$21(t,"background",void 0),n=GetValue$21(t,"icon",void 0),a=GetValue$21(t,"iconMask",void 0),r=GetValue$21(t,"text",void 0),o=GetValue$21(t,"action",void 0),l=GetValue$21(t,"actionMask",void 0),h=GetValue$21(t,"align",void 0);if(s&&this.addBackground(s),n){0===this.orientation?(r||o)&&(i={right:GetValue$21(t,"space.icon",0),top:GetValue$21(t,"space.iconTop",0),bottom:GetValue$21(t,"space.iconBottom",0),left:GetValue$21(t,"space.iconLeft",0)}):(r||o)&&(i={bottom:GetValue$21(t,"space.icon",0),left:GetValue$21(t,"space.iconLeft",0),right:GetValue$21(t,"space.iconRight",0),top:GetValue$21(t,"space.iconTop",0)});var d=GetValue$21(t,"squareFitIcon",!1)?1:0;if(this.add(n,{proportion:0,padding:i,fitRatio:d}),a&&(a=AddChildMask.call(this,n,n,1)),!d){var c=GetValue$21(t,"iconSize",void 0);this.setIconSize(GetValue$21(t,"iconWidth",c),GetValue$21(t,"iconHeight",c))}}if(r){var u=GetValue$21(t,"wrapText",!1),p=GetValue$21(t,"adjustTextFontSize",!1);u?(!0===u&&(u="word"),SetWrapMode(r,u),t.expandTextWidth=!0,WrapExpandText(r)):p&&(t.expandTextWidth=!0,t.expandTextHeight=!0,FontSizeExpandText(r,{fitHeight:!0}));var g,m,f=GetValue$21(t,"space.text",0),v=GetValue$21(t,"expandTextWidth",!1),b=GetValue$21(t,"expandTextHeight",!1);0===this.orientation?(g=v?1:0,o&&(i={right:f}),m=b):(g=b?1:0,o&&(i={bottom:f}),m=v),this.add(r,{proportion:g,expand:m,padding:i})}if(o&&(i=0===this.orientation?{top:GetValue$21(t,"space.actionTop",0),bottom:GetValue$21(t,"space.actionBottom",0),right:GetValue$21(t,"space.actionRight",0)}:{left:GetValue$21(t,"space.actionLeft",0),right:GetValue$21(t,"space.actionRight",0),bottom:GetValue$21(t,"space.actionBottom",0)},d=GetValue$21(t,"squareFitAction",!1)?1:0,this.add(o,{proportion:0,padding:i,fitRatio:d}),l&&(l=AddChildMask.call(this,o,o,1)),!d)){var y=GetValue$21(t,"actionSize");this.setActionSize(GetValue$21(t,"actionWidth",y),GetValue$21(t,"actionHeight",y))}this.setChildrenAlignMode(h),this.addChildrenMap("background",s),this.addChildrenMap("icon",n),this.addChildrenMap("iconMask",a),this.addChildrenMap("text",r),this.addChildrenMap("action",o),this.addChildrenMap("actionMask",l)}}const GetValue$20=Phaser.Utils.Objects.GetValue;var CreateCanvas=function(e,t){var i=GetValue$20(t,"canvas"),s=GetValue$20(i,"width",128),n=GetValue$20(i,"height",128),a=new Canvas(e,0,0,s,n);e.add.existing(a);var r=GetValue$20(i,"key"),o=GetValue$20(i,"frame"),l=GetValue$20(i,"fill");return void 0!==l?a.fill(l):void 0!==r&&a.loadTexture(r,o),a.setTexture=a.loadTexture.bind(a),a},CreateImageBox=function(e,t){var i=new ImageBox(e,{scaleUp:GetValue$20(t,"scaleUpIcon",!1),background:GetValue$20(t,"iconBackground"),image:CreateCanvas(e,t)});return e.add.existing(i),i};const GetValue$1$=Phaser.Utils.Objects.GetValue;var GetClickTarget=function(e,t){var i=GetValue$1$(t,"clickTarget",this);return"string"==typeof i&&(i=e.getElement(i)),i};const GetValue$1_=Phaser.Utils.Objects.GetValue;var CreateClickBehavior=function(e,t){var i=GetClickTarget(e,t);if(i){var s=GetValue$1_(t,"click"),n=new Button(i,s);return n.on("click",e.open,e),n}};const Config={accept:"image/*",multiple:!1};var OnSelectFile=function(e,t){if(0!==t.length){var i=e.childrenMap.icon,s=i.image,n=t[0];return s.loadFromFilePromise(n).then((function(){return i.scaleImage(),e.emit("select",n,e),Promise.resolve(n)}))}},CreateFileChooser=function(e,t){var i=e.scene,s=new FileChooser(i,Config);return i.add.existing(s),e.pin(s),s.on("change",(function(){OnSelectFile(e,s.files)})),s};const OpenMethods={async openPromise(){var e=this;return Open$1(this.scene.game,Config).then((function(t){return OnSelectFile(e,t.files)}))},open(){return this.openPromise(),this},setClickOpenEnable(e){return void 0===e&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}};var GetFileName=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},SaveTexture=function(e){return this.childrenMap.canvas.generateTexture(e),this},methods$m={getFileName:GetFileName,saveTexture:SaveTexture};Object.assign(methods$m,OpenMethods);const GetValue$1Z=Phaser.Utils.Objects.GetValue;class ImageInputLabel extends Label{constructor(e,t){var i=CreateImageBox(e,t);t.icon=i,super(e,t),this.type="rexImageFileInputLabel";var s=this.iconWidth,n=this.iconWidth;void 0!==s&&void 0!==n&&i.resize(s,n),this.clickTarget=GetClickTarget(this,t),this.clickTarget&&(GetValue$1Z(t,"domButton",!0)?this.fileChooser=CreateFileChooser(this):this.clickBehavior=CreateClickBehavior(this,t)),this.addChildrenMap("canvas",i.image),this.addChildrenMap("iconBackground",i.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(e,t,i){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(e,t,i)}}Object.assign(ImageInputLabel.prototype,methods$m),ObjectFactory.register("imageInputLabel",(function(e){var t=new ImageInputLabel(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ImageInputLabel",ImageInputLabel);let Style$3=class extends ComponentBase{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(HasProperty(e,t))return e[t];var i=e.parent;return HasProperty(i,t)?i[t]:void 0}set(e,t,i){return HasProperty(e,t)?e[t]=i:HasProperty(e.parent,t)&&(e.parent[t]=i),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.parent.setFrame(e)}get scale(){return this.parent.scaleX}set scale(e){this.parent.setScale(e)}};const GetValue$1Y=Phaser.Utils.Objects.GetValue;class StyleManager extends ComponentBase{constructor(e,t){super(e,t),this.style=GetValue$1Y(t,"style",this);var i=GetValue$1Y(t,"propertiesMap");this.activeStyle=ExtractStyle(t,"active",i),this.hoverStyle=ExtractStyle(t,"hover",i),this.disableStyle=ExtractStyle(t,"disable",i),this.onModifyStyle=GetValue$1Y(t,"onModifyStyle")}getStyle(e){return GetPartialData(this.style,e)}modifyStyle(e){for(var t in e)this.style[t]=e[t];return this.onModifyStyle&&this.onModifyStyle(this.parent,e),this}applyStyle(e){if(e){var t=this.getStyle(e);return IsKeyValueEqual(t,e)?void 0:(this.modifyStyle(e),t)}}setActiveState(e){return SetStateEnableMethod.call(this,"active",e),this}setHoverState(e){return SetStateEnableMethod.call(this,"hover",e),this}setDisableState(e){return SetStateEnableMethod.call(this,"disable",e),this}}var ExtractStyle=function(e,t,i){var s=ExtractByPrefix(e,t);if(i)for(var n in s)i.hasOwnProperty(n)&&(s[i[n]]=s[n],delete s[n]);return s},SetStateEnableMethod=function(e,t){void 0===t&&(t=!0);var i=`${e}State`,s=`${e}Style`,n=`${e}StyleSave`;this[i]!==t&&(this[i]=t,t?this[n]=this.applyStyle(this[s]):(this.applyStyle(this[n]),this[n]=void 0))};const HelperMethods={addStyleManager(e){return this.styleManager=new StyleManager(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}},PhaserImage=Phaser.GameObjects.Image,GetValue$1X=Phaser.Utils.Objects.GetValue;class StatesImage extends PhaserImage{constructor(e,t){void 0===t&&(t={}),super(e,GetValue$1X(t,"x",0),GetValue$1X(t,"y",0),GetValue$1X(t,"key",""),GetValue$1X(t,"frame",void 0)),this.type="rexStatesImage";var i=GetValue$1X(t,"effects",!0);i&&AddEffectProperties(this,i),this.style=new Style$3(this,t),t.style=this.style,this.addStyleManager(t),delete t.style}}Object.assign(StatesImage.prototype,HelperMethods),ObjectFactory.register("statesImage",(function(e){var t=new StatesImage(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesImage",StatesImage);class StatesRoundRectangle extends RoundRectangle$2{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexStatesRoundRectangleShape",t.style=this,t.propertiesMap=PropertiesMap$1,this.addStyleManager(t),delete t.style,delete t.propertiesMap}}const PropertiesMap$1={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(StatesRoundRectangle.prototype,HelperMethods),ObjectFactory.register("statesRoundRectangle",(function(e){var t=new StatesRoundRectangle(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesRoundRectangle",StatesRoundRectangle);let Style$2=class extends ComponentBase{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(HasProperty(e,t))return e[t];var i=e.parent;return HasProperty(i,t)?i[t]:void 0}set(e,t,i){return HasProperty(e,t)?e[t]=i:HasProperty(e.parent,t)&&(e.parent[t]=i),!0}get key(){return this.parent.texture.key}set key(e){this.key!==e&&this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.frame!==e&&this.parent.setFrame(e)}};const PhaserNineSlice=Phaser.GameObjects.NineSlice,GetValue$1W=Phaser.Utils.Objects.GetValue;class StatesNineSlice extends PhaserNineSlice{constructor(e,t){void 0===t&&(t={}),super(e,GetValue$1W(t,"x",0),GetValue$1W(t,"y",0),GetValue$1W(t,"key",null),GetValue$1W(t,"frame",null),GetValue$1W(t,"width",0),GetValue$1W(t,"height",0),GetValue$1W(t,"leftWidth",0),GetValue$1W(t,"rightWidth",0),GetValue$1W(t,"topHeight",0),GetValue$1W(t,"bottomHeight",0)),this.type="rexStatesNineSlice";var i=GetValue$1W(t,"effects",!0);i&&AddEffectProperties(this,i),this.style=new Style$2(this,t),t.style=this.style,this.addStyleManager(t),delete t.style}}Object.assign(StatesNineSlice.prototype,HelperMethods),ObjectFactory.register("statesNineSlice",(function(e){var t=new StatesNineSlice(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesNineSlice",StatesNineSlice);let Style$1=class extends ComponentBase{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(HasProperty(e,t))return e[t];var i=e.parent;return HasProperty(i,t)?i[t]:void 0}set(e,t,i){return HasProperty(e,t)?e[t]=i:HasProperty(e.parent,t)&&(e.parent[t]=i),!0}get key(){return this.parent.textureKey}set key(e){this.key!==e&&this.parent.setBaseTexture(e,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(e){this.frame!==e&&this.parent.setBaseTexture(this.parent.textureKey,e)}};const GetValue$1V=Phaser.Utils.Objects.GetValue;class StatesNinePatch extends NinePatch$1{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexStatesNinePatch";var i=GetValue$1V(t,"effects",!0);i&&AddEffectProperties(this,i),this.style=new Style$1(this,t),t.style=this.style,this.addStyleManager(t),delete t.style}}Object.assign(StatesNinePatch.prototype,HelperMethods),ObjectFactory.register("statesNinePatch",(function(e){var t=new StatesNinePatch(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesNinePatch",StatesNinePatch);const PhaserText=Phaser.GameObjects.Text,GetValue$1U=Phaser.Utils.Objects.GetValue;class StatesText extends PhaserText{constructor(e,t){void 0===t&&(t={}),super(e,GetValue$1U(t,"x",0),GetValue$1U(t,"y",0),GetValue$1U(t,"text",""),t),this.type="rexStatesText",t.style=this.style,t.onModifyStyle=function(e,t){var i=t.hasOwnProperty("fontStyle")||t.hasOwnProperty("fontSize")||t.hasOwnProperty("fontFamily");e.style.update(i)},this.addStyleManager(t),delete t.style}}Object.assign(StatesText.prototype,HelperMethods),ObjectFactory.register("statesText",(function(e){var t=new StatesText(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesText",StatesText);class Style extends ComponentBase{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(HasProperty(e,t))return e[t];var i=e.parent;return HasProperty(i,t)?i[t]:void 0}set(e,t,i){return HasProperty(e,t)?e[t]=i:HasProperty(e.parent,t)&&(e.parent[t]=i),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(e){this.parent.setFontSize(e)}get tint(){return this.parent.tintTopLeft}set tint(e){this.parent.setTint(e)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(e){this.parent.setLetterSpacing(e)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(e){this.parent.setLineSpacing(e)}}const PhaserBitmapText=Phaser.GameObjects.BitmapText,GetValue$1T=Phaser.Utils.Objects.GetValue;class StatesBitmapText extends PhaserBitmapText{constructor(e,t){void 0===t&&(t={});var i=GetValue$1T(t,"x",0),s=GetValue$1T(t,"y",0),n=GetValue$1T(t,"font",""),a=GetValue$1T(t,"fontSize",!1),r=GetValue$1T(t,"align",0),o=GetValue$1T(t,"tint");super(e,i,s,n,"",a,r),this.type="rexStatesBitmapText",void 0!==o&&this.setTint(o);var l=GetValue$1T(t,"effects",!0);l&&AddEffectProperties(this,l),this.style=new Style(this,t),t.style=this.style,this.addStyleManager(t),delete t.style}}Object.assign(StatesBitmapText.prototype,HelperMethods),ObjectFactory.register("statesBitmapText",(function(e){var t=new StatesBitmapText(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesBitmapText",StatesBitmapText);class StatesBarRectangle extends LineProgress$1{constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("value")||(t.value=0),t.hasOwnProperty("hover.bar")||(t["hover.bar"]=!0),t.hasOwnProperty("easeDuration")||(t.easeDuration=200),t.hasOwnProperty("ease")||(t.ease="Quad"),SetValue(t,"easeValue.duration",t.easeDuration),SetValue(t,"easeValue.ease",t.ease),super(e,t),this.type="rexStatesBarRectangleShape",this.barState=!1,t.style=this,t.propertiesMap=PropertiesMap,this.addStyleManager(t),delete t.style,delete t.propertiesMap}get bar(){return this.barState}set bar(e){e=!!e,this.barState!==e&&(this.barState=e,this.easeValueTo(this.barState?1:0))}}const PropertiesMap={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign(StatesBarRectangle.prototype,HelperMethods),ObjectFactory.register("statesBarRectangle",(function(e){var t=new StatesBarRectangle(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.StatesBarRectangle",StatesBarRectangle);var SetChart=function(e){return window.Chart?(this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,FillConfig(this,e)),this):(console.error("Can not find chartjs! Load chartjs in preload stage.\nscene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');"),this)},FillConfig=function(e,t){void 0===t&&(t={}),void 0===t.options&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var s=!1;void 0===i.animation?i.animation={}:!1===i.animation&&(s=!0,i.animation={});var n=i.animation;s&&(n.duration=0);var a=n.onProgress;n.onProgress=function(t){a&&a(t),e.needRedraw()};var r=n.onComplete;return n.onComplete=function(t){r&&r(t),e.needRedraw()},t},GetChartDataset=function(e){if(void 0!==this.chart){if("string"!=typeof e)return this.chart.data.datasets[e];for(var t,i=this.chart.data.datasets,s=0,n=i.length;s<n;s++)if((t=i[s]).label===e)return t}},GetChartData=function(e,t){var i=this.getChartDataset(e);if(void 0!==i){if("string"==typeof t&&-1===(t=this.chart.data.labels.indexOf(t)))return;return i.data[t]}},SetChartData=function(e,t,i){if(void 0===this.chart)return this;var s=this.getChartDataset(e);return"string"==typeof t&&-1===(t=this.chart.data.labels.indexOf(t))||(s.data[t]=i),this},UpdateChart=function(){return void 0===this.chart||this.chart.update(),this};let Chart$1=class extends Canvas{constructor(e,t,i,s,n,a){super(e,t,i,s,n),this.type="rexChart",this.chart=void 0,void 0!==a&&this.setChart(a)}destroy(e){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(e))}resize(e,t){if(e===this.width&&t===this.height)return this;if(super.resize(e,t),this.chart){var i=this.chart;i.height=this.canvas.height,i.width=this.canvas.width,i.aspectRatio=i.height?i.width/i.height:null,i.update()}return this}};var methods$l={setChart:SetChart,getChartDataset:GetChartDataset,getChartData:GetChartData,setChartData:SetChartData,updateChart:UpdateChart};Object.assign(Chart$1.prototype,methods$l),ObjectFactory.register("chart",(function(e,t,i,s,n){var a=new Chart$1(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.Chart",Chart$1),ObjectFactory.register("container",(function(e,t,i,s,n){var a=new ContainerLite(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.Container",ContainerLite),ObjectFactory.register("sizer",(function(e,t,i,s,n,a){var r=new Sizer(this.scene,e,t,i,s,n,a);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.UI.Sizer",Sizer);var Sum=function(){return Array.prototype.reduce.call(arguments,Add$5,0)},Add$5=function(e,t){return e+t},GetChildrenWidth$2=function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var t,i,s,n,a,r=0,o=this.sizerChildren,l=!1;this.totalColumnProportions;for(var h=0;h<this.columnCount;h++){if(t=0,0===(a=this.columnProportions[h])||e){for(var d=0;d<this.rowCount;d++)(i=o[d*this.columnCount+h])&&(i.rexSizer.hidden||(void 0===(n=this.getChildWidth(i))&&(0===a||this.hasColumnProportion0Child?l=!0:n=0),l||(n+=((s=i.rexSizer.padding).left+s.right)*this.scaleX,t=Math.max(t,n))));l||(r+=t)}l||e&&(this.columnWidth[h]=t)}if(!l){var c=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven);return r+Sum(this.space.left,c,...this.space.column,this.space.right)*this.scaleX}},GetChildrenHeight$2=function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var t,i,s,n,a,r=0,o=this.sizerChildren,l=!1;this.totalRowProportions;for(var h=0;h<this.rowCount;h++){if(t=0,0===(a=this.rowProportions[h])||e){for(var d=0;d<this.columnCount;d++)(i=o[h*this.columnCount+d])&&(i.rexSizer.hidden||(void 0===(n=this.getChildHeight(i))&&(0===a||this.hasRowProportion0Child?l=!0:n=0),l||(n+=((s=i.rexSizer.padding).top+s.bottom)*this.scaleY,t=Math.max(t,n))));l||(r+=t)}l||e&&(this.rowHeight[h]=t)}if(!l){var c=Math.max(this.space.indentTopOdd,this.space.indentTopEven);return r+Sum(this.space.top,c,...this.space.row,this.space.bottom)*this.scaleY}},GetExpandedChildWidth$1=function(e,t){var i,s=e.rexSizer;if(s.expandWidth){var n=s.padding;i=t-(n.left+n.right)*this.scaleX}return i},GetExpandedChildHeight$1=function(e,t){var i,s=e.rexSizer;if(s.expandHeight){var n=s.padding;i=t-(n.top+n.bottom)*this.scaleY}return i},GetChildrenSizers$2=function(e){void 0===e&&(e=[]);for(var t,i=this.sizerChildren,s=0,n=i.length;s<n;s++)(t=i[s])&&t.isRexSizer&&e.push(t);return e},PreLayout$2=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,PreLayout$4.call(this),this},LayoutChildren$3=function(){for(var e,t,i,s,n,a,r,o,l,h,d,c,u,p,g=this.innerLeft,m=this.innerTop,f=0;f<this.rowCount;f++){p=this.getRowHeight(f),s=g+(f%2?this.space.indentLeftEven:this.space.indentLeftOdd)*this.scaleX;for(var v=0;v<this.columnCount;v++)u=this.getColumnWidth(v),(e=this.getChildAt(v,f))&&!e.rexSizer.hidden?(PreLayoutChild.call(this,e),d=this.getExpandedChildWidth(e,u),c=this.getExpandedChildHeight(e,p),e.isRexSizer?(e.runLayout(this,d,c),CheckSize(e,this)):ResizeGameObject(e,d,c),n=s+(i=(t=e.rexSizer).padding).left*this.scaleX,r=u-(i.left+i.right)*this.scaleX,a=m+(v%2?this.space.indentTopEven:this.space.indentTopOdd)*this.scaleY+i.top*this.scaleY,o=p-(i.top+i.bottom)*this.scaleY,void 0===d&&(d=GetDisplayWidth(e)),void 0===c&&(c=GetDisplayHeight(e)),l=(t.alignOffsetX+t.alignOffsetOriginX*d)*this.scaleX,h=(t.alignOffsetY+t.alignOffsetOriginY*c)*this.scaleY,LayoutChild.call(this,e,n,a,r,o,t.align,l,h),s+=u+this.space.column[v]*this.scaleX):s+=u+this.space.column[v]*this.scaleX;m+=p+this.space.row[f]*this.scaleY}},ResolveWidth=function(e){if(void 0!==(e=ResolveWidth$3.call(this,e))&&void 0===this.proportionWidthLength){var t=this.totalColumnProportions;if(t>0){var i=e-this.getChildrenWidth(!1);i>=0&&(this.proportionWidthLength=i/t)}else this.proportionWidthLength=0}return e},ResolveHeight=function(e){if(void 0!==(e=ResolveHeight$3.call(this,e))&&void 0===this.proportionHeightLength){var t=this.totalRowProportions;if(t>0){var i=e-this.getChildrenHeight(!1);i>=0&&(this.proportionHeightLength=i/t)}else this.proportionHeightLength=0}return e},ResolveChildrenWidth=function(e){var t,i,s,n;for(var a in this.sizerChildren)(t=this.sizerChildren[a])&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getColumnWidth(parseInt(a)%this.columnCount),i=this.getExpandedChildWidth(t,n),void 0===(s=t.resolveWidth(i))&&(s=i),t.resolveChildrenWidth(s))},ResolveChildrenHeight=function(e){var t,i,s,n;for(var a in this.sizerChildren)(t=this.sizerChildren[a])&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getRowHeight(Math.floor(parseInt(a)/this.rowCount)),i=this.getExpandedChildHeight(t,n),void 0===(s=t.resolveHeight(i))&&(s=i),t.resolveChildrenHeight(s))},RunWidthWrap$1=function(e){var t,i,s,n;for(var a in this.sizerChildren)!(t=this.sizerChildren[a])||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap||(n=this.getColumnWidth(parseInt(a)%this.columnCount),i=this.getExpandedChildWidth(t,n),t.isRexSizer&&void 0===(s=t.resolveWidth(i))&&(s=i),t.runWidthWrap(s));return this},RunHeightWrap$1=function(e){var t,i,s,n;for(var a in this.sizerChildren)!(t=this.sizerChildren[a])||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap||(n=this.getRowHeight(Math.floor(parseInt(a)/this.rowCount)),i=this.getExpandedChildHeight(t,n),t.isRexSizer&&void 0===(s=t.resolveHeight(i))&&(s=i),t.runHeightWrap(s));return this};const IsPlainObject$h=Phaser.Utils.Objects.IsPlainObject,GetValue$1S=Phaser.Utils.Objects.GetValue,ALIGN_CENTER$1=Phaser.Display.Align.CENTER;var GetEmptyCellIndex=function(e,t,i,s,n){if("number"==typeof e||"number"==typeof t){if(void 0===e){for(var a=0;a<s;a++)if(!i[r=t*s+a])return r}else if(void 0===t){for(a=0;a<n;a++)if(!i[r=a*s+e])return r}else if(!i[r=t*s+e])return r}else if(!0===t){var r;for(a=0;a<s;a++)for(var o=0;o<n;o++)if(!i[r=o*s+a])return r}else{a=0;for(var l=i.length;a<l;a++)if(!i[a])return a}return null},Add$4=function(e,t,i,s,n,a,r){var o,l,h,d;AddChild$1.call(this,e),IsPlainObject$h(t)&&(t=GetValue$1S(c=t,"column",void 0),i=GetValue$1S(c,"row",void 0),s=GetValue$1S(c,"align",ALIGN_CENTER$1),n=GetValue$1S(c,"padding",0),a=GetValue$1S(c,"expand",!1),r=GetValue$1S(c,"key",void 0),o=GetValue$1S(c,"offsetX",0),l=GetValue$1S(c,"offsetY",0),h=GetValue$1S(c,"offsetOriginX",0),d=GetValue$1S(c,"offsetOriginY",0));var c,u=GetEmptyCellIndex(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(null===u){if("number"==typeof t&&"number"==typeof i)return this;!0===i||"number"==typeof i?this.addEmptyColumn():this.addEmptyRow(),u=GetEmptyCellIndex(t,i,this.sizerChildren,this.columnCount,this.rowCount)}return"string"==typeof s&&(s=AlignConst[s]),void 0===s&&(s=ALIGN_CENTER$1),void 0===n&&(n=0),void 0===a&&(a=!0),void 0===o&&(o=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===d&&(d=0),(c=this.getSizerConfig(e)).align=s,c.padding=GetBoundsConfig$1(n),IsPlainObject$h(a)?(c.expandWidth=GetValue$1S(a,"width",!1),c.expandHeight=GetValue$1S(a,"height",!1)):(c.expandWidth=a,c.expandHeight=a),c.alignOffsetX=o,c.alignOffsetY=l,c.alignOffsetOriginX=h,c.alignOffsetOriginY=d,this.sizerChildren[u]=e,void 0!==r&&this.addChildrenMap(r,e),this};const AddChildMethods$5={add:Add$4};var Fill=function(e,t,i,s){void 0===i&&(i=0),void 0===s&&(s=e.length-1);for(var n=i;n<=s;n++)e[n]=t;return e};const RemoveChildMethods$4={remove(e,t){if(this.getParentSizer(e)!==this)return this;var i=this.sizerChildren.indexOf(e);return-1!==i&&(this.sizerChildren[i]=null),RemoveChild.call(this,e,t),this},removeAt(e,t,i){var s=this.getChildAt(e,t);return s&&this.remove(s,i),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];i&&this.remove(i,e)}return this},clear(e){return Fill(this.sizerChildren,null),ClearChildren.call(this,e),this}},SetSpaceMethods={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,"number"==typeof e)this.space.column0=e,Fill(this.space.column,e);else{this.space.column0=e[0];for(var t=0,i=this.columnCount-1;t<i;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,"number"==typeof e)this.space.row0=e,Fill(this.space.row,e);else{this.space.row0=e[t];for(var t=0,i=this.rowCount-1;t<i;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}},GetValue$1R=Phaser.Utils.Objects.GetValue;var ResetGrid=function(e,t,i,s,n){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,Fill(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,"number"==typeof i)Fill(this.columnProportions,i);else for(var a=0;a<e;a++)this.columnProportions[a]=i[a]||0;if(this.rowProportions=[],this.rowProportions.length=t,"number"==typeof s)Fill(this.rowProportions,s);else for(a=0;a<t;a++)this.rowProportions[a]=s[a]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(GetValue$1R(n,"column",0)),this.setRowSpace(GetValue$1R(n,"row",0));var r=this.scene,o=this.createCellContainerCallback;if(o)for(var l=0,h=this.rowCount;l<h;l++)for(var d=0,c=this.columnCount;d<c;d++){var u={column:d,row:l},p=o(r,d,l,u);p&&this.add(p,u)}return this},InsertEmptyRow=function(e,t,i){void 0===t&&(t=this.rowProportions[0]||0),void 0===i&&(i=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var s=[e*this.columnCount,0],n=0;n<this.columnCount;n++)s.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,s),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,i),this},AddEmptyRow=function(e,t){return InsertEmptyRow.call(this,this.rowCount,e,t),this},InsertEmptyColumn=function(e,t,i){void 0===t&&(t=this.columnProportions[0]||0),void 0===i&&(i=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var s=this.rowCount-1;s>=0;s--){var n=s*this.columnCount+e;this.sizerChildren.splice(n,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,i),this},AddEmptyColumn=function(e,t){return InsertEmptyColumn.call(this,this.columnCount,e,t),this},methods$k={getChildrenWidth:GetChildrenWidth$2,getChildrenHeight:GetChildrenHeight$2,getExpandedChildWidth:GetExpandedChildWidth$1,getExpandedChildHeight:GetExpandedChildHeight$1,getChildrenSizers:GetChildrenSizers$2,preLayout:PreLayout$2,layoutChildren:LayoutChildren$3,resolveWidth:ResolveWidth,resolveHeight:ResolveHeight,resolveChildrenWidth:ResolveChildrenWidth,resolveChildrenHeight:ResolveChildrenHeight,runWidthWrap:RunWidthWrap$1,runHeightWrap:RunHeightWrap$1,resetGrid:ResetGrid,insertEmptyRow:InsertEmptyRow,addEmptyRow:AddEmptyRow,insertEmptyColumn:InsertEmptyColumn,addEmptyColumn:AddEmptyColumn};Object.assign(methods$k,AddChildMethods$5,RemoveChildMethods$4,SetSpaceMethods,SortChildrenMethods);var GetTotalColumnProportions=function(){for(var e,t=0,i=0;i<this.columnCount;i++)(e=this.columnProportions[i])>0?t+=e:0===e&&(this.hasColumnProportion0Child=!0);return t},GetTotalRowProportions=function(){for(var e,t=0,i=0;i<this.rowCount;i++)(e=this.rowProportions[i])>0?t+=e:0===e&&(this.hasRowProportion0Child=!0);return t};const IsPlainObject$g=Phaser.Utils.Objects.IsPlainObject,GetValue$1Q=Phaser.Utils.Objects.GetValue;class GridSizer extends Base$1{constructor(e,t,i,s,n,a,r,o,l,h){IsPlainObject$g(t)?(t=GetValue$1Q(h=t,"x",0),i=GetValue$1Q(h,"y",0),s=GetValue$1Q(h,"width",void 0),n=GetValue$1Q(h,"height",void 0),a=GetValue$1Q(h,"column",h.col||0),r=GetValue$1Q(h,"row",0),o=GetValue$1Q(h,"columnProportions",0),l=GetValue$1Q(h,"rowProportions",0)):IsPlainObject$g(s)?(s=GetValue$1Q(h=s,"width",void 0),n=GetValue$1Q(h,"height",void 0),a=GetValue$1Q(h,"column",h.col||0),r=GetValue$1Q(h,"row",0),o=GetValue$1Q(h,"columnProportions",0),l=GetValue$1Q(h,"rowProportions",0)):IsPlainObject$g(a)?(a=GetValue$1Q(h=a,"column",h.col||0),r=GetValue$1Q(h,"row",0),o=GetValue$1Q(h,"columnProportions",0),l=GetValue$1Q(h,"rowProportions",0)):IsPlainObject$g(o)&&(o=GetValue$1Q(h=o,"columnProportions",0),l=GetValue$1Q(h,"rowProportions",0)),super(e,t,i,s,n,h),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(GetValue$1Q(h,"createCellContainerCallback")),this.setIndentLeft(GetValue$1Q(h,"space.indentLeftOdd",0),GetValue$1Q(h,"space.indentLeftEven",0)),this.setIndentTop(GetValue$1Q(h,"space.indentTopOdd",0),GetValue$1Q(h,"space.indentTopEven",0)),this.resetGrid(a,r,o,l,GetValue$1Q(h,"space",void 0))}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(e,t){return e>=this.columnProportions.length||(this.columnProportions[e]=t),this}setRowProportion(e,t){return e>=this.rowProportions.length||(this.rowProportions[e]=t),this}get totalColumnProportions(){return void 0===this._totalColumnProportions&&(this._totalColumnProportions=GetTotalColumnProportions.call(this)),this._totalColumnProportions}get totalRowProportions(){return void 0===this._totalRowProportions&&(this._totalRowProportions=GetTotalRowProportions.call(this)),this._totalRowProportions}getChildAt(e,t){return this.sizerChildren[t*this.columnCount+e]}childToGridIndex(e,t){if(!e)return null;var i=this.sizerChildren.indexOf(e);return-1===i?null:(void 0===t&&(t={}),t.x=i%this.columnCount,t.y=Math.floor(i/this.columnCount),t)}getColumnWidth(e){var t=this.columnProportions[e];return 0===t?this.columnWidth[e]:t*this.proportionWidthLength}getRowHeight(e){var t=this.rowProportions[e];return 0===t?this.rowHeight[e]:t*this.proportionHeightLength}setCreateCellContainerCallback(e){return this.createCellContainerCallback=e,this}}Object.assign(GridSizer.prototype,methods$k),ObjectFactory.register("gridSizer",(function(e,t,i,s,n,a,r,o,l){var h=new GridSizer(this.scene,e,t,i,s,n,a,r,o,l);return this.scene.add.existing(h),h})),SetValue(window,"RexPlugins.UI.GridSizer",GridSizer);var GetChildrenWidth$1=function(e){return this.rexSizer.hidden?0:(void 0===e&&(e=!0),void 0!==(t=0===this.orientation&&e?this.maxChildWidth:this.rexSizer.resolved?this.wrapResult.width:void 0)?t+(this.space.left+this.space.right)*this.scaleX:void 0);var t},GetChildrenHeight$1=function(e){return this.rexSizer.hidden?0:(void 0===e&&(e=!0),void 0!==(t=1===this.orientation&&e?this.maxChildHeight:this.rexSizer.resolved?this.wrapResult.height:void 0)?t+(this.space.top+this.space.bottom)*this.scaleY:void 0);var t},GetChildrenSizers$1=function(e){void 0===e&&(e=[]);for(var t,i=this.sizerChildren,s=0,n=i.length;s<n;s++)"\n"!==(t=i[s])&&t.isRexSizer&&e.push(t);return e},PreLayout$1=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,PreLayout$4.call(this),this},LayoutChildren$2=function(){for(var e,t,i,s,n,a,r,o,l,h,d,c,u=0===this.orientation,p=u?this.innerWidth:this.innerHeight,g=0,m=this.innerLeft,f=this.innerTop,v=this.wrapResult.lines,b=m,y=f,C=0,x=v.length;C<x;C++){switch(d=(h=v[C]).children,this.rtl&&d.reverse(),u?b=m+(C%2?this.space.indentLeftEven:this.space.indentLeftOdd)*this.scaleX:y=f+(C%2?this.space.indentTopEven:this.space.indentTopOdd)*this.scaleY,c=p-(u?h.width:h.height),this.align){case 0:break;case 1:u?b+=c:y+=c;break;case 2:u?b+=c/2:y+=c/2;break;case 3:g=GetJustifySpace(p,c,this.justifyPercentage,d.length);break;case 4:0===(g=GetJustifySpace(p,c,this.justifyPercentage,d.length))&&(u?b+=c:y+=c);break;case 5:0===(g=GetJustifySpace(p,c,this.justifyPercentage,d.length))&&(u?b+=c/2:y+=c/2)}for(var S=!0,w=0,T=d.length;w<T;w++)(e=d[w]).rexSizer.hidden||(i=(t=e.rexSizer).padding,PreLayoutChild.call(this,e),u?s=b+i.left*this.scaleX:n=y+i.top*this.scaleY,S?S=!1:u?s+=this.space.item*this.scaleX:n+=this.space.item*this.scaleY,a=GetDisplayWidth(e),r=GetDisplayHeight(e),u?(n=y+(w%2?this.space.indentTopEven:this.space.indentTopOdd)*this.scaleY+i.top*this.scaleY,b=s+a+i.right*this.scaleX+g):(s=b+(w%2?this.space.indentLeftEven:this.space.indentLeftOdd)*this.scaleX+i.left*this.scaleX,y=n+r+i.top*this.scaleY+g),o=(t.alignOffsetX+t.alignOffsetOriginX*a)*this.scaleX,l=(t.alignOffsetY+t.alignOffsetOriginY*r)*this.scaleY,LayoutChild.call(this,e,s,n,a,r,t.align,o,l));u?y+=h.height+this.space.line*this.scaleY:b+=h.width+this.space.line*this.scaleX}},GetJustifySpace=function(e,t,i,s){return t/e<=i?t/(s-1):0},HasWidthWrap=function(){return 0===this.orientation||HasWidthWrap$2.call(this)},RunChildrenWrap=function(e){var t,i,s,n,a,r={lines:[],width:0,height:0},o=this.sizerChildren,l=0,h=r.lines,d=void 0;if(0===this.orientation){for(var c=0,u=o.length;c<u;c++){if("\n"===(t=o[c]))t=void 0,s=0,a=!0;else{if(t.rexSizer.hidden)continue;t.isRexSizer&&t.runLayout(this),s=this.getChildWidth(t),a=l<(s+=((i=t.rexSizer.padding).left+i.right)*this.scaleX)||void 0===d}a&&(d&&(d.width=e-(l+this.space.item*this.scaleX),r.width=Math.max(r.width,d.width),r.height+=d.height+this.space.line*this.scaleY),d={children:[],width:0,height:0},h.push(d),l=e-(h.length%2?this.space.indentLeftOdd:this.space.indentLeftEven)*this.scaleX),l-=s+this.space.item*this.scaleX,t&&(d.children.push(t),n=this.getChildHeight(t),n+=((i=t.rexSizer.padding).top+i.bottom)*this.scaleY,d.height=Math.max(d.height,n))}d&&(d.width=e-(l+this.space.item*this.scaleX),r.width=Math.max(r.width,d.width),r.height+=d.height),r.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{var p=e;for(c=0,u=o.length;c<u;c++){if("\n"===(t=o[c]))t=void 0,s=0,a=!0;else{if(t.rexSizer.hidden)continue;t.isRexSizer&&t.layout(),n=this.getChildHeight(t),a=l<(n+=((i=t.rexSizer.padding).top+i.bottom)*this.scaleY)||void 0===d}a&&(d&&(d.height=p-(l+this.space.item*this.scaleY),r.height=Math.max(r.height,d.height),r.width+=d.width+this.space.line*this.scaleX),d={children:[],width:0,height:0},h.push(d),l=p-(h.length%2?this.space.indentTopOdd:this.space.indentTopEven)*this.scaleY),l-=n+this.space.item*this.scaleY,t&&(d.children.push(t),s=this.getChildWidth(t),s+=((i=t.rexSizer.padding).left+i.right)*this.scaleX,d.width=Math.max(d.width,s))}d&&(d.height=p-(l+this.space.item*this.scaleY),r.height=Math.max(r.height,d.height),r.width+=d.width),r.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return r},RunWidthWrap=function(e){if(!this.wrapResult&&0===this.orientation){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=RunChildrenWrap.call(this,t),this.rexSizer.resolved=!0,RunWidthWrap$3.call(this,e)}},HasHeightWrap=function(){return 1===this.orientation||HasHeightWrap$2.call(this)},RunHeightWrap=function(e){if(!this.wrapResult&&1===this.orientation){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=RunChildrenWrap.call(this,t),this.rexSizer.resolved=!0,RunHeightWrap$3.call(this,e)}},GetExpandedChildWidth=function(e,t){},GetExpandedChildHeight=function(e,t){};const DistanceBetween$2=Phaser.Math.Distance.Between;var GetNearestChildIndex=function(e,t){var i=this.sizerChildren;if(0===i.length)return-1;for(var s=-1,n=1/0,a=0,r=i.length;a<r;a++){var o=i[a];if(!(Math.abs(o.centerY-t)>o.height/2)){n>(l=DistanceBetween$2(o.left,o.centerY,e,t))&&(n=l,s=a);var l,h=i[a+1];h&&h.y===o.y||n>(l=DistanceBetween$2(o.right,o.centerY,e,t))&&(n=l,s=a+1)}}return s};const IsPlainObject$f=Phaser.Utils.Objects.IsPlainObject,GetValue$1P=Phaser.Utils.Objects.GetValue,ALIGN_CENTER=Phaser.Display.Align.CENTER;var Add$3=function(e,t,i,s){return"\n"===e?(this.addNewLine(),this):(AddChild$1.call(this,e),IsPlainObject$f(t)&&(t=GetValue$1P(l=t,"padding",0),i=GetValue$1P(l,"key",void 0),s=GetValue$1P(l,"index",void 0),n=GetValue$1P(l,"offsetX",0),a=GetValue$1P(l,"offsetY",0),r=GetValue$1P(l,"offsetOriginX",0),o=GetValue$1P(l,"offsetOriginY",0)),void 0===t&&(t=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===o&&(o=0),(l=this.getSizerConfig(e)).align=ALIGN_CENTER,l.padding=GetBoundsConfig$1(t),l.alignOffsetX=n,l.alignOffsetY=a,l.alignOffsetOriginX=r,l.alignOffsetOriginY=o,void 0===s||s>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(s,0,e),void 0!==i&&this.addChildrenMap(i,e),this);var n,a,r,o,l};const AddChildMethods$4={add(e,t,i){if(IsArray(e))for(var s=e,n=0,a=s.length;n<a;n++)Add$3.call(this,s[n],t);else Add$3.call(this,e,t,i);return this},addNewLine(){return this.sizerChildren.push("\n"),this},insert(e,t,i,s){return Add$3.call(this,t,i,s,e),this},insertAtPosition(e,t,i,s,n){var a=GetNearestChildIndex.call(this,e,t);return-1===a&&(a=void 0),this.insert(a,i,s,n),this}},RemoveItem$1=Phaser.Utils.Array.Remove,RemoveChildMethods$3={remove(e,t){return this.getParentSizer(e)!==this||(RemoveItem$1(this.sizerChildren,e),RemoveChild.call(this,e,t)),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,ClearChildren.call(this,e),this}};var methods$j={getChildrenWidth:GetChildrenWidth$1,getChildrenHeight:GetChildrenHeight$1,getChildrenSizers:GetChildrenSizers$1,preLayout:PreLayout$1,layoutChildren:LayoutChildren$2,hasWidthWrap:HasWidthWrap,runWidthWrap:RunWidthWrap,hasHeightWrap:HasHeightWrap,runHeightWrap:RunHeightWrap,getExpandedChildWidth:GetExpandedChildWidth,getExpandedChildHeight:GetExpandedChildHeight};Object.assign(methods$j,AddChildMethods$4,RemoveChildMethods$3,SortChildrenMethods);var GetMaxChildWidth=function(e){void 0===e&&(e=this.sizerChildren);for(var t,i,s=0,n=!1,a=0,r=e.length;a<r;a++)"\n"!==(t=e[a])&&(void 0===(i=this.getChildWidth(t))&&(n=!0),n||(s=Math.max(i,s)));if(!n)return s},GetMaxChildHeight=function(e){void 0===e&&(e=this.sizerChildren);for(var t,i,s=0,n=!1,a=0,r=e.length;a<r;a++)"\n"!==(t=e[a])&&(void 0===(i=this.getChildHeight(t))&&(n=!0),n||(s=Math.max(i,s)));if(!n)return s};const IsPlainObject$e=Phaser.Utils.Objects.IsPlainObject,GetValue$1O=Phaser.Utils.Objects.GetValue;class FixWidthSizer extends Base$1{constructor(e,t,i,s,n,a){IsPlainObject$e(t)?(t=GetValue$1O(a=t,"x",0),i=GetValue$1O(a,"y",0),s=GetValue$1O(a,"width",void 0),n=GetValue$1O(a,"height",void 0)):IsPlainObject$e(s)&&(s=GetValue$1O(a=s,"width",void 0),n=GetValue$1O(a,"height",void 0)),super(e,t,i,s,n,a),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(GetValue$1O(a,"orientation",0)),this.setItemSpacing(GetValue$1O(a,"space.item",0)),this.setLineSpacing(GetValue$1O(a,"space.line",0)),this.setIntentLeft(GetValue$1O(a,"space.indentLeftOdd",0),GetValue$1O(a,"space.indentLeftEven",0)),this.setIntentTop(GetValue$1O(a,"space.indentTopOdd",0),GetValue$1O(a,"space.indentTopEven",0)),this.setAlign(GetValue$1O(a,"align",0)),this.setJustifyPercentage(GetValue$1O(a,"justifyPercentage",.25)),this.setRTL(GetValue$1O(a,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(e){return this.orientation=GetOrientationMode(e),this}setItemSpacing(e){return this.space.item=e,this}setLineSpacing(e){return this.space.line=e,this}setIntentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this}setIntentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}setAlign(e){return"string"==typeof e&&(e=ALIGN[e]),this.align=e,this}setJustifyPercentage(e){return this.justifyPercentage=e,this}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}get maxChildWidth(){return void 0===this._maxChildWidth&&(this._maxChildWidth=GetMaxChildWidth.call(this)),this._maxChildWidth}get maxChildHeight(){return void 0===this._maxChildHeight&&(this._maxChildHeight=GetMaxChildHeight.call(this)),this._maxChildHeight}}const ALIGN={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(FixWidthSizer.prototype,methods$j),ObjectFactory.register("fixWidthSizer",(function(e,t,i,s,n){var a=new FixWidthSizer(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.FixWidthSizer",FixWidthSizer),ObjectFactory.register("overlapSizer",(function(e,t,i,s,n){var a=new OverlapSizer(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a})),SetValue(window,"RexPlugins.UI.OverlapSizer",OverlapSizer),ObjectFactory.register("space",(function(){return new Space(this.scene)})),SetValue(window,"RexPlugins.UI.Space",Space),ObjectFactory.register("label",(function(e){var t=new Label(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Label",Label);const Properties=["alpha","tint","flipX","flipY"];var DecorateGameObject=function(e,t){if(!t)return e;for(var i=0,s=Properties.length;i<s;i++){var n=Properties[i];n in t&&n in e&&(e[n]=t[n])}var a,r;return"origin"in t&&"originX"in e?e.setOrigin(t.origin):("originX"in t&&"originX"in e&&(a=t.originX),"originY"in t&&"originY"in e&&(r=t.originY),void 0!==a&&void 0!==r&&e.setOrigin(a,r)),e},CreateBackground$2=function(e,t){var i,s;switch(t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("barColor")?i="bar":t.hasOwnProperty("leftWidth")?i="nineSlice":t.hasOwnProperty("key")&&(i="image")),i){case"bar":s=new StatesBarRectangle(e,t);break;case"image":s=new StatesImage(e,t);break;case"nineSlice":s=t.hasOwnProperty("stretchMode")?new StatesNinePatch(e,t):new StatesNineSlice(e,t);break;default:s=new StatesRoundRectangle(e,t)}return DecorateGameObject(s,t),e.add.existing(s),s},ResizeController=function(){switch(this.scrollMode){case 0:case 1:SetControllerBounds.call(this),this.updateController(),HideUnscrollableSlider.call(this),AdaptThumbSize.call(this);break;default:SetControllerBounds.call(this,"y"),SetControllerBounds.call(this,"x"),this.updateController(),HideUnscrollableSlider.call(this,"y"),HideUnscrollableSlider.call(this,"x"),AdaptThumbSize.call(this,"y"),AdaptThumbSize.call(this,"x")}return this},SetControllerBounds=function(e){var t,i,s,n;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,i=this.bottomChildOY,s=this.childrenMap.scroller,n=this.childrenMap.slider,e=0===this.scrollMode?"Y":"X";break;default:"Y"===(e=e.toUpperCase())?(t=this.topChildOY,i=this.bottomChildOY):(t=this.leftChildOX,i=this.rightChildOX),s=this.childrenMap[`scroller${e}`],n=this.childrenMap[`slider${e}`]}i*="Y"===e?this.scaleY:this.scaleX,s&&s.setBounds(t,i),n&&(n.setEnable(t!==i),n.tickLength&&n.setTick(n.tickLength,t,i))},HideUnscrollableSlider=function(e){switch(this.scrollMode){case 0:case 1:(i=this.childrenMap.slider)&&this.hideUnscrollableSlider&&this.setChildVisible(i,this.isOverflow),(n=this.childrenMap.scroller)&&this.disableUnscrollableDrag&&n.setEnable(this.isOverflow);break;default:var t=this[`isOverflow${e=e.toUpperCase()}`],i=this.childrenMap[`slider${e}`],s=this[`hideUnscrollableSlider${e}`];i&&s&&this.setChildVisible(i,t);var n=this.childrenMap.scroller,a=this[`disableUnscrollableDrag${e}`];n&&a&&n.setEnable(t)}},AdaptThumbSize=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;if(!(o=this.childrenMap.slider))return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),i=o.childrenMap.track,s=o.childrenMap.thumb,n=this.minThumbSize;if(0===this.scrollMode){var a=i.displayHeight*t;void 0!==n&&a<n&&(a=n),ResizeGameObject(s,void 0,a)}else{var r=i.displayWidth*t;void 0!==n&&r<n&&(r=n),ResizeGameObject(s,r,void 0)}LayoutSlider(o);break;default:var o;if(!this[`adaptThumb${e=e.toUpperCase()}SizeMode`])return;if(!(o=this.childrenMap[`slider${e}`]))return;i=o.childrenMap.track,s=o.childrenMap.thumb,n=this[`minThumb${e}Size`],"Y"===e?(t=Math.min(this.childVisibleHeight/this.childHeight,1),a=i.displayHeight*t,void 0!==n&&a<n&&(a=n),ResizeGameObject(s,void 0,a)):(t=Math.min(this.childVisibleWidth/this.childWidth,1),r=i.displayWidth*t,void 0!==n&&r<n&&(r=n),ResizeGameObject(s,r,void 0)),LayoutSlider(o)}},LayoutSlider=function(e){var t=e.minWidth,i=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=i},UpdateController=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var i=this.childrenMap.scrollerY,s=this.childrenMap.sliderY,n=this.childrenMap.scrollerX,a=this.childrenMap.sliderX;i&&i.setValue(this.childOY),s&&s.setValue(this.t),n&&n.setValue(this.childOX),a&&a.setValue(this.s)}};const Clamp$8=Phaser.Math.Clamp,ChildPositionMethods={setChildOY(e,t){return void 0===t&&(t=!1),t&&(e=Clamp$8(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return void 0===t&&(t=!1),t&&(e=Clamp$8(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,0===this.t)return this;do{this.t=1}while(1!==this.t);return this},setChildOX(e,t){return void 0===t&&(t=!1),t&&(e=Clamp$8(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return void 0===t&&(t=!1),t&&(e=Clamp$8(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,0===this.s)return this;do{this.s=1}while(1!==this.s);return this}};var Methods$8={resizeController:ResizeController,updateController:UpdateController};Object.assign(Methods$8,ChildPositionMethods);const SCROLLMODE$1={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2};var GetScrollMode=function(e,t){void 0===t&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=GetDefaultScrollMode(e));var i=e[t];return"string"==typeof i&&(i=SCROLLMODE$1[i]),i},GetDefaultScrollMode=function(e){var t=!!e.sliderY||!!e.scrollerY,i=!!e.sliderX||!!e.scrollerX;return t&&i?2:t?0:i?1:0};const GetValue$1N=Phaser.Utils.Objects.GetValue;var AddChild=function(e,t,i){var s=GetValue$1N(i,"child"),n=GetValue$1N(s,"gameObject",void 0);if(n){var a=GetValue$1N(i,"space.child",0);e.childMargin={};var r=e.childMargin,o={};if("number"==typeof a)switch(e.scrollMode){case 0:case 1:r.top=0,r.bottom=0,r.left=0,r.right=0;break;default:r.top=a,r.bottom=a,r.left=a,r.right=a}else switch(e.scrollMode){case 0:r.top=GetValue$1N(a,"top",0),r.bottom=GetValue$1N(a,"bottom",0),o.left=GetValue$1N(a,"left",0),o.right=GetValue$1N(a,"right",0);break;case 1:r.top=GetValue$1N(a,"left",0),r.bottom=GetValue$1N(a,"right",0),o.top=GetValue$1N(a,"top",0),o.bottom=GetValue$1N(a,"bottom",0);break;default:r.top=GetValue$1N(a,"top",0),r.bottom=GetValue$1N(a,"bottom",0),r.left=GetValue$1N(a,"left",0),r.right=GetValue$1N(a,"right",0)}t.add(n,{column:1,row:1,align:GetValue$1N(s,"align","center"),padding:o,expand:{width:GetValue$1N(s,"expandWidth",!0),height:GetValue$1N(s,"expandHeight",!0)}})}e.addChildrenMap("child",n)};const Percent$3=Phaser.Math.Percent;var PositionToPercent=function(e,t,i){var s;return e.y===t.y?s=Percent$3(i.x,e.x,t.x):e.x===t.x&&(s=Percent$3(i.y,e.y,t.y)),s},GetValueByPosition=function(e,t){var i,s;return tmpPoint$3.x=e,tmpPoint$3.y=t,this.reverseAxis?(i=this.getEndPoint(),s=this.getStartPoint()):(i=this.getStartPoint(),s=this.getEndPoint()),PositionToPercent(i,s,tmpPoint$3)},tmpPoint$3={},OnDragThumb=function(e,t,i){this.enable&&this.inputActive&&(this.value=GetValueByPosition.call(this,t,i))},OnTouchTrack=function(e){if(this.enable&&this.inputActive&&e.isDown){var t=GetValueByPosition.call(this,e.worldX,e.worldY);this.stopEaseValue(),0===this.easeValueDuration||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}};const GetValue$1M=Phaser.Utils.Objects.GetValue;var RegisterInputEvents=function(e){this.inputActive=!1;var t=GetValue$1M(e,"input",0);"string"==typeof t&&(t=INPUTMODE[t]);var i=this.childrenMap.thumb;switch(t){case 0:i&&(i.setInteractive(),this.scene.input.setDraggable(i),i.on("dragstart",(function(e){this.inputActive=!0,this.eventEmitter.emit("inputstart",e)}),this).on("dragend",(function(e){this.inputActive=!1,this.eventEmitter.emit("inputend",e)}),this).on("drag",OnDragThumb,this));break;case 1:this.setInteractive().on("pointerdown",(function(e){this.inputActive=!0,this.eventEmitter.emit("inputstart",e)}),this).on("pointerdown",OnTouchTrack,this);var s=function(e){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",e))};this.scene.input.on("pointerup",s,this).on("pointermove",OnTouchTrack,this),this.once("destroy",(function(){this.scene.input.on("pointerup",s,this).off("pointermove",OnTouchTrack,this)}),this)}};const INPUTMODE={pan:0,drag:0,click:1,none:-1};var GetThumbAlignPoint=function(e,t){void 0===t&&(t=tmpPoint$2);var i=this.childrenMap.thumb,s=i.x,n=i.y;return AlignIn(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=i.x,t.y=i.y,i.x=s,i.y=n,t},tmpPoint$2={};const AlignLeft$1=Phaser.Display.Align.LEFT_CENTER,AlignTop$1=Phaser.Display.Align.TOP_CENTER;var GetStartPoint=function(e){if(void 0===e&&(e=tmpPoint$1),this.childrenMap.thumb){var t=0===this.orientation?AlignLeft$1:AlignTop$1;GetThumbAlignPoint.call(this,t,e)}else 0===this.orientation?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},tmpPoint$1={};const AlignRight$1=Phaser.Display.Align.RIGHT_CENTER,AlignBottom$1=Phaser.Display.Align.BOTTOM_CENTER;var GetEndoint=function(e){if(void 0===e&&(e=tmpPoint),this.childrenMap.thumb){var t=0===this.orientation?AlignRight$1:AlignBottom$1;GetThumbAlignPoint.call(this,t,e)}else 0===this.orientation?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},tmpPoint={};const Linear$3=Phaser.Math.Linear;var PercentToPosition=function(e,t,i,s){return void 0===s&&(s=tmpOut),s.x=Linear$3(t.x,i.x,e),s.y=Linear$3(t.y,i.y,e),s},tmpOut={},UpdateThumb=function(e){var t,i,s=this.childrenMap.thumb;return void 0===s||(void 0===e&&(e=this.value),this.reverseAxis?(t=this.getEndPoint(),i=this.getStartPoint()):(t=this.getStartPoint(),i=this.getEndPoint()),PercentToPosition(e,t,i,s),s.x+=this.thumbOffsetX,s.y+=this.thumbOffsetY,this.resetChildPositionState(s)),this};const AlignLeft=Phaser.Display.Align.LEFT_CENTER,AlignTop=Phaser.Display.Align.TOP_CENTER,AlignRight=Phaser.Display.Align.RIGHT_CENTER,AlignBottom=Phaser.Display.Align.BOTTOM_CENTER;var UpdateIndicator=function(e){var t=this.childrenMap.indicator;if(void 0===t)return this;void 0===e&&(e=this.value);var i,s,n,a=this.reverseAxis,r=this.childrenMap.thumb;if(r)if(0===this.orientation){var o,l=GetDisplayWidth(r);if(a)o=r.x-l*r.originX,i=this.right-o;else i=(o=r.x-l*r.originX)+l-this.left}else{var h,d=GetDisplayHeight(r);if(a)h=r.y-d*r.originY,s=this.bottom-h;else s=(h=r.y-d*r.originY)+d-this.top}else 0===this.orientation?i=this.width*e:s=this.height*e;ResizeGameObject(t,i,s),n=a?0===this.orientation?AlignRight:AlignBottom:0===this.orientation?AlignLeft:AlignTop,QuickSet(t,this,n),this.resetChildPositionState(t)};const GetValue$1L=Phaser.Utils.Objects.GetValue,IsPlainObject$d=Phaser.Utils.Objects.IsPlainObject,Clamp$7=Phaser.Math.Clamp,SnapTo$2=Phaser.Math.Snap.To;class Slider extends(ProgressBase(Sizer)){constructor(e,t){super(e,t),this.type="rexSlider",this.bootProgressBase(t),this.reverseAxis=GetValue$1L(t,"reverseAxis",!1);var i=GetValue$1L(t,"background",void 0),s=GetValue$1L(t,"track",void 0),n=GetValue$1L(t,"indicator",void 0),a=GetValue$1L(t,"thumb",void 0);if(i&&(IsPlainObject$d(i)&&(i=CreateBackground$2(e,i)),this.addBackground(i)),s&&(IsPlainObject$d(s)&&(s=CreateBackground$2(e,s)),this.add(s,{proportion:1,expand:!0,minWidth:0===this.orientation?0:void 0,minHeight:1===this.orientation?0:void 0})),n&&(IsPlainObject$d(n)&&(n=CreateBackground$2(e,n)),this.pin(n)),a){IsPlainObject$d(a)&&(a=CreateBackground$2(e,a)),this.pin(a);var r=GetValue$1L(t,"thumbOffsetX",0),o=GetValue$1L(t,"thumbOffsetY",0);this.setThumbOffset(r,o)}this.addChildrenMap("background",i),this.addChildrenMap("track",s),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",a),this.setEnable(GetValue$1L(t,"enable",void 0));var l=GetValue$1L(t,"tick",void 0);void 0===l&&(l=GetValue$1L(t,"gap",void 0)),this.setGap(l),RegisterInputEvents.call(this,t),this.setValue(GetValue$1L(t,"value",0),GetValue$1L(t,"min",void 0),GetValue$1L(t,"max",void 0))}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setGap(e,t,i){return e&&void 0!==t&&(e/=i-t),this.gap=e,this}setTick(e,t,i){return this.setGap(e,t,i),this}get tick(){return this.gap}set tick(e){this.gap=e}setThumbOffset(e,t){return this.thumbOffsetX=e,this.thumbOffsetY=t,this}get value(){return this._value}set value(e){void 0!==this.gap&&(e=SnapTo$2(e,this.gap));var t=this._value;this._value=Clamp$7(e,0,1),t!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,t,this.eventEmitter))}postLayout(e,t,i){return this.updateThumb(),this.updateIndicator(),super.postLayout(e,t,i),this}}var methods$i={getStartPoint:GetStartPoint,getEndPoint:GetEndoint,updateThumb:UpdateThumb,updateIndicator:UpdateIndicator};Object.assign(Slider.prototype,methods$i);const GetValue$1K=Phaser.Utils.Objects.GetValue;class ScrollBar extends Sizer{constructor(e,t){super(e,t),this.type="rexScrollBar";var i,s,n=GetValue$1K(t,"background",void 0),a=GetValue$1K(t,"buttons",void 0),r=GetValue$1K(a,"top",GetValue$1K(a,"left",void 0)),o=GetValue$1K(a,"bottom",GetValue$1K(a,"right",void 0)),l=GetValue$1K(t,"slider",void 0);(n&&this.addBackground(n),r&&(this.add(r),new InTouching(r).on("intouch",(function(){if(this.enable){var e=i.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=e}}),this)),l)&&(l.orientation=this.orientation,l.eventEmitter=this,l.value=null,s=0===this.orientation?void 0===GetValue$1K(l,"width",void 0)?1:0:void 0===GetValue$1K(l,"height",void 0)?1:0,i=new Slider(e,l),e.add.existing(i),this.add(i,{proportion:s}));o&&(this.add(o),new InTouching(o).on("intouch",(function(){if(this.enable){var e=i.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=e}}),this));var h=[r,o];this.addChildrenMap("background",n),this.addChildrenMap("slider",i),this.addChildrenMap("buttons",h);var d=GetValue$1K(t,"valuechangeCallback",null);if(null!==d){var c=GetValue$1K(t,"valuechangeCallbackScope",void 0);this.on("valuechange",d,c)}this.setEnable(GetValue$1K(t,"enable",void 0)),this.setValue(GetValue$1K(t,"value",0)),this.setScrollStep(GetValue$1K(a,"step",.01))}setScrollStep(e){return this.scrollStep=e,this}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(e){this.childrenMap.slider&&this.childrenMap.slider.setEnable(e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(e){this.childrenMap.slider&&(this.childrenMap.slider.value=e)}setValue(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.setValue(e,t,i),this}addValue(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.addValue(e,t,i),this}getValue(e,t){return this.childrenMap.slider?this.childrenMap.slider.getValue(e,t):0}easeValueTo(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(e,t,i),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(e),this}setEaseValueFunction(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(e),this}setGap(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.setGap(e,t,i),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(e){this.childrenMap.slider&&(this.childrenMap.slider.gap=e)}setTick(e,t,i){return this.setGap(e,t,i),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(e){this.childrenMap.slider&&(this.childrenMap.slider.tick=e)}}var CreateScrollbar=function(e,t){void 0===t&&(t={});var i=Clone$2(t);(t={slider:i}).orientation=i.orientation,delete i.orientation,t.background=i.background,delete i.background,t.buttons=i.buttons,delete i.buttons,t.value=null;var s=new ScrollBar(e,t);e.add.existing(s);var n=s.childrenMap.slider;return s.addChildrenMap("track",n.childrenMap.track),s.addChildrenMap("indicator",n.childrenMap.indicator),s.addChildrenMap("thumb",n.childrenMap.thumb),s};const SnapTo$1=Phaser.Math.Snap.To;Phaser.Math.Clamp;var OnDragStart=function(){this.emit("dragstart")},OnDragEnd=function(){this.emit("dragend")},Dragging=function(){this.value+=this.dragDelta},OnSliding=function(){var e=this.value,t=this.dragSpeed,i=this.snapStep;if(i){var s=e,n=0===t?0:t*t/(2*this.slidingDeceleration);s=SnapTo$1(s+=t>0?n:-n,i,this.minValue),(n=Math.abs(s-e))>0?(0===t?(a=this.backDeceleration,t=Math.sqrt(2*a*n)):(a=t*t/(2*n),a*=.99),this._slowDown.init(e,void 0,t,a,s)):(this._slowDown.stop(),this._state.next())}else if(0===t)this._slowDown.stop(),this._state.next();else{var a=this.slidingDeceleration;this._slowDown.init(e,t>0,t,a)}},Sliding=function(e,t){t*=.001;var i=this._slowDown.update(t).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i},OnBack=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(t-e),s=this.backDeceleration,n=Math.sqrt(2*s*i);this._slowDown.init(e,void 0,n,s,t)},Back=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},Stop=function(){this._slowDown.stop()};class State extends FSM{constructor(e,t){super(t),this.parent=e,this.init()}init(){this.start("IDLE")}next_IDLE(){var e,t=this.parent;return t.dragState.isDown&&(e=0===t.dragThreshold?"DRAG":"DRAGBEGIN"),e}update_IDLE(e,t){this.next()}next_DRAGBEGIN(){var e=this.parent,t=e.dragState;return t.isDown?t.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":"IDLE"}update_DRAGBEGIN(e,t){this.next()}next_DRAG(){var e,t=this.parent;return t.dragState.isUp&&(e=t.outOfBounds?"BACK":t.slidingEnable?"SLIDE":"IDLE"),e}update_DRAG(e,t){var i=this.parent;i.dragState.justMoved&&Dragging.call(i),this.next()}enter_DRAG(){OnDragStart.call(this.parent)}exit_DRAG(){OnDragEnd.call(this.parent)}next_SLIDE(){var e,t=this.parent;return t.dragState.isDown?e="DRAG":t.isSliding||(e="IDLE"),e}enter_SLIDE(){OnSliding.call(this.parent)}exit_SLIDE(){Stop.call(this.parent)}update_SLIDE(e,t){Sliding.call(this.parent,e,t),this.next()}next_BACK(){var e,t=this.parent;return t.dragState.isDown?e="DRAG":t.isPullBack||(e="IDLE"),e}enter_BACK(){OnBack.call(this.parent)}exit_BACK(){Stop.call(this.parent)}update_BACK(e,t){Back.call(this.parent,e,t),this.next()}}const GetValue$1J=Phaser.Utils.Objects.GetValue,DistanceBetween$1=Phaser.Math.Distance.Between;class DragSpeed extends ComponentBase{constructor(e,t){super(e,t),this._enable=void 0,this.rectBoundsInteractive=GetValue$1J(t,"rectBoundsInteractive",!1),this.rectBoundsInteractive||e.setInteractive(GetValue$1J(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(GetValue$1J(e,"enable",!0)),this.holdThreshold=GetValue$1J(e,"holdThreshold",50),this.pointerOutReleaseEnable=GetValue$1J(e,"pointerOutRelease",!0),this}boot(){var e=this.scene,t=this.parent;this.rectBoundsInteractive?(e.input.on("pointerdown",this.onPointIn,this),e.input.on("pointerup",this.onPointOut,this),e.input.on("pointermove",this.onPointerMove,this)):(t.on("pointerdown",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onPointerMove,this)),e.sys.events.on("preupdate",this.preupdate,this)}shutdown(e){if(!this.isShutdown){var t=this.scene;this.parent,this.rectBoundsInteractive&&(t.input.off("pointerdown",this.onPointIn,this),t.input.off("pointerup",this.onPointOut,this),t.input.off("pointermove",this.onPointerMove,this)),t.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(e)}}get enable(){return this._enable}set enable(e){this._enable!==e&&(e||(this.isInTouched=!1,this.pointer=void 0),this._enable=e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(e){return void 0===e&&(e=!0),this.pointerOutReleaseEnable=e,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return GetTickDelta(this.scene)}get speed(){return this.x===this.preX&&this.y===this.preY?0:DistanceBetween$1(this.preX,this.preY,this.x,this.y)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(e,t,i){this.enable&&e.isDown&&void 0===this.pointer&&(this.rectBoundsInteractive&&!IsPointerInBounds(this.parent,e)||(this.pointer=e,this.localX=t,this.localY=i))}onPointOut(e){this.enable&&this.pointer===e&&(this.pointer=void 0)}onPointerMove(e,t,i){this.enable&&e.isDown&&this.pointer===e&&(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!IsPointerInBounds(this.parent,e)?this.onPointOut(e):(this.localX=t,this.localY=i))}preupdate(e,t){if(this.enable){var i=this.pointer;this.justMoved=!1,i&&!this.isInTouched?(this.x=i.worldX,this.y=i.worldY,this.preX=i.worldX,this.preY=i.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",i,this.localX,this.localY)):i&&this.isInTouched?this.x===i.x&&this.y===i.y?void 0===this.holdStartTime?this.holdStartTime=e:e-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=i.worldX,this.y=i.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",i,this.localX,this.localY)):!i&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",i))}}}const GetValue$1I=Phaser.Utils.Objects.GetValue;class Movement{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){return this.setValue(GetValue$1I(e,"value",0)),this.setSpeed(GetValue$1I(e,"speed",0)),this.setAcceleration(GetValue$1I(e,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(e){return this.value=e,this}setSpeed(e){return this.speed=e,this}setAcceleration(e){return this.acceleration=e,this}updateSpeed(e){return 0!==this.acceleration&&(this.speed+=this.acceleration*e,this.speed<0&&(this.speed=0)),this}getDeltaValue(e){return this.updateSpeed(e),this.speed<=0?0:this.speed*e}update(e){return this.updateSpeed(e),this.speed>0&&(this.value+=this.getDeltaValue(e)),this}get isMoving(){return this.speed>0}}class SlowDown{constructor(){this.value,this.dir,this.movement=new Movement}init(e,t,i,s,n){return this.value=e,this.end=n,this.dir=void 0!==n?e<n:t,i=Math.abs(i),this.movement.setSpeed(i).setAcceleration(-s),this}stop(){this.movement.reset()}update(e){var t=this.movement.getDeltaValue(e);return this.dir||(t=-t),void 0===this.end?this.value+=t:0===t?this.value=this.end:(this.value+=t,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const GetValue$1H=Phaser.Utils.Objects.GetValue,Clamp$6=Phaser.Math.Clamp;class Scroller extends ComponentBase{constructor(e,t){super(e,t);var i=GetValue$1H(t,"enable",!0);this._state=new State(this,{enable:i,eventEmitter:!1});var s={rectBoundsInteractive:GetValue$1H(t,"rectBoundsInteractive",!1),inputConfig:GetValue$1H(t,"inputConfig",void 0),enable:i,pointerOutRelease:GetValue$1H(t,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new DragSpeed(e,s),this._enable=void 0,this._value=void 0,this._slowDown=new SlowDown,this.setSnapStep(GetValue$1H(t,"snapStep",void 0));var n=GetValue$1H(t,"valuechangeCallback",null);if(null!==n){var a=GetValue$1H(t,"valuechangeCallbackScope",void 0);this.on("valuechange",n,a)}null!==(n=GetValue$1H(t,"overmaxCallback",null))&&(a=GetValue$1H(t,"overmaxCallbackScope",void 0),this.on("overmax",n,a)),null!==(n=GetValue$1H(t,"overminCallback",null))&&(a=GetValue$1H(t,"overminCallbackScope",void 0),this.on("overmin",n,a)),this.resetFromJSON(t),this.boot()}resetFromJSON(e){this.setOrientationMode(GetValue$1H(e,"orientation",0)),this.setDragThreshold(GetValue$1H(e,"threshold",10)),this.setSlidingDeceleration(GetValue$1H(e,"slidingDeceleration",5e3)),this.setBackDeceleration(GetValue$1H(e,"backDeceleration",2e3));var t=GetValue$1H(e,"dragRate",1);t*=GetValue$1H(e,"dragReverse",!1)?-1:1,this.setDragRate(t);var i=GetValue$1H(e,"bounds",void 0);return i?this.setBounds(i):this.setBounds(GetValue$1H(e,"max",0),GetValue$1H(e,"min",0)),this.setValue(GetValue$1H(e,"value",this.maxValue||0)),this.setEnable(GetValue$1H(e,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(e){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(e),this.dragState.destroy(e),this._state=void 0,this.dragState=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return this._enable=e,this._state.setEnable(e),this.dragState.setEnable(e),this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(e){return"string"==typeof e&&(e=ORIENTATIONMODE$2[e]),this.orientationMode=e,this}setDragThreshold(e){return this.dragThreshold=e,this}setSlidingDeceleration(e){return this.slidingDeceleration=e,this}setBackDeceleration(e){return this.backDeceleration=e,this}setDragRate(e){return this.dragRate=e,this}setBounds(e,t){if(Array.isArray(e)){var i=e;e=i[0],t=i[1]}return e<t?(this.minValue=e,this.maxValue=t):(this.minValue=t,this.maxValue=e),this}setSnapStep(e){return this.snapStep=e,this}get value(){return this._value}set value(e){if(e!==this._value){var t=this._value,i=this.overMax(e),s=this.overMin(e);i&&this.emit("overmax",e,t),s&&this.emit("overmin",e,t),this.backEnable||(i&&(e=this.maxValue),s&&(e=this.minValue)),this._value=e,this.emit("valuechange",e,t)}}setValue(e,t){return void 0===t&&(t=!1),t&&(e=Clamp$6(e,this.minValue,this.maxValue)),this.value=e,this}addValue(e,t){return this.setValue(this.value+e,t),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(e){return null!=this.maxValue&&e>this.maxValue}overMin(e){return null!=this.minValue&&e<this.minValue}get backEnable(){return"number"==typeof this.backDeceleration}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return"number"==typeof this.slidingDeceleration}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return(0===this.orientationMode?this.dragState.dy:1===this.orientationMode?this.dragState.dx:0)*this.dragRate}get dragSpeed(){return(0===this.orientationMode?this.dragState.speedY:1===this.orientationMode?this.dragState.speedX:0)*this.dragRate}}const ORIENTATIONMODE$2={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},GetValue$1G=Phaser.Utils.Objects.GetValue;class MouseWheelScroller extends ComponentBase{constructor(e,t){switch(super(e,t),this.parent!==this.scene?this.focusMode=GetValue$1G(t,"focus",!0):this.focusMode=!1,"boolean"==typeof this.focusMode&&(this.focusMode=this.focusMode?1:0),this.setSpeed(GetValue$1G(t,"speed",.1)),this.setEnable(GetValue$1G(t,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:e.setInteractive(GetValue$1G(t,"inputConfig",void 0)).on("wheel",(function(e,t,i,s,n){this.tryScroll(i)}),this)}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this)}}onSceneScroll(e,t,i,s,n,a){(2!==this.focusMode||IsPointerInBounds(this.parent,e))&&this.tryScroll(s)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setSpeed(e){return this.speed=e,this}tryScroll(e){if(this.enable)return this.scroll(e),this}scroll(e){return e*=this.speed,this.emit("scroll",e,this.parent,this),this}}const GetValue$1F=Phaser.Utils.Objects.GetValue,SnapTo=Phaser.Math.Snap.To;var AddSlider=function(e,t,i,s){var n,a,r,o="Y"===(i=i.toUpperCase()),l=2===e.scrollMode,h=e.childrenMap.child,d=`snapStep${i}`;(l||void 0===(n=GetValue$1F(s,"snapStep",void 0)))&&(n=GetValue$1F(s,d,void 0)),e[d]=n;var c=`slider${i}`;if(a=l||s.hasOwnProperty(c)?GetValue$1F(s,c,void 0):GetValue$1F(s,"slider",void 0)){var u,p,g;!0===a&&(a={}),a.orientation=o?1:0,r=CreateScrollbar(e.scene,a);var m=GetValue$1F(a,"position",0);"string"==typeof m&&(m=SLIDER_POSITION_MAP[m]);var f,v,b=GetValue$1F(s,`space.slider${i}`,void 0);void 0===b&&void 0===(b=GetValue$1F(s,"space.slider",void 0))&&(l?b=0:f=GetValue$1F(s,"space.child",0)),v=void 0===f?"number"==typeof b:"number"==typeof f,o?0===m?(u=2,p=1,g=void 0===f?v?{left:b}:b:{left:GetValue$1F(f,"right",f)}):(u=0,p=1,g=void 0===f?v?{right:b}:b:{right:GetValue$1F(f,"left",f)}):0===m?(u=1,p=2,g=void 0===f?v?{top:b}:b:{top:GetValue$1F(f,"bottom",f)}):(u=1,p=0,g=void 0===f?v?{bottom:b}:b:{bottom:GetValue$1F(f,"top",f)}),t.add(r,{column:u,row:p,align:"center",padding:g,expand:!0}),e[`hideUnscrollableSlider${i}`]=GetValue$1F(a,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${i}`]=GetValue$1F(a,"disableUnscrollableDrag",!1),e[`adaptThumb${i}SizeMode`]=GetValue$1F(a,"adaptThumbSize",!1),e[`minThumb${i}Size`]=GetValue$1F(a,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${i}`]=!1,e[`disableUnscrollableDrag${i}`]=!1,e[`adaptThumb${i}SizeMode`]=!1,e[`minThumb${i}Size`]=void 0;var y,C,x=GetValue$1F(s,"scrollDetectionMode");"string"==typeof x&&(x=SCROLLDECTIONMODE_MAP[x]);var S=`scroller${i}`;(y=l||s.hasOwnProperty(S)?GetValue$1F(s,S,!0):GetValue$1F(s,"scroller",!0))&&h&&(!0===y&&(y={}),y.orientation=o?0:1,void 0!==x&&(y.rectBoundsInteractive=1===x),y.snapStep=n,C=new Scroller(h,y),h.isRexContainerLite&&h.sendChildToBack(h));var w,T,P,_,M,O=GetValue$1F(s,l?`mouseWheelScroller${i}`:"mouseWheelScroller",!1);O&&h&&(void 0!==x&&(O.focus=1===x?2:0),w=new MouseWheelScroller(h,O)),e.addChildrenMap(`slider${i}`,r),e.addChildrenMap(`scroller${i}`,C),e.addChildrenMap(`mouseWheelScroller${i}`,w),l&&!o||(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${i}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${i}`],e.adaptThumbSizeMode=e[`adaptThumb${i}SizeMode`],e.minThumbSize=e[`minThumb${i}Size`],e.addChildrenMap("slider",r),e.addChildrenMap("scroller",C),e.addChildrenMap("mouseWheelScroller",w)),r&&(l?(T=o?"t":"s",_=`scroll${i}`):(T="t",_="scroll"),r.on("valuechange",(function(t){e[T]=t,e.emit(_,e)})).on("inputend",(function(){var t=e[`snapStep${i}`];if(t){var s=e[o?"topChildOY":"leftChildOX"],n=e[o?"bottomChildOY":"rightChildOX"],a=e[`childO${i}`],l=SnapTo(a,t,s),h=Math.abs(l-a)/t*500;r.setEaseValueDuration(h).easeValueTo(l,s,n)}}))),C&&(l?(P=`childO${i}`,_=`scroll${i}`):(P="childOY",_="scroll"),C.on("valuechange",(function(t){e[P]=t,e.emit(_,e)}))),w&&(M=l?`addChildO${i}`:"addChildOY",w.on("scroll",(function(t){var i=e[d];i&&(t=i),e[M](-t,!0)})))};const SLIDER_POSITION_MAP={right:0,left:1,bottom:0,top:1},SCROLLDECTIONMODE_MAP={gameObject:0,rectBounds:1},GetValue$1E=Phaser.Utils.Objects.GetValue;var CreateScrollableSizer=function(e,t){var i=e.scene,s=[0,1,0],n=[0,1,0],a=GetValue$1E(t,"width"),r=GetValue$1E(t,"height");a||GetValue$1E(t,"child.expandWidth",!0)||(s[1]=0),r||GetValue$1E(t,"child.expandHeight",!0)||(n[1]=0);var o=new GridSizer(i,{column:3,row:3,columnProportions:s,rowProportions:n});switch(AddChild(e,o,t),e.scrollMode){case 0:AddSlider(e,o,"y",t);break;case 1:AddSlider(e,o,"x",t);break;default:AddSlider(e,o,"y",t),AddSlider(e,o,"x",t)}return o};const GetValue$1D=Phaser.Utils.Objects.GetValue;let Scrollable$1=class extends Sizer{constructor(e,t){void 0===t&&(t={});var i=GetScrollMode(t),s=1===i;t.orientation=s?0:1,super(e,t),this.type=GetValue$1D(t,"type","rexScrollable"),this.scrollMode=i;var n=GetValue$1D(t,"background",void 0);n&&this.addBackground(n);var a=GetValue$1D(t,"header",void 0);if(a){var r=GetValue$1D(t,"align.header","center"),o=GetValue$1D(t,"space.header",0);d=s?{right:o}:{bottom:o},this.add(a,{proportion:0,align:r,padding:d,expand:GetValue$1D(t,"expand.header",!0)})}var l=CreateScrollableSizer(this,t);l&&this.add(l,{proportion:1,align:"center",padding:0,expand:!0});var h=GetValue$1D(t,"footer",void 0);if(h){r=GetValue$1D(t,"align.footer","center");var d,c=GetValue$1D(t,"space.footer",0);d=s?{left:c}:{top:c},this.add(h,{proportion:0,align:r,padding:d,expand:GetValue$1D(t,"expand.footer",!0)})}this.addChildrenMap("background",n),this.addChildrenMap("header",a),this.addChildrenMap("footer",h),this.runLayoutFlag=!1}postLayout(e,t,i){var s=0,n=0;return this.runLayoutFlag?(n=this.t,2===this.scrollMode&&(s=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(n),2===this.scrollMode&&this.setS(s),super.postLayout(e,t,i),this}set t(e){var t=this.childMargin;if(0!==t.top||0!==t.bottom){var i=this.childrenMap.child,s=i.topChildOY-i.bottomChildOY,n=(s+t.top+t.bottom)*e-t.top;e=0!==s?n/s:0}this.childrenMap.child.t=e,this.updateController()}get t(){var e=this.childrenMap.child.t,t=this.childMargin;if(0!==t.top||0!==t.bottom){var i=this.childrenMap.child,s=i.topChildOY-i.bottomChildOY,n=s+t.top+t.bottom,a=s*e+t.top;e=0!==n?a/n:0}return e}set s(e){var t=this.childMargin;if(0!==t.left||0!==t.right){var i=this.childrenMap.child,s=i.leftChildOX-i.rightChildOX,n=(s+t.left+t.right)*e-t.left;e=0!==s?n/s:0}this.childrenMap.child.s=e,this.updateController()}get s(){var e=this.childrenMap.child.s,t=this.childMargin;if(0!==t.left||0!==t.right){var i=this.childrenMap.child,s=i.leftChildOX-i.rightChildOX,n=s+t.left+t.right,a=s*e+t.left;e=0!==n?a/n:0}return e}set childOY(e){this.childrenMap.child.childOY=e,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(e){this.childrenMap.child.childOX=e,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var e=this.childrenMap.child;return e.topChildOY!==e.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var e=this.childrenMap.child;return e.leftChildOX!==e.rightChildOX}get sliderEnable(){var e=this.childrenMap.slider;return!!e&&e.enable}set sliderEnable(e){var t=this.childrenMap.slider;t&&t.setEnable(e)}setSliderEnable(e){return void 0===e&&(e=!0),this.sliderEnable=e,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(e){this.sliderEnable=e}setSliderYEnable(e){return this.setSliderEnable(e),this}get sliderXEnable(){var e=this.childrenMap.sliderX;return!!e&&e.enable}set sliderXEnable(e){var t=this.childrenMap.sliderX;t&&t.setEnable(e)}setSliderXEnable(e){return void 0===e&&(e=!0),this.sliderXEnable=e,this}get scrollerEnable(){var e=this.childrenMap.scroller;return!!e&&e.enable}set scrollerEnable(e){var t=this.childrenMap.scroller;t&&t.setEnable(e)}setScrollerEnable(e){return void 0===e&&(e=!0),this.scrollerEnable=e,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(e){this.scrollerEnable=e}setScrollerYEnable(e){return this.setScrollerEnable(e),this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return!!e&&e.enable}set scrollerXEnable(e){var t=this.childrenMap.scrollerX;t&&t.setEnable(e)}setScrollerXEnable(e){return void 0===e&&(e=!0),this.scrollerXEnable=e,this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return!!e&&e.enable}set scrollerXEnable(e){var t=this.childrenMap.scrollerX;t&&t.setEnable(e)}setScrollerXEnable(e){return void 0===e&&(e=!0),this.scrollerXEnable=e,this}get mouseWheelScrollerEnable(){var e=this.childrenMap.mouseWheelScroller;return!!e&&e.enable}set mouseWheelScrollerEnable(e){var t=this.childrenMap.mouseWheelScroller;t&&t.setEnable(e)}setMouseWheelScrollerEnable(e){return void 0===e&&(e=!0),this.mouseWheelScrollerEnable=e,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(e){this.mouseWheelScrollerEnable=e}setMouseWheelScrollerYEnable(e){return this.setMouseWheelScrollerEnable(e),this}get mouseWheelScrollerXEnable(){var e=this.childrenMap.mouseWheelScrollerX;return!!e&&e.enable}set mouseWheelScrollerXEnable(e){var t=this.childrenMap.mouseWheelScrollerX;t&&t.setEnable(e)}setMouseWheelScrollerXEnable(e){return void 0===e&&(e=!0),this.mouseWheelScrollerXEnable=e,this}setDropZoneEnable(e){void 0===e&&(e=!0);var t=this.childrenMap.child;return t.setInteractive(),t.input.dropZone=e,this}};Object.assign(Scrollable$1.prototype,Methods$8);var TextToLines=function(e,t,i){switch(GetTextObjectType(e)){case TextType:i=e.getWrappedText(t);break;case TagTextType:i=e.getPenManager(t,i);break;case BitmapTextType:i=e.maxWidth>0?e.setText(t).getTextBounds().wrappedText.split("\n"):t.split("\n")}return i},SetText=function(e){return void 0!==e&&(this.text=e),this.lines=TextToLines(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},TextHeightToLinesCount$1=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},LinesCountToTextHeight=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},GetLines$1=function(e){var t,i=e+this.visibleLinesCount+1;switch(this.textObjectType){case TextType:t=this.lines.slice(e,i).join("\n");break;case TagTextType:var s=this.lines.getLineStartIndex(e),n=this.lines.getLineEndIndex(i-1);t=this.lines.getSliceTagText(s,n,!0);break;case BitmapTextType:t=this.lines.slice(e,i).join("\n")}return t},SetNoWrapText=function(e,t){switch(GetTextObjectType(e)){case TextType:var i=(n=e.style).wordWrapWidth,s=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,e.setText(t),n.wordWrapWidth=i,n.wordWrapCallback=s;break;case TagTextType:var n,a=(n=e.style).wrapMode;n.wrapMode=0,e.setText(t),n.wrapMode=a;break;case BitmapTextType:var r=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=r}},ResetTextObjectPosition=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&CropTextObject.call(this)},CropTextObject=function(){if(this.textObject.setCrop){var e,t,i=this.textObject.rexSizer.offsetY;i<=0?(e=-i,t=this.height):(e=0,t=this.height-i),this.textObject.setCrop(0,e,this.width,t)}},UpdateTextObject=function(){var e=Math.max(Math.floor(TextHeightToLinesCount$1.call(this,-this.textOY)),0),t=LinesCountToTextHeight.call(this,e)+this.textOY,i=GetLines$1.call(this,e);return SetNoWrapText(this.textObject,i),this.textObject.rexSizer.offsetY=t,ResetTextObjectPosition.call(this),this},PreLayout=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,PreLayout$4.call(this),this},ResizeText=function(e,t,i){if(i+=this.textLineHeight+this.textLineSpacing,this.textObjectWidth!==t||this._textObjectRealHeight!==i){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case TextType:case TagTextType:e.setFixedSize(t,i);var s=e.style,n=Math.max(t,0);this.textObjectType===TextType?s.wordWrapWidth=n:(0===s.wrapMode&&(s.wrapMode=1),s.wrapWidth=n);break;case BitmapTextType:e.setMaxWidth(t)}this.setText()}},LayoutChildren$1=function(){var e,t,i,s,n,a,r,o=this.left,l=this.top;(e=this.textObject).rexSizer.hidden||(s=o+(i=(t=e.rexSizer).padding).left*this.scaleX,n=l+i.top*this.scaleY,a=this.width*this.scaleX-(i.left+i.right)*this.scaleX,r=this.height*this.scaleY-(i.top+i.bottom)*this.scaleY,ResizeText.call(this,e,a,r),AlignIn(e,s,n,a,r,t.align),t.preOffsetY=0,ResetTextObjectPosition.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const Methods$7={setText:SetText,updateTextObject:UpdateTextObject,preLayout:PreLayout,layoutChildren:LayoutChildren$1},IsPlainObject$c=Phaser.Utils.Objects.IsPlainObject,GetValue$1C=Phaser.Utils.Objects.GetValue,ALIGN_LEFTTOP$1=Phaser.Display.Align.TOP_LEFT;class TextBlock extends Base$1{constructor(e,t,i,s,n,a){IsPlainObject$c(t)?(t=GetValue$1C(a=t,"x",0),i=GetValue$1C(a,"y",0),s=GetValue$1C(a,"width",void 0),n=GetValue$1C(a,"height",void 0)):IsPlainObject$c(s)&&(s=GetValue$1C(a=s,"width",void 0),n=GetValue$1C(a,"height",void 0)),super(e,t,i,s,n,a),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=GetValue$1C(a,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(GetValue$1C(a,"clampTextOY",!0)),this.alwaysScrollable=GetValue$1C(a,"alwaysScrollable",!1);var r=GetValue$1C(a,"background",void 0),o=GetValue$1C(a,"text",void 0);void 0===o&&(o=CreateDefaultTextObject(e)),this.textCropEnable=GetValue$1C(a,"textCrop",!!o.setCrop);var l=GetValue$1C(a,"textMask",!this.textCropEnable);r&&this.addBackground(r),this.add(o),this.sizerChildren=[o];var h=this.getSizerConfig(o);h.align=ALIGN_LEFTTOP$1,h.padding=GetBoundsConfig$1(0),h.expand=!0,this.textObject=o,this.textObjectType=GetTextObjectType(o),h.preOffsetY=0,h.offsetY=0,l&&(this.textMask=AddChildMask.call(this,this.textObject,this)),this.addChildrenMap("background",r),this.addChildrenMap("text",o)}destroy(e){if(this.scene&&!this.ignoreDestroy){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case TextType:this.lines.length=0;break;case TagTextType:this.lines.destroy();break;case BitmapTextType:this.lines.length=0}this.lines=void 0}super.destroy(e)}}setClampMode(e){return void 0===e&&(e=!0),this.clampTextOY=e,this}get textLineHeight(){if(void 0===this._textLineHeight){var e;switch(this.textObjectType){case TextType:case TagTextType:var t=this.textObject.style;e=t.metrics.fontSize+t.strokeThickness;break;case BitmapTextType:var i=this.textObject.fontSize/this.textObject.fontData.size;e=this.textObject.fontData.lineHeight*i}this._textLineHeight=e}return this._textLineHeight}get textLineSpacing(){if(void 0===this._textLineSpacing){var e;switch(this.textObjectType){case TextType:case TagTextType:e=this.textObject.lineSpacing;break;case BitmapTextType:e=0}this._textLineSpacing=e}return this._textLineSpacing}get visibleLinesCount(){return void 0===this._visibleLinesCount&&(this._visibleLinesCount=Math.floor(TextHeightToLinesCount$1.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return void 0===this._textHeight&&(this._textHeight=LinesCountToTextHeight.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(void 0===this._textVisibleHeight){var e=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&e<0&&(e=0),this._textVisibleHeight=e}return this._textVisibleHeight}textOYExceedTop(e){return void 0===e&&(e=this.textOY),e>this.topTextOY}textOYExeceedBottom(e){return void 0===e&&(e=this.textOY),e<this.bottomTextOY}get textOY(){return this._textOY}set textOY(e){var t=this.topTextOY,i=this.bottomTextOY,s=this.textOYExceedTop(e),n=this.textOYExeceedBottom(e);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?e=0:s?e=t:n&&(e=i)),this._textOY!==e&&(this._textOY=e,this.updateTextObject()),s&&(this.execeedTopState||this.emit("execeedtop",this,e,t)),this.execeedTopState=s,n&&(this.execeedBottomState||this.emit("execeedbottom",this,e,i)),this.execeedBottomState=n}setTextOY(e){return this.textOY=e,this}set t(e){this.textOY=-this.textVisibleHeight*e}get t(){var e=this.textVisibleHeight;return 0===e?0:this.textOY/-e}setTextOYByPercentage(e){return this.t=e,this}}var CreateDefaultTextObject=function(e){return e.add.text(0,0,"")};Object.assign(TextBlock.prototype,Methods$7);var InjectProperties$2=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})};const SetTextMethods$2={setText(e){return this.childrenMap.child.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},ScrollMethods$2={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){void 0===e&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}},GetValue$1B=Phaser.Utils.Objects.GetValue;class TextArea extends Scrollable$1{constructor(e,t){void 0===t&&(t={});var i=GetValue$1B(t,"text",void 0),s=GetValue$1B(t,"textWidth",void 0),n=GetValue$1B(t,"textHeight",void 0),a=GetValue$1B(t,"textCrop",!!i.setCrop),r=GetValue$1B(t,"textMask",!a),o=GetValue$1B(t,"content",""),l=new TextBlock(e,{width:s,height:n,text:i,textMask:r,textCrop:a&&!r,content:o,clampTextOY:GetValue$1B(t,"clampChildOY",!1),alwaysScrollable:GetValue$1B(t,"alwaysScrollable",!1)});e.add.existing(l),InjectProperties$2(l),t.scrollMode=0,t.type="rexTextArea",t.child={gameObject:l,expandWidth:void 0===s,expandHeight:void 0===n};var h=GetValue$1B(t,"space",void 0);h&&(h.child=GetValue$1B(h,"text",0)),super(e,t),this.addChildrenMap("text",i)}get text(){return this.childrenMap.child.text}get lineHeight(){var e=this.childrenMap.child;return e.textLineHeight+e.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}Object.assign(TextArea.prototype,SetTextMethods$2,ScrollMethods$2);const GetValue$1A=Phaser.Utils.Objects.GetValue;var CreateTextArea=function(e,t,i){t=t?DeepClone(t):{};var s=GetValue$1A(i,"background",CreateBackground$2),n=GetValue$1A(i,"text",CreateText),a=GetValue$1A(i,"track",CreateBackground$2),r=GetValue$1A(i,"thumb",CreateBackground$2);s?t.background=s(e,t.background):delete t.background,n?t.text=n(e,t.text):delete t.text;var o=t.slider;!1!==o&&null!==o&&(void 0===o&&(o={}),a?o.track=a(e,o.track):delete o.track,r?o.thumb=r(e,o.thumb):delete o.thumb,t.slider=o);var l=new TextArea(e,t);return e.add.existing(l),l},CreateText=function(e,t){var i,s;switch(t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("key")&&(i="bitmaptext",t.font=t.key)),i){case"bitmaptext":case"bitmap":s=new StatesBitmapText(e,t);break;case"bbcodetext":case"bbcode":s=new BBCodeText(e,0,0,"",t);break;case"label":s=new SimpleLabel(e,t);break;case"textarea":s=CreateTextArea(e,t);break;default:s=new StatesText(e,t)}return DecorateGameObject(s,t),e.add.existing(s),s},CreateImage=function(e,t){var i,s;switch(t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("leftWidth")?i="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(i="roundRectangle")),i){case"nineSlice":s=t.hasOwnProperty("stretchMode")?new StatesNinePatch(e,t):new StatesNineSlice(e,t);break;case"roundRectangle":s=new StatesRoundRectangle(e,t);break;default:s=new StatesImage(e,t)}return DecorateGameObject(s,t),e.add.existing(s),s};const GetValue$1z=Phaser.Utils.Objects.GetValue;var BuildLabelConfig=function(e,t,i){t=t?DeepClone(t):{};var s=GetValue$1z(i,"background",CreateBackground$2),n=GetValue$1z(i,"text",CreateText),a=GetValue$1z(i,"icon",CreateImage),r=GetValue$1z(i,"action",CreateImage);return null!==t.background&&s?t.background=s(e,t.background):delete t.background,null!==t.text&&n?t.text=n(e,t.text):delete t.text,null!==t.icon&&a?t.icon=a(e,t.icon):delete t.icon,null!==t.action&&r?t.action=r(e,t.action):delete t.action,t};class SimpleLabel extends Label{constructor(e,t,i){super(e,t=BuildLabelConfig(e,t,i)),this.type="rexSimpleLabel"}setActiveState(e){return RunMethod$1(this.getChildren(),"setActiveState",e),this}setHoverState(e){return RunMethod$1(this.getChildren(),"setHoverState",e),this}setDisableState(e){return RunMethod$1(this.getChildren(),"setDisableState",e),this}}var RunMethod$1=function(e,t,i){for(var s=0,n=e.length;s<n;s++){var a=e[s];a&&a[t]&&a[t](i)}};ObjectFactory.register("simpleLabel",(function(e,t){var i=new SimpleLabel(this.scene,e,t);return this.scene.add.existing(i),i})),SetValue(window,"RexPlugins.UI.SimpleLabel",SimpleLabel);const GetValue$1y=Phaser.Utils.Objects.GetValue;var LayoutMode0$2=function(e){var t=this.scene,i=GetValue$1y(e,"orientation",0);this.setOrientation(i);var s=GetValue$1y(e,"icon",void 0),n=GetValue$1y(e,"iconMask",void 0),a=GetValue$1y(e,"innerBackground",void 0),r=GetValue$1y(e,"title",void 0),o=GetValue$1y(e,"separator",void 0),l=GetValue$1y(e,"text",void 0),h=GetValue$1y(e,"action",void 0),d=GetValue$1y(e,"actionMask",void 0);if(s){var c=GetValue$1y(e,"align.icon","center");v=0===this.orientation?{right:GetValue$1y(e,"space.icon",0),top:GetValue$1y(e,"space.iconTop",0),bottom:GetValue$1y(e,"space.iconBottom",0),left:GetValue$1y(e,"space.iconLeft",0)}:{bottom:GetValue$1y(e,"space.icon",0),left:GetValue$1y(e,"space.iconLeft",0),right:GetValue$1y(e,"space.iconRight",0),top:GetValue$1y(e,"space.iconTop",0)};var u=GetValue$1y(e,"squareFitIcon",!1)?1:0;if(this.add(s,{proportion:0,align:c,padding:v,fitRatio:u}),n&&(n=AddChildMask.call(this,s,s,1)),!u){var p=GetValue$1y(e,"iconSize",void 0);this.setIconSize(GetValue$1y(e,"iconWidth",p),GetValue$1y(e,"iconHeight",p))}}var g=new Sizer(t,{orientation:1});a&&g.addBackground(a);var m=GetValue$1y(e,"space.separator",0);if(r){c=GetValue$1y(e,"align.title","left");var f=GetValue$1y(e,"expandTitleWidth",!1);b=GetValue$1y(e,"expandTitleHeight",!1)?1:0,y=f,v={bottom:!o&&l?GetValue$1y(e,"space.title",m):0,left:GetValue$1y(e,"space.titleLeft",0),right:GetValue$1y(e,"space.titleRight",0)},g.add(r,{proportion:b,expand:y,align:c,padding:v})}if(o){var v={top:r?m:0,bottom:l?m:0,left:GetValue$1y(e,"space.separatorLeft",0),right:GetValue$1y(e,"space.separatorRight",0)};g.add(o,{expand:!0,padding:v})}if(l){c=GetValue$1y(e,"align.text","left");var b,y,C=GetValue$1y(e,"expandTextWidth",!1);b=GetValue$1y(e,"expandTextHeight",!1)?1:0,y=C,v={left:GetValue$1y(e,"space.textLeft",0),right:GetValue$1y(e,"space.textRight",0)},g.add(l,{proportion:b,expand:y,align:c,padding:v})}if(v=void 0,h&&(v={right:GetValue$1y(e,"space.text",0)}),this.add(g,{proportion:1,padding:v}),h&&(c=GetValue$1y(e,"align.action","center"),v=0===this.orientation?{top:GetValue$1y(e,"space.actionTop",0),bottom:GetValue$1y(e,"space.actionBottom",0),right:GetValue$1y(e,"space.actionRight",0)}:{left:GetValue$1y(e,"space.actionLeft",0),right:GetValue$1y(e,"space.actionRight",0),bottom:GetValue$1y(e,"space.actionBottom",0)},u=GetValue$1y(e,"squareFitAction",!1)?1:0,this.add(h,{proportion:0,align:c,padding:v,fitRatio:u}),d&&(d=AddChildMask.call(this,h,h,1)),!u)){var x=GetValue$1y(e,"actionSize");this.setActionSize(GetValue$1y(e,"actionWidth",x),GetValue$1y(e,"actionHeight",x))}this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",n),this.addChildrenMap("innerSizer",g),this.addChildrenMap("innerBackground",a),this.addChildrenMap("title",r),this.addChildrenMap("separator",o),this.addChildrenMap("text",l),this.addChildrenMap("action",h),this.addChildrenMap("actionMask",d)};const GetValue$1x=Phaser.Utils.Objects.GetValue;var LayoutMode1$1=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,i=GetValue$1x(e,"title",void 0),s=GetValue$1x(e,"separator",void 0),n=GetValue$1x(e,"innerBackground",void 0),a=GetValue$1x(e,"icon",void 0),r=GetValue$1x(e,"iconMask",void 0),o=GetValue$1x(e,"text",void 0),l=GetValue$1x(e,"action",void 0),h=GetValue$1x(e,"actionMask",void 0);if(i){var d=GetValue$1x(e,"align.title","left"),c=GetValue$1x(e,"expandTitleWidth",!1);b=GetValue$1x(e,"expandTitleHeight",!1)?1:0,y=c,p={bottom:GetValue$1x(e,"space.title",0),left:GetValue$1x(e,"space.titleLeft",0),right:GetValue$1x(e,"space.titleRight",0)},this.add(i,{proportion:b,expand:y,align:d,padding:p})}if(s){var u=GetValue$1x(e,"space.separator",0),p={top:i?u:0,bottom:o?u:0,left:GetValue$1x(e,"space.separatorLeft",0),right:GetValue$1x(e,"space.separatorRight",0)};this.add(s,{proportion:0,expand:!0,padding:p})}var g=GetValue$1x(e,"orientation",0),m=new Sizer(t,{orientation:g,rtl:GetValue$1x(e,"rtl",!1),space:{left:GetValue$1x(e,"space.innerLeft",0),right:GetValue$1x(e,"space.innerRight",0),top:GetValue$1x(e,"space.innerTop",0),bottom:GetValue$1x(e,"space.innerBottom",0)}});if(n&&m.addBackground(n),this.add(m,{proportion:1,expand:!0}),a){d=GetValue$1x(e,"align.icon","center"),p=0===m.orientation?{right:GetValue$1x(e,"space.icon",0),top:GetValue$1x(e,"space.iconTop",0),bottom:GetValue$1x(e,"space.iconBottom",0),left:GetValue$1x(e,"space.iconLeft",0)}:{bottom:GetValue$1x(e,"space.icon",0),left:GetValue$1x(e,"space.iconLeft",0),right:GetValue$1x(e,"space.iconRight",0),top:GetValue$1x(e,"space.iconTop",0)};var f=GetValue$1x(e,"squareFitIcon",!1)?1:0;if(m.add(a,{proportion:0,align:d,padding:p,fitRatio:f}),r&&(r=AddChildMask.call(this,a,a,1)),!f){var v=GetValue$1x(e,"iconSize",void 0);this.setIconSize(GetValue$1x(e,"iconWidth",v),GetValue$1x(e,"iconHeight",v))}}if(o){d=GetValue$1x(e,"align.text","left");var b,y,C=GetValue$1x(e,"space.text",0),x=GetValue$1x(e,"expandTextWidth",!1),S=GetValue$1x(e,"expandTextHeight",!1);0===m.orientation?(b=x?1:0,l&&(p={right:C}),y=S):(b=S?1:0,l&&(p={bottom:C}),y=x),m.add(o,{proportion:b,expand:y,align:d,padding:p})}if(l&&(d=GetValue$1x(e,"align.action","center"),p=0===m.orientation?{top:GetValue$1x(e,"space.actionTop",0),bottom:GetValue$1x(e,"space.actionBottom",0),right:GetValue$1x(e,"space.actionRight",0)}:{left:GetValue$1x(e,"space.actionLeft",0),right:GetValue$1x(e,"space.actionRight",0),bottom:GetValue$1x(e,"space.actionBottom",0)},f=GetValue$1x(e,"squareFitAction",!1)?1:0,m.add(l,{proportion:0,align:d,padding:p,fitRatio:f}),h&&(h=AddChildMask.call(this,l,l,1)),!f)){var w=GetValue$1x(e,"actionSize");this.setActionSize(GetValue$1x(e,"actionWidth",w),GetValue$1x(e,"actionHeight",w))}this.addChildrenMap("title",i),this.addChildrenMap("separator",s),this.addChildrenMap("innerSizer",m),this.addChildrenMap("innerBackground",n),this.addChildrenMap("icon",a),this.addChildrenMap("iconMask",r),this.addChildrenMap("text",o),this.addChildrenMap("action",l),this.addChildrenMap("actionMask",h)};const GetValue$1w=Phaser.Utils.Objects.GetValue,LayoutCallbacks$1=[LayoutMode0$2,LayoutMode1$1];class TitleLabel extends LabelBase{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexTitleLabel";var i=GetValue$1w(t,"background",void 0);i&&this.addBackground(i);var s=GetValue$1w(t,"title",void 0),n=GetValue$1w(t,"text",void 0);if(s){var a=GetValue$1w(t,"wrapTitle",!1),r=GetValue$1w(t,"adjustTitleFontSize",!1);a?(!0===a&&(a="word"),SetWrapMode(s,a),t.expandTitleWidth=!0,WrapExpandText(s)):r&&(t.expandTextWidth=!0,t.expandTextHeight=!0,FontSizeExpandText(s,{fitHeight:!0}))}if(n){var o=GetValue$1w(t,"wrapText",!1),l=GetValue$1w(t,"adjustTextFontSize",!1);o?(!0===o&&(o="word"),SetWrapMode(n,o),t.expandTextWidth=!0,WrapExpandText(n)):l&&(t.expandTextWidth=!0,t.expandTextHeight=!0,FontSizeExpandText(n,{fitHeight:!0}))}var h=GetValue$1w(t,"layoutMode",0);(LayoutCallbacks$1[h]||LayoutCallbacks$1[0]).call(this,t),this.addChildrenMap("background",t.background)}get title(){var e=this.childrenMap.title;return e?e.title:""}set title(e){var t=this.childrenMap.title;t&&t.setText(e)}setTitle(e){return this.title=e,this}resetDisplayContent(e){void 0===e?e={}:"string"==typeof e&&(e={text:e}),super.resetDisplayContent(e);var t=this.childrenMap.title;return t&&(void 0===e.title||(e.title?(this.show(t),this.setTitle(e.title)):this.hide(t))),this}}ObjectFactory.register("titleLabel",(function(e){var t=new TitleLabel(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.TitleLabel",TitleLabel);const GetValue$1v=Phaser.Utils.Objects.GetValue;var BuildTitleLabelConfig=function(e,t,i){var s,n,a=GetValue$1v(i,"innerBackground",CreateBackground$2),r=GetValue$1v(i,"separator",CreateBackground$2),o=GetValue$1v(i,"title",CreateText);null!==t.innerBackground&&a&&(s=a(e,t.innerBackground)),null!==t.separator&&r&&(n=r(e,t.separator)),t=BuildLabelConfig(e,t,i),s?t.innerBackground=s:delete t.innerBackground,n?t.separator=n:delete t.separator,null!==t.title&&o?t.title=o(e,t.title):delete t.title;var l=t.background;return l&&(s?e.children.moveBelow(l,s):n&&e.children.moveBelow(l,n)),t};class SimpleTitleLabel extends TitleLabel{constructor(e,t,i){super(e,t=BuildTitleLabelConfig(e,t,i)),this.type="rexSimpleTitleLabel"}setActiveState(e){return RunMethod(this.getChildren(),"setActiveState",e),this}setHoverState(e){return RunMethod(this.getChildren(),"setHoverState",e),this}setDisableState(e){return RunMethod(this.getChildren(),"setDisableState",e),this}}var RunMethod=function(e,t,i){for(var s=0,n=e.length;s<n;s++){var a=e[s];a&&a[t]&&a[t](i)}};ObjectFactory.register("simpleTitleLabel",(function(e,t){var i=new SimpleTitleLabel(this.scene,e,t);return this.scene.add.existing(i),i})),SetValue(window,"RexPlugins.UI.SimpleTitleLabel",SimpleTitleLabel);const GetValue$1u=Phaser.Utils.Objects.GetValue,IsPlainObject$b=Phaser.Utils.Objects.IsPlainObject;var Build$1=function(e,t){var i=GetValue$1u(t,"background",void 0),s=GetValue$1u(t,"icon",void 0),n=GetValue$1u(t,"iconMask",void 0),a=GetValue$1u(t,"nameText",void 0),r=GetValue$1u(t,"valueText",void 0),o=GetValue$1u(t,"bar",void 0),l=GetValue$1u(t,"action",void 0),h=GetValue$1u(t,"actionMask",void 0),d="line"===GetValue$1u(t,"barShape","line");IsPlainObject$b(o)&&(o=new(d?LineProgress:CircularProgress)(e,o),e.add.existing(o),a&&e.children.moveBelow(o,a),r&&e.children.moveBelow(o,r));var c=a||r||o;if(i&&this.addBackground(i),s){var u=void 0;0===this.orientation?(c||l)&&(u={right:GetValue$1u(t,"space.icon",0),top:GetValue$1u(t,"space.iconTop",0),bottom:GetValue$1u(t,"space.iconBottom",0)}):(c||l)&&(u={bottom:GetValue$1u(t,"space.icon",0),left:GetValue$1u(t,"space.iconLeft",0),right:GetValue$1u(t,"space.iconRight",0)}),this.add(s,{proportion:0,padding:u}),n&&(n=AddChildMask.call(this,s,s,1))}if(c){var p,g=new Sizer(e,{orientation:1});if(a||r){if(p=new Sizer(e,{orientation:0}),a){""===a.text&&a.setText(" "),a.setOrigin(0,a.originY);u={left:GetValue$1u(t,"space.name",0)};p.add(a,{padding:u})}r&&(""===r.text&&r.setText(" "),r.setOrigin(1,r.originY),p.addSpace(),u={right:GetValue$1u(t,"space.value",0)},p.add(r,{padding:u}),this.setValueTextFormatCallback(GetValue$1u(t,"valueTextFormatCallback",DefaultValueTextFormatCallback),GetValue$1u(t,"valueTextFormatCallbackScope",void 0))),g.add(p,{expand:!0})}if(o)if(d){var m=p?GetValue$1u(t,"space.bar"):0;void 0===m&&(m=GetValue$1u(t,"space.barTop",0)),u={top:m,bottom:GetValue$1u(t,"space.barBottom",0),left:GetValue$1u(t,"space.barLeft",0),right:GetValue$1u(t,"space.barRight",0)},g.add(o,{expand:!0,padding:u})}else u={top:GetValue$1u(t,"space.barTop",0),bottom:GetValue$1u(t,"space.barBottom",0),left:GetValue$1u(t,"space.barLeft",0),right:GetValue$1u(t,"space.barRight",0)},this.addBackground(o,u);u=void 0,l&&(u={right:GetValue$1u(t,"space.text",0)});var f=GetValue$1u(t,"align.text","bottom");this.add(g,{proportion:1,align:f,padding:u})}l&&(u=0===this.orientation?{top:GetValue$1u(t,"space.actionTop",0),bottom:GetValue$1u(t,"space.actionBottom",0)}:{left:GetValue$1u(t,"space.actionLeft",0),right:GetValue$1u(t,"space.actionRight",0)},this.add(l,{proportion:0,padding:u}),h&&(h=AddChildMask.call(this,l,l,1))),this.addChildrenMap("background",i),this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",n),this.addChildrenMap("name",a),this.addChildrenMap("value",r),this.addChildrenMap("bar",o),this.addChildrenMap("action",l),this.addChildrenMap("actionMask",h)},DefaultValueTextFormatCallback=function(e,t,i){return e.toString()};const Clamp$5=Phaser.Math.Clamp,SetValueMethods={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,i){return void 0===e&&(e=this.value),void 0===t&&(t=this.minValue),void 0===i&&(i=this.maxValue),this.valueTextFormatCallbackScope?this.valueTextFormatCallback(e,t,i):this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,i)},updateValueText(e,t,i){var s=this.childrenMap.value;return s&&this.valueTextFormatCallback&&(s.setText(this.getFormatValueText(e,t,i)),s.layout&&s.layout()),this},setValue(e,t,i){return void 0===t?t=this.minValue:this.minValue=t,void 0===i?i=this.maxValue:this.maxValue=i,e=Clamp$5(e,t,i),this.value=e,this.updateValueText(e,t,i),this.setBarValue(e,t,i),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,i){return void 0===t?t=this.minValue:this.minValue=t,void 0===i?i=this.maxValue:this.maxValue=i,void 0===this.easeValueTask&&(this.easeValueTask=new EaseValueTask(this),this.easeValueTask.on("update",(function(){this.setValue(this.value,this.minValue,this.maxValue)}),this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class NameValueLabel extends Sizer{constructor(e,t){super(e,t),this.type="rexNameValueLabel",Build$1.call(this,e,t),this.setEaseValueDuration(1e3)}get nameText(){var e=this.childrenMap.name;return void 0===e?"":e.text}set nameText(e){var t=this.childrenMap.name;void 0!==t&&t.setText(e)}setNameText(e){return this.nameText=e,this}get valueText(){var e=this.childrenMap.value;return void 0===e?"":e.text}set valueText(e){var t=this.childrenMap.value;void 0!==t&&t.setText(e)}setValueText(e){return this.valueText=e,this}get barValue(){var e=this.childrenMap.bar;if(void 0!==e)return e.value}set barValue(e){var t=this.childrenMap.bar;void 0!==t&&t.setValue(e)}setBarValue(e,t,i){var s=this.childrenMap.bar;return void 0===s||s.setValue(e,t,i),this}easeBarValueTo(e,t,i){var s=this.childrenMap.bar;return void 0===s||s.easeValueTo(e,t,i),this}setTexture(e,t){var i=this.childrenMap.icon;if(void 0!==i)return i.setTexture(e,t),this}get texture(){var e=this.childrenMap.icon;if(void 0!==e)return e.texture}get frame(){var e=this.childrenMap.icon;if(void 0!==e)return e.frame}postLayout(e,t,i){var s=this.childrenMap.iconMask;s&&(s.setPosition(),this.resetChildPositionState(s));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),super.postLayout(e,t,i),this}resize(e,t){super.resize(e,t);var i=this.childrenMap.iconMask;i&&i.resize();var s=this.childrenMap.actionMask;return s&&s.resize(),this}}Object.assign(NameValueLabel.prototype,SetValueMethods),ObjectFactory.register("nameValueLabel",(function(e){var t=new NameValueLabel(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.NameValueLabel",NameValueLabel);class LevelCounter extends EventEmitter{constructor(e){super(),this.setTable(GetValue$3U(e,"table")),this.setMaxLevel(GetValue$3U(e,"maxLevel"));var t=GetValue$3U(e,"exp",0),i=GetValue$3U(e,"level",void 0);void 0===i||this.checkLevel(i,t)||(console.error(`Level ${i} and Exp ${t} are mismatch`),i=void 0),this.resetExp(t,i)}setTable(e){return this.levelTable=e,this.isLevelMapFunction=IsFunction(e),this}setMaxLevel(e){var t;return void 0===e&&(e=Array.isArray(this.levelTable)?this.levelTable.length-1:-1),t=-1!==e?this.getExp(e):-1,this.hasMaxLevel=-1!==e,this.maxLevel=e,this.maxExp=t,this}resetExp(e,t){return this.hasMaxLevel&&e>this.maxExp&&(e=this.maxExp),void 0===t&&(t=this.getLevel(e)),this._exp=e,this._level=t,this._requiredExp=this.getRequiredExpToNextLevel(t,e),this}get exp(){return this._exp}set exp(e){if(this.hasMaxLevel&&e>this.maxExp&&(e=this.maxExp),e<this._exp)this.resetExp(e);else if(e!==this._exp){for(var t,i=this.getLevel(e,this._level),s=this._level,n=this._exp;;){var a=this.getExp(s),r=this.getExp(s+1);if(t=Math.min(r,e),this.emit("levelup",s,n,t,a,r),s===i&&t===e)break;s++,n=r}this.resetExp(e,i)}}get level(){return this._level}set level(e){this.hasMaxLevel&&e>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(e)}get requiredExp(){return this._requiredExp}getExp(e){return void 0===e?this._exp:this.isLevelMapFunction?this.levelTable(e):(this.hasMaxLevel&&e>this.maxLevel&&(e=this.maxLevel),this.levelTable[e])}getLevel(e,t){if(void 0===e)return this._level;for(void 0===t&&(t=0);;){var i=this.getExp(t+1);if(i>e)break;if(t++,this.hasMaxLevel&&i===this.maxExp)break}return t}getRequiredExpToNextLevel(e,t){return void 0===e&&(e=this.level),void 0===t&&(t=this.exp),this.getExp(e+1)-t}checkLevel(e,t){return t>=this.getExp(e)&&t<this.getExp(e+1)}gainExp(e,t,i){return t&&this.on("levelup",t,i),this.exp+=e,t&&this.off("levelup",t,i),this}setExp(e,t,i){return t&&this.on("levelup",t,i),this.exp=e,t&&this.off("levelup",t,i),this}setLevel(e,t,i){return t&&this.on("levelup",t,i),this.level=e,t&&this.off("levelup",t,i),this}}var RunCommands=function(e,t,i){var s,n=GetValue$3U(i,"reverse",!1);if(IsArray(e[0]))if(n)for(a=(r=e.length)-1;a>=0;a--)s=RunCommands(e[a],t,i);else for(var a=0,r=e.length;a<r;a++)s=RunCommands(e[a],t,i);else s=RunCommand(e,t,i);return s},RunCommand=function(e,t,i){var s,n=GetValue$3U(i,"argsConvert",void 0),a=GetValue$3U(i,"argsConvertScope",void 0),r=e[0];if(ARGS=Copy(ARGS,e,1),n){!0===n&&(n=TypeConvert,a=void 0);for(var o=0,l=ARGS.length;o<l;o++)ARGS[o]=a?n.call(a,ARGS[o],e):n(ARGS[o],e)}return"string"==typeof r?null==(s=t[r])&&(s=GetValue$3U(t,r,null)):s=r,s.apply(t,ARGS)},ARGS=[];const GetValue$1t=Phaser.Utils.Objects.GetValue;class Player extends ComponentBase{constructor(e,t){super(e,t);var i=GetValue$1t(t,"clock",void 0);i||(i=new Clock(e)),this.clock=i,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(t)}resetFromJSON(e){return this.clock.resetFromJSON(GetValue$1t(e,"clock",void 0)),this.state=GetValue$1t(e,"state",0),this.commands=GetValue$1t(e,"commands",[]),this.scope=GetValue$1t(e,"scope",void 0),this.setTimeUnit(GetValue$1t(e,"timeUnit",0)),this.setDtMode(GetValue$1t(e,"dtMode",0)),this.index=GetValue$1t(e,"index",0),this.nextTime=GetValue$1t(e,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(e){this.isShutdown||(this.clock.shutdown(e),this.commands=void 0,super.shutdown(e))}load(e,t,i){this.stop();var s=GetValue$1t(i,"timeUnit",void 0);void 0!==s&&this.setTimeUnit(s);var n=GetValue$1t(i,"dtMode",void 0);return void 0!==n&&this.setDtMode(n),e=e.filter((function(e){var t=e[0];return!isNaN(t)})).map((function(e){return"string"==typeof e[0]&&(e[0]=parseFloat(e[0])),e})),0===this.dtMode&&e.sort((function(e,t){var i=e[0],s=t[0];return i>s?1:i<s?-1:0})),Copy(this.commands,e),this.scope=t,this}clear(){return this.commands.length=0,this}append(e,t,...i){var s;return s=Array.isArray(t)?t:[t,...i],this.commands.push([e,s]),this}start(e){return void 0===e&&(e=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(e),this.update(e),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(e){return this.clock.seek(e),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return 2===this.state}get timeScale(){return this.clock.timeScale}set timeScale(e){this.clock.timeScale=e}setTimeScale(e){return this.timeScale=e,this}get now(){return this.clock.now}update(e){if(this.nextTime>e)return this;for(var t=this.commands;;){var i=t[this.index],s=i[1];if(IsArray(s)||(s=Copy(CMD,i,1)),RunCommands(s,this.scope),this.emit("runcommand",s,this.scope),this.index>=t.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>e)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(e){var t=this.commands[this.index][0];return 1===this.timeUnit&&(t*=1e3),1===this.dtMode&&(t+=e),t}setDtMode(e){return"string"==typeof e&&(e=DTMODE[e]),this.dtMode=e,this}setTimeUnit(e){return"string"==typeof e&&(e=TIMEUNITMODE[e]),this.timeUnit=e,this}}var CMD=[];const TIMEUNITMODE={ms:0,s:1,sec:1},DTMODE={abs:0,absolute:0,inc:1,increment:1};var OnLevelUp=function(e,t,i,s,n){var a=(i-t)/(n-s)*this.totalEaseDuration,r=i===n?e+1:e;this.player.append(0,this.setEaseValueDuration,a).append(0,this.easeValueTo,i,s,n).append(0,this.emit,"levelup.start",e,t,i,this).append(a,NOOP).append(0,this.emit,"levelup.end",r,t,i,this),this.player.isPlaying||this.player.start()};const ExpMethods={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}},GetValue$1s=Phaser.Utils.Objects.GetValue;class ExpBar extends NameValueLabel{constructor(e,t){super(e,t),this.type="rexExpBar",this.setTotalEaseDuration(GetValue$1s(t,"easeDuration",1e3)),this.levelCounter=new LevelCounter(GetValue$1s(t,"levelCounter")),this.player=new Player(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",OnLevelUp,this),this.player.on("complete",(function(){this.player.clear(),this.emit("levelup.complete",this.level,this)}),this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(e))}get exp(){return this.levelCounter.exp}set exp(e){this.levelCounter.exp=e}get level(){return this.levelCounter.level}set level(e){this.levelCounter.level=e}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(e){return this.totalEaseDuration=e,this}}Object.assign(ExpBar.prototype,ExpMethods),ObjectFactory.register("expBar",(function(e){var t=new ExpBar(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ExpBar",ExpBar);const SizerAdd$3=Sizer.prototype.add,SizerAddSpace=Sizer.prototype.addSpace;var Add$2=function(e){var t=!e.isRexSpace,i=!t||this.buttonsExpand?1:0;if(0===this.sizerChildren.length)if(t){!this.buttonsExpand&&("right"===this.buttonsAlign||"center"===this.buttonsAlign||"bottom"===this.buttonsAlign)&&SizerAddSpace.call(this),SizerAdd$3.call(this,e,{proportion:i,expand:!0});var s=!this.buttonsExpand&&"center"===this.buttonsAlign;s&&SizerAddSpace.call(this),this.hasTailSpace=s}else SizerAdd$3.call(this,e,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;SizerAdd$3.call(this,e,{index:n,proportion:i,expand:!0})}else SizerAdd$3.call(this,e,{proportion:i,expand:!0});return t&&this.buttonGroup.add(e),this};const AddChildMethods$3={addButton(e){if(IsArray(e))for(var t=e,i=0,s=t.length;i<s;i++)Add$2.call(this,t[i]);else Add$2.call(this,e);return this},addButtons(e){for(var t=0,i=e.length;t<i;t++)Add$2.call(this,e[t]);return this}},SizerRmove$2=Sizer.prototype.remove,SizerClear$2=Sizer.prototype.clear;var Remove$3=function(e,t){return this.getParentSizer(e)!==this||(this.buttonGroup.remove(e),SizerRmove$2.call(this,e,t)),this};const RemoveChildMethods$2={remove(e,t){if(IsArray(e))for(var i=e,s=0,n=i.length;s<n;s++)Remove$3.call(this,i[s],t);else Remove$3.call(this,e,t);return this},clear(e){return this.buttonGroup.buttons.length=0,SizerClear$2.call(this,e),this},removeButton(e,t){return(e=this.getButton(e))?(this.remove(e,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Remove$3.call(this,t[i],e);return this}};var OnButtonStateChange=function(e,t,i){if(e){var s=this.setValueCallback,n=this.setValueCallbackScope;s&&(n?s.call(n,e,t,i):s(e,t,i)),this.fireEvent("button.statechange",e,t,i)}},InjectSelectedProperty=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(i){if(e._selected!==i){var s=e._selected;e._selected=i,OnButtonStateChange.call(t,e,i,s)}},enumerable:!0,configurable:!0}),e.selected=!1};const AddMethods={add(e){return this.buttons.push(e),e._click||(e._click=new Button(e,this.clickConfig),e._click.on("click",(function(e,t,i,s){this.fireEvent("button.click",t,i,s)}),this).on("enable",(function(e,t){this.fireEvent("button.enable",t)}),this).on("disable",(function(e,t){this.fireEvent("button.disable",t)}),this).on("over",(function(e,t,i,s){this.fireEvent("button.over",t,i,s)}),this).on("out",(function(e,t,i,s){this.fireEvent("button.out",t,i,s)}),this).on("down",(function(e,t,i,s){this.fireEvent("button.down",t,i,s)}),this).on("up",(function(e,t,i,s){this.fireEvent("button.up",t,i,s)}),this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(void 0===e.name&&console.error(`${this.parent.constructor.name}: Option button miss value`),InjectSelectedProperty.call(this,e)),this},addMultiple(e){for(var t=0,i=e.length;t<i;t++)this.add(e[t]);return this}},RemoveItem=Phaser.Utils.Array.Remove,RemoveMethods={remove(e){return this.buttonsType&&delete e.selected,RemoveItem(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,i=e.length;t<i;t++)delete e[t].selected;return this.buttons.length=0,this}};var FireEvent=function(e,t,...i){if(this.buttons){var s;if("number"==typeof t){if(s=t,!(t=this.buttons[s]))return}else if(-1===(s=this.buttons.indexOf(t)))return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,s,...i),void 0!==this.groupName?this.eventEmitter.emit(e,t,this.groupName,s,...i):this.eventEmitter.emit(e,t,s,...i)}};const GetValue$1r=Phaser.Utils.Objects.GetValue,ButtonsTypeMethods={setButtonsType(e){void 0===e&&(e={});var t,i,s=GetValue$1r(e,"buttonsType",e.type);if(this.buttonsType=s,!this.buttonsType)return this;switch(t=GetValue$1r(e,"setValueCallback",void 0),i=GetValue$1r(e,"setValueCallbackScope",void 0),void 0===t&&(t=GetValue$1r(e,"setButtonStateCallback",void 0),i=GetValue$1r(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=t,this.setValueCallbackScope=i,s){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType()}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var i=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(s){if(e._value!==s){e._value=s;for(var n=0,a=t.length;n<a;n++){var r=t[n];r.rexSizer.hidden||(void 0===i?r.name===s?r.selected=!0:r.selected=!1:r.selected=i===n)}}},enumerable:!0,configurable:!0}),e.on("button.click",(function(t){i=this.buttons.indexOf(t),e.value=t.name,i=void 0}),this),this},setCheckboxesType(){return this.parent.on("button.click",(function(e){e.selected=!e.selected})),this},clearAllButtonsState(){for(var e=this.buttons,t=0,i=e.length;t<i;t++)e[t].selected=!1;return this},getAllButtonsState(){for(var e={},t=this.buttons,i=0,s=t.length;i<s;i++){var n=t[i];n.rexSizer.hidden||(e[n.name]=n.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){void 0===t&&(t=!0);for(var i=this.buttons,s=0,n=i.length;s<n;s++){var a=i[s];if(!a.rexSizer.hidden&&a.name===e){a.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,i=0,s=t.length;i<s;i++){var n=t[i];if(!n.rexSizer.hidden&&n.name===e)return n.selected}}};var GetGameObjectByName=function(e,t){if(!e)return null;if(IsArray(e)){for(var i,s=0,n=e.length;s<n;s++)if(i=TestName(e[s],t))return i}else for(var a in e)if(i=TestName(e[a],t))return i},TestName=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null};const ButtonMethods$2={getButton(e){var t,i=this.buttons;switch(typeof e){case"number":t=i[e];break;case"string":t=GetGameObjectByName(i,e);break;default:t=e,-1===i.indexOf(t)&&(t=void 0)}return t},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var i=this.buttons;if(void 0===e||"boolean"==typeof e){t=e;for(var s=0,n=i.length;s<n;s++)i[s]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(void 0===e||"boolean"==typeof e)for(var i=0,s=t.length;i<s;i++)t[i]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return void 0===e&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){return(this.buttonGroup?this.buttonGroup:this).fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,i=this.buttons,s=0,n=i.length;s<n;s++)(a=i[s])._click.isOver&&(a._click.isOver=!1,t.fireEvent("button.out",a));var a;return(a=this.getButton(e))&&(a._click.isOver=!0,t.fireEvent("button.over",a)),this},showButton(e){return Show(this.getButton(e)),this},hideButton(e){return Hide(this.getButton(e)),this},isButtonShown(e){return IsShown(this.getButton(e)),this},forEachButtton(e,t){for(var i=this.buttons,s=0,n=i.length;s<n;s++)t?e.call(t,i[s],s,i):e(i[s],s,i);return this}};class ButtonGroup{constructor(e){this.parent=e.parent,this.eventEmitter=e.eventEmitter,this.groupName=e.groupName,this.clickConfig=e.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var methods$h={fireEvent:FireEvent};Object.assign(ButtonGroup.prototype,AddMethods,RemoveMethods,ButtonsTypeMethods,ButtonMethods$2,methods$h);const ButtonStateMethods={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}},GetValue$1q=Phaser.Utils.Objects.GetValue;let Buttons$1=class extends Sizer{constructor(e,t){void 0===t&&(t={});var i=t.space;"number"==typeof i&&(t.space={item:i}),super(e,t),this.type="rexButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:GetValue$1q(t,"eventEmitter",this),groupName:GetValue$1q(t,"groupName",void 0),clickConfig:GetValue$1q(t,"click",void 0)}).setButtonsType(t);var s=GetValue$1q(t,"background",void 0),n=GetValue$1q(t,"buttons",void 0);this.buttonsExpand=GetValue$1q(t,"expand",!1),this.buttonsAlign=GetValue$1q(t,"align",void 0),s&&this.addBackground(s),n&&this.addButtons(n),this.addChildrenMap("background",s),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Buttons$1.prototype,AddChildMethods$3,RemoveChildMethods$2,ButtonMethods$2,ButtonStateMethods),ObjectFactory.register("buttons",(function(e){var t=new Buttons$1(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Buttons",Buttons$1);const SizerAdd$2=GridSizer.prototype.add,AddChildMethods$2={addButton(e,t,i){return SizerAdd$2.call(this,e,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var i=0,s=e;i<s;i++)this.addButton(e[i],void 0,t);return this}},SizerRmove$1=GridSizer.prototype.remove,SizerClear$1=GridSizer.prototype.clear;var Remove$2=function(e,t){return(e=this.getButton(e))?(this.buttonGroup.remove(e),SizerRmove$1.call(this,e,t),this):this};const RemoveChildMethods$1={remove(e,t){if(IsArray(e))for(var i=e,s=0,n=i.length;s<n;s++)Remove$2.call(this,i[s],t);else Remove$2.call(this,e,t);return this},clear(e){return this.buttonGroup.buttons.length=0,SizerClear$1.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Remove$2.call(this,t[i],e);return this}},GetValue$1p=Phaser.Utils.Objects.GetValue;class GridButtons extends GridSizer{constructor(e,t){void 0===t&&(t={});var i=GetValue$1p(t,"row",0),s=GetValue$1p(t,"column",t.col||0),n=GetValue$1p(t,"createCellContainerCallback"),a=GetValue$1p(t,"buttons",void 0),r=GetValue$1p(t,"expand",!0),o=r?1:0;if(n&&(t.createCellContainerCallback=void 0),void 0!==a){i=Math.max(i,a.length);for(var l=0,h=a.length;l<h;l++)s=Math.max(s,a[l].length)}t.row=i,t.column=s,t.columnProportions=o,t.rowProportions=o,super(e,t),this.type="rexGridButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:GetValue$1p(t,"eventEmitter",this),groupName:GetValue$1p(t,"groupName",void 0),clickConfig:GetValue$1p(t,"click",void 0)}).setButtonsType(t);var d=GetValue$1p(t,"background",void 0);if(this.buttonsExpand=r,GetValue$1p(t,"space",void 0),d&&this.addBackground(d),a)for(var c,u=0,p=a.length;u<p;u++)for(var g=0,m=(c=a[u]).length;g<m;g++)(b=c[g])&&this.addButton(b,g,u);else if(n)for(var f=0;f<i;f++)for(var v=0;v<s;v++){var b;(b=n(e,v,f))&&this.addButton(b,v,f)}this.addChildrenMap("background",d),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(GridButtons.prototype,AddChildMethods$2,RemoveChildMethods$1,ButtonMethods$2,ButtonStateMethods),ObjectFactory.register("gridButtons",(function(e){var t=new GridButtons(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.GridButtons",GridButtons);const SizerAdd$1=FixWidthSizer.prototype.add;var Add$1=function(e){return SizerAdd$1.call(this,e),this.buttonGroup.add(e),this};const AddChildMethods$1={addButton(e){if(IsArray(e))for(var t=e,i=0,s=t.length;i<s;i++)Add$1.call(this,t[i]);else Add$1.call(this,e);return this},addButtons(e){if(IsArray(e[0]))for(var t,i=e,s=0,n=i.length-1;s<=n;s++){for(var a=0,r=(t=i[s]).length;a<r;a++)Add$1.call(this,t[a]);s>n&&SizerAdd$1.addNewLine(this)}else for(a=0,r=e.length;a<r;a++)Add$1.call(this,e[a]);return this}},SizerRmove=FixWidthSizer.prototype.remove,SizerClear=FixWidthSizer.prototype.clear;var Remove$1=function(e,t){return(e=this.getButton(e))?(this.buttonGroup.remove(e),SizerRmove.call(this,e,t),this):this};const RemoveChildMethods={remove(e,t){if(IsArray(e))for(var i=e,s=0,n=i.length;s<n;s++)Remove$1.call(this,i[s],t);else Remove$1.call(this,e,t);return this},clear(e){return this.buttonGroup.buttons.length=0,SizerClear.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Remove$1.call(this,t[i],e);return this}},GetValue$1o=Phaser.Utils.Objects.GetValue;class Buttons extends FixWidthSizer{constructor(e,t){void 0===t&&(t={});var i=t.space;"number"==typeof i&&(t.space={item:i,line:i}),super(e,t),this.type="rexFixWidthButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:GetValue$1o(t,"eventEmitter",this),groupName:GetValue$1o(t,"groupName",void 0),clickConfig:GetValue$1o(t,"click",void 0)}).setButtonsType(t);var s=GetValue$1o(t,"background",void 0),n=GetValue$1o(t,"buttons",void 0);this.buttonsAlign=GetValue$1o(t,"align",void 0),s&&this.addBackground(s),n&&this.addButtons(n),this.addChildrenMap("background",s),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Buttons.prototype,AddChildMethods$1,RemoveChildMethods,ButtonMethods$2,ButtonStateMethods),ObjectFactory.register("fixWidthButtons",(function(e){var t=new Buttons(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.FixWidthButtons",Buttons);const FileChooserMethods={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,i,s,n){return this.childrenMap.fileChooser.loadFile(e,t,i,s,n),this},loadFilePromise(e,t,i,s){return this.childrenMap.fileChooser.loadFilePromise(e,t,i,s)}},GetValue$1n=Phaser.Utils.Objects.GetValue;class FileSelectorButton extends Label{constructor(e,t){super(e,t),this.type="rexFileSelectorButton";var i=new FileChooser(e);e.add.existing(i),this.addBackground(i),this.addChildrenMap("fileChooser",i),this.setAccept(GetValue$1n(t,"accept","")),this.setMultiple(GetValue$1n(t,"multiple",!1)),i.on("change",(function(e){var t=e.files;0!==t.length&&(t=Array.from(t),this.emit("select",t,this))}),this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(FileSelectorButton.prototype,FileChooserMethods),ObjectFactory.register("fileSelectorButton",(function(e){var t=new FileSelectorButton(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.FileSelectorButton",FileSelectorButton);const ButtonMethods$1={getChoice(e){var t=this.childrenMap.choicesSizer;return t?t.getButton(e):void 0},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return!!t&&t.getButtonEnable(e)},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return void 0===e&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return void 0===e?t?t.getAllButtonsState():{}:!!t&&t.getButtonState(e)},setChoicesButtonState(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return!!e&&e.hasAnyButton()},hasAnyAction(){var e=this.childrenMap.actionsSizer;return!!e&&e.hasAnyButton()},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return!!e&&e.hasAnyButton()},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return!!e&&e.hasAnyButton()}},ModalMethods={onCreateModalBehavior(e){e.on("button.click",(function(t,i,s,n,a){var r=!1;switch(i){case"actions":r=!0;break;case"choices":e.hasAnyAction()||(r=!0)}if(r){var o={index:s,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":o.value=e.getChoicesSelectedButtonName();break;case"checkboxes":o.value=e.getChoicesButtonStates();break;default:o.value=void 0}e.modalClose(o)}}))},modal(e,t){return e&&!1===e.defaultBehavior?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,ModalMethods$1.modal.call(this,e,t),this}};var Methods$6={};Object.assign(Methods$6,ButtonMethods$1,ModalMethods);const GetValue$1m=Phaser.Utils.Objects.GetValue;class Dialog extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation=1,super(e,t),this.type="rexDialog",this.eventEmitter=GetValue$1m(t,"eventEmitter",this);var i,s,n,a,r=GetValue$1m(t,"background",void 0),o=GetValue$1m(t,"title",void 0),l=GetValue$1m(t,"toolbar",void 0),h=GetValue$1m(t,"toolbarBackground",void 0),d=GetValue$1m(t,"leftToolbar",void 0),c=GetValue$1m(t,"leftToolbarBackground",void 0),u=GetValue$1m(t,"content",void 0),p=GetValue$1m(t,"description",void 0),g=GetValue$1m(t,"choices",void 0),m=GetValue$1m(t,"choicesBackground",void 0),f=GetValue$1m(t,"actions",void 0),v=GetValue$1m(t,"actionsBackground",void 0),b=GetValue$1m(t,"click",void 0);if(r&&this.addBackground(r),l&&(n=new Buttons$1(e,{groupName:"toolbar",background:h,buttons:l,orientation:0,space:{item:GetValue$1m(t,"space.toolbarItem",0)},click:b,eventEmitter:this.eventEmitter}),e.add.existing(n)),d&&(a=new Buttons$1(e,{groupName:"leftToolbar",background:c,buttons:d,orientation:0,space:{item:GetValue$1m(t,"space.leftToolbarItem",0)},click:b,eventEmitter:this.eventEmitter}),e.add.existing(a)),o||l||d){var y,C=!!o&&GetValue$1m(t,"expand.title",!0),x=GetValue$1m(t,"align.title","center"),S=!(o&&!C&&"center"===x||!o&&(l||d));y=S?new Sizer(e,{orientation:0}):new OverlapSizer(e),e.add.existing(y);var w=!!S||{height:!0};if(a&&y.add(a,{align:"left",expand:w}),o){S&&!C&&"right"===x&&y.addSpace();var T={left:GetValue$1m(t,"space.titleLeft",0),right:GetValue$1m(t,"space.titleRight",0)},P=C?1:0;y.add(o,{align:x,proportion:P,expand:w,padding:T}),S&&!C&&"left"===x&&y.addSpace()}n&&(S&&!o&&y.addSpace(),y.add(n,{align:"right",expand:w})),(u||p||g||f)&&(T={bottom:GetValue$1m(t,"space.title",0),top:GetValue$1m(t,"space.titleTop",0)}),P=GetValue$1m(t,"proportion.title",0),this.add(y,{padding:T,proportion:P,expand:!0})}if(u){var _=GetValue$1m(t,"align.content","center"),M=GetValue$1m(t,"space.content",0),O=(T={left:GetValue$1m(t,"space.contentLeft",0),right:GetValue$1m(t,"space.contentRight",0),bottom:p||g||f?M:0},P=GetValue$1m(t,"proportion.content",0),GetValue$1m(t,"expand.content",!0));this.add(u,{align:_,padding:T,proportion:P,expand:O})}if(p){_=GetValue$1m(t,"align.description","center");var k=GetValue$1m(t,"space.description",0);T={left:GetValue$1m(t,"space.descriptionLeft",0),right:GetValue$1m(t,"space.descriptionRight",0),bottom:g||f?k:0},P=GetValue$1m(t,"proportion.description",0),O=GetValue$1m(t,"expand.description",!0),this.add(p,{align:_,padding:T,proportion:P,expand:O})}if(g){var $=GetValue$1m(t,"choicesType","").split("-"),G=Contains($,"wrap")?Buttons:Contains($,"grid")?GridButtons:Buttons$1,E=Contains($,"radio")?"radio":Contains($,"checkboxes")?"checkboxes":void 0,V={left:GetValue$1m(t,"space.choicesBackgroundLeft",0),right:GetValue$1m(t,"space.choicesBackgroundRight",0),top:GetValue$1m(t,"space.choicesBackgroundTop",0),bottom:GetValue$1m(t,"space.choicesBackgroundBottom",0)},R=GetValue$1m(t,"space.choice",0);G===Buttons$1?V.item=R:G===Buttons?(V.item=R,V.line=GetValue$1m(t,"space.choiceLine",R)):(V.column=GetValue$1m(t,"space.choiceColumn",R),V.row=GetValue$1m(t,"space.choiceRow",R));var I={width:GetValue$1m(t,"choicesWidth",void 0),height:GetValue$1m(t,"choicesHeight",void 0),groupName:"choices",buttonsType:E,background:m,buttons:g,space:V,click:b,eventEmitter:this.eventEmitter,setValueCallback:GetValue$1m(t,"choicesSetValueCallback",void 0),setValueCallbackScope:GetValue$1m(t,"choicesSetValueCallbackScope",void 0)};G===Buttons$1&&(I.orientation=Contains($,"x")?0:1),i=new G(e,I),e.add.existing(i);var A=GetValue$1m(t,"space.choices",0);T={left:GetValue$1m(t,"space.choicesLeft",0),right:GetValue$1m(t,"space.choicesRight",0),bottom:f?A:0},_=GetValue$1m(t,"align.choices","center"),P=GetValue$1m(t,"proportion.choices",0),O=GetValue$1m(t,"expand.choices",!0),this.add(i,{align:_,padding:T,proportion:P,expand:O}),this.buttonsType=E}f&&(s=new Buttons$1(e,{groupName:"actions",background:v,buttons:f,orientation:0,space:{item:GetValue$1m(t,"space.action",0)},expand:GetValue$1m(t,"expand.actions",!1),align:GetValue$1m(t,"align.actions","center"),click:b,eventEmitter:this.eventEmitter}),e.add.existing(s),T={left:GetValue$1m(t,"space.actionsLeft",0),right:GetValue$1m(t,"space.actionsRight",0),bottom:GetValue$1m(t,"space.actionsBottom",0)},P=GetValue$1m(t,"proportion.action",0),this.add(s,{align:"center",padding:T,proportion:P,expand:!0})),EmitButtonEvent(this,"click"),EmitButtonEvent(this,"over"),EmitButtonEvent(this,"out"),EmitButtonEvent(this,"enable"),EmitButtonEvent(this,"disable"),this.addChildrenMap("background",r),this.addChildrenMap("title",o),this.addChildrenMap("toolbar",l),this.addChildrenMap("leftToolbar",d),this.addChildrenMap("content",u),this.addChildrenMap("description",p),this.addChildrenMap("choices",i?i.buttons:void 0),this.addChildrenMap("actions",s?s.buttons:void 0),this.addChildrenMap("choicesSizer",i),this.addChildrenMap("actionsSizer",s),this.addChildrenMap("toolbarSizer",n),this.addChildrenMap("leftToolbarSizer",a)}}var Contains=function(e,t){return-1!==e.indexOf(t)},ButtonsGroupEventNameMap={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},EmitButtonEvent=function(e,t){e.on(`button.${t}`,(function(i,s,n,a,r){ButtonsGroupEventNameMap.hasOwnProperty(s)&&e.emit(`${ButtonsGroupEventNameMap[s]}.${t}`,i,n,a,r)}))};Object.assign(Dialog.prototype,Methods$6),ObjectFactory.register("dialog",(function(e){var t=new Dialog(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Dialog",Dialog);var CreateLabel=function(e,t,i){var s=new SimpleLabel(e,t,i);return e.add.existing(s),s},ResetDisplayContent$1=function(e){return void 0===e&&(e={}),ResetTitle$1.call(this,e),ResetContent$1.call(this,e),ResetActions$1.call(this,e),ResetChoices.call(this,e),this},ResetTitle$1=function(e){var t=this.childrenMap.title;null===(e=e.title)?t.hide():(t.show(),t.resetDisplayContent(e))},ResetContent$1=function(e){var t=this.childrenMap.content;if(null===(e=e.content))t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var i=e||"";t.setText(i)}},ResetActions$1=function(e){var t=this.childrenMap.actions;if(t){var i=e.buttons;if(i){for(var s=this.scene,n=this.defaultActionConfig,a=this.defaultActionButtonCreator,r=0,o=i.length;r<o;r++){var l=i[r],h=t[r];h||(h=CreateLabel(s,n,a),this.addAction(h)),h.show().resetDisplayContent(l)}for(this.buttonMode=i.length,r=i.length,o=t.length;r<o;r++)t[r].hide()}else{var d=t[0];d&&(null===e.buttonA?d.hide():(d.show(),d.resetDisplayContent(e.buttonA)));var c=t[1];c&&(null===e.buttonB?c.hide():(c.show(),c.resetDisplayContent(e.buttonB)))}}},ResetChoices=function(e){var t=this.childrenMap.choices;if(t){var i=e.choices;i||(i=[]);for(var s=this.scene,n=this.defaultChoiceConfig,a=this.defaultActionButtonCreator,r=0,o=i.length;r<o;r++){var l=i[r];"string"==typeof l&&(l={text:l});var h,d=t[r];d||(d=CreateLabel(s,n,a),this.addChoice(d)),d.show().resetDisplayContent(l),h=l.hasOwnProperty("value")?l.value:l.text,d.setName(h)}for(r=i.length,o=t.length;r<o;r++)t[r].hide()}};const Merge$4=Phaser.Utils.Objects.Merge;var Modal$1=function(e,t){var i;IsFunction(e)&&(t=e,e=void 0),void 0===e&&(e={}),e=Merge$4(e,this.modalStyle),i=0===this.buttonMode&&!this.hasAnyChoice(),e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=i),e.hasOwnProperty("manualClose")||(e.manualClose=!i);var s=this;return ModalMethods$1.modal.call(this,e,(function(e){var i=e.index;i===s.confirmButtonIndex?s.emit("confirm",e):i===s.cancelButtonIndex&&s.emit("cancel",e),t&&t(e)})),this};const SetButtonIndexMethods={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}};var Methods$5={resetDisplayContent:ResetDisplayContent$1,modal:Modal$1};Object.assign(Methods$5,SetButtonIndexMethods);var OnPointerOverCallback=function(e){e.setHoverState&&e.setHoverState(!0)},OnPointerOutCallback=function(e){e.setHoverState&&e.setHoverState(!1)},OnChoiceButtonStateChange=function(e,t,i,s){e.setActiveState&&e.setActiveState(s)},OnButtonEnable=function(e){e.setDisableState&&e.setDisableState(!1)},OnButtonDisable=function(e){e.setDisableState&&e.setDisableState(!0)},RegisterEvents=function(){this.on("button.over",OnPointerOverCallback).on("button.out",OnPointerOutCallback).on("button.enable",OnButtonEnable).on("button.disable",OnButtonDisable).on("button.statechange",OnChoiceButtonStateChange)};const GetValue$1l=Phaser.Utils.Objects.GetValue;var CreateContent$1=function(e,t,i){var s,n=GetValue$1l(t,"$type");return void 0===n&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(n="textarea"),s="textarea"===n?new CreateTextArea(e,t,i):new CreateLabel(e,t,i),e.add.existing(s),s};const GetValue$1k=Phaser.Utils.Objects.GetValue;class ConfirmDialog extends Dialog{constructor(e,t,i){t=t?DeepClone(t):{},void 0===i&&(i={});var s=GetValue$1k(i,"background",CreateBackground$2);t.background=s(e,t.background),t.title=CreateLabel(e,t.title,i.title),t.content=CreateContent$1(e,t.content,i.content),t.content instanceof TextArea&&HasValue(t,"height")&&!HasValue(t,"proportion.content")&&SetValue(t,"proportion.content",1);var n=t.button,a=t.buttonA||n,r=t.buttonB||n,o=t.buttonMode;void 0===o&&(o=a&&r?2:a?1:0);var l=i.button,h=i.buttonA||l,d=i.buttonB||l;switch(o){case 2:t.actions=[CreateLabel(e,a,h),CreateLabel(e,r,d)];break;case 1:t.actions=[CreateLabel(e,a,h)];break;case 0:break;default:t.actions=[]}var c=t.choice;c&&(t.choices=[]),super(e,t),this.type="rexConfirmDialog",this.buttonMode=o,this.defaultActionConfig=n,this.defaultActionButtonCreator=l,this.defaultChoiceConfig=c,this.defaultChoiceCreator=i.choice;var u=this.childrenMap.actions;this.addChildrenMap("buttonA",u?u[0]:null),this.addChildrenMap("buttonB",u?u[1]:null),RegisterEvents.call(this),this.setConfirmButtonIndex(GetValue$1k(t,"confirmButtonIndex",0)),this.setCancelButtonIndex(GetValue$1k(t,"cancelButtonIndex",1)),this.modalStyle=t.modal||{}}}Object.assign(ConfirmDialog.prototype,Methods$5),ObjectFactory.register("confirmDialog",(function(e,t){var i=new ConfirmDialog(this.scene,e,t);return this.scene.add.existing(i),i})),SetValue(window,"RexPlugins.UI.ConfirmDialog",ConfirmDialog);const GetValue$1j=Phaser.Utils.Objects.GetValue;var ConfirmAction=function(e,t){var i=t.dialog,s=!i;if(s){var n=t.style;n.buttonMode=2,i=new ConfirmDialog(e,n,t.creators),e.add.existing(i)}i.setConfirmButtonIndex(GetValue$1j(t,"confirmButtonIndex",0)).setCancelButtonIndex(GetValue$1j(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),s&&t.onCreateDialog&&t.onCreateDialog(i);var a=t.modal;a&&!a.hasOwnProperty("destroy")&&(a.destroy=s);var r=t.confirm,o=t.cancel,l=t.confirmScope,h=t.cancelScope;return r&&i.once("confirm",r,l),o&&i.once("cancel",o,h),i.modal(a,(function(e){i.off("confirm",r,l),i.off("cancel",o,h)})),i};class ConfirmActionButton extends Label{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=Clone$2(t.confirmDialog||{}),t.confirm&&this.setConfirmCallback(t.confirm,t.confirmScope),t.cancel&&this.setCancelCallback(t.cancel,t.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=ConfirmAction(e,this.confirmActionConfig),this.confirmDialog.once("destroy",(function(){this.confirmDialog=void 0}),this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(e),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(e,t){return this.confirmActionConfig.confirm=e,this.confirmActionConfig.confirmScope=t,this}setCancelCallback(e,t){return this.confirmActionConfig.cancel=e,this.confirmActionConfig.cancelScope=t,this}setConfirmDialogContent(e){return this.confirmActionConfig.content=e,this}setConfitmDialogStyle(e){return this.confirmActionConfig.style=e,this}setConfitmDialogModalConfig(e){return this.confirmActionConfig.modal=e,this}setConfirmDialogEnable(e){return void 0===e&&(e=!0),this.confirmDialogEnable=e,this}runConfirmCallback(){var e=this.confirmActionConfig.confirm,t=this.confirmActionConfig.confirmScope;return e&&e.call(t),this}}ObjectFactory.register("confirmActionButton",(function(e){var t=new ConfirmActionButton(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ConfirmActionButton",ConfirmActionButton);var ResetDisplayContent=function(e){return void 0===e&&(e={}),ResetTitle.call(this,e),ResetContent.call(this,e),ResetActions.call(this,e),this},ResetTitle=function(e){var t=this.childrenMap.title;null===e.title?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},ResetContent=function(e){var t=this.childrenMap.firstNameTitle;if(null===e.firstNameTitle)this.hide(t);else{this.show(t);var i=e.firstNameTitle||"";t.resetDisplayContent(i)}var s=this.childrenMap.firstNameInput;if(null===e.firstName)this.hide(s);else{this.show(s);var n=e.firstName||"";s.setText(n)}var a=this.childrenMap.lastNameTitle;if(null===e.lastNameTitle)this.hide(a);else{this.show(a);var r=e.lastNameTitle||"";a.resetDisplayContent(r)}var o=this.childrenMap.lastNameInput;if(null===e.lastName)this.hide(o);else{this.show(o);var l=e.lastName||"";o.setText(l)}},ResetActions=function(e){var t=this.childrenMap.actions[0];null===e.button?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))};const Merge$3=Phaser.Utils.Objects.Merge;var Modal=function(e,t){IsFunction(e)&&(t=e,e=void 0),void 0===e&&(e={}),(e=Merge$3(e,this.modalStyle)).anyTouchClose=!1,e.manualClose=!1;var i=this;return ModalMethods$1.modal.call(this,e,(function(e){e.firstName=i.firstName,e.lastName=i.lastName,i.emit("confirm",e),t&&t(e)})),this},methods$g={resetDisplayContent:ResetDisplayContent,modal:Modal},CreateInputText$1=function(e,t,i){void 0===i&&(i=!0),i?t=t?DeepClone(t):{}:t||(t={});var s=new CanvasInput(e,t);return e.add.existing(s),s};const GetValue$1i=Phaser.Utils.Objects.GetValue;var CreateContent=function(e,t,i){var s=GetOrientationMode(GetValue$1i(t,"layoutMode",0)),n=0===s,a=new Sizer(e,{orientation:s,space:{item:GetValue$1i(t,"space.firstName",0)}});e.add.existing(a);var r=new Sizer(e,{orientation:"x"});e.add.existing(r);var o=GetValue$1i(t,"firstNameTitle",t.nameTitle),l=CreateLabel(e,o,i.firstNameTitle||i.nameTitle);r.add(l,{expand:!0,proportion:GetValue$1i(t,"proportion.firstNameTitle",0),padding:{right:GetValue$1i(t,"space.firstNameTitle",0)}});var h=t.nameInput||{},d=GetValue$1i(t,"firstNameInput",h),c=CreateInputText$1(e,d,i.firstNameInput||i.nameInput),u=!d.hasOwnProperty("width");r.add(c,{expand:!0,proportion:u?1:0});var p=new Sizer(e,{orientation:"x"});e.add.existing(p);var g=GetValue$1i(t,"lastNameTitle",t.nameTitle),m=CreateLabel(e,g,i.lastNameTitle||i.nameTitle);p.add(m,{expand:!0,proportion:GetValue$1i(t,"proportion.lastNameTitle",0),padding:{right:GetValue$1i(t,"space.lastNameTitle",0)}});var f=GetValue$1i(t,"firstNameInput",h),v=CreateInputText$1(e,f,i.lastNameInput||i.nameInput),b=!f.hasOwnProperty("width");if(p.add(v,{expand:!0,proportion:b?1:0}),n){var y=GetValue$1i(t,"proportion.firstName",u?1:0);a.add(r,{expand:!0,proportion:y});var C=GetValue$1i(t,"proportion.lastName",b?1:0);a.add(p,{expand:!0,proportion:C})}else a.add(r,{expand:u,proportion:0}),a.add(p,{expand:b,proportion:0});return a.addChildrenMap("firstNameTitle",l),a.addChildrenMap("firstNameInput",c),a.addChildrenMap("lastNameTitle",m),a.addChildrenMap("lastNameInput",v),a};const GetValue$1h=Phaser.Utils.Objects.GetValue;class NameInputDialog extends Dialog{constructor(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t.orientation="y";var s=t.space;s&&(s.hasOwnProperty("names")&&(s.content=s.names),s.hasOwnProperty("namesLeft")&&(s.contentLeft=s.namesLeft),s.hasOwnProperty("namesRight")&&(s.contentRight=s.namesRight));var n=GetValue$1h(i,"background",CreateBackground$2);t.background=n(e,t.background),t.title=CreateLabel(e,t.title,i.title),t.content=CreateContent(e,t,i),t.actions=[CreateLabel(e,t.button,i.button)],super(e,t),this.type="rexNameInputDialog";var a=t.content.childrenMap;this.addChildrenMap("firstNameTitle",a.firstNameTitle),this.addChildrenMap("firstNameInput",a.firstNameInput),this.addChildrenMap("lastNameTitle",a.lastNameTitle),this.addChildrenMap("lastNameInput",a.lastNameInput),this.addChildrenMap("button",t.actions[0]),RegisterEvents.call(this),this.modalStyle=t.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(e){this.childrenMap.firstNameInput.setText(e)}setFirstName(e){return this.firstName=e,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(e){this.childrenMap.lastNameInput.setText(e)}setLastName(e){return this.lastName=e,this}}Object.assign(NameInputDialog.prototype,methods$g),ObjectFactory.register("nameInputDialog",(function(e,t){var i=new NameInputDialog(this.scene,e,t);return this.scene.add.existing(i),i})),SetValue(window,"RexPlugins.UI.NameInputDialog",NameInputDialog);var RemoveFromParent=function(e,t){if(e){var i=GetParent$1(e);i&&i.remove(e,t)}};const GetValue$1g=Phaser.Utils.Objects.GetValue;var GetAddChildConfig=function(e,t,i){var s=GetValue$1g(e,`proportion.${t}`,i.proportion),n=GetValue$1g(e,`align.${t}`,"center"),a=GetValue$1g(e,`space.${t}`,void 0);if("number"==typeof a&&i.paddingKey){var r=a;(a={})[i.paddingKey]=r}return{proportion:s,align:n,padding:a,expand:GetValue$1g(e,`expand.${t}`,!0)}},GetAddHeaderConfig=function(e){return GetAddChildConfig(e,"header",{proportion:0,paddingKey:"bottom"})},GetAddLeftSideConfig=function(e){return GetAddChildConfig(e,"leftSide",{proportion:0,paddingKey:"right"})},GetAddContentConfig=function(e){return GetAddChildConfig(e,"content",{proportion:1})},GetAddRightSideConfig=function(e){return GetAddChildConfig(e,"rightSide",{proportion:0,paddingKey:"left"})},GetAddFooterConfig=function(e){return GetAddChildConfig(e,"footer",{proportion:0,paddingKey:"top"})},GetAddContainerConfig=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},CreatExpandContainer=function(e,t){var i=new Sizer(e,{orientation:t});return e.add.existing(i),i},LayoutMode0$1=function(e){var t=this.scene,i=e.header;i&&this.add(i,GetAddHeaderConfig(e));var s=CreatExpandContainer(t,0);this.add(s,GetAddContainerConfig());var n=e.leftSide;n&&s.add(n,GetAddLeftSideConfig(e));var a=e.content;a&&s.add(a,GetAddContentConfig(e));var r=e.rightSide;r&&s.add(r,GetAddRightSideConfig(e));var o=e.footer;o&&this.add(o,GetAddFooterConfig(e))},LayoutMode1=function(e){var t=this.scene,i=e.header;i&&this.add(i,GetAddHeaderConfig(e));var s=CreatExpandContainer(t,0);this.add(s,GetAddContainerConfig());var n=e.leftSide;n&&s.add(n,GetAddLeftSideConfig(e));var a=CreatExpandContainer(t,1);s.add(a,GetAddContainerConfig());var r=CreatExpandContainer(t,0);a.add(r,GetAddContainerConfig());var o=e.content;o&&r.add(o,GetAddContentConfig(e));var l=e.rightSide;l&&r.add(l,GetAddRightSideConfig(e));var h=e.footer;h&&a.add(h,GetAddFooterConfig(e))},LayoutMode2=function(e){var t=this.scene,i=e.header;i&&this.add(i,GetAddHeaderConfig(e));var s=CreatExpandContainer(t,0);this.add(s,GetAddContainerConfig());var n=CreatExpandContainer(t,1);s.add(n,GetAddContainerConfig());var a=CreatExpandContainer(t,0);n.add(a,GetAddContainerConfig());var r=e.leftSide;r&&a.add(r,GetAddLeftSideConfig(e));var o=e.content;o&&a.add(o,GetAddContentConfig(e));var l=e.footer;l&&n.add(l,GetAddFooterConfig(e));var h=e.rightSide;h&&s.add(h,GetAddRightSideConfig(e))},LayoutMode0=function(e){var t=this.scene,i=e.header;i&&this.add(i,GetAddHeaderConfig(e));var s=CreatExpandContainer(t,0);this.add(s,GetAddContainerConfig());var n=e.leftSide;n&&s.add(n,GetAddLeftSideConfig(e));var a=CreatExpandContainer(t,1);s.add(a,GetAddContainerConfig());var r=e.content;r&&a.add(r,GetAddContentConfig(e));var o=e.footer;o&&a.add(o,GetAddFooterConfig(e));var l=e.rightSide;l&&s.add(l,GetAddRightSideConfig(e))};const GetValue$1f=Phaser.Utils.Objects.GetValue,LayoutCallbacks=[LayoutMode0$1,LayoutMode1,LayoutMode2,LayoutMode0];var Build=function(e){void 0===e&&(e={});var t=e.background,i=e.header,s=e.leftSide,n=e.content,a=e.rightSide,r=e.footer;RemoveFromParent(t),RemoveFromParent(i),RemoveFromParent(s),RemoveFromParent(n),RemoveFromParent(a),RemoveFromParent(r),this.clear(!0),t&&this.addBackground(t);var o=GetValue$1f(e,"layoutMode",0);return"string"==typeof o&&(o=LayoutModesMap[o.toUpperCase()]),(LayoutCallbacks[o]||LayoutCallbacks[0]).call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",s),this.addChildrenMap("content",n),this.addChildrenMap("rightSide",a),this.addChildrenMap("footer",r),this};const LayoutModesMap={FFF:0,LFF:1,FFR:2,LFR:3};class HolyGrail extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation=1,super(e,t),this.type="rexHolyGrail",this.build(t)}}var methods$f={build:Build};Object.assign(HolyGrail.prototype,methods$f),ObjectFactory.register("holyGrail",(function(e){var t=new HolyGrail(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.HolyGrail",HolyGrail);const ButtonMethods={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var i=this.getButtonsSizer(e);return i?i.getButton(t):void 0},setButtonEnable(e,t,i){return this.getButtonsSizer(e).setButtonEnable(t,i),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var i=this.getButtonsSizer(e);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return Show(this.getButton(e,t)),this},showLeftButton(e){return Show(this.getLeftButton(e)),this},showRightButton(e){return Show(this.getRightButton(e)),this},showTopButton(e){return Show(this.getTopButton(e)),this},showBottomButton(e){return Show(this.getBottomButton(e)),this},hideButton(e,t){return Hide(this.getButton(e,t)),this},hideLeftButton(e){return Hide(this.getLeftButton(e)),this},hideRightButton(e){return Hide(this.getRightButton(e)),this},hideTopButton(e){return Hide(this.getTopButton(e)),this},hideBottomButton(e){return Hide(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,i){return this.getButtonsSizer(e).removeButton(t,i),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,i){return this.getButtonsSizer(e).forEachButtton(t,i),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}},GetValue$1e=Phaser.Utils.Objects.GetValue;class Tabs extends GridSizer{constructor(e,t){void 0===t&&(t={}),t.column=3,t.row=3,t.columnProportions=[0,0,0],t.rowProportions=[0,0,0];var i=GetValue$1e(t,"expand.panel",!1);i&&(t.columnProportions[1]=1,t.rowProportions[1]=1),super(e,t),this.type="rexTabs",this.eventEmitter=GetValue$1e(t,"eventEmitter",this);var s,n,a,r,o=GetValue$1e(t,"background",void 0),l=GetValue$1e(t,"panel",void 0),h=GetValue$1e(t,"leftButtons",void 0),d=GetValue$1e(t,"leftButtonsBackground",void 0),c=GetValue$1e(t,"rightButtons",void 0),u=GetValue$1e(t,"rightButtonsBackground",void 0),p=GetValue$1e(t,"topButtons",void 0),g=GetValue$1e(t,"topButtonsBackground",void 0),m=GetValue$1e(t,"bottomButtons",void 0),f=GetValue$1e(t,"bottomButtonsBackground",void 0),v=GetValue$1e(t,"click",void 0);if(o&&this.addBackground(o),l&&this.add(l,{column:1,row:1,expand:i}),h){var b=GetValue$1e(t,"space.leftButtonsOffset",0),y=GetValue$1e(t,"space.leftButton",0),C=GetValue$1e(t,"expand.leftButtons",!1),x=GetValue$1e(t,"align.leftButtons","top");s=new Buttons$1(e,{groupName:"left",background:d,buttons:h,orientation:"y",space:{item:y},expand:C,click:v,eventEmitter:this.eventEmitter}),this.add(s,{column:0,row:1,align:x,padding:{top:b},expand:C})}if(c){var S=GetValue$1e(t,"space.rightButtonsOffset",0),w=GetValue$1e(t,"space.rightButton",0),T=GetValue$1e(t,"expand.rightButtons",!1),P=GetValue$1e(t,"align.rightButtons","top");n=new Buttons$1(e,{groupName:"right",background:u,buttons:c,orientation:"y",space:{item:w},expand:T,click:v,eventEmitter:this.eventEmitter}),this.add(n,{column:2,row:1,align:P,padding:{top:S},expand:T})}if(p){var _=GetValue$1e(t,"space.topButtonsOffset",0),M=GetValue$1e(t,"space.topButton",0),O=GetValue$1e(t,"expand.topButtons",!1),k=GetValue$1e(t,"align.topButtons","left");a=new Buttons$1(e,{groupName:"top",background:g,buttons:p,orientation:"x",space:{item:M},expand:O,align:GetValue$1e(t,"align.topButtons",void 0),click:v,eventEmitter:this.eventEmitter}),this.add(a,{column:1,row:0,align:k,padding:{left:_},expand:O})}if(m){var $=GetValue$1e(t,"space.bottomButtonsOffset",0),G=GetValue$1e(t,"space.bottomButton",0),E=GetValue$1e(t,"expand.bottomButtons",!1),V=GetValue$1e(t,"align.bottomButtons","left");r=new Buttons$1(e,{groupName:"bottom",background:f,buttons:m,orientation:"x",space:{item:G},expand:E,align:GetValue$1e(t,"align.bottomButtons",void 0),click:v,eventEmitter:this.eventEmitter}),this.add(r,{column:1,row:2,align:V,padding:{left:$},expand:E})}this.addChildrenMap("background",o),this.addChildrenMap("panel",l),this.addChildrenMap("leftButtons",h),this.addChildrenMap("rightButtons",c),this.addChildrenMap("topButtons",p),this.addChildrenMap("bottomButtons",m),this.addChildrenMap("leftButtonsSizer",s),this.addChildrenMap("rightButtonsSizer",n),this.addChildrenMap("topButtonsSizer",a),this.addChildrenMap("bottomButtonsSizer",r)}}Object.assign(Tabs.prototype,ButtonMethods),ObjectFactory.register("tabs",(function(e){var t=new Tabs(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Tabs",Tabs),ObjectFactory.register("slider",(function(e){var t=new Slider(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Slider",Slider);class Cell{constructor(e,t){this.container=null,this._deltaHeight=0,this.setParent(e)}setParent(e){this.parent=e,this.parentContainer=e.getParentContainer()}destroy(e){void 0===e&&(e=!1),e||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(e){return e?(this.container&&this.container.destroy(),this.container=e,this.parentContainer.add(e),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var e=this.container;return this.container=null,this.parentContainer.remove(e),e}return null}setXY(e,t){return this.container&&this.parentContainer.setChildLocalPosition(this.container,e,t),this}setCellContainerAlign(e){return"string"==typeof e&&(e=AlignConst[e]),this.cellContainerAlign=e,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(e){null==e&&(e=0);var t=this.parent;0===this._deltaHeight&&0!==e?t.nonZeroDeltaHeightCount++:0!==this._deltaHeight&&0===e&&t.nonZeroDeltaHeightCount--;var i=this._deltaHeight!==e;if(this._deltaHeight=e,i){t.resetTotalRowsHeight();var s=0===this.scrollMode?"cellheightchange":"cellwidthchange";this.parentContainer.emit(s,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(e){this.deltaHeight=e}setDeltaHeight(e){return this.deltaHeight=e,this}setDeltaWidth(e){return this.deltaHeight=e,this}get height(){return 0===this.scrollMode?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(e){1!==this.scrollMode&&this.setDeltaHeight(e-this.parent.defaultCellHeight)}setHeight(e){return this.height=e,this}get width(){return 0===this.scrollMode?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(e){0!==this.scrollMode&&this.setDeltaHeight(e-this.parent.defaultCellHeight)}setWidth(e){return this.width=e,this}get scene(){return this.parentContainer.scene}}Object.assign(Cell.prototype,DataMethods$2);const GetValue$1d=Phaser.Utils.Objects.GetValue,SpliceOne=Phaser.Utils.Array.SpliceOne;class Table{constructor(e,t){this.parent=e,this.cells=[],this.cellPool=new Stack,this.resetFromJSON(t)}resetFromJSON(e){void 0===e&&(e={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var t=e.cellHeight;void 0===t&&(t=60);var i=e.cellWidth;return void 0===i&&(i=60),this.setDefaultCellHeight(t),this.setDefaultCellWidth(i),this.initCells(GetValue$1d(e,"cellsCount",0)),this.setColumnCount(GetValue$1d(e,"columns",1)),this}destroy(e){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return 0===this.nonZeroDeltaHeightCount}setDefaultCellHeight(e){return this.defaultCellHeight=e,this}setDefaultCellWidth(e){return this.defaultCellWidth=e,this}initCells(e){var t=this.cells;t.length=e;for(var i=0;i<e;i++)t[i]=null;return this}insertNewCells(e,t){var i=this.cells;if(e===i.length){var s=e+t;i.legth=s;for(var n=e;n<s;n++)i[n]=null}else{var a=[];for(a.length=t,n=0;n<t;n++)a[n]=null;this.cells.splice(e,0,...a)}return this.resetTotalRowsHeight(),this}removeCells(e,t){for(var i=e+t,s=e;s<i;s++)this.freeCell(s);return i===this.cells.length?this.cells.length=e:(1===t?SpliceOne(this.cells,e):this.cells.splice(e,t),this.buildCellIndex(e)),this.resetTotalRowsHeight(),this}setColumnCount(e){this.colCount=e,this.resetTotalRowsHeight();var t=this.parent;if(t.expandCellSize){var i=(0===t.scrollMode?t.width:t.height)/e;this.setDefaultCellWidth(i)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(e){return e>=0&&e<this.cells.length}heightToRowIndex(e,t){if(void 0===t&&(t=0),0===e)return 0;if(this.defaultCellHeightMode){var i=e/this.defaultCellHeight;return i=1===t?Math.ceil(i):Math.floor(i)}var s,n=this.rowCount,a=e;for(i=0;;){if(s=i>=0&&i<n,!((a-=this.getRowHeight(i))>0&&s)){if(0===a)return 2===t&&(i+=1),i;if(1===t){var r=i;(s=(i+=1)>=0&&i<n)||(i=r)}return i}i+=1}}widthToColIndex(e,t){if(0===e)return 0;var i=e/this.defaultCellWidth;return t?Math.ceil(i):Math.floor(i)}colRowToCellIndex(e,t){return e>=this.colCount?null:t*this.colCount+e}rowIndexToHeight(e,t){if(this.defaultCellHeightMode)return(t-e+1)*this.defaultCellHeight;for(var i=0,s=e;s<=t;s++)i+=this.getRowHeight(s);return i}colIndexToWidth(e,t){return(t-e+1)*this.defaultCellWidth}getRowHeight(e){var t=this.colCount;if(t<=1)return this.getCellHeight(this.colRowToCellIndex(0,e));for(var i,s=0,n=0;n<t;n++)s<(i=this.getCellHeight(this.colRowToCellIndex(n,e)))&&(s=i);return s}getColWidth(e){return this.defaultCellWidth}getCellHeight(e){if(!this.isValidCellIdx(e))return 0;var t;if(this.defaultCellHeightMode)t=this.defaultCellHeight;else{var i=this.getCell(e,!1),s=i?i.deltaHeight:0;t=this.defaultCellHeight+s}return t}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return null===this._totalRowsHeight&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(e){return e%this.colCount}cellIndxeToRowIndex(e){return Math.floor(e/this.colCount)}getCell(e,t){if(!this.isValidCellIdx(e))return null;if(void 0===t&&(t=!0),null===this.cells[e]&&t){var i=this.newCell(e);this.cells[e]=i}return this.cells[e]}newCell(e){var t=this.cellPool.pop();return null===t?t=new Cell(this):t.setParent(this),t.index=e,t}buildCellIndex(e){void 0===e&&(e=0);for(var t,i=this.cells,s=e,n=i.length;s<n;s++)(t=i[s])&&(t.index=s);return this}getParentContainer(){return this.parent}freeCell(e){return"number"==typeof e&&(e=this.cells[e]),e?(e.destroy(),this.cellPool.push(e),this):this}}var SetTableOY=function(e){var t=this.table,i=this.topTableOY,s=this.bottomTableOY,n=e>i,a=e<s;return this.clampTableOXY&&(t.rowCount<t.heightToRowIndex(this.instHeight,1)?e=0:n?e=i:a&&(e=s)),this._tableOY!==e&&(this._tableOY=e),n&&(this.execeedTopState||this.emit("execeedtop",this,e,i)),this.execeedTopState=n,a&&(this.execeedBottomState||this.emit("execeedbottom",this,e,s)),this.execeedBottomState=a,this},SetTableOX=function(e){var t=this.table,i=this.leftTableOX,s=this.rightTableOX,n=e>this.leftTableOX,a=e<this.rightTableOX;return this.clampTableOXY&&(t.colCount<t.widthToColIndex(this.instWidth,!0)?e=0:n?e=i:a&&(e=s)),this._tableOX!==e&&(this._tableOX=e),n&&(this.execeedLeftState||this.emit("execeedleft",this,e,i)),this.execeedLeftState=n,a&&(this.execeedRightState||this.emit("execeedright",this,e,s)),this.execeedRightState=a,this},MaskToGameObject=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const Intersects=Phaser.Geom.Intersects.RectangleToRectangle,Overlaps=Phaser.Geom.Rectangle.Overlaps;var MaskChildren=function({parent:e,mask:t,children:i,onVisible:s,onInvisible:n,scope:a}){if(t){void 0===i&&(i=e.getAllChildren());for(var r,o,l,h=!!s||!!n,d=e.getBounds(),c=MaskToGameObject(t),u=0,p=i.length;u<p;u++)if((r=i[u])!==c&&IsVisible(r)){if(l=r.visible,r.getBounds)switch(o=r.getBounds(o),ContainsPoints(d,o)){case 4:ShowAll(e,r);break;case 0:Intersects(d,o)||Overlaps(d,o)?ShowSome(e,r,t):ShowNone(e,r);break;default:ShowSome(e,r,t)}else ShowSome(e,r,t);if(h&&r.visible!==l){var g=r.visible?s:n;g&&(a?g.call(a,r,e):g(r,e))}}}},IsVisible=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t){if(t.visible){var i=t.parent;if(i){e=i;continue}return!0}return!1}return e.visible}},ContainsPoints=function(e,t){var i=t.top,s=t.bottom,n=t.left,a=t.right,r=0;return r+=e.contains(n,i)?1:0,r+=e.contains(n,s)?1:0,(r+=e.contains(a,i)?1:0)+(e.contains(a,s)?1:0)},ShowAll=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},ShowSome=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(i),e.setChildMaskVisible(t,!0))},ShowNone=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const GetValue$1c=Phaser.Utils.Objects.GetValue,MASKUPDATEMODE={update:0,everyTick:1},ChildrenMaskMethods={setupChildrenMask(e){return!1===e||(this.setMaskUpdateMode(GetValue$1c(e,"updateMode",0)),this.enableChildrenMask(GetValue$1c(e,"padding",0)),this.setMaskLayer(GetValue$1c(e,"layer",void 0)),this.onMaskGameObjectVisible=GetValue$1c(e,"onVisible"),this.onMaskGameObjectInvisible=GetValue$1c(e,"onInvisible"),this.maskGameObjectCallbackScope=GetValue$1c(e,"scope"),this.startMaskUpdate()),this},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return"string"==typeof e&&(e=MASKUPDATEMODE[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=AddChildMask.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return void 0===e&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return this.childrenMask&&this.maskChildrenFlag&&0!==this.alpha&&this.visible?(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):MaskChildren({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),0===this.maskUpdateMode&&(this.maskChildrenFlag=!1),this):this},layoutChildrenMask(){if(!this.childrenMask)return this;var e=MaskToGameObject(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}};var ShowCells=function(){if(0!==this.cellsCount){var e=this.scaleX,t=this.scaleY,i=1===e&&1===t;i||this.setScale(1);var s=this.table,n=this.tableOYOffset,a=this.tableOY+n,r=this.tableOX;this.startRowIndex=Math.max(s.heightToRowIndex(-a,2),0);for(var o=this.startRowIndex,l=Math.max(s.widthToColIndex(-r),0),h=l,d=s.colRowToCellIndex(h,o),c=this.bottomBound,u=this.rightBound,p=s.cellsCount-1,g=s.colCount-1,m=this.getCellTLX(h),f=m,v=this.getCellTLY(o)+n;v<c&&d<=p;){if(this.table.isValidCellIdx(d)){var b,y,C=s.getCell(d,!0);if(this.visibleCells.set(C),this.preVisibleCells.contains(C)||this.showCell(C),0===this.scrollMode?(b=f,y=v):(b=v,y=f),null==C.cellContainerAlign)C.setXY(b,y);else{var x=C.getContainer();AlignIn(x,b,y,C.width,C.height,C.cellContainerAlign),C.setXY(x.x,x.y)}}f<u&&h<g?(f+=s.getColWidth(h),h+=1):(f=m,v+=s.getRowHeight(o),h=l,o+=1),d=s.colRowToCellIndex(h,o)}i||this.setScale(e,t)}},ShowCell=function(e){var t,i=null;(t=e.getContainer())?(i=t,e.popContainer()):this.cellContainersPool&&null!==(i=this.cellContainersPool.getFirstDead())&&i.setActive(!0).setVisible(!0),this.emit("cellvisible",e,i,this),this.cellContainersPool&&((t=e.getContainer())?null===i?this.cellContainersPool.add(t):i!==t&&(this.cellContainersPool.add(t),this.cellContainersPool.killAndHide(i)):null!==i&&this.cellContainersPool.killAndHide(i))},GetCellTLX=function(e){var t=0===this.scrollMode?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,e-1)+t},GetCellTLY=function(e){var t=0===this.scrollMode?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,e-1)+t},HideCells=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate((function(e){t.contains(e)||this.hideCell(e)}),this)},HideCell=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},UpdateTable=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),e&&(ClearVisibleCellIndexes.call(this),this.hideCells()),ClearVisibleCellIndexes.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},ClearVisibleCellIndexes=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},IsCellVisible=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},PointToCellIndex=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var i=this.tableOY-(0===this.scrollMode?t:e),s=this.tableOX-(0===this.scrollMode?e:t),n=this.table,a=n.heightToRowIndex(-i,0),r=n.widthToColIndex(-s),o=n.colRowToCellIndex(r,a);return null===o?null:this.isCellVisible(o)?o:null},PointToCellContainer=function(e,t){var i=PointToCellIndex.call(this,e,t);if(null!==i)return this.getCellContainer(i)},EachVisibleCell=function(e,t){return this.visibleCells.each(e,t),this},IterateVisibleCell=function(e,t){return this.visibleCells.iterate(e,t),this},EachCell=function(e,t){return this.table.cells.slice().forEach(e,t),this},IterateCell=function(e,t){return this.table.cells.forEach(e,t),this},SetCellsCount=function(e){var t=this.cellsCount;return t===e||(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t)),this};const Clamp$4=Phaser.Math.Clamp;var InsertNewCells=function(e,t){return"object"==typeof e&&(e=e.index),void 0===t&&(t=1),t<=0||(e=Clamp$4(e,0,this.cellsCount),this.table.insertNewCells(e,t)),this},RemoveCells=function(e,t){if("object"==typeof e&&(e=e.index),void 0===t&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var i,s=e,n=e+t;s<n;s++)(i=this.getCell(s,!1))&&(this.visibleCells.contains(i)&&(HideCell.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(e,t),this},SetColumnCount=function(e){return this.table.colCount===e||this.table.setColumnCount(e),this},SetGridSize=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},UpdateVisibleCell=function(e){var t=this.table.getCell(e,!1);return t&&t.container?(ShowCell.call(this,t),this):this},methods$e={setTableOY:SetTableOY,setTableOX:SetTableOX,showCells:ShowCells,showCell:ShowCell,getCellTLX:GetCellTLX,getCellTLY:GetCellTLY,hideCells:HideCells,hideCell:HideCell,updateTable:UpdateTable,isCellVisible:IsCellVisible,pointToCellIndex:PointToCellIndex,pointToCellContainer:PointToCellContainer,eachVisibleCell:EachVisibleCell,iterateVisibleCell:IterateVisibleCell,eachCell:EachCell,iterateCell:IterateCell,setCellsCount:SetCellsCount,insertNewCells:InsertNewCells,removeCells:RemoveCells,setColumnCount:SetColumnCount,setGridSize:SetGridSize,updateVisibleCell:UpdateVisibleCell};Object.assign(methods$e,ChildrenMaskMethods);const Group=Phaser.GameObjects.Group,Set$1=Phaser.Structs.Set,GetValue$1b=Phaser.Utils.Objects.GetValue;let GridTable$1=class extends ContainerLite{constructor(e,t,i,s,n,a){void 0===a&&(a={}),super(e,t,i,s,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Set$1,this.preVisibleCells=new Set$1,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,GetValue$1b(a,"reuseCellContainer",!1)&&(this.cellContainersPool=new Group(e));var r,o,l,h=GetValue$1b(a,"cellVisibleCallback",null);if(null!==h){var d=GetValue$1b(a,"cellVisibleCallbackScope",void 0);this.on("cellvisible",h,d)}null!==(h=GetValue$1b(a,"cellInvisibleCallback",null))&&(d=GetValue$1b(a,"cellInvisibleCallbackScope",void 0),this.on("cellinvisible",h,d)),GetValue$1b(a,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(GetValue$1b(a,"mask",void 0)),this.setScrollMode(GetValue$1b(a,"scrollMode",0)),this.setClampMode(GetValue$1b(a,"clampTableOXY",!0)),this.setStartFromBottomEnable(GetValue$1b(a,"startFromBottom",!1));var c=0===this.scrollMode;c?(r=a.cellWidth,o=a.cellHeight,l=a.columns):(r=a.cellHeight,o=a.cellWidth,l=GetValue$1b(a,"rows",a.columns)),this.fixedCellSize=GetValue$1b(a,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&void 0===r,l||(l=1),this.fixedCellSize?l=Math.max(Math.floor(this.instWidth/r),1):this.expandCellSize&&(r=(s=c?this.width:this.height)/l),a.cellWidth=r,a.cellHeight=o,a.columns=l,this.table=new Table(this,a),this.updateTable()}destroy(e){this.scene&&!this.ignoreDestroy&&(this.destroyChildrenMask(),this.table.destroy(e),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(e))}setScrollMode(e){return"string"==typeof e&&(e=SCROLLMODE[e.toLowerCase()]),this.scrollMode=e,this}setClampMode(e){return void 0===e&&(e=!0),this.clampTableOXY=e,this}setStartFromBottomEnable(e){return void 0===e&&(e=!0),this.startFromBottomEnable=e,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(e){this.setTableOY(e).updateTable()}set tableOX(e){this.setTableOX(e).updateTable()}setTableOXY(e,t){return this.setTableOY(t).setTableOX(e),this}addTableOY(e){return this.setTableOY(this.tableOY+e),this}addTableOX(e){return this.setTableOX(this.tableOX+e),this}addTableOXY(e,t){return this.addTableOY(t).addTableOX(e),this}setTableOYByPercentage(e){return this.setTableOY(-this.tableVisibleHeight*e),this}getTableOYPercentage(){var e=this.tableVisibleHeight;return 0===e?0:this.tableOY/-e}setTableOXByPercentage(e){return this.setTableOX(-this.tableVisibleWidth*e),this}getTableOXPercentage(){var e=this.tableVisibleWidth;return 0===e?0:this.tableOX/-e}set t(e){this.setTableOYByPercentage(e).updateTable()}get t(){return this.getTableOYPercentage()}set s(e){this.setTableOXByPercentage(e).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,0===this.t)return this;do{this.t=1}while(1!==this.t);return this}scrollToRow(e){this.scrollToBottom();var t=this.table.rowIndexToHeight(0,e-1);return this.setTableOY(-t).updateTable(),this}scrollToNextRow(e){return void 0===e&&(e=1),this.scrollToRow(this.startRowIndex+e),this}getCell(e){return this.table.getCell(e,!0)}getCellContainer(e){var t,i=this.table.getCell(e,!1);return i&&(t=i.getContainer()),t}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(e,t){return("number"==typeof e?this.table.getCell(e,!0):e).height=t,this}setCellWidth(e,t){return("number"==typeof e?this.table.getCell(e,!0):e).width=t,this}resetAllCellsSize(e,t){if(1===this.scrollMode){var i=e;e=t,t=i}this.table.setDefaultCellHeight(t).setDefaultCellWidth(e);for(var s=this.table.cells,n=0,a=s.length;n<a;n++){var r=s[n];r&&(r.deltaHeight=0)}if(this.fixedCellSize){var o=Math.floor(this.instWidth/e);this.table.setColumnCount(o)}return this.updateTable(!0,!0),this}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var e=this.tableHeight-this.instHeight;if(e<0)return-e}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var e=this.tableHeight-this.instHeight;return e<0&&(e=0),e}get tableVisibleWidth(){var e=this.tableWidth-this.instWidth;return e<0&&(e=0),e}get bottomLeftY(){return-this.displayHeight*this.originY+this.displayHeight}get topRightX(){return-this.displayWidth*this.originX+this.displayWidth}get topLeftX(){return-this.displayWidth*this.originX}get topLeftY(){return-this.displayHeight*this.originY}get bottomBound(){return 0===this.scrollMode?this.bottomLeftY:this.topRightX}get rightBound(){return 0===this.scrollMode?this.topRightX:this.bottomLeftY}resize(e,t){if(this.width===e&&this.height===t)return this;if(super.resize(e,t),this.fixedCellSize){var i=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(i)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(GridTable$1.prototype,methods$e);const SCROLLMODE={v:0,vertical:0,h:1,horizontal:1};var InjectProperties$1=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},TableOnCellVisible=function(e){e.on("cellvisible",(function(e,t,i){var s=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;e.item=this.items[e.index],e.items=this.items,(t=n?s.call(n,e,t,i):s(e,t,i))&&(null==e.cellContainerAlign&&t.setOrigin&&t.setOrigin(0),t.isRexSizer&&t.layout()),e.item=void 0,e.items=void 0,e.setContainer(t)}),this)},EmitCellEvent=function(e,t,i,s,n,a,r){var o;if(void 0===n)o=s;else{var l=a.camera,h=s+l.scrollX*(i.scrollFactorX-1),d=n+l.scrollY*(i.scrollFactorY-1);o=i.pointToCellIndex(h,d)}if(null!=o){var c=i.getCellContainer(o);c&&e.emit(t,c,o,a,r)}},PointerUpDownCell=function(e,t){e.on("pointerdown",(function(t,i,s,n){EmitCellEvent(this.eventEmitter,"cell.down",e,t.worldX,t.worldY,t,n)}),this).on("pointerup",(function(t,i,s,n){EmitCellEvent(this.eventEmitter,"cell.up",e,t.worldX,t.worldY,t,n)}),this)},OverCell=function(e,t){e.on("pointermove",OnMove,this).on("pointerover",OnMove,this).on("pointerout",OnOut,this)},OnMove=function(e,t,i,s){var n=this.childrenMap.child,a=e.camera,r=e.worldX+a.scrollX*(n.scrollFactorX-1),o=e.worldY+a.scrollY*(n.scrollFactorY-1),l=n.pointToCellIndex(r,o);if(l!==n.input.lastOverCellIndex){var h=n.input.lastOverCellIndex;n.input.lastOverCellIndex=l,EmitCellEvent(this.eventEmitter,"cell.out",n,h,void 0,e,s),EmitCellEvent(this.eventEmitter,"cell.over",n,l,void 0,e,s)}},OnOut=function(e,t){var i=this.childrenMap.child,s=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,EmitCellEvent(this.eventEmitter,"cell.out",i,s,void 0,e,t)};const GetValue$1a=Phaser.Utils.Objects.GetValue;var ClickCell=function(e,t){var i=GetValue$1a(t,"click",void 0);!1!==i&&(void 0===i&&(i={}),i.threshold=10,e._click=new Button(e,i),e._click.on("click",(function(e,t,i,s){EmitCellEvent(this.eventEmitter,"cell.click",t,i.worldX,i.worldY,i,s)}),this))};const GetValue$19=Phaser.Utils.Objects.GetValue;var TapCell=function(e,t){var i=GetValue$19(t,"tap",void 0);!1!==i&&(e._tap=new Tap(e,i),e._tap.on("tap",(function(e,t,i){var s=`cell.${e.tapsCount}tap`;EmitCellEvent(this.eventEmitter,s,e.gameObject,e.worldX,e.worldY,i)}),this))};const GetValue$18=Phaser.Utils.Objects.GetValue;var PressCell=function(e,t){var i=GetValue$18(t,"press",void 0);!1!==i&&(e._press=new Press(e,i),e._press.on("pressstart",(function(t,i,s){EmitCellEvent(this.eventEmitter,"cell.pressstart",e,t.worldX,t.worldY,s)}),this).on("pressend",(function(t,i,s){EmitCellEvent(this.eventEmitter,"cell.pressend",e,t.worldX,t.worldY,s)}),this))};const GetValue$17=Phaser.Utils.Objects.GetValue;var SwipeCell=function(e,t){var i=GetValue$17(t,"swipe",void 0);!1!==i&&(void 0===i&&(i={}),i.dir="4dir",e._swipe=new Swipe(e,i),e._swipe.on("swipe",(function(t,i,s){var n=t.left?"left":t.right?"right":t.up?"up":"down";EmitCellEvent(this.eventEmitter,`cell.swipe${n}`,e,t.worldX,t.worldY,s)}),this))},TableSetInteractive=function(e,t){e.setInteractive(),PointerUpDownCell.call(this,e,t),OverCell.call(this,e,t),ClickCell.call(this,e,t),TapCell.call(this,e,t),PressCell.call(this,e,t),SwipeCell.call(this,e,t)},SetItems=function(e,t){this.items=void 0===e?[]:e,void 0===t&&(t=!0);var i=this.childrenMap.child;return i.setCellsCount(this.items.length),t&&(i.updateTable(!0),this.resizeController()),this};const ScrollMethods$1={scrollToRow(e){return this.childrenMap.child.scrollToRow(e),this},scrollToNextRow(e){return this.childrenMap.child.scrollToNextRow(e),this}},GetValue$16=Phaser.Utils.Objects.GetValue;class GridTable extends Scrollable$1{constructor(e,t){void 0===t&&(t={});var i=GetScrollMode(t),s=GetValue$16(t,"table",void 0);void 0===s&&(s={}),s.scrollMode=2===i?0:i,s.clampTableOXY=GetValue$16(t,"clampChildOY",!1);var n,a,r=GetValue$16(s,"width",void 0),o=GetValue$16(s,"height",void 0),l=new GridTable$1(e,0,0,r,o,s);e.add.existing(l),0===s.scrollMode?(n=void 0===r,a=void 0===o):(n=void 0===o,a=void 0===r),InjectProperties$1(l),l._minWidth=void 0===r?0:void 0,l._minHeight=void 0===o?0:void 0,t.type="rexGridTable",t.child={gameObject:l,expandWidth:n,expandHeight:a};var h=GetValue$16(t,"space",void 0);h&&(h.child=GetValue$16(h,"table",0)),super(e,t),this.addChildrenMap("table",l),this.addChildrenMap("tableLayer",l.maskLayer),this.eventEmitter=GetValue$16(t,"eventEmitter",this);var d=GetValue$16(t,"createCellContainerCallback",NOOP),c=GetValue$16(t,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(d,c),TableOnCellVisible.call(this,l),this.resizeControllerFlag=!1;var u=0===i?"cellheightchange":"cellwidthchange";l.on(u,(function(){this.resizeControllerFlag=!0}),this),GetValue$16(s,"interactive",!0)&&TableSetInteractive.call(this,l,s),this.setItems(GetValue$16(t,"items",[]),!1),e.game.events.on("poststep",this.onPostStep,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(e))}setCreateCellContainerCallback(e,t){return this.createCellContainerCallback=e,this.createCellContainerCallbackScope=t,this}refresh(){return this.setItems(this.items),this}getCell(e){return this.childrenMap.child.getCell(e)}getCellContainer(e){return this.childrenMap.child.getCellContainer(e)}updateVisibleCell(e){return this.childrenMap.child.updateVisibleCell(e)}resetAllCellsSize(e,t){return this.childrenMap.child.resetAllCellsSize(e,t),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){return this.childrenMap.child.startRowIndex}}var methods$d={setItems:SetItems};Object.assign(GridTable.prototype,ScrollMethods$1,methods$d),ObjectFactory.register("gridTable",(function(e){var t=new GridTable(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.GridTable",GridTable);var GetEaseConfig=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=0===t.orientation?1:0,e},PopUp=function(e,t){e.popUp(GetEaseConfig(e.root.easeIn,e))},ScaleDown$1=function(e,t){e.scaleDown(GetEaseConfig(e.root.easeOut,e))};const SetTransitCallbackMethods={setTransitInCallback(e){return void 0===e&&(e=PopUp),this.transitInCallback=e,this},setTransitOutCallback(e){return void 0===e&&(e=ScaleDown$1),this.transitOutCallback=e,this}};var PostUpdateDelayCall=function(e,t,i,s,n){var a=GetSceneObject(e);return a.time.delayedCall(t,(function(){a.sys.events.once("postupdate",(function(){i.call(s,n)}))}))};const DelayCallMethods={delayCall(e,t,i){return this.timer=PostUpdateDelayCall(this,e,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var ExpandSubMenu=function(e,t){var i;if((s=this.childrenMap.subMenu)&&s.parentButton===e)return this;this.collapseSubMenu(),i=this.root.toggleOrientation?0===this.orientation?1:0:this.orientation;var s=new this.constructor(this.scene,{items:t,orientation:i,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(s),this.childrenMap.subMenu=s,this.root.emit("expand",s,e,this),this},Collapse=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},CollapseSubMenu=function(){var e=this.childrenMap.subMenu;return void 0===e||(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse()),this},Methods$4={expandSubMenu:ExpandSubMenu,collapse:Collapse,collapseSubMenu:CollapseSubMenu};Object.assign(Methods$4,SetTransitCallbackMethods,DelayCallMethods);var CreateBackground$1=function(e,t,i,s){var n;return i&&(t.scene=e,n=s?i.call(s,t):i(t),t.scene=void 0),n},CreateButtons$4=function(e,t,i,s){var n,a,r=[];if(t&&i)for(var o=0,l=t.length;o<l;o++)(n=t[o]).scene=e,a=s?i.call(s,n,o,t):i(n,o,t),n.scene=void 0,r.push(a);return r},MenuSetInteractive=function(e){e.on(e.root.expandEventName,(function(e,t){if(!this._isPassedEvent){var i=this.root.childrenKey,s=this.items[t][i];s&&this.expandSubMenu(e,s)}}),e).on("button.click",(function(e,t,i,s){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",e,t,i,s),this.root._isPassedEvent=!1)}),e).on("button.over",(function(e,t,i,s){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",e,t,i,s),this.root._isPassedEvent=!1)}),e).on("button.out",(function(e,t,i,s){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",e,t,i,s),this.root._isPassedEvent=!1)}),e)},ParseEaseConfig=function(e,t){return"number"==typeof t&&(t={duration:t}),t.hasOwnProperty("orientation")&&void 0!==t.orientation?t.sameOrientation=GetOrientationMode(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},Expand=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,(function(){this.root.emit("popup.complete",this)}),this)};const GetValue$15=Phaser.Utils.Objects.GetValue;class Menu extends Buttons$1{constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1);var i=t._rootMenu,s=t._parentMenu,n=t._parentButton,a=GetValue$15(t,"popup",!0),r=GetValue$15(t,"items",void 0),o=GetValue$15(t,"createBackgroundCallback",void 0),l=GetValue$15(t,"createBackgroundCallbackScope",void 0);t.background=CreateBackground$1(e,r,o,l);var h=GetValue$15(t,"createButtonCallback",void 0),d=GetValue$15(t,"createButtonCallbackScope",void 0);if(t.buttons=CreateButtons$4(e,r,h,d),super(e,t),this.type="rexMenu",this.items=r,this.root=void 0===i?this:i,this.isRoot=this.root===this,this.parentMenu=s,this.parentButton=n,this.timer=void 0,this.isRoot){this.isPopUpMode=a;var c=t.bounds;void 0===c&&(c=GetViewport(e)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?SUBMENU_DOWN:SUBMENU_UP,this.x<c.centerX?SUBMENU_RIGHT:SUBMENU_LEFT],void 0!==(f=GetValue$15(t,"subMenuSide",void 0))&&("string"==typeof f&&(f=SubMenuSideMode[f]),this.subMenuSide[this.orientation]=f),this.toggleOrientation=GetValue$15(t,"toggleOrientation",!1),this.expandEventName=GetValue$15(t,"expandEvent","button.click"),this.easeIn=ParseEaseConfig(this,GetValue$15(t,"easeIn",0)),this.easeOut=ParseEaseConfig(this,GetValue$15(t,"easeOut",0)),this.setTransitInCallback(GetValue$15(t,"transitIn")),this.setTransitOutCallback(GetValue$15(t,"transitOut")),this.createBackgroundCallback=o,this.createBackgroundCallbackScope=l,this.createButtonCallback=h,this.createButtonCallbackScope=d,this.childrenKey=GetValue$15(t,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=GetValue$15(t,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&e.input.on("pointerdown",this.onPointerDownOutside,this)}var u=0,p=0;if(!this.root.easeIn.sameOrientation){var g=GetEaseConfig(this.root.easeIn,this).orientation,m=s?s.orientation:this.orientation,f=this.root.subMenuSide[m];0===g&&f===SUBMENU_LEFT&&(u=1),1===g&&f===SUBMENU_UP&&(p=1)}if(a&&this.setOrigin(u,p).layout(),!this.isRoot)switch(this.setScale(this.root.scaleX,this.root.scaleY),f=this.root.subMenuSide[s.orientation]){case SUBMENU_LEFT:this.alignTop(n.top).alignRight(n.left);break;case SUBMENU_RIGHT:this.alignTop(n.top).alignLeft(n.right);break;case SUBMENU_UP:this.alignLeft(n.left).alignBottom(n.top);break;case SUBMENU_DOWN:this.alignLeft(n.left).alignTop(n.bottom)}MenuSetInteractive(this),a&&(this.pushIntoBounds(this.root.bounds),Expand.call(this))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(e),this.removeDelayCall())}isInTouching(e){return!!super.isInTouching(e)||!!this.childrenMap.subMenu&&this.childrenMap.subMenu.isInTouching(e)}onPointerDownOutside(e){this.isInTouching(e)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const SUBMENU_LEFT=2,SUBMENU_RIGHT=0,SUBMENU_UP=3,SUBMENU_DOWN=1,SubMenuSideMode={up:SUBMENU_UP,down:SUBMENU_DOWN,left:SUBMENU_LEFT,right:SUBMENU_RIGHT};Object.assign(Menu.prototype,Methods$4),ObjectFactory.register("menu",(function(e){var t=new Menu(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Menu",Menu);var methods$c={setWrapEnable(e){return void 0===e&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return void 0===e&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return void 0===e&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return"string"==typeof e&&(e=ListExpandDirections[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return void 0===e&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return void 0===e&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return void 0===e&&(e=""),this.listAlignSide=e,this},setListSpace(e){return void 0===e&&(e={}),this.listSpace=e,this},setListDraggable(e){return void 0===e&&(e=!0),this.listDraggable=e,this}};const ListExpandDirections={down:0,up:1};var GetChildrenWidth=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=!1;return t.rexSizer.hidden?e=0:0===this.scrollMode?void 0===(e=this.getChildWidth(t))&&(i=!0):e=0,i?void 0:e},GetChildrenHeight=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=!1;if(t.rexSizer.hidden)e=0;else switch(this.scrollMode){case 0:default:e=0;break;case 1:void 0===(e=this.getChildHeight(t))&&(i=!0)}return i?void 0:e},GetChildrenSizers=function(e){return void 0===e&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},ResetChildPosition=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},LayoutChildren=function(){var e,t,i=this.child;if(!i.rexSizer.hidden){switch(this.scrollMode){case 0:e=this.width*this.scaleX;break;case 1:t=this.height*this.scaleY}i.isRexSizer?i.runLayout(this,e,t):ResizeGameObject(i,e,t),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},RemoveChildCallback=function(e,t){t||e.clearMask&&e.clearMask(!1)},methods$b={getChildrenWidth:GetChildrenWidth,getChildrenHeight:GetChildrenHeight,getChildrenSizers:GetChildrenSizers,resetChildPosition:ResetChildPosition,layoutChildren:LayoutChildren,removeChildCallback:RemoveChildCallback};Object.assign(methods$b,ChildrenMaskMethods);const IsPlainObject$a=Phaser.Utils.Objects.IsPlainObject,GetValue$14=Phaser.Utils.Objects.GetValue,ALIGN_LEFTTOP=Phaser.Display.Align.TOP_LEFT;class ScrollableBlock extends Base$1{constructor(e,t,i,s,n,a){IsPlainObject$a(t)?(t=GetValue$14(a=t,"x",0),i=GetValue$14(a,"y",0),s=GetValue$14(a,"width",void 0),n=GetValue$14(a,"height",void 0)):IsPlainObject$a(s)&&(s=GetValue$14(a=s,"width",void 0),n=GetValue$14(a,"height",void 0)),super(e,t,i,s,n,a),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(GetValue$14(a,"scrollMode",0));var r=GetValue$14(a,"clampChildOY",!0),o=GetValue$14(a,"clampChildOX",r);this.setClampMode(r,o);var l=GetValue$14(a,"child",void 0),h=GetValue$14(a,"expand",!0);l.setOrigin&&l.setOrigin(0),this.add(l),this.sizerChildren=[l];var d=this.getSizerConfig(l);d.align=ALIGN_LEFTTOP,d.expand=h,this.child=l;var c=GetValue$14(a,"mask");this.setupChildrenMask(c),this.childrenMask&&(this.maskGameObject=MaskToGameObject(this.childrenMask))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(e))}setScrollMode(e){return"string"==typeof e&&(e=SCROLLMODE$1[e.toLowerCase()]),this.scrollMode=e,this}setClampMode(e,t){return this.clampChildOY=e,this.clampChildOX=t,this}get instHeight(){return 0===this.scrollMode||2===this.scrollMode?this.displayHeight:this.displayWidth}get instWidth(){return 0===this.scrollMode||2===this.scrollMode?this.displayWidth:this.displayHeight}get childHeight(){return 0===this.scrollMode||2===this.scrollMode?GetDisplayHeight(this.child):GetDisplayWidth(this.child)}get childWidth(){return 0===this.scrollMode||2===this.scrollMode?GetDisplayWidth(this.child):GetDisplayHeight(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var e=this.childHeight-this.childVisibleHeight;return e<0&&(e=0),e}get visibleWidth(){var e=this.childWidth-this.childVisibleWidth;return e<0&&(e=0),e}childOYExceedTop(e){return void 0===e&&(e=this.childOY),e>this.topChildOY}childOYExeceedBottom(e){return void 0===e&&(e=this.childOY),e<this.bottomChildOY}childOXExceedLeft(e){return void 0===e&&(e=this.childOX),e>this.leftChildOX}childOXExeceedRight(e){return void 0===e&&(e=this.childOX),e<this.rightChildOX}get childOY(){return this._childOY}set childOY(e){var t=this.topChildOY,i=this.bottomChildOY,s=this.childOYExceedTop(e),n=this.childOYExeceedBottom(e);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?e=0:s?e=t:n&&(e=i)),this._childOY!==e&&(this._childOY=e,this.resetChildPosition()),s&&(this.execeedTopState||this.emit("execeedtop",this,e,t)),this.execeedTopState=s,n&&(this.execeedBottomState||this.emit("execeedbottom",this,e,i)),this.execeedBottomState=n}get childOX(){return this._childOX}set childOX(e){var t=this.leftChildOX,i=this.rightChildOX,s=this.childOXExceedLeft(e),n=this.childOXExeceedRight(e);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?e=0:s?e=t:n&&(e=i)),this._childOX!==e&&(this._childOX=e,this.resetChildPosition()),s&&(this.execeedLeftState||this.emit("execeedleft",this,e,t)),this.execeedLeftState=s,n&&(this.execeedRightState||this.emit("execeedright",this,e,i)),this.execeedRightState=n}setChildOY(e){return this.childOY=e,this}setChildOX(e){return this.childOX=e,this}set t(e){this.childOY=-this.visibleHeight*e}get t(){var e=this.visibleHeight;return 0===e?0:this.childOY/-e}set s(e){this.childOX=-this.visibleWidth*e}get s(){var e=this.visibleWidth;return 0===e?0:this.childOX/-e}setChildOYByPercentage(e){return this.t=e,this}setChildOXByPercentage(e){return this.s=e,this}}Object.assign(ScrollableBlock.prototype,methods$b);var ScrollToChild=function(e,t){if(!this.hasChild(e))return this;switch(this.scrollMode){case 0:AlignChild.call(this,e,"y",t);break;case 1:AlignChild.call(this,e,"x",t);break;default:AlignChild.call(this,e,"y",t),AlignChild.call(this,e,"x",t)}return this};const AlignYModes=["top","bottom","centerY","center"],AlignXModes=["left","right","centerX","center"];var AlignChild=function(e,t,i){var s,n="Y"===(t=t.toUpperCase()),a=this.childrenMap.child;if(n){if(i)for(var r=0,o=AlignYModes.length;r<o;r++){var l=AlignYModes[r];if(-1!==i.indexOf(l)){i=l;break}}switch(i){case"top":s=a.top-GetTopLeft(e).y;break;case"bottom":s=a.bottom-GetBottomLeft(e).y;break;case"centerY":case"center":s=a.centerY-GetCenter(e).y;break;default:var h=a.top-GetTopLeft(e).y,d=a.bottom-GetBottomLeft(e).y;s=h<=0&&d>=0?0:Math.abs(h)<=Math.abs(d)?h:d}}else{if(i)for(r=0,o=AlignXModes.length;r<o;r++)if(l=AlignXModes[r],-1!==i.indexOf(l)){i=l;break}switch(i){case"left":s=a.left-GetTopLeft(e).x;break;case"right":s=a.right-GetTopRight(e).x;break;case"centerX":case"center":s=a.centerX-GetCenter(e).x;break;default:var c=a.left-GetTopLeft(e).x,u=a.right-GetTopRight(e).x;s=c<=0&&u>=0?0:Math.abs(c)<=Math.abs(u)?c:u}}switch(this.scrollMode){case 0:case 1:this.childOY+=s;break;default:this[`childO${t}`]+=s}};const GetValue$13=Phaser.Utils.Objects.GetValue;class ScrollablePanel extends Scrollable$1{constructor(e,t){void 0===t&&(t={});var i=GetScrollMode(t),s=GetValue$13(t,"panel",void 0);void 0===s&&(s={}),s.scrollMode=i,s.clampChildOY=GetValue$13(t,"clampChildOY",!1),s.clampChildOX=GetValue$13(t,"clampChildOX",!1);var n,a,r=new ScrollableBlock(e,s);switch(e.add.existing(r),i){case 0:n=GetValue$13(t,"expand.panel",!0),a=!0;break;case 1:n=!0,a=GetValue$13(t,"expand.panel",!0);break;default:n=!0,a=!0}t.type="rexScrollablePanel",t.child={gameObject:r,expandWidth:n,expandHeight:a,align:GetValue$13(t,"align.panel","center")};var o=GetValue$13(t,"space",void 0);o&&(o.child=GetValue$13(o,"panel",0)),super(e,t),this.addChildrenMap("panel",r.child),this.addChildrenMap("panelLayer",r.maskLayer),this.addChildrenMap("mask",r.maskGameObject),this.addChildrenMap("scrollableBlock",r)}setChildrenInteractive(e){return void 0===e&&(e={}),e.hasOwnProperty("eventEmitter")||(e.eventEmitter=this),e.hasOwnProperty("targets")||(e.targets=[this.childrenMap.panel]),SetChildrenInteractive$1(this.childrenMap.child,e),this}}var methods$a={scrollToChild:ScrollToChild};Object.assign(ScrollablePanel.prototype,methods$a);const GetValue$12=Phaser.Utils.Objects.GetValue;var CreateListPanel=function(){var e,t=this.scene,i=this.listCreateBackgroundCallback;i&&(e=i.call(this,t),t.add.existing(e));var s=[],n=this.listCreateButtonCallback;if(n)for(var a=this.options,r=0,o=a.length;r<o;r++){var l=n.call(this,t,a[r],r,a);l&&(t.add.existing(l),s.push(l))}var h=this.listWidth;void 0===h&&(h="text"===this.listAlignMode?this.getElement("text").width:this.width);var d,c=this.listHeight,u={width:h,buttons:s,space:this.listSpace};if(this.listCreateSliderThumbCallback&&(c>0||this.listMaxHeight>0)){if(s=CreateButtons$3(t,u,this.listWrapEnable),this.listMaxHeight>0&&(s.layout(),s.height<=this.listMaxHeight&&(d=s)),!d){0===c&&(c=this.listMaxHeight);var p=CreateGameObject(t,this.listCreateSliderTrackCallback),g=CreateGameObject(t,this.listCreateSliderThumbCallback);d=new ScrollablePanel(t,{height:c,scrollMode:0,panel:{child:s,mask:{padding:1}},slider:{track:p,thumb:g,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:GetValue$12(this.listSpace,"panel",0)}}),t.add.existing(d)}}else u.height=c,s=CreateButtons$3(t,u,this.listWrapEnable),d=s;return e&&d.addBackground(e,"background"),this.listDraggable&&d.setDraggable(!0),d!==s&&s.on("button.over",(function(e,t,i,s){d.emit("button.over",e,t,i,s)})).on("button.out",(function(e,t,i,s){d.emit("button.out",e,t,i,s)})).on("button.click",(function(e,t,i,s){d.emit("button.click",e,t,i,s)})),d},CreateButtons$3=function(e,t,i){var s;return i?(t.orientation="x",s=new Buttons(e,t)):(t.orientation="y",s=new Buttons$1(e,t)),e.add.existing(s),s},CreateGameObject=function(e,t,i){var s;return t&&(s=t.call(i,e),e.add.existing(s)),s},ScaleDown=function(e,t,i,s,n){var a={mode:0};switch(i){case 0:case"x":a.end={x:0};break;case 1:case"y":a.end={y:0};break;default:a.end=0}return a.duration=t,a.ease=s,void 0===n?n=new Scale(e,a):n.resetFromJSON(a),n.restart(),n},GetValueFromAliasKeys=function(e,t,i,s,n){return HasValue(e,t)?GetValue$3U(e,t):HasValue(e,i)?GetValue$3U(e,i):n};const GetValue$11=Phaser.Utils.Objects.GetValue;var SetPosition=function(e,t){var i=GetValue$11(t,"expandDirection",void 0);"string"==typeof i&&(i=ExpandDirections[i]);var s,n,a=GetValueFromAliasKeys(t,"alignTarget","alignTargetX"),r=GetValue$11(t,"alignTargetY",a),o=GetValue$11(t,"alignOffsetX",0),l=GetValue$11(t,"alignOffsetY",0),h=GetValue$11(t,"alignSide","").includes("right"),d=GetValue$11(t,"bounds"),c=0===i,u=!(c||1===i),p=h?1:0,g=c||u?0:1;e.setOrigin(p,g),s=h?a.getTopRight().x:a.getTopLeft().x,n=r.getBottomLeft().y,e.setPosition(s+o,n+l);var m=d;m||(m=GetViewport(e.scene)),u&&e.getBottomLeft().y>m.bottom&&(n=r.getTopLeft().y,e.setOrigin(0,1).setPosition(s+o,n+l))};const ExpandDirections={down:0,up:1},GetValue$10=Phaser.Utils.Objects.GetValue;class DropDown extends OpenCloseTransition{constructor(e,t){void 0===t&&(t={}),null==t.transitIn&&(t.transitIn=function(e,t){PopUp$1(e,t,"y","Cubic")}),null==t.transitOut&&(t.transitOut=function(e,t){ScaleDown(e,t,"y","Linear")}),t.manualClose=!0,t.clickOutsideClose=!0,t.destroy=!0,super(e,t),SetPosition(e,t),e.isRexSizer&&e.layout();var i=GetValue$10(t,"touchOutsideClose",!1),s=GetValue$10(t,"anyTouchClose",!1);s&&(i=!1),s?this.once("open",this.anyTouchClose,this):i&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(e){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(e))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(e){this.clickOutsideTest&&IsPointInBounds(this.parent,e.worldX,e.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var OpenListPanel=function(){if(this.listPanel)return this;if(0===this.options.length)return this;var e,t=CreateListPanel.call(this);t.on("button.over",(function(e,i,s,n){this.currentOverIndex=i,this.listOnButtonOver&&this.listOnButtonOver.call(this,e,i,s,n),this.emit("button.over",this,t,e,i,s,n)}),this).on("button.out",(function(e,i,s,n){this.currentOverIndex===i&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,e,i,s,n),this.emit("button.out",this,t,e,i,s,n)}),this),e=this.listAlignMode&&"label"!==this.listAlignMode?this.getElement(this.listAlignMode):this;var i=new DropDown(t,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:e,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",(function(){t.on("button.click",(function(e,i,s,n){this.listOnButtonClick&&this.listOnButtonClick.call(this,e,i,s,n),this.emit("button.click",this,t,e,i,s,n),this.dropDownBehavior.requestClose()}),this),this.emit("list.open",this,t)}),this).on("close",(function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)}),this);return t.onClickOutside((function(){i.requestClose()})),this.listPanel=t,this.dropDownBehavior=i,this.pin(t),this},CloseListPanel=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},ToggleListPanel=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},EmitListButtonClick=function(e){if(void 0===e&&(e=this.currentOverIndex),void 0===e)return this;var t=this.listPanel,i=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,i,e),this.emit("button.click",this,t,i,e),this},EmitButtonOver=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this};const FocusButtonMethods={focusNextButton(){if(!this.isOpened)return this;var e,t=this.currentOverIndex;return e=void 0===t?0:(t+1)%this.listPanel.getButtons().length,this.emitButtonOver(e),this},focusPrevButton(){if(!this.isOpened)return this;var e,t=this.currentOverIndex;if(void 0===t)e=0;else{var i=this.listPanel.getButtons().length;e=(t-1+i)%i}return this.emitButtonOver(e),this}};var Methods$3={openListPanel:OpenListPanel,closeListPanel:CloseListPanel,toggleListPanel:ToggleListPanel,emitButtonClick:EmitListButtonClick,emitButtonOver:EmitButtonOver};Object.assign(Methods$3,methods$c,FocusButtonMethods);const GetValue$$=Phaser.Utils.Objects.GetValue;class DropDownList extends Label{constructor(e,t){super(e,t),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(GetValue$$(t,"options"));var i=GetValue$$(t,"list");this.setWrapEnable(GetValue$$(i,"wrap",!1)),this.setCreateButtonCallback(GetValue$$(i,"createButtonCallback")),this.setCreateListBackgroundCallback(GetValue$$(i,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(GetValue$$(i,"createTrackCallback")),this.setCreateListSliderThumbCallback(GetValue$$(i,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(GetValue$$(i,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(GetValue$$(i,"scroller")),this.setListMouseWheelScrollerConfig(GetValue$$(i,"mouseWheelScroller")),this.setButtonClickCallback(GetValue$$(i,"onButtonClick")),this.setButtonOverCallback(GetValue$$(i,"onButtonOver")),this.setButtonOutCallback(GetValue$$(i,"onButtonOut")),this.setListExpandDirection(GetValue$$(i,"expandDirection")),this.setListEaseInDuration(GetValue$$(i,"easeIn",500)),this.setListEaseOutDuration(GetValue$$(i,"easeOut",100)),this.setListTransitInCallback(GetValue$$(i,"transitIn")),this.settListTransitOutCallback(GetValue$$(i,"transitOut")),this.setListMaxHeight(GetValue$$(i,"maxHeight",0)),this.setListSize(GetValue$$(i,"width"),GetValue$$(i,"height",0)),this.setListAlignmentMode(GetValue$$(i,"alignParent","text")),this.setListAlignmentSide(GetValue$$(i,"alignSide","")),this.setListBounds(GetValue$$(i,"bounds")),this.setListSpace(GetValue$$(i,"space")),this.setListDraggable(GetValue$$(i,"draggable",!1)),this.setValueChangeCallback(GetValue$$(t,"setValueCallback"),GetValue$$(t,"setValueCallbackScope")),this.setValue(GetValue$$(t,"value")),this.onClick(this.toggleListPanel,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.listPanel&&(this.listPanel.destroy(e),this.listPanel=void 0),super.destroy(e))}get isOpened(){return!!this.listPanel}setOptions(e){return void 0===e&&(e=[]),this.options=e,this}setValueChangeCallback(e,t){return this.valueChangeCallback=e,this.valueChangeCallbackScope=t,this}setValue(e){return this.value=e,this}get value(){return this._value}set value(e){if(this._value!==e){var t=this._value;this._value=e;var i=this.valueChangeCallback,s=this.valueChangeCallbackScope;i&&(s?i.call(s,this,e,t):i(this,e,t)),this.emit("valuechange",this,e,t)}}}Object.assign(DropDownList.prototype,Methods$3),ObjectFactory.register("dropDownList",(function(e){var t=new DropDownList(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.DropDownList",DropDownList);var BuildListConfig=function(e,t,i){void 0===i&&(i={});var s=(t=t?DeepClone(t):{}).label||t.button,n=t.button||t.label;delete t.label,delete t.button;var a=i.label||i.button||i,r=i.button||i.label||i,o=BuildLabelConfig(e,s,a);o.list=t.list||{},o.list.createButtonCallback=function(e,t){var i=CreateLabel(e,n,r).resetDisplayContent(t);return t.hasOwnProperty("value")&&(i.value=t.value),i};var l=t.track;l&&(o.list.createTrackCallback=function(e){return CreateBackground$2(e,l)},delete t.track);var h=t.thumb;return h&&(o.list.createThumbCallback=function(e){return CreateBackground$2(e,h)},delete t.thumb),o.list.onButtonOver=function(e,t,i,s){e.setHoverState&&e.setHoverState(!0)},o.list.onButtonOut=function(e,t,i,s){e.setHoverState&&e.setHoverState(!1)},o};class SimpleDropDownList extends DropDownList{constructor(e,t,i){super(e,t=BuildListConfig(e,t,i)),this.type="rexSimpleDropDownList"}setOptions(e){void 0===e&&(e=[]);for(var t=0,i=e.length;t<i;t++){var s=e[t];"string"==typeof s&&(e[t]={text:s,value:s})}return super.setOptions(e),this}}ObjectFactory.register("simpleDropDownList",(function(e,t){var i=new SimpleDropDownList(this.scene,e,t);return this.scene.add.existing(i),i})),SetValue(window,"RexPlugins.UI.SimpleDropDownList",SimpleDropDownList);var TextHeightToLinesCount=function(e){var t,i,s;switch(GetTextObjectType(e)){case TextType:case TagTextType:t=e.height-e.padding.top-e.padding.bottom,i=e.lineSpacing,s=e.style.metrics.fontSize+e.style.strokeThickness;break;case BitmapTextType:t=e.height,i=0;var n=e.fontSize/e.fontData.size;s=e.fontData.lineHeight*n}return(t-i)/(s+i)},GetLines=function(e,t){if(void 0===e&&(e=this.startLineIndex),void 0===t){var i=this.pageLinesCount;t=i>0?e+i:this.totalLinesCount}var s;switch(t>this.totalLinesCount&&(t=this.totalLinesCount),this.textObjectType){case TextType:case BitmapTextType:s=this.lines.slice(e,t).join("\n");break;case TagTextType:var n=this.lines.getLineStartIndex(e),a=this.lines.getLineEndIndex(t-1);((s=this.lines.getSliceTagText(n,a,!0)).match(/\n/g)||[]).length>t-e-1&&(s=s.substring(0,s.length-1))}return s};const SetContentMethods={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(GetString(e)),e=this.sections.join("\n"),this.lines=TextToLines(this.parent,e,this.lines);var i,s=this.totalLinesCount-t;i=this.pageLinesCount>0?Math.ceil(s/this.pageLinesCount):1;for(var n=0;n<i;n++)this.pageStartIndexes.push(t+n*this.pageLinesCount);return this},setText(e,t){void 0===t&&(t=!0),t&&this.resetIndex(),this.clearText();for(var i=GetString(e).split(this.pageBreak),s=0,n=i.length;s<n;s++)this.appendPage(i[s]);return this},appendText(e){var t=this.content+GetString(e);return this.setText(t,!1),this}},Clamp$3=Phaser.Math.Clamp,GetPageMethods={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=Clamp$3(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return void 0===e&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=Clamp$3(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},ShowMethods={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){SetNoWrapText(this.parent,e)}};var Methods$2={getLines:GetLines};Object.assign(Methods$2,SetContentMethods,GetPageMethods,ShowMethods);const GetValue$_=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;class TextPage extends ComponentBase{constructor(e,t){super(e,{eventEmitter:!1}),this.textObjectType=GetTextObjectType(this.parent),this.pageStartIndexes=[],this.lines=TextToLines(this.parent,""),this.sections=[],this.resetFromJSON(t)}resetFromJSON(e){this.setMaxLines(GetValue$_(e,"maxLines",void 0)),this.setPageBreak(GetValue$_(e,"pageBreak","\f\n")),this.setText(GetValue$_(e,"text","")),this.startLineIndex=GetValue$_(e,"start",-1),this.endLineIndex=GetValue$_(e,"end",void 0);var t=GetValue$_(e,"page");return void 0===t?this.resetIndex():this.setPageIndex(t),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(e){if(!this.isShutdown){switch(this.textObjectType){case TextType:this.lines.length=0;break;case TagTextType:this.lines.destroy();break;case BitmapTextType:this.lines.length=0}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(e)}}setMaxLines(e){return this.maxLines=e,this}setPageBreak(e){return this.pageBreak=e,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(void 0!==this.maxLines)return this.maxLines;var e;switch(this.textObjectType){case TextType:case TagTextType:var t=this.parent.style.maxLines;e=t>0?t:Math.floor(TextHeightToLinesCount(this.parent));break;case BitmapTextType:e=this.totalLinesCount}return e}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}Object.assign(TextPage.prototype,Methods$2);const SetTextMethods$1={setText(e){this.setTextCallback&&(e=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?SetNoWrapText(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(GetString(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}};var StartTyping=function(e,t,i,s){return void 0!==e&&this.setTypingContent(e),void 0!==t&&(this.speed=t),void 0===i&&(i=0),this.typingIndex=i+1,0===this.speed?this.stop(!0):(this.setText(""),this.startTimer(s)),this},GetPlainText=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},StartTypingFromLine=function(e,t,i,s,n){var a;if(t>0){void 0===s&&(s=0);var r=GetPlainText(this.parent,e);a=GetNewLineIndex(r,t)+s}return this.start(e,i,a,n)},GetNewLineIndex=function(e,t){for(var i=void 0,s=0;s<t&&-1!==(i=e.indexOf("\n",i+1));s++);return i},GetSubString=function(e,t,i,s){return e.getSubString?e.getSubString(t,i,s):t.slice(i,s)},GetTypingString=function(e,t,i,s){var n,a=this.parent;if(0===s){var r=0,o=t;this.insertIndex=o,n=GetSubString(a,e,r,o)}else if(1===s)r=(o=i)-t,this.insertIndex=0,n=GetSubString(a,e,r,o);else if(2===s){var l=i/2;o=(r=Math.floor(l-t/2))+t,this.insertIndex=t%2?t:0,n=GetSubString(a,e,r,o)}else if(3===s){var h,d=Math.floor(t/2);h=d>0?GetSubString(a,e,r=(o=i)-d,o):"";var c,u=t-d;u>0?(o=(r=0)+u,this.insertIndex=o,c=GetSubString(a,e,r,o)):(c="",this.insertIndex=0),n=c+h}return this.insertChar=n.charAt(this.insertIndex-1),n},StopTyping=function(e){if(this.getTimer()&&this.freeTimer(),e){for(;!this.isLastChar;)GetTypingString.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},PauseTyping=function(){var e=this.getTimer();return e&&(e.paused=!0),this},ResumeTyping=function(){var e=this.getTimer();return e&&(e.paused=!1),this},methods$9={start:StartTyping,startFromLine:StartTypingFromLine,stop:StopTyping,pause:PauseTyping,resumeTyping:ResumeTyping};Object.assign(methods$9,SetTextMethods$1);var GetWrapText=function(e,t){switch(GetTextObjectType(e)){case TextType:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case TagTextType:t=e.getText(t,void 0,void 0,!0);break;case BitmapTextType:t=e.setText(t).getTextBounds().wrappedText}return t};const GetFastValue=Phaser.Utils.Objects.GetFastValue,GetValue$Z=Phaser.Utils.Objects.GetValue;class TextTyping extends ComponentBase{constructor(e,t){super(e,t),this.timer=null,this.resetFromJSON(t)}resetFromJSON(e){this.setTextWrapEnable(GetValue$Z(e,"wrap",!1)),this.setTypeMode(GetValue$Z(e,"typeMode",0)),this.setTypingSpeed(GetValue$Z(e,"speed",333)),this.setTextCallback=GetFastValue(e,"setTextCallback",null),this.setTextCallbackScope=GetFastValue(e,"setTextCallbackScope",null),this.setTypingContent(GetFastValue(e,"text","")),this.typingIndex=GetFastValue(e,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var t=GetFastValue(e,"elapsed",null);return null!==t&&this.start(void 0,void 0,this.typingIndex,t),this}shutdown(e){this.isShutdown||(this.freeTimer(),super.shutdown(e))}setTypeMode(e){return"string"==typeof e&&(e=TYPEMODE[e]),this.typeMode=e,this}setTypeSpeed(e){return this.speed=e,this}setTypingSpeed(e){return this.speed=e,this}setTextWrapEnable(e){return void 0===e&&(e=!0),this.textWrapEnable=e,this}set text(e){var t=GetString(e);this.textWrapEnable&&(t=GetWrapText(this.parent,t)),this._text=t}get text(){return this._text}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(e){return this.text=e,this.textLength=GetPlainText(this.parent,this.text).length,this}onTyping(){var e=GetTypingString.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(e),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",(function(){this.emit("complete",this,this.parent)}),this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(e){var t;return this.timer&&this.freeTimer(),void 0===e?t=0:(this.speed,t=e),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:t,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(e){this.setTextCallback&&(e=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?SetNoWrapText(this.parent,e):this.parent.setText(e)}}const TYPEMODE={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(TextTyping.prototype,methods$9);const GetValue$Y=Phaser.Utils.Objects.GetValue;var TextBoxBase=function(e,t){return void 0===t&&(t="rexTextBox"),class extends e{constructor(e,i){super(e,i),this.type=t,this.isRunning=!1,this._isPageEnd=!1;var s=this.childrenMap.text,n=GetValue$Y(i,"expandTextWidth",!1),a=GetValue$Y(i,"expandTextHeight",!1);if(n||a){var r=GetTextObjectType(s);switch(r){case TextType:case TagTextType:if(s.resize=function(e,t){var i=n?e:0,r=a?t:0;s.setFixedSize(i,r),i>0&&s.setWordWrapWidth(i)},r===TagTextType){var o=s.style;0===o.wrapMode&&(o.wrapMode=1)}}n&&(s._minWidth=0),a&&(s._minHeight=0)}this.setTypingMode(GetValue$Y(i,"typingMode","page")),this.page=new TextPage(s,GetValue$Y(i,"page",void 0)),this.typing=new TextTyping(s,GetValue$Y(i,"typing",i.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=s.width,this.textHeightSave=s.height}setTypingMode(e){return"string"==typeof e&&(e=TypingMode[e]),this.typingMode=e,this}start(e,t){return void 0!==t&&this.setTypingSpeed(t),this.isRunning=!0,this.page.setText(e),this.emit("start"),0===this.typingMode?this.typeNextPage():this.typeNextLine(),this}more(e,t){if(void 0!==t&&this.setTypingSpeed(t),!this.isRunning){if(this.isRunning=!0,this.page.appendText(e),this.emit("start"),0===this.typingMode){this._isPageEnd=!1;var i=this.page.getPage(),s=this.typing.textLength;this.typing.start(i,void 0,s)}return this}this.page.appendText(e),this.typing.appendText(e)}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{this._isPageEnd=!1;var e=this.page.getNextPage();this.typing.start(e)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var e,t=this.page.getPageOfNextLine();e=this.isFirstLine?0:this.page.pageLinesCount-1,this.typing.startFromLine(t,e)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(e){return this.isRunning?(this.typing.stop(e),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),0===this.typingMode?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(e){return this.typing.setTypingSpeed(e),this}setTypingSpeed(e){return this.typing.setTypingSpeed(e),this}get isTyping(){return this.typing.isTyping}get isPageEnd(){return this._isPageEnd}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var e=this.childrenMap.text;this.textWidthSave===e.width&&this.textHeightSave===e.height||(this.textWidthSave=e.width,this.textHeightSave=e.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(e){this.emit("typechar",e)}onTypingComplete(){if(0===this.typingMode){this._isPageEnd=!0;var e=this.isLastPage;this.isRunning=!e,this.emit("pageend"),e&&this.emit("complete")}else this.typeNextLine()}}};const TypingMode={page:0,line:1};class TextBox extends(TextBoxBase(TitleLabel)){constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("layoutMode")||(t.layoutMode=1),super(e,t)}}ObjectFactory.register("textBox",(function(e){var t=new TextBox(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.TextBox",TextBox);class SimpleTextBox extends TextBox{constructor(e,t,i){super(e,t=BuildTitleLabelConfig(e,t,i))}}ObjectFactory.register("simpleTextBox",(function(e){var t=new SimpleTextBox(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.SimpleTextBox",SimpleTextBox);const GetValue$X=Phaser.Utils.Objects.GetValue;class NumberBar extends Sizer{constructor(e,t){super(e,t),this.type="rexNumberBar";var i,s,n,a=GetValue$X(t,"background",void 0),r=GetValue$X(t,"icon",void 0),o=GetValue$X(t,"iconMask",void 0),l=GetValue$X(t,"slider",void 0),h=GetValue$X(t,"text",void 0),d=GetValue$X(t,"space.icon",0),c=GetValue$X(t,"space.slider",0);(a&&this.addBackground(a),r&&(0===this.orientation?(l||h)&&(s={right:d}):(l||h)&&(s={bottom:d}),this.add(r,{proportion:0,align:"center",padding:s}),o&&(o=AddChildMask.call(this,r,r,1))),l)&&(l.orientation=this.orientation,l.eventEmitter=this,l.value=null,l.hasOwnProperty("input")||(l.input=-1),i=new Slider(e,l),e.add.existing(i),0===this.orientation?h&&(s={right:c}):h&&(s={bottom:c}),n=0===this.orientation?void 0===GetValue$X(l,"width",void 0)?1:0:void 0===GetValue$X(l,"height",void 0)?1:0,this.add(i,{proportion:n,align:"center",padding:s}));h&&this.add(h),this.addChildrenMap("background",a),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",o),this.addChildrenMap("slider",i),this.addChildrenMap("text",h);var u=GetValue$X(t,"valuechangeCallback",null);if(null!==u){var p=GetValue$X(t,"valuechangeCallbackScope",void 0);this.on("valuechange",u,p)}this.setEnable(GetValue$X(t,"enable",void 0)),this.setValue(GetValue$X(t,"value",0))}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(e){this.childrenMap.slider&&this.childrenMap.slider.setEnable(e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(e){this.childrenMap.slider&&(this.childrenMap.slider.value=e)}setValue(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.setValue(e,t,i),this}addValue(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.addValue(e,t,i),this}getValue(e,t){return this.childrenMap.slider?this.childrenMap.slider.getValue(e,t):0}easeValueTo(e,t,i){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(e,t,i),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(e),this}setEaseValueFunction(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(e),this}get text(){var e=this.childrenMap.text;return void 0===e?"":e.text?e.text:e.getData("text")}set text(e){var t=this.childrenMap.text;void 0!==t&&(t.setText?t.setText(e):t.setData("text",e))}setText(e){return this.text=e,this}}ObjectFactory.register("numberBar",(function(e){var t=new NumberBar(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.NumberBar",NumberBar),ObjectFactory.register("scrollBar",(function(e){var t=new ScrollBar(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ScrollBar",ScrollBar);const GetValue$W=Phaser.Utils.Objects.GetValue,BadgeKeys={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Badge extends OverlapSizer{constructor(e,t){super(e,t),this.type="rexBadge";var i=GetValue$W(t,"background",void 0);i&&this.addBackground(i),this.addChildrenMap("background",i);var s=GetValue$W(t,"main",void 0);for(var n in s&&this.add(s,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",s),BadgeKeys){var a=GetValue$W(t,n,void 0);a&&(this.add(a,{key:n,align:BadgeKeys[n],expand:!1}),this.addChildrenMap(n,a))}}}ObjectFactory.register("badgeLabel",(function(e){var t=new Badge(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.BadgeLabel",Badge);const OverlapSizerAdd=OverlapSizer.prototype.add;var Add=function(e,t,i,s,n,a,r,o,l){return e.setVisible(!1),OverlapSizerAdd.call(this,e,t,i,s,n,a,r,o,l),this};const AddChildMethods={add:Add,addPage:Add};var GetPage$1=function(e){return void 0===e?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const ContainerSetChildVisible$1=ContainerLite.prototype.setChildVisible;var SwapPage$1=function(e,t){this._previousKey=this._currentKey;var i=this.previousPage;i&&(0===this.swapMode?(ContainerSetChildVisible$1.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var s=this.currentPage;return s&&(ContainerSetChildVisible$1.call(this,s,!0),this.emit("pagevisible",s,this._currentKey,this),void 0===t&&(t=this.fadeInDuration),t>0&&s.setAlpha(0).fadeIn(t,1)),this},HasPage=function(e){return this.sizerChildren.hasOwnProperty(e)},methods$8={getPage:GetPage$1,swapPage:SwapPage$1,hasPage:HasPage};Object.assign(methods$8,AddChildMethods);const GetValue$V=Phaser.Utils.Objects.GetValue;class Pages extends OverlapSizer{constructor(e,t){super(e,t),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(GetValue$V(t,"swapMode",0)),this.setFadeInDuration(GetValue$V(t,"fadeIn",0))}setSwapMode(e){return"string"==typeof e&&(e=SWAPMODE[e]),this.swapMode=e,this}setFadeInDuration(e){return this.fadeInDuration=e,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(e){this.swapPage(e)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Pages.prototype,methods$8);const SWAPMODE={invisible:0,destroy:1};ObjectFactory.register("pages",(function(e){var t=new Pages(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Pages",Pages);const Mesh$1=Phaser.GameObjects.Mesh;class MeshBase extends Mesh$1{get tint(){return 0===this.vertices.length?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const Vector3$1=Phaser.Math.Vector3,Matrix4$1=Phaser.Math.Matrix4;var tempPosition=new Vector3$1,tempRotation=new Vector3$1,tempMatrix=new Matrix4$1,TransformVerts=function(e,t,i,s,n,a,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=0),tempPosition.set(t,i,s),tempRotation.set(n,a,r),tempMatrix.fromRotationXYTranslation(tempRotation,tempPosition,!0);for(var o=0,l=e.vertices.length;o<l;o++)e.vertices[o].transformMat4(tempMatrix)};const IsPlainObject$9=Phaser.Utils.Objects.IsPlainObject,GetValue$U=Phaser.Utils.Objects.GetValue,GenerateGridVerts=Phaser.Geom.Mesh.GenerateGridVerts,RadToDeg$2=Phaser.Math.RadToDeg,DegToRad$3=Phaser.Math.DegToRad,FOV=45,PanZ=1+1/Math.sin(DegToRad$3(FOV));let Image$2=class extends MeshBase{constructor(e,t,i,s,n,a){IsPlainObject$9(t)&&(t=GetValue$U(a=t,"x",0),i=GetValue$U(a,"y",0),s=GetValue$U(a,"key",null),n=GetValue$U(a,"frame",null)),super(e,t,i,s,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(PanZ),this.hideCCW=GetValue$U(a,"hideCCW",!0);var r=GetValue$U(a,"gridWidth",0),o=GetValue$U(a,"gridHeight",r);this.resetVerts(r,o),this.prevFrame=this.frame}preUpdate(e,t){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(e,t)}get originX(){return.5}get originY(){return.5}resetPerspective(){return this.setPerspective(this.width,this.height,FOV),this}resetVerts(e,t){if(void 0!==e&&(this.gridWidth=e),void 0!==t&&(this.gridHeight=t),this.clear(),this.dirtyCache[9]=-1,0===this.width||0===this.height)return this;var i=this.frame.cutWidth,s=this.frame.cutHeight;0===this.gridWidth?e=Math.max(i/8,32):t=this.gridWidth,t=0===this.gridHeight?Math.max(s/8,32):this.gridHeight,GenerateGridVerts({mesh:this,width:i/this.height,height:s/this.height,widthSegments:Math.ceil(i/e),heightSegments:Math.ceil(s/t)});var n=this.transformInfo;return n&&this.transformVerts(n.x,n.y,n.z,n.rotateX,n.rotateY,n.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(e){this.modelRotation.x=e}get angleX(){return RadToDeg$2(this.rotationX)}set angleX(e){this.rotationX=DegToRad$3(e)}get rotationY(){return this.modelRotation.y}set rotationY(e){this.modelRotation.y=e}get angleY(){return RadToDeg$2(this.rotationY)}set angleY(e){this.rotationY=DegToRad$3(e)}get rotationZ(){return this.modelRotation.z}set rotationZ(e){this.modelRotation.z=e}get angleZ(){return RadToDeg$2(this.rotationZ)}set angleZ(e){this.rotationZ=DegToRad$3(e)}transformVerts(e,t,i,s,n,a){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=e,this.transformInfo.y=t,this.transformInfo.rotateX=s,this.transformInfo.rotateY=n,this.transformInfo.rotateZ=a,TransformVerts(this,e,t,i,s,n,a),this}};const DynamicTexture=Phaser.Textures.DynamicTexture;var CreateDynamicTexture=function(e,t,i){return void 0===t&&(t=2),void 0===i&&(i=2),new DynamicTexture(e.sys.textures,null,t,i)};const IsPlainObject$8=Phaser.Utils.Objects.IsPlainObject,GetValue$T=Phaser.Utils.Objects.GetValue;class RenderTexture extends Image$2{constructor(e,t,i,s,n,a){IsPlainObject$8(t)&&(t=GetValue$T(a=t,"x",0),i=GetValue$T(a,"y",0),s=GetValue$T(a,"width",32),n=GetValue$T(a,"height",32)),super(e,t,i,CreateDynamicTexture(e,s,n),null,a),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.rt.destroy(),this.rt=null)}snapshot(e,t){return void 0===t&&(t={}),t.gameObjects=e,t.renderTexture=this.rt,Snapshot(t),this.width===this.frame.realWidth&&this.height===this.frame.realHeight||this.syncSize(),this}}Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var ForEachFace=function(e,t,i,s){if(Array.isArray(e))for(var n=0,a=e.length;n<a;n++){var r=e[n];if((!s||r)&&(i?t.call(i,r,n,e):t(r,n,e)))return}else for(var o in e)if(r=e[o],(!s||r)&&(i?t.call(i,r,o,e):t(r,o,e)))return};const RadToDeg$1=Phaser.Math.RadToDeg,DegToRad$2=Phaser.Math.DegToRad;class FaceContainer extends ContainerLite{constructor(e,t,i,s,n,a){super(e,t,i,s,n),this.faces=a,ForEachFace(a,(function(e){e.setPosition(t,i),this.add(e)}),this,!0)}get rotationX(){return 0}set rotationX(e){}get angleX(){return RadToDeg$1(this.rotationX)}set angleX(e){this.rotationX=DegToRad$2(e)}get rotateX(){return RadToDeg$1(this.rotationX)}set rotateX(e){this.rotationX=DegToRad$2(e)}get rotationY(){return 0}set rotationY(e){}get angleY(){return RadToDeg$1(this.rotationY)}set angleY(e){this.rotationY=DegToRad$2(e)}get rotateY(){return RadToDeg$1(this.rotationY)}set rotateY(e){this.rotationY=DegToRad$2(e)}get rotationZ(){return 0}set rotationZ(e){}get angleZ(){return RadToDeg$1(this.rotationZ)}set angleZ(e){this.rotationZ=DegToRad$2(e)}get rotateZ(){return RadToDeg$1(this.rotationZ)}set rotateZ(e){this.rotationZ=DegToRad$2(e)}setDebug(e,t){return ForEachFace(this.faces,(function(i){i.setDebug(e,t)}),null,!0),this}panX(e){return ForEachFace(this.faces,(function(t){t.panX(e)}),null,!0),this}panY(e){return ForEachFace(this.faces,(function(t){t.panY(e)}),null,!0),this}panZ(e){return ForEachFace(this.faces,(function(t){t.panZ(e)}),null,!0),this}transformVerts(e,t,i,s,n,a){return ForEachFace(this.faces,(function(r){r.transformVerts(e,t,i,s,n,a)}),null,!0),this}forEachFace(e,t,i){return ForEachFace(this.faces,e,t,i),this}}const IsPlainObject$7=Phaser.Utils.Objects.IsPlainObject,DefaultImageConfig={key:"__WHITE"},ClassMap={image:Image$2,rendertexture:RenderTexture};var CreatePerspectiveObject=function(e,t){var i;return void 0===t&&(t=DefaultImageConfig),IsPlainObject$7(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),i=new ClassMap[t.type](e,t),e.add.existing(i)):i=t,i},CreateFaces=function(e,t,i){var s;if(void 0===i){var n;s=[];for(var a=0,r=t.length;a<r;a++)o=(n=t[a])?CreatePerspectiveObject(e,n):null,s.push(o)}else{var o,l;for(s={},a=0,r=i.length;a<r;a++)l=i[a],o=t.hasOwnProperty(l)?CreatePerspectiveObject(e,t[l]):null,s[l]=o}return s};const DegToRad$1=Phaser.Math.DegToRad,RAD180=DegToRad$1(180);var LayoutFaces=function(e,t){var i=t.back;i&&(0===e.orientation?i.transformVerts(0,0,0,0,RAD180,0):i.transformVerts(0,0,0,RAD180,0,0))};const GetValue$S=Phaser.Utils.Objects.GetValue,Linear$2=Phaser.Math.Linear;let Flip$2=class extends EaseValueTaskBase{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setEase(GetValue$S(e,"ease","Cubic")),this.setFrontToBackDirection(GetValue$S(e,"frontToBack",0)),this.setBackToFrontDirection(GetValue$S(e,"backToFront",1)),this}setFrontToBackDirection(e){return"string"==typeof e&&(e=DIRMODE[e]),this.endAngleFB=0===e?180:-180,this}setBackToFrontDirection(e){return"string"==typeof e&&(e=DIRMODE[e]),this.endAngleBF=0===e?-180:180,this}start(e,t){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(e);var i=t+1;return 0===this.parent.face?(this.startAngle=0,this.endAngle=this.endAngleFB*i):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*i),super.start(),this}flip(e,t){return this.isRunning||(void 0===e&&(e=this.duration),void 0===t&&(t=0),this.start(e,t),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+t+1)%2),this}flipRight(e,t){return 0===this.parent.currentFaceIndex?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(e,t),this}flipLeft(e,t){return 0===this.parent.currentFaceIndex?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(e,t),this}updateTarget(e,t){var i=this.easeFn(t.t),s=Linear$2(this.startAngle,this.endAngle,i);0===e.orientation?e.angleY=s:e.angleX=s}};const DIRMODE={right:0,"left-to-right":0,left:1,"right-to-left":1},IsPlainObject$6=Phaser.Utils.Objects.IsPlainObject,GetValue$R=Phaser.Utils.Objects.GetValue,FaceNames=["back","front"];class Card extends FaceContainer{constructor(e,t,i,s){IsPlainObject$6(t)&&(t=GetValue$R(s=t,"x",0),i=GetValue$R(s,"y",0));var n=CreateFaces(e,s,FaceNames),a=n.back,r=n.front,o=GetValue$R(s,"width"),l=GetValue$R(s,"height");if(void 0===o||void 0===l){if(void 0===o){var h=r?r.width:0,d=a?a.width:0;o=Math.max(h,d)}if(void 0===l){var c=r?r.height:0,u=a?a.height:0;l=Math.max(c,u)}}super(e,t,i,o,l,n),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,ForEachFace(n,(function(e,t){this[`${t}Face`]=e}),this);var p=GetValue$R(s,"flip",void 0);!1!==p&&(this.flip=new Flip$2(this,p)),this.setOrientation(GetValue$R(s,"orientation",0)),LayoutFaces(this,n),this.setFace(GetValue$R(s,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(e){this.frontFaceRotationX!==e&&(this.frontFaceRotationX=e,ForEachFace(this.faces,(function(t){t.rotationX=e}),null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(e){this.frontFaceRotationY!==e&&(this.frontFaceRotationY=e,ForEachFace(this.faces,(function(t){t.rotationY=e}),null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(e){this.frontFaceRotationZ!==e&&(this.frontFaceRotationZ=e,ForEachFace(this.faces,(function(t){t.rotationZ=e}),null,!0))}setOrientation(e){return"string"==typeof e&&(e=ORIENTATIONMODE$1[e]),this.orientation=e,this}get face(){return this.currentFaceIndex}set face(e){"string"==typeof e&&(e=FACEMODE$1[e]),this.currentFaceIndex=e;var t=1===e?180:0;0===this.orientation?this.angleY=t:this.angleX=t}setFace(e){return this.face=e,this}toggleFace(){var e=0===this.face?1:0;return this.setFace(e),this}}const ORIENTATIONMODE$1={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},FACEMODE$1={front:0,back:1};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const GetValue$Q=Phaser.Utils.Objects.GetValue;var Init=function(e,t,i){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=GetValue$Q(i,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},Exit=function(e,t){if(!e)return!1;for(var i=t.visibleSibling,s=0,n=i.length;s<n;s++)e.setChildVisible(i[s],!0);return i.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},Enter=function(e,t){if(!e)return!1;Exit(e,t);var i=t.useParentBounds;Snapshot({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:i?e.displayWidth:void 0,height:i?e.displayHeighth:void 0,originX:i?e.originX:void 0,originY:i?e.originY:void 0}),e.setChildVisible(t,!0);for(var s=t.visibleSibling,n=e.children,a=0,r=n.length;a<r;a++){var o=n[a];o.visible&&o!==t&&(e.setChildVisible(o,!1),s.push(o))}return t.isRunning=!0,!0},MeshRenderTextureBase=function(e){return class extends e{constructor(e,t){var i=e.scene;super(i,0,0,1,1,t),i.add.existing(this),Init(e,this,t)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.exit(),super.destroy(e))}enter(){return Enter(this.rexContainer.parent,this)&&this.syncSize(),this}exit(){return Exit(this.rexContainer.parent,this),this}}};class ContainerPerspective extends(MeshRenderTextureBase(RenderTexture)){get perspectiveState(){return this.isRunning}}const GetValue$P=Phaser.Utils.Objects.GetValue;var CreatePerspectiveCardMesh=function(e){var t=this.scene;this.setSnapshotPadding(GetValue$P(e,"snapshotPadding",0)),delete(e=Clone$2(e)).width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var i=new Card(t,e);t.add.existing(i);var s=i.flip;if(s){var n=this;s.on("start",(function(){n.enterPerspectiveMode()})).on("complete",(function(){n.exitPerspectiveMode()}))}return i};const FaceIndexMap=["front","back"],PerspectiveMethods={enterPerspectiveMode(){return this.isInPerspectiveMode||(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height)),this},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=0===this.perspectiveCard.face;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){"number"==typeof e&&(e=FaceIndexMap[e]);var t=this.perspectiveCard.faces[e],i=this.childrenMap[e];t.rt.clear();var s=i.visible;i.visible=!0;var n=i.isRexContainerLite?i.getAllVisibleChildren():i;return t.snapshot(n,{padding:this.snapshotPadding}),i.visible=s,this}},GetValue$O=Phaser.Utils.Objects.GetValue;class PerspectiveCard extends OverlapSizer{constructor(e,t){super(e,t),this.type="rexPerspectiveCard";var i=t.back,s=GetValue$O(t,"expand.back",!0);this.add(i,{key:"back",expand:s});var n=t.front,a=GetValue$O(t,"expand.front",!0);this.add(n,{key:"front",expand:a}),this.perspectiveCard=CreatePerspectiveCardMesh.call(this,t),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(e){if(!this.flip||!this.flip.isRunning){this.perspectiveCard.face=e;var t=0===e,i=this.childrenMap.front,s=this.childrenMap.back;this.setChildVisible(i,t),this.setChildVisible(s,!t)}}setFace(e){return this.face=e,this}toggleFace(){var e=0===this.face?1:0;return this.setFace(e),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=e}get angleX(){return this.perspectiveCard.angleX}set angleX(e){this.enterPerspectiveMode(),this.perspectiveCard.angleX=e}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=e}get angleY(){return this.perspectiveCard.angleY}set angleY(e){this.enterPerspectiveMode(),this.perspectiveCard.angleY=e}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=e}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(e){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=e}panX(e){return this.enterPerspectiveMode(),this.perspectiveCard.panX(e),this}panY(e){return this.enterPerspectiveMode(),this.perspectiveCard.panY(e),this}panZ(e){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(e),this}transformVerts(e,t,i,s,n,a){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(e,t,i,s,n,a),this}forEachFace(e,t,i){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(e,t,i),this}}Object.assign(PerspectiveCard.prototype,PerspectiveMethods),ObjectFactory.register("perspectiveCard",(function(e){var t=new PerspectiveCard(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.PerspectiveCard",PerspectiveCard);var GetPageKeyByIndex=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},GetPageIndexByKey=function(e){for(var t=this.getElement("tabs.buttons"),i=0,s=t.length;i<s;i++)if(t[i].name===e)return i};const IsPlainObject$5=Phaser.Utils.Objects.IsPlainObject,GetValue$N=Phaser.Utils.Objects.GetValue,UUID$2=Phaser.Utils.String.UUID;var AddPage=function(e,t,i){if(IsPlainObject$5(e)){var s=e;e=GetValue$N(s,"key"),t=GetValue$N(s,"tab"),i=GetValue$N(s,"page")}return e||(e=UUID$2()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:e}),this},SwapPage=function(e,t){var i,s;return null!=(i="number"==typeof e?e:this.getPageIndex(e))&&(void 0!==t&&(s=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(i),void 0!==s&&(this.childrenMap.pages.fadeInDuration=s)),this},SwapFirstPage=function(e){return this.swapPage(0,e),this},SwapLastPage=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this};const SwapPageMethods={swapPage:SwapPage,swapFirstPage:SwapFirstPage,swapLastPage:SwapLastPage},RemovePageMethods={removePage(e,t){"number"==typeof e&&(e=this.getPageKey(e));var i=this.childrenMap.tabs,s=i.getByName(e),n=this.childrenMap.pages,a=n.getElement(e);return s&&a?(n.removeChildrenMap(e),i.removeButton(s,t),n.remove(a,t),this):this},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),i=t.length-1;i>=0;i--)this.removePage(t[i].name,e);return this}};var GetPage=function(e){return"number"==typeof e&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},GetTab=function(e){var t;return t="number"==typeof e?e:this.getPageIndex(e),this.getElement("tabs.buttons")[t]},TabsPositionToIndex={top:1,left:3,right:5,bottom:7},TabsPositionToTabsPaddingKey={top:"bottom",left:"right",right:"left",bottom:"top"},SetTabPosition=function(e){var t=TabsPositionToIndex[e];if(void 0===t)return this;var i=this.childrenMap.tabs,s=this.sizerChildren.indexOf(i);if(s===t)return this;this.sizerChildren[s]=null,this.sizerChildren[t]=i;var n=this.getSizerConfig(i).padding,a=TabsPositionToTabsPaddingKey[this.tabsPosition];return n[TabsPositionToTabsPaddingKey[e]]=n[a],n[a]=0,this.tabsPosition=e,this};const TabPaddingMethods={setTabsPadding(e,t){return this.childrenMap.tabs.setOuterPadding(e,t),this},getTabsPadding(e){return this.childrenMap.tabs.getOuterPadding(e)}};var methods$7={getPageKey:GetPageKeyByIndex,getPageIndex:GetPageIndexByKey,addPage:AddPage,getPage:GetPage,getTab:GetTab,setTabPosition:SetTabPosition};Object.assign(methods$7,SwapPageMethods,RemovePageMethods,TabPaddingMethods);const GetValue$M=Phaser.Utils.Objects.GetValue,SizerAdd=GridSizer.prototype.add;let TabPages$1=class extends GridSizer{constructor(e,t){void 0===t&&(t={}),t.column=3,t.row=3,t.columnProportions=[0,0,0],t.rowProportions=[0,0,0];var i=GetValue$M(t,"expand.pages",!0);i&&(t.columnProportions[1]=1,t.rowProportions[1]=1),super(e,t),this.type="rexTabPages";var s=GetValue$M(t,"background",void 0);s&&this.addBackground(s);var n=GetValue$M(t,"pages"),a=new Pages(e,n);e.add.existing(a);var r=GetValue$M(t,"tabsPosition",void 0);void 0===r&&(r=GetValue$M(t,"tabPosition","top"));var o=GetValue$M(t,"wrapTabs",!1),l=o?Buttons:Buttons$1,h=GetValue$M(t,"tabs",void 0);void 0===h&&(h={}),h.orientation="top"===r||"bottom"===r?"x":"y",h.buttonsType="radio",o||h.hasOwnProperty("expand")||(h.expand=GetValue$M(t,"expand.tabs",!1));var d,c,u=new l(e,h);e.add.existing(u),SizerAdd.call(this,a,{column:1,row:1,expand:i});var p=GetValue$M(t,"space.item",0);switch(r){case"top":d=1,c=0,p={bottom:p};break;case"bottom":d=1,c=2,p={top:p};break;case"left":d=0,c=1,p={right:p};break;case"right":d=2,c=1,p={left:p}}SizerAdd.call(this,u,{column:d,row:c,padding:p,expand:!!o||GetValue$M(t,"expand.tabs",!1),align:GetValue$M(t,"align.tabs","left")}),this.addChildrenMap("background",s),this.addChildrenMap("tabs",u),this.addChildrenMap("pages",a),this.tabsPosition=r,u.on("button.click",(function(e){var t=e.name;a.hasPage(t)&&a.swapPage(t)})),u.on("button.statechange",(function(e,t,i,s){var n=i?"tab.focus":"tab.blur";this.emit(n,e,e.name)}),this),a.on("pagevisible",(function(e,t,i){this.emit("page.focus",e,t)})),a.on("pageinvisible",(function(e,t,i){this.emit("page.blur",e,t)}))}get currentKey(){return this.getElement("pages").currentKey}set currentKey(e){this.showPage(e)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(TabPages$1.prototype,methods$7),ObjectFactory.register("tabPages",(function(e){var t=new TabPages$1(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.TabPages",TabPages$1);class Transition extends OpenCloseTransition{constructor(e,t){void 0===t&&(t={}),t.destroy=!1,super(e,t)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const ExpandMethods={expand(e){if(!0===this.expanded)return this;void 0===e&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,i=this.childrenMap.child;return this.show(i),this.reLayoutEnable&&(this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer()).layout(),t.emit("folder.expand",e,this),i.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",(function(){this.emit("expand.complete",this)}),this).requestOpen(null,e),this},collapse(e){if(!1===this.expanded)return this;void 0===e&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,i=this.childrenMap.child;return t.emit("folder.collapse",e,this),i.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",(function(){this.setChildScale(i,1,1).hide(i),this.reLayoutEnable&&(this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer()).layout(),this.emit("collapse.complete",this)}),this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,void 0===e?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}};var DefaultExpandCallback=function(e,t){methods$z.popUp.call(e,t,this.expandDirection)},DefaultCollapseCallback=function(e,t){methods$z.scaleDown.call(e,t,this.expandDirection)};const ConfigurationMethods$2={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return void 0===e&&(e=DefaultExpandCallback.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return void 0===e&&(e=DefaultCollapseCallback.bind(this)),this.childTransition.setTransitOutCallback(e),this}},GetValue$L=Phaser.Utils.Objects.GetValue;let Folder$1=class extends Sizer{constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1),super(e,t),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=1===this.orientation?"y":"x";var i=t.background,s=t.title,n=t.child;i&&this.addBackground(i);var a=GetValue$L(t,"space"),r=1===this.orientation?"left":"top",o=GetValue$L(t,"align.title",r),l=GetValue$L(t,"expand.title",!0);this.add(s,{proportion:0,align:o,expand:l,padding:{left:GetValue$L(a,"titleLeft",0),right:GetValue$L(a,"titleRight",0),top:GetValue$L(a,"titleTop",0),bottom:GetValue$L(a,"titleBottom",0)}});var h=GetValue$L(t,"toggleByTarget",void 0),d=GetValue$L(t,"toggleClickConfig");if(void 0===h&&(h=s),h&&ClickMethods.onClick.call(h,(function(){this.toggle()}),this,d),this.childTransition=new Transition(n),!GetValue$L(t,"customChildOrigin",!1)){var c=this.rtl?1:0;n.setOrigin(c)}o=GetValue$L(t,"align.child","left");var u=(l=GetValue$L(t,"expand.child",!0))?1:0;this.add(n,{proportion:u,align:o,expand:l,padding:{left:GetValue$L(a,"childLeft",0),right:GetValue$L(a,"childRight",0),top:GetValue$L(a,"childTop",0),bottom:GetValue$L(a,"childBottom",0)}}),this.addChildrenMap("title",s),this.addChildrenMap("child",n),this.addChildrenMap("background",i);var p=t.transition;this.setTransitionDuration(GetValue$L(p,"duration",200)),this.setExpandCallback(GetValue$L(p,"expandCallback",void 0)),this.setCollapseCallback(GetValue$L(p,"collapseCallback",void 0)),this.reLayoutTarget=GetValue$L(t,"reLayoutTarget",void 0);var g=t.onExpandStart;g&&this.on("expand.start",g);var m=t.onExpandComplete;m&&this.on("expand.complete",m);var f=t.onCollapseStart;f&&this.on("collapse.start",f);var v=t.onCollapseComplete;v&&this.on("collapse.complete",v);var b=GetValue$L(t,"expanded",void 0);void 0!==b&&this.setExpandedState(b)}};Object.assign(Folder$1.prototype,ExpandMethods,ConfigurationMethods$2),ObjectFactory.register("folder",(function(e){var t=new Folder$1(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Folder",Folder$1);var PointToChild$1=function(e,t,i,s){for(var n in this.treesMap){var a=this.treesMap[n];if(ContainsPoint$1(a.nodeBody,e,t,i,s))return a;var r=a.pointToChild(e,t,i,s);if(r)return r}return null},SetChildrenInteractive=function(e){return void 0===e&&(e={}),e.targetMode="parent",e.targetSizers=[this],SetChildrenInteractive$1(this,e),this},ExtendNodeClass=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(e){return this.text=e,this}get text(){return this.nodeBody.text}set text(e){var t=this.nodeBody;t.setText&&t.setText(e)}setTexture(e,t){var i=this.nodeBody;return i.setTexture&&i.setTexture(e,t),this}get texture(){var e=this.nodeBody;if(e)return e.texture}get frame(){var e=this.nodeBody;if(e)return e.frame}}},PointToChild=function(e,t,i,s){for(var n in this.nodesMap){var a=this.nodesMap[n];if(this.isTreeObject(a)){var r=a;if(ContainsPoint$1(r.nodeBody,e,t,i,s))return r;var o=r.pointToChild(e,t,i,s);if(o)return o}else if(ContainsPoint$1(a,e,t,i,s))return a}return null};const ParentMethods={getTreePatent(e){if(void 0===e&&(e=this),e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){var t;for(void 0===e&&(e=this);;){if(!e.rexSizer)return;if(null===(t=e.rexSizer.treeParent))return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(void 0===e||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if((t=e.rexSizer.treeParent)===this)return!0;if(null===t)return!1;e=t}return!1}};var CreateGameObjectFromConfig=function(e,t,i,s,n=!1){var a;return IsGameObject(t)?(a=t,delete t[key]):IsFunction(t)?(a=t(e,i))&&e.add.existing(a):(n||t)&&s&&(a=s(e,t,i)),a},DefaultCreateBackgroundCallback=function(e,t,i){return CreateBackground$2(e,t)},DefaultCreateNodeBodyCallback=function(e,t,i){var s=new SimpleLabel(e,t);return e.add.existing(s),s.resetDisplayContent(""),s};const GetValue$K=Phaser.Utils.Objects.GetValue;class Node extends(ExtendNodeClass(Sizer)){constructor(e,t,i){var s=t.space;super(e,{orientation:"x",space:{left:GetValue$K(s,"nodeLeft",0),right:GetValue$K(s,"nodeRight",0),top:GetValue$K(s,"nodeTop",0),bottom:GetValue$K(s,"nodeBottom",0)}}),this.type="rexTreeNode";var n=CreateGameObjectFromConfig(e,GetValue$K(t,"nodeBackground"),i,DefaultCreateBackgroundCallback,!1),a=CreateGameObjectFromConfig(e,GetValue$K(t,"nodeBody"),i,DefaultCreateNodeBodyCallback,!0);n&&this.addBackground(n),this.add(a,{proportion:1}),this.nodeBody=a,this.addChildrenMap("background",n),this.addChildrenMap("nodeBody",a)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var e=this.rexSizer.treeParent;return e?e.getTreeRoot():null}getTreesSizer(){var e=this.getTreeRoot();return e?e.getParentSizer():null}}var SyncDisplayList=function(e,t){var i=e.parentContainer;if(i)t.isRexContainerLite?t.addToContainer(i):i.add(t);else{var s=e.displayList;IsLayerGameObject(s)?t.isRexContainerLite?t.addToLayer(s):s.add(t):e.scene.add.existing(t)}};const UUID$1=Phaser.Utils.String.UUID,AddNodeMethods={addTree(e,t){return IsGameObject(e)&&(e={nodeBody:e,nodeKey:t}),this.insertTree(void 0,e)},insertTree(e,t){var i;"string"==typeof t?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),void 0===i&&(i=UUID$1());var s=this.createTree(t);return SyncDisplayList(this,s),this.insertNode(e,s,{expand:!0}),s._postAddCallback(),s},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,i){var s;return IsGameObject(t)||(i=t,t=new Node(this.scene,this.configSave,{isLeaf:!0})),"string"==typeof i?(s=i,i=void 0):i&&(s=i.nodeKey,delete i.nodeKey),void 0===s&&(s=UUID$1()),void 0===i&&(i={}),i.hasOwnProperty("expand")||(i.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(s)&&(console.error(`[Trees] Duplicate nodeKey '${s}'`),this.removeNode(this.nodesMap[s],!0)),t.nodeKey=s,this.nodesMap[s]=t,this.childrenMap.child.insert(e,t,i),t}},RemoveNodeMethods={removeNode(e,t){if("string"==typeof e&&(e=this.getTree(e)),!e)return this;var i=this.getTreePatent(e);return i?(delete i.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null,i.childrenMap.child.remove(e,t),this):this},removeAllNodes(e){var t=this.nodesMap;for(var i in t)this.removeNode(t[i],e);return this}},GetNodeMethods={getNode(e){if("string"==typeof e&&(e=e.split(".")),0!==e.length){var t=e.shift(),i=this.nodesMap[t];return 0===e.length?i:i&&this.isTreeObject(i)?i.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(e)for(var i in t)e.push(t[i]);else e=nodes;return e},getAllNodes(e){}};var methods$6={pointToChild:PointToChild};Object.assign(methods$6,ParentMethods,AddNodeMethods,RemoveNodeMethods,GetNodeMethods);var DefaultCreateToggleButtonCallback=function(e,t,i){var s=new Triangle(e,t);return e.add.existing(s),s.on("expand.start",(function(e){e.setDirection("down")})).on("collapse.complete",(function(e){e.setDirection("right")})),s};const GetValue$J=Phaser.Utils.Objects.GetValue;var CreateTitleSizer=function(e,t){var i=new Node(e,t,{isLeaf:!1});e.add.existing(i);var s=CreateGameObjectFromConfig(e,GetValue$J(t,"toggleButton"),{isLeaf:!1},DefaultCreateToggleButtonCallback,!0);return i.insert(0,s,{padding:{right:GetValue$J(t,"space.toggleButton",0)},fitRatio:1}),i.addChildrenMap("toggleButton",s),i};const GetValue$I=Phaser.Utils.Objects.GetValue;var CreateChildrenSizer=function(e,t){var i=new Sizer(e,{orientation:GetValue$I(t,"childrenOrientation","y")});e.add.existing(i);var s=CreateGameObjectFromConfig(e,GetValue$I(t,"childrenBackground"),{isLeaf:!1},DefaultCreateBackgroundCallback,!1);return s&&i.addBackground(s),i};const Clone$1=Phaser.Utils.Objects.Clone;var Merge$2=function(e,t){var i=e?Clone$1(e):{};if(!t)return i;for(var s in t)i[s]=t[s];return i};const GetValue$H=Phaser.Utils.Objects.GetValue;class Tree extends(ExtendNodeClass(Folder$1)){constructor(e,t){void 0===t&&(t={});var i=CreateGameObjectFromConfig(e,GetValue$H(t,"background"),{isLeaf:!1},DefaultCreateBackgroundCallback,!1),s=CreateChildrenSizer(e,t),n=s.childrenMap.items,a=CreateTitleSizer(e,t),r=a.childrenMap.toggleButton,o=a.childrenMap.nodeBody,l=GetOrientationMode(GetValue$H(t,"orientation","y")),h=t.space;if(h){var d=GetValue$H(h,"indent",0);h.childLeft=GetValue$H(h,"indentLeft",1===l?d:0),h.childRight=GetValue$H(h,"indentRight",0),h.childTop=GetValue$H(h,"indentTop",0===l?d:0),h.childBottom=GetValue$H(h,"indentBottom",0)}super(e,{background:i,title:a,child:s,toggleByTarget:r,transition:t.transition,orientation:l,space:h,align:t.align,expand:t.expand}),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=t,this.nodeBody=o,this.addChildrenMap("toggleButton",r),this.addChildrenMap("nodeBody",o),this.addChildrenMap("childrenNodes",n),this.on("expand.start",(function(){r.emit("expand.start",r),FireTreesSizerEvent(this,"expand.start")}),this).on("expand.complete",(function(){r.emit("expand.complete",r),FireTreesSizerEvent(this,"expand.complete")})).on("collapse.start",(function(){r.emit("collapse.start",r),FireTreesSizerEvent(this,"collapse.start")})).on("collapse.complete",(function(){r.emit("collapse.complete",r),FireTreesSizerEvent(this,"collapse.complete")}));var c=this;c._postAddCallback=function(){var e=GetValue$H(t,"expanded",!0);void 0!==e&&c.setExpandedState(e),delete c._postAddCallback}}destroy(e){this.scene&&!this.ignoreDestroy&&(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(e))}get isTree(){return!0}createTree(e){return Tree.CreateTree(this.scene,this.configSave,e)}isTreeObject(e){return e&&e instanceof Tree}}Tree.CreateTree=function(e,t,i){return new Tree(e,Merge$2(t,i))};var FireTreesSizerEvent=function(e,t){var i=e.getTreesSizer();i&&i.emit(t,e)};Object.assign(Tree.prototype,methods$6);const UUID=Phaser.Utils.String.UUID,AddTreeMethods={addTree(e){return IsGameObject(e)&&(e={nodeBody:e,nodeKey:nodeKey}),this.insertTree(void 0,e)},insertTree(e,t){var i;"string"==typeof t?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),void 0===i&&(i=UUID());var s=Tree.CreateTree(this.scene,this.treeConfig,t);return SyncDisplayList(this,s),s.nodeKey=i,this.treesMap[i]=s,this.insert(e,s,{expand:!0}),s._postAddCallback(),s}},RemoveTreeMethods={removeTree(e,t){return"string"==typeof e&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var i in t)this.removeTree(t[i],e);return this}},GetTreeMethods={getTree(e){return this.treesMap[e]},getTrees(e){for(var t in void 0===e&&(e=[]),this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(-1===t)return this.getTree(e);var i=this.getTree(e.substring(0,t));return i?i.getNode(e.substring(t+1)):void 0}};var methods$5={pointToChild:PointToChild$1,setChildrenInteractive:SetChildrenInteractive};Object.assign(methods$5,AddTreeMethods,RemoveTreeMethods,GetTreeMethods);const GetValue$G=Phaser.Utils.Objects.GetValue;class Trees extends Sizer{constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("orientation")||(t.orientation="y"),super(e,t),this.type="rexTrees",this.treesMap={},this.treeConfig=GetValue$G(t,"tree")}destroy(e){this.scene&&!this.ignoreDestroy&&(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(e))}}Object.assign(Trees.prototype,methods$5),ObjectFactory.register("trees",(function(e){var t=new Trees(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Trees",Trees),ObjectFactory.register("textArea",(function(e){var t=new TextArea(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.TextArea",TextArea);var InjectProperties=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})};const SetTextMethods={setText(e){return this.childrenMap.child.setText(e),this},appendText(e){return this.setText(this.text+e),this}},ScrollMethods={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){void 0===e&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}},GetValue$F=Phaser.Utils.Objects.GetValue;class TextAreaInput extends Scrollable$1{constructor(e,t){void 0===t&&(t={});var i,s=GetValue$F(t,"text");IsGameObject(s)?i=s:(void 0===s&&(s={}),s.textArea=!0,i=new CanvasInput(e,s),e.add.existing(i)),InjectProperties(i);var n=void 0===s.width,a=void 0===s.height;n&&(i.minWidth=0),a&&(i.minHeight=0),t.scrollMode=0,t.type="rexTextAreaInput",t.child={gameObject:i,expandWidth:n,expandHeight:a};var r,o,l=GetValue$F(t,"space",void 0);l&&(l.child=GetValue$F(l,"text",0)),t.scroller=!1,super(e,t),this.addChildrenMap("text",i),i.on("cursorin",(function(){var e=i.textOY,t=i.contentHeight,s=r!==e,n=o!==t;r=e,o=t,n&&this.resizeController(),(s||n)&&(this.t=i.t)}),this),i.on("textchange",(function(e){this.emit("textchange",e,this)}),this).on("close",(function(){this.emit("close",this.text,this)}),this);var h=GetValue$F(t,"content",void 0);h&&this.setText(h)}get text(){return this.childrenMap.child.text}set text(e){e=null==e?"":e.toString(),this.childrenMap.child.text!==e&&this.setText(e)}get lineHeight(){return this.childrenMap.child.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.contentHeight}get readOnly(){return this.childrenMap.child.readOnly}set readOnly(e){this.childrenMap.child.readOnly=e}setReadOnly(e){return this.childrenMap.child.setReadOnly(e),this}get value(){return this.text}set value(e){this.text=e}}Object.assign(TextAreaInput.prototype,SetTextMethods,ScrollMethods),ObjectFactory.register("textAreaInput",(function(e){var t=new TextAreaInput(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.TextAreaInput",TextAreaInput),ObjectFactory.register("scrollablePanel",(function(e){var t=new ScrollablePanel(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ScrollablePanel",ScrollablePanel);const DefaultTransitionCallbacks$1={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}},TransitionMode={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},ConfigurationMethods$1={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch("string"==typeof e&&(e=TransitionMode[e]),e){case TransitionMode.popUp:e=DefaultTransitionCallbacks$1.popUp;break;case TransitionMode.fadeIn:e=DefaultTransitionCallbacks$1.fadeIn}return e||(e=NOOP),this.transitInCallback=e,this},setTransitOutCallback(e){switch("string"==typeof e&&(e=TransitionMode[e]),e){case TransitionMode.scaleDown:e=DefaultTransitionCallbacks$1.scaleDown;break;case TransitionMode.fadeOut:e=DefaultTransitionCallbacks$1.fadeOut}return e||(e=NOOP),this.transitOutCallback=e,this}},MessageMethods$1={showMessage(e){if(void 0===this.scaleX0&&(this.scaleX0=this.scaleX),void 0===this.scaleY0&&(this.scaleY0=this.scaleY),void 0===e){if(0===this.messages.length)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),"string"==typeof e?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[NOOP]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[NOOP]]];return this.player.load(t,this).once("complete",(function(){this.showMessage()}),this).start(),this},removeAllMessages(){return this.messages.length=0,this}},GetValue$E=Phaser.Utils.Objects.GetValue;class Toast extends Label{constructor(e,t){void 0===t&&(t={text:createDefaultTextObject(e)}),super(e,t),this.type="rexToast",this.setTransitInTime(GetValue$E(t,"duration.in",200)),this.setDisplayTime(GetValue$E(t,"duration.hold",1200)),this.setTransitOutTime(GetValue$E(t,"duration.out",200)),this.setTransitInCallback(GetValue$E(t,"transitIn",TransitionMode.popUp)),this.setTransitOutCallback(GetValue$E(t,"transitOut",TransitionMode.scaleDown)),this.player=new Player(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(e))}setScale(e,t){return void 0===t&&(t=e),this.scaleX0=e,this.scaleY0=t,super.setScale(e,t),this}get isShowingMessage(){return this.player.isPlaying}}Object.assign(Toast.prototype,ConfigurationMethods$1,MessageMethods$1),ObjectFactory.register("toast",(function(e){var t=new Toast(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Toast",Toast);var QueueDirectionMap={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0};const ConfigurationMethods={setQueueDirection(e){return"string"==typeof e&&(e=QueueDirectionMap[e]),this.rtl=0===e,1===this.orientation?this.queueDirection=e?0:1:this.queueDirection=e?2:3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=NOOP),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=NOOP),this.transitOutCallback=e,this}},OnClick=ClickMethods.onClick,DelayCall=DelayCallMethods$2.delayCall,MoveTo=methods$x.moveTo;var CreateChild=function(e,t,i){var s=t(e.scene,i,e);if(OnClick.call(s,(function(){e.removeMessage(s)})),e.displayTime){var n=e.transitInTime+e.displayTime+10;DelayCall.call(s,n,(function(){e.removeMessage(s)}))}return s},GetChildrenPosition=function(e){for(var t,i=e.childrenMap.items,s=[],n=0,a=i.length;n<a;n++)t=i[n],s.push({x:t.x,y:t.y});return s},RunLayout=function(e){for(var t,i=e.childrenMap.items,s=[],n=0,a=i.length;n<a;n++)t=i[n],s.push({x:t.scaleX,y:t.scaleY}),t.setScale(1);e.layout();var r=GetChildrenPosition(e);for(n=0,a=i.length;n<a;n++){var o=s[n];i[n].setScale(o.x,o.y)}return r},EaseChildren=function(e,t,i,s){for(var n,a,r,o=e.childrenMap.items,l=Math.min(t.length,i.length,o.length),h=e.queueDirection,d=0;d<l;d++){switch(n=o[d],a=t[d],r=i[d],n.setPosition(a.x,a.y),h){case 0:if(a.y<=r.y)continue;break;case 1:if(a.y>=r.y)continue;break;case 2:if(a.x<=r.x)continue;break;case 3:if(a.x>=r.x)continue}MoveTo.call(n,s,r.x,r.y)}},PushChild=function(e,t,i){var s=GetChildrenPosition(e);e.add(t);var n=RunLayout(e);EaseChildren(e,s,n,i),e.transitInCallback(t,i,e)};const MessageMethods={showMessage(e){var t=CreateChild(this,this.createMessageLabelCallback,e);return PushChild(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),DelayCall.call(e,t+10,(function(){delete e.__isDestroying,e.destroy()})),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,i=e.length;t<i;t++)this.removeMessage(e[t]);return this}};var Methods$1={};Object.assign(Methods$1,ConfigurationMethods,MessageMethods);const DefaultTransitionCallbacks={transitIn(e,t,i){switch(i.queueDirection){case 0:e.setOrigin(.5,1),methods$z.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),methods$z.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),methods$z.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),methods$z.popUp.call(e,t,"x")}methods$y.fadeIn.call(e,t)},transitOut(e,t,i){methods$y.fadeOut.call(e,t)}},GetValue$D=Phaser.Utils.Objects.GetValue;class ToastQueue extends Sizer{constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1),super(e,t),this.type="rexToastQueue",this.setCreateMessageLabelCallback(GetValue$D(t,"createMessageLabelCallback")),this.setQueueDirection(GetValue$D(t,"queueDirection",1)),this.setTransitInTime(GetValue$D(t,"duration.in",200)),this.setDisplayTime(GetValue$D(t,"duration.hold",2e3)),this.setTransitOutTime(GetValue$D(t,"duration.out",200)),this.setTransitInCallback(GetValue$D(t,"transitIn",DefaultTransitionCallbacks.transitIn)),this.setTransitOutCallback(GetValue$D(t,"transitOut",DefaultTransitionCallbacks.transitOut))}}Object.assign(ToastQueue.prototype,Methods$1),ObjectFactory.register("toastQueue",(function(e){var t=new ToastQueue(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ToastQueue",ToastQueue);var CreateSwatch=function(e,t){if(!1===t)return null;if(IsGameObject(t))return t;var i=new RoundRectangle$2(e,t);return e.add.existing(i),i};const Pad=Phaser.Utils.String.Pad;var GetHexColorString=function(e,t){void 0===t&&(t="0x");var i=e.toString(16).toUpperCase();return t+Pad(i,6,0,1)},SetSwatchColor=function(e,t){e&&(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))};const GetValue$C=Phaser.Utils.Objects.GetValue,IsPlainObject$4=Phaser.Utils.Objects.IsPlainObject,Clamp$2=Phaser.Math.Clamp;let ColorInput$1=class extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation=0,super(e,t),this.type="rexColorInputLite";var i,s=GetValue$C(t,"background",void 0),n=GetValue$C(t,"swatch");IsPlainObject$4(n)&&(i=GetValue$C(n,"size"));var a,r=CreateSwatch(e,GetValue$C(t,"swatch")),o=GetValue$C(t,"inputText",{});if(o&&(a=CreateInputText$1(e,o)),s&&this.addBackground(s),r){var l;void 0!==(i=GetValue$C(t,"swatchSize",i))?(ResizeGameObject(r,i,i),l=!1):l=GetValue$C(t,"squareExpandSwatch",!0);var h=l?1:0;this.add(r,{proportion:0,expand:!0,fitRatio:h})}if(a){var d=void 0===GetValue$C(o,"width")?1:0,c=void 0===GetValue$C(o,"height");this.add(a,{proportion:d,expand:c})}this.addChildrenMap("background",s),this.addChildrenMap("swatch",r),this.addChildrenMap("inputText",a),a&&a.on("close",(function(){this.setValue(a.value)}),this);var u=GetValue$C(t,"valuechangeCallback",null);if(null!==u){var p=GetValue$C(t,"valuechangeCallbackScope",void 0);this.on("valuechange",u,p)}this.setValue(GetValue$C(t,"value",0))}get value(){return this._value}set value(e){if("string"==typeof e){if(null==(e=ColorStringToInteger(e)))return void((t=this.childrenMap.inputText)&&t.setText(GetHexColorString(this._value)))}else e=Clamp$2(Math.floor(e),0,16777215);if(this._value!==e){this._value=e;var t,i=this.childrenMap.swatch;i&&SetSwatchColor(i,e),(t=this.childrenMap.inputText)&&t.setText(GetHexColorString(e)),this.emit("valuechange",this._value)}}setValue(e){return this.value=e,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}};var methods$4={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return"string"==typeof e&&(e=ColorPickerExpandDirections[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return void 0===e&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return void 0===e&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return void 0===e&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return void 0===e&&(e={}),this.colorComponentsSpace=e,this}};const ColorPickerExpandDirections={down:0,up:1},Color$4=Phaser.Display.Color,Percent$2=Phaser.Math.Percent;var DrawHPalette=function(e,t,i){void 0===i&&(i=!1);var s=e.width,n=e.height,a=new Color$4;if(i)for(var r=0;r<n;r++){var o=Percent$2(r,0,n);a.setFromHSV(o,1,1),t.fillStyle=a.rgba,t.fillRect(0,r,s,1)}else for(var l=0;l<s;l++)o=Percent$2(l,0,s),a.setFromHSV(o,1,1),t.fillStyle=a.rgba,t.fillRect(l,0,1,n)},DrawSVPalette=function(e,t,i){for(var s=e.width,n=e.height,a=t.getImageData(0,0,s,n),r=a.data,o=new Color$4,l=0;l<n;l++)for(var h=0;h<s;h++){var d=Percent$2(h,0,s),c=1-Percent$2(l,0,n);o.setFromHSV(i,d,c);var u=4*(l*s+h);r[u]=o.red,r[u+1]=o.green,r[u+2]=o.blue,r[u+3]=255}t.putImageData(a,0,0)};const Color$3=Phaser.Display.Color,Percent$1=Phaser.Math.Percent,ColorToRGBA$2=Phaser.Display.Color.ColorToRGBA,HSVToRGB$2=Phaser.Display.Color.HSVToRGB;class HPaletteCanvas extends Canvas{constructor(e,t,i,s,n,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=2),void 0===n&&(n=2),super(e,t,i,s,n),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new Color$3,this.setOrientation(a),this.setSize(s,n)}setOrientation(e){return this.orientation=GetOrientationMode(e),this}updateTexture(){return DrawHPalette(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(e){this._hue=e}getHue(e,t){return void 0===e||(0===this.orientation?this.hue=Percent$1(e,0,this.width):this.hue=Percent$1(t,0,this.height)),this.hue}getColor(e,t){if(void 0===e)return this.color;var i=this.getHue(e,t);return this.colorObject.setFromRGB(HSVToRGB$2(i,1,1)),this.colorObject.color}setColor(e){return this.color,this}colorToLocalPosition(e,t){return void 0===t?t={}:!0===t&&(void 0===LocalXY$1&&(LocalXY$1={}),t=LocalXY$1),this.colorObject.setFromRGB(ColorToRGBA$2(e)),0===this.orientation?(t.x=this.width*this.colorObject.h,t.y=this.height/2):(t.x=this.width/2,t.y=this.height*this.colorObject.h),t}}var LocalXY$1=void 0,RotateAround$1=Phaser.Math.RotateAround,LocalToWorld=function(e,t,i,s){void 0===s?s={}:!0===s&&(void 0===GlobOut&&(GlobOut={}),s=GlobOut),t-=e.width*e.originX,i-=e.height*e.originY;var n={x:t*e.scaleX,y:i*e.scaleY};return RotateAround$1(n,0,0,-e.rotation),s.x=e.x+t,s.y=e.y+i,s},GlobOut;class HPalette extends OverlapSizer{constructor(e,t){void 0===t&&(t={}),super(e,t);var i=null!=t.width?1:0,s=new HPaletteCanvas(e).setOrientation(i);e.add.existing(s),this.type="rexColorPicker.HPalette",s.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var n=new RoundRectangle$2(e,{strokeColor:16777215,strokeWidth:2});e.add.existing(n),this.add(s,{key:"paletteCanvas",expand:!0}).add(n,{key:"marker",expand:!1})}resize(e,t){if(this.width===e&&this.height===t)return this;super.resize(e,t);var i=Math.min(e,t);return this.childrenMap.marker.setSize(i,i),this}onPaletteCanvasPointerDown(e,t,i,s){if(e.isDown){var n=this.childrenMap.paletteCanvas.getColor(t,i);this.setMarkerPosition(n),this.emit("input",n)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(e){return this.color===e||(this.childrenMap.paletteCanvas.setColor(e),this.setMarkerPosition(e)),this}setMarkerPosition(e){var t=this.childrenMap.paletteCanvas,i=this.childrenMap.marker,s=t.colorToLocalPosition(e,!0);return LocalToWorld(t,s.x,s.y,i),this.resetChildPositionState(i),this}getHue(e,t){return this.childrenMap.paletteCanvas.getHue(e,t)}}const Color$2=Phaser.Display.Color,Percent=Phaser.Math.Percent,ColorToRGBA$1=Phaser.Display.Color.ColorToRGBA,HSVToRGB$1=Phaser.Display.Color.HSVToRGB;class SVPaletteCanvas extends Canvas{constructor(e,t,i,s,n,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=2),void 0===n&&(n=2),super(e,t,i,s,n),this.type="rexColorPicker.SVPaletteCanvas",void 0===a&&(a=1),this.colorObject=new Color$2,this.setHue(a),this.setSize(s,n)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(e){this._hue!==e&&(this._hue=e,this.colorObject.h=e,this.dirty=!0)}setHue(e){return this.hue=e,this}updateTexture(){return DrawSVPalette(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(e,t){if(void 0===e)return this.colorObject.color;var i=Percent(e,0,this.width),s=1-Percent(t,0,this.height);return this.colorObject.setFromRGB(HSVToRGB$1(this.hue,i,s)),this.colorObject.color}setColor(e){return this.color===e||(this.colorObject.setFromRGB(ColorToRGBA$1(e)),this.setHue(this.colorObject.h)),this}colorToLocalPosition(e,t){return void 0===t?t={}:!0===t&&(void 0===LocalXY&&(LocalXY={}),t=LocalXY),this.colorObject.setFromRGB(ColorToRGBA$1(e)),t.x=this.width*this.colorObject.s,t.y=this.height*(1-this.colorObject.v),t}}var LocalXY=void 0;class SVPalette extends OverlapSizer{constructor(e,t){super(e,t);var i=new SVPaletteCanvas(e);e.add.existing(i),this.type="rexColorPicker.SVPalette",i.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var s=new RoundRectangle$2(e,{radius:5,strokeColor:16777215,strokeWidth:2});e.add.existing(s),this.add(i,{key:"paletteCanvas",expand:!0}).add(s,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(e,t,i,s){if(e.isDown){var n=this.childrenMap.paletteCanvas.getColor(t,i);this.setMarkerPosition(n),this.emit("input",n)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(e){return this.childrenMap.paletteCanvas.setHue(e),this}setColor(e){return this.color===e||(this.childrenMap.paletteCanvas.setColor(e),this.setMarkerPosition(e)),this}setMarkerPosition(e){var t=this.childrenMap.paletteCanvas,i=this.childrenMap.marker,s=t.colorToLocalPosition(e,!0);return LocalToWorld(t,s.x,s.y,i),this.resetChildPositionState(i),this}}const GetValue$B=Phaser.Utils.Objects.GetValue;class ColorPicker extends Sizer{constructor(e,t){super(e,t),this.type="rexColorPicker",this.freezePalettes=!1;var i=GetValue$B(t,"hPalette.position",0);"string"==typeof i&&(i=HPalettePositionNamesMap[i]);var s=0===i||2===i?1:0;this.setOrientation(s);var n,a,r=GetValue$B(t,"background",void 0);0===this.orientation?void 0===(a=GetValue$B(t,"hPalette.width",void 0))&&(a=GetValue$B(t,"hPalette.size",10)):void 0===(n=GetValue$B(t,"hPalette.height",void 0))&&(n=GetValue$B(t,"hPalette.size",10));var o=new HPalette(e,{width:a,height:n});e.add.existing(o);var l=GetValue$B(t,"svPalette.width",void 0),h=GetValue$B(t,"svPalette.height",void 0),d=new SVPalette(e,{width:l,height:h});e.add.existing(d),r&&this.addBackground(r);var c,u,p={proportion:0,expand:!0};0===this.orientation?(c=void 0===l?1:0,u=void 0===h):(c=void 0===h?1:0,u=void 0===l);var g={proportion:c,expand:u};0===i||3===i?this.add(d,g).add(o,p):this.add(o,p).add(d,g),o.on("input",(function(){d.setHue(o.getHue()),this.setValue(d.color,!0)}),this),d.on("input",(function(){this.setValue(d.color,!0)}),this),this.addChildrenMap("background",r),this.addChildrenMap("hPalette",o),this.addChildrenMap("svPalette",d);var m=GetValue$B(t,"valuechangeCallback",null);if(null!==m){var f=GetValue$B(t,"valuechangeCallbackScope",void 0);this.on("valuechange",m,f)}this.setValue(GetValue$B(t,"value",16777215))}get value(){return this._value}set value(e){if(this._value!==e){var t=this._value;this._value=e,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",e,t,this)}}setValue(e,t){return this.freezePalettes=!!t,this.value=e,this.freezePalettes=!1,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(e,t,i){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(e,t,i),this}}var HPalettePositionNamesMap={bottom:0,left:1,top:2,right:3};const GetValue$A=Phaser.Utils.Objects.GetValue,Color$1=Phaser.Display.Color,ColorToRGBA=Phaser.Display.Color.ColorToRGBA,HSVToRGB=Phaser.Display.Color.HSVToRGB,Clamp$1=Phaser.Math.Clamp;class ColorComponents extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation=0,super(e,t),this.type="rexColorComponents",this.colorObject=new Color$1;var i=GetValue$A(t,"background",void 0),s=GetValue$A(t,"formatLabel",void 0);IsGameObject(s)||(s=CreateLabel(e,s).resetDisplayContent());var n=[];if(t.inputText0&&t.inputText1&&t.inputText2)n.push(t.inputText0),n.push(t.inputText1),n.push(t.inputText2);else for(var a=GetValue$A(t,"inputText"),r=0;r<3;r++){var o=CreateInputText$1(e,a).setMaxLength(3).setNumberInput();n.push(o)}i&&this.addBackground(i);var l=GetValue$A(t,"proportion.formatLabel",0),h=!!s.isRexContainerLite,d=GetValue$A(t,"expand.formatLabel",h);this.add(s,{proportion:l,expand:d}),l=void 0===GetValue$A(a,"width")?1:0,d=void 0===GetValue$A(a,"height"),r=0;for(var c=n.length;r<c;r++)this.add(n[r],{proportion:l,expand:d});for(this.addChildrenMap("background",i),this.addChildrenMap("formatLabel",s),this.addChildrenMap("components",n),this.onClick(s,this.toggleColorFormat,this),r=0,c=n.length;r<c;r++)n[r].on("close",(function(){this.updateColorObject(),this.setValue(this.colorObject.color)}),this);var u=GetValue$A(t,"valuechangeCallback",null);if(null!==u){var p=GetValue$A(t,"valuechangeCallbackScope",void 0);this.on("valuechange",u,p)}s.setText("RGB"),this.setValue(GetValue$A(t,"value",16777215))}get value(){return this._value}set value(e){e=Clamp$1(Math.floor(e),0,16777215),this._value!==e&&(this._value=e,this.colorObject.setFromRGB(ColorToRGBA(e)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(e){return this.value=e,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(e){this.colorFormat!==e&&(this.childrenMap.formatLabel.setText(e),this.updateComponents())}setColorFormat(e){return this.colorFormat=e,this}toggleColorFormat(){return this.colorFormat="RGB"===this.colorFormat?"HSV":"RGB",this}updateComponents(){var e,t,i,s=this.childrenMap.components;return"RGB"===this.colorFormat?(e=this.colorObject.red,t=this.colorObject.green,i=this.colorObject.blue):(e=Math.floor(360*this.colorObject.h),t=Math.floor(100*this.colorObject.s),i=Math.floor(100*this.colorObject.v)),s[0].setValue(e),s[1].setValue(t),s[2].setValue(i),this}updateColorObject(){var e=this.childrenMap.components;if("RGB"===this.colorFormat){var t=Clamp$1(e[0].value,0,255),i=Clamp$1(e[1].value,0,255),s=Clamp$1(e[2].value,0,255);this.colorObject.setTo(t,i,s)}else{var n=Clamp$1(e[0].value,0,359)/360,a=Clamp$1(e[1].value,0,100)/100,r=Clamp$1(e[2].value,0,100)/100;this.colorObject.setFromRGB(HSVToRGB(n,a,r))}return this}}const GetValue$z=Phaser.Utils.Objects.GetValue;class ColorPickerPanel extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation=1,super(e,t),this.type="rexColorInput.ColorPickerPanel";var i,s=GetValue$z(t,"background",void 0),n=new ColorPicker(e,{hPalette:t.hPalette||{},svPalette:t.svPalette||{},space:{item:GetValue$z(t,"space.hPalette",8)}});e.add.existing(n),t.colorComponents&&(i=new ColorComponents(e,t.colorComponents),e.add.existing(i)),s&&(this.addBackground(s),new TouchEventStop(s,{stopAllLevels:!1})),this.add(n,{proportion:1,expand:!0}),i&&this.add(i,{proportion:0,expand:!0}),this.addChildrenMap("background",s),this.addChildrenMap("colorPicker",n),this.addChildrenMap("colorComponents",i),n.on("valuechange",(function(e){this.setValue(e)}),this),i&&i.on("valuechange",(function(e){this.setValue(e)}),this),this.setValue(GetValue$z(t,"value",16777215))}get value(){return this._value}set value(e){if(this._value!==e){this._value=e,this.childrenMap.colorPicker.setValue(e);var t=this.childrenMap.colorComponents;t&&t.setValue(e),this.emit("valuechange",e)}}setValue(e){return this.value=e,this}}Phaser.Utils.Objects.GetValue;var CreateColorPicker=function(e){e=this.scene;var t,i=this.colorPickerCreateBackgroundCallback;i&&(t=i.call(this,e),e.add.existing(t));var s=this.colorPickerWidth;void 0===s&&(s=this.width);var n,a=this.colorPickerHeight;void 0===a&&(a=s),n=this.colorComponentsHeight>0&&{height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace};var r=new ColorPickerPanel(e,{width:s,height:a,background:t,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:n,value:this.value});return e.add.existing(r),r},OpenColorPicker=function(){if(!this.colorPicker){var e=CreateColorPicker.call(this).layout(),t=new DropDown(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",(function(){e.on("valuechange",(function(e){this.setValue(e)}),this)}),this).on("close",(function(){this.colorPicker=void 0,this.dropDownBehavior=void 0}),this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},methods$3={openColorPicker:OpenColorPicker};Object.assign(methods$3,methods$4);const GetValue$y=Phaser.Utils.Objects.GetValue;class ColorInput extends ColorInput$1{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexColorInput",t.hasOwnProperty("colorPicker")||(t.colorPicker={background:{color:0}});var i=t.colorPicker,s=!1!==i&&null!==i;if(s){var n;this.setColorPickerSize(GetValue$y(i,"width",160),GetValue$y(i,"height",170));var a=GetValue$y(i,"background");n=a?function(e){return CreateBackground$2(e,a)}:GetValue$y(i,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(n),this.setColorPickerHPalettePosition(GetValue$y(i,"hPalettePosition",0)),this.setColorPickerExpandDirection(GetValue$y(i,"expandDirection")),this.setColorPickerEaseInDuration(GetValue$y(i,"easeIn",200)),this.setColorPickerEaseOutDuration(GetValue$y(i,"easeOut",200)),this.setColorPickerTransitInCallback(GetValue$y(i,"transitIn")),this.setColorPickerTransitOutCallback(GetValue$y(i,"transitOut")),this.setColorPickerBounds(GetValue$y(i,"bounds"));var r=GetValue$y(i,"space");void 0===r&&(r={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(r)}var o=t.colorComponents;if(s&&!1!==o&&null!==o){this.setColorComponentsHeight(GetValue$y(o,"height",30)),this.setColorComponentsFormatLabelConfig(GetValue$y(o,"formatLabel"));var l=GetValue$y(o,"inputText");l||(l=GetValue$y(t,"inputText")),this.setColorComponentsInputTextConfig(l);var h=GetValue$y(o,"space");void 0===h&&(h={item:8}),this.setColorComponentsSpace(h)}var d=this.childrenMap.swatch;d&&s&&this.onClick(d,this.openColorPicker,this)}}Object.assign(ColorInput.prototype,methods$3),ObjectFactory.register("colorInput",(function(e){var t=new ColorInput(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ColorInput",ColorInput),ObjectFactory.register("colorInputLite",(function(e){var t=new ColorInput$1(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ColorInputBase",ColorInput$1),ObjectFactory.register("colorPicker",(function(e){var t=new ColorPicker(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ColorPicker",ColorPicker),ObjectFactory.register("colorComponents",(function(e){var t=new ColorComponents(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.ColorComponents",ColorComponents);var RequestDrag=function(e){for(var t,i=e.scene.input,s=i.manager,n=s.pointersTotal,a=s.pointers,r=0;r<n;r++)if((t=a[r]).primaryDown&&0===i.getDragState(t)&&IsPointerInHitArea(e,t))return i.setDragState(t,1),i._drag[t.id]=[e],0===i.dragDistanceThreshold||0===i.dragTimeThreshold?(i.setDragState(t,3),i.processDragStartList(t)):i.setDragState(t,2),!0;return!1};const GetValue$x=Phaser.Utils.Objects.GetValue,DistanceBetween=Phaser.Math.Distance.Between,RotateAroundDistance=Phaser.Math.RotateAroundDistance;class Drag extends ComponentBase{constructor(e,t){super(e,{eventEmitter:!1}),this._enable=void 0,e.setInteractive(GetValue$x(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.setEnable(GetValue$x(e,"enable",!0)),this.setAxisMode(GetValue$x(e,"axis",0)),this.setAxisRotation(GetValue$x(e,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var e=this.parent;e.on("dragstart",this.onDragStart,this),e.on("drag",this.onDrag,this),e.on("dragend",this.onDragEnd,this)}shutdown(e){this.isShutdown||(this.pointer=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.dragend(),this._enable=e,this.scene.input.setDraggable(this.parent,e),this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(e){return"string"==typeof e&&(e=DIRECTIONNODE[e]),this.axisMode=e,this}setAxisRotation(e){return this.axisRotation=e,this}drag(){return RequestDrag(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(e,t,i){this.isDragging||(this.pointer=e)}onDrag(e,t,i){if(this.pointer===e){var s=this.parent;if(0===this.axisMode)s.x=t,s.y=i;else if(0===this.axisRotation)1===this.axisMode?s.x=t:2===this.axisMode&&(s.y=i);else{var n,a={x:t,y:i};n=DistanceBetween(a.x,a.y,s.x,s.y),a=RotateAroundDistance(a,s.x,s.y,-this.axisRotation,n),1===this.axisMode?a.y=s.y:2===this.axisMode&&(a.x=s.x),n=DistanceBetween(a.x,a.y,s.x,s.y),a=RotateAroundDistance(a,s.x,s.y,this.axisRotation,n),s.x=a.x,s.y=a.y}}}onDragEnd(e,t,i,s){this.pointer===e&&(this.pointer=void 0)}get isDragging(){return void 0!==this.pointer}}const DIRECTIONNODE={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var OnDragSplitter=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],i=this.sizerChildren[2],s=this.getSizerConfig(e).padding,n=this.getSizerConfig(t).padding,a=this.getSizerConfig(i).padding;if(0===this.orientation){var r=this.innerLeft+s.left,o=this.innerRight-a.right,l=GetDisplayWidth(t),h=t.x+l*(0-t.originX),d=t.x+l*(1-t.originX),c=h-n.left-this.space.item-s.right-r,u=o-(d+n.right+this.space.item+a.left),p=c+u;this.minFirstChildSize>0&&c<this.minFirstChildSize&&(u=p-(c=this.minFirstChildSize)),this.minSecondChildSize>0&&u<this.minSecondChildSize&&(c=p-(u=this.minSecondChildSize)),this.setSplitRatio(c/p)}else{var g=this.innerTop+s.top,m=this.innerBottom-a.bottom,f=GetDisplayHeight(t),v=t.y+f*(0-t.originY),b=t.y+f*(1-t.originY),y=v-n.top-this.space.item-s.bottom-g,C=m-(b+n.bottom+this.space.item+a.top),x=y+C;this.minFirstChildSize>0&&y<this.minFirstChildSize&&(C=x-(y=this.minFirstChildSize)),this.minSecondChildSize>0&&C<this.minSecondChildSize&&(y=x-(C=this.minSecondChildSize)),this.setSplitRatio(y/x)}var S=this.minWidth,w=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(S,w)};const GetValue$w=Phaser.Utils.Objects.GetValue,Clamp=Phaser.Math.Clamp;class SplitPanels extends Sizer{constructor(e,t){t.hasOwnProperty("orientation")||(t.orientation=t.hasOwnProperty("leftPanel")?0:1),super(e,t),this.type="rexSplit";var i,s,n,a,r=GetValue$w(t,"background",void 0);0===this.orientation?(i="leftPanel",s="rightPanel",n="minLeftPanelWidth",a="minRightPanelWidth"):(i="topPanel",s="bottomPanel",n="minTopPanelHeight",a="minBottomPanelHeight");var o=GetValue$w(t,i,void 0),l=GetValue$w(t,"splitter",void 0),h=GetValue$w(t,s,void 0);r&&this.addBackground(r);var d=GetValue$w(t,"space",void 0);this.add(o,{proportion:1,expand:!0,padding:{left:GetValue$w(d,`${i}Left`,0),right:GetValue$w(d,`${i}Right`,0),top:GetValue$w(d,`${i}Top`,0),bottom:GetValue$w(d,`${i}Bottom`,0)}}),this.add(l,{proportion:0,expand:!0,padding:{left:GetValue$w(d,"splitterLeft",0),right:GetValue$w(d,"splitterRight",0),top:GetValue$w(d,"splitterTop",0),bottom:GetValue$w(d,"splitterBottom",0)}}),this.add(h,{proportion:1,expand:!0,padding:{left:GetValue$w(d,`${s}Left`,0),right:GetValue$w(d,`${s}Right`,0),top:GetValue$w(d,`${s}Top`,0),bottom:GetValue$w(d,`${s}Bottom`,0)}}),this.addChildrenMap("background",r),this.addChildrenMap(i,o),this.addChildrenMap("splitter",l),this.addChildrenMap(s,h),this.minFirstChildSize=GetValue$w(t,n,0),this.minSecondChildSize=GetValue$w(t,a,0),this.setSplitRatio(GetValue$w(t,"splitRatio",.5)),this.splitterDragBehavior=new Drag(l,{axis:0===this.orientation?1:2}),l.on("dragstart",(function(){this.emit("splitter.dragstart",l,this.splitRatio)}),this).on("dragend",(function(){this.emit("splitter.dragend",l,this.splitRatio)}),this).on("drag",(function(){OnDragSplitter.call(this),this.emit("splitter.drag",l,this.splitRatio)}),this).on("pointerover",(function(){this.emit("splitter.over",l,this.splitRatio)}),this).on("pointerout",(function(){this.emit("splitter.out",l,this.splitRatio)}),this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(e){this.splitterDragBehavior.setEnable(e)}setSplitterEnable(e){return void 0===e&&(e=!0),this.splitterEnable=e,this}set minLeftPanelWidth(e){this.minFirstChildSize=e}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(e){this.minSecondChildSize=e}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(e){this.minFirstChildSize=e}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(e){this.minSecondChildSize=e}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(e){return this.minLeftPanelWidth=e,this}setMinRightPanelWidth(e){return this.minRightPanelWidth=e,this}setMinTopPanelHeight(e){return this.minTopPanelHeight=e,this}setMinBottomPanelHeight(e){return this.minBottomPanelHeight=e,this}get splitRatio(){return this._splitRatio}set splitRatio(e){e=Clamp(e,0,1),this._splitRatio!==e&&(this._splitRatio=e,this.getSizerConfig(this.sizerChildren[0]).proportion=e,this.getSizerConfig(this.sizerChildren[2]).proportion=1-e)}setSplitRatio(e){return this.splitRatio=e,this}}ObjectFactory.register("splitPanels",(function(e){var t=new SplitPanels(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.SplitPanels",SplitPanels);var GetShowCallback$1=function(){return function(e,t,i,s){"panel"!==t&&i.setChildVisible(e,!0)}},GetHideCallback$1=function(){return function(e,t,i,s){"panel"!==t&&i.setChildVisible(e,!1)}};const VisibleCallbacks={show:GetShowCallback$1,hide:GetHideCallback$1};var GetShowCallback=function(e,t){return void 0===t&&(t=1),function(i,s,n,a){"panel"!==s&&n.fadeChild(i,a?0:e,t)}},GetHideCallback=function(e,t){return void 0===t&&(t=0),function(i,s,n,a){"panel"!==s&&n.fadeChild(i,a?0:e,t)}};const FadeCallbacks={show:GetShowCallback,hide:GetHideCallback};var GetCallback$1=function(e,t){return function(i,s,n,a){"panel"!==s&&n.moveChild(i,a?0:e,t)}};const MoveCallbacks={show:GetCallback$1,hide:GetCallback$1};var GetCallback=function(e,t){return function(i,s,n,a){"panel"===s&&n.moveChild(i,a?0:e,t)}};const MovePanelCallbacks={show:GetCallback,hide:GetCallback},DefaultCallbacks={visible:VisibleCallbacks,fade:FadeCallbacks,move:MoveCallbacks,"move-panel":MovePanelCallbacks};var GetDefaultCallbacks=function(e){var t,i,s,n;return[t,...i]="string"==typeof e?[e]:e,DefaultCallbacks.hasOwnProperty(t)?(s=DefaultCallbacks[t].show.apply(null,i),n=DefaultCallbacks[t].hide.apply(null,i)):(s=NOOP,n=NOOP),{show:s,hide:n}};const ShowChildMethods={showChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("showchild",i,e,this,t),this.resetChildState(i)),this},hideChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("hidechild",i,e,this,t),this.resetChildState(i)),this},swapChild(e,t){return this.currentChildKey===e||("panel"===this.currentChildKey||"panel"===e?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return"leftSide"==this.currentChildKey&&this.showPanel(),this},hideRightSide(){return"rightSide"==this.currentChildKey&&this.showPanel(),this},hideTopSide(){return"topSide"==this.currentChildKey&&this.showPanel(),this},hideBottomSide(){return"bottomSide"==this.currentChildKey&&this.showPanel(),this},toggleLeftSide(){var e="panel"!==this.currentChildKey?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e="panel"!==this.currentChildKey?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e="panel"!==this.currentChildKey?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e="panel"!==this.currentChildKey?"panel":"bottomSide";return this.swapChild(e),this}},ContainerSetChildVisible=ContainerLite.prototype.setChildVisible,Visible$1={setChildVisible(e,t){if("string"==typeof e){var i=e;e=this.sizerChildren[i]}else i=IndexOf(this.sizerChildren,e);return void 0===t&&(t=this.currentChildKey===i),ContainerSetChildVisible.call(this,e,t),this}},Fade={fadeChild(e,t,i){var s;return"string"==typeof e?(s=e,e=this.sizerChildren[s]):s=IndexOf(this.sizerChildren,e),void 0===t&&(t=500),void 0===i&&(i=this.currentChildKey===s?1:0),e.fadeIn(t,{start:e.alpha,end:i}),this},fadeChildPromise(e,t,i){return"string"==typeof e&&(e=this.sizerChildren[key]),this.fadeChild(e,t,i),e._fade?WaitComplete(e._fade):Promise.resolve()}},Move={moveChild(e,t,i,s){var n;"string"==typeof e?(n=e,e=this.sizerChildren[n]):n=IndexOf(this.sizerChildren,e),void 0===t&&(t=500);var a,r,o,l,h=this.currentChildKey===n;if(void 0===s)switch(n){case"leftSide":case"rightSide":s=GetDisplayWidth(e);break;case"topSide":case"bottomSide":s=GetDisplayHeight(e);break;default:if(h)switch(this.previousChildKey){case"leftSide":case"rightSide":s=GetDisplayWidth(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":s=GetDisplayHeight(this.sizerChildren[this.previousChildKey]);break;default:s=0}else switch(this.currentChildKey){case"leftSide":case"rightSide":s=GetDisplayWidth(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":s=GetDisplayHeight(this.sizerChildren[this.currentChildKey]);break;default:s=0}}if(h)switch(n){case"panel":switch(this.previousChildKey){case"leftSide":a=!0;break;case"rightSide":r=!0;break;case"topSide":o=!0;break;case"bottomSide":l=!0}break;case"leftSide":r=!0;break;case"rightSide":a=!0;break;case"topSide":l=!0;break;case"bottomSide":o=!0}else switch(n){case"panel":switch(this.currentChildKey){case"leftSide":r=!0;break;case"rightSide":a=!0;break;case"topSide":l=!0;break;case"bottomSide":o=!0}break;case"leftSide":a=!0;break;case"rightSide":r=!0;break;case"topSide":o=!0;break;case"bottomSide":l=!0}return a?e.moveTo(t,`-=${s}`,void 0,i):r?e.moveTo(t,`+=${s}`,void 0,i):o?e.moveTo(t,void 0,`-=${s}`,i):l?e.moveTo(t,void 0,`+=${s}`,i):e.moveTo(0),this},moveChildPromise(e,t,i,s){return"string"==typeof e&&(e=this.sizerChildren[key]),this.moveChild(e,t,i,s),e._easeMove?WaitComplete(e._easeMove):Promise.resolve()}};var methods$2={};Object.assign(methods$2,Visible$1,Fade,Move);const GetValue$v=Phaser.Utils.Objects.GetValue;class Sides extends OverlapSizer{constructor(e,t){super(e,t),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var i=GetValue$v(t,"showChildCallback",void 0);if(i)if(IsFunction(i)){var s=GetValue$v(t,"showChildCallbackScope",void 0);this.on("showchild",i,s);var n=GetValue$v(t,"hideChildCallback",void 0),a=GetValue$v(t,"hideChildCallbackScope",void 0);this.on("hidechild",n,a)}else{var r=GetDefaultCallbacks(i);this.on("showchild",r.show),this.on("hidechild",r.hide)}var o=GetValue$v(t,"background",void 0),l=GetValue$v(t,"panel",void 0),h=GetValue$v(t,"leftSide",void 0),d=GetValue$v(t,"rightSide",void 0),c=GetValue$v(t,"topSide",void 0),u=GetValue$v(t,"bottomSide",void 0);if(o&&this.addBackground(o),l&&this.add(l,"panel","center",0,!0),h){var p=GetValue$v(t,"expand.left",!0);this.add(h,"leftSide","left-top",0,{height:p})}d&&(p=GetValue$v(t,"expand.right",!0),this.add(d,"rightSide","right-top",0,{height:p})),c&&(p=GetValue$v(t,"expand.top",!0),this.add(c,"topSide","left-top",0,{width:p})),u&&(p=GetValue$v(t,"expand.bottom",!0),this.add(u,"bottomSide","left-bottom",0,{width:p}))}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Sides.prototype,ShowChildMethods,methods$2),ObjectFactory.register("sides",(function(e){var t=new Sides(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Sides",Sides);var RegisterInputHandler=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this};const GetFirst=Phaser.Utils.Array.GetFirst,Remove=Phaser.Utils.Array.Remove;var RemoveInputHandler=function(e){var t=GetFirst(this.inputHandlers,"name",e);return t&&Remove(this.inputHandlers,t),this};class Title extends Label{constructor(e,t){super(e,t=BuildLabelConfig(e,t)),this.type="rexTweaker.Title"}setTitle(e){return(e=e?DeepClone(e):{}).hasOwnProperty("text")||(e.hasOwnProperty("title")?e.text=e.title:e.text=""),this.resetDisplayContent(e),this}}class FolderTitle extends Title{constructor(e,t){void 0===t&&(t={}),super(e,t),this.type="rexTweaker.FolderTitle";var i=new Triangle(e,t.expandedIcon);e.add.existing(i),this.addSpace().add(i,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",i)}setExpandedState(e){void 0===e&&(e=!0);var t=e?"down":"right";return this.childrenMap.expandedIcon.setDirection(t),this}}var Merge$1=function(e,t){var i=Clone$2(e);for(var s in t)i.hasOwnProperty(s)||(i[s]=t[s]);return i},CreateBackground=function(e,t,i){return CreateBackground$2(e,Merge$1(t,i))};const BindingTargetMethods$5={setBindingTarget(e){return this.childrenMap.child.setBindingTarget(e),this}},InputRowTitleWidthMethods$4={getMaxInputRowTitleWidth(){return this.childrenMap.child.getMaxInputRowTitleWidth()+this.getInnerPadding("left")},setInputRowTitleWidth(e){return e-=this.getInnerPadding("left"),this.childrenMap.child.setInputRowTitleWidth(e),this}};class Folder extends Folder$1{constructor(e,t){void 0===t&&(t={}),t.orientation=1,super(e,t),this.type="rexTweaker.Folder"}setTitle(e){return this.childrenMap.title.setTitle(e),this}}Object.assign(Folder.prototype,BindingTargetMethods$5,InputRowTitleWidthMethods$4);const GetValue$u=Phaser.Utils.Objects.GetValue;var CreateFolder=function(e,t,i){var s=e.scene,n=GetValue$u(i,"title")||{},a=new FolderTitle(s,n);s.add.existing(a),a.on("folder.expand",(function(){a.setExpandedState(!0)})).on("folder.collapse",(function(){a.setExpandedState(!1)}));var r={root:GetValue$u(i,"root"),styles:GetValue$u(i,"tweaker"),space:GetValue$u(i,"space")||{}},o=e.createTweaker(r),l=GetValue$u(i,"background"),h=CreateBackground(s,t,l),d=new Folder(s,{title:a,child:o,background:h,transition:{duration:GetValue$u(i,"transition.duration",200)}});return s.add.existing(d),d};const GetValue$t=Phaser.Utils.Objects.GetValue;var AddFolder=function(e){void 0===e&&(e={});var t=GetValue$t(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var i=CreateFolder(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var s=GetValue$t(e,"expanded",!0);void 0!==s&&i.setExpandedState(s);var n=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,n),n};const BindingTargetMethods$4={setBindingTarget(e){for(var t=this.childrenMap.pages.children,i=0,s=t.length;i<s;i++)t[i].setBindingTarget(e);return this}},InputRowTitleWidthMethods$3={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,i=0,s=t.length;i<s;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,i=0,s=t.length;i<s;i++)t[i].setInputRowTitleWidth(e);return this}};class TabPages extends TabPages$1{constructor(e,t){super(e,t),this.type="rexTweaker.TabPages"}}Object.assign(TabPages.prototype,BindingTargetMethods$4,InputRowTitleWidthMethods$3);const GetValue$s=Phaser.Utils.Objects.GetValue;var CreateTab=function(e,t,i){var s=e.scene,n=new TabPages(s,i);s.add.existing(n);for(var a=GetValue$s(i,"tab"),r={root:GetValue$s(i,"root"),styles:GetValue$s(i,"tweaker")},o=GetValue$s(t,"pages")||[],l=0,h=o.length;l<h;l++){var d=o[l];n.addPage({key:d.title,tab:CreateLabel(s,a).setActiveState(!1).resetDisplayContent({text:d.title}),page:e.createTweaker(r)})}return n.on("tab.focus",(function(e,t){e.setActiveState(!0)})).on("tab.blur",(function(e,t){e.setActiveState(!1)})),n};const GetValue$r=Phaser.Utils.Objects.GetValue;var AddTab=function(e){void 0===e&&(e={});var t=GetValue$r(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var i=CreateTab(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0});for(var s=GetValue$r(e,"pages")||[],n=[],a=0,r=0,o=s.length;r<o;r++){var l=i.getPage(r);s[r].show&&(a=r);var h=s[r].key;h&&this.root.addChildrenMap(h,l),n.push(l)}return i.swapPage(a,0),n};const BindingTargetMethods$3={setBindingTarget(e){for(var t=this.childrenMap.columns,i=0,s=t.length;i<s;i++)t[i].setBindingTarget(e);return this}},InputRowTitleWidthMethods$2={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,i=0,s=t.length;i<s;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,i=0,s=t.length;i<s;i++)t[i].setInputRowTitleWidth(e);return this}},GetValue$q=Phaser.Utils.Objects.GetValue;class Columns extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation="y",super(e,t),this.type="rexTweaker.Columns";var i=GetValue$q(t,"background",void 0),s=GetValue$q(t,"title",void 0);i&&this.addBackground(i),s&&this.add(s,{expand:!0,space:{bottom:GetValue$q(t,"space.title",0)}});var n=new Sizer(e,{orientation:"x",space:{item:GetValue$q(t,"space.column",0)}});e.add.existing(n);for(var a,r,o=GetValue$q(t,"columns",void 0),l=0,h=o.length;l<h;l++)r=(a=o[l]).child,n.add(a.child,{proportion:0===r.minWidth?1:0,expand:GetValue$q(a,"expand",!0)});this.add(n,{expand:!0}),this.addChildrenMap("title",s),this.addChildrenMap("columnsSizer",n),this.addChildrenMap("columns",n.childrenMap.items)}setTitle(e){var t=this.childrenMap.title;return e.title||e.icon?t.show().setTitle(e):t.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(e){return this.childrenMap.columns[e]}}Object.assign(Columns.prototype,BindingTargetMethods$3,InputRowTitleWidthMethods$2);const GetValue$p=Phaser.Utils.Objects.GetValue;var CreateColumns=function(e,t,i){var s=e.scene,n=GetValue$p(i,"title")||{},a=new Title(s,n);s.add.existing(a);var r={root:GetValue$p(i,"root"),styles:GetValue$p(i,"tweaker")},o=GetValue$p(i,"background");o&&!Array.isArray(o)&&(o=[o]);var l=GetValue$p(t,"columns",2);if("number"==typeof l){var h=l;l=[];for(var d=0,c=h;d<c;d++)l.push({})}for(d=0,c=l.length;d<c;d++){var u=l[d];o&&(r.background=o[d%o.length]),r.width=GetValue$p(u,"width",0);var p=e.createTweaker(r);u.child=p}var g=new Columns(s,{title:a,columns:l,space:GetValue$p(i,"space")});return s.add.existing(g),g};const GetValue$o=Phaser.Utils.Objects.GetValue;var AddColumns=function(e){void 0===e&&(e={}),"number"==typeof e&&(e={columns:e});var t=GetValue$o(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var i=CreateColumns(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var s=GetValue$o(e,"columns",void 0);if(s&&Array.isArray(s))for(var n=0,a=s.length;n<a;n++){var r=s[n].key;r&&this.root.addChildrenMap(r,i.getColumn(n))}return i.getColumns()};const BindingTargetMethods$2={setBindingTarget(e){for(var t=this.childrenMap.child,i=0,s=t.length;i<s;i++)t[i].setBindingTarget(e);return this}},InputRowTitleWidthMethods$1={getMaxInputRowTitleWidth:()=>0,setInputRowTitleWidth(e){return this}},GetValue$n=Phaser.Utils.Objects.GetValue;class Wrap extends Sizer{constructor(e,t){void 0===t&&(t={}),t.orientation="y",super(e,t),this.type="rexTweaker.Wrap";var i=GetValue$n(t,"background",void 0),s=GetValue$n(t,"title",void 0);i&&this.addBackground(i),s&&this.add(s,{expand:!0,space:{bottom:GetValue$n(t,"space.title",0)}});var n=GetValue$n(t,"child",void 0);this.add(n,{expand:!0}),this.addChildrenMap("title",s),this.addChildrenMap("child",n)}setTitle(e){var t=this.childrenMap.title;return e.title||e.icon?t.show().setTitle(e):t.hide(),this}}Object.assign(Wrap.prototype,BindingTargetMethods$2,InputRowTitleWidthMethods$1);const GetValue$m=Phaser.Utils.Objects.GetValue;var CreateWrap=function(e,t,i){var s=e.scene,n=GetValue$m(i,"title")||{},a=new Title(s,n);s.add.existing(a);var r=GetValue$m(i,"itemWidth",0),o=GetValue$m(i,"itemHeight",0),l={root:GetValue$m(i,"root"),styles:GetValue$m(i,"tweaker"),space:GetValue$m(i,"space"),align:GetValue$m(i,"align",5),wrap:!0,itemWidth:GetValue$m(t,"itemWidth",r),itemHeight:GetValue$m(t,"itemHeight",o)};GetValue$m(i,"background");var h=e.createTweaker(l),d=new Wrap(s,{title:a,child:h});return s.add.existing(d),d};const GetValue$l=Phaser.Utils.Objects.GetValue;var AddWrap=function(e){void 0===e&&(e={});var t=GetValue$l(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var i=CreateWrap(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var s=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,s),s};const BindingTargetMethods$1={setBindingTarget(e){return this.childrenMap.panel.setBindingTarget(e),this}},InputRowTitleWidthMethods={getMaxInputRowTitleWidth(){return this.childrenMap.panel.getMaxInputRowTitleWidth()+this.getInnerPadding("left")},setInputRowTitleWidth(e){return e-=this.getInnerPadding("left"),this.childrenMap.panel.setInputRowTitleWidth(e),this}};class Scrollable extends ScrollablePanel{constructor(e,t){super(e,t),this.type="rexTweaker.Scrollable"}setTitle(e){var t=this.childrenMap.header;return e.title||e.icon?t.show().setTitle(e):t.hide(),this}}Object.assign(Scrollable.prototype,BindingTargetMethods$1,InputRowTitleWidthMethods);const GetValue$k=Phaser.Utils.Objects.GetValue;var CreateScrollable=function(e,t,i){var s=e.scene,n=GetValue$k(i,"title")||{},a=new Title(s,n);s.add.existing(a);var r={root:GetValue$k(i,"root"),styles:GetValue$k(i,"tweaker"),space:GetValue$k(i,"space")||{}},o=e.createTweaker(r),l=GetValue$k(i,"slider");if(l){var h=(l=DeepClone(l)).track;h&&(l.track=CreateBackground(s,t,h));var d=l.thumb;d&&(l.thumb=CreateBackground(s,t,d))}var c=GetValue$k(i,"background"),u=CreateBackground(s,t,c),p=new Scrollable(s,{scrollMode:0,header:a,panel:{child:o,mask:{padding:1}},slider:l,background:u,height:GetValue$k(t,"height",0),space:GetValue$k(i,"space",void 0)});return s.add.existing(p),p};const GetValue$j=Phaser.Utils.Objects.GetValue;var AddScrollable=function(e){void 0===e&&(e={});var t=GetValue$j(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var i=CreateScrollable(this,e,t);delete t.tweaker,delete t.root,this.add(i,{proportion:0===i.minWidth?1:0,expand:!0}),i.setTitle(e);var s=i.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,s),s};const GetValue$i=Phaser.Utils.Objects.GetValue,BindingTargetMethods={setupBinding(){return this.childrenMap.inputField.on("valuechange",(function(e){this.autoUpdateEnable&&this.setTargetValue(e)}),this),this},setAutoUpdateEnable(e){return void 0===e&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,void 0!==t&&this.setBindingTargetKey(t),this.syncTargetValue();var i=this.childrenMap.inputField;return i.onBindTarget&&i.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=GetValue$i(e,"onGetValue"),this.onSetValue=GetValue$i(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget)return null!=this.bindTargetKey?this.bindingTarget[this.bindTargetKey]:this.onGetValue?this.onGetValue(this.bindingTarget):void 0},setTargetValue(e){return this.bindingTarget?null!=this.bindTargetKey?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},MonitorTargetMethods={startMonitorTarget(){return this.isMonitoring||(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this)),this},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},MinTitleWidthMethods={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||0!==e.orientation)return 0;var t=e.rexSizer.padding;return this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||0!==t.orientation)return this;var i=t.rexSizer.padding;return e-=(i.left+i.right)*t.scaleX,t.minWidth=e,this}},GetValue$h=Phaser.Utils.Objects.GetValue;class InputRow extends Sizer{constructor(e,t){super(e,t),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var i,s=t.inputTitle,n=t.inputField,a=t.background,r=GetValue$h(t,"proportion.title",0),o=GetValue$h(t,"space.title",0);i=0===this.orientation?{right:o}:{bottom:o},this.add(s,{proportion:r,expand:!0,padding:i});var l=n.defaultProportion;void 0===l&&(l=t.defaultExpandWidth?1:0),r=GetValue$h(t,"proportion.inputField",l),this.add(n,{proportion:r,expand:!0}),a&&this.addBackground(a),this.addChildrenMap("title",s),this.addChildrenMap("inputField",n),this.addChildrenMap("background",a),this.setupBinding()}destroy(e){this.scene&&!this.ignoreDestroy&&(this.stopMonitorTarget(),super.destroy(e))}setTitle(e){return this.childrenMap.title.setTitle(e),this}preLayout(){var e=this.childrenMap.title;e&&(e.minWidth=0),super.preLayout()}}Object.assign(InputRow.prototype,BindingTargetMethods,MonitorTargetMethods,MinTitleWidthMethods);var CreateTitleLabel=function(e,t,i){var s=new Title(e,i);return e.add.existing(s),s},GenerateInputFieldClass=function(e){return void 0===e&&(e=Sizer),class extends e{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}get root(){return this.getParentSizer().getParentSizer().root}onBindTarget(e,t){this.onBindTargetCallback&&this.onBindTargetCallback(this,e,t)}validate(e){return!(!this.syncValueFlag&&this.validateCallback)||this.validateCallback(e,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(e){return this.textFormatCallback?this.textFormatCallback(e):e.toString()}set value(e){if(this._value!==e&&(this.validate(e)||(e=this._value),this.filterValueCallback&&(e=this.filterValueCallback(this,e)),this.displayValueCallback&&this.displayValueCallback(this,e),this._value!==e)){var t=this._value;if(this._value=e,!this.syncValueFlag){var i=this.bindingTarget,s=this.bindingKey;this.emit("valuechange",e,t,i,s),this.root.emit("valuechange",e,t,i,s)}}}getValue(){return this.value}setValue(e){return this.value=e,this}syncValue(e){return this.syncValueFlag=!0,this.value=e,this.syncValueFlag=!1,this}setup(e,t){return void 0===t&&(t=!1),(t||e.hasOwnProperty("format"))&&this.setTextFormatCallback(e.format),(t||e.hasOwnProperty("onValidate"))&&this.setValidateCallback(e.onValidate),this.setupCallback&&this.setupCallback(this,e,t),this}setSetupCallback(e){return this.setupCallback=e,this}setFilterValueCallback(e){return this.filterValueCallback=e,this}setDisplayValueCallback(e){return this.displayValueCallback=e,this}setOnBindTargetCallback(e){return this.onBindTargetCallback=e,this}setTextFormatCallback(e){return this.textFormatCallback=e,this}setValidateCallback(e){return this.validateCallback=e,this}}},CreateInputField=function(e,t,i){for(var s,n=this.inputHandlers,a=0,r=n.length;a<r;a++){var o=n[a];if(o.accept(t)){s=new(GenerateInputFieldClass(o.baseClass))(e),e.add.existing(s),s.setSetupCallback(o.setup).setFilterValueCallback(o.filterValue).setDisplayValueCallback(o.displayValue).setOnBindTargetCallback(o.onBindTarget),o.build(s,i);break}}return s&&s.setup(t,!0),s};const GetValue$g=Phaser.Utils.Objects.GetValue;var CreateInputRow=function(e,t,i){var s=CreateInputField.call(this,e,t,i);if(!s)return null;var n=GetValue$g(i,"title")||{},a=CreateTitleLabel(e,t,n),r=GetValue$g(i,"background")||{},o=CreateBackground$2(e,r),l=new InputRow(e,{...i,...t,inputTitle:a,inputField:s,background:o});return e.add.existing(l),l.setTitle(t),l.setValueCallbacks(t),l},AddInput=function(e,t,i){1===arguments.length?(e=(i=e).bindingTarget,t=i.bindingKey):(void 0===i&&(i={}),i.bindingTarget=e,i.bindingKey=t),i.title||(i.title=t),i.bindingTarget&&i.bindingKey?i.value=i.bindingTarget[i.bindingKey]:i.value=void 0;var s=this.styles.inputRow||{};this.isWrapMode?s.defaultExpandWidth=!0:s.defaultExpandWidth=1===this.styles.orientation;var n,a=CreateInputRow.call(this,this.scene,i,s);return a?(this.isWrapMode?(a.setMinWidth(this.itemWidth),a.setMinHeight(this.itemHeight),this.add(a)):(1===this.orientation?n=0:(n=this.itemWidth>0?0:1,0===a.minWidth&&a.setMinWidth(this.itemWidth)),0===a.minHeight&&a.setMinHeight(this.itemHeight),this.add(a,{proportion:n,expand:!0})),i.onValueChange&&a.childrenMap.inputField.on("valuechange",i.onValueChange),a.setAutoUpdateEnable(i.autoUpdate),a.setBindingTarget(e,t),i.monitor&&a.startMonitorTarget(),i.key&&this.root.addChildrenMap(i.key,a),this):(console.error(`[Tweaker] Can't add Input\n    title: ${i.title}\n    view: ${i.view}\n`),this)},CreateRoundRectangle=function(e,t){var i=new RoundRectangle$2(e,t);return e.add.existing(i),i};const GetValue$f=Phaser.Utils.Objects.GetValue;var CreateButtons$2=function(e,t){var i=new(GetValue$f(t,"wrap",!1)?Buttons:Buttons$1)(e,t);return e.add.existing(i),i};const GetValue$e=Phaser.Utils.Objects.GetValue;var CreateButtons$1=function(e,t,i){for(var s=GetValue$e(i,"title")||{},n=CreateTitleLabel(e,t,s),a=t.buttons,r=GetValue$e(i,"button")||{},o=[],l=0,h=a.length;l<h;l++){var d=CreateLabel(e,r);o.push(d);var c=a[l];d.resetDisplayContent(c.label),d.callback=c.callback}var u=CreateButtons$2(e,{buttons:o,expand:!0,wrap:GetValue$e(t,"wrap",!1)});u.defaultProportion=1;var p=GetValue$e(i,"background")||{},g=CreateRoundRectangle(e,p),m=new InputRow(e,{...i,inputTitle:n,inputField:u,background:g});return e.add.existing(m),m.setTitle(t),u.on("button.click",(function(e){e.callback(m.bindingTarget)})),m};const GetValue$d=Phaser.Utils.Objects.GetValue;var AddButtons=function(e){void 0===e&&(e={});var t=this.scene,i=e.bindingTarget;delete e.bindingTarget;var s=GetValue$d(this.styles,"inputRow")||{},n=CreateButtons$1(t,e,s);return this.add(n,{expand:!0}),i&&n.setBindingTarget(i),e.key&&this.root.addChildrenMap(e.key,n),this},AddButton=function(e){return void 0===e&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},CreateSeparator=function(e,t,i){return CreateBackground$2(e,Merge$1(t,i))};const GetValue$c=Phaser.Utils.Objects.GetValue;var AddSeparator=function(e){void 0===e&&(e={});var t=this.scene,i=GetValue$c(this.styles,"separator"),s=CreateSeparator(t,e,i);return this.add(s,{expand:!0}),this},AddRows=function(e,t,i){return"boolean"==typeof t&&(i=t,t=void 0),void 0===i&&(i=!0),AddProperties(this,DeepClone(e),t,i),this},AddProperties=function(e,t,i,s){if(t)for(var n=0,a=t.length;n<a;n++){var r=t[n];r.hasOwnProperty("$target")&&(i=r.$target,delete r.$target);var o=r.$type;switch(delete r.$type,o){case"folder":var l=e.addFolder(r);AddProperties(l,r.$properties,i,s);break;case"tab":for(var h=e.addTab(r),d=0,c=h.length;d<c;d++)AddProperties(h[d],r.pages[d].$properties,i,s);break;case"columns":var u=e.addColumns(r);for(d=0,c=u.length;d<c;d++)AddProperties(u[d],r.columns[d].$properties,i,s);break;case"scrollable":var p=e.addScrollable(r);AddProperties(p,r.$properties,i,s);break;case"separator":e.addSeparator();break;case"button":r.bindingTarget=i,e.addButton(r);break;case"buttons":r.bindingTarget=i,e.addButtons(r);break;default:var g=r.$key;if(delete r.$key,-1===g.indexOf("."))r.bindingTarget=i,r.bindingKey=g;else{var m=g.split(".");r.bindingKey=m.pop();for(var f=i,v=0,b=m.length;v<b;v++)f=f[m[v]],i||console.warn(`[Monitor] Key path '${g}' is invalid`);r.bindingTarget=f}r.hasOwnProperty("monitor")||(r.monitor=s),e.addInput(r)}}},SetBindingTarget=function(e){for(var t=this.sizerChildren,i=0,s=t.length;i<s;i++){var n=t[i];n.setBindingTarget&&n.setBindingTarget(e)}return this},GetMaxInputRowTitleWidth=function(){for(var e=0,t=this.sizerChildren,i=0,s=t.length;i<s;i++){var n=t[i];n.rexSizer.hidden||(n.getMinTitleWidth?e=Math.max(e,n.getMinTitleWidth()):n.getMaxInputRowTitleWidth&&(e=Math.max(e,n.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},SetInputRowTitleWidth=function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,i=0,s=t.length;i<s;i++){var n=t[i];n.rexSizer.hidden||(n.setMinTitleWidth?n.setMinTitleWidth(e):n.setInputRowTitleWidth&&n.setInputRowTitleWidth(e))}return this},methods$1={registerInputHandler:RegisterInputHandler,removeInputHandler:RemoveInputHandler,addFolder:AddFolder,addTab:AddTab,addColumns:AddColumns,addWrap:AddWrap,addScrollable:AddScrollable,addInput:AddInput,addButtons:AddButtons,addButton:AddButton,addSeparator:AddSeparator,addRows:AddRows,setBindingTarget:SetBindingTarget,getMaxInputRowTitleWidth:GetMaxInputRowTitleWidth,setInputRowTitleWidth:SetInputRowTitleWidth};const GetValue$b=Phaser.Utils.Objects.GetValue;var GenerateTweakerShellClass=function(e){var t=GetValue$b(e,"wrap",!1),i=t?FixWidthSizer:Sizer;class s extends i{constructor(e,i){void 0===i&&(i={}),void 0===i.orientation&&(i.orientation=t?0:1),super(e,i),this.type="rexTweakerShell",this.isWrapMode=t,i.root?(this.root=i.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=GetValue$b(i,"styles")||{},this.styles.orientation=this.orientation;var s=GetValue$b(i,"itemWidth");void 0===s&&(s=GetValue$b(this.styles,"itemWidth",0)),this.itemWidth=s;var n=GetValue$b(i,"itemHeight");if(void 0===n&&(n=GetValue$b(this.styles,"itemHeight",0)),this.itemHeight=n,t||this.root===this&&1===this.orientation){var a=GetValue$b(i,"inputRow.alignTitle");void 0===a?a=!GetValue$b(this.styles,"inputRow.proportion.title"):a&&SetValue(this.styles,"inputRow.proportion.title",0),this.alignInputRowTitleStartFlag=a}else this.alignInputRowTitleStartFlag=!1;var r=CreateBackground(e,void 0,i.background);r&&this.addBackground(r)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(e,t){void 0===t&&(t=!0);var i=new(GenerateTweakerShellClass(e))(this.scene,e);return t&&this.scene.add.existing(i),i}}return Object.assign(s.prototype,methods$1),s},SetInputTextReadOnly$4=function(e,t){void 0===t&&(t=!0),e.childrenMap.inputText.setReadOnly(t)};const TextInputHandler={name:"TextInput",accept:e=>e.hasOwnProperty("view")?"string"===e.view:"string"==typeof e.value,build(e,t){var i=e.scene;e.type="rexTweaker.TextInput";var s=t.inputText,n=CreateInputText$1(i,s);e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",(function(){e.setValue(n.value)}))},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$4(e,!!t.inputTextReadOnly)},displayValue(e,t){e.childrenMap.inputText.setText(e.getFotmatText(t))}};var CreateInputTextArea=function(e,t,i){void 0===i&&(i=!0),i?t=t?DeepClone(t):{}:t||(t={});var s=new TextAreaInput(e,t);return e.add.existing(s),s},SetInputTextReadOnly$3=function(e,t){void 0===t&&(t=!0),e.childrenMap.inputText.setReadOnly(t)};const TextAreaInputHandler={name:"TextAreaInput",accept:e=>!!e.hasOwnProperty("view")&&"textarea"===e.view,build(e,t){var i=e.scene;this.type="rexTweaker.TextAreaInput";var s=t.inputTextArea;void 0===s&&(s={}),s.hasOwnProperty("text")||(s.text=t.inputText),s.hasOwnProperty("slider")||(s.slider=t.slider);var n=CreateInputTextArea(i,s);e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",(function(){e.setValue(n.value)}))},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$3(e,!!t.inputTextReadOnly)},displayValue(e,t){e.childrenMap.inputText.setText(e.getFotmatText(t))},onBindTarget(e){e.childrenMap.inputText.scrollToTop()}};var SetInputTextReadOnly$2=function(e,t){void 0===t&&(t=!0),e.childrenMap.inputText.setReadOnly(t)};const NumberInputHandler={name:"NumberInput",accept:e=>e.hasOwnProperty("view")?"number"===e.view:"number"==typeof e.value,build(e,t){var i=e.scene;e.type="rexTweaker.NumberInput";var s=t.inputNumber||t.inputText,n=CreateInputText$1(i,s).setNumberInput();e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",(function(){e.setValue(n.value)}))},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$2(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue:(e,t)=>e.isFloatType?t:Math.floor(t),displayValue(e,t){e.childrenMap.inputText.setText(e.getFotmatText(t))}};var CreateSlider=function(e,t){var i=new Slider(e,t);return e.add.existing(i),i};const GetValue$a=Phaser.Utils.Objects.GetValue,Linear$1=Phaser.Math.Linear,SnapFloor=Phaser.Math.Snap.Floor;var SetRange=function(e,t,i,s){e.minValue=t,e.maxValue=i,e.step=s,e.childrenMap.slider.setGap(s,t,i)},SetInputTextReadOnly$1=function(e,t){void 0===t&&(t=!0),e.childrenMap.inputText.setReadOnly(t)};const RangeInputHandler={name:"RangeInput",accept:e=>e.hasOwnProperty("view")?"range"===e.view:"number"==typeof e.value&&e.hasOwnProperty("min")&&e.hasOwnProperty("max"),build(e,t){var i=e.scene;e.type="rexTweaker.RangeInput";var s=t.slider,n=0===e.orientation?"track.height":"track.width",a=GetValue$a(s,n),r=CreateSlider(i,s),o=t.defaultExpandWidth?2:0,l=GetValue$a(t,"proportion.range.slider",o),h=void 0===a;e.add(r,{proportion:l,expand:h,key:"slider"});var d=t.inputNumber||t.inputText,c=CreateInputText$1(i,d).setNumberInput();o=t.defaultExpandWidth?1:0,l=GetValue$a(t,"proportion.range.inputText",o),e.add(c,{proportion:l,expand:!0,key:"inputText"}),c.on("close",(function(){e.setValue(c.value)})),r.on("valuechange",(function(){var t=Linear$1(e.minValue,e.maxValue,r.value);e.step&&(t=SnapFloor(t,e.step,e.minValue)),e.setValue(t)}))},setup(e,t,i){(i||t.hasOwnProperty("max"))&&SetRange(e,t.min,t.max,t.step),(i||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$1(e,!!t.inputTextReadOnly)},displayValue(e,t){e.childrenMap.slider.setValue(t,e.minValue,e.maxValue),e.childrenMap.inputText.setText("").setText(e.getFotmatText(t))}};var CreateButtons=function(e,t){var i=new Buttons$1(e,t);return e.add.existing(i),i};const GetValue$9=Phaser.Utils.Objects.GetValue;var SetInputTextReadOnly=function(e,t){void 0===t&&(t=!0),e.childrenMap.inputText.setReadOnly(t)};const IncDecInputHandler={name:"RangeInput",accept:e=>!!e.hasOwnProperty("view")&&"incdec"===e.view,build(e,t){var i=e.scene;e.type="rexTweaker.IncDecInput";var s=GetValue$9(t,"incDec")||{},n={text:null,action:null},a=CreateButtons(i,{expand:!1}),r=t.defaultExpandWidth?1:0;e.add(a,{proportion:r,expand:!0});var o=t.inputNumber||t.inputText,l=CreateInputText$1(i,o).setNumberInput();l.on("close",(function(){e.setValue(l.value)}));var h=Object.assign(DeepClone(n),s.incButton||{}),d=CreateLabel(i,h),c=Object.assign(DeepClone(n),s.decButton||{}),u=CreateLabel(i,c);a.addButton(d),a.addButton(u);var p=s.inputTextIndex||0;a.insert(p,l,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,a.on("button.click",(function(t,i,s,n){var a=e.value;0===i?a+=e.step:a-=e.step,void 0!==e.maxValue&&a>e.maxValue&&(a=e.maxValue),void 0!==e.minValue&&a<e.minValue&&(a=e.minValue),e.setValue(a)})),e.addChildrenMap("incButton",d),e.addChildrenMap("decButton",u),e.addChildrenMap("inputText",l)},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly(e,!!t.inputTextReadOnly),(i||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(i||t.hasOwnProperty("min"))&&(e.minValue=t.min),(i||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){e.childrenMap.inputText.setText("").setText(e.getFotmatText(t))}};var CreateColorInput=function(e,t,i){void 0===i&&(i=!0),i?t=t?DeepClone(t):{}:t||(t={});var s=new ColorInput(e,t);return e.add.existing(s),s};const ColorInputHandler={name:"ColorInput",accept:e=>!!e.hasOwnProperty("view")&&"color"===e.view,build(e,t){var i=e.scene;e.type="rexTweaker.ColorInput";var s=t.colorInput;void 0===s&&(s={}),s.hasOwnProperty("inputText")||(s.inputText=t.inputText);var n=CreateColorInput(i,s);e.add(n,{proportion:1,expand:!0,key:"colorInput"}),n.on("valuechange",(function(t){e.setValue(t)}))},displayValue(e,t){e.childrenMap.colorInput.setValue(t)}};var CreateCheckbox=function(e,t){var i=new Checkbox(e,t);return e.add.existing(i),i};const CheckboxInputHandler={name:"CheckboxInput",accept:e=>e.hasOwnProperty("view")?"boolean"===e.view:"boolean"==typeof e.value,build(e,t){var i=e.scene;e.type="rexTweaker.CheckboxInput";var s=t.checkbox,n=CreateCheckbox(i,s),a=s.size;void 0!==a&&n.setSize(a,a);var r=void 0!==a?0:1;e.add(n,{proportion:0,expand:!1,fitRatio:r,key:"checkbox"}),n.on("valuechange",(function(t){e.setValue(t)}))},displayValue(e,t){e.childrenMap.checkbox.setValue(t)}};var CreateToggleSwitch=function(e,t){var i=new ToggleSwitch(e,t);return e.add.existing(i),i};const ToggleSwitchInputHandler={name:"ToggleSwitchInput",accept:e=>!!e.hasOwnProperty("view")&&"toggleSwitch"===e.view,build(e,t){var i=e.scene;e.type="rexTweaker.ToggleSwitchInput";var s=t.toggleSwitch,n=CreateToggleSwitch(i,s),a=s.size;void 0!==a&&n.setSize(a,a);var r=void 0!==a?0:1;e.addSpace().add(n,{proportion:0,expand:!1,fitRatio:r,key:"toggleSwitch"}),n.on("valuechange",(function(t){e.setValue(t)}))},displayValue(e,t){e.childrenMap.toggleSwitch.setValue(t)}};var CreateDropDownList=function(e,t){t=BuildListConfig(e,t);var i=new DropDownList(e,t);return e.add.existing(i),i},GetOptionIndex=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i].value===t)return i},GetOption=function(e,t){var i=GetOptionIndex(e,t);if(null!=i)return e[i]},SetOptions$1=function(e,t){e.childrenMap.list.setOptions(t)};const ListInputHandler={name:"ListInput",accept:e=>e.hasOwnProperty("view")?"list"===e.view:e.hasOwnProperty("options"),build(e,t){var i=e.scene;e.type="rexTweaker.ListInput";var s=CreateDropDownList(i,t.list);e.add(s,{proportion:1,expand:!0,key:"list"}),s.on("button.click",(function(t,i,s,n,a,r){e.setValue(s.value)}))},setup(e,t,i){(i||t.hasOwnProperty("options"))&&SetOptions$1(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,s=GetOption(i.options,t);i.resetDisplayContent(s).setMinSize(i.width,i.height).layout().setMinSize(0,0)}};var SetButtonsActiveStateByIndex=function(e,t){for(var i=0,s=e.length;i<s;i++){var n=e[i];n&&n.setActiveState(i===t)}};const GetValue$8=Phaser.Utils.Objects.GetValue;var SetOptions=function(e,t){var i=e.childrenMap.list;i.options=t;var s=e.scene,n=i.buttonConfig;i.clearButtons(!0);for(var a=0,r=t.length;a<r;a++){var o=t[a],l=CreateLabel(s,n).setActiveState(!1).resetDisplayContent({text:o.text});i.addButton(l)}};const ButtonsInputHandler={name:"ButtonsInput",accept:e=>!!e.hasOwnProperty("view")&&"buttons"===e.view,build(e,t){var i=e.scene;e.type="rexTweaker.ButtonsInput";var s=t.button?DeepClone(t.button):{},n=GetValue$8(s,"expand",!0);n&&(s.align="center"),delete s.expand;var a=CreateButtons(i,{expand:n});a.buttonConfig=s,e.add(a,{proportion:1,expand:!0,key:"list"}),a.on("button.click",(function(t,i,s,n){var r=a.options[i];r&&(e._selectedIndex=i,e.setValue(r.value),e._selectedIndex=void 0)}))},setup(e,t,i){(i||t.hasOwnProperty("options"))&&SetOptions(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,s=e._selectedIndex;void 0===s&&(s=GetOptionIndex(i.options,t)),SetButtonsActiveStateByIndex(i.childrenMap.buttons,s)}};var RegisterDefaultInputHandlers=function(){this.registerInputHandler(TextInputHandler).registerInputHandler(TextAreaInputHandler).registerInputHandler(NumberInputHandler).registerInputHandler(RangeInputHandler).registerInputHandler(IncDecInputHandler).registerInputHandler(ColorInputHandler).registerInputHandler(CheckboxInputHandler).registerInputHandler(ToggleSwitchInputHandler).registerInputHandler(ListInputHandler).registerInputHandler(ButtonsInputHandler)};class Tweaker extends(GenerateTweakerShellClass()){constructor(e,t){void 0===t&&(t={}),t.hasOwnProperty("style")&&(t.styles=t.style),void 0===t.styles&&(t.styles={}),t.background=t.styles.background||{},t.space=t.styles.space||{},super(e,t),this.type="rexTweaker",RegisterDefaultInputHandlers.call(this)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.inputHandlers=void 0)}}ObjectFactory.register("tweaker",(function(e){var t=new Tweaker(this.scene,e);return this.scene.add.existing(t),t})),SetValue(window,"RexPlugins.UI.Tweaker",Tweaker),ObjectFactory.register("click",(function(e,t){return new Button(e,t)})),SetValue(window,"RexPlugins.UI.Click",Button),ObjectFactory.register("clickOutside",(function(e,t){return new ClickOutside(e,t)})),SetValue(window,"RexPlugins.UI.ClickOutside",ClickOutside),ObjectFactory.register("inTouching",(function(e,t){return new InTouching(e,t)})),SetValue(window,"RexPlugins.UI.InTouching",InTouching),ObjectFactory.register("tap",(function(e,t){return IsGameObject(e)||(t=e,e=this.scene),new Tap(e,t)})),SetValue(window,"RexPlugins.UI.Tap",Tap),ObjectFactory.register("press",(function(e,t){return IsGameObject(e)||(t=e,e=this.scene),new Press(e,t)})),SetValue(window,"RexPlugins.UI.Press",Press),ObjectFactory.register("swipe",(function(e,t){return IsGameObject(e)||(t=e,e=this.scene),new Swipe(e,t)})),SetValue(window,"RexPlugins.UI.Swipe",Swipe),ObjectFactory.register("pan",(function(e,t){return IsGameObject(e)||(t=e,e=this.scene),new Pan(e,t)})),SetValue(window,"RexPlugins.UI.Pan",Pan),ObjectFactory.register("drag",(function(e,t){return new Drag(e,t)})),SetValue(window,"RexPlugins.UI.Drag",Drag),ObjectFactory.register("pinch",(function(e){return new Pinch(this.scene,e)})),SetValue(window,"RexPlugins.UI.Pinch",Pinch),ObjectFactory.register("rotate",(function(e){return new Rotate(this.scene,e)})),SetValue(window,"RexPlugins.UI.Rotate",Rotate);const IsPlainObject$3=Phaser.Utils.Objects.IsPlainObject,GetValue$7=Phaser.Utils.Objects.GetValue;var GetFrameUpdatingCallback=function(e,t,i){var s;if(void 0===e)e=i.texture.key,t=i.frame.name;else if(IsPlainObject$3(e)){var n=e;e=GetValue$7(n,"key",i.texture.key),t=GetValue$7(n,"frame",i.frame.name)}else"string"==typeof e||(s=e);return void 0===s&&(s=function(i){i.setTexture(e,t)}),s};const GetValue$6=Phaser.Utils.Objects.GetValue,GetAdvancedValue$1=Phaser.Utils.Objects.GetAdvancedValue,Linear=Phaser.Math.Linear;let Flip$1=class extends EaseValueTaskBase{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setDuration(GetAdvancedValue$1(e,"duration",500)),this.setEase(GetValue$6(e,"ease","Sine")),this.setOrientation(GetValue$6(e,"orientation",0)),this.setFrontFace(GetValue$6(e,"front",void 0)),this.setBackFace(GetValue$6(e,"back",void 0)),this.setFace(GetValue$6(e,"face",0)),this}setOrientation(e){return"string"==typeof e&&(e=ORIENTATIONMODE[e]),this.orientation=e,this}get face(){return this._face}set face(e){"string"==typeof e&&(e=FACEMODE[e]),this._face=e,0===e&&this.frontFaceCallback?this.frontFaceCallback(this.parent):1===e&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(e){return this.face=e,this}toggleFace(){var e=0===this.face?1:0;return this.setFace(e),this}setFrontFace(e,t){return this.frontFaceCallback=GetFrameUpdatingCallback(e,t,this.parent),this}setBackFace(e,t){return this.backFaceCallback=GetFrameUpdatingCallback(e,t,this.parent),this}start(){if(this.timer.isRunning)return this;var e=this.parent;return 0===this.orientation?this.scale0=e.scaleX:this.scale0=e.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(e){return this.isRunning||(void 0!==e&&this.setDuration(e),this.start()),this}updateTarget(e,t){t.justRestart&&this.toggleFace();var i=t.t;t.isOddIteration&&(i=1-i),i=this.easeFn(i);var s=Linear(this.scale0,0,i);0===this.orientation?e.scaleX=s:e.scaleY=s}};const ORIENTATIONMODE={x:0,horizontal:0,y:1,vertical:1},FACEMODE={front:0,back:1};ObjectFactory.register("flip",(function(e,t){return new Flip$1(e,t)})),SetValue(window,"RexPlugins.UI.Flip",Flip$1),ObjectFactory.register("shake",(function(e,t){return new ShakePosition(e,t)})),SetValue(window,"RexPlugins.UI.Shake",ShakePosition),ObjectFactory.register("touchEventStop",(function(e,t){return new TouchEventStop(e,t)})),SetValue(window,"RexPlugins.UI.TouchEventStop",TouchEventStop),ObjectFactory.register("perspective",(function(e,t){return new ContainerPerspective(e,t)})),SetValue(window,"RexPlugins.UI.Perspective",ContainerPerspective);const RotateAround=Phaser.Math.RotateAround;var LocalXYToWorldXY=function(e,t,i){var s=e.width/2,n=e.height/2;return out.x=t-s,out.y=i-n,RotateAround(out,0,0,e.rotation),out.x*=e.scaleX,out.y*=e.scaleY,out.x+=e.x,out.y+=e.y,out},WorldXYToLocalXY=function(e,t,i){var s=e.width/2,n=e.height/2;return out.x=t-e.x,out.y=i-e.y,out.x/=e.scaleX,out.y/=e.scaleY,RotateAround(out,0,0,-e.rotation),out.x+=s,out.y+=n,out},out={x:0,y:0};class ControlPoint{constructor(e,t){this.parent=e,this.vertex=t,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(e,t){var i=this.parent,s=i.height,n=e/s-i.frame.cutWidth/s/2,a=t/s-i.frame.cutHeight/s/2,r=this.vertex;return r.x=n,r.y=-a,i.forceUpdate(),this}get localX(){return this._localX}set localX(e){this.setLocalXY(e,this._localY)}get localY(){return this._localY}set localY(e){this.setLocalXY(this._localX,e)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(e,t){return this._localXOrigin=e,this._localYOrigin=t,this._localX=e,this._localY=t,this}setLocalXY(e,t,i){return this._localX===e&&this._localY===t||(this._localX=e,this._localY=t,i||this.updateVertexPosition(e,t)),this}setWorldXY(e,t){if(this._worldX===e&&this._worldY===t)return this;var i=WorldXYToLocalXY(this.parent,e,t);return this.setLocalXY(i.x,i.y),this}setPosition(e,t){return this.setWorldXY(e,t),this}getWorldXY(){return LocalXYToWorldXY(this.parent,this._localX,this._localY)}get x(){return LocalXYToWorldXY(this.parent,this._localX,this._localY).x}set x(e){this.setWorldXY(e,this.y)}get y(){return LocalXYToWorldXY(this.parent,this._localX,this._localY).y}set y(e){this.setWorldXY(this.x,e)}}const Vertex=Phaser.Geom.Mesh.Vertex,Face=Phaser.Geom.Mesh.Face;var InitFaces=function(e){for(var t,i=e.isNinePointMode,s=i?9:4,n=e.vertices,a=e.faces,r=e.controlPoints,o=0;o<s;o++){var l=new Vertex;n.push(l),r.push(new ControlPoint(e,l))}o=0;for(var h=(t=i?NinePointsIndices:e.fourPointsModeRTL?FourPointsIndicesRTL:FourPointsIndices).length;o<h;o+=3){var d=n[t[o+0]],c=n[t[o+1]],u=n[t[o+2]];a.push(new Face(d,c,u))}i?(e.topLeft=r[0],e.topCenter=r[1],e.topRight=r[2],e.centerLeft=r[3],e.center=r[4],e.centerRight=r[5],e.bottomLeft=r[6],e.bottomCenter=r[7],e.bottomRight=r[8]):(e.topLeft=r[0],e.topRight=r[1],e.bottomLeft=r[2],e.bottomRight=r[3])};const FourPointsIndices=[0,2,3,0,3,1],FourPointsIndicesRTL=[1,3,2,1,2,0],NinePointsIndices=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var GetPointPosition=function(e){var t,i=e.height,s=e.width;if(e.isNinePointMode){var n=(0+s)/2,a=(0+i)/2;t=[0,0,n,0,s,0,0,a,n,a,s,a,0,i,n,i,s,i]}else t=[0,0,s,0,0,i,s,i];return t};const IsPlainObject$2=Phaser.Utils.Objects.IsPlainObject,GetValue$5=Phaser.Utils.Objects.GetValue;let Image$1=class extends MeshBase{constructor(e,t,i,s,n,a){IsPlainObject$2(t)&&(t=GetValue$5(a=t,"x",0),i=GetValue$5(a,"y",0),s=GetValue$5(a,"key",null),n=GetValue$5(a,"frame",null)),super(e,t,i,s,n),this.type="rexQuadImage",this.isNinePointMode=GetValue$5(a,"ninePointMode",!1),this.fourPointsModeRTL=GetValue$5(a,"rtl",!1),this.controlPoints=[],InitFaces(this),this.hideCCW=!1,this.syncSize()}destroy(e){if(this.scene&&!this.ignoreDestroy){super.destroy(e);for(var t=0,i=this.controlPoints.length;t<i;t++)this.controlPoints[t].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var e=GetPointPosition(this),t=this.width,i=this.height,s=this.frame.cutWidth/i/2,n=this.frame.cutHeight/i/2,a=this.frame.u0,r=this.frame.u1,o=this.frame.v0,l=r-a,h=this.frame.v1-o,d=this.controlPoints,c=0,u=e.length;c<u;c+=2){var p=e[c+0],g=e[c+1],m=c/2,f=p/i-s,v=g/i-n,b=a+l*(p/t),y=o+h*(g/i);this.vertices[m].set(f,-v,0).setUVs(b,y),d[m].resetLocalXY(p,g)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var Skew=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);for(var s=.5*e.width,n=.5*e.height,a=Math.tan(t)*n,r=Math.tan(i)*s,o=e.controlPoints,l=0,h=o.length;l<h;l++){var d=o[l],c=d.localXOrigin,u=d.localYOrigin;d.localX=c+(u>n?a:-a),d.localY=u+(c>s?r:-r)}};const IsPlainObject$1=Phaser.Utils.Objects.IsPlainObject,GetValue$4=Phaser.Utils.Objects.GetValue,DegToRad=Phaser.Math.DegToRad,RadToDeg=Phaser.Math.RadToDeg;class SkewImage extends Image$1{constructor(e,t,i,s,n){if(IsPlainObject$1(t)){var a=t;t=GetValue$4(a,"x",0),i=GetValue$4(a,"y",0),s=GetValue$4(a,"key",null),n=GetValue$4(a,"frame",null)}super(e,t,i,s,n),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(e){this._skewX=e,Skew(this,this._skewX,this._skewY)}get skewXDeg(){return RadToDeg(this._skewX)}set skewXDeg(e){this.skewX=DegToRad(e)}get skewY(){return this._skewY}set skewY(e){this._skewY=e,Skew(this,this._skewX,this._skewY)}get skewYDeg(){return RadToDeg(this._skewY)}set skewYDeg(e){this.skewY=DegToRad(e)}setSkewX(e){return this.skewX=e,this}setSkewY(e){return this.skewY=e,this}setSkew(e,t){return void 0===t&&(t=e),this.skewX=e,this.skewY=t,this}setSkewXDeg(e){return this.skewXDeg=e,this}setSkewYDeg(e){return this.skewYDeg=e,this}setSkewDeg(e,t){return void 0===t&&(t=e),this.skewXDeg=e,this.skewYDeg=t,this}}const IsPlainObject=Phaser.Utils.Objects.IsPlainObject,GetValue$3=Phaser.Utils.Objects.GetValue;class SkewRenderTexture extends SkewImage{constructor(e,t,i,s,n){if(IsPlainObject(t)){var a=t;t=GetValue$3(a,"x",0),i=GetValue$3(a,"y",0),s=GetValue$3(a,"width",32),n=GetValue$3(a,"height",32)}super(e,t,i,CreateDynamicTexture(e,s,n),null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.rt.destroy(),this.rt=null)}}class ContainerSkew extends(MeshRenderTextureBase(SkewRenderTexture)){get skewState(){return this.isRunning}}ObjectFactory.register("skew",(function(e,t){return new ContainerSkew(e,t)})),SetValue(window,"RexPlugins.UI.Skew",ContainerSkew),ObjectFactory.register("anchor",(function(e,t){return new Anchor(e,t)})),SetValue(window,"RexPlugins.UI.Anchor",Anchor),ObjectFactory.register("textTyping",(function(e,t){return new TextTyping(e,t)})),SetValue(window,"RexPlugins.UI.TextTyping",TextTyping),ObjectFactory.register("textPage",(function(e,t){return new TextPage(e,t)})),SetValue(window,"RexPlugins.UI.TextPage",TextPage);var LastOpenedEditor=void 0,SetLastOpenedEditor=function(e){e!==LastOpenedEditor&&(void 0!==LastOpenedEditor&&LastOpenedEditor.close(),LastOpenedEditor=e)},CloseLastOpenEditor=function(e){e===LastOpenedEditor&&(LastOpenedEditor=void 0)};const GetValue$2=Phaser.Utils.Objects.GetValue,Clone=Phaser.Utils.Objects.Clone;var CreateInputText=function(e,t){void 0===t&&(t={}),t=Clone(t);var i=e.scene,s=e.style,n=GetValue$2(t,"backgroundColor",s.backgroundColor);null===n&&(n="transparent"),t.text=GetValue$2(t,"text",e.text),t.fontFamily=GetValue$2(t,"fontFamily",s.fontFamily),t.fontSize=GetValue$2(t,"fontSize",s.fontSize),t.color=GetValue$2(t,"color",s.color),t.backgroundColor=n,t.direction=GetValue$2(t,"rtl",s.rtl)?"rtl":"ltr",t.align=GetValue$2(t,"align",GetHAlign(s)),"rtl"===t.direction&&IsTextGameObject(e)&&(t.align="right");var a=e.padding;a.left>0&&(t.paddingLeft=`${a.left}px`),a.right>0&&(t.paddingRight=`${a.right}px`),s.backgroundCornerRadius&&(t.borderRadius=GetValue$2(t,"borderRadius",`${s.backgroundCornerRadius}px`));var r=new InputText(i,e.x,e.y,GetValue$2(t,"width",e.width),GetValue$2(t,"height",e.height),t);r.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var o=e.parentContainer;return o?o.add(r):i.add.existing(r),r},GetHAlign=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"},NextTick=function(e,t,i){return e.time.delayedCall(0,t,[],i)};const GetValue$1=Phaser.Utils.Objects.GetValue,Merge=Phaser.Utils.Objects.Merge;var Open=function(e,t){void 0===e&&(e={}),e=Merge(e,this.openConfig),SetLastOpenedEditor(this),IsFunction(e)&&(t=e,e=void 0);var i=GetValue$1(e,"inputType",void 0);void 0===i&&(i=GetValue$1(e,"type","text")),void 0===t&&(t=GetValue$1(e,"onClose",void 0));var s=GetValue$1(e,"onCreate",void 0),n=GetValue$1(e,"onOpen",void 0),a=GetValue$1(e,"onTextChanged",void 0);return this.inputText=CreateInputText(this.parent,e),s&&s(this.parent,this.inputText),this.inputText.on("textchange",(function(e){var t=e.text;a?a(this.parent,t):this.parent.text=t}),this).setFocus(),this.parent.setVisible(!1),this.onClose=t,GetValue$1(e,"enterClose","textarea"!==i)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=NextTick(this.scene,(function(){this.scene.input.once("pointerdown",this.close,this),n&&n(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)}),this),this},Close=function(){return CloseLastOpenEditor(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},Methods={open:Open,close:Close};const GetValue=Phaser.Utils.Objects.GetValue;class TextEdit extends ComponentBase{constructor(e,t){super(e),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(t),GetValue(t,"clickEnable",!0)&&e.on("pointerdown",(function(){this.open()}),this).setInteractive()}shutdown(e){this.isShutdown||(this.close(),super.shutdown(e))}setOpenConfig(e){return void 0===e&&(e={}),this.openConfig=e,this}get isOpened(){return void 0!==this.inputText}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(TextEdit.prototype,Methods);var Edit=function(e,t,i){return e._edit||(e._edit=new TextEdit(e,{clickEnable:!1})),e._edit.open(t,i),e._edit};ObjectFactory.register("textEdit",(function(e,t){return new TextEdit(e,t)})),SetValue(window,"RexPlugins.UI.TextEdit",TextEdit),ObjectFactory.register("layerManager",(function(e){return new LayerManager(this.scene,e)})),SetValue(window,"RexPlugins.UI.LayerManager",LayerManager);class UIPlugin extends Phaser.Plugins.ScenePlugin{constructor(e,t){super(e,t),this.add=new ObjectFactory(e)}boot(){this.scene.events.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(e,t,i,s){return!!e.visible&&IsPointerInBounds(e,t,i,s)}get viewport(){return GetViewport(this.scene,this.scene.cameras.main,!0)}}var methods={getParentSizer:GetParent$1,getTopmostSizer:GetTopmostParent$1,removeFromParent:RemoveFromParent,hide:Hide,show:Show,isShown:IsShown,confirmAction:ConfirmAction,edit:Edit,wrapExpandText:WrapExpandText,fontSizeExpandText:FontSizeExpandText,fontSizeResize:FontSizeFit,setFontSizeToFitWidth:FontSizeFit,waitEvent:WaitEvent,waitComplete:WaitComplete,delayPromise:Delay,setChildrenInteractive:SetChildrenInteractive$1,fadeIn:FadeIn,fadeOutDestroy:FadeOutDestroy,easeMoveTo:EaseMoveTo,easeMoveFrom:EaseMoveFrom,modal:Modal$2,modalPromise:ModalPromise,modalClose:ModalClose,requestDrag:RequestDrag,openFileChooser:Open$1};Object.assign(UIPlugin.prototype,methods);class StringFormatter{static shrinkText(e,t,i,s){if(e.displayWidth>i){let n=i/e.displayWidth,a=Math.max(t*n,s);console.log("shrinkText",t,e.displayWidth,a),e.setFontSize(a)}else e.setFontSize(t)}}const messageBgImg=e=>{switch(e){case"short":return"tips_short.png";case"long":default:return"tips_long.png";case"longest":return"tips_longest.png"}};class MessagePopup extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"onCloseTips",(()=>{}));let n=this;const{width:a,height:r}=e.cameras.main,o=e.add.rectangle(0,0,a,r,0).setInteractive().setOrigin(0,0).setDepth(99999);o.setAlpha(.7);const l=e.add.image(a/2,r/2,"plant","tips_long.png"),h=GeneralRtl.rtlText(e,a/2,r/2,"",{fontSize:"26px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1",align:"center"}).setOrigin(.5);this.add([o,l,h]),this.setDepth(99999),e.children.bringToTop(this),o.on("pointerdown",(()=>{this.hide()})),this.setVisible(!1),this.show=(t,i=3e3,s="long")=>{console.log("message: ",e),e.children.bringToTop(this),h.setText(t),h.setFontSize(26),h.displayWidth>o.displayWidth-350?StringFormatter.shrinkText(h,26,o.displayWidth-350,18):h.setFontSize(26);const n=messageBgImg(s);l.setFrame(n),this.alpha=0,e.tweens.add({targets:this,alpha:1,duration:500,ease:"Power2",onStart:()=>{this.setVisible(!0)}}),i>0&&(this.autoHideTimer=e.time.delayedCall(i,(()=>{this.hide()})))},this.hide=()=>{this.autoHideTimer&&(this.autoHideTimer.destroy(),this.autoHideTimer=null),e.tweens.add({targets:this,alpha:0,duration:500,ease:"Power2",onComplete:()=>{this.setVisible(!1),n.onCloseTips()}})},this.onResize=(e,t)=>{null==o||o.setDisplaySize(e,t),l.setPosition(e/2,t/2),h.setPosition(e/2,t/2)}}}class AudioSetUp extends Component{constructor(e,t,i,s){super(e,t,i,s),this.gameBgAudio=e.sound.add("gameBgAudio",{loop:!0});let n=e.sound.add("plantAudio"),a=e.sound.add("shovelAudio"),r=e.sound.add("kettleAudio"),o=e.sound.add("harvestAudio"),l=e.sound.add("buildingPlace"),h=e.sound.add("currencyAudio"),d=e.sound.add("plantRuleAudio"),c=e.sound.add("goHomeAudio"),u=e.sound.add("toolClickAudio"),p=e.sound.add("openShovelAudio"),g=e.sound.add("plantCloseAudio"),m=e.sound.add("bagTabAudio"),f=e.sound.add("bagStoreAudio"),v=e.sound.add("bagCloseAudio"),b=e.sound.add("bagItemAudio"),y=e.sound.add("stroeNumAudio"),C=e.sound.add("rewardAudio"),x=e.sound.add("rewardCloseAudio");this.play=t=>{if(e.game.GameData.getUpInfo.sound)try{switch(t){case"plantAudio":n.play();break;case"shovelAudio":a.play();break;case"kettleAudio":r.play();break;case"harvestAudio":o.play();break;case"buildingPlace":l.play();break;case"currencyAudio":h.play();break;case"plantRuleAudio":d.play();break;case"goHomeAudio":c.play();break;case"toolClickAudio":u.play();break;case"openShovelAudio":p.play();break;case"plantCloseAudio":g.play();break;case"bagTabAudio":m.play();break;case"bagStoreAudio":f.play();break;case"bagCloseAudio":v.play();break;case"bagItemAudio":b.play();break;case"stroeNumAudio":y.play();break;case"rewardAudio":C.play();break;case"rewardCloseAudio":x.play()}}catch(i){console.log("",i)}},this.gameAudioType=e=>{e?this.gameBgAudio.play():this.gameBgAudio.stop()}}}function isMobile(e){return!e.device.os.desktop}function isVueMobile(){return/Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent)}class Login extends phaserExports.Scene{constructor(){super("Login"),__publicField(this,"userLogin",{bg:null,text:null,setVisible(e){var t,i;null==(t=this.bg)||t.setVisible(e),null==(i=this.text)||i.setVisible(e)}}),__publicField(this,"userInfo",{bg:null,text:null,setVisible(e){var t,i;null==(t=this.bg)||t.setVisible(e),null==(i=this.text)||i.setVisible(e)}})}init(){}preload(){this.game.GameData=new GameData,this.game.GameApi=new GameApi(this.game),this.game.AudioSetUp=new AudioSetUp(this)}create(){this.scale.on("orientationchange",(e=>{Login.logScreenInfo(),console.log(":"+Login.getBrowserType()),this.scale.refresh()})),this.cameras.main.width<this.cameras.main.height&&inGame()&&this.scale.refresh(),this.scale.on("resize",(function(e){var t,i,n;let a=e.width,o=e.height,l=o/2+310;if(window.visualViewport&&!inGame()){const e=window.visualViewport;e&&e.height<window.screen.height&&(l-=200)}this.cameras.resize(a,o),this.bg.setPosition(a/2,o/2);const h=a/this.bg.width,d=o/this.bg.height,c=Math.max(h,d);this.bg.setScale(c),null==(t=this.title)||t.setPosition(120,160),s&&s.setPosition(a/2+600,60),null==(i=this.titleLine)||i.setPosition(120,this.title.y+this.title.displayHeight+10),r.setPosition(a/2,l),this.startGameBtnText.setPosition(a/2,l),this.tips.setPosition(120,this.titleLine.y+this.titleLine.displayHeight+10),this.userInfo.bg.setPosition(-15,20),this.userInfo.text.setPosition(this.userInfo.bg.x+this.userInfo.bg.displayWidth/2,60),this.userLogin.bg.setPosition(123,50),this.userLogin.text.setPosition(123,50),null==(n=this.game.Tips)||n.onResize(a,o)}),this),this.game.Tips=new MessagePopup(this),this.bg=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"loading-background");const e=this.cameras.main.width/this.bg.width,t=this.cameras.main.height/this.bg.height,i=Math.max(e,t);this.bg.setScale(i),this.title=this.add.text(120,160,instance.t("Event_5_C2_Pandora_06"),{fontFamily:"BeaufortforLOL-Bold",fontSize:44,color:"#F9F19E",wordWrap:{width:400,useAdvancedWrap:!0}}).setOrigin(0,0),this.titleLine=this.add.image(120,this.title.y+this.title.displayHeight+10,"loading-atlas","line_title.png").setOrigin(0,0),this.tips=GeneralRtl.rtlText(this,120,this.titleLine.y+this.titleLine.displayHeight+10,instance.t("Event_5_C2_Pandora_08"),{fontFamily:"BeaufortforLOL-Bold",fontSize:20,color:"#ffffff",wordWrap:{width:400,useAdvancedWrap:!0},lineSpacing:4}).setOrigin(0,0);let s=null;inGame()&&(s=this.add.image(this.cameras.main.width/2+600,60,"loading-atlas","btn_close5.png"),s.setDepth(11),s.setInteractive({hitArea:new Phaser.Geom.Rectangle(-40,-40,90,90),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{var e;null==(e=this.game.AudioSetUp)||e.play("bagCloseAudio"),closeWebview()}))),this.game.GameData.loginInfo.isLogin&&this.getSetting();const n=window.visualViewport;let a=this.cameras.main.height/2+310;if(n&&!inGame()){const e=window.visualViewport;e&&e.height<window.screen.height&&(a-=200,console.log(" "))}const r=this.add.image(this.cameras.main.width/2,a,"loading-atlas","btn_eater now2.png").setOrigin(.5,.5);this.startGameBtnText=this.add.text(this.cameras.main.width/2,a,instance.t("Event_5_C2_Pandora_07"),{fontFamily:"BeaufortforLOL-Bold",fontSize:30,color:"#6132a1"}).setOrigin(.5,.5),r.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{var e,t,i,s;null==(e=this.game.AudioSetUp)||e.play("bagStoreAudio"),isiOS()&&this.game.GameData.loginInfo.isLogin&&((null==(t=this.game.GameData.getUpInfo)?void 0:t.audio)?null==(i=this.game.AudioSetUp)||i.gameAudioType(!0):null==(s=this.game.AudioSetUp)||s.gameAudioType(!1)),this.game.GameData.loginInfo.isLogin?this.scene.start("Preloader"):inGame()||(location.href=GameConfig.Xsso.LoginURL)})),this.userLogin.bg=this.add.image(123,50,"loading-atlas","btn_cancel_frame.png").setInteractive().setVisible(!1).on("pointerdown",(()=>{location.href=GameConfig.Xsso.LoginURL})),this.userLogin.text=this.add.text(123,50,instance.t("Event_5_C2_Pandora_13"),{fontFamily:"BeaufortforLOL-Bold",fontSize:24,color:"#fff"}).setOrigin(.5,.5).setVisible(!1),this.userInfo.bg=this.add.image(-15,20,"loading-atlas","frame_game player2.png").setOrigin(0,0).setVisible(!1).setInteractive({useHandCursor:!1}),this.userInfo.text=this.add.text(this.userInfo.bg.x+this.userInfo.bg.displayWidth/2,60,"PLAYER ID HERE",{fontFamily:"BeaufortforLOL-Bold",fontSize:24,color:"#fff"}).setOrigin(.5,0).setVisible(!1),this.game.events.on("pause",(()=>{var e,t;(null==(e=this.game.GameData.getUpInfo)?void 0:e.audio)&&(null==(t=this.game.AudioSetUp)||t.gameBgAudio.pause())})),this.game.events.on("resume",(()=>{var e,t;(null==(e=this.game.GameData.getUpInfo)?void 0:e.audio)&&(null==(t=this.game.AudioSetUp)||t.gameBgAudio.resume())})),this.input.on("pointerdown",(e=>{e.event&&e.event.isTrusted&&(console.log("login onClick"),setTimeout((()=>{window.screen.width>window.screen.height&&!inGame()&&isMobile(this.sys.game)&&toggleFullScreen()}),100))}));let o="";if(inGame()){let e=getUrlParams();o=e.sCountry;let t="";if(e.sNickName.includes("%"))try{t=decodeURIComponent(e.sNickName)}catch(l){console.log("sNickName ",l,e.sNickName),t=e.sNickName}else t=e.sNickName;let i="";if(e.sRiotTag.includes("%"))try{i=decodeURIComponent(e.sRiotTag)}catch(l){console.log("sRiotTag ",l,e.sRiotTag),i=e.sRiotTag}else i=e.sRiotTag;if(this.game.GameData.loginInfo.nickName=(t??"")+"#"+(i??""),!o)return;this.game.GameData.loginInfo.region=window.WRLib.getRegionCodeByISO2(o)}else{let e=api.get("__Secure-id_hint");if(!e)return void this.onUnLoginState();let t=JSON.parse(decodeURIComponent(e));if(console.log("jwtInfo: ",t),!t.country)return void this.onUnLoginState();o=t.country,this.game.GameData.loginInfo.nickName=t.acct.game_name+"#"+t.acct.tag_line,this.game.GameData.loginInfo.region=window.WRLib.getRegionCode(o),console.log("",this.game.GameData.loginInfo.region,o),this.getCreatedAt(t.acct.created_at,this.game.GameData.loginInfo.region)}this.game.GameApi.checkLogin().then((e=>{if((0===e.iRet||"0"===e.iRet)&&e.jData.isLogin)return e.jData.userName&&(this.game.GameData.loginInfo.nickName=e.jData.userName),e.jData.userHead&&(this.game.GameData.loginInfo.userHead=e.jData.userHead),this.getSetting(),void this.onLoginState();this.onUnLoginState()}))}getSetting(){this.game.GameApi.getSetting().then((e=>{var t,i,s,n,a,r;const o=e.jData,l=null==(i=e.jData)?void 0:i.lanConfig[null==(t=e.jData)?void 0:t.iLanguage].key;o.languageKey=l,this.game.GameData.settingInfo=o,this.game.GameData.getUpInfo={audio:1==o.iIsOpenBgMusic,sound:1==o.iIsOpenBgMusicEffect,language:(null==(n=e.jData)?void 0:n.lanConfig[null==(s=e.jData)?void 0:s.iLanguage].key)||"en_US"},isiOS()||(1==o.iIsOpenBgMusic?null==(a=this.game.AudioSetUp)||a.gameAudioType(!0):null==(r=this.game.AudioSetUp)||r.gameAudioType(!1)),inGame()||l!=localStorage.getItem("languageKey")&&(localStorage.setItem("languageKey",l),instance.changeLanguage(l).then((e=>{var t,i,s,n,a,r;this.game.events.emit("langusge_change"),null==(t=this.title)||t.setText(instance.t("Event_5_C2_Pandora_06")),null==(i=this.startGameBtnText)||i.setText(instance.t("Event_5_C2_Pandora_07")),null==(s=this.titleLine)||s.setPosition(50,this.title.y+this.title.displayHeight+10),null==(n=this.userLogin.text)||n.setText(instance.t("Event_5_C2_Pandora_13")),"ar_AE"==localStorage.getItem("languageKey")?(this.tips.destroy(),this.tips=null,this.tips=GeneralRtl.rtlText(this,80,this.titleLine.y+this.titleLine.displayHeight+10,instance.t("Event_5_C2_Pandora_08"),{fontFamily:"BeaufortforLOL-Bold",fontSize:20,color:"#ffffff",wordWrap:{width:400,useAdvancedWrap:!0},lineSpacing:4}).setOrigin(0,0)):(null==(a=this.tips)||a.setText(instance.t("Event_5_C2_Pandora_08")),null==(r=this.tips)||r.setPosition(80,this.titleLine.y+this.titleLine.displayHeight+10))})))})),this.game.GameApi.getHouseShow().then((e=>{var t;console.log("",e),this.game.GameData.buildingList=null==(t=null==e?void 0:e.jData)?void 0:t.homeList})),this.game.GameApi.getAnnoucement().then((e=>{var t;console.log("",e),this.game.GameData.annoucementInfo=null==(t=null==e?void 0:e.jData)?void 0:t.list})),this.game.GameApi.getGuideConfig().then((e=>{console.log("",e),this.game.GameData.guideConfig=null==e?void 0:e.jData}))}getCreatedAt(e,t){this.game.GameApi.getCreatedAt(e,t)}onLoginState(){this.game.GameData.loginInfo.isLogin=!0,this.userInfo.text.setText(this.game.GameData.loginInfo.nickName),this.userLogin.setVisible(!1),this.userInfo.setVisible(!0)}onUnLoginState(){this.game.GameData.loginInfo.isLogin=!1,this.userLogin.setVisible(!0),this.userInfo.setVisible(!1)}static getBrowserType(){const e=navigator.userAgent;return e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Edg")?"Edge":"Unknown"}static logScreenInfo(){const e=window.visualViewport,t=document.querySelector("canvas");if(console.log("--- SCREEN / VIEWPORT INFO ---"),console.log("screen (CSS px):",window.screen.width,window.screen.height),console.log("screen avail (CSS px):",window.screen.availWidth,window.screen.availHeight),console.log("devicePixelRatio:",window.devicePixelRatio),console.log("screen (physical px, approx):",window.screen.width*window.devicePixelRatio,window.screen.height*window.devicePixelRatio),console.log("window.inner (CSS px):",window.innerWidth,window.innerHeight),console.log("window.outer (may be unreliable on mobile):",window.outerWidth,window.outerHeight),console.log("documentElement.client (CSS px):",document.documentElement.clientWidth,document.documentElement.clientHeight),e?console.log("visualViewport (CSS px):",e.width,e.height,"offsetTop:",e.offsetTop,"offsetLeft:",e.offsetLeft):console.log("visualViewport: not supported"),t){const e=t.getBoundingClientRect();console.log("canvas.getBoundingClientRect (CSS px):",e.width,e.height),console.log("canvas.width/height (drawing buffer px):",t.width,t.height)}if(e){const t=Math.max(0,window.screen.height-(e.height+(e.offsetTop||0)));console.log("estimated browser chrome (top+bottom) height (CSS px):",t)}console.log("--- END ---")}}function Factory(e,t,i,s,n){var a=new InputText(this.scene,e,t,i,s,n);return this.scene.add.existing(a),a}const GetAdvancedValue=Phaser.Utils.Objects.GetAdvancedValue,BuildGameObject=Phaser.GameObjects.BuildGameObject;function Creator(e,t){void 0===e&&(e={}),void 0!==t&&(e.add=t);var i=GetAdvancedValue(e,"width",void 0),s=GetAdvancedValue(e,"height",void 0),n=new InputText(this.scene,0,0,i,s,e);return BuildGameObject(this.scene,n,e),n}class InputTextPlugin extends Phaser.Plugins.BasePlugin{constructor(e){super(e),e.registerGameObject("rexInputText",Factory,Creator)}start(){this.game.events.on("destroy",this.destroy,this)}}if(SetValue(window,"RexPlugins.GameObjects.InputText",InputText),"undefined"!=typeof window&&window.Phaser){let e=window.require;window.require=t=>e?e(t):"Phaser"===t?window.Phaser:void 0}const SPINE_SKELETON_FILE_CACHE_KEY="esotericsoftware.spine.skeletonFile.cache",SPINE_ATLAS_CACHE_KEY="esotericsoftware.spine.atlas.cache",SPINE_SKELETON_DATA_FILE_TYPE="spineSkeletonData",SPINE_ATLAS_FILE_TYPE="spineAtlasData",SPINE_GAME_OBJECT_TYPE="spine";class StringSet{constructor(){__publicField(this,"entries",{}),__publicField(this,"size",0)}add(e){let t=this.entries[e];return this.entries[e]=!0,!t&&(this.size++,!0)}addAll(e){let t=this.size;for(var i=0,s=e.length;i<s;i++)this.add(e[i]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}}const _Color=class e{constructor(e=0,t=0,i=0,s=0){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=e,this.g=t,this.b=i,this.a=s}set(e,t,i,s){return this.r=e,this.g=t,this.b=i,this.a=s,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e="#"==e.charAt(0)?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=8!=e.length?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,i,s){return this.r+=e,this.g+=t,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((4278190080&t)>>>24)/255,e.g=((16711680&t)>>>16)/255,e.b=((65280&t)>>>8)/255,e.a=(255&t)/255}static rgb888ToColor(e,t){e.r=((16711680&t)>>>16)/255,e.g=((65280&t)>>>8)/255,e.b=(255&t)/255}toRgb888(){const e=e=>("0"+(255*e).toString(16)).slice(-2);return Number("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(t,i=new e){return i.setFromString(t)}};__publicField(_Color,"WHITE",new _Color(1,1,1,1)),__publicField(_Color,"RED",new _Color(1,0,0,1)),__publicField(_Color,"GREEN",new _Color(0,1,0,1)),__publicField(_Color,"BLUE",new _Color(0,0,1,1)),__publicField(_Color,"MAGENTA",new _Color(1,0,1,1));let Color=_Color;const _MathUtils=class e{static clamp(e,t,i){return e<t?t:e>i?i:e}static cosDeg(t){return Math.cos(t*e.degRad)}static sinDeg(t){return Math.sin(t*e.degRad)}static atan2Deg(t,i){return Math.atan2(t,i)*e.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}static randomTriangular(t,i){return e.randomTriangularWith(t,i,.5*(t+i))}static randomTriangularWith(e,t,i){let s=Math.random(),n=t-e;return s<=(i-e)/n?e+Math.sqrt(s*n*(i-e)):t-Math.sqrt((1-s)*n*(t-i))}static isPowerOfTwo(e){return e&&!(e&e-1)}};__publicField(_MathUtils,"PI",3.1415927),__publicField(_MathUtils,"PI2",2*_MathUtils.PI),__publicField(_MathUtils,"invPI2",1/_MathUtils.PI2),__publicField(_MathUtils,"radiansToDegrees",180/_MathUtils.PI),__publicField(_MathUtils,"radDeg",_MathUtils.radiansToDegrees),__publicField(_MathUtils,"degreesToRadians",_MathUtils.PI/180),__publicField(_MathUtils,"degRad",_MathUtils.degreesToRadians);let MathUtils=_MathUtils;const _Utils=class e{static arrayCopy(e,t,i,s,n){for(let a=t,r=s;a<t+n;a++,r++)i[r]=e[a]}static arrayFill(e,t,i,s){for(let n=t;n<i;n++)e[n]=s}static setArraySize(e,t,i=0){let s=e.length;if(s==t)return e;if(e.length=t,s<t)for(let n=s;n<t;n++)e[n]=i;return e}static ensureArrayCapacity(t,i,s=0){return t.length>=i?t:e.setArraySize(t,i,s)}static newArray(e,t){let i=new Array(e);for(let s=0;s<e;s++)i[s]=t;return i}static newFloatArray(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return e.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return e.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(e,t){}static contains(e,t,i=!0){for(var s=0;s<e.length;s++)if(e[s]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}};__publicField(_Utils,"SUPPORTS_TYPED_ARRAYS","undefined"!=typeof Float32Array);let Utils=_Utils;class Pool{constructor(e){__publicField(this,"items",new Array),__publicField(this,"instantiator"),this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}}class Vector2{constructor(e=0,t=0){__publicField(this,"x"),__publicField(this,"y"),this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}length(){let e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}normalize(){let e=this.length();return 0!=e&&(this.x/=e,this.y/=e),this}}class Attachment{constructor(e){if(__publicField(this,"name"),!e)throw new Error("name cannot be null.");this.name=e}}const _VertexAttachment=class e extends Attachment{constructor(t){super(t),__publicField(this,"id",e.nextID++),__publicField(this,"bones",null),__publicField(this,"vertices",[]),__publicField(this,"worldVerticesLength",0),__publicField(this,"timelineAttachment",this)}computeWorldVertices(e,t,i,s,n,a){i=n+(i>>1)*a;let r=e.bone.skeleton,o=e.deform,l=this.vertices,h=this.bones;if(!h){o.length>0&&(l=o);let r=e.bone,h=r.worldX,d=r.worldY,c=r.a,u=r.b,p=r.c,g=r.d;for(let e=t,o=n;o<i;e+=2,o+=a){let t=l[e],i=l[e+1];s[o]=t*c+i*u+h,s[o+1]=t*p+i*g+d}return}let d=0,c=0;for(let p=0;p<t;p+=2){let e=h[d];d+=e+1,c+=e}let u=r.bones;if(0==o.length)for(let p=n,g=3*c;p<i;p+=a){let e=0,t=0,i=h[d++];for(i+=d;d<i;d++,g+=3){let i=u[h[d]],s=l[g],n=l[g+1],a=l[g+2];e+=(s*i.a+n*i.b+i.worldX)*a,t+=(s*i.c+n*i.d+i.worldY)*a}s[p]=e,s[p+1]=t}else{let e=o;for(let t=n,r=3*c,o=c<<1;t<i;t+=a){let i=0,n=0,a=h[d++];for(a+=d;d<a;d++,r+=3,o+=2){let t=u[h[d]],s=l[r]+e[o],a=l[r+1]+e[o+1],c=l[r+2];i+=(s*t.a+a*t.b+t.worldX)*c,n+=(s*t.c+a*t.d+t.worldY)*c}s[t]=i,s[t+1]=n}}}copyTo(e){this.bones?(e.bones=new Array(this.bones.length),Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=Utils.newFloatArray(this.vertices.length),Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment}};__publicField(_VertexAttachment,"nextID",0);let VertexAttachment=_VertexAttachment;const _Sequence=class e{constructor(t){__publicField(this,"id",e.nextID()),__publicField(this,"regions"),__publicField(this,"start",0),__publicField(this,"digits",0),__publicField(this,"setupIndex",0),this.regions=new Array(t)}copy(){let t=new e(this.regions.length);return Utils.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(e,t){let i=e.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let s=this.regions[i];t.region!=s&&(t.region=s,t.updateRegion())}getPath(e,t){let i=e,s=(this.start+t).toString();for(let n=this.digits-s.length;n>0;n--)i+="0";return i+=s,i}static nextID(){return e._nextID++}};__publicField(_Sequence,"_nextID",0);let Sequence=_Sequence;var SequenceMode,SequenceMode2;SequenceMode2=SequenceMode||(SequenceMode={}),SequenceMode2[SequenceMode2.hold=0]="hold",SequenceMode2[SequenceMode2.once=1]="once",SequenceMode2[SequenceMode2.loop=2]="loop",SequenceMode2[SequenceMode2.pingpong=3]="pingpong",SequenceMode2[SequenceMode2.onceReverse=4]="onceReverse",SequenceMode2[SequenceMode2.loopReverse=5]="loopReverse",SequenceMode2[SequenceMode2.pingpongReverse=6]="pingpongReverse";const SequenceModeValues=[SequenceMode.hold,SequenceMode.once,SequenceMode.loop,SequenceMode.pingpong,SequenceMode.onceReverse,SequenceMode.loopReverse,SequenceMode.pingpongReverse];class Animation{constructor(e,t,i){if(__publicField(this,"name"),__publicField(this,"timelines",[]),__publicField(this,"timelineIds",new StringSet),__publicField(this,"duration"),!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=i}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,i,s,n,a,r,o){if(!e)throw new Error("skeleton cannot be null.");s&&0!=this.duration&&(i%=this.duration,t>0&&(t%=this.duration));let l=this.timelines;for(let h=0,d=l.length;h<d;h++)l[h].apply(e,t,i,n,a,r,o)}}var MixBlend,MixBlend2,MixDirection,MixDirection2;MixBlend2=MixBlend||(MixBlend={}),MixBlend2[MixBlend2.setup=0]="setup",MixBlend2[MixBlend2.first=1]="first",MixBlend2[MixBlend2.replace=2]="replace",MixBlend2[MixBlend2.add=3]="add",MixDirection2=MixDirection||(MixDirection={}),MixDirection2[MixDirection2.mixIn=0]="mixIn",MixDirection2[MixDirection2.mixOut=1]="mixOut";const Property={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class Timeline{constructor(e,t){__publicField(this,"propertyIds"),__publicField(this,"frames"),this.propertyIds=t,this.frames=Utils.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let i=e.length;for(let s=1;s<i;s++)if(e[s]>t)return s-1;return i-1}static search(e,t,i){let s=e.length;for(let n=i;n<s;n+=i)if(e[n]>t)return n-i;return s-i}}class CurveTimeline extends Timeline{constructor(e,t,i){super(e,i),__publicField(this,"curves"),this.curves=Utils.newFloatArray(e+18*t),this.curves[e-1]=1}setLinear(e){this.curves[e]=0}setStepped(e){this.curves[e]=1}shrink(e){let t=this.getFrameCount()+18*e;if(this.curves.length>t){let e=Utils.newFloatArray(t);Utils.arrayCopy(this.curves,0,e,0,t),this.curves=e}}setBezier(e,t,i,s,n,a,r,o,l,h,d){let c=this.curves,u=this.getFrameCount()+18*e;0==i&&(c[t]=2+u);let p=.03*(s-2*a+o),g=.03*(n-2*r+l),m=.006*(3*(a-o)-s+h),f=.006*(3*(r-l)-n+d),v=2*p+m,b=2*g+f,y=.3*(a-s)+p+.16666667*m,C=.3*(r-n)+g+.16666667*f,x=s+y,S=n+C;for(let w=u+18;u<w;u+=2)c[u]=x,c[u+1]=S,y+=v,C+=b,v+=m,b+=f,x+=y,S+=C}getBezierValue(e,t,i,s){let n=this.curves;if(n[s]>e){let a=this.frames[t],r=this.frames[t+i];return r+(e-a)/(n[s]-a)*(n[s+1]-r)}let a=s+18;for(s+=2;s<a;s+=2)if(n[s]>=e){let t=n[s-2],i=n[s-1];return i+(e-t)/(n[s]-t)*(n[s+1]-i)}t+=this.getFrameEntries();let r=n[a-2],o=n[a-1];return o+(e-r)/(this.frames[t]-r)*(this.frames[t+i]-o)}}class CurveTimeline1 extends CurveTimeline{constructor(e,t,i){super(e,t,[i])}getFrameEntries(){return 2}setFrame(e,t,i){e<<=1,this.frames[e]=t,this.frames[e+1]=i}getCurveValue(e){let t=this.frames,i=t.length-2;for(let n=2;n<=i;n+=2)if(t[n]>e){i=n-2;break}let s=this.curves[i>>1];switch(s){case 0:let s=t[i],n=t[i+1];return n+(e-s)/(t[i+2]-s)*(t[i+2+1]-n);case 1:return t[i+1]}return this.getBezierValue(e,i,1,s-2)}getRelativeValue(e,t,i,s,n){if(e<this.frames[0]){switch(i){case MixBlend.setup:return n;case MixBlend.first:return s+(n-s)*t}return s}let a=this.getCurveValue(e);switch(i){case MixBlend.setup:return n+a*t;case MixBlend.first:case MixBlend.replace:a+=n-s}return s+a*t}getAbsoluteValue(e,t,i,s,n){if(e<this.frames[0]){switch(i){case MixBlend.setup:return n;case MixBlend.first:return s+(n-s)*t}return s}let a=this.getCurveValue(e);return i==MixBlend.setup?n+(a-n)*t:s+(a-s)*t}getAbsoluteValue2(e,t,i,s,n,a){if(e<this.frames[0]){switch(i){case MixBlend.setup:return n;case MixBlend.first:return s+(n-s)*t}return s}return i==MixBlend.setup?n+(a-n)*t:s+(a-s)*t}getScaleValue(e,t,i,s,n,a){if(e<this.frames[0]){switch(i){case MixBlend.setup:return a;case MixBlend.first:return n+(a-n)*t}return n}let r=this.getCurveValue(e)*a;if(1==t)return i==MixBlend.add?n+r-a:r;if(s==MixDirection.mixOut)switch(i){case MixBlend.setup:return a+(Math.abs(r)*MathUtils.signum(a)-a)*t;case MixBlend.first:case MixBlend.replace:return n+(Math.abs(r)*MathUtils.signum(n)-n)*t}else{let e=0;switch(i){case MixBlend.setup:return e=Math.abs(a)*MathUtils.signum(r),e+(r-e)*t;case MixBlend.first:case MixBlend.replace:return e=Math.abs(n)*MathUtils.signum(r),e+(r-e)*t}}return n+(r-a)*t}}class CurveTimeline2 extends CurveTimeline{constructor(e,t,i,s){super(e,t,[i,s])}getFrameEntries(){return 3}setFrame(e,t,i,s){e*=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s}}class RotateTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.rotate+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.rotation=this.getRelativeValue(i,n,a,o.rotation,o.data.rotation))}}class TranslateTimeline extends CurveTimeline2{constructor(e,t,i){super(e,t,Property.x+"|"+i,Property.y+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(a){case MixBlend.setup:return o.x=o.data.x,void(o.y=o.data.y);case MixBlend.first:o.x+=(o.data.x-o.x)*n,o.y+=(o.data.y-o.y)*n}return}let h=0,d=0,c=Timeline.search(l,i,3),u=this.curves[c/3];switch(u){case 0:let e=l[c];h=l[c+1],d=l[c+2];let t=(i-e)/(l[c+3]-e);h+=(l[c+3+1]-h)*t,d+=(l[c+3+2]-d)*t;break;case 1:h=l[c+1],d=l[c+2];break;default:h=this.getBezierValue(i,c,1,u-2),d=this.getBezierValue(i,c,2,u+18-2)}switch(a){case MixBlend.setup:o.x=o.data.x+h*n,o.y=o.data.y+d*n;break;case MixBlend.first:case MixBlend.replace:o.x+=(o.data.x+h-o.x)*n,o.y+=(o.data.y+d-o.y)*n;break;case MixBlend.add:o.x+=h*n,o.y+=d*n}}}class TranslateXTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.x+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.x=this.getRelativeValue(i,n,a,o.x,o.data.x))}}class TranslateYTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.y+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.y=this.getRelativeValue(i,n,a,o.y,o.data.y))}}class ScaleTimeline extends CurveTimeline2{constructor(e,t,i){super(e,t,Property.scaleX+"|"+i,Property.scaleY+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];if(!o.active)return;let l,h,d=this.frames;if(i<d[0]){switch(a){case MixBlend.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case MixBlend.first:o.scaleX+=(o.data.scaleX-o.scaleX)*n,o.scaleY+=(o.data.scaleY-o.scaleY)*n}return}let c=Timeline.search(d,i,3),u=this.curves[c/3];switch(u){case 0:let e=d[c];l=d[c+1],h=d[c+2];let t=(i-e)/(d[c+3]-e);l+=(d[c+3+1]-l)*t,h+=(d[c+3+2]-h)*t;break;case 1:l=d[c+1],h=d[c+2];break;default:l=this.getBezierValue(i,c,1,u-2),h=this.getBezierValue(i,c,2,u+18-2)}if(l*=o.data.scaleX,h*=o.data.scaleY,1==n)a==MixBlend.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=h-o.data.scaleY):(o.scaleX=l,o.scaleY=h);else{let e=0,t=0;if(r==MixDirection.mixOut)switch(a){case MixBlend.setup:e=o.data.scaleX,t=o.data.scaleY,o.scaleX=e+(Math.abs(l)*MathUtils.signum(e)-e)*n,o.scaleY=t+(Math.abs(h)*MathUtils.signum(t)-t)*n;break;case MixBlend.first:case MixBlend.replace:e=o.scaleX,t=o.scaleY,o.scaleX=e+(Math.abs(l)*MathUtils.signum(e)-e)*n,o.scaleY=t+(Math.abs(h)*MathUtils.signum(t)-t)*n;break;case MixBlend.add:o.scaleX+=(l-o.data.scaleX)*n,o.scaleY+=(h-o.data.scaleY)*n}else switch(a){case MixBlend.setup:e=Math.abs(o.data.scaleX)*MathUtils.signum(l),t=Math.abs(o.data.scaleY)*MathUtils.signum(h),o.scaleX=e+(l-e)*n,o.scaleY=t+(h-t)*n;break;case MixBlend.first:case MixBlend.replace:e=Math.abs(o.scaleX)*MathUtils.signum(l),t=Math.abs(o.scaleY)*MathUtils.signum(h),o.scaleX=e+(l-e)*n,o.scaleY=t+(h-t)*n;break;case MixBlend.add:o.scaleX+=(l-o.data.scaleX)*n,o.scaleY+=(h-o.data.scaleY)*n}}}}class ScaleXTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.scaleX+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.scaleX=this.getScaleValue(i,n,a,r,o.scaleX,o.data.scaleX))}}class ScaleYTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.scaleY+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.scaleY=this.getScaleValue(i,n,a,r,o.scaleY,o.data.scaleY))}}class ShearTimeline extends CurveTimeline2{constructor(e,t,i){super(e,t,Property.shearX+"|"+i,Property.shearY+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(a){case MixBlend.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case MixBlend.first:o.shearX+=(o.data.shearX-o.shearX)*n,o.shearY+=(o.data.shearY-o.shearY)*n}return}let h=0,d=0,c=Timeline.search(l,i,3),u=this.curves[c/3];switch(u){case 0:let e=l[c];h=l[c+1],d=l[c+2];let t=(i-e)/(l[c+3]-e);h+=(l[c+3+1]-h)*t,d+=(l[c+3+2]-d)*t;break;case 1:h=l[c+1],d=l[c+2];break;default:h=this.getBezierValue(i,c,1,u-2),d=this.getBezierValue(i,c,2,u+18-2)}switch(a){case MixBlend.setup:o.shearX=o.data.shearX+h*n,o.shearY=o.data.shearY+d*n;break;case MixBlend.first:case MixBlend.replace:o.shearX+=(o.data.shearX+h-o.shearX)*n,o.shearY+=(o.data.shearY+d-o.shearY)*n;break;case MixBlend.add:o.shearX+=h*n,o.shearY+=d*n}}}class ShearXTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.shearX+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.shearX=this.getRelativeValue(i,n,a,o.shearX,o.data.shearX))}}class ShearYTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.shearY+"|"+i),__publicField(this,"boneIndex",0),this.boneIndex=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];o.active&&(o.shearY=this.getRelativeValue(i,n,a,o.shearY,o.data.shearY))}}class InheritTimeline extends Timeline{constructor(e,t){super(e,[Property.inherit+"|"+t]),__publicField(this,"boneIndex",0),this.boneIndex=t}getFrameEntries(){return 2}setFrame(e,t,i){e*=2,this.frames[e]=t,this.frames[e+1]=i}apply(e,t,i,s,n,a,r){let o=e.bones[this.boneIndex];if(!o.active)return;if(r==MixDirection.mixOut)return void(a==MixBlend.setup&&(o.inherit=o.data.inherit));let l=this.frames;i<l[0]?a!=MixBlend.setup&&a!=MixBlend.first||(o.inherit=o.data.inherit):o.inherit=this.frames[Timeline.search(l,i,2)+1]}}class RGBATimeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.rgb+"|"+i,Property.alpha+"|"+i]),__publicField(this,"slotIndex",0),this.slotIndex=i}getFrameEntries(){return 5}setFrame(e,t,i,s,n,a){e*=5,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=n,this.frames[e+4]=a}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let e=o.data.color;switch(a){case MixBlend.setup:return void h.setFromColor(e);case MixBlend.first:h.add((e.r-h.r)*n,(e.g-h.g)*n,(e.b-h.b)*n,(e.a-h.a)*n)}return}let d=0,c=0,u=0,p=0,g=Timeline.search(l,i,5),m=this.curves[g/5];switch(m){case 0:let e=l[g];d=l[g+1],c=l[g+2],u=l[g+3],p=l[g+4];let t=(i-e)/(l[g+5]-e);d+=(l[g+5+1]-d)*t,c+=(l[g+5+2]-c)*t,u+=(l[g+5+3]-u)*t,p+=(l[g+5+4]-p)*t;break;case 1:d=l[g+1],c=l[g+2],u=l[g+3],p=l[g+4];break;default:d=this.getBezierValue(i,g,1,m-2),c=this.getBezierValue(i,g,2,m+18-2),u=this.getBezierValue(i,g,3,m+36-2),p=this.getBezierValue(i,g,4,m+54-2)}1==n?h.set(d,c,u,p):(a==MixBlend.setup&&h.setFromColor(o.data.color),h.add((d-h.r)*n,(c-h.g)*n,(u-h.b)*n,(p-h.a)*n))}}class RGBTimeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.rgb+"|"+i]),__publicField(this,"slotIndex",0),this.slotIndex=i}getFrameEntries(){return 4}setFrame(e,t,i,s,n){e<<=2,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=n}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let e=o.data.color;switch(a){case MixBlend.setup:return h.r=e.r,h.g=e.g,void(h.b=e.b);case MixBlend.first:h.r+=(e.r-h.r)*n,h.g+=(e.g-h.g)*n,h.b+=(e.b-h.b)*n}return}let d=0,c=0,u=0,p=Timeline.search(l,i,4),g=this.curves[p>>2];switch(g){case 0:let e=l[p];d=l[p+1],c=l[p+2],u=l[p+3];let t=(i-e)/(l[p+4]-e);d+=(l[p+4+1]-d)*t,c+=(l[p+4+2]-c)*t,u+=(l[p+4+3]-u)*t;break;case 1:d=l[p+1],c=l[p+2],u=l[p+3];break;default:d=this.getBezierValue(i,p,1,g-2),c=this.getBezierValue(i,p,2,g+18-2),u=this.getBezierValue(i,p,3,g+36-2)}if(1==n)h.r=d,h.g=c,h.b=u;else{if(a==MixBlend.setup){let e=o.data.color;h.r=e.r,h.g=e.g,h.b=e.b}h.r+=(d-h.r)*n,h.g+=(c-h.g)*n,h.b+=(u-h.b)*n}}}class AlphaTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.alpha+"|"+i),__publicField(this,"slotIndex",0),this.slotIndex=i}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];if(!o.bone.active)return;let l=o.color;if(i<this.frames[0]){let e=o.data.color;switch(a){case MixBlend.setup:return void(l.a=e.a);case MixBlend.first:l.a+=(e.a-l.a)*n}return}let h=this.getCurveValue(i);1==n?l.a=h:(a==MixBlend.setup&&(l.a=o.data.color.a),l.a+=(h-l.a)*n)}}class RGBA2Timeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.rgb+"|"+i,Property.alpha+"|"+i,Property.rgb2+"|"+i]),__publicField(this,"slotIndex",0),this.slotIndex=i}getFrameEntries(){return 8}setFrame(e,t,i,s,n,a,r,o,l){e<<=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=n,this.frames[e+4]=a,this.frames[e+5]=r,this.frames[e+6]=o,this.frames[e+7]=l}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,d=o.darkColor;if(i<l[0]){let e=o.data.color,t=o.data.darkColor;switch(a){case MixBlend.setup:return h.setFromColor(e),d.r=t.r,d.g=t.g,void(d.b=t.b);case MixBlend.first:h.add((e.r-h.r)*n,(e.g-h.g)*n,(e.b-h.b)*n,(e.a-h.a)*n),d.r+=(t.r-d.r)*n,d.g+=(t.g-d.g)*n,d.b+=(t.b-d.b)*n}return}let c=0,u=0,p=0,g=0,m=0,f=0,v=0,b=Timeline.search(l,i,8),y=this.curves[b>>3];switch(y){case 0:let e=l[b];c=l[b+1],u=l[b+2],p=l[b+3],g=l[b+4],m=l[b+5],f=l[b+6],v=l[b+7];let t=(i-e)/(l[b+8]-e);c+=(l[b+8+1]-c)*t,u+=(l[b+8+2]-u)*t,p+=(l[b+8+3]-p)*t,g+=(l[b+8+4]-g)*t,m+=(l[b+8+5]-m)*t,f+=(l[b+8+6]-f)*t,v+=(l[b+8+7]-v)*t;break;case 1:c=l[b+1],u=l[b+2],p=l[b+3],g=l[b+4],m=l[b+5],f=l[b+6],v=l[b+7];break;default:c=this.getBezierValue(i,b,1,y-2),u=this.getBezierValue(i,b,2,y+18-2),p=this.getBezierValue(i,b,3,y+36-2),g=this.getBezierValue(i,b,4,y+54-2),m=this.getBezierValue(i,b,5,y+72-2),f=this.getBezierValue(i,b,6,y+90-2),v=this.getBezierValue(i,b,7,y+108-2)}if(1==n)h.set(c,u,p,g),d.r=m,d.g=f,d.b=v;else{if(a==MixBlend.setup){h.setFromColor(o.data.color);let e=o.data.darkColor;d.r=e.r,d.g=e.g,d.b=e.b}h.add((c-h.r)*n,(u-h.g)*n,(p-h.b)*n,(g-h.a)*n),d.r+=(m-d.r)*n,d.g+=(f-d.g)*n,d.b+=(v-d.b)*n}}}class RGB2Timeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.rgb+"|"+i,Property.rgb2+"|"+i]),__publicField(this,"slotIndex",0),this.slotIndex=i}getFrameEntries(){return 7}setFrame(e,t,i,s,n,a,r,o){e*=7,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=n,this.frames[e+4]=a,this.frames[e+5]=r,this.frames[e+6]=o}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,d=o.darkColor;if(i<l[0]){let e=o.data.color,t=o.data.darkColor;switch(a){case MixBlend.setup:return h.r=e.r,h.g=e.g,h.b=e.b,d.r=t.r,d.g=t.g,void(d.b=t.b);case MixBlend.first:h.r+=(e.r-h.r)*n,h.g+=(e.g-h.g)*n,h.b+=(e.b-h.b)*n,d.r+=(t.r-d.r)*n,d.g+=(t.g-d.g)*n,d.b+=(t.b-d.b)*n}return}let c=0,u=0,p=0,g=0,m=0,f=0,v=Timeline.search(l,i,7),b=this.curves[v/7];switch(b){case 0:let e=l[v];c=l[v+1],u=l[v+2],p=l[v+3],g=l[v+4],m=l[v+5],f=l[v+6];let t=(i-e)/(l[v+7]-e);c+=(l[v+7+1]-c)*t,u+=(l[v+7+2]-u)*t,p+=(l[v+7+3]-p)*t,g+=(l[v+7+4]-g)*t,m+=(l[v+7+5]-m)*t,f+=(l[v+7+6]-f)*t;break;case 1:c=l[v+1],u=l[v+2],p=l[v+3],g=l[v+4],m=l[v+5],f=l[v+6];break;default:c=this.getBezierValue(i,v,1,b-2),u=this.getBezierValue(i,v,2,b+18-2),p=this.getBezierValue(i,v,3,b+36-2),g=this.getBezierValue(i,v,4,b+54-2),m=this.getBezierValue(i,v,5,b+72-2),f=this.getBezierValue(i,v,6,b+90-2)}if(1==n)h.r=c,h.g=u,h.b=p,d.r=g,d.g=m,d.b=f;else{if(a==MixBlend.setup){let e=o.data.color,t=o.data.darkColor;h.r=e.r,h.g=e.g,h.b=e.b,d.r=t.r,d.g=t.g,d.b=t.b}h.r+=(c-h.r)*n,h.g+=(u-h.g)*n,h.b+=(p-h.b)*n,d.r+=(g-d.r)*n,d.g+=(m-d.g)*n,d.b+=(f-d.b)*n}}}class AttachmentTimeline extends Timeline{constructor(e,t){super(e,[Property.attachment+"|"+t]),__publicField(this,"slotIndex",0),__publicField(this,"attachmentNames"),this.slotIndex=t,this.attachmentNames=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,t,i){this.frames[e]=t,this.attachmentNames[e]=i}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];o.bone.active&&(r!=MixDirection.mixOut?i<this.frames[0]?a!=MixBlend.setup&&a!=MixBlend.first||this.setAttachment(e,o,o.data.attachmentName):this.setAttachment(e,o,this.attachmentNames[Timeline.search1(this.frames,i)]):a==MixBlend.setup&&this.setAttachment(e,o,o.data.attachmentName))}setAttachment(e,t,i){t.setAttachment(i?e.getAttachment(this.slotIndex,i):null)}}class DeformTimeline extends CurveTimeline{constructor(e,t,i,s){super(e,t,[Property.deform+"|"+i+"|"+s.id]),__publicField(this,"slotIndex",0),__publicField(this,"attachment"),__publicField(this,"vertices"),this.slotIndex=i,this.attachment=s,this.vertices=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,t,i){this.frames[e]=t,this.vertices[e]=i}setBezier(e,t,i,s,n,a,r,o,l,h,d){let c=this.curves,u=this.getFrameCount()+18*e;0==i&&(c[t]=2+u);let p=.03*(s-2*a+o),g=.03*l-.06*r,m=.006*(3*(a-o)-s+h),f=.018*(r-l+.33333333),v=2*p+m,b=2*g+f,y=.3*(a-s)+p+.16666667*m,C=.3*r+g+.16666667*f,x=s+y,S=C;for(let w=u+18;u<w;u+=2)c[u]=x,c[u+1]=S,y+=v,C+=b,v+=m,b+=f,x+=y,S+=C}getCurvePercent(e,t){let i=this.curves,s=i[t];switch(s){case 0:let i=this.frames[t];return(e-i)/(this.frames[t+this.getFrameEntries()]-i);case 1:return 0}if(s-=2,i[s]>e){let n=this.frames[t];return i[s+1]*(e-n)/(i[s]-n)}let n=s+18;for(s+=2;s<n;s+=2)if(i[s]>=e){let t=i[s-2],n=i[s-1];return n+(e-t)/(i[s]-t)*(i[s+1]-n)}let a=i[n-2],r=i[n-1];return r+(1-r)*(e-a)/(this.frames[t+this.getFrameEntries()]-a)}apply(e,t,i,s,n,a,r){let o=e.slots[this.slotIndex];if(!o.bone.active)return;let l=o.getAttachment();if(!l)return;if(!(l instanceof VertexAttachment)||l.timelineAttachment!=this.attachment)return;let h=o.deform;0==h.length&&(a=MixBlend.setup);let d=this.vertices,c=d[0].length,u=this.frames;if(i<u[0]){switch(a){case MixBlend.setup:return void(h.length=0);case MixBlend.first:if(1==n)return void(h.length=0);h.length=c;let e=l;if(e.bones)for(n=1-n,p=0;p<c;p++)h[p]*=n;else{let t=e.vertices;for(var p=0;p<c;p++)h[p]+=(t[p]-h[p])*n}}return}if(h.length=c,i>=u[u.length-1]){let e=d[u.length-1];if(1==n)if(a==MixBlend.add){let t=l;if(t.bones)for(let i=0;i<c;i++)h[i]+=e[i];else{let i=t.vertices;for(let t=0;t<c;t++)h[t]+=e[t]-i[t]}}else Utils.arrayCopy(e,0,h,0,c);else switch(a){case MixBlend.setup:{let t=l;if(t.bones)for(let i=0;i<c;i++)h[i]=e[i]*n;else{let i=t.vertices;for(let t=0;t<c;t++){let s=i[t];h[t]=s+(e[t]-s)*n}}break}case MixBlend.first:case MixBlend.replace:for(let i=0;i<c;i++)h[i]+=(e[i]-h[i])*n;break;case MixBlend.add:let t=l;if(t.bones)for(let i=0;i<c;i++)h[i]+=e[i]*n;else{let i=t.vertices;for(let t=0;t<c;t++)h[t]+=(e[t]-i[t])*n}}return}let g=Timeline.search1(u,i),m=this.getCurvePercent(i,g),f=d[g],v=d[g+1];if(1==n)if(a==MixBlend.add){let e=l;if(e.bones)for(let t=0;t<c;t++){let e=f[t];h[t]+=e+(v[t]-e)*m}else{let t=e.vertices;for(let e=0;e<c;e++){let i=f[e];h[e]+=i+(v[e]-i)*m-t[e]}}}else for(let b=0;b<c;b++){let e=f[b];h[b]=e+(v[b]-e)*m}else switch(a){case MixBlend.setup:{let e=l;if(e.bones)for(let t=0;t<c;t++){let e=f[t];h[t]=(e+(v[t]-e)*m)*n}else{let t=e.vertices;for(let e=0;e<c;e++){let i=f[e],s=t[e];h[e]=s+(i+(v[e]-i)*m-s)*n}}break}case MixBlend.first:case MixBlend.replace:for(let t=0;t<c;t++){let e=f[t];h[t]+=(e+(v[t]-e)*m-h[t])*n}break;case MixBlend.add:let e=l;if(e.bones)for(let t=0;t<c;t++){let e=f[t];h[t]+=(e+(v[t]-e)*m)*n}else{let t=e.vertices;for(let e=0;e<c;e++){let i=f[e];h[e]+=(i+(v[e]-i)*m-t[e])*n}}}}}const _EventTimeline=class e extends Timeline{constructor(t){super(t,e.propertyIds),__publicField(this,"events"),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(e,t){this.frames[e]=t.time,this.events[e]=t}apply(e,t,i,s,n,a,r){if(!s)return;let o=this.frames,l=this.frames.length;if(t>i)this.apply(e,t,Number.MAX_VALUE,s,n,a,r),t=-1;else if(t>=o[l-1])return;if(i<o[0])return;let h=0;if(t<o[0])h=0;else{h=Timeline.search1(o,t)+1;let e=o[h];for(;h>0&&o[h-1]==e;)h--}for(;h<l&&i>=o[h];h++)s.push(this.events[h])}};__publicField(_EventTimeline,"propertyIds",[""+Property.event]);let EventTimeline=_EventTimeline;const _DrawOrderTimeline=class e extends Timeline{constructor(t){super(t,e.propertyIds),__publicField(this,"drawOrders"),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(e,t,i){this.frames[e]=t,this.drawOrders[e]=i}apply(e,t,i,s,n,a,r){if(r==MixDirection.mixOut)return void(a==MixBlend.setup&&Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length));if(i<this.frames[0])return void(a!=MixBlend.setup&&a!=MixBlend.first||Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length));let o=Timeline.search1(this.frames,i),l=this.drawOrders[o];if(l){let t=e.drawOrder,i=e.slots;for(let e=0,s=l.length;e<s;e++)t[e]=i[l[e]]}else Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length)}};__publicField(_DrawOrderTimeline,"propertyIds",[""+Property.drawOrder]);let DrawOrderTimeline=_DrawOrderTimeline;class IkConstraintTimeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.ikConstraint+"|"+i]),__publicField(this,"constraintIndex",0),this.constraintIndex=i}getFrameEntries(){return 6}setFrame(e,t,i,s,n,a,r){e*=6,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=n,this.frames[e+4]=a?1:0,this.frames[e+5]=r?1:0}apply(e,t,i,s,n,a,r){let o=e.ikConstraints[this.constraintIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(a){case MixBlend.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case MixBlend.first:o.mix+=(o.data.mix-o.mix)*n,o.softness+=(o.data.softness-o.softness)*n,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let h=0,d=0,c=Timeline.search(l,i,6),u=this.curves[c/6];switch(u){case 0:let e=l[c];h=l[c+1],d=l[c+2];let t=(i-e)/(l[c+6]-e);h+=(l[c+6+1]-h)*t,d+=(l[c+6+2]-d)*t;break;case 1:h=l[c+1],d=l[c+2];break;default:h=this.getBezierValue(i,c,1,u-2),d=this.getBezierValue(i,c,2,u+18-2)}a==MixBlend.setup?(o.mix=o.data.mix+(h-o.data.mix)*n,o.softness=o.data.softness+(d-o.data.softness)*n,r==MixDirection.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=l[c+3],o.compress=0!=l[c+4],o.stretch=0!=l[c+5])):(o.mix+=(h-o.mix)*n,o.softness+=(d-o.softness)*n,r==MixDirection.mixIn&&(o.bendDirection=l[c+3],o.compress=0!=l[c+4],o.stretch=0!=l[c+5]))}}class TransformConstraintTimeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.transformConstraint+"|"+i]),__publicField(this,"constraintIndex",0),this.constraintIndex=i}getFrameEntries(){return 7}setFrame(e,t,i,s,n,a,r,o){let l=this.frames;l[e*=7]=t,l[e+1]=i,l[e+2]=s,l[e+3]=n,l[e+4]=a,l[e+5]=r,l[e+6]=o}apply(e,t,i,s,n,a,r){let o=e.transformConstraints[this.constraintIndex];if(!o.active)return;let l,h,d,c,u,p,g=this.frames;if(i<g[0]){let e=o.data;switch(a){case MixBlend.setup:return o.mixRotate=e.mixRotate,o.mixX=e.mixX,o.mixY=e.mixY,o.mixScaleX=e.mixScaleX,o.mixScaleY=e.mixScaleY,void(o.mixShearY=e.mixShearY);case MixBlend.first:o.mixRotate+=(e.mixRotate-o.mixRotate)*n,o.mixX+=(e.mixX-o.mixX)*n,o.mixY+=(e.mixY-o.mixY)*n,o.mixScaleX+=(e.mixScaleX-o.mixScaleX)*n,o.mixScaleY+=(e.mixScaleY-o.mixScaleY)*n,o.mixShearY+=(e.mixShearY-o.mixShearY)*n}return}let m=Timeline.search(g,i,7),f=this.curves[m/7];switch(f){case 0:let e=g[m];l=g[m+1],h=g[m+2],d=g[m+3],c=g[m+4],u=g[m+5],p=g[m+6];let t=(i-e)/(g[m+7]-e);l+=(g[m+7+1]-l)*t,h+=(g[m+7+2]-h)*t,d+=(g[m+7+3]-d)*t,c+=(g[m+7+4]-c)*t,u+=(g[m+7+5]-u)*t,p+=(g[m+7+6]-p)*t;break;case 1:l=g[m+1],h=g[m+2],d=g[m+3],c=g[m+4],u=g[m+5],p=g[m+6];break;default:l=this.getBezierValue(i,m,1,f-2),h=this.getBezierValue(i,m,2,f+18-2),d=this.getBezierValue(i,m,3,f+36-2),c=this.getBezierValue(i,m,4,f+54-2),u=this.getBezierValue(i,m,5,f+72-2),p=this.getBezierValue(i,m,6,f+90-2)}if(a==MixBlend.setup){let e=o.data;o.mixRotate=e.mixRotate+(l-e.mixRotate)*n,o.mixX=e.mixX+(h-e.mixX)*n,o.mixY=e.mixY+(d-e.mixY)*n,o.mixScaleX=e.mixScaleX+(c-e.mixScaleX)*n,o.mixScaleY=e.mixScaleY+(u-e.mixScaleY)*n,o.mixShearY=e.mixShearY+(p-e.mixShearY)*n}else o.mixRotate+=(l-o.mixRotate)*n,o.mixX+=(h-o.mixX)*n,o.mixY+=(d-o.mixY)*n,o.mixScaleX+=(c-o.mixScaleX)*n,o.mixScaleY+=(u-o.mixScaleY)*n,o.mixShearY+=(p-o.mixShearY)*n}}class PathConstraintPositionTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.pathConstraintPosition+"|"+i),__publicField(this,"constraintIndex",0),this.constraintIndex=i}apply(e,t,i,s,n,a,r){let o=e.pathConstraints[this.constraintIndex];o.active&&(o.position=this.getAbsoluteValue(i,n,a,o.position,o.data.position))}}class PathConstraintSpacingTimeline extends CurveTimeline1{constructor(e,t,i){super(e,t,Property.pathConstraintSpacing+"|"+i),__publicField(this,"constraintIndex",0),this.constraintIndex=i}apply(e,t,i,s,n,a,r){let o=e.pathConstraints[this.constraintIndex];o.active&&(o.spacing=this.getAbsoluteValue(i,n,a,o.spacing,o.data.spacing))}}class PathConstraintMixTimeline extends CurveTimeline{constructor(e,t,i){super(e,t,[Property.pathConstraintMix+"|"+i]),__publicField(this,"constraintIndex",0),this.constraintIndex=i}getFrameEntries(){return 4}setFrame(e,t,i,s,n){let a=this.frames;a[e<<=2]=t,a[e+1]=i,a[e+2]=s,a[e+3]=n}apply(e,t,i,s,n,a,r){let o=e.pathConstraints[this.constraintIndex];if(!o.active)return;let l,h,d,c=this.frames;if(i<c[0]){switch(a){case MixBlend.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case MixBlend.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*n,o.mixX+=(o.data.mixX-o.mixX)*n,o.mixY+=(o.data.mixY-o.mixY)*n}return}let u=Timeline.search(c,i,4),p=this.curves[u>>2];switch(p){case 0:let e=c[u];l=c[u+1],h=c[u+2],d=c[u+3];let t=(i-e)/(c[u+4]-e);l+=(c[u+4+1]-l)*t,h+=(c[u+4+2]-h)*t,d+=(c[u+4+3]-d)*t;break;case 1:l=c[u+1],h=c[u+2],d=c[u+3];break;default:l=this.getBezierValue(i,u,1,p-2),h=this.getBezierValue(i,u,2,p+18-2),d=this.getBezierValue(i,u,3,p+36-2)}if(a==MixBlend.setup){let e=o.data;o.mixRotate=e.mixRotate+(l-e.mixRotate)*n,o.mixX=e.mixX+(h-e.mixX)*n,o.mixY=e.mixY+(d-e.mixY)*n}else o.mixRotate+=(l-o.mixRotate)*n,o.mixX+=(h-o.mixX)*n,o.mixY+=(d-o.mixY)*n}}class PhysicsConstraintTimeline extends CurveTimeline1{constructor(e,t,i,s){super(e,t,s+"|"+i),__publicField(this,"constraintIndex",0),this.constraintIndex=i}apply(e,t,i,s,n,a,r){let o;if(-1==this.constraintIndex){const t=i>=this.frames[0]?this.getCurveValue(i):0;for(const s of e.physicsConstraints)s.active&&this.global(s.data)&&this.set(s,this.getAbsoluteValue2(i,n,a,this.get(s),this.setup(s),t))}else o=e.physicsConstraints[this.constraintIndex],o.active&&this.set(o,this.getAbsoluteValue(i,n,a,this.get(o),this.setup(o)))}}class PhysicsConstraintInertiaTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintInertia)}setup(e){return e.data.inertia}get(e){return e.inertia}set(e,t){e.inertia=t}global(e){return e.inertiaGlobal}}class PhysicsConstraintStrengthTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintStrength)}setup(e){return e.data.strength}get(e){return e.strength}set(e,t){e.strength=t}global(e){return e.strengthGlobal}}class PhysicsConstraintDampingTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintDamping)}setup(e){return e.data.damping}get(e){return e.damping}set(e,t){e.damping=t}global(e){return e.dampingGlobal}}class PhysicsConstraintMassTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintMass)}setup(e){return 1/e.data.massInverse}get(e){return 1/e.massInverse}set(e,t){e.massInverse=1/t}global(e){return e.massGlobal}}class PhysicsConstraintWindTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintWind)}setup(e){return e.data.wind}get(e){return e.wind}set(e,t){e.wind=t}global(e){return e.windGlobal}}class PhysicsConstraintGravityTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintGravity)}setup(e){return e.data.gravity}get(e){return e.gravity}set(e,t){e.gravity=t}global(e){return e.gravityGlobal}}class PhysicsConstraintMixTimeline extends PhysicsConstraintTimeline{constructor(e,t,i){super(e,t,i,Property.physicsConstraintMix)}setup(e){return e.data.mix}get(e){return e.mix}set(e,t){e.mix=t}global(e){return e.mixGlobal}}const _PhysicsConstraintResetTimeline=class e extends Timeline{constructor(t,i){super(t,e.propertyIds),__publicField(this,"constraintIndex"),this.constraintIndex=i}getFrameCount(){return this.frames.length}setFrame(e,t){this.frames[e]=t}apply(e,t,i,s,n,a,r){let o;if(-1!=this.constraintIndex&&(o=e.physicsConstraints[this.constraintIndex],!o.active))return;const l=this.frames;if(t>i)this.apply(e,t,Number.MAX_VALUE,[],n,a,r),t=-1;else if(t>=l[l.length-1])return;if(!(i<l[0])&&(t<l[0]||i>=l[Timeline.search1(l,t)+1]))if(null!=o)o.reset();else for(const h of e.physicsConstraints)h.active&&h.reset()}};__publicField(_PhysicsConstraintResetTimeline,"propertyIds",[Property.physicsConstraintReset.toString()]);let PhysicsConstraintResetTimeline=_PhysicsConstraintResetTimeline;const _SequenceTimeline=class e extends Timeline{constructor(e,t,i){super(e,[Property.sequence+"|"+t+"|"+i.sequence.id]),__publicField(this,"slotIndex"),__publicField(this,"attachment"),this.slotIndex=t,this.attachment=i}getFrameEntries(){return e.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,i,s,n,a){let r=this.frames;r[t*=e.ENTRIES]=i,r[t+e.MODE]=s|n<<4,r[t+e.DELAY]=a}apply(t,i,s,n,a,r,o){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=l.attachment,d=this.attachment;if(!(h==d||h instanceof VertexAttachment&&h.timelineAttachment==d))return;if(o==MixDirection.mixOut)return void(r==MixBlend.setup&&(l.sequenceIndex=-1));let c=this.frames;if(s<c[0])return void(r!=MixBlend.setup&&r!=MixBlend.first||(l.sequenceIndex=-1));let u=Timeline.search(c,s,e.ENTRIES),p=c[u],g=c[u+e.MODE],m=c[u+e.DELAY];if(!this.attachment.sequence)return;let f=g>>4,v=this.attachment.sequence.regions.length,b=SequenceModeValues[15&g];if(b!=SequenceMode.hold)switch(f+=(s-p)/m+1e-5|0,b){case SequenceMode.once:f=Math.min(v-1,f);break;case SequenceMode.loop:f%=v;break;case SequenceMode.pingpong:{let e=(v<<1)-2;f=0==e?0:f%e,f>=v&&(f=e-f);break}case SequenceMode.onceReverse:f=Math.max(v-1-f,0);break;case SequenceMode.loopReverse:f=v-1-f%v;break;case SequenceMode.pingpongReverse:{let e=(v<<1)-2;f=0==e?0:(f+v-1)%e,f>=v&&(f=e-f)}}l.sequenceIndex=f}};__publicField(_SequenceTimeline,"ENTRIES",3),__publicField(_SequenceTimeline,"MODE",1),__publicField(_SequenceTimeline,"DELAY",2);let SequenceTimeline=_SequenceTimeline;const _AnimationState=class e{constructor(e){__publicField(this,"data"),__publicField(this,"tracks",new Array),__publicField(this,"timeScale",1),__publicField(this,"unkeyedState",0),__publicField(this,"events",new Array),__publicField(this,"listeners",new Array),__publicField(this,"queue",new EventQueue(this)),__publicField(this,"propertyIDs",new StringSet),__publicField(this,"animationsChanged",!1),__publicField(this,"trackEntryPool",new Pool((()=>new TrackEntry))),this.data=e}static emptyAnimation(){return e._emptyAnimation}update(e){e*=this.timeScale;let t=this.tracks;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let n=e*s.timeScale;if(s.delay>0){if(s.delay-=n,s.delay>0)continue;n=-s.delay,s.delay=0}let a=s.next;if(a){let t=s.trackLast-a.delay;if(t>=0){for(a.delay=0,a.trackTime+=0==s.timeScale?0:(t/s.timeScale+e)*a.timeScale,s.trackTime+=n,this.setCurrent(i,a,!0);a.mixingFrom;)a.mixTime+=e,a=a.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){t[i]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,e)){let e=s.mixingFrom;for(s.mixingFrom=null,e&&(e.mixingTo=null);e;)this.queue.end(e),e=e.mixingFrom}s.trackTime+=n}this.queue.drain()}updateMixingFrom(e,t){let i=e.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,t);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,-1!=e.nextTrackLast&&e.mixTime>=e.mixDuration?(0!=i.totalAlpha&&0!=e.mixDuration||(e.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=e),e.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.trackTime+=t*i.timeScale,e.mixTime+=t,!1)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,i=this.tracks,s=!1;for(let c=0,u=i.length;c<u;c++){let a=i[c];if(!a||a.delay>0)continue;s=!0;let r=0==c?MixBlend.first:a.mixBlend,o=a.alpha;a.mixingFrom?o*=this.applyMixingFrom(a,e,r):a.trackTime>=a.trackEnd&&!a.next&&(o=0);let l=o>=a.alphaAttachmentThreshold,h=a.animationLast,d=a.getAnimationTime(),u=d,p=t;a.reverse&&(u=a.animation.duration-u,p=null);let g=a.animation.timelines,m=g.length;if(0==c&&1==o||r==MixBlend.add){0==c&&(l=!0);for(let t=0;t<m;t++){var n=g[t];n instanceof AttachmentTimeline?this.applyAttachmentTimeline(n,e,u,r,l):n.apply(e,h,u,p,o,r,MixDirection.mixIn)}}else{let t=a.timelineMode,i=a.shortestRotation,s=!i&&a.timelinesRotation.length!=m<<1;s&&(a.timelinesRotation.length=m<<1);for(let n=0;n<m;n++){let d=g[n],c=t[n]==SUBSEQUENT?r:MixBlend.setup;!i&&d instanceof RotateTimeline?this.applyRotateTimeline(d,e,u,o,c,a.timelinesRotation,n<<1,s):d instanceof AttachmentTimeline?this.applyAttachmentTimeline(d,e,u,r,l):d.apply(e,h,u,p,o,c,MixDirection.mixIn)}}this.queueEvents(a,d),t.length=0,a.nextAnimationLast=d,a.nextTrackLast=a.trackTime}for(var a=this.unkeyedState+SETUP,r=e.slots,o=0,l=e.slots.length;o<l;o++){var h=r[o];if(h.attachmentState==a){var d=h.data.attachmentName;h.setAttachment(d?e.getAttachment(h.data.index,d):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(e,t,i){let s=e.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,t,i);let n=0;0==e.mixDuration?(n=1,i==MixBlend.first&&(i=MixBlend.setup)):(n=e.mixTime/e.mixDuration,n>1&&(n=1),i!=MixBlend.first&&(i=s.mixBlend));let a=n<s.mixAttachmentThreshold,r=n<s.mixDrawOrderThreshold,o=s.animation.timelines,l=o.length,h=s.alpha*e.interruptAlpha,d=h*(1-n),c=s.animationLast,u=s.getAnimationTime(),p=u,g=null;if(s.reverse?p=s.animation.duration-p:n<s.eventThreshold&&(g=this.events),i==MixBlend.add)for(let m=0;m<l;m++)o[m].apply(t,c,p,g,d,i,MixDirection.mixOut);else{let e=s.timelineMode,n=s.timelineHoldMix,u=s.shortestRotation,m=!u&&s.timelinesRotation.length!=l<<1;m&&(s.timelinesRotation.length=l<<1),s.totalAlpha=0;for(let f=0;f<l;f++){let l,v=o[f],b=MixDirection.mixOut,y=0;switch(e[f]){case SUBSEQUENT:if(!r&&v instanceof DrawOrderTimeline)continue;l=i,y=d;break;case FIRST:l=MixBlend.setup,y=d;break;case HOLD_SUBSEQUENT:l=i,y=h;break;case HOLD_FIRST:l=MixBlend.setup,y=h;break;default:l=MixBlend.setup;let e=n[f];y=h*Math.max(0,1-e.mixTime/e.mixDuration)}s.totalAlpha+=y,!u&&v instanceof RotateTimeline?this.applyRotateTimeline(v,t,p,y,l,s.timelinesRotation,f<<1,m):v instanceof AttachmentTimeline?this.applyAttachmentTimeline(v,t,p,l,a&&y>=s.alphaAttachmentThreshold):(r&&v instanceof DrawOrderTimeline&&l==MixBlend.setup&&(b=MixDirection.mixIn),v.apply(t,c,p,g,y,l,b))}}return e.mixDuration>0&&this.queueEvents(s,u),this.events.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime,n}applyAttachmentTimeline(e,t,i,s,n){var a=t.slots[e.slotIndex];a.bone.active&&(i<e.frames[0]?s!=MixBlend.setup&&s!=MixBlend.first||this.setAttachment(t,a,a.data.attachmentName,n):this.setAttachment(t,a,e.attachmentNames[Timeline.search1(e.frames,i)],n),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+SETUP))}setAttachment(e,t,i,s){t.setAttachment(i?e.getAttachment(t.data.index,i):null),s&&(t.attachmentState=this.unkeyedState+CURRENT)}applyRotateTimeline(e,t,i,s,n,a,r,o){if(o&&(a[r]=0),1==s)return void e.apply(t,0,i,null,1,n,MixDirection.mixIn);let l=t.bones[e.boneIndex];if(!l.active)return;let h=0,d=0;if(i<e.frames[0])switch(n){case MixBlend.setup:l.rotation=l.data.rotation;default:return;case MixBlend.first:h=l.rotation,d=l.data.rotation}else h=n==MixBlend.setup?l.data.rotation:l.rotation,d=l.data.rotation+e.getCurveValue(i);let c=0,u=d-h;if(u-=360*Math.ceil(u/360-.5),0==u)c=a[r];else{let e=0,t=0;o?(e=0,t=u):(e=a[r],t=a[r+1]);let i=e-e%360;c=u+i;let s=u>=0,n=e>=0;Math.abs(t)<=90&&MathUtils.signum(t)!=MathUtils.signum(u)&&(Math.abs(e-i)>180?(c+=360*MathUtils.signum(e),n=s):0!=i?c-=360*MathUtils.signum(e):n=s),n!=s&&(c+=360*MathUtils.signum(e)),a[r]=c}a[r+1]=u,l.rotation=h+c*s}queueEvents(e,t){let i=e.animationStart,s=e.animationEnd,n=s-i,a=e.trackLast%n,r=this.events,o=0,l=r.length;for(;o<l;o++){let t=r[o];if(t.time<a)break;t.time>s||this.queue.event(e,t)}let h=!1;if(e.loop)if(0==n)h=!0;else{const t=Math.floor(e.trackTime/n);h=t>0&&t>Math.floor(e.trackLast/n)}else h=t>=s&&e.animationLast<s;for(h&&this.queue.complete(e);o<l;o++){let t=r[o];t.time<i||this.queue.event(e,t)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,i=this.tracks.length;t<i;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let i=t;for(;;){let e=i.mixingFrom;if(!e)break;this.queue.end(e),i.mixingFrom=null,i.mixingTo=null,i=e}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,i){let s=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,s&&(i&&this.queue.interrupt(s),t.mixingFrom=s,s.mixingTo=t,t.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(t.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,i=!1){let s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,s,i)}setAnimationWith(e,t,i=!1){if(!t)throw new Error("animation cannot be null.");let s=!0,n=this.expandToIndex(e);n&&(-1==n.nextTrackLast?(this.tracks[e]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,s=!1):this.clearNext(n));let a=this.trackEntry(e,t,i,n);return this.setCurrent(e,a,s),this.queue.drain(),a}addAnimation(e,t,i=!1,s=0){let n=this.data.skeletonData.findAnimation(t);if(!n)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,n,i,s)}addAnimationWith(e,t,i=!1,s=0){if(!t)throw new Error("animation cannot be null.");let n=this.expandToIndex(e);if(n)for(;n.next;)n=n.next;let a=this.trackEntry(e,t,i,n);return n?(n.next=a,a.previous=n,s<=0&&(s=Math.max(s+n.getTrackComplete()-a.mixDuration,0))):(this.setCurrent(e,a,!0),this.queue.drain(),s<0&&(s=0)),a.delay=s,a}setEmptyAnimation(t,i=0){let s=this.setAnimationWith(t,e.emptyAnimation(),!1);return s.mixDuration=i,s.trackEnd=i,s}addEmptyAnimation(t,i=0,s=0){let n=this.addAnimationWith(t,e.emptyAnimation(),!1,s);return s<=0&&(n.delay=Math.max(n.delay+n.mixDuration-i,0)),n.mixDuration=i,n.trackEnd=i,n}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let i=0,s=this.tracks.length;i<s;i++){let t=this.tracks[i];t&&this.setEmptyAnimation(t.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,i,s){let n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=e,n.animation=t,n.loop=i,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.alphaAttachmentThreshold=0,n.mixAttachmentThreshold=0,n.mixDrawOrderThreshold=0,n.animationStart=0,n.animationEnd=t.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=s?this.data.getMix(s.animation,t):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=MixBlend.replace,n}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,i=e.length;t<i;t++){let i=e[t];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&i.mixBlend==MixBlend.add||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(e){let t=e.mixingTo,i=e.animation.timelines,s=e.animation.timelines.length,n=e.timelineMode;n.length=s;let a=e.timelineHoldMix;a.length=0;let r=this.propertyIDs;if(t&&t.holdPrevious)for(let o=0;o<s;o++)n[o]=r.addAll(i[o].getPropertyIds())?HOLD_FIRST:HOLD_SUBSEQUENT;else e:for(let o=0;o<s;o++){let s=i[o],l=s.getPropertyIds();if(r.addAll(l))if(!t||s instanceof AttachmentTimeline||s instanceof DrawOrderTimeline||s instanceof EventTimeline||!t.animation.hasTimeline(l))n[o]=FIRST;else{for(let i=t.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(l)){if(e.mixDuration>0){n[o]=HOLD_MIX,a[o]=i;continue e}break}n[o]=HOLD_FIRST}else n[o]=SUBSEQUENT}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};__publicField(_AnimationState,"_emptyAnimation",new Animation("<empty>",[],0));let AnimationState=_AnimationState;class TrackEntry{constructor(){__publicField(this,"animation",null),__publicField(this,"previous",null),__publicField(this,"next",null),__publicField(this,"mixingFrom",null),__publicField(this,"mixingTo",null),__publicField(this,"listener",null),__publicField(this,"trackIndex",0),__publicField(this,"loop",!1),__publicField(this,"holdPrevious",!1),__publicField(this,"reverse",!1),__publicField(this,"shortestRotation",!1),__publicField(this,"eventThreshold",0),__publicField(this,"mixAttachmentThreshold",0),__publicField(this,"alphaAttachmentThreshold",0),__publicField(this,"mixDrawOrderThreshold",0),__publicField(this,"animationStart",0),__publicField(this,"animationEnd",0),__publicField(this,"animationLast",0),__publicField(this,"nextAnimationLast",0),__publicField(this,"delay",0),__publicField(this,"trackTime",0),__publicField(this,"trackLast",0),__publicField(this,"nextTrackLast",0),__publicField(this,"trackEnd",0),__publicField(this,"timeScale",0),__publicField(this,"alpha",0),__publicField(this,"mixTime",0),__publicField(this,"_mixDuration",0),__publicField(this,"interruptAlpha",0),__publicField(this,"totalAlpha",0),__publicField(this,"mixBlend",MixBlend.replace),__publicField(this,"timelineMode",new Array),__publicField(this,"timelineHoldMix",new Array),__publicField(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(e){this._mixDuration=e}setMixDurationWithDelay(e,t){this._mixDuration=e,t<=0&&(t=null!=this.previous?Math.max(t+this.previous.getTrackComplete()-e,0):0),this.delay=t}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return 0==e?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(0!=e){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}wasApplied(){return-1!=this.nextTrackLast}isNextReady(){return null!=this.next&&this.nextTrackLast-this.next.delay>=0}}class EventQueue{constructor(e){__publicField(this,"objects",[]),__publicField(this,"drainDisabled",!1),__publicField(this,"animState"),this.animState=e}start(e){this.objects.push(EventType.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(EventType.interrupt),this.objects.push(e)}end(e){this.objects.push(EventType.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(EventType.dispose),this.objects.push(e)}complete(e){this.objects.push(EventType.complete),this.objects.push(e)}event(e,t){this.objects.push(EventType.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let i=0;i<e.length;i+=2){let s=e[i],n=e[i+1];switch(s){case EventType.start:n.listener&&n.listener.start&&n.listener.start(n);for(let e=0;e<t.length;e++){let i=t[e];i.start&&i.start(n)}break;case EventType.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(let e=0;e<t.length;e++){let i=t[e];i.interrupt&&i.interrupt(n)}break;case EventType.end:n.listener&&n.listener.end&&n.listener.end(n);for(let e=0;e<t.length;e++){let i=t[e];i.end&&i.end(n)}case EventType.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(let e=0;e<t.length;e++){let i=t[e];i.dispose&&i.dispose(n)}this.animState.trackEntryPool.free(n);break;case EventType.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(let e=0;e<t.length;e++){let i=t[e];i.complete&&i.complete(n)}break;case EventType.event:let s=e[2+i++];n.listener&&n.listener.event&&n.listener.event(n,s);for(let e=0;e<t.length;e++){let i=t[e];i.event&&i.event(n,s)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var EventType,EventType2;EventType2=EventType||(EventType={}),EventType2[EventType2.start=0]="start",EventType2[EventType2.interrupt=1]="interrupt",EventType2[EventType2.end=2]="end",EventType2[EventType2.dispose=3]="dispose",EventType2[EventType2.complete=4]="complete",EventType2[EventType2.event=5]="event";const SUBSEQUENT=0,FIRST=1,HOLD_SUBSEQUENT=2,HOLD_FIRST=3,HOLD_MIX=4,SETUP=1,CURRENT=2;class AnimationStateData{constructor(e){if(__publicField(this,"skeletonData"),__publicField(this,"animationToMixTime",{}),__publicField(this,"defaultMix",0),!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}setMix(e,t,i){let s=this.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);let n=this.skeletonData.findAnimation(t);if(!n)throw new Error("Animation not found: "+t);this.setMixWith(s,n,i)}setMixWith(e,t,i){if(!e)throw new Error("from cannot be null.");if(!t)throw new Error("to cannot be null.");let s=e.name+"."+t.name;this.animationToMixTime[s]=i}getMix(e,t){let i=e.name+"."+t.name,s=this.animationToMixTime[i];return void 0===s?this.defaultMix:s}}class BoundingBoxAttachment extends VertexAttachment{constructor(e){super(e),__publicField(this,"color",new Color(1,1,1,1))}copy(){let e=new BoundingBoxAttachment(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}}class ClippingAttachment extends VertexAttachment{constructor(e){super(e),__publicField(this,"endSlot",null),__publicField(this,"color",new Color(.2275,.2275,.8078,1))}copy(){let e=new ClippingAttachment(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}}class Texture{constructor(e){__publicField(this,"_image"),this._image=e}getImage(){return this._image}}var TextureFilter,TextureFilter2,TextureWrap,TextureWrap2;TextureFilter2=TextureFilter||(TextureFilter={}),TextureFilter2[TextureFilter2.Nearest=9728]="Nearest",TextureFilter2[TextureFilter2.Linear=9729]="Linear",TextureFilter2[TextureFilter2.MipMap=9987]="MipMap",TextureFilter2[TextureFilter2.MipMapNearestNearest=9984]="MipMapNearestNearest",TextureFilter2[TextureFilter2.MipMapLinearNearest=9985]="MipMapLinearNearest",TextureFilter2[TextureFilter2.MipMapNearestLinear=9986]="MipMapNearestLinear",TextureFilter2[TextureFilter2.MipMapLinearLinear=9987]="MipMapLinearLinear",TextureWrap2=TextureWrap||(TextureWrap={}),TextureWrap2[TextureWrap2.MirroredRepeat=33648]="MirroredRepeat",TextureWrap2[TextureWrap2.ClampToEdge=33071]="ClampToEdge",TextureWrap2[TextureWrap2.Repeat=10497]="Repeat";class TextureRegion{constructor(){__publicField(this,"texture"),__publicField(this,"u",0),__publicField(this,"v",0),__publicField(this,"u2",0),__publicField(this,"v2",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"degrees",0),__publicField(this,"offsetX",0),__publicField(this,"offsetY",0),__publicField(this,"originalWidth",0),__publicField(this,"originalHeight",0)}}class TextureAtlas{constructor(e){__publicField(this,"pages",new Array),__publicField(this,"regions",new Array);let t=new TextureAtlasReader(e),i=new Array(4),s={size:e=>{e.width=parseInt(i[1]),e.height=parseInt(i[2])},format:()=>{},filter:e=>{e.minFilter=Utils.enumValue(TextureFilter,i[1]),e.magFilter=Utils.enumValue(TextureFilter,i[2])},repeat:e=>{-1!=i[1].indexOf("x")&&(e.uWrap=TextureWrap.Repeat),-1!=i[1].indexOf("y")&&(e.vWrap=TextureWrap.Repeat)},pma:e=>{e.pma="true"==i[1]}};var n={xy:e=>{e.x=parseInt(i[1]),e.y=parseInt(i[2])},size:e=>{e.width=parseInt(i[1]),e.height=parseInt(i[2])},bounds:e=>{e.x=parseInt(i[1]),e.y=parseInt(i[2]),e.width=parseInt(i[3]),e.height=parseInt(i[4])},offset:e=>{e.offsetX=parseInt(i[1]),e.offsetY=parseInt(i[2])},orig:e=>{e.originalWidth=parseInt(i[1]),e.originalHeight=parseInt(i[2])},offsets:e=>{e.offsetX=parseInt(i[1]),e.offsetY=parseInt(i[2]),e.originalWidth=parseInt(i[3]),e.originalHeight=parseInt(i[4])},rotate:e=>{let t=i[1];"true"==t?e.degrees=90:"false"!=t&&(e.degrees=parseInt(t))},index:e=>{e.index=parseInt(i[1])}};let a=t.readLine();for(;a&&0==a.trim().length;)a=t.readLine();for(;a&&0!=a.trim().length&&0!=t.readEntry(i,a);)a=t.readLine();let r=null,o=null,l=null;for(;null!==a;)if(0==a.trim().length)r=null,a=t.readLine();else if(r){let e=new TextureAtlasRegion(r,a);for(;;){let s=t.readEntry(i,a=t.readLine());if(0==s)break;let r=n[i[0]];if(r)r(e);else{o||(o=[]),l||(l=[]),o.push(i[0]);let e=[];for(let t=0;t<s;t++)e.push(parseInt(i[t+1]));l.push(e)}}0==e.originalWidth&&0==e.originalHeight&&(e.originalWidth=e.width,e.originalHeight=e.height),o&&o.length>0&&l&&l.length>0&&(e.names=o,e.values=l,o=null,l=null),e.u=e.x/r.width,e.v=e.y/r.height,90==e.degrees?(e.u2=(e.x+e.height)/r.width,e.v2=(e.y+e.width)/r.height):(e.u2=(e.x+e.width)/r.width,e.v2=(e.y+e.height)/r.height),this.regions.push(e)}else{for(r=new TextureAtlasPage(a.trim());0!=t.readEntry(i,a=t.readLine());){let e=s[i[0]];e&&e(r)}this.pages.push(r)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let i of this.pages)i.setTexture(e.get(t+i.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)null==(e=this.pages[t].texture)||e.dispose()}}class TextureAtlasReader{constructor(e){__publicField(this,"lines"),__publicField(this,"index",0),this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t)return 0;if(0==(t=t.trim()).length)return 0;let i=t.indexOf(":");if(-1==i)return 0;e[0]=t.substr(0,i).trim();for(let s=1,n=i+1;;s++){let i=t.indexOf(",",n);if(-1==i)return e[s]=t.substr(n).trim(),s;if(e[s]=t.substr(n,i-n).trim(),n=i+1,4==s)return 4}}}class TextureAtlasPage{constructor(e){__publicField(this,"name"),__publicField(this,"minFilter",TextureFilter.Nearest),__publicField(this,"magFilter",TextureFilter.Nearest),__publicField(this,"uWrap",TextureWrap.ClampToEdge),__publicField(this,"vWrap",TextureWrap.ClampToEdge),__publicField(this,"texture",null),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"pma",!1),__publicField(this,"regions",new Array),this.name=e}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap);for(let t of this.regions)t.texture=e}}class TextureAtlasRegion extends TextureRegion{constructor(e,t){super(),__publicField(this,"page"),__publicField(this,"name"),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"offsetX",0),__publicField(this,"offsetY",0),__publicField(this,"originalWidth",0),__publicField(this,"originalHeight",0),__publicField(this,"index",0),__publicField(this,"degrees",0),__publicField(this,"names",null),__publicField(this,"values",null),this.page=e,this.name=t,e.regions.push(this)}}class MeshAttachment extends VertexAttachment{constructor(e,t){super(e),__publicField(this,"region",null),__publicField(this,"path"),__publicField(this,"regionUVs",[]),__publicField(this,"uvs",[]),__publicField(this,"triangles",[]),__publicField(this,"color",new Color(1,1,1,1)),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"hullLength",0),__publicField(this,"edges",[]),__publicField(this,"parentMesh",null),__publicField(this,"sequence",null),__publicField(this,"tempColor",new Color(0,0,0,0)),this.path=t}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.regionUVs;this.uvs&&this.uvs.length==e.length||(this.uvs=Utils.newFloatArray(e.length));let t=this.uvs,i=this.uvs.length,s=this.region.u,n=this.region.v,a=0,r=0;if(this.region instanceof TextureAtlasRegion){let o=this.region,l=o.page,h=l.width,d=l.height;switch(o.degrees){case 90:s-=(o.originalHeight-o.offsetY-o.height)/h,n-=(o.originalWidth-o.offsetX-o.width)/d,a=o.originalHeight/h,r=o.originalWidth/d;for(let o=0;o<i;o+=2)t[o]=s+e[o+1]*a,t[o+1]=n+(1-e[o])*r;return;case 180:s-=(o.originalWidth-o.offsetX-o.width)/h,n-=o.offsetY/d,a=o.originalWidth/h,r=o.originalHeight/d;for(let o=0;o<i;o+=2)t[o]=s+(1-e[o])*a,t[o+1]=n+(1-e[o+1])*r;return;case 270:s-=o.offsetY/h,n-=o.offsetX/d,a=o.originalHeight/h,r=o.originalWidth/d;for(let o=0;o<i;o+=2)t[o]=s+(1-e[o+1])*a,t[o+1]=n+e[o]*r;return}s-=o.offsetX/h,n-=(o.originalHeight-o.offsetY-o.height)/d,a=o.originalWidth/h,r=o.originalHeight/d}else this.region?(a=this.region.u2-s,r=this.region.v2-n):(s=n=0,a=r=1);for(let o=0;o<i;o+=2)t[o]=s+e[o]*a,t[o+1]=n+e[o+1]*r}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let e=new MeshAttachment(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}computeWorldVertices(e,t,i,s,n,a){null!=this.sequence&&this.sequence.apply(e,this),super.computeWorldVertices(e,t,i,s,n,a)}newLinkedMesh(){let e=new MeshAttachment(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),null!=e.region&&e.updateRegion(),e}}class PathAttachment extends VertexAttachment{constructor(e){super(e),__publicField(this,"lengths",[]),__publicField(this,"closed",!1),__publicField(this,"constantSpeed",!1),__publicField(this,"color",new Color(1,1,1,1))}copy(){let e=new PathAttachment(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}}class PointAttachment extends VertexAttachment{constructor(e){super(e),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"rotation",0),__publicField(this,"color",new Color(.38,.94,0,1))}computeWorldPosition(e,t){return t.x=this.x*e.a+this.y*e.b+e.worldX,t.y=this.x*e.c+this.y*e.d+e.worldY,t}computeWorldRotation(e){const t=this.rotation*MathUtils.degRad,i=Math.cos(t),s=Math.sin(t),n=i*e.a+s*e.b,a=i*e.c+s*e.d;return MathUtils.atan2Deg(a,n)}copy(){let e=new PointAttachment(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}}const _RegionAttachment=class e extends Attachment{constructor(e,t){super(e),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"scaleX",1),__publicField(this,"scaleY",1),__publicField(this,"rotation",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"color",new Color(1,1,1,1)),__publicField(this,"path"),__publicField(this,"region",null),__publicField(this,"sequence",null),__publicField(this,"offset",Utils.newFloatArray(8)),__publicField(this,"uvs",Utils.newFloatArray(8)),__publicField(this,"tempColor",new Color(1,1,1,1)),this.path=t}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.region,t=this.uvs;if(null==e)return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=1,t[5]=1,t[6]=1,void(t[7]=0);let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*i,a=-this.height/2*this.scaleY+this.region.offsetY*s,r=n+this.region.width*i,o=a+this.region.height*s,l=this.rotation*MathUtils.degRad,h=Math.cos(l),d=Math.sin(l),c=this.x,u=this.y,p=n*h+c,g=n*d,m=a*h+u,f=a*d,v=r*h+c,b=r*d,y=o*h+u,C=o*d,x=this.offset;x[0]=p-f,x[1]=m+g,x[2]=p-C,x[3]=y+g,x[4]=v-C,x[5]=y+b,x[6]=v-f,x[7]=m+b,90==e.degrees?(t[0]=e.u2,t[1]=e.v2,t[2]=e.u,t[3]=e.v2,t[4]=e.u,t[5]=e.v,t[6]=e.u2,t[7]=e.v):(t[0]=e.u,t[1]=e.v2,t[2]=e.u,t[3]=e.v,t[4]=e.u2,t[5]=e.v,t[6]=e.u2,t[7]=e.v2)}computeWorldVertices(e,t,i,s){null!=this.sequence&&this.sequence.apply(e,this);let n=e.bone,a=this.offset,r=n.worldX,o=n.worldY,l=n.a,h=n.b,d=n.c,c=n.d,u=0,p=0;u=a[0],p=a[1],t[i]=u*l+p*h+r,t[i+1]=u*d+p*c+o,i+=s,u=a[2],p=a[3],t[i]=u*l+p*h+r,t[i+1]=u*d+p*c+o,i+=s,u=a[4],p=a[5],t[i]=u*l+p*h+r,t[i+1]=u*d+p*c+o,i+=s,u=a[6],p=a[7],t[i]=u*l+p*h+r,t[i+1]=u*d+p*c+o}copy(){let t=new e(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Utils.arrayCopy(this.uvs,0,t.uvs,0,8),Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}};__publicField(_RegionAttachment,"X1",0),__publicField(_RegionAttachment,"Y1",1),__publicField(_RegionAttachment,"C1R",2),__publicField(_RegionAttachment,"C1G",3),__publicField(_RegionAttachment,"C1B",4),__publicField(_RegionAttachment,"C1A",5),__publicField(_RegionAttachment,"U1",6),__publicField(_RegionAttachment,"V1",7),__publicField(_RegionAttachment,"X2",8),__publicField(_RegionAttachment,"Y2",9),__publicField(_RegionAttachment,"C2R",10),__publicField(_RegionAttachment,"C2G",11),__publicField(_RegionAttachment,"C2B",12),__publicField(_RegionAttachment,"C2A",13),__publicField(_RegionAttachment,"U2",14),__publicField(_RegionAttachment,"V2",15),__publicField(_RegionAttachment,"X3",16),__publicField(_RegionAttachment,"Y3",17),__publicField(_RegionAttachment,"C3R",18),__publicField(_RegionAttachment,"C3G",19),__publicField(_RegionAttachment,"C3B",20),__publicField(_RegionAttachment,"C3A",21),__publicField(_RegionAttachment,"U3",22),__publicField(_RegionAttachment,"V3",23),__publicField(_RegionAttachment,"X4",24),__publicField(_RegionAttachment,"Y4",25),__publicField(_RegionAttachment,"C4R",26),__publicField(_RegionAttachment,"C4G",27),__publicField(_RegionAttachment,"C4B",28),__publicField(_RegionAttachment,"C4A",29),__publicField(_RegionAttachment,"U4",30),__publicField(_RegionAttachment,"V4",31);let RegionAttachment=_RegionAttachment;class AtlasAttachmentLoader{constructor(e){__publicField(this,"atlas"),this.atlas=e}loadSequence(e,t,i){let s=i.regions;for(let n=0,a=s.length;n<a;n++){let a=i.getPath(t,n),r=this.atlas.findRegion(a);if(null==r)throw new Error("Region not found in atlas: "+a+" (sequence: "+e+")");s[n]=r}}newRegionAttachment(e,t,i,s){let n=new RegionAttachment(t,i);if(null!=s)this.loadSequence(t,i,s);else{let e=this.atlas.findRegion(i);if(!e)throw new Error("Region not found in atlas: "+i+" (region attachment: "+t+")");n.region=e}return n}newMeshAttachment(e,t,i,s){let n=new MeshAttachment(t,i);if(null!=s)this.loadSequence(t,i,s);else{let e=this.atlas.findRegion(i);if(!e)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+t+")");n.region=e}return n}newBoundingBoxAttachment(e,t){return new BoundingBoxAttachment(t)}newPathAttachment(e,t){return new PathAttachment(t)}newPointAttachment(e,t){return new PointAttachment(t)}newClippingAttachment(e,t){return new ClippingAttachment(t)}}class BoneData{constructor(e,t,i){if(__publicField(this,"index",0),__publicField(this,"name"),__publicField(this,"parent",null),__publicField(this,"length",0),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"rotation",0),__publicField(this,"scaleX",1),__publicField(this,"scaleY",1),__publicField(this,"shearX",0),__publicField(this,"shearY",0),__publicField(this,"inherit",Inherit.Normal),__publicField(this,"skinRequired",!1),__publicField(this,"color",new Color),__publicField(this,"icon"),__publicField(this,"visible",!1),e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=i}}var Inherit,Inherit2;Inherit2=Inherit||(Inherit={}),Inherit2[Inherit2.Normal=0]="Normal",Inherit2[Inherit2.OnlyTranslation=1]="OnlyTranslation",Inherit2[Inherit2.NoRotationOrReflection=2]="NoRotationOrReflection",Inherit2[Inherit2.NoScale=3]="NoScale",Inherit2[Inherit2.NoScaleOrReflection=4]="NoScaleOrReflection";class Bone{constructor(e,t,i){if(__publicField(this,"data"),__publicField(this,"skeleton"),__publicField(this,"parent",null),__publicField(this,"children",new Array),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"rotation",0),__publicField(this,"scaleX",0),__publicField(this,"scaleY",0),__publicField(this,"shearX",0),__publicField(this,"shearY",0),__publicField(this,"ax",0),__publicField(this,"ay",0),__publicField(this,"arotation",0),__publicField(this,"ascaleX",0),__publicField(this,"ascaleY",0),__publicField(this,"ashearX",0),__publicField(this,"ashearY",0),__publicField(this,"a",0),__publicField(this,"b",0),__publicField(this,"c",0),__publicField(this,"d",0),__publicField(this,"worldY",0),__publicField(this,"worldX",0),__publicField(this,"inherit",Inherit.Normal),__publicField(this,"sorted",!1),__publicField(this,"active",!1),!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(e){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,t,i,s,n,a,r){this.ax=e,this.ay=t,this.arotation=i,this.ascaleX=s,this.ascaleY=n,this.ashearX=a,this.ashearY=r;let o=this.parent;if(!o){let o=this.skeleton;const l=o.scaleX,h=o.scaleY,d=(i+a)*MathUtils.degRad,c=(i+90+r)*MathUtils.degRad;return this.a=Math.cos(d)*s*l,this.b=Math.cos(c)*n*l,this.c=Math.sin(d)*s*h,this.d=Math.sin(c)*n*h,this.worldX=e*l+o.x,void(this.worldY=t*h+o.y)}let l=o.a,h=o.b,d=o.c,c=o.d;switch(this.worldX=l*e+h*t+o.worldX,this.worldY=d*e+c*t+o.worldY,this.inherit){case Inherit.Normal:{const e=(i+a)*MathUtils.degRad,t=(i+90+r)*MathUtils.degRad,o=Math.cos(e)*s,u=Math.cos(t)*n,p=Math.sin(e)*s,g=Math.sin(t)*n;return this.a=l*o+h*p,this.b=l*u+h*g,this.c=d*o+c*p,void(this.d=d*u+c*g)}case Inherit.OnlyTranslation:{const e=(i+a)*MathUtils.degRad,t=(i+90+r)*MathUtils.degRad;this.a=Math.cos(e)*s,this.b=Math.cos(t)*n,this.c=Math.sin(e)*s,this.d=Math.sin(t)*n;break}case Inherit.NoRotationOrReflection:{let e=1/this.skeleton.scaleX,t=1/this.skeleton.scaleY;l*=e,d*=t;let o=l*l+d*d,u=0;o>1e-4?(o=Math.abs(l*c*t-h*e*d)/o,h=d*o,c=l*o,u=Math.atan2(d,l)*MathUtils.radDeg):(l=0,d=0,u=90-Math.atan2(c,h)*MathUtils.radDeg);const p=(i+a-u)*MathUtils.degRad,g=(i+r-u+90)*MathUtils.degRad,m=Math.cos(p)*s,f=Math.cos(g)*n,v=Math.sin(p)*s,b=Math.sin(g)*n;this.a=l*m-h*v,this.b=l*f-h*b,this.c=d*m+c*v,this.d=d*f+c*b;break}case Inherit.NoScale:case Inherit.NoScaleOrReflection:{i*=MathUtils.degRad;const e=Math.cos(i),t=Math.sin(i);let o=(l*e+h*t)/this.skeleton.scaleX,u=(d*e+c*t)/this.skeleton.scaleY,p=Math.sqrt(o*o+u*u);p>1e-5&&(p=1/p),o*=p,u*=p,p=Math.sqrt(o*o+u*u),this.inherit==Inherit.NoScale&&l*c-h*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p),i=Math.PI/2+Math.atan2(u,o);const g=Math.cos(i)*p,m=Math.sin(i)*p;a*=MathUtils.degRad,r=(90+r)*MathUtils.degRad;const f=Math.cos(a)*s,v=Math.cos(r)*n,b=Math.sin(a)*s,y=Math.sin(r)*n;this.a=o*f+g*b,this.b=o*v+g*y,this.c=u*f+m*b,this.d=u*v+m*y;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY,this.inherit=e.inherit}updateAppliedTransform(){let e=this.parent;if(!e)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*MathUtils.radDeg);let t,i,s,n,a=e.a,r=e.b,o=e.c,l=e.d,h=1/(a*l-r*o),d=l*h,c=r*h,u=o*h,p=a*h,g=this.worldX-e.worldX,m=this.worldY-e.worldY;if(this.ax=g*d-m*c,this.ay=m*p-g*u,this.inherit==Inherit.OnlyTranslation)t=this.a,i=this.b,s=this.c,n=this.d;else{switch(this.inherit){case Inherit.NoRotationOrReflection:{let e=Math.abs(a*l-r*o)/(a*a+o*o);r=-o*this.skeleton.scaleX*e/this.skeleton.scaleY,l=a*this.skeleton.scaleY*e/this.skeleton.scaleX,h=1/(a*l-r*o),d=l*h,c=r*h;break}case Inherit.NoScale:case Inherit.NoScaleOrReflection:let e=MathUtils.cosDeg(this.rotation),t=MathUtils.sinDeg(this.rotation);a=(a*e+r*t)/this.skeleton.scaleX,o=(o*e+l*t)/this.skeleton.scaleY;let i=Math.sqrt(a*a+o*o);i>1e-5&&(i=1/i),a*=i,o*=i,i=Math.sqrt(a*a+o*o),this.inherit==Inherit.NoScale&&h<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(i=-i);let s=MathUtils.PI/2+Math.atan2(o,a);r=Math.cos(s)*i,l=Math.sin(s)*i,h=1/(a*l-r*o),d=l*h,c=r*h,u=o*h,p=a*h}t=d*this.a-c*this.c,i=d*this.b-c*this.d,s=p*this.c-u*this.a,n=p*this.d-u*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(t*t+s*s),this.ascaleX>1e-4){let e=t*n-i*s;this.ascaleY=e/this.ascaleX,this.ashearY=-Math.atan2(t*i+s*n,e)*MathUtils.radDeg,this.arotation=Math.atan2(s,t)*MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(i*i+n*n),this.ashearY=0,this.arotation=90-Math.atan2(n,i)*MathUtils.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*MathUtils.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*MathUtils.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(e){let t=1/(this.a*this.d-this.b*this.c),i=e.x-this.worldX,s=e.y-this.worldY;return e.x=i*this.d*t-s*this.b*t,e.y=s*this.a*t-i*this.c*t,e}localToWorld(e){let t=e.x,i=e.y;return e.x=t*this.a+i*this.b+this.worldX,e.y=t*this.c+i*this.d+this.worldY,e}worldToParent(e){if(null==e)throw new Error("world cannot be null.");return null==this.parent?e:this.parent.worldToLocal(e)}parentToWorld(e){if(null==e)throw new Error("world cannot be null.");return null==this.parent?e:this.parent.localToWorld(e)}worldToLocalRotation(e){let t=MathUtils.sinDeg(e),i=MathUtils.cosDeg(e);return Math.atan2(this.a*t-this.c*i,this.d*i-this.b*t)*MathUtils.radDeg+this.rotation-this.shearX}localToWorldRotation(e){e-=this.rotation-this.shearX;let t=MathUtils.sinDeg(e),i=MathUtils.cosDeg(e);return Math.atan2(i*this.c+t*this.d,i*this.a+t*this.b)*MathUtils.radDeg}rotateWorld(e){e*=MathUtils.degRad;const t=Math.sin(e),i=Math.cos(e),s=this.a,n=this.b;this.a=i*s-t*this.c,this.b=i*n-t*this.d,this.c=t*s+i*this.c,this.d=t*n+i*this.d}}class ConstraintData{constructor(e,t,i){__publicField(this,"name"),__publicField(this,"order"),__publicField(this,"skinRequired"),this.name=e,this.order=t,this.skinRequired=i}}let Event$1=class{constructor(e,t){if(__publicField(this,"data"),__publicField(this,"intValue",0),__publicField(this,"floatValue",0),__publicField(this,"stringValue",null),__publicField(this,"time",0),__publicField(this,"volume",0),__publicField(this,"balance",0),!t)throw new Error("data cannot be null.");this.time=e,this.data=t}};class EventData{constructor(e){__publicField(this,"name"),__publicField(this,"intValue",0),__publicField(this,"floatValue",0),__publicField(this,"stringValue",null),__publicField(this,"audioPath",null),__publicField(this,"volume",0),__publicField(this,"balance",0),this.name=e}}class IkConstraint{constructor(e,t){if(__publicField(this,"data"),__publicField(this,"bones"),__publicField(this,"target"),__publicField(this,"bendDirection",0),__publicField(this,"compress",!1),__publicField(this,"stretch",!1),__publicField(this,"mix",1),__publicField(this,"softness",0),__publicField(this,"active",!1),!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let s=0;s<e.bones.length;s++){let i=t.findBone(e.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${e.bones[s].name}`);this.bones.push(i)}let i=t.findBone(e.target.name);if(!i)throw new Error(`Couldn't find bone ${e.target.name}`);this.target=i,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}update(e){if(0==this.mix)return;let t=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(e,t,i,s,n,a,r){let o=e.parent;if(!o)throw new Error("IK bone must have parent.");let l=o.a,h=o.b,d=o.c,c=o.d,u=-e.ashearX-e.arotation,p=0,g=0;switch(e.inherit){case Inherit.OnlyTranslation:p=(t-e.worldX)*MathUtils.signum(e.skeleton.scaleX),g=(i-e.worldY)*MathUtils.signum(e.skeleton.scaleY);break;case Inherit.NoRotationOrReflection:let s=Math.abs(l*c-h*d)/Math.max(1e-4,l*l+d*d),n=l/e.skeleton.scaleX,a=d/e.skeleton.scaleY;h=-a*s*e.skeleton.scaleX,c=n*s*e.skeleton.scaleY,u+=Math.atan2(a,n)*MathUtils.radDeg;default:let r=t-o.worldX,m=i-o.worldY,f=l*c-h*d;Math.abs(f)<=1e-4?(p=0,g=0):(p=(r*c-m*h)/f-e.ax,g=(m*l-r*d)/f-e.ay)}u+=Math.atan2(g,p)*MathUtils.radDeg,e.ascaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360);let m=e.ascaleX,f=e.ascaleY;if(s||n){switch(e.inherit){case Inherit.NoScale:case Inherit.NoScaleOrReflection:p=t-e.worldX,g=i-e.worldY}const o=e.data.length*m;if(o>1e-4){const e=p*p+g*g;if(s&&e<o*o||n&&e>o*o){const t=(Math.sqrt(e)/o-1)*r+1;m*=t,a&&(f*=t)}}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+u*r,m,f,e.ashearX,e.ashearY)}apply2(e,t,i,s,n,a,r,o,l){if(e.inherit!=Inherit.Normal||t.inherit!=Inherit.Normal)return;let h=e.ax,d=e.ay,c=e.ascaleX,u=e.ascaleY,p=c,g=u,m=t.ascaleX,f=0,v=0,b=0;c<0?(c=-c,f=180,b=-1):(f=0,b=1),u<0&&(u=-u,b=-b),m<0?(m=-m,v=180):v=0;let y=t.ax,C=0,x=0,S=0,w=e.a,T=e.b,P=e.c,_=e.d,M=Math.abs(c-u)<=1e-4;!M||a?(C=0,x=w*y+e.worldX,S=P*y+e.worldY):(C=t.ay,x=w*y+T*C+e.worldX,S=P*y+_*C+e.worldY);let O=e.parent;if(!O)throw new Error("IK parent must itself have a parent.");w=O.a,T=O.b,P=O.c,_=O.d;let k=w*_-T*P,$=x-O.worldX,G=S-O.worldY;k=Math.abs(k)<=1e-4?0:1/k;let E,V,R=($*_-G*T)*k-h,I=(G*w-$*P)*k-d,A=Math.sqrt(R*R+I*I),D=t.data.length*m;if(A<1e-4)return this.apply1(e,i,s,!1,a,!1,l),void t.updateWorldTransformWith(y,C,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);$=i-O.worldX,G=s-O.worldY;let B=($*_-G*T)*k-h,L=(G*w-$*P)*k-d,F=B*B+L*L;if(0!=o){o*=c*(m+1)*.5;let e=Math.sqrt(F),t=e-A-D*c+o;if(t>0){let i=Math.min(1,t/(2*o))-1;i=(t-o*(1-i*i))/e,B-=i*B,L-=i*L,F=B*B+L*L}}e:if(M){D*=c;let e=(F-A*A-D*D)/(2*A*D);e<-1?(e=-1,V=Math.PI*n):e>1?(e=1,V=0,a&&(w=(Math.sqrt(F)/(A+D)-1)*l+1,p*=w,r&&(g*=w))):V=Math.acos(e)*n,w=A+D*e,T=D*Math.sin(V),E=Math.atan2(L*w-B*T,B*w+L*T)}else{w=c*D,T=u*D;let e=w*w,t=T*T,i=Math.atan2(L,B);P=t*A*A+e*F-e*t;let s=-2*t*A,a=t-e;if(_=s*s-4*a*P,_>=0){let e=Math.sqrt(_);s<0&&(e=-e),e=.5*-(s+e);let t=e/a,r=P/e,o=Math.abs(t)<Math.abs(r)?t:r;if(t=F-o*o,t>=0){G=Math.sqrt(t)*n,E=i-Math.atan2(G,o),V=Math.atan2(G/u,(o-A)/c);break e}}let r=MathUtils.PI,o=A-w,l=o*o,h=0,d=0,p=A+w,g=p*p,m=0;P=-w*A/(e-t),P>=-1&&P<=1&&(P=Math.acos(P),$=w*Math.cos(P)+A,G=T*Math.sin(P),_=$*$+G*G,_<l&&(r=P,l=_,o=$,h=G),_>g&&(d=P,g=_,p=$,m=G)),F<=.5*(l+g)?(E=i-Math.atan2(h*n,o),V=r*n):(E=i-Math.atan2(m*n,p),V=d*n)}let j=Math.atan2(C,y)*b,N=e.arotation;E=(E-j)*MathUtils.radDeg+f-N,E>180?E-=360:E<-180&&(E+=360),e.updateWorldTransformWith(h,d,N+E*l,p,g,0,0),N=t.arotation,V=((V+j)*MathUtils.radDeg-t.ashearX)*b+v-N,V>180?V-=360:V<-180&&(V+=360),t.updateWorldTransformWith(y,C,N+V*l,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}}class IkConstraintData extends ConstraintData{constructor(e){super(e,0,!1),__publicField(this,"bones",new Array),__publicField(this,"_target",null),__publicField(this,"bendDirection",0),__publicField(this,"compress",!1),__publicField(this,"stretch",!1),__publicField(this,"uniform",!1),__publicField(this,"mix",0),__publicField(this,"softness",0)}set target(e){this._target=e}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class PathConstraintData extends ConstraintData{constructor(e){super(e,0,!1),__publicField(this,"bones",new Array),__publicField(this,"_target",null),__publicField(this,"positionMode",PositionMode.Fixed),__publicField(this,"spacingMode",SpacingMode.Fixed),__publicField(this,"rotateMode",RotateMode.Chain),__publicField(this,"offsetRotation",0),__publicField(this,"position",0),__publicField(this,"spacing",0),__publicField(this,"mixRotate",0),__publicField(this,"mixX",0),__publicField(this,"mixY",0)}set target(e){this._target=e}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var PositionMode,PositionMode2,SpacingMode,SpacingMode2,RotateMode,RotateMode2;PositionMode2=PositionMode||(PositionMode={}),PositionMode2[PositionMode2.Fixed=0]="Fixed",PositionMode2[PositionMode2.Percent=1]="Percent",SpacingMode2=SpacingMode||(SpacingMode={}),SpacingMode2[SpacingMode2.Length=0]="Length",SpacingMode2[SpacingMode2.Fixed=1]="Fixed",SpacingMode2[SpacingMode2.Percent=2]="Percent",SpacingMode2[SpacingMode2.Proportional=3]="Proportional",RotateMode2=RotateMode||(RotateMode={}),RotateMode2[RotateMode2.Tangent=0]="Tangent",RotateMode2[RotateMode2.Chain=1]="Chain",RotateMode2[RotateMode2.ChainScale=2]="ChainScale";const _PathConstraint=class e{constructor(e,t){if(__publicField(this,"data"),__publicField(this,"bones"),__publicField(this,"target"),__publicField(this,"position",0),__publicField(this,"spacing",0),__publicField(this,"mixRotate",0),__publicField(this,"mixX",0),__publicField(this,"mixY",0),__publicField(this,"spaces",new Array),__publicField(this,"positions",new Array),__publicField(this,"world",new Array),__publicField(this,"curves",new Array),__publicField(this,"lengths",new Array),__publicField(this,"segments",new Array),__publicField(this,"active",!1),!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let s=0,n=e.bones.length;s<n;s++){let i=t.findBone(e.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${e.bones[s].name}.`);this.bones.push(i)}let i=t.findSlot(e.target.name);if(!i)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=i,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}update(t){let i=this.target.getAttachment();if(!(i instanceof PathAttachment))return;let s=this.mixRotate,n=this.mixX,a=this.mixY;if(0==s&&0==n&&0==a)return;let r=this.data,o=r.rotateMode==RotateMode.Tangent,l=r.rotateMode==RotateMode.ChainScale,h=this.bones,d=h.length,c=o?d:d+1,u=Utils.setArraySize(this.spaces,c),p=l?this.lengths=Utils.setArraySize(this.lengths,d):[],g=this.spacing;switch(r.spacingMode){case SpacingMode.Percent:if(l)for(let e=0,s=c-1;e<s;e++){let t=h[e],i=t.data.length,s=i*t.a,n=i*t.c;p[e]=Math.sqrt(s*s+n*n)}Utils.arrayFill(u,1,c,g);break;case SpacingMode.Proportional:let t=0;for(let s=0,n=c-1;s<n;){let i=h[s],n=i.data.length;if(n<e.epsilon)l&&(p[s]=0),u[++s]=g;else{let e=n*i.a,a=n*i.c,r=Math.sqrt(e*e+a*a);l&&(p[s]=r),u[++s]=r,t+=r}}if(t>0){t=c/t*g;for(let e=1;e<c;e++)u[e]*=t}break;default:let i=r.spacingMode==SpacingMode.Length;for(let s=0,n=c-1;s<n;){let t=h[s],n=t.data.length;if(n<e.epsilon)l&&(p[s]=0),u[++s]=g;else{let e=n*t.a,a=n*t.c,r=Math.sqrt(e*e+a*a);l&&(p[s]=r),u[++s]=(i?n+g:g)*r/n}}}let m=this.computeWorldPositions(i,c,o),f=m[0],v=m[1],b=r.offsetRotation,y=!1;if(0==b)y=r.rotateMode==RotateMode.Chain;else{y=!1;let e=this.target.bone;b*=e.a*e.d-e.b*e.c>0?MathUtils.degRad:-.01745329277777778}for(let e=0,C=3;e<d;e++,C+=3){let t=h[e];t.worldX+=(f-t.worldX)*n,t.worldY+=(v-t.worldY)*a;let i=m[C],r=m[C+1],d=i-f,c=r-v;if(l){let i=p[e];if(0!=i){let e=(Math.sqrt(d*d+c*c)/i-1)*s+1;t.a*=e,t.c*=e}}if(f=i,v=r,s>0){let i=t.a,n=t.b,a=t.c,r=t.d,l=0,h=0,p=0;if(l=o?m[C-1]:0==u[e+1]?m[C+2]:Math.atan2(c,d),l-=Math.atan2(a,i),y){h=Math.cos(l),p=Math.sin(l);let e=t.data.length;f+=(e*(h*i-p*a)-d)*s,v+=(e*(p*i+h*a)-c)*s}else l+=b;l>MathUtils.PI?l-=MathUtils.PI2:l<-3.1415927&&(l+=MathUtils.PI2),l*=s,h=Math.cos(l),p=Math.sin(l),t.a=h*i-p*a,t.b=h*n-p*r,t.c=p*i+h*a,t.d=p*n+h*r}t.updateAppliedTransform()}}computeWorldPositions(t,i,s){let n=this.target,a=this.position,r=this.spaces,o=Utils.setArraySize(this.positions,3*i+2),l=this.world,h=t.closed,d=t.worldVerticesLength,c=d/6,u=e.NONE;if(!t.constantSpeed){let p=t.lengths;c-=h?1:2;let g,m=p[c];switch(this.data.positionMode==PositionMode.Percent&&(a*=m),this.data.spacingMode){case SpacingMode.Percent:g=m;break;case SpacingMode.Proportional:g=m/i;break;default:g=1}l=Utils.setArraySize(this.world,8);for(let f=0,v=0,b=0;f<i;f++,v+=3){let i=r[f]*g;a+=i;let y=a;if(h)y%=m,y<0&&(y+=m),b=0;else{if(y<0){u!=e.BEFORE&&(u=e.BEFORE,t.computeWorldVertices(n,2,4,l,0,2)),this.addBeforePosition(y,l,0,o,v);continue}if(y>m){u!=e.AFTER&&(u=e.AFTER,t.computeWorldVertices(n,d-6,4,l,0,2)),this.addAfterPosition(y-m,l,0,o,v);continue}}for(;;b++){let e=p[b];if(!(y>e)){if(0==b)y/=e;else{let t=p[b-1];y=(y-t)/(e-t)}break}}b!=u&&(u=b,h&&b==c?(t.computeWorldVertices(n,d-4,4,l,0,2),t.computeWorldVertices(n,0,4,l,4,2)):t.computeWorldVertices(n,6*b+2,8,l,0,2)),this.addCurvePosition(y,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],o,v,s||f>0&&0==i)}return o}h?(d+=2,l=Utils.setArraySize(this.world,d),t.computeWorldVertices(n,2,d-4,l,0,2),t.computeWorldVertices(n,0,2,l,d-4,2),l[d-2]=l[0],l[d-1]=l[1]):(c--,d-=4,l=Utils.setArraySize(this.world,d),t.computeWorldVertices(n,2,d,l,0,2));let p,g=Utils.setArraySize(this.curves,c),m=0,f=l[0],v=l[1],b=0,y=0,C=0,x=0,S=0,w=0,T=0,P=0,_=0,M=0,O=0,k=0,$=0,G=0;for(let e=0,R=2;e<c;e++,R+=6)b=l[R],y=l[R+1],C=l[R+2],x=l[R+3],S=l[R+4],w=l[R+5],T=.1875*(f-2*b+C),P=.1875*(v-2*y+x),_=.09375*(3*(b-C)-f+S),M=.09375*(3*(y-x)-v+w),O=2*T+_,k=2*P+M,$=.75*(b-f)+T+.16666667*_,G=.75*(y-v)+P+.16666667*M,m+=Math.sqrt($*$+G*G),$+=O,G+=k,O+=_,k+=M,m+=Math.sqrt($*$+G*G),$+=O,G+=k,m+=Math.sqrt($*$+G*G),$+=O+_,G+=k+M,m+=Math.sqrt($*$+G*G),g[e]=m,f=S,v=w;switch(this.data.positionMode==PositionMode.Percent&&(a*=m),this.data.spacingMode){case SpacingMode.Percent:p=m;break;case SpacingMode.Proportional:p=m/i;break;default:p=1}let E=this.segments,V=0;for(let e=0,R=0,I=0,A=0;e<i;e++,R+=3){let t=r[e]*p;a+=t;let i=a;if(h)i%=m,i<0&&(i+=m),I=0;else{if(i<0){this.addBeforePosition(i,l,0,o,R);continue}if(i>m){this.addAfterPosition(i-m,l,d-4,o,R);continue}}for(;;I++){let e=g[I];if(!(i>e)){if(0==I)i/=e;else{let t=g[I-1];i=(i-t)/(e-t)}break}}if(I!=u){u=I;let e=6*I;for(f=l[e],v=l[e+1],b=l[e+2],y=l[e+3],C=l[e+4],x=l[e+5],S=l[e+6],w=l[e+7],T=.03*(f-2*b+C),P=.03*(v-2*y+x),_=.006*(3*(b-C)-f+S),M=.006*(3*(y-x)-v+w),O=2*T+_,k=2*P+M,$=.3*(b-f)+T+.16666667*_,G=.3*(y-v)+P+.16666667*M,V=Math.sqrt($*$+G*G),E[0]=V,e=1;e<8;e++)$+=O,G+=k,O+=_,k+=M,V+=Math.sqrt($*$+G*G),E[e]=V;$+=O,G+=k,V+=Math.sqrt($*$+G*G),E[8]=V,$+=O+_,G+=k+M,V+=Math.sqrt($*$+G*G),E[9]=V,A=0}for(i*=V;;A++){let e=E[A];if(!(i>e)){if(0==A)i/=e;else{let t=E[A-1];i=A+(i-t)/(e-t)}break}}this.addCurvePosition(.1*i,f,v,b,y,C,x,S,w,o,R,s||e>0&&0==t)}return o}addBeforePosition(e,t,i,s,n){let a=t[i],r=t[i+1],o=t[i+2]-a,l=t[i+3]-r,h=Math.atan2(l,o);s[n]=a+e*Math.cos(h),s[n+1]=r+e*Math.sin(h),s[n+2]=h}addAfterPosition(e,t,i,s,n){let a=t[i+2],r=t[i+3],o=a-t[i],l=r-t[i+1],h=Math.atan2(l,o);s[n]=a+e*Math.cos(h),s[n+1]=r+e*Math.sin(h),s[n+2]=h}addCurvePosition(e,t,i,s,n,a,r,o,l,h,d,c){if(0==e||isNaN(e))return h[d]=t,h[d+1]=i,void(h[d+2]=Math.atan2(n-i,s-t));let u=e*e,p=u*e,g=1-e,m=g*g,f=m*g,v=g*e,b=3*v,y=g*b,C=b*e,x=t*f+s*y+a*C+o*p,S=i*f+n*y+r*C+l*p;h[d]=x,h[d+1]=S,c&&(h[d+2]=e<.001?Math.atan2(n-i,s-t):Math.atan2(S-(i*m+n*v*2+r*u),x-(t*m+s*v*2+a*u)))}};__publicField(_PathConstraint,"NONE",-1),__publicField(_PathConstraint,"BEFORE",-2),__publicField(_PathConstraint,"AFTER",-3),__publicField(_PathConstraint,"epsilon",1e-5);let PathConstraint=_PathConstraint;class PhysicsConstraint{constructor(e,t){__publicField(this,"data"),__publicField(this,"_bone",null),__publicField(this,"inertia",0),__publicField(this,"strength",0),__publicField(this,"damping",0),__publicField(this,"massInverse",0),__publicField(this,"wind",0),__publicField(this,"gravity",0),__publicField(this,"mix",0),__publicField(this,"_reset",!0),__publicField(this,"ux",0),__publicField(this,"uy",0),__publicField(this,"cx",0),__publicField(this,"cy",0),__publicField(this,"tx",0),__publicField(this,"ty",0),__publicField(this,"xOffset",0),__publicField(this,"xVelocity",0),__publicField(this,"yOffset",0),__publicField(this,"yVelocity",0),__publicField(this,"rotateOffset",0),__publicField(this,"rotateVelocity",0),__publicField(this,"scaleOffset",0),__publicField(this,"scaleVelocity",0),__publicField(this,"active",!1),__publicField(this,"skeleton"),__publicField(this,"remaining",0),__publicField(this,"lastTime",0),this.data=e,this.skeleton=t,this.bone=t.bones[e.bone.index],this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const e=this.data;this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}isActive(){return this.active}update(e){const t=this.mix;if(0==t)return;const i=this.data.x>0,s=this.data.y>0,n=this.data.rotate>0||this.data.shearX>0,a=this.data.scaleX>0,r=this.bone,o=r.data.length;switch(e){case Physics.none:return;case Physics.reset:this.reset();case Physics.update:const e=this.skeleton,l=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=l,this.lastTime=e.time;const h=r.worldX,d=r.worldY;if(this._reset)this._reset=!1,this.ux=h,this.uy=d;else{let c=this.remaining,u=this.inertia,p=this.data.step,g=this.skeleton.data.referenceScale,m=-1,f=this.data.limit*l,v=f*Math.abs(e.scaleY);if(f*=Math.abs(e.scaleX),i||s){if(i){const e=(this.ux-h)*u;this.xOffset+=e>f?f:e<-f?-f:e,this.ux=h}if(s){const e=(this.uy-d)*u;this.yOffset+=e>v?v:e<-v?-v:e,this.uy=d}if(c>=p){m=Math.pow(this.damping,60*p);const t=this.massInverse*p,n=this.strength,a=this.wind*g*e.scaleX,r=this.gravity*g*e.scaleY;do{i&&(this.xVelocity+=(a-this.xOffset*n)*t,this.xOffset+=this.xVelocity*p,this.xVelocity*=m),s&&(this.yVelocity-=(r+this.yOffset*n)*t,this.yOffset+=this.yVelocity*p,this.yVelocity*=m),c-=p}while(c>=p)}i&&(r.worldX+=this.xOffset*t*this.data.x),s&&(r.worldY+=this.yOffset*t*this.data.y)}if(n||a){let e=Math.atan2(r.c,r.a),i=0,s=0,l=0,h=this.cx-r.worldX,d=this.cy-r.worldY;if(h>f?h=f:h<-f&&(h=-f),d>v?d=v:d<-v&&(d=-v),n){l=(this.data.rotate+this.data.shearX)*t;let n=Math.atan2(d+this.ty,h+this.tx)-e-this.rotateOffset*l;this.rotateOffset+=(n-Math.ceil(n*MathUtils.invPI2-.5)*MathUtils.PI2)*u,n=this.rotateOffset*l+e,i=Math.cos(n),s=Math.sin(n),a&&(n=o*r.getWorldScaleX(),n>0&&(this.scaleOffset+=(h*i+d*s)*u/n))}else{i=Math.cos(e),s=Math.sin(e);const t=o*r.getWorldScaleX();t>0&&(this.scaleOffset+=(h*i+d*s)*u/t)}if(c=this.remaining,c>=p){-1==m&&(m=Math.pow(this.damping,60*p));const t=this.massInverse*p,r=this.strength,h=this.wind,d=Skeleton.yDown?-this.gravity:this.gravity,u=o/g;for(;;)if(c-=p,a&&(this.scaleVelocity+=(h*i-d*s-this.scaleOffset*r)*t,this.scaleOffset+=this.scaleVelocity*p,this.scaleVelocity*=m),n){if(this.rotateVelocity-=((h*s+d*i)*u+this.rotateOffset*r)*t,this.rotateOffset+=this.rotateVelocity*p,this.rotateVelocity*=m,c<p)break;const n=this.rotateOffset*l+e;i=Math.cos(n),s=Math.sin(n)}else if(c<p)break}}this.remaining=c}this.cx=r.worldX,this.cy=r.worldY;break;case Physics.pose:i&&(r.worldX+=this.xOffset*t*this.data.x),s&&(r.worldY+=this.yOffset*t*this.data.y)}if(n){let e=this.rotateOffset*t,i=0,s=0,n=0;if(this.data.shearX>0){let t=0;this.data.rotate>0&&(t=e*this.data.rotate,i=Math.sin(t),s=Math.cos(t),n=r.b,r.b=s*n-i*r.d,r.d=i*n+s*r.d),t+=e*this.data.shearX,i=Math.sin(t),s=Math.cos(t),n=r.a,r.a=s*n-i*r.c,r.c=i*n+s*r.c}else e*=this.data.rotate,i=Math.sin(e),s=Math.cos(e),n=r.a,r.a=s*n-i*r.c,r.c=i*n+s*r.c,n=r.b,r.b=s*n-i*r.d,r.d=i*n+s*r.d}if(a){const e=1+this.scaleOffset*t*this.data.scaleX;r.a*=e,r.c*=e}e!=Physics.pose&&(this.tx=o*r.a,this.ty=o*r.c),r.updateAppliedTransform()}translate(e,t){this.ux-=e,this.uy-=t,this.cx-=e,this.cy-=t}rotate(e,t,i){const s=i*MathUtils.degRad,n=Math.cos(s),a=Math.sin(s),r=this.cx-e,o=this.cy-t;this.translate(r*n-o*a-r,r*a+o*n-o)}}class Slot{constructor(e,t){if(__publicField(this,"data"),__publicField(this,"bone"),__publicField(this,"color"),__publicField(this,"darkColor",null),__publicField(this,"attachment",null),__publicField(this,"attachmentState",0),__publicField(this,"sequenceIndex",-1),__publicField(this,"deform",new Array),!e)throw new Error("data cannot be null.");if(!t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new Color,this.darkColor=e.darkColor?new Color:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&(e instanceof VertexAttachment&&this.attachment instanceof VertexAttachment&&e.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class TransformConstraint{constructor(e,t){if(__publicField(this,"data"),__publicField(this,"bones"),__publicField(this,"target"),__publicField(this,"mixRotate",0),__publicField(this,"mixX",0),__publicField(this,"mixY",0),__publicField(this,"mixScaleX",0),__publicField(this,"mixScaleY",0),__publicField(this,"mixShearY",0),__publicField(this,"temp",new Vector2),__publicField(this,"active",!1),!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let s=0;s<e.bones.length;s++){let i=t.findBone(e.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${e.bones[s].name}.`);this.bones.push(i)}let i=t.findBone(e.target.name);if(!i)throw new Error(`Couldn't find target bone ${e.target.name}.`);this.target=i,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}update(e){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,a=this.mixShearY,r=0!=t||0!=i,o=this.target,l=o.a,h=o.b,d=o.c,c=o.d,u=l*c-h*d>0?MathUtils.degRad:-.01745329277777778,p=this.data.offsetRotation*u,g=this.data.offsetShearY*u,m=this.bones;for(let f=0,v=m.length;f<v;f++){let u=m[f];if(0!=e){let t=u.a,i=u.b,s=u.c,n=u.d,a=Math.atan2(d,l)-Math.atan2(s,t)+p;a>MathUtils.PI?a-=MathUtils.PI2:a<-3.1415927&&(a+=MathUtils.PI2),a*=e;let r=Math.cos(a),o=Math.sin(a);u.a=r*t-o*s,u.b=r*i-o*n,u.c=o*t+r*s,u.d=o*i+r*n}if(r){let e=this.temp;o.localToWorld(e.set(this.data.offsetX,this.data.offsetY)),u.worldX+=(e.x-u.worldX)*t,u.worldY+=(e.y-u.worldY)*i}if(0!=s){let e=Math.sqrt(u.a*u.a+u.c*u.c);0!=e&&(e=(e+(Math.sqrt(l*l+d*d)-e+this.data.offsetScaleX)*s)/e),u.a*=e,u.c*=e}if(0!=n){let e=Math.sqrt(u.b*u.b+u.d*u.d);0!=e&&(e=(e+(Math.sqrt(h*h+c*c)-e+this.data.offsetScaleY)*n)/e),u.b*=e,u.d*=e}if(a>0){let e=u.b,t=u.d,i=Math.atan2(t,e),s=Math.atan2(c,h)-Math.atan2(d,l)-(i-Math.atan2(u.c,u.a));s>MathUtils.PI?s-=MathUtils.PI2:s<-3.1415927&&(s+=MathUtils.PI2),s=i+(s+g)*a;let n=Math.sqrt(e*e+t*t);u.b=Math.cos(s)*n,u.d=Math.sin(s)*n}u.updateAppliedTransform()}}applyRelativeWorld(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,a=this.mixShearY,r=0!=t||0!=i,o=this.target,l=o.a,h=o.b,d=o.c,c=o.d,u=l*c-h*d>0?MathUtils.degRad:-.01745329277777778,p=this.data.offsetRotation*u,g=this.data.offsetShearY*u,m=this.bones;for(let f=0,v=m.length;f<v;f++){let u=m[f];if(0!=e){let t=u.a,i=u.b,s=u.c,n=u.d,a=Math.atan2(d,l)+p;a>MathUtils.PI?a-=MathUtils.PI2:a<-3.1415927&&(a+=MathUtils.PI2),a*=e;let r=Math.cos(a),o=Math.sin(a);u.a=r*t-o*s,u.b=r*i-o*n,u.c=o*t+r*s,u.d=o*i+r*n}if(r){let e=this.temp;o.localToWorld(e.set(this.data.offsetX,this.data.offsetY)),u.worldX+=e.x*t,u.worldY+=e.y*i}if(0!=s){let e=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleX)*s+1;u.a*=e,u.c*=e}if(0!=n){let e=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleY)*n+1;u.b*=e,u.d*=e}if(a>0){let e=Math.atan2(c,h)-Math.atan2(d,l);e>MathUtils.PI?e-=MathUtils.PI2:e<-3.1415927&&(e+=MathUtils.PI2);let t=u.b,i=u.d;e=Math.atan2(i,t)+(e-MathUtils.PI/2+g)*a;let s=Math.sqrt(t*t+i*i);u.b=Math.cos(e)*s,u.d=Math.sin(e)*s}u.updateAppliedTransform()}}applyAbsoluteLocal(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,a=this.mixShearY,r=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],d=h.arotation;0!=e&&(d+=(r.arotation-d+this.data.offsetRotation)*e);let c=h.ax,u=h.ay;c+=(r.ax-c+this.data.offsetX)*t,u+=(r.ay-u+this.data.offsetY)*i;let p=h.ascaleX,g=h.ascaleY;0!=s&&0!=p&&(p=(p+(r.ascaleX-p+this.data.offsetScaleX)*s)/p),0!=n&&0!=g&&(g=(g+(r.ascaleY-g+this.data.offsetScaleY)*n)/g);let m=h.ashearY;0!=a&&(m+=(r.ashearY-m+this.data.offsetShearY)*a),h.updateWorldTransformWith(c,u,d,p,g,h.ashearX,m)}}applyRelativeLocal(){let e=this.mixRotate,t=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,a=this.mixShearY,r=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],d=h.arotation+(r.arotation+this.data.offsetRotation)*e,c=h.ax+(r.ax+this.data.offsetX)*t,u=h.ay+(r.ay+this.data.offsetY)*i,p=h.ascaleX*((r.ascaleX-1+this.data.offsetScaleX)*s+1),g=h.ascaleY*((r.ascaleY-1+this.data.offsetScaleY)*n+1),m=h.ashearY+(r.ashearY+this.data.offsetShearY)*a;h.updateWorldTransformWith(c,u,d,p,g,h.ashearX,m)}}}const _Skeleton=class e{constructor(e){if(__publicField(this,"data"),__publicField(this,"bones"),__publicField(this,"slots"),__publicField(this,"drawOrder"),__publicField(this,"ikConstraints"),__publicField(this,"transformConstraints"),__publicField(this,"pathConstraints"),__publicField(this,"physicsConstraints"),__publicField(this,"_updateCache",new Array),__publicField(this,"skin",null),__publicField(this,"color"),__publicField(this,"scaleX",1),__publicField(this,"_scaleY",1),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"time",0),!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let t=0;t<e.bones.length;t++){let i,s=e.bones[t];if(s.parent){let e=this.bones[s.parent.index];i=new Bone(s,this,e),e.children.push(i)}else i=new Bone(s,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<e.slots.length;t++){let i=e.slots[t],s=this.bones[i.boneData.index],n=new Slot(i,s);this.slots.push(n),this.drawOrder.push(n)}this.ikConstraints=new Array;for(let t=0;t<e.ikConstraints.length;t++){let i=e.ikConstraints[t];this.ikConstraints.push(new IkConstraint(i,this))}this.transformConstraints=new Array;for(let t=0;t<e.transformConstraints.length;t++){let i=e.transformConstraints[t];this.transformConstraints.push(new TransformConstraint(i,this))}this.pathConstraints=new Array;for(let t=0;t<e.pathConstraints.length;t++){let i=e.pathConstraints[t];this.pathConstraints.push(new PathConstraint(i,this))}this.physicsConstraints=new Array;for(let t=0;t<e.physicsConstraints.length;t++){let i=e.physicsConstraints[t];this.physicsConstraints.push(new PhysicsConstraint(i,this))}this.color=new Color(1,1,1,1),this.updateCache()}get scaleY(){return e.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e}updateCache(){this._updateCache.length=0;let e=this.bones;for(let d=0,c=e.length;d<c;d++){let t=e[d];t.sorted=t.data.skinRequired,t.active=!t.sorted}if(this.skin){let e=this.skin.bones;for(let t=0,i=this.skin.bones.length;t<i;t++){let i=this.bones[e[t].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let t=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,n=this.physicsConstraints,a=t.length,r=i.length,o=s.length,l=this.physicsConstraints.length,h=a+r+o+l;e:for(let d=0;d<h;d++){for(let e=0;e<a;e++){let i=t[e];if(i.data.order==d){this.sortIkConstraint(i);continue e}}for(let e=0;e<r;e++){let t=i[e];if(t.data.order==d){this.sortTransformConstraint(t);continue e}}for(let e=0;e<o;e++){let t=s[e];if(t.data.order==d){this.sortPathConstraint(t);continue e}}for(let e=0;e<l;e++){const t=n[e];if(t.data.order==d){this.sortPhysicsConstraint(t);continue e}}}for(let d=0,c=e.length;d<c;d++)this.sortBone(e[d])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&Utils.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target;this.sortBone(t);let i=e.bones,s=i[0];if(this.sortBone(s),1==i.length)this._updateCache.push(e),this.sortReset(s.children);else{let t=i[i.length-1];this.sortBone(t),this._updateCache.push(e),this.sortReset(s.children),t.sorted=!0}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&Utils.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target,i=t.data.index,s=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let o=0,l=this.data.skins.length;o<l;o++)this.sortPathConstraintAttachment(this.data.skins[o],i,s);let n=t.getAttachment();n instanceof PathAttachment&&this.sortPathConstraintAttachmentWith(n,s);let a=e.bones,r=a.length;for(let o=0;o<r;o++)this.sortBone(a[o]);this._updateCache.push(e);for(let o=0;o<r;o++)this.sortReset(a[o].children);for(let o=0;o<r;o++)a[o].sorted=!0}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&Utils.contains(this.skin.constraints,e.data,!0)),!e.active)return;this.sortBone(e.target);let t=e.bones,i=t.length;if(e.data.local)for(let s=0;s<i;s++){let e=t[s];this.sortBone(e.parent),this.sortBone(e)}else for(let s=0;s<i;s++)this.sortBone(t[s]);this._updateCache.push(e);for(let s=0;s<i;s++)this.sortReset(t[s].children);for(let s=0;s<i;s++)t[s].sorted=!0}sortPathConstraintAttachment(e,t,i){let s=e.attachments[t];if(s)for(let n in s)this.sortPathConstraintAttachmentWith(s[n],i)}sortPathConstraintAttachmentWith(e,t){if(!(e instanceof PathAttachment))return;let i=e.bones;if(i){let e=this.bones;for(let t=0,s=i.length;t<s;){let s=i[t++];for(s+=t;t<s;)this.sortBone(e[i[t++]])}}else this.sortBone(t)}sortPhysicsConstraint(e){const t=e.bone;e.active=t.active&&(!e.data.skinRequired||null!=this.skin&&Utils.contains(this.skin.constraints,e.data,!0)),e.active&&(this.sortBone(t),this._updateCache.push(e),this.sortReset(t.children),t.sorted=!0)}sortBone(e){if(!e)return;if(e.sorted)return;let t=e.parent;t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}sortReset(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(e){if(null==e)throw new Error("physics is undefined");let t=this.bones;for(let s=0,n=t.length;s<n;s++){let e=t[s];e.ax=e.x,e.ay=e.y,e.arotation=e.rotation,e.ascaleX=e.scaleX,e.ascaleY=e.scaleY,e.ashearX=e.shearX,e.ashearY=e.shearY}let i=this._updateCache;for(let s=0,n=i.length;s<n;s++)i[s].update(e)}updateWorldTransformWith(e,t){if(!t)throw new Error("parent cannot be null.");let i=this.bones;for(let m=1,f=i.length;m<f;m++){let e=i[m];e.ax=e.x,e.ay=e.y,e.arotation=e.rotation,e.ascaleX=e.scaleX,e.ascaleY=e.scaleY,e.ashearX=e.shearX,e.ashearY=e.shearY}let s=this.getRootBone();if(!s)throw new Error("Root bone must not be null.");let n=t.a,a=t.b,r=t.c,o=t.d;s.worldX=n*this.x+a*this.y+t.worldX,s.worldY=r*this.x+o*this.y+t.worldY;const l=(s.rotation+s.shearX)*MathUtils.degRad,h=(s.rotation+90+s.shearY)*MathUtils.degRad,d=Math.cos(l)*s.scaleX,c=Math.cos(h)*s.scaleY,u=Math.sin(l)*s.scaleX,p=Math.sin(h)*s.scaleY;s.a=(n*d+a*u)*this.scaleX,s.b=(n*c+a*p)*this.scaleX,s.c=(r*d+o*u)*this.scaleY,s.d=(r*c+o*p)*this.scaleY;let g=this._updateCache;for(let m=0,f=g.length;m<f;m++){let t=g[m];t!=s&&t.update(e)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const e of this.bones)e.setToSetupPose();for(const e of this.ikConstraints)e.setToSetupPose();for(const e of this.transformConstraints)e.setToSetupPose();for(const e of this.pathConstraints)e.setToSetupPose();for(const e of this.physicsConstraints)e.setToSetupPose()}setSlotsToSetupPose(){let e=this.slots;Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,i=e.length;t<i;t++)e[t].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.data.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.data.name==e)return s}return null}setSkinByName(e){let t=this.data.findSkin(e);if(!t)throw new Error("Skin not found: "+e);this.setSkin(t)}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else{let t=this.slots;for(let i=0,s=t.length;i<s;i++){let s=t[i],n=s.data.attachmentName;if(n){let t=e.getAttachment(i,n);t&&s.setAttachment(t)}}}this.skin=e,this.updateCache()}}getAttachmentByName(e,t){let i=this.data.findSlot(e);if(!i)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(i.index,t)}getAttachment(e,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(e,t);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null}setAttachment(e,t){if(!e)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,n=i.length;s<n;s++){let n=i[s];if(n.data.name==e){let i=null;if(t&&(i=this.getAttachment(s,t),!i))throw new Error("Attachment not found: "+t+", for slot: "+e);return void n.setAttachment(i)}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find((t=>t.data.name==e))??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find((t=>t.data.name==e))??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find((t=>t.data.name==e))??null}findPhysicsConstraint(e){if(null==e)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find((t=>t.data.name==e))??null}getBoundsRect(e){let t=new Vector2,i=new Vector2;return this.getBounds(t,i,void 0,e),{x:t.x,y:t.y,width:i.x,height:i.y}}getBounds(t,i,s=new Array(2),n=null){if(!t)throw new Error("offset cannot be null.");if(!i)throw new Error("size cannot be null.");let a=this.drawOrder,r=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let d=0,c=a.length;d<c;d++){let t=a[d];if(!t.bone.active)continue;let i=0,c=null,u=null,p=t.getAttachment();if(p instanceof RegionAttachment)i=8,c=Utils.setArraySize(s,i,0),p.computeWorldVertices(t,c,0,2),u=e.quadTriangles;else if(p instanceof MeshAttachment){let e=p;i=e.worldVerticesLength,c=Utils.setArraySize(s,i,0),e.computeWorldVertices(t,0,i,c,0,2),u=e.triangles}else if(p instanceof ClippingAttachment&&null!=n){n.clipStart(t,p);continue}if(c&&u){null!=n&&n.isClipping()&&(n.clipTriangles(c,u,u.length),c=n.clippedVertices,i=n.clippedVertices.length);for(let e=0,t=c.length;e<t;e+=2){let t=c[e],i=c[e+1];r=Math.min(r,t),o=Math.min(o,i),l=Math.max(l,t),h=Math.max(h,i)}}null!=n&&n.clipEndWithSlot(t)}null!=n&&n.clipEnd(),t.set(r,o),i.set(l-r,h-o)}update(e){this.time+=e}physicsTranslate(e,t){const i=this.physicsConstraints;for(let s=0,n=i.length;s<n;s++)i[s].translate(e,t)}physicsRotate(e,t,i){const s=this.physicsConstraints;for(let n=0,a=s.length;n<a;n++)s[n].rotate(e,t,i)}};__publicField(_Skeleton,"quadTriangles",[0,1,2,2,3,0]),__publicField(_Skeleton,"yDown",!1);let Skeleton=_Skeleton;var Physics,Physics2,BlendMode,BlendMode2;Physics2=Physics||(Physics={}),Physics2[Physics2.none=0]="none",Physics2[Physics2.reset=1]="reset",Physics2[Physics2.update=2]="update",Physics2[Physics2.pose=3]="pose";class PhysicsConstraintData extends ConstraintData{constructor(e){super(e,0,!1),__publicField(this,"_bone",null),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"rotate",0),__publicField(this,"scaleX",0),__publicField(this,"shearX",0),__publicField(this,"limit",0),__publicField(this,"step",0),__publicField(this,"inertia",0),__publicField(this,"strength",0),__publicField(this,"damping",0),__publicField(this,"massInverse",0),__publicField(this,"wind",0),__publicField(this,"gravity",0),__publicField(this,"mix",0),__publicField(this,"inertiaGlobal",!1),__publicField(this,"strengthGlobal",!1),__publicField(this,"dampingGlobal",!1),__publicField(this,"massGlobal",!1),__publicField(this,"windGlobal",!1),__publicField(this,"gravityGlobal",!1),__publicField(this,"mixGlobal",!1)}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class SkeletonData{constructor(){__publicField(this,"name",null),__publicField(this,"bones",new Array),__publicField(this,"slots",new Array),__publicField(this,"skins",new Array),__publicField(this,"defaultSkin",null),__publicField(this,"events",new Array),__publicField(this,"animations",new Array),__publicField(this,"ikConstraints",new Array),__publicField(this,"transformConstraints",new Array),__publicField(this,"pathConstraints",new Array),__publicField(this,"physicsConstraints",new Array),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"referenceScale",100),__publicField(this,"version",null),__publicField(this,"hash",null),__publicField(this,"fps",0),__publicField(this,"imagesPath",null),__publicField(this,"audioPath",null)}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.name==e)return s}return null}findSkin(e){if(!e)throw new Error("skinName cannot be null.");let t=this.skins;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.name==e)return s}return null}findEvent(e){if(!e)throw new Error("eventDataName cannot be null.");let t=this.events;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.name==e)return s}return null}findAnimation(e){if(!e)throw new Error("animationName cannot be null.");let t=this.animations;for(let i=0,s=t.length;i<s;i++){let s=t[i];if(s.name==e)return s}return null}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s.name==e)return s}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s.name==e)return s}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s.name==e)return s}return null}findPhysicsConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.physicsConstraints;for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s.name==e)return s}return null}}class SkinEntry{constructor(e=0,t,i){__publicField(this,"slotIndex"),__publicField(this,"name"),__publicField(this,"attachment"),this.slotIndex=e,this.name=t,this.attachment=i}}class Skin{constructor(e){if(__publicField(this,"name"),__publicField(this,"attachments",new Array),__publicField(this,"bones",Array()),__publicField(this,"constraints",new Array),__publicField(this,"color",new Color(.99607843,.61960787,.30980393,1)),!e)throw new Error("name cannot be null.");this.name=e}setAttachment(e,t,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;e>=s.length&&(s.length=e+1),s[e]||(s[e]={}),s[e][t]=i}addSkin(e){for(let s=0;s<e.bones.length;s++){let t=e.bones[s],i=!1;for(let e=0;e<this.bones.length;e++)if(this.bones[e]==t){i=!0;break}i||this.bones.push(t)}for(let s=0;s<e.constraints.length;s++){let t=e.constraints[s],i=!1;for(let e=0;e<this.constraints.length;e++)if(this.constraints[e]==t){i=!0;break}i||this.constraints.push(t)}let t=e.getAttachments();for(let s=0;s<t.length;s++){var i=t[s];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(e){for(let s=0;s<e.bones.length;s++){let t=e.bones[s],i=!1;for(let e=0;e<this.bones.length;e++)if(this.bones[e]==t){i=!0;break}i||this.bones.push(t)}for(let s=0;s<e.constraints.length;s++){let t=e.constraints[s],i=!1;for(let e=0;e<this.constraints.length;e++)if(this.constraints[e]==t){i=!0;break}i||this.constraints.push(t)}let t=e.getAttachments();for(let s=0;s<t.length;s++){var i=t[s];i.attachment&&(i.attachment instanceof MeshAttachment?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(e,t){let i=this.attachments[e];return i?i[t]:null}removeAttachment(e,t){let i=this.attachments[e];i&&delete i[t]}getAttachments(){let e=new Array;for(var t=0;t<this.attachments.length;t++){let i=this.attachments[t];if(i)for(let s in i){let n=i[s];n&&e.push(new SkinEntry(t,s,n))}}return e}getAttachmentsForSlot(e,t){let i=this.attachments[e];if(i)for(let s in i){let n=i[s];n&&t.push(new SkinEntry(e,s,n))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,t){let i=0;for(let s=0;s<e.slots.length;s++){let n=e.slots[s],a=n.getAttachment();if(a&&i<t.attachments.length){let e=t.attachments[i];for(let t in e)if(a==e[t]){let e=this.getAttachment(i,t);e&&n.setAttachment(e);break}}i++}}}class SlotData{constructor(e,t,i){if(__publicField(this,"index",0),__publicField(this,"name"),__publicField(this,"boneData"),__publicField(this,"color",new Color(1,1,1,1)),__publicField(this,"darkColor",null),__publicField(this,"attachmentName",null),__publicField(this,"blendMode",BlendMode.Normal),__publicField(this,"visible",!0),e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=i}}BlendMode2=BlendMode||(BlendMode={}),BlendMode2[BlendMode2.Normal=0]="Normal",BlendMode2[BlendMode2.Additive=1]="Additive",BlendMode2[BlendMode2.Multiply=2]="Multiply",BlendMode2[BlendMode2.Screen=3]="Screen";class TransformConstraintData extends ConstraintData{constructor(e){super(e,0,!1),__publicField(this,"bones",new Array),__publicField(this,"_target",null),__publicField(this,"mixRotate",0),__publicField(this,"mixX",0),__publicField(this,"mixY",0),__publicField(this,"mixScaleX",0),__publicField(this,"mixScaleY",0),__publicField(this,"mixShearY",0),__publicField(this,"offsetRotation",0),__publicField(this,"offsetX",0),__publicField(this,"offsetY",0),__publicField(this,"offsetScaleX",0),__publicField(this,"offsetScaleY",0),__publicField(this,"offsetShearY",0),__publicField(this,"relative",!1),__publicField(this,"local",!1)}set target(e){this._target=e}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class SkeletonBinary{constructor(e){__publicField(this,"scale",1),__publicField(this,"attachmentLoader"),__publicField(this,"linkedMeshes",new Array),this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,i=new SkeletonData;i.name="";let s=new BinaryInput(e),n=s.readInt32(),a=s.readInt32();i.hash=0==a&&0==n?null:a.toString(16)+n.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat(),i.referenceScale=s.readFloat()*t;let r=s.readBoolean();r&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let o=0;o=s.readInt(!0);for(let h=0;h<o;h++){let e=s.readString();if(!e)throw new Error("String in string table must not be null.");s.strings.push(e)}o=s.readInt(!0);for(let h=0;h<o;h++){let e=s.readString();if(!e)throw new Error("Bone name must not be null.");let n=0==h?null:i.bones[s.readInt(!0)],a=new BoneData(h,e,n);a.rotation=s.readFloat(),a.x=s.readFloat()*t,a.y=s.readFloat()*t,a.scaleX=s.readFloat(),a.scaleY=s.readFloat(),a.shearX=s.readFloat(),a.shearY=s.readFloat(),a.length=s.readFloat()*t,a.inherit=s.readByte(),a.skinRequired=s.readBoolean(),r&&(Color.rgba8888ToColor(a.color,s.readInt32()),a.icon=s.readString()??void 0,a.visible=s.readBoolean()),i.bones.push(a)}o=s.readInt(!0);for(let h=0;h<o;h++){let e=s.readString();if(!e)throw new Error("Slot name must not be null.");let t=i.bones[s.readInt(!0)],n=new SlotData(h,e,t);Color.rgba8888ToColor(n.color,s.readInt32());let a=s.readInt32();-1!=a&&Color.rgb888ToColor(n.darkColor=new Color,a),n.attachmentName=s.readStringRef(),n.blendMode=s.readInt(!0),r&&(n.visible=s.readBoolean()),i.slots.push(n)}o=s.readInt(!0);for(let h,d=0;d<o;d++){let e=s.readString();if(!e)throw new Error("IK constraint data name must not be null.");let n=new IkConstraintData(e);n.order=s.readInt(!0),h=s.readInt(!0);for(let t=0;t<h;t++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)];let a=s.readByte();n.skinRequired=!!(1&a),n.bendDirection=2&a?1:-1,n.compress=!!(4&a),n.stretch=!!(8&a),n.uniform=!!(16&a),32&a&&(n.mix=64&a?s.readFloat():1),128&a&&(n.softness=s.readFloat()*t),i.ikConstraints.push(n)}o=s.readInt(!0);for(let h,d=0;d<o;d++){let e=s.readString();if(!e)throw new Error("Transform constraint data name must not be null.");let n=new TransformConstraintData(e);n.order=s.readInt(!0),h=s.readInt(!0);for(let t=0;t<h;t++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)];let a=s.readByte();n.skinRequired=!!(1&a),n.local=!!(2&a),n.relative=!!(4&a),8&a&&(n.offsetRotation=s.readFloat()),16&a&&(n.offsetX=s.readFloat()*t),32&a&&(n.offsetY=s.readFloat()*t),64&a&&(n.offsetScaleX=s.readFloat()),128&a&&(n.offsetScaleY=s.readFloat()),a=s.readByte(),1&a&&(n.offsetShearY=s.readFloat()),2&a&&(n.mixRotate=s.readFloat()),4&a&&(n.mixX=s.readFloat()),8&a&&(n.mixY=s.readFloat()),16&a&&(n.mixScaleX=s.readFloat()),32&a&&(n.mixScaleY=s.readFloat()),64&a&&(n.mixShearY=s.readFloat()),i.transformConstraints.push(n)}o=s.readInt(!0);for(let h,d=0;d<o;d++){let e=s.readString();if(!e)throw new Error("Path constraint data name must not be null.");let n=new PathConstraintData(e);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),h=s.readInt(!0);for(let t=0;t<h;t++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.slots[s.readInt(!0)];const a=s.readByte();n.positionMode=1&a,n.spacingMode=a>>1&3,n.rotateMode=a>>3&3,128&a&&(n.offsetRotation=s.readFloat()),n.position=s.readFloat(),n.positionMode==PositionMode.Fixed&&(n.position*=t),n.spacing=s.readFloat(),n.spacingMode!=SpacingMode.Length&&n.spacingMode!=SpacingMode.Fixed||(n.spacing*=t),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),i.pathConstraints.push(n)}o=s.readInt(!0);for(let h=0;h<o;h++){const e=s.readString();if(!e)throw new Error("Physics constraint data name must not be null.");const n=new PhysicsConstraintData(e);n.order=s.readInt(!0),n.bone=i.bones[s.readInt(!0)];let a=s.readByte();n.skinRequired=!!(1&a),2&a&&(n.x=s.readFloat()),4&a&&(n.y=s.readFloat()),8&a&&(n.rotate=s.readFloat()),16&a&&(n.scaleX=s.readFloat()),32&a&&(n.shearX=s.readFloat()),n.limit=(64&a?s.readFloat():5e3)*t,n.step=1/s.readUnsignedByte(),n.inertia=s.readFloat(),n.strength=s.readFloat(),n.damping=s.readFloat(),n.massInverse=128&a?s.readFloat():1,n.wind=s.readFloat(),n.gravity=s.readFloat(),a=s.readByte(),1&a&&(n.inertiaGlobal=!0),2&a&&(n.strengthGlobal=!0),4&a&&(n.dampingGlobal=!0),8&a&&(n.massGlobal=!0),16&a&&(n.windGlobal=!0),32&a&&(n.gravityGlobal=!0),64&a&&(n.mixGlobal=!0),n.mix=128&a?s.readFloat():1,i.physicsConstraints.push(n)}let l=this.readSkin(s,i,!0,r);l&&(i.defaultSkin=l,i.skins.push(l));{let e=i.skins.length;for(Utils.setArraySize(i.skins,o=e+s.readInt(!0));e<o;e++){let t=this.readSkin(s,i,!1,r);if(!t)throw new Error("readSkin() should not have returned null.");i.skins[e]=t}}o=this.linkedMeshes.length;for(let h=0;h<o;h++){let e=this.linkedMeshes[h];const t=i.skins[e.skinIndex];if(!e.parent)throw new Error("Linked mesh parent must not be null");let s=t.getAttachment(e.slotIndex,e.parent);if(!s)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?s:e.mesh,e.mesh.setParentMesh(s),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,o=s.readInt(!0);for(let h=0;h<o;h++){let e=s.readString();if(!e)throw new Error("Event data name must not be null");let t=new EventData(e);t.intValue=s.readInt(!1),t.floatValue=s.readFloat(),t.stringValue=s.readString(),t.audioPath=s.readString(),t.audioPath&&(t.volume=s.readFloat(),t.balance=s.readFloat()),i.events.push(t)}o=s.readInt(!0);for(let h=0;h<o;h++){let e=s.readString();if(!e)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(s,e,i))}return i}readSkin(e,t,i,s){let n=null,a=0;if(i){if(a=e.readInt(!0),0==a)return null;n=new Skin("default")}else{let i=e.readString();if(!i)throw new Error("Skin name must not be null.");n=new Skin(i),s&&Color.rgba8888ToColor(n.color,e.readInt32()),n.bones.length=e.readInt(!0);for(let s=0,a=n.bones.length;s<a;s++)n.bones[s]=t.bones[e.readInt(!0)];for(let s=0,a=e.readInt(!0);s<a;s++)n.constraints.push(t.ikConstraints[e.readInt(!0)]);for(let s=0,a=e.readInt(!0);s<a;s++)n.constraints.push(t.transformConstraints[e.readInt(!0)]);for(let s=0,a=e.readInt(!0);s<a;s++)n.constraints.push(t.pathConstraints[e.readInt(!0)]);for(let s=0,a=e.readInt(!0);s<a;s++)n.constraints.push(t.physicsConstraints[e.readInt(!0)]);a=e.readInt(!0)}for(let r=0;r<a;r++){let i=e.readInt(!0);for(let a=0,r=e.readInt(!0);a<r;a++){let a=e.readStringRef();if(!a)throw new Error("Attachment name must not be null");let r=this.readAttachment(e,t,n,i,a,s);r&&n.setAttachment(i,a,r)}}return n}readAttachment(e,t,i,s,n,a){let r=this.scale,o=e.readByte();const l=8&o?e.readStringRef():n;if(!l)throw new Error("Attachment name must not be null");switch(7&o){case AttachmentType.Region:{let t=16&o?e.readStringRef():null;const s=32&o?e.readInt32():4294967295,n=64&o?this.readSequence(e):null;let a=128&o?e.readFloat():0,h=e.readFloat(),d=e.readFloat(),c=e.readFloat(),u=e.readFloat(),p=e.readFloat(),g=e.readFloat();t||(t=l);let m=this.attachmentLoader.newRegionAttachment(i,l,t,n);return m?(m.path=t,m.x=h*r,m.y=d*r,m.scaleX=c,m.scaleY=u,m.rotation=a,m.width=p*r,m.height=g*r,Color.rgba8888ToColor(m.color,s),m.sequence=n,null==n&&m.updateRegion(),m):null}case AttachmentType.BoundingBox:{let t=this.readVertices(e,!!(16&o)),s=a?e.readInt32():0,n=this.attachmentLoader.newBoundingBoxAttachment(i,l);return n?(n.worldVerticesLength=t.length,n.vertices=t.vertices,n.bones=t.bones,a&&Color.rgba8888ToColor(n.color,s),n):null}case AttachmentType.Mesh:{let t=16&o?e.readStringRef():l;const s=32&o?e.readInt32():4294967295,n=64&o?this.readSequence(e):null,h=e.readInt(!0),d=this.readVertices(e,!!(128&o)),c=this.readFloatArray(e,d.length,1),u=this.readShortArray(e,3*(d.length-h-2));let p=[],g=0,m=0;a&&(p=this.readShortArray(e,e.readInt(!0)),g=e.readFloat(),m=e.readFloat()),t||(t=l);let f=this.attachmentLoader.newMeshAttachment(i,l,t,n);return f?(f.path=t,Color.rgba8888ToColor(f.color,s),f.bones=d.bones,f.vertices=d.vertices,f.worldVerticesLength=d.length,f.triangles=u,f.regionUVs=c,null==n&&f.updateRegion(),f.hullLength=h<<1,f.sequence=n,a&&(f.edges=p,f.width=g*r,f.height=m*r),f):null}case AttachmentType.LinkedMesh:{const t=16&o?e.readStringRef():l;if(null==t)throw new Error("Path of linked mesh must not be null");const n=32&o?e.readInt32():4294967295,h=64&o?this.readSequence(e):null,d=!!(128&o),c=e.readInt(!0),u=e.readStringRef();let p=0,g=0;a&&(p=e.readFloat(),g=e.readFloat());let m=this.attachmentLoader.newMeshAttachment(i,l,t,h);return m?(m.path=t,Color.rgba8888ToColor(m.color,n),m.sequence=h,a&&(m.width=p*r,m.height=g*r),this.linkedMeshes.push(new LinkedMesh$1(m,c,s,u,d)),m):null}case AttachmentType.Path:{const t=!!(16&o),s=!!(32&o),n=this.readVertices(e,!!(64&o)),h=Utils.newArray(n.length/6,0);for(let i=0,a=h.length;i<a;i++)h[i]=e.readFloat()*r;const d=a?e.readInt32():0,c=this.attachmentLoader.newPathAttachment(i,l);return c?(c.closed=t,c.constantSpeed=s,c.worldVerticesLength=n.length,c.vertices=n.vertices,c.bones=n.bones,c.lengths=h,a&&Color.rgba8888ToColor(c.color,d),c):null}case AttachmentType.Point:{const t=e.readFloat(),s=e.readFloat(),n=e.readFloat(),o=a?e.readInt32():0,h=this.attachmentLoader.newPointAttachment(i,l);return h?(h.x=s*r,h.y=n*r,h.rotation=t,a&&Color.rgba8888ToColor(h.color,o),h):null}case AttachmentType.Clipping:{const s=e.readInt(!0),n=this.readVertices(e,!!(16&o));let r=a?e.readInt32():0,h=this.attachmentLoader.newClippingAttachment(i,l);return h?(h.endSlot=t.slots[s],h.worldVerticesLength=n.length,h.vertices=n.vertices,h.bones=n.bones,a&&Color.rgba8888ToColor(h.color,r),h):null}}return null}readSequence(e){let t=new Sequence(e.readInt(!0));return t.start=e.readInt(!0),t.digits=e.readInt(!0),t.setupIndex=e.readInt(!0),t}readVertices(e,t){const i=this.scale,s=e.readInt(!0),n=new Vertices;if(n.length=s<<1,!t)return n.vertices=this.readFloatArray(e,n.length,i),n;let a=new Array,r=new Array;for(let o=0;o<s;o++){let t=e.readInt(!0);r.push(t);for(let s=0;s<t;s++)r.push(e.readInt(!0)),a.push(e.readFloat()*i),a.push(e.readFloat()*i),a.push(e.readFloat())}return n.vertices=Utils.toFloatArray(a),n.bones=r,n}readFloatArray(e,t,i){let s=new Array(t);if(1==i)for(let n=0;n<t;n++)s[n]=e.readFloat();else for(let n=0;n<t;n++)s[n]=e.readFloat()*i;return s}readShortArray(e,t){let i=new Array(t);for(let s=0;s<t;s++)i[s]=e.readInt(!0);return i}readAnimation(e,t,i){e.readInt(!0);let s=new Array,n=this.scale;for(let l=0,h=e.readInt(!0);l<h;l++){let t=e.readInt(!0);for(let i=0,n=e.readInt(!0);i<n;i++){let i=e.readByte(),n=e.readInt(!0),a=n-1;switch(i){case SLOT_ATTACHMENT:{let i=new AttachmentTimeline(n,t);for(let t=0;t<n;t++)i.setFrame(t,e.readFloat(),e.readStringRef());s.push(i);break}case SLOT_RGBA:{let i=e.readInt(!0),r=new RGBATimeline(n,i,t),o=e.readFloat(),l=e.readUnsignedByte()/255,h=e.readUnsignedByte()/255,d=e.readUnsignedByte()/255,c=e.readUnsignedByte()/255;for(let t=0,s=0;r.setFrame(t,o,l,h,d,c),t!=a;t++){let i=e.readFloat(),n=e.readUnsignedByte()/255,a=e.readUnsignedByte()/255,u=e.readUnsignedByte()/255,p=e.readUnsignedByte()/255;switch(e.readByte()){case CURVE_STEPPED:r.setStepped(t);break;case CURVE_BEZIER:setBezier(e,r,s++,t,0,o,i,l,n,1),setBezier(e,r,s++,t,1,o,i,h,a,1),setBezier(e,r,s++,t,2,o,i,d,u,1),setBezier(e,r,s++,t,3,o,i,c,p,1)}o=i,l=n,h=a,d=u,c=p}s.push(r);break}case SLOT_RGB:{let i=e.readInt(!0),r=new RGBTimeline(n,i,t),o=e.readFloat(),l=e.readUnsignedByte()/255,h=e.readUnsignedByte()/255,d=e.readUnsignedByte()/255;for(let t=0,s=0;r.setFrame(t,o,l,h,d),t!=a;t++){let i=e.readFloat(),n=e.readUnsignedByte()/255,a=e.readUnsignedByte()/255,c=e.readUnsignedByte()/255;switch(e.readByte()){case CURVE_STEPPED:r.setStepped(t);break;case CURVE_BEZIER:setBezier(e,r,s++,t,0,o,i,l,n,1),setBezier(e,r,s++,t,1,o,i,h,a,1),setBezier(e,r,s++,t,2,o,i,d,c,1)}o=i,l=n,h=a,d=c}s.push(r);break}case SLOT_RGBA2:{let i=e.readInt(!0),r=new RGBA2Timeline(n,i,t),o=e.readFloat(),l=e.readUnsignedByte()/255,h=e.readUnsignedByte()/255,d=e.readUnsignedByte()/255,c=e.readUnsignedByte()/255,u=e.readUnsignedByte()/255,p=e.readUnsignedByte()/255,g=e.readUnsignedByte()/255;for(let t=0,s=0;r.setFrame(t,o,l,h,d,c,u,p,g),t!=a;t++){let i=e.readFloat(),n=e.readUnsignedByte()/255,a=e.readUnsignedByte()/255,m=e.readUnsignedByte()/255,f=e.readUnsignedByte()/255,v=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,y=e.readUnsignedByte()/255;switch(e.readByte()){case CURVE_STEPPED:r.setStepped(t);break;case CURVE_BEZIER:setBezier(e,r,s++,t,0,o,i,l,n,1),setBezier(e,r,s++,t,1,o,i,h,a,1),setBezier(e,r,s++,t,2,o,i,d,m,1),setBezier(e,r,s++,t,3,o,i,c,f,1),setBezier(e,r,s++,t,4,o,i,u,v,1),setBezier(e,r,s++,t,5,o,i,p,b,1),setBezier(e,r,s++,t,6,o,i,g,y,1)}o=i,l=n,h=a,d=m,c=f,u=v,p=b,g=y}s.push(r);break}case SLOT_RGB2:{let i=e.readInt(!0),r=new RGB2Timeline(n,i,t),o=e.readFloat(),l=e.readUnsignedByte()/255,h=e.readUnsignedByte()/255,d=e.readUnsignedByte()/255,c=e.readUnsignedByte()/255,u=e.readUnsignedByte()/255,p=e.readUnsignedByte()/255;for(let t=0,s=0;r.setFrame(t,o,l,h,d,c,u,p),t!=a;t++){let i=e.readFloat(),n=e.readUnsignedByte()/255,a=e.readUnsignedByte()/255,g=e.readUnsignedByte()/255,m=e.readUnsignedByte()/255,f=e.readUnsignedByte()/255,v=e.readUnsignedByte()/255;switch(e.readByte()){case CURVE_STEPPED:r.setStepped(t);break;case CURVE_BEZIER:setBezier(e,r,s++,t,0,o,i,l,n,1),setBezier(e,r,s++,t,1,o,i,h,a,1),setBezier(e,r,s++,t,2,o,i,d,g,1),setBezier(e,r,s++,t,3,o,i,c,m,1),setBezier(e,r,s++,t,4,o,i,u,f,1),setBezier(e,r,s++,t,5,o,i,p,v,1)}o=i,l=n,h=a,d=g,c=m,u=f,p=v}s.push(r);break}case SLOT_ALPHA:{let i=new AlphaTimeline(n,e.readInt(!0),t),r=e.readFloat(),o=e.readUnsignedByte()/255;for(let t=0,s=0;i.setFrame(t,r,o),t!=a;t++){let n=e.readFloat(),a=e.readUnsignedByte()/255;switch(e.readByte()){case CURVE_STEPPED:i.setStepped(t);break;case CURVE_BEZIER:setBezier(e,i,s++,t,0,r,n,o,a,1)}r=n,o=a}s.push(i)}}}}for(let l=0,h=e.readInt(!0);l<h;l++){let t=e.readInt(!0);for(let i=0,a=e.readInt(!0);i<a;i++){let i=e.readByte(),a=e.readInt(!0);if(i==BONE_INHERIT){let i=new InheritTimeline(a,t);for(let t=0;t<a;t++)i.setFrame(t,e.readFloat(),e.readByte());s.push(i);continue}let r=e.readInt(!0);switch(i){case BONE_ROTATE:s.push(readTimeline1$1(e,new RotateTimeline(a,r,t),1));break;case BONE_TRANSLATE:s.push(readTimeline2$1(e,new TranslateTimeline(a,r,t),n));break;case BONE_TRANSLATEX:s.push(readTimeline1$1(e,new TranslateXTimeline(a,r,t),n));break;case BONE_TRANSLATEY:s.push(readTimeline1$1(e,new TranslateYTimeline(a,r,t),n));break;case BONE_SCALE:s.push(readTimeline2$1(e,new ScaleTimeline(a,r,t),1));break;case BONE_SCALEX:s.push(readTimeline1$1(e,new ScaleXTimeline(a,r,t),1));break;case BONE_SCALEY:s.push(readTimeline1$1(e,new ScaleYTimeline(a,r,t),1));break;case BONE_SHEAR:s.push(readTimeline2$1(e,new ShearTimeline(a,r,t),1));break;case BONE_SHEARX:s.push(readTimeline1$1(e,new ShearXTimeline(a,r,t),1));break;case BONE_SHEARY:s.push(readTimeline1$1(e,new ShearYTimeline(a,r,t),1))}}}for(let l=0,h=e.readInt(!0);l<h;l++){let t=e.readInt(!0),i=e.readInt(!0),a=i-1,r=new IkConstraintTimeline(i,e.readInt(!0),t),o=e.readByte(),l=e.readFloat(),h=1&o?2&o?e.readFloat():1:0,d=4&o?e.readFloat()*n:0;for(let s=0,c=0;r.setFrame(s,l,h,d,8&o?1:-1,!!(16&o),!!(32&o)),s!=a;s++){o=e.readByte();const t=e.readFloat(),i=1&o?2&o?e.readFloat():1:0,a=4&o?e.readFloat()*n:0;64&o?r.setStepped(s):128&o&&(setBezier(e,r,c++,s,0,l,t,h,i,1),setBezier(e,r,c++,s,1,l,t,d,a,n)),l=t,h=i,d=a}s.push(r)}for(let l=0,h=e.readInt(!0);l<h;l++){let t=e.readInt(!0),i=e.readInt(!0),n=i-1,a=new TransformConstraintTimeline(i,e.readInt(!0),t),r=e.readFloat(),o=e.readFloat(),l=e.readFloat(),h=e.readFloat(),d=e.readFloat(),c=e.readFloat(),u=e.readFloat();for(let s=0,p=0;a.setFrame(s,r,o,l,h,d,c,u),s!=n;s++){let t=e.readFloat(),i=e.readFloat(),n=e.readFloat(),g=e.readFloat(),m=e.readFloat(),f=e.readFloat(),v=e.readFloat();switch(e.readByte()){case CURVE_STEPPED:a.setStepped(s);break;case CURVE_BEZIER:setBezier(e,a,p++,s,0,r,t,o,i,1),setBezier(e,a,p++,s,1,r,t,l,n,1),setBezier(e,a,p++,s,2,r,t,h,g,1),setBezier(e,a,p++,s,3,r,t,d,m,1),setBezier(e,a,p++,s,4,r,t,c,f,1),setBezier(e,a,p++,s,5,r,t,u,v,1)}r=t,o=i,l=n,h=g,d=m,c=f,u=v}s.push(a)}for(let l=0,h=e.readInt(!0);l<h;l++){let t=e.readInt(!0),a=i.pathConstraints[t];for(let i=0,r=e.readInt(!0);i<r;i++){const i=e.readByte(),r=e.readInt(!0),o=e.readInt(!0);switch(i){case PATH_POSITION:s.push(readTimeline1$1(e,new PathConstraintPositionTimeline(r,o,t),a.positionMode==PositionMode.Fixed?n:1));break;case PATH_SPACING:s.push(readTimeline1$1(e,new PathConstraintSpacingTimeline(r,o,t),a.spacingMode==SpacingMode.Length||a.spacingMode==SpacingMode.Fixed?n:1));break;case PATH_MIX:let i=new PathConstraintMixTimeline(r,o,t),l=e.readFloat(),h=e.readFloat(),d=e.readFloat(),c=e.readFloat();for(let t=0,s=0,n=i.getFrameCount()-1;i.setFrame(t,l,h,d,c),t!=n;t++){let n=e.readFloat(),a=e.readFloat(),r=e.readFloat(),o=e.readFloat();switch(e.readByte()){case CURVE_STEPPED:i.setStepped(t);break;case CURVE_BEZIER:setBezier(e,i,s++,t,0,l,n,h,a,1),setBezier(e,i,s++,t,1,l,n,d,r,1),setBezier(e,i,s++,t,2,l,n,c,o,1)}l=n,h=a,d=r,c=o}s.push(i)}}}for(let l=0,h=e.readInt(!0);l<h;l++){const t=e.readInt(!0)-1;for(let i=0,n=e.readInt(!0);i<n;i++){const i=e.readByte(),n=e.readInt(!0);if(i==PHYSICS_RESET){const i=new PhysicsConstraintResetTimeline(n,t);for(let t=0;t<n;t++)i.setFrame(t,e.readFloat());s.push(i);continue}const a=e.readInt(!0);switch(i){case PHYSICS_INERTIA:s.push(readTimeline1$1(e,new PhysicsConstraintInertiaTimeline(n,a,t),1));break;case PHYSICS_STRENGTH:s.push(readTimeline1$1(e,new PhysicsConstraintStrengthTimeline(n,a,t),1));break;case PHYSICS_DAMPING:s.push(readTimeline1$1(e,new PhysicsConstraintDampingTimeline(n,a,t),1));break;case PHYSICS_MASS:s.push(readTimeline1$1(e,new PhysicsConstraintMassTimeline(n,a,t),1));break;case PHYSICS_WIND:s.push(readTimeline1$1(e,new PhysicsConstraintWindTimeline(n,a,t),1));break;case PHYSICS_GRAVITY:s.push(readTimeline1$1(e,new PhysicsConstraintGravityTimeline(n,a,t),1));break;case PHYSICS_MIX:s.push(readTimeline1$1(e,new PhysicsConstraintMixTimeline(n,a,t),1))}}}for(let l=0,h=e.readInt(!0);l<h;l++){let t=i.skins[e.readInt(!0)];for(let i=0,a=e.readInt(!0);i<a;i++){let i=e.readInt(!0);for(let a=0,r=e.readInt(!0);a<r;a++){let a=e.readStringRef();if(!a)throw new Error("attachmentName must not be null.");let r=t.getAttachment(i,a),o=e.readByte(),l=e.readInt(!0),h=l-1;switch(o){case ATTACHMENT_DEFORM:{let t=r,a=t.bones,o=t.vertices,d=a?o.length/3*2:o.length,c=e.readInt(!0),u=new DeformTimeline(l,c,i,t),p=e.readFloat();for(let i=0,s=0;;i++){let t,r=e.readInt(!0);if(0==r)t=a?Utils.newFloatArray(d):o;else{t=Utils.newFloatArray(d);let i=e.readInt(!0);if(r+=i,1==n)for(let s=i;s<r;s++)t[s]=e.readFloat();else for(let s=i;s<r;s++)t[s]=e.readFloat()*n;if(!a)for(let e=0,s=t.length;e<s;e++)t[e]+=o[e]}if(u.setFrame(i,p,t),i==h)break;let l=e.readFloat();switch(e.readByte()){case CURVE_STEPPED:u.setStepped(i);break;case CURVE_BEZIER:setBezier(e,u,s++,i,0,p,l,0,1,1)}p=l}s.push(u);break}case ATTACHMENT_SEQUENCE:{let t=new SequenceTimeline(l,i,r);for(let i=0;i<l;i++){let s=e.readFloat(),n=e.readInt32();t.setFrame(i,s,SequenceModeValues[15&n],n>>4,e.readFloat())}s.push(t);break}}}}}let a=e.readInt(!0);if(a>0){let t=new DrawOrderTimeline(a),n=i.slots.length;for(let i=0;i<a;i++){let s=e.readFloat(),a=e.readInt(!0),r=Utils.newArray(n,0);for(let e=n-1;e>=0;e--)r[e]=-1;let o=Utils.newArray(n-a,0),l=0,h=0;for(let t=0;t<a;t++){let t=e.readInt(!0);for(;l!=t;)o[h++]=l++;r[l+e.readInt(!0)]=l++}for(;l<n;)o[h++]=l++;for(let e=n-1;e>=0;e--)-1==r[e]&&(r[e]=o[--h]);t.setFrame(i,s,r)}s.push(t)}let r=e.readInt(!0);if(r>0){let t=new EventTimeline(r);for(let s=0;s<r;s++){let n=e.readFloat(),a=i.events[e.readInt(!0)],r=new Event$1(n,a);r.intValue=e.readInt(!1),r.floatValue=e.readFloat(),r.stringValue=e.readString(),null==r.stringValue&&(r.stringValue=a.stringValue),r.data.audioPath&&(r.volume=e.readFloat(),r.balance=e.readFloat()),t.setFrame(s,r)}s.push(t)}let o=0;for(let l=0,h=s.length;l<h;l++)o=Math.max(o,s[l].getDuration());return new Animation(t,s,o)}}class BinaryInput{constructor(e,t=new Array,i=0,s=new DataView(e instanceof ArrayBuffer?e:e.buffer)){__publicField(this,"strings"),__publicField(this,"index"),__publicField(this,"buffer"),this.strings=t,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){let e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),i=127&t;return 128&t&&(t=this.readByte(),i|=(127&t)<<7,128&t&&(t=this.readByte(),i|=(127&t)<<14,128&t&&(t=this.readByte(),i|=(127&t)<<21,128&t&&(t=this.readByte(),i|=(127&t)<<28)))),e?i:i>>>1^-(1&i)}readStringRef(){let e=this.readInt(!0);return 0==e?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="";for(let i=0;i<e;){let e=this.readUnsignedByte();switch(e>>4){case 12:case 13:t+=String.fromCharCode((31&e)<<6|63&this.readByte()),i+=2;break;case 14:t+=String.fromCharCode((15&e)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:t+=String.fromCharCode(e),i++}}return t}readFloat(){let e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return 0!=this.readByte()}}let LinkedMesh$1=class{constructor(e,t,i,s,n){__publicField(this,"parent"),__publicField(this,"skinIndex"),__publicField(this,"slotIndex"),__publicField(this,"mesh"),__publicField(this,"inheritTimeline"),this.mesh=e,this.skinIndex=t,this.slotIndex=i,this.parent=s,this.inheritTimeline=n}};class Vertices{constructor(e=null,t=null,i=0){__publicField(this,"bones"),__publicField(this,"vertices"),__publicField(this,"length"),this.bones=e,this.vertices=t,this.length=i}}var AttachmentType,AttachmentType2;function readTimeline1$1(e,t,i){let s=e.readFloat(),n=e.readFloat()*i;for(let a=0,r=0,o=t.getFrameCount()-1;t.setFrame(a,s,n),a!=o;a++){let o=e.readFloat(),l=e.readFloat()*i;switch(e.readByte()){case CURVE_STEPPED:t.setStepped(a);break;case CURVE_BEZIER:setBezier(e,t,r++,a,0,s,o,n,l,i)}s=o,n=l}return t}function readTimeline2$1(e,t,i){let s=e.readFloat(),n=e.readFloat()*i,a=e.readFloat()*i;for(let r=0,o=0,l=t.getFrameCount()-1;t.setFrame(r,s,n,a),r!=l;r++){let l=e.readFloat(),h=e.readFloat()*i,d=e.readFloat()*i;switch(e.readByte()){case CURVE_STEPPED:t.setStepped(r);break;case CURVE_BEZIER:setBezier(e,t,o++,r,0,s,l,n,h,i),setBezier(e,t,o++,r,1,s,l,a,d,i)}s=l,n=h,a=d}return t}function setBezier(e,t,i,s,n,a,r,o,l,h){t.setBezier(i,s,n,a,o,e.readFloat(),e.readFloat()*h,e.readFloat(),e.readFloat()*h,r,l)}AttachmentType2=AttachmentType||(AttachmentType={}),AttachmentType2[AttachmentType2.Region=0]="Region",AttachmentType2[AttachmentType2.BoundingBox=1]="BoundingBox",AttachmentType2[AttachmentType2.Mesh=2]="Mesh",AttachmentType2[AttachmentType2.LinkedMesh=3]="LinkedMesh",AttachmentType2[AttachmentType2.Path=4]="Path",AttachmentType2[AttachmentType2.Point=5]="Point",AttachmentType2[AttachmentType2.Clipping=6]="Clipping";const BONE_ROTATE=0,BONE_TRANSLATE=1,BONE_TRANSLATEX=2,BONE_TRANSLATEY=3,BONE_SCALE=4,BONE_SCALEX=5,BONE_SCALEY=6,BONE_SHEAR=7,BONE_SHEARX=8,BONE_SHEARY=9,BONE_INHERIT=10,SLOT_ATTACHMENT=0,SLOT_RGBA=1,SLOT_RGB=2,SLOT_RGBA2=3,SLOT_RGB2=4,SLOT_ALPHA=5,ATTACHMENT_DEFORM=0,ATTACHMENT_SEQUENCE=1,PATH_POSITION=0,PATH_SPACING=1,PATH_MIX=2,PHYSICS_INERTIA=0,PHYSICS_STRENGTH=1,PHYSICS_DAMPING=2,PHYSICS_MASS=4,PHYSICS_WIND=5,PHYSICS_GRAVITY=6,PHYSICS_MIX=7,PHYSICS_RESET=8,CURVE_STEPPED=1,CURVE_BEZIER=2;class SkeletonBounds{constructor(){__publicField(this,"minX",0),__publicField(this,"minY",0),__publicField(this,"maxX",0),__publicField(this,"maxY",0),__publicField(this,"boundingBoxes",new Array),__publicField(this,"polygons",new Array),__publicField(this,"polygonPool",new Pool((()=>Utils.newFloatArray(16))))}update(e,t){if(!e)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,n=this.polygonPool,a=e.slots,r=a.length;i.length=0,n.freeAll(s),s.length=0;for(let o=0;o<r;o++){let e=a[o];if(!e.bone.active)continue;let t=e.getAttachment();if(t instanceof BoundingBoxAttachment){let a=t;i.push(a);let r=n.obtain();r.length!=a.worldVerticesLength&&(r=Utils.newFloatArray(a.worldVerticesLength)),s.push(r),a.computeWorldVertices(e,0,a.worldVerticesLength,r,0,2)}}t?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=this.polygons;for(let a=0,r=n.length;a<r;a++){let r=n[a],o=r;for(let n=0,a=r.length;n<a;n+=2){let a=o[n],r=o[n+1];e=Math.min(e,a),t=Math.min(t,r),i=Math.max(i,a),s=Math.max(s,r)}}this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}aabbContainsPoint(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY}aabbIntersectsSegment(e,t,i,s){let n=this.minX,a=this.minY,r=this.maxX,o=this.maxY;if(e<=n&&i<=n||t<=a&&s<=a||e>=r&&i>=r||t>=o&&s>=o)return!1;let l=(s-t)/(i-e),h=l*(n-e)+t;if(h>a&&h<o)return!0;if(h=l*(r-e)+t,h>a&&h<o)return!0;let d=(a-t)/l+e;return d>n&&d<r||(d=(o-t)/l+e,d>n&&d<r)}aabbIntersectsSkeleton(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY}containsPoint(e,t){let i=this.polygons;for(let s=0,n=i.length;s<n;s++)if(this.containsPointPolygon(i[s],e,t))return this.boundingBoxes[s];return null}containsPointPolygon(e,t,i){let s=e,n=e.length,a=n-2,r=!1;for(let o=0;o<n;o+=2){let e=s[o+1],n=s[a+1];if(e<i&&n>=i||n<i&&e>=i){let l=s[o];l+(i-e)/(n-e)*(s[a]-l)<t&&(r=!r)}a=o}return r}intersectsSegment(e,t,i,s){let n=this.polygons;for(let a=0,r=n.length;a<r;a++)if(this.intersectsSegmentPolygon(n[a],e,t,i,s))return this.boundingBoxes[a];return null}intersectsSegmentPolygon(e,t,i,s,n){let a=e,r=e.length,o=t-s,l=i-n,h=t*n-i*s,d=a[r-2],c=a[r-1];for(let u=0;u<r;u+=2){let e=a[u],r=a[u+1],p=d*r-c*e,g=d-e,m=c-r,f=o*m-l*g,v=(h*g-o*p)/f;if((v>=d&&v<=e||v>=e&&v<=d)&&(v>=t&&v<=s||v>=s&&v<=t)){let e=(h*m-l*p)/f;if((e>=c&&e<=r||e>=r&&e<=c)&&(e>=i&&e<=n||e>=n&&e<=i))return!0}d=e,c=r}return!1}getPolygon(e){if(!e)throw new Error("boundingBox cannot be null.");let t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class Triangulator{constructor(){__publicField(this,"convexPolygons",new Array),__publicField(this,"convexPolygonsIndices",new Array),__publicField(this,"indicesArray",new Array),__publicField(this,"isConcaveArray",new Array),__publicField(this,"triangles",new Array),__publicField(this,"polygonPool",new Pool((()=>new Array))),__publicField(this,"polygonIndicesPool",new Pool((()=>new Array)))}triangulate(e){let t=e,i=e.length>>1,s=this.indicesArray;s.length=0;for(let r=0;r<i;r++)s[r]=r;let n=this.isConcaveArray;n.length=0;for(let r=0,o=i;r<o;++r)n[r]=Triangulator.isConcave(r,i,t,s);let a=this.triangles;for(a.length=0;i>3;){let e=i-1,r=0,o=1;for(;;){e:if(!n[r]){let a=s[e]<<1,l=s[r]<<1,h=s[o]<<1,d=t[a],c=t[a+1],u=t[l],p=t[l+1],g=t[h],m=t[h+1];for(let r=(o+1)%i;r!=e;r=(r+1)%i){if(!n[r])continue;let e=s[r]<<1,i=t[e],a=t[e+1];if(Triangulator.positiveArea(g,m,d,c,i,a)&&Triangulator.positiveArea(d,c,u,p,i,a)&&Triangulator.positiveArea(u,p,g,m,i,a))break e}break}if(0==o){do{if(!n[r])break;r--}while(r>0);break}e=r,r=o,o=(o+1)%i}a.push(s[(i+r-1)%i]),a.push(s[r]),a.push(s[(r+1)%i]),s.splice(r,1),n.splice(r,1),i--;let l=(i+r-1)%i,h=r==i?0:r;n[l]=Triangulator.isConcave(l,i,t,s),n[h]=Triangulator.isConcave(h,i,t,s)}return 3==i&&(a.push(s[2]),a.push(s[0]),a.push(s[1])),a}decompose(e,t){let i=e,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n),n.length=0;let a=this.polygonIndicesPool.obtain();a.length=0;let r=this.polygonPool.obtain();r.length=0;let o=-1,l=0;for(let h=0,d=t.length;h<d;h+=3){let e=t[h]<<1,d=t[h+1]<<1,c=t[h+2]<<1,u=i[e],p=i[e+1],g=i[d],m=i[d+1],f=i[c],v=i[c+1],b=!1;if(o==e){let e=r.length-4,t=Triangulator.winding(r[e],r[e+1],r[e+2],r[e+3],f,v),i=Triangulator.winding(f,v,r[0],r[1],r[2],r[3]);t==l&&i==l&&(r.push(f),r.push(v),a.push(c),b=!0)}b||(r.length>0?(s.push(r),n.push(a)):(this.polygonPool.free(r),this.polygonIndicesPool.free(a)),r=this.polygonPool.obtain(),r.length=0,r.push(u),r.push(p),r.push(g),r.push(m),r.push(f),r.push(v),a=this.polygonIndicesPool.obtain(),a.length=0,a.push(e),a.push(d),a.push(c),l=Triangulator.winding(u,p,g,m,f,v),o=e)}r.length>0&&(s.push(r),n.push(a));for(let h=0,d=s.length;h<d;h++){if(a=n[h],0==a.length)continue;let e=a[0],t=a[a.length-1];r=s[h];let i=r.length-4,o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],p=r[0],g=r[1],m=r[2],f=r[3],v=Triangulator.winding(o,l,c,u,p,g);for(let b=0;b<d;b++){if(b==h)continue;let i=n[b];if(3!=i.length)continue;let d=i[0],y=i[1],C=i[2],x=s[b],S=x[x.length-2],w=x[x.length-1];if(d!=e||y!=t)continue;let T=Triangulator.winding(o,l,c,u,S,w),P=Triangulator.winding(S,w,p,g,m,f);T==v&&P==v&&(x.length=0,i.length=0,r.push(S),r.push(w),a.push(C),o=c,l=u,c=S,u=w,b=0)}}for(let h=s.length-1;h>=0;h--)r=s[h],0==r.length&&(s.splice(h,1),this.polygonPool.free(r),a=n[h],n.splice(h,1),this.polygonIndicesPool.free(a));return s}static isConcave(e,t,i,s){let n=s[(t+e-1)%t]<<1,a=s[e]<<1,r=s[(e+1)%t]<<1;return!this.positiveArea(i[n],i[n+1],i[a],i[a+1],i[r],i[r+1])}static positiveArea(e,t,i,s,n,a){return e*(a-s)+i*(t-a)+n*(s-t)>=0}static winding(e,t,i,s,n,a){let r=i-e,o=s-t;return n*o-a*r+r*t-e*o>=0?1:-1}}class SkeletonClipping{constructor(){__publicField(this,"triangulator",new Triangulator),__publicField(this,"clippingPolygon",new Array),__publicField(this,"clipOutput",new Array),__publicField(this,"clippedVertices",new Array),__publicField(this,"clippedUVs",new Array),__publicField(this,"clippedTriangles",new Array),__publicField(this,"scratch",new Array),__publicField(this,"clipAttachment",null),__publicField(this,"clippingPolygons",null)}clipStart(e,t){if(this.clipAttachment)return 0;this.clipAttachment=t;let i=t.worldVerticesLength,s=Utils.setArraySize(this.clippingPolygon,i);t.computeWorldVertices(e,0,i,s,0,2);let n=this.clippingPolygon;SkeletonClipping.makeClockwise(n);let a=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n));for(let r=0,o=a.length;r<o;r++){let e=a[r];SkeletonClipping.makeClockwise(e),e.push(e[0]),e.push(e[1])}return a.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(e,t,i,s,n,a,r,o){let l,h,d,c,u,p;"number"==typeof t?(l=i,h=s,d=n,c=a,u=r,p=o):(l=t,h=i,d=s,c=n,u=a,p=r),d&&c&&u&&"boolean"==typeof p?this.clipTrianglesRender(e,l,h,d,c,u,p):this.clipTrianglesNoRender(e,l,h)}clipTrianglesNoRender(e,t,i){let s=this.clipOutput,n=this.clippedVertices,a=this.clippedTriangles,r=this.clippingPolygons,o=r.length,l=0;n.length=0,a.length=0;for(let h=0;h<i;h+=3){let i=t[h]<<1,d=e[i],c=e[i+1];i=t[h+1]<<1;let u=e[i],p=e[i+1];i=t[h+2]<<1;let g=e[i],m=e[i+1];for(let e=0;e<o;e++){let t=n.length;if(!this.clip(d,c,u,p,g,m,r[e],s)){let e=Utils.setArraySize(n,t+6);e[t]=d,e[t+1]=c,e[t+2]=u,e[t+3]=p,e[t+4]=g,e[t+5]=m,t=a.length;let i=Utils.setArraySize(a,t+3);i[t]=l,i[t+1]=l+1,i[t+2]=l+2,l+=3;break}{let e=s.length;if(0==e)continue;let i=e>>1,r=this.clipOutput,o=Utils.setArraySize(n,t+2*i);for(let s=0;s<e;s+=2,t+=2){let e=r[s],i=r[s+1];o[t]=e,o[t+1]=i}t=a.length;let h=Utils.setArraySize(a,t+3*(i-2));i--;for(let s=1;s<i;s++,t+=3)h[t]=l,h[t+1]=l+s,h[t+2]=l+s+1;l+=i+1}}}}clipTrianglesRender(e,t,i,s,n,a,r){let o=this.clipOutput,l=this.clippedVertices,h=this.clippedTriangles,d=this.clippingPolygons,c=d.length,u=r?12:8,p=0;l.length=0,h.length=0;for(let g=0;g<i;g+=3){let i=t[g]<<1,m=e[i],f=e[i+1],v=s[i],b=s[i+1];i=t[g+1]<<1;let y=e[i],C=e[i+1],x=s[i],S=s[i+1];i=t[g+2]<<1;let w=e[i],T=e[i+1],P=s[i],_=s[i+1];for(let e=0;e<c;e++){let t=l.length;if(!this.clip(m,f,y,C,w,T,d[e],o)){let e=Utils.setArraySize(l,t+3*u);e[t]=m,e[t+1]=f,e[t+2]=n.r,e[t+3]=n.g,e[t+4]=n.b,e[t+5]=n.a,r?(e[t+6]=v,e[t+7]=b,e[t+8]=a.r,e[t+9]=a.g,e[t+10]=a.b,e[t+11]=a.a,e[t+12]=y,e[t+13]=C,e[t+14]=n.r,e[t+15]=n.g,e[t+16]=n.b,e[t+17]=n.a,e[t+18]=x,e[t+19]=S,e[t+20]=a.r,e[t+21]=a.g,e[t+22]=a.b,e[t+23]=a.a,e[t+24]=w,e[t+25]=T,e[t+26]=n.r,e[t+27]=n.g,e[t+28]=n.b,e[t+29]=n.a,e[t+30]=P,e[t+31]=_,e[t+32]=a.r,e[t+33]=a.g,e[t+34]=a.b,e[t+35]=a.a):(e[t+6]=v,e[t+7]=b,e[t+8]=y,e[t+9]=C,e[t+10]=n.r,e[t+11]=n.g,e[t+12]=n.b,e[t+13]=n.a,e[t+14]=x,e[t+15]=S,e[t+16]=w,e[t+17]=T,e[t+18]=n.r,e[t+19]=n.g,e[t+20]=n.b,e[t+21]=n.a,e[t+22]=P,e[t+23]=_),t=h.length;let i=Utils.setArraySize(h,t+3);i[t]=p,i[t+1]=p+1,i[t+2]=p+2,p+=3;break}{let e=o.length;if(0==e)continue;let i=C-T,s=w-y,d=m-w,c=T-f,g=1/(i*d+s*(f-T)),M=e>>1,O=this.clipOutput,k=Utils.setArraySize(l,t+M*u);for(let o=0;o<e;o+=2,t+=u){let e=O[o],l=O[o+1];k[t]=e,k[t+1]=l,k[t+2]=n.r,k[t+3]=n.g,k[t+4]=n.b,k[t+5]=n.a;let h=e-w,u=l-T,p=(i*h+s*u)*g,m=(c*h+d*u)*g,f=1-p-m;k[t+6]=v*p+x*m+P*f,k[t+7]=b*p+S*m+_*f,r&&(k[t+8]=a.r,k[t+9]=a.g,k[t+10]=a.b,k[t+11]=a.a)}t=h.length;let $=Utils.setArraySize(h,t+3*(M-2));M--;for(let n=1;n<M;n++,t+=3)$[t]=p,$[t+1]=p+n,$[t+2]=p+n+1;p+=M+1}}}}clipTrianglesUnpacked(e,t,i,s){let n=this.clipOutput,a=this.clippedVertices,r=this.clippedUVs,o=this.clippedTriangles,l=this.clippingPolygons,h=l.length,d=0;a.length=0,r.length=0,o.length=0;for(let c=0;c<i;c+=3){let i=t[c]<<1,u=e[i],p=e[i+1],g=s[i],m=s[i+1];i=t[c+1]<<1;let f=e[i],v=e[i+1],b=s[i],y=s[i+1];i=t[c+2]<<1;let C=e[i],x=e[i+1],S=s[i],w=s[i+1];for(let e=0;e<h;e++){let t=a.length;if(!this.clip(u,p,f,v,C,x,l[e],n)){let e=Utils.setArraySize(a,t+6);e[t]=u,e[t+1]=p,e[t+2]=f,e[t+3]=v,e[t+4]=C,e[t+5]=x;let i=Utils.setArraySize(r,t+6);i[t]=g,i[t+1]=m,i[t+2]=b,i[t+3]=y,i[t+4]=S,i[t+5]=w,t=o.length;let s=Utils.setArraySize(o,t+3);s[t]=d,s[t+1]=d+1,s[t+2]=d+2,d+=3;break}{let e=n.length;if(0==e)continue;let i=v-x,s=C-f,l=u-C,h=x-p,c=1/(i*l+s*(p-x)),T=e>>1,P=this.clipOutput,_=Utils.setArraySize(a,t+2*T),M=Utils.setArraySize(r,t+2*T);for(let n=0;n<e;n+=2,t+=2){let e=P[n],a=P[n+1];_[t]=e,_[t+1]=a;let r=e-C,o=a-x,d=(i*r+s*o)*c,u=(h*r+l*o)*c,p=1-d-u;M[t]=g*d+b*u+S*p,M[t+1]=m*d+y*u+w*p}t=o.length;let O=Utils.setArraySize(o,t+3*(T-2));T--;for(let n=1;n<T;n++,t+=3)O[t]=d,O[t+1]=d+n,O[t+2]=d+n+1;d+=T+1}}}}clip(e,t,i,s,n,a,r,o){let l,h=o,d=!1;r.length%4>=2?(l=o,o=this.scratch):l=this.scratch,l.length=0,l.push(e),l.push(t),l.push(i),l.push(s),l.push(n),l.push(a),l.push(e),l.push(t),o.length=0;let c=r.length-4,u=r;for(let p=0;;p+=2){let e=u[p],t=u[p+1],i=e-u[p+2],s=t-u[p+3],n=o.length,a=l;for(let h=0,c=l.length-2;h<c;){let n=a[h],r=a[h+1];h+=2;let l=a[h],c=a[h+1],u=s*(e-l)>i*(t-c),p=s*(e-n)-i*(t-r);if(p>0){if(u){o.push(l),o.push(c);continue}let e=l-n,t=c-r,a=p/(e*s-t*i);if(!(a>=0&&a<=1)){o.push(l),o.push(c);continue}o.push(n+e*a),o.push(r+t*a)}else if(u){let e=l-n,t=c-r,a=p/(e*s-t*i);if(!(a>=0&&a<=1)){o.push(l),o.push(c);continue}o.push(n+e*a),o.push(r+t*a),o.push(l),o.push(c)}d=!0}if(n==o.length)return h.length=0,!0;if(o.push(o[0]),o.push(o[1]),p==c)break;let r=o;(o=l).length=0,l=r}if(h!=o){h.length=0;for(let e=0,t=o.length-2;e<t;e++)h[e]=o[e]}else h.length=h.length-2;return d}static makeClockwise(e){let t=e,i=e.length,s=t[i-2]*t[1]-t[0]*t[i-1],n=0,a=0,r=0,o=0;for(let l=0,h=i-3;l<h;l+=2)n=t[l],a=t[l+1],r=t[l+2],o=t[l+3],s+=n*o-r*a;if(!(s<0))for(let l=0,h=i-2,d=i>>1;l<d;l+=2){let e=t[l],i=t[l+1],s=h-l;t[l]=t[s],t[l+1]=t[s+1],t[s]=e,t[s+1]=i}}}class SkeletonJson{constructor(e){__publicField(this,"attachmentLoader"),__publicField(this,"scale",1),__publicField(this,"linkedMeshes",new Array),this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,i=new SkeletonData,s="string"==typeof e?JSON.parse(e):e,n=s.skeleton;if(n&&(i.hash=n.hash,i.version=n.spine,i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height,i.referenceScale=getValue(n,"referenceScale",100)*t,i.fps=n.fps,i.imagesPath=n.images??null,i.audioPath=n.audio??null),s.bones)for(let a=0;a<s.bones.length;a++){let e=s.bones[a],n=null,r=getValue(e,"parent",null);r&&(n=i.findBone(r));let o=new BoneData(i.bones.length,e.name,n);o.length=getValue(e,"length",0)*t,o.x=getValue(e,"x",0)*t,o.y=getValue(e,"y",0)*t,o.rotation=getValue(e,"rotation",0),o.scaleX=getValue(e,"scaleX",1),o.scaleY=getValue(e,"scaleY",1),o.shearX=getValue(e,"shearX",0),o.shearY=getValue(e,"shearY",0),o.inherit=Utils.enumValue(Inherit,getValue(e,"inherit","Normal")),o.skinRequired=getValue(e,"skin",!1);let l=getValue(e,"color",null);l&&o.color.setFromString(l),i.bones.push(o)}if(s.slots)for(let a=0;a<s.slots.length;a++){let e=s.slots[a],t=e.name,n=i.findBone(e.bone);if(!n)throw new Error(`Couldn't find bone ${e.bone} for slot ${t}`);let r=new SlotData(i.slots.length,t,n),o=getValue(e,"color",null);o&&r.color.setFromString(o);let l=getValue(e,"dark",null);l&&(r.darkColor=Color.fromString(l)),r.attachmentName=getValue(e,"attachment",null),r.blendMode=Utils.enumValue(BlendMode,getValue(e,"blend","normal")),r.visible=getValue(e,"visible",!0),i.slots.push(r)}if(s.ik)for(let a=0;a<s.ik.length;a++){let e=s.ik[a],n=new IkConstraintData(e.name);n.order=getValue(e,"order",0),n.skinRequired=getValue(e,"skin",!1);for(let t=0;t<e.bones.length;t++){let s=i.findBone(e.bones[t]);if(!s)throw new Error(`Couldn't find bone ${e.bones[t]} for IK constraint ${e.name}.`);n.bones.push(s)}let r=i.findBone(e.target);if(!r)throw new Error(`Couldn't find target bone ${e.target} for IK constraint ${e.name}.`);n.target=r,n.mix=getValue(e,"mix",1),n.softness=getValue(e,"softness",0)*t,n.bendDirection=getValue(e,"bendPositive",!0)?1:-1,n.compress=getValue(e,"compress",!1),n.stretch=getValue(e,"stretch",!1),n.uniform=getValue(e,"uniform",!1),i.ikConstraints.push(n)}if(s.transform)for(let a=0;a<s.transform.length;a++){let e=s.transform[a],n=new TransformConstraintData(e.name);n.order=getValue(e,"order",0),n.skinRequired=getValue(e,"skin",!1);for(let t=0;t<e.bones.length;t++){let s=e.bones[t],a=i.findBone(s);if(!a)throw new Error(`Couldn't find bone ${s} for transform constraint ${e.name}.`);n.bones.push(a)}let r=e.target,o=i.findBone(r);if(!o)throw new Error(`Couldn't find target bone ${r} for transform constraint ${e.name}.`);n.target=o,n.local=getValue(e,"local",!1),n.relative=getValue(e,"relative",!1),n.offsetRotation=getValue(e,"rotation",0),n.offsetX=getValue(e,"x",0)*t,n.offsetY=getValue(e,"y",0)*t,n.offsetScaleX=getValue(e,"scaleX",0),n.offsetScaleY=getValue(e,"scaleY",0),n.offsetShearY=getValue(e,"shearY",0),n.mixRotate=getValue(e,"mixRotate",1),n.mixX=getValue(e,"mixX",1),n.mixY=getValue(e,"mixY",n.mixX),n.mixScaleX=getValue(e,"mixScaleX",1),n.mixScaleY=getValue(e,"mixScaleY",n.mixScaleX),n.mixShearY=getValue(e,"mixShearY",1),i.transformConstraints.push(n)}if(s.path)for(let a=0;a<s.path.length;a++){let e=s.path[a],n=new PathConstraintData(e.name);n.order=getValue(e,"order",0),n.skinRequired=getValue(e,"skin",!1);for(let t=0;t<e.bones.length;t++){let s=e.bones[t],a=i.findBone(s);if(!a)throw new Error(`Couldn't find bone ${s} for path constraint ${e.name}.`);n.bones.push(a)}let r=e.target,o=i.findSlot(r);if(!o)throw new Error(`Couldn't find target slot ${r} for path constraint ${e.name}.`);n.target=o,n.positionMode=Utils.enumValue(PositionMode,getValue(e,"positionMode","Percent")),n.spacingMode=Utils.enumValue(SpacingMode,getValue(e,"spacingMode","Length")),n.rotateMode=Utils.enumValue(RotateMode,getValue(e,"rotateMode","Tangent")),n.offsetRotation=getValue(e,"rotation",0),n.position=getValue(e,"position",0),n.positionMode==PositionMode.Fixed&&(n.position*=t),n.spacing=getValue(e,"spacing",0),n.spacingMode!=SpacingMode.Length&&n.spacingMode!=SpacingMode.Fixed||(n.spacing*=t),n.mixRotate=getValue(e,"mixRotate",1),n.mixX=getValue(e,"mixX",1),n.mixY=getValue(e,"mixY",n.mixX),i.pathConstraints.push(n)}if(s.physics)for(let a=0;a<s.physics.length;a++){const e=s.physics[a],n=new PhysicsConstraintData(e.name);n.order=getValue(e,"order",0),n.skinRequired=getValue(e,"skin",!1);const r=e.bone,o=i.findBone(r);if(null==o)throw new Error("Physics bone not found: "+r);n.bone=o,n.x=getValue(e,"x",0),n.y=getValue(e,"y",0),n.rotate=getValue(e,"rotate",0),n.scaleX=getValue(e,"scaleX",0),n.shearX=getValue(e,"shearX",0),n.limit=getValue(e,"limit",5e3)*t,n.step=1/getValue(e,"fps",60),n.inertia=getValue(e,"inertia",1),n.strength=getValue(e,"strength",100),n.damping=getValue(e,"damping",1),n.massInverse=1/getValue(e,"mass",1),n.wind=getValue(e,"wind",0),n.gravity=getValue(e,"gravity",0),n.mix=getValue(e,"mix",1),n.inertiaGlobal=getValue(e,"inertiaGlobal",!1),n.strengthGlobal=getValue(e,"strengthGlobal",!1),n.dampingGlobal=getValue(e,"dampingGlobal",!1),n.massGlobal=getValue(e,"massGlobal",!1),n.windGlobal=getValue(e,"windGlobal",!1),n.gravityGlobal=getValue(e,"gravityGlobal",!1),n.mixGlobal=getValue(e,"mixGlobal",!1),i.physicsConstraints.push(n)}if(s.skins)for(let a=0;a<s.skins.length;a++){let e=s.skins[a],t=new Skin(e.name);if(e.bones)for(let s=0;s<e.bones.length;s++){let n=e.bones[s],a=i.findBone(n);if(!a)throw new Error(`Couldn't find bone ${n} for skin ${e.name}.`);t.bones.push(a)}if(e.ik)for(let s=0;s<e.ik.length;s++){let n=e.ik[s],a=i.findIkConstraint(n);if(!a)throw new Error(`Couldn't find IK constraint ${n} for skin ${e.name}.`);t.constraints.push(a)}if(e.transform)for(let s=0;s<e.transform.length;s++){let n=e.transform[s],a=i.findTransformConstraint(n);if(!a)throw new Error(`Couldn't find transform constraint ${n} for skin ${e.name}.`);t.constraints.push(a)}if(e.path)for(let s=0;s<e.path.length;s++){let n=e.path[s],a=i.findPathConstraint(n);if(!a)throw new Error(`Couldn't find path constraint ${n} for skin ${e.name}.`);t.constraints.push(a)}if(e.physics)for(let s=0;s<e.physics.length;s++){let n=e.physics[s],a=i.findPhysicsConstraint(n);if(!a)throw new Error(`Couldn't find physics constraint ${n} for skin ${e.name}.`);t.constraints.push(a)}for(let s in e.attachments){let n=i.findSlot(s);if(!n)throw new Error(`Couldn't find slot ${s} for skin ${e.name}.`);let a=e.attachments[s];for(let e in a){let s=this.readAttachment(a[e],t,n.index,e,i);s&&t.setAttachment(n.index,e,s)}}i.skins.push(t),"default"==t.name&&(i.defaultSkin=t)}for(let a=0,r=this.linkedMeshes.length;a<r;a++){let e=this.linkedMeshes[a],t=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!t)throw new Error(`Skin not found: ${e.skin}`);let s=t.getAttachment(e.slotIndex,e.parent);if(!s)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?s:e.mesh,e.mesh.setParentMesh(s),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,s.events)for(let a in s.events){let e=s.events[a],t=new EventData(a);t.intValue=getValue(e,"int",0),t.floatValue=getValue(e,"float",0),t.stringValue=getValue(e,"string",""),t.audioPath=getValue(e,"audio",null),t.audioPath&&(t.volume=getValue(e,"volume",1),t.balance=getValue(e,"balance",0)),i.events.push(t)}if(s.animations)for(let a in s.animations){let e=s.animations[a];this.readAnimation(e,a,i)}return i}readAttachment(e,t,i,s,n){let a=this.scale;switch(s=getValue(e,"name",s),getValue(e,"type","region")){case"region":{let i=getValue(e,"path",s),n=this.readSequence(getValue(e,"sequence",null)),r=this.attachmentLoader.newRegionAttachment(t,s,i,n);if(!r)return null;r.path=i,r.x=getValue(e,"x",0)*a,r.y=getValue(e,"y",0)*a,r.scaleX=getValue(e,"scaleX",1),r.scaleY=getValue(e,"scaleY",1),r.rotation=getValue(e,"rotation",0),r.width=e.width*a,r.height=e.height*a,r.sequence=n;let o=getValue(e,"color",null);return o&&r.color.setFromString(o),null!=r.region&&r.updateRegion(),r}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(t,s);if(!i)return null;this.readVertices(e,i,e.vertexCount<<1);let n=getValue(e,"color",null);return n&&i.color.setFromString(n),i}case"mesh":case"linkedmesh":{let n=getValue(e,"path",s),r=this.readSequence(getValue(e,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(t,s,n,r);if(!o)return null;o.path=n;let l=getValue(e,"color",null);l&&o.color.setFromString(l),o.width=getValue(e,"width",0)*a,o.height=getValue(e,"height",0)*a,o.sequence=r;let h=getValue(e,"parent",null);if(h)return this.linkedMeshes.push(new LinkedMesh(o,getValue(e,"skin",null),i,h,getValue(e,"timelines",!0))),o;let d=e.uvs;return this.readVertices(e,o,d.length),o.triangles=e.triangles,o.regionUVs=d,null!=o.region&&o.updateRegion(),o.edges=getValue(e,"edges",null),o.hullLength=2*getValue(e,"hull",0),o}case"path":{let i=this.attachmentLoader.newPathAttachment(t,s);if(!i)return null;i.closed=getValue(e,"closed",!1),i.constantSpeed=getValue(e,"constantSpeed",!0);let n=e.vertexCount;this.readVertices(e,i,n<<1);let r=Utils.newArray(n/3,0);for(let t=0;t<e.lengths.length;t++)r[t]=e.lengths[t]*a;i.lengths=r;let o=getValue(e,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(t,s);if(!i)return null;i.x=getValue(e,"x",0)*a,i.y=getValue(e,"y",0)*a,i.rotation=getValue(e,"rotation",0);let n=getValue(e,"color",null);return n&&i.color.setFromString(n),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(t,s);if(!i)return null;let a=getValue(e,"end",null);a&&(i.endSlot=n.findSlot(a));let r=e.vertexCount;this.readVertices(e,i,r<<1);let o=getValue(e,"color",null);return o&&i.color.setFromString(o),i}}return null}readSequence(e){if(null==e)return null;let t=new Sequence(getValue(e,"count",0));return t.start=getValue(e,"start",1),t.digits=getValue(e,"digits",0),t.setupIndex=getValue(e,"setup",0),t}readVertices(e,t,i){let s=this.scale;t.worldVerticesLength=i;let n=e.vertices;if(i==n.length){let e=Utils.toFloatArray(n);if(1!=s)for(let t=0,i=n.length;t<i;t++)e[t]*=s;return void(t.vertices=e)}let a=new Array,r=new Array;for(let o=0,l=n.length;o<l;){let e=n[o++];r.push(e);for(let t=o+4*e;o<t;o+=4)r.push(n[o]),a.push(n[o+1]*s),a.push(n[o+2]*s),a.push(n[o+3])}t.bones=r,t.vertices=Utils.toFloatArray(a)}readAnimation(e,t,i){let s=this.scale,n=new Array;if(e.slots)for(let r in e.slots){let t=e.slots[r],s=i.findSlot(r);if(!s)throw new Error("Slot not found: "+r);let a=s.index;for(let e in t){let i=t[e];if(!i)continue;let s=i.length;if("attachment"==e){let e=new AttachmentTimeline(s,a);for(let t=0;t<s;t++){let s=i[t];e.setFrame(t,getValue(s,"time",0),getValue(s,"name",null))}n.push(e)}else if("rgba"==e){let e=new RGBATimeline(s,s<<2,a),t=i[0],r=getValue(t,"time",0),o=Color.fromString(t.color);for(let s=0,n=0;;s++){e.setFrame(s,r,o.r,o.g,o.b,o.a);let a=i[s+1];if(!a){e.shrink(n);break}let l=getValue(a,"time",0),h=Color.fromString(a.color),d=t.curve;d&&(n=readCurve(d,e,n,s,0,r,l,o.r,h.r,1),n=readCurve(d,e,n,s,1,r,l,o.g,h.g,1),n=readCurve(d,e,n,s,2,r,l,o.b,h.b,1),n=readCurve(d,e,n,s,3,r,l,o.a,h.a,1)),r=l,o=h,t=a}n.push(e)}else if("rgb"==e){let e=new RGBTimeline(s,3*s,a),t=i[0],r=getValue(t,"time",0),o=Color.fromString(t.color);for(let s=0,n=0;;s++){e.setFrame(s,r,o.r,o.g,o.b);let a=i[s+1];if(!a){e.shrink(n);break}let l=getValue(a,"time",0),h=Color.fromString(a.color),d=t.curve;d&&(n=readCurve(d,e,n,s,0,r,l,o.r,h.r,1),n=readCurve(d,e,n,s,1,r,l,o.g,h.g,1),n=readCurve(d,e,n,s,2,r,l,o.b,h.b,1)),r=l,o=h,t=a}n.push(e)}else if("alpha"==e)n.push(readTimeline1(i,new AlphaTimeline(s,s,a),0,1));else if("rgba2"==e){let e=new RGBA2Timeline(s,7*s,a),t=i[0],r=getValue(t,"time",0),o=Color.fromString(t.light),l=Color.fromString(t.dark);for(let s=0,n=0;;s++){e.setFrame(s,r,o.r,o.g,o.b,o.a,l.r,l.g,l.b);let a=i[s+1];if(!a){e.shrink(n);break}let h=getValue(a,"time",0),d=Color.fromString(a.light),c=Color.fromString(a.dark),u=t.curve;u&&(n=readCurve(u,e,n,s,0,r,h,o.r,d.r,1),n=readCurve(u,e,n,s,1,r,h,o.g,d.g,1),n=readCurve(u,e,n,s,2,r,h,o.b,d.b,1),n=readCurve(u,e,n,s,3,r,h,o.a,d.a,1),n=readCurve(u,e,n,s,4,r,h,l.r,c.r,1),n=readCurve(u,e,n,s,5,r,h,l.g,c.g,1),n=readCurve(u,e,n,s,6,r,h,l.b,c.b,1)),r=h,o=d,l=c,t=a}n.push(e)}else if("rgb2"==e){let e=new RGB2Timeline(s,6*s,a),t=i[0],r=getValue(t,"time",0),o=Color.fromString(t.light),l=Color.fromString(t.dark);for(let s=0,n=0;;s++){e.setFrame(s,r,o.r,o.g,o.b,l.r,l.g,l.b);let a=i[s+1];if(!a){e.shrink(n);break}let h=getValue(a,"time",0),d=Color.fromString(a.light),c=Color.fromString(a.dark),u=t.curve;u&&(n=readCurve(u,e,n,s,0,r,h,o.r,d.r,1),n=readCurve(u,e,n,s,1,r,h,o.g,d.g,1),n=readCurve(u,e,n,s,2,r,h,o.b,d.b,1),n=readCurve(u,e,n,s,3,r,h,l.r,c.r,1),n=readCurve(u,e,n,s,4,r,h,l.g,c.g,1),n=readCurve(u,e,n,s,5,r,h,l.b,c.b,1)),r=h,o=d,l=c,t=a}n.push(e)}}}if(e.bones)for(let r in e.bones){let t=e.bones[r],a=i.findBone(r);if(!a)throw new Error("Bone not found: "+r);let o=a.index;for(let e in t){let i=t[e],r=i.length;if(0!=r)if("rotate"===e)n.push(readTimeline1(i,new RotateTimeline(r,r,o),0,1));else if("translate"===e){let e=new TranslateTimeline(r,r<<1,o);n.push(readTimeline2(i,e,"x","y",0,s))}else if("translatex"===e){let e=new TranslateXTimeline(r,r,o);n.push(readTimeline1(i,e,0,s))}else if("translatey"===e){let e=new TranslateYTimeline(r,r,o);n.push(readTimeline1(i,e,0,s))}else if("scale"===e){let e=new ScaleTimeline(r,r<<1,o);n.push(readTimeline2(i,e,"x","y",1,1))}else if("scalex"===e){let e=new ScaleXTimeline(r,r,o);n.push(readTimeline1(i,e,1,1))}else if("scaley"===e){let e=new ScaleYTimeline(r,r,o);n.push(readTimeline1(i,e,1,1))}else if("shear"===e){let e=new ShearTimeline(r,r<<1,o);n.push(readTimeline2(i,e,"x","y",0,1))}else if("shearx"===e){let e=new ShearXTimeline(r,r,o);n.push(readTimeline1(i,e,0,1))}else if("sheary"===e){let e=new ShearYTimeline(r,r,o);n.push(readTimeline1(i,e,0,1))}else if("inherit"===e){let e=new InheritTimeline(r,a.index);for(let t=0;t<i.length;t++){let s=i[t];e.setFrame(t,getValue(s,"time",0),Utils.enumValue(Inherit,getValue(s,"inherit","Normal")))}n.push(e)}}}if(e.ik)for(let r in e.ik){let t=e.ik[r],a=t[0];if(!a)continue;let o=i.findIkConstraint(r);if(!o)throw new Error("IK Constraint not found: "+r);let l=i.ikConstraints.indexOf(o),h=new IkConstraintTimeline(t.length,t.length<<1,l),d=getValue(a,"time",0),c=getValue(a,"mix",1),u=getValue(a,"softness",0)*s;for(let e=0,i=0;;e++){h.setFrame(e,d,c,u,getValue(a,"bendPositive",!0)?1:-1,getValue(a,"compress",!1),getValue(a,"stretch",!1));let n=t[e+1];if(!n){h.shrink(i);break}let r=getValue(n,"time",0),o=getValue(n,"mix",1),l=getValue(n,"softness",0)*s,p=a.curve;p&&(i=readCurve(p,h,i,e,0,d,r,c,o,1),i=readCurve(p,h,i,e,1,d,r,u,l,s)),d=r,c=o,u=l,a=n}n.push(h)}if(e.transform)for(let r in e.transform){let t=e.transform[r],s=t[0];if(!s)continue;let a=i.findTransformConstraint(r);if(!a)throw new Error("Transform constraint not found: "+r);let o=i.transformConstraints.indexOf(a),l=new TransformConstraintTimeline(t.length,6*t.length,o),h=getValue(s,"time",0),d=getValue(s,"mixRotate",1),c=getValue(s,"mixX",1),u=getValue(s,"mixY",c),p=getValue(s,"mixScaleX",1),g=getValue(s,"mixScaleY",p),m=getValue(s,"mixShearY",1);for(let e=0,i=0;;e++){l.setFrame(e,h,d,c,u,p,g,m);let n=t[e+1];if(!n){l.shrink(i);break}let a=getValue(n,"time",0),r=getValue(n,"mixRotate",1),o=getValue(n,"mixX",1),f=getValue(n,"mixY",o),v=getValue(n,"mixScaleX",1),b=getValue(n,"mixScaleY",v),y=getValue(n,"mixShearY",1),C=s.curve;C&&(i=readCurve(C,l,i,e,0,h,a,d,r,1),i=readCurve(C,l,i,e,1,h,a,c,o,1),i=readCurve(C,l,i,e,2,h,a,u,f,1),i=readCurve(C,l,i,e,3,h,a,p,v,1),i=readCurve(C,l,i,e,4,h,a,g,b,1),i=readCurve(C,l,i,e,5,h,a,m,y,1)),h=a,d=r,c=o,u=f,p=v,g=b,p=v,s=n}n.push(l)}if(e.path)for(let r in e.path){let t=e.path[r],a=i.findPathConstraint(r);if(!a)throw new Error("Path constraint not found: "+r);let o=i.pathConstraints.indexOf(a);for(let e in t){let i=t[e],r=i[0];if(!r)continue;let l=i.length;if("position"===e){let e=new PathConstraintPositionTimeline(l,l,o);n.push(readTimeline1(i,e,0,a.positionMode==PositionMode.Fixed?s:1))}else if("spacing"===e){let e=new PathConstraintSpacingTimeline(l,l,o);n.push(readTimeline1(i,e,0,a.spacingMode==SpacingMode.Length||a.spacingMode==SpacingMode.Fixed?s:1))}else if("mix"===e){let e=new PathConstraintMixTimeline(l,3*l,o),t=getValue(r,"time",0),s=getValue(r,"mixRotate",1),a=getValue(r,"mixX",1),h=getValue(r,"mixY",a);for(let n=0,o=0;;n++){e.setFrame(n,t,s,a,h);let l=i[n+1];if(!l){e.shrink(o);break}let d=getValue(l,"time",0),c=getValue(l,"mixRotate",1),u=getValue(l,"mixX",1),p=getValue(l,"mixY",u),g=r.curve;g&&(o=readCurve(g,e,o,n,0,t,d,s,c,1),o=readCurve(g,e,o,n,1,t,d,a,u,1),o=readCurve(g,e,o,n,2,t,d,h,p,1)),t=d,s=c,a=u,h=p,r=l}n.push(e)}}}if(e.physics)for(let r in e.physics){let t=e.physics[r],s=-1;if(r.length>0){let e=i.findPhysicsConstraint(r);if(!e)throw new Error("Physics constraint not found: "+r);s=i.physicsConstraints.indexOf(e)}for(let e in t){let i=t[e],a=i[0];if(!a)continue;let r,o=i.length;if("reset"!=e){if("inertia"==e)r=new PhysicsConstraintInertiaTimeline(o,o,s);else if("strength"==e)r=new PhysicsConstraintStrengthTimeline(o,o,s);else if("damping"==e)r=new PhysicsConstraintDampingTimeline(o,o,s);else if("mass"==e)r=new PhysicsConstraintMassTimeline(o,o,s);else if("wind"==e)r=new PhysicsConstraintWindTimeline(o,o,s);else if("gravity"==e)r=new PhysicsConstraintGravityTimeline(o,o,s);else{if("mix"!=e)continue;r=new PhysicsConstraintMixTimeline(o,o,s)}n.push(readTimeline1(i,r,0,1))}else{const e=new PhysicsConstraintResetTimeline(o,s);for(let t=0;null!=a;a=i[t+1],t++)e.setFrame(t,getValue(a,"time",0));n.push(e)}}}if(e.attachments)for(let r in e.attachments){let t=e.attachments[r],a=i.findSkin(r);if(!a)throw new Error("Skin not found: "+r);for(let e in t){let r=t[e],o=i.findSlot(e);if(!o)throw new Error("Slot not found: "+e);let l=o.index;for(let e in r){let t=r[e],i=a.getAttachment(l,e);for(let e in t){let a=t[e],r=a[0];if(r)if("deform"==e){let e=i.bones,t=i.vertices,o=e?t.length/3*2:t.length,h=new DeformTimeline(a.length,a.length,l,i),d=getValue(r,"time",0);for(let i=0,n=0;;i++){let l,c=getValue(r,"vertices",null);if(c){l=Utils.newFloatArray(o);let i=getValue(r,"offset",0);if(Utils.arrayCopy(c,0,l,i,c.length),1!=s)for(let e=i,t=e+c.length;e<t;e++)l[e]*=s;if(!e)for(let e=0;e<o;e++)l[e]+=t[e]}else l=e?Utils.newFloatArray(o):t;h.setFrame(i,d,l);let u=a[i+1];if(!u){h.shrink(n);break}let p=getValue(u,"time",0),g=r.curve;g&&(n=readCurve(g,h,n,i,0,d,p,0,1,1)),d=p,r=u}n.push(h)}else if("sequence"==e){let e=new SequenceTimeline(a.length,l,i),t=0;for(let i=0;i<a.length;i++){let s=getValue(r,"delay",t),n=getValue(r,"time",0),o=SequenceMode[getValue(r,"mode","hold")],l=getValue(r,"index",0);e.setFrame(i,n,o,l,s),t=s,r=a[i+1]}n.push(e)}}}}}if(e.drawOrder){let t=new DrawOrderTimeline(e.drawOrder.length),s=i.slots.length,a=0;for(let n=0;n<e.drawOrder.length;n++,a++){let r=e.drawOrder[n],o=null,l=getValue(r,"offsets",null);if(l){o=Utils.newArray(s,-1);let e=Utils.newArray(s-l.length,0),t=0,n=0;for(let s=0;s<l.length;s++){let a=l[s],r=i.findSlot(a.slot);if(!r)throw new Error("Slot not found: "+r);let h=r.index;for(;t!=h;)e[n++]=t++;o[t+a.offset]=t++}for(;t<s;)e[n++]=t++;for(let i=s-1;i>=0;i--)-1==o[i]&&(o[i]=e[--n])}t.setFrame(a,getValue(r,"time",0),o)}n.push(t)}if(e.events){let t=new EventTimeline(e.events.length),s=0;for(let n=0;n<e.events.length;n++,s++){let a=e.events[n],r=i.findEvent(a.name);if(!r)throw new Error("Event not found: "+a.name);let o=new Event$1(Utils.toSinglePrecision(getValue(a,"time",0)),r);o.intValue=getValue(a,"int",r.intValue),o.floatValue=getValue(a,"float",r.floatValue),o.stringValue=getValue(a,"string",r.stringValue),o.data.audioPath&&(o.volume=getValue(a,"volume",1),o.balance=getValue(a,"balance",0)),t.setFrame(s,o)}n.push(t)}let a=0;for(let r=0,o=n.length;r<o;r++)a=Math.max(a,n[r].getDuration());i.animations.push(new Animation(t,n,a))}}class LinkedMesh{constructor(e,t,i,s,n){__publicField(this,"parent"),__publicField(this,"skin"),__publicField(this,"slotIndex"),__publicField(this,"mesh"),__publicField(this,"inheritTimeline"),this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=s,this.inheritTimeline=n}}function readTimeline1(e,t,i,s){let n=e[0],a=getValue(n,"time",0),r=getValue(n,"value",i)*s,o=0;for(let l=0;;l++){t.setFrame(l,a,r);let h=e[l+1];if(!h)return t.shrink(o),t;let d=getValue(h,"time",0),c=getValue(h,"value",i)*s;n.curve&&(o=readCurve(n.curve,t,o,l,0,a,d,r,c,s)),a=d,r=c,n=h}}function readTimeline2(e,t,i,s,n,a){let r=e[0],o=getValue(r,"time",0),l=getValue(r,i,n)*a,h=getValue(r,s,n)*a,d=0;for(let c=0;;c++){t.setFrame(c,o,l,h);let u=e[c+1];if(!u)return t.shrink(d),t;let p=getValue(u,"time",0),g=getValue(u,i,n)*a,m=getValue(u,s,n)*a,f=r.curve;f&&(d=readCurve(f,t,d,c,0,o,p,l,g,a),d=readCurve(f,t,d,c,1,o,p,h,m,a)),o=p,l=g,h=m,r=u}}function readCurve(e,t,i,s,n,a,r,o,l,h){if("stepped"==e)return t.setStepped(s),i;let d=n<<2,c=e[d],u=e[d+1]*h,p=e[d+2],g=e[d+3]*h;return t.setBezier(i,s,n,a,o,c,u,p,g,r,l),i+1}function getValue(e,t,i){return void 0!==e[t]?e[t]:i}void 0===Math.fround&&(Math.fround=function(e){return function(t){return e[0]=t,e[0]}}(new Float32Array(1)));class ManagedWebGLRenderingContext{constructor(e,t={alpha:"true"}){if(__publicField(this,"canvas"),__publicField(this,"gl"),__publicField(this,"restorables",new Array),e instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)this.gl=e,this.canvas=this.gl.canvas;else{let i=e;this.gl=i.getContext("webgl2",t)||i.getContext("webgl",t),this.canvas=i,i.addEventListener("webglcontextlost",(e=>{e&&e.preventDefault()})),i.addEventListener("webglcontextrestored",(e=>{for(let t=0,i=this.restorables.length;t<i;t++)this.restorables[t].restore()}))}}addRestorable(e){this.restorables.push(e)}removeRestorable(e){let t=this.restorables.indexOf(e);t>-1&&this.restorables.splice(t,1)}}const _GLTexture=class e extends Texture{constructor(e,t,i=!1){super(t),__publicField(this,"context"),__publicField(this,"texture",null),__publicField(this,"boundUnit",0),__publicField(this,"useMipMaps",!1),this.context=e instanceof ManagedWebGLRenderingContext?e:new ManagedWebGLRenderingContext(e),this.useMipMaps=i,this.restore(),this.context.addRestorable(this)}setFilters(t,i){let s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,e.validateMagFilter(i)),this.useMipMaps=e.usesMipMaps(t),this.useMipMaps&&s.generateMipmap(s.TEXTURE_2D)}static validateMagFilter(e){switch(e){case TextureFilter.MipMapLinearLinear:case TextureFilter.MipMapLinearNearest:case TextureFilter.MipMapNearestLinear:case TextureFilter.MipMapNearestNearest:return TextureFilter.Linear;default:return e}}static usesMipMaps(e){switch(e){case TextureFilter.MipMapLinearLinear:case TextureFilter.MipMapLinearNearest:case TextureFilter.MipMapNearestLinear:case TextureFilter.MipMapNearestNearest:return!0;default:return!1}}setWraps(e,t){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t)}update(e){let t=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e&&t.generateMipmap(t.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(e=0){let t=this.context.gl;this.boundUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)}unbind(){let e=this.context.gl;e.activeTexture(e.TEXTURE0+this.boundUnit),e.bindTexture(e.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}};__publicField(_GLTexture,"DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL",!1);let GLTexture=_GLTexture;class Vector3{constructor(e=0,t=0,i=0){__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"z",0),this.x=e,this.y=t,this.z=i}setFrom(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}scale(e){return this.x*=e,this.y*=e,this.z*=e,this}normalize(){let e=this.length();return 0==e||(e=1/e,this.x*=e,this.y*=e,this.z*=e),this}cross(e){return this.set(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}multiply(e){let t=e.values;return this.set(this.x*t[M00]+this.y*t[M01]+this.z*t[M02]+t[M03],this.x*t[M10]+this.y*t[M11]+this.z*t[M12]+t[M13],this.x*t[M20]+this.y*t[M21]+this.z*t[M22]+t[M23])}project(e){let t=e.values,i=1/(this.x*t[M30]+this.y*t[M31]+this.z*t[M32]+t[M33]);return this.set((this.x*t[M00]+this.y*t[M01]+this.z*t[M02]+t[M03])*i,(this.x*t[M10]+this.y*t[M11]+this.z*t[M12]+t[M13])*i,(this.x*t[M20]+this.y*t[M21]+this.z*t[M22]+t[M23])*i)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(e){let t=e.x-this.x,i=e.y-this.y,s=e.z-this.z;return Math.sqrt(t*t+i*i+s*s)}}const M00=0,M01=4,M02=8,M03=12,M10=1,M11=5,M12=9,M13=13,M20=2,M21=6,M22=10,M23=14,M30=3,M31=7,M32=11,M33=15,_Matrix4=class e{constructor(){__publicField(this,"temp",new Float32Array(16)),__publicField(this,"values",new Float32Array(16));let e=this.values;e[M00]=1,e[M11]=1,e[M22]=1,e[M33]=1}set(e){return this.values.set(e),this}transpose(){let e=this.temp,t=this.values;return e[M00]=t[M00],e[M01]=t[M10],e[M02]=t[M20],e[M03]=t[M30],e[M10]=t[M01],e[M11]=t[M11],e[M12]=t[M21],e[M13]=t[M31],e[M20]=t[M02],e[M21]=t[M12],e[M22]=t[M22],e[M23]=t[M32],e[M30]=t[M03],e[M31]=t[M13],e[M32]=t[M23],e[M33]=t[M33],this.set(e)}identity(){let e=this.values;return e[M00]=1,e[M01]=0,e[M02]=0,e[M03]=0,e[M10]=0,e[M11]=1,e[M12]=0,e[M13]=0,e[M20]=0,e[M21]=0,e[M22]=1,e[M23]=0,e[M30]=0,e[M31]=0,e[M32]=0,e[M33]=1,this}invert(){let e=this.values,t=this.temp,i=e[M30]*e[M21]*e[M12]*e[M03]-e[M20]*e[M31]*e[M12]*e[M03]-e[M30]*e[M11]*e[M22]*e[M03]+e[M10]*e[M31]*e[M22]*e[M03]+e[M20]*e[M11]*e[M32]*e[M03]-e[M10]*e[M21]*e[M32]*e[M03]-e[M30]*e[M21]*e[M02]*e[M13]+e[M20]*e[M31]*e[M02]*e[M13]+e[M30]*e[M01]*e[M22]*e[M13]-e[M00]*e[M31]*e[M22]*e[M13]-e[M20]*e[M01]*e[M32]*e[M13]+e[M00]*e[M21]*e[M32]*e[M13]+e[M30]*e[M11]*e[M02]*e[M23]-e[M10]*e[M31]*e[M02]*e[M23]-e[M30]*e[M01]*e[M12]*e[M23]+e[M00]*e[M31]*e[M12]*e[M23]+e[M10]*e[M01]*e[M32]*e[M23]-e[M00]*e[M11]*e[M32]*e[M23]-e[M20]*e[M11]*e[M02]*e[M33]+e[M10]*e[M21]*e[M02]*e[M33]+e[M20]*e[M01]*e[M12]*e[M33]-e[M00]*e[M21]*e[M12]*e[M33]-e[M10]*e[M01]*e[M22]*e[M33]+e[M00]*e[M11]*e[M22]*e[M33];if(0==i)throw new Error("non-invertible matrix");let s=1/i;return t[M00]=e[M12]*e[M23]*e[M31]-e[M13]*e[M22]*e[M31]+e[M13]*e[M21]*e[M32]-e[M11]*e[M23]*e[M32]-e[M12]*e[M21]*e[M33]+e[M11]*e[M22]*e[M33],t[M01]=e[M03]*e[M22]*e[M31]-e[M02]*e[M23]*e[M31]-e[M03]*e[M21]*e[M32]+e[M01]*e[M23]*e[M32]+e[M02]*e[M21]*e[M33]-e[M01]*e[M22]*e[M33],t[M02]=e[M02]*e[M13]*e[M31]-e[M03]*e[M12]*e[M31]+e[M03]*e[M11]*e[M32]-e[M01]*e[M13]*e[M32]-e[M02]*e[M11]*e[M33]+e[M01]*e[M12]*e[M33],t[M03]=e[M03]*e[M12]*e[M21]-e[M02]*e[M13]*e[M21]-e[M03]*e[M11]*e[M22]+e[M01]*e[M13]*e[M22]+e[M02]*e[M11]*e[M23]-e[M01]*e[M12]*e[M23],t[M10]=e[M13]*e[M22]*e[M30]-e[M12]*e[M23]*e[M30]-e[M13]*e[M20]*e[M32]+e[M10]*e[M23]*e[M32]+e[M12]*e[M20]*e[M33]-e[M10]*e[M22]*e[M33],t[M11]=e[M02]*e[M23]*e[M30]-e[M03]*e[M22]*e[M30]+e[M03]*e[M20]*e[M32]-e[M00]*e[M23]*e[M32]-e[M02]*e[M20]*e[M33]+e[M00]*e[M22]*e[M33],t[M12]=e[M03]*e[M12]*e[M30]-e[M02]*e[M13]*e[M30]-e[M03]*e[M10]*e[M32]+e[M00]*e[M13]*e[M32]+e[M02]*e[M10]*e[M33]-e[M00]*e[M12]*e[M33],t[M13]=e[M02]*e[M13]*e[M20]-e[M03]*e[M12]*e[M20]+e[M03]*e[M10]*e[M22]-e[M00]*e[M13]*e[M22]-e[M02]*e[M10]*e[M23]+e[M00]*e[M12]*e[M23],t[M20]=e[M11]*e[M23]*e[M30]-e[M13]*e[M21]*e[M30]+e[M13]*e[M20]*e[M31]-e[M10]*e[M23]*e[M31]-e[M11]*e[M20]*e[M33]+e[M10]*e[M21]*e[M33],t[M21]=e[M03]*e[M21]*e[M30]-e[M01]*e[M23]*e[M30]-e[M03]*e[M20]*e[M31]+e[M00]*e[M23]*e[M31]+e[M01]*e[M20]*e[M33]-e[M00]*e[M21]*e[M33],t[M22]=e[M01]*e[M13]*e[M30]-e[M03]*e[M11]*e[M30]+e[M03]*e[M10]*e[M31]-e[M00]*e[M13]*e[M31]-e[M01]*e[M10]*e[M33]+e[M00]*e[M11]*e[M33],t[M23]=e[M03]*e[M11]*e[M20]-e[M01]*e[M13]*e[M20]-e[M03]*e[M10]*e[M21]+e[M00]*e[M13]*e[M21]+e[M01]*e[M10]*e[M23]-e[M00]*e[M11]*e[M23],t[M30]=e[M12]*e[M21]*e[M30]-e[M11]*e[M22]*e[M30]-e[M12]*e[M20]*e[M31]+e[M10]*e[M22]*e[M31]+e[M11]*e[M20]*e[M32]-e[M10]*e[M21]*e[M32],t[M31]=e[M01]*e[M22]*e[M30]-e[M02]*e[M21]*e[M30]+e[M02]*e[M20]*e[M31]-e[M00]*e[M22]*e[M31]-e[M01]*e[M20]*e[M32]+e[M00]*e[M21]*e[M32],t[M32]=e[M02]*e[M11]*e[M30]-e[M01]*e[M12]*e[M30]-e[M02]*e[M10]*e[M31]+e[M00]*e[M12]*e[M31]+e[M01]*e[M10]*e[M32]-e[M00]*e[M11]*e[M32],t[M33]=e[M01]*e[M12]*e[M20]-e[M02]*e[M11]*e[M20]+e[M02]*e[M10]*e[M21]-e[M00]*e[M12]*e[M21]-e[M01]*e[M10]*e[M22]+e[M00]*e[M11]*e[M22],e[M00]=t[M00]*s,e[M01]=t[M01]*s,e[M02]=t[M02]*s,e[M03]=t[M03]*s,e[M10]=t[M10]*s,e[M11]=t[M11]*s,e[M12]=t[M12]*s,e[M13]=t[M13]*s,e[M20]=t[M20]*s,e[M21]=t[M21]*s,e[M22]=t[M22]*s,e[M23]=t[M23]*s,e[M30]=t[M30]*s,e[M31]=t[M31]*s,e[M32]=t[M32]*s,e[M33]=t[M33]*s,this}determinant(){let e=this.values;return e[M30]*e[M21]*e[M12]*e[M03]-e[M20]*e[M31]*e[M12]*e[M03]-e[M30]*e[M11]*e[M22]*e[M03]+e[M10]*e[M31]*e[M22]*e[M03]+e[M20]*e[M11]*e[M32]*e[M03]-e[M10]*e[M21]*e[M32]*e[M03]-e[M30]*e[M21]*e[M02]*e[M13]+e[M20]*e[M31]*e[M02]*e[M13]+e[M30]*e[M01]*e[M22]*e[M13]-e[M00]*e[M31]*e[M22]*e[M13]-e[M20]*e[M01]*e[M32]*e[M13]+e[M00]*e[M21]*e[M32]*e[M13]+e[M30]*e[M11]*e[M02]*e[M23]-e[M10]*e[M31]*e[M02]*e[M23]-e[M30]*e[M01]*e[M12]*e[M23]+e[M00]*e[M31]*e[M12]*e[M23]+e[M10]*e[M01]*e[M32]*e[M23]-e[M00]*e[M11]*e[M32]*e[M23]-e[M20]*e[M11]*e[M02]*e[M33]+e[M10]*e[M21]*e[M02]*e[M33]+e[M20]*e[M01]*e[M12]*e[M33]-e[M00]*e[M21]*e[M12]*e[M33]-e[M10]*e[M01]*e[M22]*e[M33]+e[M00]*e[M11]*e[M22]*e[M33]}translate(e,t,i){let s=this.values;return s[M03]+=e,s[M13]+=t,s[M23]+=i,this}copy(){return(new e).set(this.values)}projection(e,t,i,s){this.identity();let n=1/Math.tan(i*(Math.PI/180)/2),a=(t+e)/(e-t),r=2*t*e/(e-t),o=this.values;return o[M00]=n/s,o[M10]=0,o[M20]=0,o[M30]=0,o[M01]=0,o[M11]=n,o[M21]=0,o[M31]=0,o[M02]=0,o[M12]=0,o[M22]=a,o[M32]=-1,o[M03]=0,o[M13]=0,o[M23]=r,o[M33]=0,this}ortho2d(e,t,i,s){return this.ortho(e,e+i,t,t+s,0,1)}ortho(e,t,i,s,n,a){this.identity();let r=2/(t-e),o=2/(s-i),l=-2/(a-n),h=-(t+e)/(t-e),d=-(s+i)/(s-i),c=-(a+n)/(a-n),u=this.values;return u[M00]=r,u[M10]=0,u[M20]=0,u[M30]=0,u[M01]=0,u[M11]=o,u[M21]=0,u[M31]=0,u[M02]=0,u[M12]=0,u[M22]=l,u[M32]=0,u[M03]=h,u[M13]=d,u[M23]=c,u[M33]=1,this}multiply(e){let t=this.temp,i=this.values,s=e.values;return t[M00]=i[M00]*s[M00]+i[M01]*s[M10]+i[M02]*s[M20]+i[M03]*s[M30],t[M01]=i[M00]*s[M01]+i[M01]*s[M11]+i[M02]*s[M21]+i[M03]*s[M31],t[M02]=i[M00]*s[M02]+i[M01]*s[M12]+i[M02]*s[M22]+i[M03]*s[M32],t[M03]=i[M00]*s[M03]+i[M01]*s[M13]+i[M02]*s[M23]+i[M03]*s[M33],t[M10]=i[M10]*s[M00]+i[M11]*s[M10]+i[M12]*s[M20]+i[M13]*s[M30],t[M11]=i[M10]*s[M01]+i[M11]*s[M11]+i[M12]*s[M21]+i[M13]*s[M31],t[M12]=i[M10]*s[M02]+i[M11]*s[M12]+i[M12]*s[M22]+i[M13]*s[M32],t[M13]=i[M10]*s[M03]+i[M11]*s[M13]+i[M12]*s[M23]+i[M13]*s[M33],t[M20]=i[M20]*s[M00]+i[M21]*s[M10]+i[M22]*s[M20]+i[M23]*s[M30],t[M21]=i[M20]*s[M01]+i[M21]*s[M11]+i[M22]*s[M21]+i[M23]*s[M31],t[M22]=i[M20]*s[M02]+i[M21]*s[M12]+i[M22]*s[M22]+i[M23]*s[M32],t[M23]=i[M20]*s[M03]+i[M21]*s[M13]+i[M22]*s[M23]+i[M23]*s[M33],t[M30]=i[M30]*s[M00]+i[M31]*s[M10]+i[M32]*s[M20]+i[M33]*s[M30],t[M31]=i[M30]*s[M01]+i[M31]*s[M11]+i[M32]*s[M21]+i[M33]*s[M31],t[M32]=i[M30]*s[M02]+i[M31]*s[M12]+i[M32]*s[M22]+i[M33]*s[M32],t[M33]=i[M30]*s[M03]+i[M31]*s[M13]+i[M32]*s[M23]+i[M33]*s[M33],this.set(this.temp)}multiplyLeft(e){let t=this.temp,i=this.values,s=e.values;return t[M00]=s[M00]*i[M00]+s[M01]*i[M10]+s[M02]*i[M20]+s[M03]*i[M30],t[M01]=s[M00]*i[M01]+s[M01]*i[M11]+s[M02]*i[M21]+s[M03]*i[M31],t[M02]=s[M00]*i[M02]+s[M01]*i[M12]+s[M02]*i[M22]+s[M03]*i[M32],t[M03]=s[M00]*i[M03]+s[M01]*i[M13]+s[M02]*i[M23]+s[M03]*i[M33],t[M10]=s[M10]*i[M00]+s[M11]*i[M10]+s[M12]*i[M20]+s[M13]*i[M30],t[M11]=s[M10]*i[M01]+s[M11]*i[M11]+s[M12]*i[M21]+s[M13]*i[M31],t[M12]=s[M10]*i[M02]+s[M11]*i[M12]+s[M12]*i[M22]+s[M13]*i[M32],t[M13]=s[M10]*i[M03]+s[M11]*i[M13]+s[M12]*i[M23]+s[M13]*i[M33],t[M20]=s[M20]*i[M00]+s[M21]*i[M10]+s[M22]*i[M20]+s[M23]*i[M30],t[M21]=s[M20]*i[M01]+s[M21]*i[M11]+s[M22]*i[M21]+s[M23]*i[M31],t[M22]=s[M20]*i[M02]+s[M21]*i[M12]+s[M22]*i[M22]+s[M23]*i[M32],t[M23]=s[M20]*i[M03]+s[M21]*i[M13]+s[M22]*i[M23]+s[M23]*i[M33],t[M30]=s[M30]*i[M00]+s[M31]*i[M10]+s[M32]*i[M20]+s[M33]*i[M30],t[M31]=s[M30]*i[M01]+s[M31]*i[M11]+s[M32]*i[M21]+s[M33]*i[M31],t[M32]=s[M30]*i[M02]+s[M31]*i[M12]+s[M32]*i[M22]+s[M33]*i[M32],t[M33]=s[M30]*i[M03]+s[M31]*i[M13]+s[M32]*i[M23]+s[M33]*i[M33],this.set(this.temp)}lookAt(t,i,s){let n=e.xAxis,a=e.yAxis,r=e.zAxis;r.setFrom(i).normalize(),n.setFrom(i).normalize(),n.cross(s).normalize(),a.setFrom(n).cross(r).normalize(),this.identity();let o=this.values;return o[M00]=n.x,o[M01]=n.y,o[M02]=n.z,o[M10]=a.x,o[M11]=a.y,o[M12]=a.z,o[M20]=-r.x,o[M21]=-r.y,o[M22]=-r.z,e.tmpMatrix.identity(),e.tmpMatrix.values[M03]=-t.x,e.tmpMatrix.values[M13]=-t.y,e.tmpMatrix.values[M23]=-t.z,this.multiply(e.tmpMatrix),this}};__publicField(_Matrix4,"xAxis",new Vector3),__publicField(_Matrix4,"yAxis",new Vector3),__publicField(_Matrix4,"zAxis",new Vector3),__publicField(_Matrix4,"tmpMatrix",new _Matrix4);let Matrix4=_Matrix4;class OrthoCamera{constructor(e,t){__publicField(this,"position",new Vector3(0,0,0)),__publicField(this,"direction",new Vector3(0,0,-1)),__publicField(this,"up",new Vector3(0,1,0)),__publicField(this,"near",0),__publicField(this,"far",100),__publicField(this,"zoom",1),__publicField(this,"viewportWidth",0),__publicField(this,"viewportHeight",0),__publicField(this,"projectionView",new Matrix4),__publicField(this,"inverseProjectionView",new Matrix4),__publicField(this,"projection",new Matrix4),__publicField(this,"view",new Matrix4),this.viewportWidth=e,this.viewportHeight=t,this.update()}update(){let e=this.projection,t=this.view,i=this.projectionView,s=this.inverseProjectionView,n=this.zoom,a=this.viewportWidth,r=this.viewportHeight;e.ortho(n*(-a/2),n*(a/2),n*(-r/2),n*(r/2),this.near,this.far),t.lookAt(this.position,this.direction,this.up),i.set(e.values),i.multiply(t),s.set(i.values).invert()}screenToWorld(e,t,i){let s=e.x,n=i-e.y-1;return e.x=2*s/t-1,e.y=2*n/i-1,e.z=2*e.z-1,e.project(this.inverseProjectionView),e}worldToScreen(e,t,i){return e.project(this.projectionView),e.x=t*(e.x+1)/2,e.y=i*(e.y+1)/2,e.z=(e.z+1)/2,e}setViewport(e,t){this.viewportWidth=e,this.viewportHeight=t}}const _Shader=class t{constructor(e,t,i){__publicField(this,"vertexShader"),__publicField(this,"fragmentShader"),__publicField(this,"context"),__publicField(this,"vs",null),__publicField(this,"vsSource"),__publicField(this,"fs",null),__publicField(this,"fsSource"),__publicField(this,"program",null),__publicField(this,"tmp2x2",new Float32Array(4)),__publicField(this,"tmp3x3",new Float32Array(9)),__publicField(this,"tmp4x4",new Float32Array(16)),this.vertexShader=t,this.fragmentShader=i,this.vsSource=t,this.fsSource=i,this.context=e instanceof ManagedWebGLRenderingContext?e:new ManagedWebGLRenderingContext(e),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(e){throw this.dispose(),e}}compileShader(e,t){let i=this.context.gl,s=i.createShader(e);if(!s)throw new Error("Couldn't create shader.");if(i.shaderSource(s,t),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS)){let e="Couldn't compile shader: "+i.getShaderInfoLog(s);if(i.deleteShader(s),!i.isContextLost())throw new Error(e)}return s}compileProgram(e,t){let i=this.context.gl,s=i.createProgram();if(!s)throw new Error("Couldn't compile program.");if(i.attachShader(s,e),i.attachShader(s,t),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS)){let e="Couldn't compile shader program: "+i.getProgramInfoLog(s);if(i.deleteProgram(s),!i.isContextLost())throw new Error(e)}return s}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(e,t){this.context.gl.uniform1i(this.getUniformLocation(e),t)}setUniformf(e,t){this.context.gl.uniform1f(this.getUniformLocation(e),t)}setUniform2f(e,t,i){this.context.gl.uniform2f(this.getUniformLocation(e),t,i)}setUniform3f(e,t,i,s){this.context.gl.uniform3f(this.getUniformLocation(e),t,i,s)}setUniform4f(e,t,i,s,n){this.context.gl.uniform4f(this.getUniformLocation(e),t,i,s,n)}setUniform2x2f(e,t){let i=this.context.gl;this.tmp2x2.set(t),i.uniformMatrix2fv(this.getUniformLocation(e),!1,this.tmp2x2)}setUniform3x3f(e,t){let i=this.context.gl;this.tmp3x3.set(t),i.uniformMatrix3fv(this.getUniformLocation(e),!1,this.tmp3x3)}setUniform4x4f(e,t){let i=this.context.gl;this.tmp4x4.set(t),i.uniformMatrix4fv(this.getUniformLocation(e),!1,this.tmp4x4)}getUniformLocation(e){let t=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=t.getUniformLocation(this.program,e);if(!i&&!t.isContextLost())throw new Error(`Couldn't find location for uniform ${e}`);return i}getAttributeLocation(e){let t=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=t.getAttribLocation(this.program,e);if(-1==i&&!t.isContextLost())throw new Error(`Couldn't find location for attribute ${e}`);return i}dispose(){this.context.removeRestorable(this);let e=this.context.gl;this.vs&&(e.deleteShader(this.vs),this.vs=null),this.fs&&(e.deleteShader(this.fs),this.fs=null),this.program&&(e.deleteProgram(this.program),this.program=null)}static newColoredTextured(e){let i=`\nattribute vec4 ${t.POSITION};\nattribute vec4 ${t.COLOR};\nattribute vec2 ${t.TEXCOORDS};\nuniform mat4 ${t.MVP_MATRIX};\nvarying vec4 v_color;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_color = ${t.COLOR};\n\tv_texCoords = ${t.TEXCOORDS};\n\tgl_Position = ${t.MVP_MATRIX} * ${t.POSITION};\n}\n`;return new t(e,i,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n}\n")}static newTwoColoredTextured(e){let i=`\nattribute vec4 ${t.POSITION};\nattribute vec4 ${t.COLOR};\nattribute vec4 ${t.COLOR2};\nattribute vec2 ${t.TEXCOORDS};\nuniform mat4 ${t.MVP_MATRIX};\nvarying vec4 v_light;\nvarying vec4 v_dark;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_light = ${t.COLOR};\n\tv_dark = ${t.COLOR2};\n\tv_texCoords = ${t.TEXCOORDS};\n\tgl_Position = ${t.MVP_MATRIX} * ${t.POSITION};\n}\n`;return new t(e,i,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_light;\nvarying LOWP vec4 v_dark;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\tgl_FragColor.a = texColor.a * v_light.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n}\n")}static newColored(e){let i=`\nattribute vec4 ${t.POSITION};\nattribute vec4 ${t.COLOR};\nuniform mat4 ${t.MVP_MATRIX};\nvarying vec4 v_color;\n\nvoid main () {\n\tv_color = ${t.COLOR};\n\tgl_Position = ${t.MVP_MATRIX} * ${t.POSITION};\n}\n`;return new t(e,i,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\n\nvoid main () {\n\tgl_FragColor = v_color;\n}\n")}};__publicField(_Shader,"MVP_MATRIX","u_projTrans"),__publicField(_Shader,"POSITION","a_position"),__publicField(_Shader,"COLOR","a_color"),__publicField(_Shader,"COLOR2","a_color2"),__publicField(_Shader,"TEXCOORDS","a_texCoords"),__publicField(_Shader,"SAMPLER","u_texture");let Shader=_Shader;class Mesh{constructor(e,t,i,s){__publicField(this,"attributes"),__publicField(this,"context"),__publicField(this,"vertices"),__publicField(this,"verticesBuffer",null),__publicField(this,"verticesLength",0),__publicField(this,"dirtyVertices",!1),__publicField(this,"indices"),__publicField(this,"indicesBuffer",null),__publicField(this,"indicesLength",0),__publicField(this,"dirtyIndices",!1),__publicField(this,"elementsPerVertex",0),this.attributes=t,this.context=e instanceof ManagedWebGLRenderingContext?e:new ManagedWebGLRenderingContext(e),this.elementsPerVertex=0;for(let n=0;n<t.length;n++)this.elementsPerVertex+=t[n].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(s),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(e){this.dirtyVertices=!0,this.verticesLength=e}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(e){this.dirtyIndices=!0,this.indicesLength=e}getIndices(){return this.indices}getVertexSizeInFloats(){let e=0;for(var t=0;t<this.attributes.length;t++)e+=this.attributes[t].numElements;return e}setVertices(e){if(this.dirtyVertices=!0,e.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(e,0),this.verticesLength=e.length}setIndices(e){if(this.dirtyIndices=!0,e.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(e,0),this.indicesLength=e.length}draw(e,t){this.drawWithOffset(e,t,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(e,t,i,s){let n=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(e),this.indicesLength>0?n.drawElements(t,s,n.UNSIGNED_SHORT,2*i):n.drawArrays(t,i,s),this.unbind(e)}bind(e){let t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let s=0;s<this.attributes.length;s++){let n=this.attributes[s],a=e.getAttributeLocation(n.name);t.enableVertexAttribArray(a),t.vertexAttribPointer(a,n.numElements,t.FLOAT,!1,4*this.elementsPerVertex,4*i),i+=n.numElements}this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(e){let t=this.context.gl;for(let i=0;i<this.attributes.length;i++){let s=this.attributes[i],n=e.getAttributeLocation(s.name);t.disableVertexAttribArray(n)}t.bindBuffer(t.ARRAY_BUFFER,null),this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}update(){let e=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),e.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=e.createBuffer()),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),e.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let e=this.context.gl;e.deleteBuffer(this.verticesBuffer),e.deleteBuffer(this.indicesBuffer)}}class VertexAttribute{constructor(e,t,i){__publicField(this,"name"),__publicField(this,"type"),__publicField(this,"numElements"),this.name=e,this.type=t,this.numElements=i}}class Position2Attribute extends VertexAttribute{constructor(){super(Shader.POSITION,VertexAttributeType.Float,2)}}class TexCoordAttribute extends VertexAttribute{constructor(e=0){super(Shader.TEXCOORDS+(0==e?"":e),VertexAttributeType.Float,2)}}class ColorAttribute extends VertexAttribute{constructor(){super(Shader.COLOR,VertexAttributeType.Float,4)}}class Color2Attribute extends VertexAttribute{constructor(){super(Shader.COLOR2,VertexAttributeType.Float,4)}}var VertexAttributeType,VertexAttributeType2;VertexAttributeType2=VertexAttributeType||(VertexAttributeType={}),VertexAttributeType2[VertexAttributeType2.Float=0]="Float";const GL_ONE=1,GL_ONE_MINUS_SRC_COLOR=769,GL_SRC_ALPHA=770,GL_ONE_MINUS_SRC_ALPHA=771,GL_DST_COLOR=774,_PolygonBatcher=class e{constructor(e,t=!0,i=10920){if(__publicField(this,"context"),__publicField(this,"drawCalls",0),__publicField(this,"isDrawing",!1),__publicField(this,"mesh"),__publicField(this,"shader",null),__publicField(this,"lastTexture",null),__publicField(this,"verticesLength",0),__publicField(this,"indicesLength",0),__publicField(this,"srcColorBlend"),__publicField(this,"srcAlphaBlend"),__publicField(this,"dstBlend"),__publicField(this,"cullWasEnabled",!1),i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e instanceof ManagedWebGLRenderingContext?e:new ManagedWebGLRenderingContext(e);let s=t?[new Position2Attribute,new ColorAttribute,new TexCoordAttribute,new Color2Attribute]:[new Position2Attribute,new ColorAttribute,new TexCoordAttribute];this.mesh=new Mesh(e,s,i,3*i);let n=this.context.gl;this.srcColorBlend=n.SRC_ALPHA,this.srcAlphaBlend=n.ONE,this.dstBlend=n.ONE_MINUS_SRC_ALPHA}begin(e){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=e,this.lastTexture=null,this.isDrawing=!0;let t=this.context.gl;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,i){const s=e.blendModesGL[t],n=i?s.srcRgbPma:s.srcRgb,a=s.srcAlpha,r=s.dstRgb;this.srcColorBlend==n&&this.srcAlphaBlend==a&&this.dstBlend==r||(this.srcColorBlend=n,this.srcAlphaBlend=a,this.dstBlend=r,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(n,r,a,r))}draw(e,t,i){e!=this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+t.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let s=this.mesh.numVertices();this.mesh.getVertices().set(t,this.verticesLength),this.verticesLength+=t.length,this.mesh.setVerticesLength(this.verticesLength);let n=this.mesh.getIndices();for(let a=this.indicesLength,r=0;r<i.length;a++,r++)n[a]=i[r]+s;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,e.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let e=this.context.gl;e.disable(e.BLEND)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=e.globalDrawCalls;return e.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}};__publicField(_PolygonBatcher,"disableCulling",!1),__publicField(_PolygonBatcher,"globalDrawCalls",0),__publicField(_PolygonBatcher,"blendModesGL",[{srcRgb:GL_SRC_ALPHA,srcRgbPma:GL_ONE,dstRgb:GL_ONE_MINUS_SRC_ALPHA,srcAlpha:GL_ONE},{srcRgb:GL_SRC_ALPHA,srcRgbPma:GL_ONE,dstRgb:GL_ONE,srcAlpha:GL_ONE},{srcRgb:GL_DST_COLOR,srcRgbPma:GL_DST_COLOR,dstRgb:GL_ONE_MINUS_SRC_ALPHA,srcAlpha:GL_ONE},{srcRgb:GL_ONE,srcRgbPma:GL_ONE,dstRgb:GL_ONE_MINUS_SRC_COLOR,srcAlpha:GL_ONE}]);let PolygonBatcher=_PolygonBatcher;class ShapeRenderer{constructor(e,t=10920){if(__publicField(this,"context"),__publicField(this,"isDrawing",!1),__publicField(this,"mesh"),__publicField(this,"shapeType",ShapeType.Filled),__publicField(this,"color",new Color(1,1,1,1)),__publicField(this,"shader",null),__publicField(this,"vertexIndex",0),__publicField(this,"tmp",new Vector2),__publicField(this,"srcColorBlend"),__publicField(this,"srcAlphaBlend"),__publicField(this,"dstBlend"),t>10920)throw new Error("Can't have more than 10920 triangles per batch: "+t);this.context=e instanceof ManagedWebGLRenderingContext?e:new ManagedWebGLRenderingContext(e),this.mesh=new Mesh(e,[new Position2Attribute,new ColorAttribute],t,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(e){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=e,this.vertexIndex=0,this.isDrawing=!0;let t=this.context.gl;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(e,t,i){this.srcColorBlend=e,this.srcAlphaBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(e,i,t,i))}setColor(e){this.color.setFromColor(e)}setColorWith(e,t,i,s){this.color.set(e,t,i,s)}point(e,t,i){this.check(ShapeType.Point,1),i||(i=this.color),this.vertex(e,t,i)}line(e,t,i,s,n){this.check(ShapeType.Line,2),this.mesh.getVertices(),this.vertexIndex,n||(n=this.color),this.vertex(e,t,n),this.vertex(i,s,n)}triangle(e,t,i,s,n,a,r,o,l,h){this.check(e?ShapeType.Filled:ShapeType.Line,3),this.mesh.getVertices(),this.vertexIndex,o||(o=this.color),l||(l=this.color),h||(h=this.color),e?(this.vertex(t,i,o),this.vertex(s,n,l),this.vertex(a,r,h)):(this.vertex(t,i,o),this.vertex(s,n,l),this.vertex(s,n,o),this.vertex(a,r,l),this.vertex(a,r,o),this.vertex(t,i,l))}quad(e,t,i,s,n,a,r,o,l,h,d,c,u){this.check(e?ShapeType.Filled:ShapeType.Line,3),this.mesh.getVertices(),this.vertexIndex,h||(h=this.color),d||(d=this.color),c||(c=this.color),u||(u=this.color),e?(this.vertex(t,i,h),this.vertex(s,n,d),this.vertex(a,r,c),this.vertex(a,r,c),this.vertex(o,l,u),this.vertex(t,i,h)):(this.vertex(t,i,h),this.vertex(s,n,d),this.vertex(s,n,d),this.vertex(a,r,c),this.vertex(a,r,c),this.vertex(o,l,u),this.vertex(o,l,u),this.vertex(t,i,h))}rect(e,t,i,s,n,a){this.quad(e,t,i,t+s,i,t+s,i+n,t,i+n,a,a,a,a)}rectLine(e,t,i,s,n,a,r){this.check(e?ShapeType.Filled:ShapeType.Line,8),r||(r=this.color);let o=this.tmp.set(n-i,t-s);o.normalize(),a*=.5;let l=o.x*a,h=o.y*a;e?(this.vertex(t+l,i+h,r),this.vertex(t-l,i-h,r),this.vertex(s+l,n+h,r),this.vertex(s-l,n-h,r),this.vertex(s+l,n+h,r),this.vertex(t-l,i-h,r)):(this.vertex(t+l,i+h,r),this.vertex(t-l,i-h,r),this.vertex(s+l,n+h,r),this.vertex(s-l,n-h,r),this.vertex(s+l,n+h,r),this.vertex(t+l,i+h,r),this.vertex(s-l,n-h,r),this.vertex(t-l,i-h,r))}x(e,t,i){this.line(e-i,t-i,e+i,t+i),this.line(e-i,t+i,e+i,t-i)}polygon(e,t,i,s){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(ShapeType.Line,2*i),s||(s=this.color),this.mesh.getVertices(),this.vertexIndex,i<<=1;let n=e[t<<=1],a=e[t+1],r=t+i;for(let o=t,l=t+i-2;o<l;o+=2){let t=e[o],i=e[o+1],l=0,h=0;o+2>=r?(l=n,h=a):(l=e[o+2],h=e[o+3]),this.vertex(t,i,s),this.vertex(l,h,s)}}circle(e,t,i,s,n,a=0){if(0==a&&(a=Math.max(1,6*MathUtils.cbrt(s)|0)),a<=0)throw new Error("segments must be > 0.");n||(n=this.color);let r=2*MathUtils.PI/a,o=Math.cos(r),l=Math.sin(r),h=s,d=0;if(e){this.check(ShapeType.Filled,3*a+3),a--;for(let e=0;e<a;e++){this.vertex(t,i,n),this.vertex(t+h,i+d,n);let e=h;h=o*h-l*d,d=l*e+o*d,this.vertex(t+h,i+d,n)}this.vertex(t,i,n),this.vertex(t+h,i+d,n)}else{this.check(ShapeType.Line,2*a+2);for(let e=0;e<a;e++){this.vertex(t+h,i+d,n);let e=h;h=o*h-l*d,d=l*e+o*d,this.vertex(t+h,i+d,n)}this.vertex(t+h,i+d,n)}h=s,d=0,this.vertex(t+h,i+d,n)}curve(e,t,i,s,n,a,r,o,l,h){this.check(ShapeType.Line,2*l+2),h||(h=this.color);let d=1/l,c=d*d,u=d*d*d,p=3*d,g=3*c,m=6*c,f=6*u,v=e-2*i+n,b=t-2*s+a,y=3*(i-n)-e+r,C=3*(s-a)-t+o,x=e,S=t,w=(i-e)*p+v*g+y*u,T=(s-t)*p+b*g+C*u,P=v*m+y*f,_=b*m+C*f,M=y*f,O=C*f;for(;l-- >0;)this.vertex(x,S,h),x+=w,S+=T,w+=P,T+=_,P+=M,_+=O,this.vertex(x,S,h);this.vertex(x,S,h),this.vertex(r,o,h)}vertex(e,t,i){let s=this.vertexIndex,n=this.mesh.getVertices();n[s++]=e,n[s++]=t,n[s++]=i.r,n[s++]=i.g,n[s++]=i.b,n[s++]=i.a,this.vertexIndex=s}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let e=this.context.gl;e.disable(e.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(e,t){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==e){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<t))return;this.flush()}else this.flush(),this.shapeType=e}dispose(){this.mesh.dispose()}}var ShapeType,ShapeType2;ShapeType2=ShapeType||(ShapeType={}),ShapeType2[ShapeType2.Point=0]="Point",ShapeType2[ShapeType2.Line=1]="Line",ShapeType2[ShapeType2.Filled=4]="Filled";const _SkeletonDebugRenderer=class e{constructor(e){__publicField(this,"boneLineColor",new Color(1,0,0,1)),__publicField(this,"boneOriginColor",new Color(0,1,0,1)),__publicField(this,"attachmentLineColor",new Color(0,0,1,.5)),__publicField(this,"triangleLineColor",new Color(1,.64,0,.5)),__publicField(this,"pathColor",(new Color).setFromString("FF7F00")),__publicField(this,"clipColor",new Color(.8,0,0,2)),__publicField(this,"aabbColor",new Color(0,1,0,.5)),__publicField(this,"drawBones",!0),__publicField(this,"drawRegionAttachments",!0),__publicField(this,"drawBoundingBoxes",!0),__publicField(this,"drawMeshHull",!0),__publicField(this,"drawMeshTriangles",!0),__publicField(this,"drawPaths",!0),__publicField(this,"drawSkeletonXY",!1),__publicField(this,"drawClipping",!0),__publicField(this,"premultipliedAlpha",!1),__publicField(this,"scale",1),__publicField(this,"boneWidth",2),__publicField(this,"context"),__publicField(this,"bounds",new SkeletonBounds),__publicField(this,"temp",new Array),__publicField(this,"vertices",Utils.newFloatArray(2048)),this.context=e instanceof ManagedWebGLRenderingContext?e:new ManagedWebGLRenderingContext(e)}draw(t,i,s){let n=i.x,a=i.y,r=this.context.gl,o=this.premultipliedAlpha?r.ONE:r.SRC_ALPHA;t.setBlendMode(o,r.ONE,r.ONE_MINUS_SRC_ALPHA);let l=i.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,i=l.length;e<i;e++){let i=l[e];if(s&&s.indexOf(i.data.name)>-1)continue;if(!i.parent)continue;let n=i.data.length*i.a+i.worldX,a=i.data.length*i.c+i.worldY;t.rectLine(!0,i.worldX,i.worldY,n,a,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(n,a,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let e=i.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i],n=s.getAttachment();if(n instanceof RegionAttachment){let e=n,i=this.vertices;e.computeWorldVertices(s,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let e=i.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(!s.bone.active)continue;let n=s.getAttachment();if(!(n instanceof MeshAttachment))continue;let a=n,r=this.vertices;a.computeWorldVertices(s,0,a.worldVerticesLength,r,0,2);let o=a.triangles,l=a.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,i=o.length;e<i;e+=3){let i=2*o[e],s=2*o[e+1],n=2*o[e+2];t.triangle(!1,r[i],r[i+1],r[s],r[s+1],r[n],r[n+1])}}if(this.drawMeshHull&&l>0){t.setColor(this.attachmentLineColor),l=2*(l>>1);let e=r[l-2],i=r[l-1];for(let s=0,n=l;s<n;s+=2){let n=r[s],a=r[s+1];t.line(n,a,e,i),e=n,i=a}}}}if(this.drawBoundingBoxes){let e=this.bounds;e.update(i,!0),t.setColor(this.aabbColor),t.rect(!1,e.minX,e.minY,e.getWidth(),e.getHeight());let s=e.polygons,n=e.boundingBoxes;for(let i=0,a=s.length;i<a;i++){let e=s[i];t.setColor(n[i].color),t.polygon(e,0,e.length)}}if(this.drawPaths){let s=i.slots;for(let i=0,n=s.length;i<n;i++){let n=s[i];if(!n.bone.active)continue;let a=n.getAttachment();if(!(a instanceof PathAttachment))continue;let r=a,o=r.worldVerticesLength,l=this.temp=Utils.setArraySize(this.temp,o,0);r.computeWorldVertices(n,0,o,l,0,2);let h=this.pathColor,d=l[2],c=l[3],u=0,p=0;if(r.closed){t.setColor(h);let i=l[0],s=l[1],n=l[o-2],a=l[o-1];u=l[o-4],p=l[o-3],t.curve(d,c,i,s,n,a,u,p,32),t.setColor(e.LIGHT_GRAY),t.line(d,c,i,s),t.line(u,p,n,a)}o-=4;for(let i=4;i<o;i+=6){let s=l[i],n=l[i+1],a=l[i+2],r=l[i+3];u=l[i+4],p=l[i+5],t.setColor(h),t.curve(d,c,s,n,a,r,u,p,32),t.setColor(e.LIGHT_GRAY),t.line(d,c,s,n),t.line(u,p,a,r),d=u,c=p}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,i=l.length;e<i;e++){let i=l[e];s&&s.indexOf(i.data.name)>-1||t.circle(!0,i.worldX,i.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let e=i.slots;t.setColor(this.clipColor);for(let i=0,s=e.length;i<s;i++){let s=e[i];if(!s.bone.active)continue;let n=s.getAttachment();if(!(n instanceof ClippingAttachment))continue;let a=n,r=a.worldVerticesLength,o=this.temp=Utils.setArraySize(this.temp,r,0);a.computeWorldVertices(s,0,r,o,0,2);for(let e=0,i=o.length;e<i;e+=2){let i=o[e],s=o[e+1],n=o[(e+2)%o.length],a=o[(e+3)%o.length];t.line(i,s,n,a)}}}}dispose(){}};__publicField(_SkeletonDebugRenderer,"LIGHT_GRAY",new Color(192/255,192/255,192/255,1)),__publicField(_SkeletonDebugRenderer,"GREEN",new Color(0,1,0,1));let SkeletonDebugRenderer=_SkeletonDebugRenderer;class Renderable{constructor(e,t,i){__publicField(this,"vertices"),__publicField(this,"numVertices"),__publicField(this,"numFloats"),this.vertices=e,this.numVertices=t,this.numFloats=i}}let SkeletonRenderer$1=(_a=class{constructor(e,t=!0){__publicField(this,"premultipliedAlpha",!1),__publicField(this,"tempColor",new Color),__publicField(this,"tempColor2",new Color),__publicField(this,"vertices"),__publicField(this,"vertexSize",8),__publicField(this,"twoColorTint",!1),__publicField(this,"renderable",new Renderable([],0,0)),__publicField(this,"clipper",new SkeletonClipping),__publicField(this,"temp",new Vector2),__publicField(this,"temp2",new Vector2),__publicField(this,"temp3",new Color),__publicField(this,"temp4",new Color),this.twoColorTint=t,t&&(this.vertexSize+=4),this.vertices=Utils.newFloatArray(1024*this.vertexSize)}draw(e,t,i=-1,s=-1,n=null){let a,r,o,l=this.clipper,h=this.premultipliedAlpha,d=this.twoColorTint,c=null,u=this.renderable,p=t.drawOrder,g=t.color,m=d?12:8,f=!1;-1==i&&(f=!0);for(let v=0,b=p.length;v<b;v++){let t=l.isClipping()?2:m,b=p[v];if(!b.bone.active){l.clipEndWithSlot(b);continue}if(i>=0&&i==b.data.index&&(f=!0),!f){l.clipEndWithSlot(b);continue}s>=0&&s==b.data.index&&(f=!1);let y,C=b.getAttachment();if(C instanceof RegionAttachment){let e=C;u.vertices=this.vertices,u.numVertices=4,u.numFloats=t<<2,e.computeWorldVertices(b,u.vertices,0,t),r=_a.QUAD_TRIANGLES,a=e.uvs,y=e.region.texture,o=e.color}else{if(!(C instanceof MeshAttachment)){if(C instanceof ClippingAttachment){let e=C;l.clipStart(b,e);continue}l.clipEndWithSlot(b);continue}{let e=C;u.vertices=this.vertices,u.numVertices=e.worldVerticesLength>>1,u.numFloats=u.numVertices*t,u.numFloats>u.vertices.length&&(u.vertices=this.vertices=Utils.newFloatArray(u.numFloats)),e.computeWorldVertices(b,0,e.worldVerticesLength,u.vertices,0,t),r=e.triangles,y=e.region.texture,a=e.uvs,o=e.color}}if(y){let t=b.color,i=this.tempColor;i.r=g.r*t.r*o.r,i.g=g.g*t.g*o.g,i.b=g.b*t.b*o.b,i.a=g.a*t.a*o.a,h&&(i.r*=i.a,i.g*=i.a,i.b*=i.a);let s=this.tempColor2;b.darkColor?(h?(s.r=b.darkColor.r*i.a,s.g=b.darkColor.g*i.a,s.b=b.darkColor.b*i.a):s.setFromColor(b.darkColor),s.a=h?1:0):s.set(0,0,0,1);let p=b.data.blendMode;if(p!=c&&(c=p,e.setBlendMode(c,h)),l.isClipping()){l.clipTriangles(u.vertices,r,r.length,a,i,s,d);let t=new Float32Array(l.clippedVertices),o=l.clippedTriangles;n&&n(t,t.length,m),e.draw(y,t,o)}else{let t=u.vertices;if(d)for(let e=2,n=0,r=u.numFloats;e<r;e+=m,n+=2)t[e]=i.r,t[e+1]=i.g,t[e+2]=i.b,t[e+3]=i.a,t[e+4]=a[n],t[e+5]=a[n+1],t[e+6]=s.r,t[e+7]=s.g,t[e+8]=s.b,t[e+9]=s.a;else for(let e=2,s=0,n=u.numFloats;e<n;e+=m,s+=2)t[e]=i.r,t[e+1]=i.g,t[e+2]=i.b,t[e+3]=i.a,t[e+4]=a[s],t[e+5]=a[s+1];let o=u.vertices.subarray(0,u.numFloats);n&&n(u.vertices,u.numFloats,m),e.draw(y,o,r)}}l.clipEndWithSlot(b)}l.clipEnd()}getSkeletonClipping(){return this.clipper}},__publicField(_a,"QUAD_TRIANGLES",[0,1,2,2,3,0]),_a);const quad=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],QUAD_TRIANGLES=[0,1,2,2,3,0],WHITE=new Color(1,1,1,1);class SceneRenderer{constructor(e,t,i=!0){__publicField(this,"context"),__publicField(this,"canvas"),__publicField(this,"camera"),__publicField(this,"batcher"),__publicField(this,"twoColorTint",!1),__publicField(this,"batcherShader"),__publicField(this,"shapes"),__publicField(this,"shapesShader"),__publicField(this,"activeRenderer",null),__publicField(this,"skeletonRenderer"),__publicField(this,"skeletonDebugRenderer"),this.canvas=e,this.context=t instanceof ManagedWebGLRenderingContext?t:new ManagedWebGLRenderingContext(t),this.twoColorTint=i,this.camera=new OrthoCamera(e.width,e.height),this.batcherShader=i?Shader.newTwoColoredTextured(this.context):Shader.newColoredTextured(this.context),this.batcher=new PolygonBatcher(this.context,i),this.shapesShader=Shader.newColored(this.context),this.shapes=new ShapeRenderer(this.context),this.skeletonRenderer=new SkeletonRenderer$1(this.context,i),this.skeletonDebugRenderer=new SkeletonDebugRenderer(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(e,t=!1,i=-1,s=-1,n=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=t,this.skeletonRenderer.draw(this.batcher,e,i,s,n)}drawSkeletonDebug(e,t=!1,i){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=t,this.skeletonDebugRenderer.draw(this.shapes,e,i)}drawTexture(e,t,i,s,n,a){this.enableRenderer(this.batcher),a||(a=WHITE);var r=0;quad[r++]=t,quad[r++]=i,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=0,quad[r++]=1,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r++]=0),quad[r++]=t+s,quad[r++]=i,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=1,quad[r++]=1,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r++]=0),quad[r++]=t+s,quad[r++]=i+n,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=1,quad[r++]=0,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r++]=0),quad[r++]=t,quad[r++]=i+n,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=0,quad[r++]=0,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r]=0),this.batcher.draw(e,quad,QUAD_TRIANGLES)}drawTextureUV(e,t,i,s,n,a,r,o,l,h){this.enableRenderer(this.batcher),h||(h=WHITE);var d=0;quad[d++]=t,quad[d++]=i,quad[d++]=h.r,quad[d++]=h.g,quad[d++]=h.b,quad[d++]=h.a,quad[d++]=a,quad[d++]=r,this.twoColorTint&&(quad[d++]=0,quad[d++]=0,quad[d++]=0,quad[d++]=0),quad[d++]=t+s,quad[d++]=i,quad[d++]=h.r,quad[d++]=h.g,quad[d++]=h.b,quad[d++]=h.a,quad[d++]=o,quad[d++]=r,this.twoColorTint&&(quad[d++]=0,quad[d++]=0,quad[d++]=0,quad[d++]=0),quad[d++]=t+s,quad[d++]=i+n,quad[d++]=h.r,quad[d++]=h.g,quad[d++]=h.b,quad[d++]=h.a,quad[d++]=o,quad[d++]=l,this.twoColorTint&&(quad[d++]=0,quad[d++]=0,quad[d++]=0,quad[d++]=0),quad[d++]=t,quad[d++]=i+n,quad[d++]=h.r,quad[d++]=h.g,quad[d++]=h.b,quad[d++]=h.a,quad[d++]=a,quad[d++]=l,this.twoColorTint&&(quad[d++]=0,quad[d++]=0,quad[d++]=0,quad[d]=0),this.batcher.draw(e,quad,QUAD_TRIANGLES)}drawTextureRotated(e,t,i,s,n,a,r,o,l){this.enableRenderer(this.batcher),l||(l=WHITE);let h=t+a,d=i+r,c=-a,u=-r,p=s-a,g=n-r,m=c,f=u,v=c,b=g,y=p,C=g,x=p,S=u,w=0,T=0,P=0,_=0,M=0,O=0,k=0,$=0;if(0!=o){let e=MathUtils.cosDeg(o),t=MathUtils.sinDeg(o);w=e*m-t*f,T=t*m+e*f,k=e*v-t*b,$=t*v+e*b,M=e*y-t*C,O=t*y+e*C,P=M+(w-k),_=O+(T-$)}else w=m,T=f,k=v,$=b,M=y,O=C,P=x,_=S;w+=h,T+=d,P+=h,_+=d,M+=h,O+=d,k+=h,$+=d;var G=0;quad[G++]=w,quad[G++]=T,quad[G++]=l.r,quad[G++]=l.g,quad[G++]=l.b,quad[G++]=l.a,quad[G++]=0,quad[G++]=1,this.twoColorTint&&(quad[G++]=0,quad[G++]=0,quad[G++]=0,quad[G++]=0),quad[G++]=P,quad[G++]=_,quad[G++]=l.r,quad[G++]=l.g,quad[G++]=l.b,quad[G++]=l.a,quad[G++]=1,quad[G++]=1,this.twoColorTint&&(quad[G++]=0,quad[G++]=0,quad[G++]=0,quad[G++]=0),quad[G++]=M,quad[G++]=O,quad[G++]=l.r,quad[G++]=l.g,quad[G++]=l.b,quad[G++]=l.a,quad[G++]=1,quad[G++]=0,this.twoColorTint&&(quad[G++]=0,quad[G++]=0,quad[G++]=0,quad[G++]=0),quad[G++]=k,quad[G++]=$,quad[G++]=l.r,quad[G++]=l.g,quad[G++]=l.b,quad[G++]=l.a,quad[G++]=0,quad[G++]=0,this.twoColorTint&&(quad[G++]=0,quad[G++]=0,quad[G++]=0,quad[G]=0),this.batcher.draw(e,quad,QUAD_TRIANGLES)}drawRegion(e,t,i,s,n,a){this.enableRenderer(this.batcher),a||(a=WHITE);var r=0;quad[r++]=t,quad[r++]=i,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=e.u,quad[r++]=e.v2,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r++]=0),quad[r++]=t+s,quad[r++]=i,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=e.u2,quad[r++]=e.v2,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r++]=0),quad[r++]=t+s,quad[r++]=i+n,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=e.u2,quad[r++]=e.v,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r++]=0),quad[r++]=t,quad[r++]=i+n,quad[r++]=a.r,quad[r++]=a.g,quad[r++]=a.b,quad[r++]=a.a,quad[r++]=e.u,quad[r++]=e.v,this.twoColorTint&&(quad[r++]=0,quad[r++]=0,quad[r++]=0,quad[r]=0),this.batcher.draw(e.page.texture,quad,QUAD_TRIANGLES)}line(e,t,i,s,n,a){this.enableRenderer(this.shapes),this.shapes.line(e,t,i,s,n)}triangle(e,t,i,s,n,a,r,o,l,h){this.enableRenderer(this.shapes),this.shapes.triangle(e,t,i,s,n,a,r,o,l,h)}quad(e,t,i,s,n,a,r,o,l,h,d,c,u){this.enableRenderer(this.shapes),this.shapes.quad(e,t,i,s,n,a,r,o,l,h,d,c,u)}rect(e,t,i,s,n,a){this.enableRenderer(this.shapes),this.shapes.rect(e,t,i,s,n,a)}rectLine(e,t,i,s,n,a,r){this.enableRenderer(this.shapes),this.shapes.rectLine(e,t,i,s,n,a,r)}polygon(e,t,i,s){this.enableRenderer(this.shapes),this.shapes.polygon(e,t,i,s)}circle(e,t,i,s,n,a=0){this.enableRenderer(this.shapes),this.shapes.circle(e,t,i,s,n,a)}curve(e,t,i,s,n,a,r,o,l,h){this.enableRenderer(this.shapes),this.shapes.curve(e,t,i,s,n,a,r,o,l,h)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(e){let t=this.canvas;var i=window.devicePixelRatio||1,s=Math.round(t.clientWidth*i),n=Math.round(t.clientHeight*i);if(t.width==s&&t.height==n||(t.width=s,t.height=n),this.context.gl.viewport(0,0,t.width,t.height),e===ResizeMode.Expand)this.camera.setViewport(s,n);else if(e===ResizeMode.Fit){let e=t.width,i=t.height,s=this.camera.viewportWidth,n=this.camera.viewportHeight,a=n/s<i/e?s/e:n/i;this.camera.setViewport(e*a,i*a)}this.camera.update()}enableRenderer(e){this.activeRenderer!==e&&(this.end(),e instanceof PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):e instanceof ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}var ResizeMode,ResizeMode2;ResizeMode2=ResizeMode||(ResizeMode={}),ResizeMode2[ResizeMode2.Stretch=0]="Stretch",ResizeMode2[ResizeMode2.Expand=1]="Expand",ResizeMode2[ResizeMode2.Fit=2]="Fit";let components=Phaser.GameObjects.Components;const ComputedSize=components.ComputedSize,Depth=components.Depth,Flip=components.Flip,ScrollFactor=components.ScrollFactor,Transform=components.Transform,Visible=components.Visible,Origin=components.Origin,Alpha=components.Alpha;function createMixin(...e){return t=>(Phaser.Class.mixin(t,e),t)}const ComputedSizeMixin=createMixin(ComputedSize),DepthMixin=createMixin(Depth),FlipMixin=createMixin(Flip),ScrollFactorMixin=createMixin(ScrollFactor),TransformMixin=createMixin(Transform),VisibleMixin=createMixin(Visible),OriginMixin=createMixin(Origin),AlphaMixin=createMixin(Alpha);class BaseSpineGameObject extends Phaser.GameObjects.GameObject{constructor(e,t){super(e,t)}}class SetupPoseBoundsProvider{constructor(e=!1){__publicField(this,"clipping"),this.clipping=e}calculateBounds(e){if(!e.skeleton)return{x:0,y:0,width:0,height:0};const t=new Skeleton(e.skeleton.data);t.setToSetupPose(),t.updateWorldTransform(Physics.update);const i=t.getBoundsRect(this.clipping?new SkeletonClipping:void 0);return i.width==Number.NEGATIVE_INFINITY?{x:0,y:0,width:0,height:0}:i}}class SpineGameObject extends(DepthMixin(OriginMixin(ComputedSizeMixin(FlipMixin(ScrollFactorMixin(TransformMixin(VisibleMixin(AlphaMixin(BaseSpineGameObject))))))))){constructor(e,t,i,s,n,a,r=new SetupPoseBoundsProvider){super(e,window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:SPINE_GAME_OBJECT_TYPE),__publicField(this,"plugin"),__publicField(this,"boundsProvider"),__publicField(this,"blendMode",-1),__publicField(this,"skeleton"),__publicField(this,"animationStateData"),__publicField(this,"animationState"),__publicField(this,"beforeUpdateWorldTransforms",(()=>{})),__publicField(this,"afterUpdateWorldTransforms",(()=>{})),__publicField(this,"premultipliedAlpha",!1),__publicField(this,"offsetX",0),__publicField(this,"offsetY",0),this.plugin=t,this.boundsProvider=r,this.setPosition(i,s),this.premultipliedAlpha=this.plugin.isAtlasPremultiplied(a),this.skeleton=this.plugin.createSkeleton(n,a),this.animationStateData=new AnimationStateData(this.skeleton.data),this.animationState=new AnimationState(this.animationStateData),this.skeleton.updateWorldTransform(Physics.update),this.updateSize()}updateSize(){if(!this.skeleton)return;let e=this.boundsProvider.calculateBounds(this);this.width=e.width,this.height=e.height,this.setDisplayOrigin(-e.x,-e.y),this.offsetX=-e.x,this.offsetY=-e.y}skeletonToPhaserWorldCoordinates(e){let t=this.getWorldTransformMatrix(),i=t.a,s=t.b,n=t.c,a=t.d,r=t.tx,o=t.ty,l=e.x,h=e.y;e.x=l*i+h*n+r,e.y=l*s+h*a+o}phaserWorldCoordinatesToSkeleton(e){let t=this.getWorldTransformMatrix();t=t.invert();let i=t.a,s=t.b,n=t.c,a=t.d,r=t.tx,o=t.ty,l=e.x,h=e.y;e.x=l*i+h*n+r,e.y=l*s+h*a+o}phaserWorldCoordinatesToBone(e,t){this.phaserWorldCoordinatesToSkeleton(e),t.parent?t.parent.worldToLocal(e):t.worldToLocal(e)}updatePose(e){this.animationState.update(e/1e3),this.animationState.apply(this.skeleton),this.beforeUpdateWorldTransforms(this),this.skeleton.update(e/1e3),this.skeleton.updateWorldTransform(Physics.update),this.afterUpdateWorldTransforms(this)}preUpdate(e,t){this.skeleton&&this.animationState&&this.updatePose(t)}preDestroy(){}willRender(e){var t=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id);if(this.visible||(t=!1),!t&&this.parentContainer&&this.plugin.webGLRenderer){var i=this.plugin.webGLRenderer;this.plugin.gl&&this.plugin.phaserRenderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&i.batcher.isDrawing&&(i.end(),this.plugin.phaserRenderer.pipelines.rebind())}return t}renderWebGL(e,t,i,s){if(!this.skeleton||!this.animationState||!this.plugin.webGLRenderer)return;let n=this.plugin.webGLRenderer;e.newType&&(e.pipelines.clear(),n.begin()),i.addToRenderList(t);let a=Phaser.GameObjects.GetCalcMatrix(t,i,s).calc,r=a.a,o=a.b,l=a.c,h=a.d,d=a.tx,c=a.ty,u=t.offsetX-t.displayOriginX,p=t.offsetY-t.displayOriginY;n.drawSkeleton(t.skeleton,t.premultipliedAlpha,-1,-1,((e,t,i)=>{for(let s=0;s<t;s+=i){let t=e[s]+u,i=e[s+1]+p;e[s]=t*r+i*l+d,e[s+1]=t*o+i*h+c}})),e.nextTypeMatch||(n.end(),e.pipelines.rebind())}renderCanvas(e,t,i,s){if(!this.skeleton||!this.animationState||!this.plugin.canvasRenderer)return;let n=e.currentContext,a=this.plugin.canvasRenderer;a.ctx=n,i.addToRenderList(t);let r=Phaser.GameObjects.GetCalcMatrix(t,i,s).calc,o=this.skeleton;o.x=r.tx,o.y=r.ty,o.scaleX=r.scaleX,o.scaleY=r.scaleY,o.getRootBone().rotation=-57.29577866666166*r.rotationNormalized,this.skeleton.updateWorldTransform(Physics.update),n.save(),a.draw(o),n.restore()}}class CanvasTexture extends Texture{constructor(e){super(e)}setFilters(e,t){}setWraps(e,t){}dispose(){}}const worldVertices=Utils.newFloatArray(8),_SkeletonRenderer=class e{constructor(e){__publicField(this,"ctx"),__publicField(this,"triangleRendering",!1),__publicField(this,"debugRendering",!1),__publicField(this,"vertices",Utils.newFloatArray(8192)),__publicField(this,"tempColor",new Color),this.ctx=e}draw(e){this.triangleRendering?this.drawTriangles(e):this.drawImages(e)}drawImages(e){let t=this.ctx,i=this.tempColor,s=e.color,n=e.drawOrder;this.debugRendering&&(t.strokeStyle="green");for(let a=0,r=n.length;a<r;a++){let e=n[a],r=e.bone;if(!r.active)continue;let o=e.getAttachment();if(!(o instanceof RegionAttachment))continue;o.computeWorldVertices(e,worldVertices,0,2);let l=o.region,h=l.texture.getImage(),d=e.color,c=o.color;i.set(s.r*d.r*c.r,s.g*d.g*c.g,s.b*d.b*c.b,s.a*d.a*c.a),t.save(),t.transform(r.a,r.c,r.b,r.d,r.worldX,r.worldY),t.translate(o.offset[0],o.offset[1]),t.rotate(o.rotation*Math.PI/180);let u=o.width/l.originalWidth;t.scale(u*o.scaleX,u*o.scaleY);let p=l.width,g=l.height;if(t.translate(p/2,g/2),90==o.region.degrees){let e=p;p=g,g=e,t.rotate(-Math.PI/2)}t.scale(1,-1),t.translate(-p/2,-g/2),t.globalAlpha=i.a,t.drawImage(h,h.width*l.u,h.height*l.v,p,g,0,0,p,g),this.debugRendering&&t.strokeRect(0,0,p,g),t.restore()}}drawTriangles(t){let i=this.ctx,s=this.tempColor,n=t.color,a=t.drawOrder,r=null,o=this.vertices,l=null;for(let d=0,c=a.length;d<c;d++){let t,c=a[d],u=c.getAttachment();if(u instanceof RegionAttachment){let i=u;o=this.computeRegionVertices(c,i,!1),l=e.QUAD_TRIANGLES,t=i.region.texture.getImage()}else{if(!(u instanceof MeshAttachment))continue;{let e=u;o=this.computeMeshVertices(c,e,!1),l=e.triangles,t=e.region.texture.getImage()}}if(t){c.data.blendMode!=r&&(r=c.data.blendMode);let e=c.color,a=u.color;s.set(n.r*e.r*a.r,n.g*e.g*a.g,n.b*e.b*a.b,n.a*e.a*a.a),i.globalAlpha=s.a;for(var h=0;h<l.length;h+=3){let e=8*l[h],s=8*l[h+1],n=8*l[h+2],a=o[e],r=o[e+1],d=o[e+6],c=o[e+7],u=o[s],p=o[s+1],g=o[s+6],m=o[s+7],f=o[n],v=o[n+1],b=o[n+6],y=o[n+7];this.drawTriangle(t,a,r,d,c,u,p,g,m,f,v,b,y),this.debugRendering&&(i.strokeStyle="green",i.beginPath(),i.moveTo(a,r),i.lineTo(u,p),i.lineTo(f,v),i.lineTo(a,r),i.stroke())}}}this.ctx.globalAlpha=1}drawTriangle(e,t,i,s,n,a,r,o,l,h,d,c,u){let p=this.ctx;const g=e.width-1,m=e.height-1;s*=g,n*=m,o*=g,l*=m,c*=g,u*=m,p.beginPath(),p.moveTo(t,i),p.lineTo(a,r),p.lineTo(h,d),p.closePath();let f=(o-=s)*(u-=n)-(c-=s)*(l-=n);if(0==f)return;f=1/f;const v=(u*(a-=t)-l*(h-=t))*f,b=(u*(r-=i)-l*(d-=i))*f,y=(o*h-c*a)*f,C=(o*d-c*r)*f,x=t-v*s-y*n,S=i-b*s-C*n;p.save(),p.transform(v,b,y,C,x,S),p.clip(),p.drawImage(e,0,0),p.restore()}computeRegionVertices(t,i,s){let n=t.bone.skeleton.color,a=t.color,r=i.color,o=n.a*a.a*r.a,l=s?o:1,h=this.tempColor;h.set(n.r*a.r*r.r*l,n.g*a.g*r.g*l,n.b*a.b*r.b*l,o),i.computeWorldVertices(t,this.vertices,0,e.VERTEX_SIZE);let d=this.vertices,c=i.uvs;return d[RegionAttachment.C1R]=h.r,d[RegionAttachment.C1G]=h.g,d[RegionAttachment.C1B]=h.b,d[RegionAttachment.C1A]=h.a,d[RegionAttachment.U1]=c[0],d[RegionAttachment.V1]=c[1],d[RegionAttachment.C2R]=h.r,d[RegionAttachment.C2G]=h.g,d[RegionAttachment.C2B]=h.b,d[RegionAttachment.C2A]=h.a,d[RegionAttachment.U2]=c[2],d[RegionAttachment.V2]=c[3],d[RegionAttachment.C3R]=h.r,d[RegionAttachment.C3G]=h.g,d[RegionAttachment.C3B]=h.b,d[RegionAttachment.C3A]=h.a,d[RegionAttachment.U3]=c[4],d[RegionAttachment.V3]=c[5],d[RegionAttachment.C4R]=h.r,d[RegionAttachment.C4G]=h.g,d[RegionAttachment.C4B]=h.b,d[RegionAttachment.C4A]=h.a,d[RegionAttachment.U4]=c[6],d[RegionAttachment.V4]=c[7],d}computeMeshVertices(t,i,s){let n=t.bone.skeleton.color,a=t.color,r=i.color,o=n.a*a.a*r.a,l=s?o:1,h=this.tempColor;h.set(n.r*a.r*r.r*l,n.g*a.g*r.g*l,n.b*a.b*r.b*l,o);let d=i.worldVerticesLength/2,c=this.vertices;c.length<i.worldVerticesLength&&(this.vertices=c=Utils.newFloatArray(i.worldVerticesLength)),i.computeWorldVertices(t,0,i.worldVerticesLength,c,0,e.VERTEX_SIZE);let u=i.uvs;for(let e=0,p=0,g=2;e<d;e++)c[g++]=h.r,c[g++]=h.g,c[g++]=h.b,c[g++]=h.a,c[g++]=u[p++],c[g++]=u[p++],g+=2;return c}};__publicField(_SkeletonRenderer,"QUAD_TRIANGLES",[0,1,2,2,3,0]),__publicField(_SkeletonRenderer,"VERTEX_SIZE",8);let SkeletonRenderer=_SkeletonRenderer;const _SpinePlugin=class e extends phaserExports.Plugins.ScenePlugin{constructor(e,t,i){super(e,t,i),__publicField(this,"game"),__publicField(this,"isWebGL"),__publicField(this,"gl"),__publicField(this,"canvasRenderer"),__publicField(this,"phaserRenderer"),__publicField(this,"skeletonDataCache"),__publicField(this,"atlasCache"),this.game=t.game,this.isWebGL=2===this.game.config.renderType,this.gl=this.isWebGL?this.game.renderer.gl:null,this.phaserRenderer=this.game.renderer,this.canvasRenderer=null,this.skeletonDataCache=this.game.cache.addCustom(SPINE_SKELETON_FILE_CACHE_KEY),this.atlasCache=this.game.cache.addCustom(SPINE_ATLAS_CACHE_KEY),t.registerFileType("spineJson",(function(e,t,i){let s=new SpineSkeletonDataFile(this,e,t,SpineSkeletonDataFileType.json,i);return this.addFile(s.files),this}),e),t.registerFileType("spineBinary",(function(e,t,i){let s=new SpineSkeletonDataFile(this,e,t,SpineSkeletonDataFileType.binary,i);return this.addFile(s.files),this}),e),t.registerFileType("spineAtlas",(function(e,t,i,s){let n=new SpineAtlasFile(this,e,t,i,s);return this.addFile(n.files),this}),e),t.registerGameObject(window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:SPINE_GAME_OBJECT_TYPE,(function(e,t,s,n,a){this.scene.sys.renderer instanceof phaserExports.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.clear();const r=this.scene.sys[i];let o=new SpineGameObject(this.scene,r,e,t,s,n,a);return this.displayList.add(o),this.updateList.add(o),this.scene.sys.renderer instanceof phaserExports.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.rebind(),o}),(function(e,t=!1){this.scene.sys.renderer instanceof phaserExports.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.clear();let s=e.x?e.x:0,n=e.y?e.y:0,a=e.boundsProvider?e.boundsProvider:void 0;const r=this.scene.sys[i];let o=new SpineGameObject(this.scene,r,s,n,e.dataKey,e.atlasKey,a);return void 0!==t&&(e.add=t),this.scene.sys.renderer instanceof phaserExports.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.rebind(),phaserExports.GameObjects.BuildGameObject(this.scene,o,e)}))}get webGLRenderer(){return e.gameWebGLRenderer}boot(){Skeleton.yDown=!0,this.isWebGL?(e.gameWebGLRenderer||(e.gameWebGLRenderer=new SceneRenderer(this.game.renderer.canvas,this.gl,!0)),this.onResize(),this.game.scale.on(phaserExports.Scale.Events.RESIZE,this.onResize,this)):this.canvasRenderer||(this.canvasRenderer=new SkeletonRenderer(this.scene.sys.context));var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)}onResize(){var e=this.game.renderer,t=this.webGLRenderer;if(e&&t){var i=e.width,s=e.height;t.camera.position.x=i/2,t.camera.position.y=s/2,t.camera.up.y=-1,t.camera.direction.z=1,t.camera.setViewport(i,s)}}shutdown(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(phaserExports.Scale.Events.RESIZE,this.onResize,this)}destroy(){this.shutdown()}gameDestroy(){this.pluginManager.removeGameObject(window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:SPINE_GAME_OBJECT_TYPE,!0,!0),this.webGLRenderer&&this.webGLRenderer.dispose(),e.gameWebGLRenderer=null}getAtlas(e){let t;if(this.atlasCache.exists(e))t=this.atlasCache.get(e);else{let i=this.game.cache.text.get(e);if(t=new TextureAtlas(i.data),this.isWebGL){let i=this.gl;const s=i.getParameter(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL);s&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);for(let n of t.pages)n.setTexture(new GLTexture(i,this.game.textures.get(e+"!"+n.name).getSourceImage(),!1));s&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}else for(let s of t.pages)s.setTexture(new CanvasTexture(this.game.textures.get(e+"!"+s.name).getSourceImage()));this.atlasCache.add(e,t)}return t}isAtlasPremultiplied(e){let t=this.game.cache.text.get(e);return!!t&&t.premultipliedAlpha}getSkeletonData(e,t){const i=this.getAtlas(t),s=e+t;let n;if(this.skeletonDataCache.exists(s))n=this.skeletonDataCache.get(s);else{if(this.game.cache.json.exists(e)){let t=this.game.cache.json.get(e);n=new SkeletonJson(new AtlasAttachmentLoader(i)).readSkeletonData(t)}else{let t=this.game.cache.binary.get(e);n=new SkeletonBinary(new AtlasAttachmentLoader(i)).readSkeletonData(new Uint8Array(t))}this.skeletonDataCache.add(s,n)}return n}createSkeleton(e,t){return new Skeleton(this.getSkeletonData(e,t))}};__publicField(_SpinePlugin,"gameWebGLRenderer",null),__publicField(_SpinePlugin,"rendererId",0);let SpinePlugin=_SpinePlugin;var SpineSkeletonDataFileType,SpineSkeletonDataFileType2;SpineSkeletonDataFileType2=SpineSkeletonDataFileType||(SpineSkeletonDataFileType={}),SpineSkeletonDataFileType2[SpineSkeletonDataFileType2.json=0]="json",SpineSkeletonDataFileType2[SpineSkeletonDataFileType2.binary=1]="binary";class SpineSkeletonDataFile extends phaserExports.Loader.MultiFile{constructor(e,t,i,s,n){if("string"!=typeof t){const e=t;t=e.key,i=e.url,s="spineJson"===e.type?SpineSkeletonDataFileType.json:SpineSkeletonDataFileType.binary,n=e.xhrSettings}let a=null;a=s==SpineSkeletonDataFileType.json?new phaserExports.Loader.FileTypes.JSONFile(e,{key:t,url:i,extension:"json",xhrSettings:n}):new phaserExports.Loader.FileTypes.BinaryFile(e,{key:t,url:i,extension:"skel",xhrSettings:n}),super(e,SPINE_SKELETON_DATA_FILE_TYPE,t,[a]),__publicField(this,"fileType"),this.fileType=s}onFileComplete(e){this.pending--}addToCache(){this.isReadyToProcess()&&this.files[0].addToCache()}}class SpineAtlasFile extends phaserExports.Loader.MultiFile{constructor(e,t,i,s,n){if("string"!=typeof t){const e=t;t=e.key,i=e.url,s=e.premultipliedAlpha,n=e.xhrSettings}super(e,SPINE_ATLAS_FILE_TYPE,t,[new phaserExports.Loader.FileTypes.TextFile(e,{key:t,url:i,xhrSettings:n,extension:"atlas"})]),__publicField(this,"premultipliedAlpha"),this.premultipliedAlpha=s}onFileComplete(e){if(-1!=this.files.indexOf(e)&&(this.pending--,"text"==e.type)){var t=e.data.split(/\r\n|\r|\n/);let l=[];l.push(t[0]);for(var i=1;i<t.length;i++){var s=t[i];""===s.trim()&&i<t.length-1&&(s=t[i+1],l.push(s))}let h=(e.src.match(/^.*\//)??"").toString();this.loader.path&&this.loader.path.length>0&&h.startsWith(this.loader.path)&&(h=h.slice(this.loader.path.length));for(var n=0;n<l.length;n++){var a=h+l[n],r=e.key+"!"+l[n],o=new phaserExports.Loader.FileTypes.ImageFile(this.loader,r,a);this.loader.keyExists(o)||(this.addToMultiFile(o),this.loader.addFile(o))}}}addToCache(){if(this.isReadyToProcess()){let e=this.loader.textureManager;for(let t of this.files)"image"==t.type?e.exists(t.key)||e.addImage(t.key,t.data):(this.premultipliedAlpha=this.premultipliedAlpha??(t.data.indexOf("pma: true")>=0||t.data.indexOf("pma:true")>=0),t.data={data:t.data,premultipliedAlpha:this.premultipliedAlpha},t.addToCache())}}}window.spine={SpinePlugin:SpinePlugin},window["spine.SpinePlugin"]=SpinePlugin;class Page extends Phaser.GameObjects.Group{constructor(e,t){super(e,t),__publicField(this,"scene"),this.scene=e,this.x=e.offsetLeft,this.y=e.offsetTop,this.onHide=null,this.setVisible(!1)}show(e){this.onHide=e,this.setVisible(!0)}hide(){this.setVisible(!1),this.onHide&&this.onHide()}}class Crop extends Phaser.GameObjects.Group{constructor(e,t,i,s){super(e),t.add(this),this.onResize=()=>{}}}class ItemIconGetter{static getCropSeedIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"bag-crop-atlas2",frame:"backpack_"+t[1]}}static getSeedBagIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"bag-crop-atlas2",frame:"backpack_seed_"+t[1]}}static getCropSeedlingIcon(e){return{key:"plant-crop-atlas",frame:"flower_seed.png"}}static getCropBudIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"plant-crop-atlas",frame:t[1].replace("_mature.png","")+"_bud.png"}}static getCropMatureIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"plant-crop-atlas",frame:t[1]}}static getCropBagIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:t[0],frame:"backpack_"+t[1]}}static getFlowerIcon(e){return{key:"plant",frame:"flower_rose_Animation frames.png"}}static getItemPropIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:t[0],frame:t[1]}}static getFlowerPropIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"common-atlas",frame:"backpack_"+t[1]}}static getShopIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"shop-building-atlas",frame:"shopping mall_"+t[1]}}static getShopCropIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"store-crop-atlas",frame:"shopping mall_seed_"+t[1]}}static getHomeIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"home-atlas2",frame:t[1]}}static getSeedUnlockIcon(e){let t=["",""];return e&&(t=e.split(",")),{key:"task-atlas",frame:"backpack_"+t[1]}}static getSizeType(e){return"1x1"==e?"icon_cell2.png":"1x2"==e?"icon_cell5.png":"2x1"==e?"icon_cell4.png":"1x3"==e?"icon_cell7.png":"3x1"==e?"icon_cell8.png":"2x2"==e?"icon_cell6.png":"2x3"==e?"icon_cell9.png":"3x2"==e?"icon_cell3.png":"3x3"==e?"icon_cell10.png":"2x4"==e?"icon_cell12.png":void 0}}class Flower extends Crop{constructor(e,t,i,s){var n,a;super(e,t,i,s);const{key:r,frame:o}=ItemIconGetter.getCropMatureIcon(null==(a=null==(n=e.game.GameData.gameItemSeetings)?void 0:n[i.cropId])?void 0:a.sIcoPath);this.createMultiple({classType:Phaser.GameObjects.Sprite,key:r,frame:o,max:3,repeat:2,setXY:{x:-90,y:30,stepX:80,stepY:30},createCallback:e=>{e.setDepth(10).setOrigin(.5,1)}});let l=e.add.image(-20,-20,"plant-crop-atlas","flower_love_matured.png").setDepth(9),h=e.add.image(30,130,"plant","frame_name2.png").setDepth(10).setOrigin(.5,.5),d=e.add.text(30,100,instance.t("Event_5_C2_Pandora_38"),{fontFamily:"BeaufortforLOL-Bold",fontSize:"24px",fill:"#835933"}).setOrigin(.5,.5).setDepth(11);this.addMultiple([l,h,d]),this.children.iterate((t=>{t!=h&&t!=d&&e.tweens.add({targets:t,scaleX:.95,scaleY:.9,duration:1e3+500*Math.random(),yoyo:!0,repeat:-1})})),e.events.on("camera-open",(t=>{"FarmView"==e.currentView&&(1==t.type?(h.setVisible(!1),d.setVisible(!1)):2==t.type&&(h.setVisible(!0),d.setVisible(!0)))})),this.onResize=(e,t)=>{this.children.each(((i,s)=>{i!==d?i!==l?i!==h?i.setPosition(e-90+80*s,t+30+30*s):i.setPosition(e+30,t+130):i.setPosition(e-20,t-20):i.setPosition(e+30,t+100)}))},this.hide=()=>{this.setVisible(!1)}}}function formatTime(e){e=Math.max(0,Math.floor(e));const t=Math.floor(e/3600),i=Math.floor(e%3600/60),s=e%60;return`${String(t).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(s).padStart(2,"0")}`}class GrowUpInfo extends Component{constructor(e,t,i,s,n){super(e,t,i,n),__publicField(this,"basedepth",50),__publicField(this,"countdownEvent",null),__publicField(this,"maxExp",0),__publicField(this,"waterTime",0),__publicField(this,"onAMinute",(()=>{})),__publicField(this,"onMature",(()=>{})),__publicField(this,"onWater",(()=>{})),__publicField(this,"firstPlant",!0),__publicField(this,"barValObj",{width:0}),__publicField(this,"waterValObj",{width:0});let a=this,r=e.add.image(30,100,"plant","frame_name.png");const o=e.add.image(30,107,"plant","progress_seed experience_normal.png").setDepth(this.basedepth+1),l=o.displayWidth,h=e.add.image(30,107,"plant","progress_seed experience_highlighter.png").setDepth(this.basedepth+3),d=e.add.image(30,107,"plant","progress_seed experience_red.png").setDepth(this.basedepth+2).setAlpha(.7).setVisible(!1),c=e.add.image(120,80,"plant","icon_hydropenia.png").setDepth(this.basedepth+2).setVisible(!1);this.barValObj.width=0,h.setCrop(0,0,this.barValObj.width,h.height),this.waterValObj.width=0,d.setCrop(0,0,this.waterValObj.width,d.height);let u=e.add.text(30,90,"00:00:00",{fontFamily:"BeaufortforLOL-Bold",fontSize:"18px",fill:"#835933"}).setOrigin(.5,.5).setDepth(this.basedepth+5);this.add([r,o,d,h,u,c]),this.updateProgressBar=(t,i)=>{let s;s=this.waterTime>0?(this.scene.game.GameApi.serverUnixTime-t)/(i+this.waterTime):(this.scene.game.GameApi.serverUnixTime-t)/i;let n=0;if(n=l*s<l?Math.ceil(l*s):l,this.waterTime>0&&s<1){c.setVisible(!0),d.setVisible(!0);let t=0;t=Math.ceil(this.waterTime/(i+this.waterTime)*l)+n>l?l:Math.ceil(this.waterTime/(i+this.waterTime)*l)+n,e.tweens.add({targets:this.waterValObj,width:t,height:40,duration:300,ease:"Quad.easeOut",onUpdate:()=>{d.setCrop(0,0,this.waterValObj.width,d.height)}})}else c.setVisible(!1),d.visible?e.tweens.add({targets:this.waterValObj,width:0,height:40,duration:1e3,ease:"Quad.easeOut",onUpdate:()=>{d.setCrop(0,0,this.waterValObj.width,d.height)},onComplete:()=>{d.setVisible(!1)}}):d.setVisible(!1);s<.05?h.setSize(0,h.height):e.tweens.add({targets:this.barValObj,width:n,height:40,duration:300,ease:"Quad.easeOut",onUpdate:()=>{h.setCrop(0,0,this.barValObj.width,h.height)}})};let p=!1;this.setCountdown=(t,i,s)=>{this.stopCountdown();let n=t-(this.scene.game.GameApi.serverUnixTime-i);u.setText(formatTime(n));const r=i+t-(s+Number(this.scene.game.GameData.gameConfig.farmEnterWaterDeficitCountdown)),o=Math.ceil(r*Number(this.scene.game.GameData.gameConfig.farmBlockCoefficient));this.countdownEvent=e.time.addEvent({delay:1e3,callback:()=>{var e;if(null==(e=this.scene.game.GameData.gameConfig)?void 0:e.farmEnterWaterDeficitCountdown){let e=this.scene.game.GameApi.serverUnixTime;n--,u.setText(formatTime(n)),e-i>this.scene.game.GameData.gameConfig.farmSeedStateDuration&&!p&&(a.onAMinute(),p=!0),Math.min(e,i+t)-s>=this.scene.game.GameData.gameConfig.farmEnterWaterDeficitCountdown?(n=t-(e-i)+o,this.waterTime=o,a.onWater()):this.waterTime=0,this.updateProgressBar(i,t),n<=0&&(this.stopProgress(),a.onMature(),this.stopCountdown(),this.emit("countdownFinished"))}},loop:!0,callbackScope:this})},this.stopProgress=()=>{this.barValObj.width=0,this.waterValObj.width=0,h.setCrop(0,0,0,h.height),d.setCrop(0,0,0,d.height),e.tweens.killTweensOf(this.barValObj),e.tweens.killTweensOf(this.waterValObj),c.setVisible(!1),this.waterTime=0},this.stopCountdown=()=>{this.countdownEvent&&(e.time.removeEvent(this.countdownEvent),this.countdownEvent=null,u.setText(formatTime(0)))},this.setDepth(30)}destroy(){this.stopCountdown()}}class FlowerBud extends Crop{constructor(e,t,i,s){var n,a;super(e,t,i,s),__publicField(this,"onMature",(()=>{}));const{key:r,frame:o}=ItemIconGetter.getCropBudIcon(null==(a=null==(n=e.game.GameData.gameItemSeetings)?void 0:n[i.cropId])?void 0:a.sIcoPath);this.createMultiple({classType:Phaser.GameObjects.Sprite,key:r,frame:o,max:3,repeat:2,setXY:{x:-90,y:30,stepX:80,stepY:30},createCallback:e=>{e.setOrigin(.5,1)}}),this.children.iterate((t=>{t.setDepth(10),e.tweens.add({targets:t,scaleX:.95,scaleY:.9,duration:1500,yoyo:!0,repeat:-1})})),this.onResize=(e,t)=>{this.children.each(((i,s)=>{i.setPosition(e-90+80*s,t+30+30*s)}))}}}class FlowerSeed extends Crop{constructor(e,t,i,s){var n,a;super(e,t,i,s);const{key:r,frame:o}=ItemIconGetter.getCropMatureIcon(null==(a=null==(n=e.game.GameData.gameItemSeetings)?void 0:n[i.cropId])?void 0:a.sIcoPath);let l=this.create(5,-10,r,o);l.setScale(.8),this.onResize=(e,t)=>{null==l||l.setPosition(e+5,t-10)}}}class FlowerSeedling extends Crop{constructor(e,t,i,s){var n,a;super(e,t,i,s),__publicField(this,"onAMinute",(()=>{}));const{key:r,frame:o}=ItemIconGetter.getCropSeedlingIcon(null==(a=null==(n=e.game.GameData.gameItemSeetings)?void 0:n[i.seedId])?void 0:a.sIcoPath);this.createMultiple({classType:Phaser.GameObjects.Sprite,key:r,frame:o,max:3,repeat:2,setXY:{x:-80,y:40,stepX:80,stepY:35},createCallback:e=>{e.setOrigin(.5,1)}}),this.children.iterate((t=>{t.setDepth(1),e.tweens.add({targets:t,scaleX:.95,scaleY:.9,duration:1500,yoyo:!0,repeat:-1})})),this.onResize=(e,t)=>{this.children.each(((i,s)=>{i.setPosition(e-90+80*s,t+30+30*s)}))}}}class CropOperateItem extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"OnSowClick",(()=>{})),__publicField(this,"OnShovelClick",(()=>{})),__publicField(this,"OnCancelClick",(()=>{})),__publicField(this,"OnWaterClick",(()=>{})),__publicField(this,"OnConfirmClick",(()=>{}));let n=this,a=e.add.image(0,0,"plant","db_edit.png"),r=e.add.image(0,0,"plant","db_edit2.png"),o=e.add.image(0,-6,"plant","btn_caffea.png"),l=e.add.image(55,-7,"plant","btn_close (2).png"),h=e.add.image(-108,-6,"plant","btn_water.png"),d=e.add.image(0,-6,"plant","btn_shovel.png"),c=e.add.image(0,-6,"plant","btn_select2.png"),u=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0,0).setOrigin(0).setInteractive().setDepth(80).setVisible(!1);const p=this.setVisible;n.setVisible=function(e){return p.call(n,e),u.setVisible(e),n},o.setInteractive(),l.setInteractive(),h.setInteractive(),d.setInteractive(),c.setInteractive(),o.on("pointerdown",(()=>{n.OnSowClick(),n.setVisible(!1)})),u.on("pointerdown",((t,i,s,a)=>{var r;null==(r=e.game.AudioSetUp)||r.play("plantCloseAudio"),a.stopPropagation(),n.OnCancelClick(),n.setVisible(!1)})),l.on("pointerdown",((t,i,s,a)=>{var r;null==(r=e.game.AudioSetUp)||r.play("plantCloseAudio"),a.stopPropagation(),n.OnCancelClick(),n.setVisible(!1)})),d.on("pointerdown",(()=>{n.OnShovelClick(),n.setVisible(!1)})),h.on("pointerdown",(()=>{n.OnWaterClick(),n.setVisible(!1)})),c.on("pointerdown",(()=>{n.OnConfirmClick(),n.setVisible(!1)})),n.showSowPanel=()=>{a.setVisible(!0),r.setVisible(!1),o.setVisible(!0),l.setVisible(!0),d.setVisible(!1),h.setVisible(!1),c.setVisible(!1),n.setVisible(!0),o.x=-54,l.x=55},n.showWaterPanel=()=>{a.setVisible(!1),r.setVisible(!0),o.setVisible(!1),l.setVisible(!0),d.setVisible(!0),h.setVisible(!0),c.setVisible(!1),n.setVisible(!0),d.x=0,l.x=110},n.showHarvestPanel=()=>{n.setVisible(!0)},n.showShovelPanel=()=>{a.setVisible(!0),r.setVisible(!1),o.setVisible(!1),l.setVisible(!0),d.setVisible(!0),h.setVisible(!1),c.setVisible(!1),n.setVisible(!0),d.x=-54,l.x=55},n.showBagPanel=()=>{a.setVisible(!0),r.setVisible(!1),o.setVisible(!1),l.setVisible(!0),d.setVisible(!1),h.setVisible(!1),c.setVisible(!0),n.setVisible(!0),c.x=-54,l.x=55},this.add([a,r,o,l,h,d,c]),this.setDepth(90),this.setVisible(!1)}}const _Land=class e extends Component{constructor(t,i,s,n){super(t,i,s,n),__publicField(this,"curState",e.State.NONE),__publicField(this,"curGrowthStage",e.GrowthStage.NONE),__publicField(this,"curCrop",null),__publicField(this,"OnLandClick",(()=>{})),__publicField(this,"growUpInfo"),__publicField(this,"growUpInfoConfig",{}),__publicField(this,"onAMinute",(()=>{})),__publicField(this,"onMature",(()=>{})),__publicField(this,"onWater",(()=>{})),__publicField(this,"cropDetail",{});let a=this;const r=new Phaser.Geom.Polygon([40,85,-190,-25,-45,-100,185,15]);let o,l=t.add.container(0,50),h=t.add.image(-6,34,"plant","land_highlighter2.png").setVisible(!1),d=t.add.image(0,34,"plant","land_highlighter.png").setVisible(!1),c=t.add.image(0,50,"plant","land_cracked.png").setVisible(!1);l.setInteractive(r,Phaser.Geom.Polygon.Contains).on("pointerdown",(()=>{a.OnLandClick()})),this.growUpInfo=new GrowUpInfo(t,i,s),this.growUpInfo.setVisible(!1),this.add([l,h,d,c]),this.growUpInfo.onAMinute=()=>{a.onAMinute()},this.growUpInfo.onMature=()=>{a.onMature()},this.growUpInfo.onWater=()=>{a.onWater()},this.getCropDetail=e=>{this.cropDetail=e},this.showGrowUpInfo=e=>{this.growUpInfoConfig=e,this.growUpInfo.setVisible(!0),this.growUpInfo.updateProgressBar(e.plantTime,e.remainingTime),this.growUpInfo.setCountdown(e.remainingTime,e.plantTime,e.wateringTime)},this.hideGrowthInfo=()=>{var e,t,i;null==(e=this.growUpInfo)||e.stopCountdown(),null==(t=this.growUpInfo)||t.stopProgress(),null==(i=this.growUpInfo)||i.setVisible(!1)},this.setSelected=e=>{d.setVisible(e),e?(d.setAlpha(1),o=t.tweens.add({targets:d,delay:0,alpha:.3,duration:1e3,yoyo:!0,repeat:-1})):o&&o.remove()},this.setHighlight=e=>{h.setVisible(e)},this.setLackWater=()=>{a.curState=e.State.LACKWATER,c.setVisible(!0),c.setDepth(5)},this.water=()=>{a.curState=e.State.GROW,c.setVisible(!1)},this.sow=()=>{a.curState=e.State.GROW,a.curGrowthStage=e.GrowthStage.GROWING},this.harvest=()=>{a.curState=e.State.HARVEST,a.curGrowthStage=e.GrowthStage.MATURITY,c.setVisible(!1)},this.shovelCrop=()=>{a.curState==e.State.LACKWATER&&c.setVisible(!1),a.curState=e.State.NONE,a.curGrowthStage=e.GrowthStage.NONE,a.destroyCurrentCrop(),this.hideGrowthInfo()},this.setHarvest=()=>{a.curState=e.State.NONE,a.curGrowthStage=e.GrowthStage.NONE,a.destroyCurrentCrop()},this.destroyCurrentCrop=()=>{null!==a.curCrop&&(a.curCrop.setVisible(!1),a.curCrop.destroy(a.curCrop),a.curCrop=null)},this.getCurrentCrop=()=>a.curCrop,this.setCurrentCrop=e=>{a.curCrop=e}}setVisible(e){super.setVisible(e),this.curCrop&&this.curCrop.setVisible(e)}onResize(e,t){this.setPosition(e,t),this.curCrop&&this.curCrop.onResize(e,t),this.growUpInfo&&this.growUpInfo.setPosition(e,t)}};__publicField(_Land,"State",{NONE:0,GROW:1,HARVEST:2,LACKWATER:3}),__publicField(_Land,"GrowthStage",{NONE:0,GROWING:1,MATURITY:2});let Land=_Land;class ShovelDialog extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"onConfirm",(()=>{})),__publicField(this,"onCancel",(()=>{})),__publicField(this,"basedepth",1e3);let n=this;const{width:a,height:r}=e.cameras.main;let o=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();o.setOrigin(0,0),o.setAlpha(.75),this.add(o);const l=e.textures.get("pop_small"),h=l.get("__BASE").height,d=l.get("__BASE").width;let c=e.add.container(0,90);const u=e.add.text(0,120,"",{fontSize:"20px",fontFamily:"SPIEGEL-REGULAR",color:"#9e7ec4",lineSpacing:10,align:"center",wordWrap:{width:450,useAdvancedWrap:!0}}).setOrigin(.5,.5),p=e.add.image(0,220,"shovel_icon"),g=e.add.image(0,220,"common-atlas",""),m=e.add.text(17,230,0,{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#9e7ec4"});let f=e.add.image(0,300,"common-atlas","line_02.png");f.setDisplaySize(720,f.displayHeight);const v=e.add.image(-100,365,"loading-atlas","btn_cancel2.png").setInteractive().on("pointerdown",(()=>{n.onCancel(),this.closeDialog()})),b=e.add.image(100,365,"loading-atlas","btn_confirm2.png").setInteractive();c.add([u,p,g,m,f,v,b]),c.setDepth(this.basedepth+1),this.dialog=e.rexUI.add.dialog({x:a/2,y:r/2,width:d,height:h,background:e.add.image(0,0,"pop_small"),content:c,space:{title:30,left:40,right:40},align:{title:"center",content:"center"}}).layout(),this.add([this.dialog]),this.openDialog=t=>{var i,s;let n=instance.t("Event_5_C2_Pandora_33");n=n.replace("{0}",t.sName),u.setText(n),m.setText((null==t?void 0:t.iRemoveAmount)||0);const{key:a,frame:r}=ItemIconGetter.getItemPropIcon(null==(s=null==(i=this.scene.game.GameData.gameItemSeetings)?void 0:i[t.iRemoveItemId])?void 0:s.sIcoPath);g.setTexture(a,r),this.setVisible(!0),this.dialog.setScale(.8).setVisible(!0).setAlpha(0),e.tweens.add({targets:this.dialog,scale:1,alpha:1,duration:300,ease:"Back.Out"}),this.dialog.setInteractive()},this.closeDialog=()=>{var t;null==(t=e.game.AudioSetUp)||t.play("plantCloseAudio"),e.tweens.add({targets:this.dialog,scale:.8,alpha:0,duration:200,ease:"Back.In",onComplete:()=>{this.setVisible(!1)}}),this.dialog.disableInteractive()},b.on("pointerdown",(()=>{n.onConfirm(),this.closeDialog()})),this.setDepth(this.basedepth),this.onResize=(e,t)=>{var i,s,n;null==(i=null==o?void 0:o.setDisplaySize)||i.call(o,e,t),null==(n=null==(s=this.dialog)?void 0:s.setPosition)||n.call(s,e/2,t/2)},this.setVisible(!1)}}class SeedNumDialog extends Page{constructor(e,t){super(e,t),__publicField(this,"basedepth",400),__publicField(this,"positionX",0),__publicField(this,"positionY",0);let i=GameConfig.Screen.width;this.positionX=e.cameras.main.width;let s=e.add.image(0,0,"plant","frame_dialog box.png").setDepth(this.basedepth);s.setInteractive({useHandCursor:!1});let n=e.add.container(this.positionX/2,e.cameras.main.height+s.displayHeight/2).setDepth(this.basedepth+1);this.close_icon=e.add.image(i/2-60,-s.displayHeight/2-30,"plant","btn_return.png").setInteractive().on("pointerdown",(()=>{var t;null==(t=e.game.AudioSetUp)||t.play("bagCloseAudio"),e.events.emit("close_seed_num")})),this.close_icon.setScale(1.2),this.infoText=e.add.text(-215,-15,"",{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",fill:"#6132A1"}).setOrigin(0,.5);let a=e.add.text(-215,25,instance.t("Event_5_C2_Pandora_27"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",fill:"#9883B7"}).setOrigin(0,.5).setVisible(!1),r=e.add.image(-360,0).setOrigin(.5,.5),o=e.add.text(-325,25,"",{fontSize:"28px",fontFamily:"BeaufortforLOL-Bold",fill:"#6132a1"}).setOrigin(0,.5);n.add([s,this.infoText,a,r,o,this.close_icon]),this.add(n),this.updateData=e=>{e?(this.infoText.setText(instance.t("Event_5_C2_Pandora_26")),a.setVisible(!0)):(this.infoText.setText(instance.t("Event_5_C2_Pandora_29")),a.setVisible(!1))};const l=e.textures.get("plant_background").get("__BASE").height;Math.min(l,e.cameras.main.height)===l?this.positionY=e.cameras.main.height/2+474:e.cameras.main.height<l&&e.cameras.main.height>GameConfig.Screen.height?this.positionY=e.cameras.main.height/2-(l/2-e.cameras.main.height/2)+564:this.positionY=e.cameras.main.height/2+278,this.seedRemaining=e=>{o.setText(e)},this.slideIn=t=>{e.tweens.add({targets:n,y:this.positionY,delay:300,loop:0,duration:300,ease:"Power2"}).play();const i=(null==t?void 0:t.iAmount)||0,{key:s,frame:a}=ItemIconGetter.getSeedBagIcon(null==t?void 0:t.sIcoPath);r.setTexture(s,a),o.setText(i),this.show()},this.slideOut=()=>{e.tweens.add({targets:n,y:e.cameras.main.height+s.displayHeight/2,duration:200,ease:"Power2",onComplete:()=>{this.hide()}}).play()},this.onResize=(e,t)=>{t>l?this.positionY=t/2+474:t<l&&t>GameConfig.Screen.height?this.positionY=t/2-(l/2-t/2)+564:this.positionY=t/2+278,s.visible&&n.setPosition(e/2,this.positionY),this.positionX=e},this.setVisible(!1)}}class PlantView extends Page{constructor(e,t,i){super(e,t,i),__publicField(this,"seedNumView"),__publicField(this,"landGroup"),__publicField(this,"cropOperateItem"),__publicField(this,"cropGroup"),__publicField(this,"shovelObj"),__publicField(this,"kettleObj"),__publicField(this,"isbagPlant",!1),__publicField(this,"isPagePlant",!1),__publicField(this,"currentLand"),__publicField(this,"operateBag",!0),__publicField(this,"shovelDialog"),__publicField(this,"currentSeedNum",0),__publicField(this,"landIndex",0),__publicField(this,"seedId"),__publicField(this,"isLandPlanting",!1),__publicField(this,"isShovel",!1),__publicField(this,"isKettle",!1),__publicField(this,"isPlant",!1),__publicField(this,"currentSelectedLand",null);const s=this.create(e.cameras.main.width/2,e.cameras.main.height/2,"plant_background").setOrigin(.5).setDepth(0);console.log("size info =>",s.displayHeight,e.cameras.main.height),this.landGroup=e.add.group();let n=GameConfig.Data.Lands;for(let a=0;a<n.length;a++){let t=n[a],i=new Land(e,e.cameras.main.width/2+t.Position.X,e.cameras.main.height/2+t.Position.Y),s=0;const r=200;i.OnLandClick=()=>{var t;const n=Date.now();if(!(n-s<r&&i.curState!=Land.State.HARVEST||(s=n,this.isShovel||this.isKettle||this.isPlant)))if(this.landIndex=a+1,this.isbagPlant)null==(t=e.game.AudioSetUp)||t.play("bagItemAudio"),this.onPlant(i);else{if(this.scene.game.gameState!=GameConfig.GameState.NORMAL)return;this.setLandSelected(i)}},i.setDepth(10),this.landGroup.add(i)}this.cropOperateItem=new CropOperateItem(e,0,0),this.shovelDialog=new ShovelDialog(e),this.cropGroup=e.add.group(),this.shovelObj=e.add.spine(e.cameras.main.width/2,e.cameras.main.height/2,"shovel-data","shovel-atlas").setDepth(30).setVisible(!1),this.kettleObj=e.add.spine(e.cameras.main.width/2,e.cameras.main.height/2,"watering-data","watering-atlas").setDepth(30).setVisible(!1),this.scene.events.on("start_planting",(e=>this.onBag(e))),this.scene.events.on("close_seed_num",(()=>this.closeSeedNum())),this.scene.events.on("on_bag_close",(()=>{this.isPagePlant=!1,this.setBrightnessLevel(!1),this.scene.game.gameState!=GameConfig.GameState.PLANTING&&this.scene.game.gameState!=GameConfig.GameState.WATER||(this.scene.game.gameState=GameConfig.GameState.NORMAL)})),this.onEvents(),this.onResize=(t,i)=>{var a,r,o;s.setPosition(t/2,i/2);const l=this.landGroup.getChildren();l&&l.length==n.length&&l.forEach(((t,i)=>{const s=n[i];t.onResize(e.cameras.main.width/2+s.Position.X,e.cameras.main.height/2+s.Position.Y)})),null==(r=null==(a=this.shovelDialog)?void 0:a.onResize)||r.call(a,t,i),null==(o=this.seedNumView)||o.onResize(t,i),this.updateCropOperatePosition()}}show(){super.show(),this.cropOperateItem.setVisible(!1),this.shovelObj.setVisible(!1),this.kettleObj.setVisible(!1),this.landGroup.setVisible(!0);const e=this.landGroup.getChildren();e&&e.length>0&&e.forEach((e=>{e.setVisible(!0)}))}hide(){super.hide(),this.cropOperateItem.setVisible(!1),this.shovelObj.setVisible(!1),this.kettleObj.setVisible(!1),this.landGroup.setVisible(!1),this.cropOperateItem.setVisible(!1),this.cropGroup.setVisible(!1);const e=this.landGroup.getChildren();e&&e.length>0&&e.forEach((e=>{e.hideGrowthInfo(),e.setVisible(!1),e.setSelected(!1)}))}getLandData(){this.scene.game.GameApi.serverTime().then((e=>{var t;if(null==(t=e.jData)?void 0:t.time){const t=this.landGroup.getChildren();this.scene.game.GameApi.getUserGardenInfo().then((i=>{var s;if(0!=this.scene.currentPage)return;console.log("",i);const{gardenInfo:n=[]}=i.jData,a=null==(s=e.jData)?void 0:s.time;this.isLandPlanting=n.every((e=>0!==e.cropId)),n.forEach((e=>{var i,s,n,r,o,l;const{cropId:h,wateringTime:d,plantTime:c,cropDetail:u,landIndex:p}=e;if((null==(i=this.scene)?void 0:i.currentStep)>9&&(null==(s=this.scene)?void 0:s.currentStep)<14){let e={plantTime:a,wateringTime:0,remainingTime:200,cropId:2000101};return t[0].destroyCurrentCrop(),this.spawnCrop(FlowerBud,t[0],e,!1),void((null==(n=this.scene)?void 0:n.currentStep)>10&&t[0].setLackWater())}if(14==(null==(r=this.scene)?void 0:r.currentStep)||15==(null==(o=this.scene)?void 0:o.currentStep)){let e={plantTime:a,wateringTime:0,remainingTime:200,cropId:2000101};return t[0].destroyCurrentCrop(),void this.spawnCrop(FlowerBud,t[0],e,!1)}if(16==(null==(l=this.scene)?void 0:l.currentStep)){let e={plantTime:a,wateringTime:0,remainingTime:200,cropId:2000101};return t[0].destroyCurrentCrop(),this.spawnCrop(Flower,t[0],e,!1),void t[0].harvest()}if(0!=h){let e={plantTime:c,wateringTime:d,remainingTime:u.growTime,cropId:h};t[p-1].iHarvestItemId=u.iHarvestItemId,t[p-1].destroyCurrentCrop(),a-c>=u.growTime?(this.spawnCrop(Flower,t[p-1],e),t[p-1].harvest()):(t[p-1].getCropDetail(u),a-c<this.scene.game.GameData.gameConfig.farmSeedStateDuration?this.spawnCrop(FlowerSeedling,t[p-1],e,!0):a-c>=this.scene.game.GameData.gameConfig.farmSeedStateDuration&&a-c<u.growTime&&this.spawnCrop(FlowerBud,t[p-1],e,!0),t[p-1].sow(),a>c+this.scene.game.GameData.gameConfig.farmEnterWaterDeficitCountdown&&t[p-1].setLackWater(),this.onGrowUp(t[p-1],e))}else t[p-1].shovelCrop()}))})).catch((e=>console.error("error",e)))}}))}setLandSelected(e){var t;switch(this.currentSelectedLand=e,this.updateCropOperatePosition(),e.setSelected(!0),e.curState!=Land.State.HARVEST&&(null==(t=this.scene.game.AudioSetUp)||t.play("bagItemAudio")),e.curState){case Land.State.NONE:this.scene.game.gameState=GameConfig.GameState.PLANTING,this.cropOperateItem.showSowPanel(),this.cropOperateItem.OnSowClick=()=>{this.isPagePlant=!0,this.currentLand=e,this.scene.events.emit("open_view",{viewName:"BagView"})},this.cropOperateItem.OnCancelClick=()=>{e.setSelected(!1),e.destroyCurrentCrop(),this.scene.game.gameState=GameConfig.GameState.NORMAL};break;case Land.State.GROW:this.scene.game.gameState=GameConfig.GameState.WATER,this.cropOperateItem.showShovelPanel(e),this.cropOperateItem.OnCancelClick=()=>{e.setSelected(!1),this.scene.game.gameState=GameConfig.GameState.NORMAL},this.cropOperateItem.OnShovelClick=()=>{e.setSelected(!1),this.shovel(e)};break;case Land.State.HARVEST:e.setSelected(!1),this.showHarvestPanel(e);break;case Land.State.LACKWATER:this.cropOperateItem.showWaterPanel(e),this.scene.game.gameState=GameConfig.GameState.WATER,this.cropOperateItem.OnWaterClick=()=>{e.setSelected(!1),this.water(e)},this.cropOperateItem.OnShovelClick=()=>{e.setSelected(!1),this.shovel(e)},this.cropOperateItem.OnCancelClick=()=>{e.setSelected(!1),this.scene.game.gameState=GameConfig.GameState.NORMAL}}}showHarvestPanel(e){var t,i,s;null==(t=this.scene.game.AudioSetUp)||t.play("harvestAudio"),this.isLandPlanting=!1;const n=this.scene.add.group(),a=null==(s=null==(i=this.scene.game.GameData.gameItemSeetings)?void 0:i[null==e?void 0:e.iHarvestItemId])?void 0:s.sIcoPath,{key:r,frame:o}=ItemIconGetter.getCropSeedIcon(a),l=n.createMultiple({key:r,frame:o,repeat:2,setXY:{x:e.x,y:e.y,stepX:40,stepY:40},setScale:{x:.75,y:.75,stepX:.2,stepY:.2},setAlpha:{value:.6,step:.2}});n.setDepth(401),this.scene.tweens.add({targets:l,x:this.scene.cameras.main.width/2-GameConfig.Screen.width/2+950,y:this.scene.cameras.main.height/2-GameConfig.Screen.height/2+630,duration:800,ease:"smooth",yoyo:!1,repeat:0,onComplete:()=>{var e,t;n.destroy(!0),0==(null==(e=this.scene.game.GameData.guideData)?void 0:e.isCompleted)&&(null==(t=this.scene.beginner)||t.submitGuide(this.scene.currentStep))}}),e.setHarvest();const h=this.scene.add.group(),d=h.createMultiple({key:"plant",frame:"gold_Animation frames.png",repeat:2,setXY:{x:e.x,y:e.y,stepX:30,stepY:30},setScale:{x:.75,y:.75,stepX:.2,stepY:.2},setAlpha:{value:1,step:-.3}});h.setDepth(401),this.scene.tweens.add({targets:d,x:this.scene.cameras.main.width/2-GameConfig.Screen.width/2+340,y:this.scene.cameras.main.height/2-GameConfig.Screen.height/2+80,duration:800,ease:"smooth",yoyo:!1,repeat:0,onComplete:()=>{h.destroy(!0)}});const c=this.scene.add.text(this.scene.cameras.main.width/2-GameConfig.Screen.width/2+950,this.scene.cameras.main.height/2-GameConfig.Screen.height/2+580,"+1",{fontSize:"42px",fontFamily:"BeaufortforLOL-Bold",color:"#ffee99"}).setOrigin(.5).setVisible(!1).setDepth(401);c.setStroke("#3624ad",4),this.scene.tweens.add({targets:c,y:this.scene.cameras.main.height/2-GameConfig.Screen.height/2+550,alpha:0,duration:1e3,delay:800,ease:"Linear",onStart:()=>{c.setVisible(!0)},onComplete:()=>{c.destroy()}}),this.scene.game.GameApi.harvestCrop(this.landIndex).then((e=>{console.log("",e);const{assetsNotify:t}=e.jData;t.forEach((e=>{var t;e.iItemId==GameConfig.Data.Level.ExpItemId?(null==(t=this.scene.game.GameData.userAssets)?void 0:t[null==e?void 0:e.iItemId])?this.scene.game.GameData.userAssets[e.iItemId].iAmount=e.curExp:this.scene.game.GameData.userAssets[e.iItemId]={iItemId:e.iItemId,iAmount:e.curExp}:this.scene.game.GameData.setUserAssets(e,null==e?void 0:e.itemCount,null==e?void 0:e.iItemId)}))})).catch((e=>{console.log("",e),this.onErrorMsg(e)}))}shovel(e){var t;this.shovelDialog.openDialog(e.cropDetail),null==(t=this.scene.game.AudioSetUp)||t.play("openShovelAudio"),this.isShovel=!0,this.shovelDialog.onConfirm=()=>{this.scene.game.GameApi.removeCrop(this.landIndex).then((t=>{var i,s,n;console.log("",t),null==(i=this.scene.game.AudioSetUp)||i.play("shovelAudio");const{assetsNotify:a}=t.jData;(null==(s=this.scene.game.GameData.userAssets)?void 0:s[null==a?void 0:a.iItemId])?this.scene.game.GameData.userAssets[a.iItemId].iAmount+=a.itemCount:this.scene.game.GameData.userAssets[a.iItemId]={iItemId:a.iItemId,iAmount:a.itemCount},this.isLandPlanting=!1,this.shovelObj.setVisible(!0),null==(n=this.shovelObj.animationState)||n.clearListeners(),this.shovelObj.x=e.x+20,this.shovelObj.y=e.y+80,this.shovelObj.animationState.setAnimation(0,"idle",!1),this.shovelObj.animationState.addListener({complete:t=>{e.setSelected(!1),e.shovelCrop(),this.shovelObj.setVisible(!1),this.isShovel=!1}}),this.scene.game.gameState=GameConfig.GameState.NORMAL})).catch((e=>{console.log("",e),this.onErrorMsg(e),this.isShovel=!1,this.scene.game.gameState=GameConfig.GameState.NORMAL}))},this.shovelDialog.onCancel=()=>{this.isShovel=!1,this.scene.game.gameState=GameConfig.GameState.NORMAL}}water(e,t=0){var i,s;if(t>0)return this.scene.input.enabled=!1,this.isKettle=!0,this.kettleObj.setVisible(!0),null==(i=this.scene.game.AudioSetUp)||i.play("kettleAudio"),this.cropOperateItem.setVisible(!1),null==(s=this.kettleObj.animationState)||s.clearListeners(),this.kettleObj.angle=0,this.kettleObj.x=e.x+50,this.kettleObj.y=e.y+60,this.kettleObj.animationState.setAnimation(0,"idle",!1),void this.kettleObj.animationState.addListener({complete:i=>{var s;console.log("water completed"),this.scene.game.gameState=GameConfig.GameState.NORMAL,e.water(),this.isKettle=!1,this.kettleObj.setVisible(!1),this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_35"),3e3,"short"),null==(s=this.scene.beginner)||s.submitGuide(t),this.scene.input.enabled=!0}});this.isKettle=!0,this.scene.game.GameApi.waterCrop(this.landIndex).then((t=>{var i,s;console.log("",t),this.kettleObj.setVisible(!0),null==(i=this.scene.game.AudioSetUp)||i.play("kettleAudio"),null==(s=this.kettleObj.animationState)||s.clearListeners(),this.kettleObj.angle=0,this.kettleObj.x=e.x+50,this.kettleObj.y=e.y+60,this.kettleObj.animationState.setAnimation(0,"idle",!1),this.kettleObj.animationState.addListener({complete:t=>{if(console.log("water completed"),this.scene.game.gameState=GameConfig.GameState.NORMAL,e.water(),this.isKettle=!1,this.kettleObj.setVisible(!1),0==this.scene.currentPage)if(this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_35"),3e3,"short"),this.scene.game.GameApi.serverUnixTime-e.growUpInfoConfig.plantTime<e.growUpInfoConfig.remainingTime){const t={plantTime:e.growUpInfoConfig.plantTime,wateringTime:this.scene.game.GameApi.serverUnixTime,remainingTime:e.growUpInfoConfig.remainingTime};e.showGrowUpInfo(t)}else e.harvest()}})})).catch((e=>{console.log("",e),this.scene.game.gameState=GameConfig.GameState.NORMAL,this.isKettle=!1,10002201!=e.iRet&&this.onErrorMsg(e)}))}spawnCrop(e,t,i,s){var n;let a=new e(this.scene,this.cropGroup,i);0!=(null==(n=this.scene.game.GameData.guideData)?void 0:n.isCompleted)||11!=this.scene.currentStep&&16!=this.scene.currentStep?a.setDepth(10):a.setDepth(1010),a.incX(t.x),a.incY(t.y),t.setCurrentCrop(a),(a instanceof FlowerSeedling||a instanceof FlowerBud)&&this.scene.game.gameState!=GameConfig.GameState.CAMERA?s&&t.showGrowUpInfo({plantTime:i.plantTime,wateringTime:i.wateringTime,remainingTime:i.remainingTime}):t.hideGrowthInfo()}onBag(e){var t,i,s,n,a,r,o,l;if(null!=this.seedNumView&&null!=this.seedNumView||(this.seedNumView=new SeedNumDialog(this.scene,null),this.seedNumView.setDepth(500)),this.currentSeedNum=e.bagItem.iAmount,this.seedId=null==(t=e.bagItem)?void 0:t.iItemId,this.isPagePlant){this.isPagePlant=!1,null==(i=this.scene.bagView)||i.slideOut(),this.seedNumView.slideIn(e.bagItem),this.scene.seedsNumType=!0,this.seedNumView.updateData(!0),this.seedNumView.close_icon.setVisible(!1);let t={cropId:null==(s=e.bagItem)?void 0:s.iItemId};this.spawnCrop(FlowerSeed,this.currentLand,t),this.currentSelectedLand=this.currentLand,this.updateCropOperatePosition(),this.cropOperateItem.showBagPanel(),this.cropOperateItem.OnConfirmClick=()=>{this.getPlant(!1,this.currentLand)},this.cropOperateItem.OnCancelClick=()=>{this.currentLand.setSelected(!1),this.currentLand.destroyCurrentCrop(),this.seedNumView.slideOut(),this.scene.seedsNumType=!1,this.scene.game.gameState=GameConfig.GameState.NORMAL}}else null==(n=this.scene.bagView)||n.slideOut(),this.scene.game.gameState=GameConfig.GameState.PLANTING,this.isbagPlant=!0,this.seedNumView.slideIn(e.bagItem),this.scene.seedsNumType=!0,this.seedNumView.updateData(!1),(null==(r=null==(a=this.scene.game.GameData)?void 0:a.guideData)?void 0:r.curStep)>28&&(null==(l=null==(o=this.scene.game.GameData)?void 0:o.guideData)?void 0:l.curStep)<34?this.seedNumView.close_icon.setVisible(!1):this.seedNumView.close_icon.setVisible(!0),this.setBrightnessLevel(!0)}closeSeedNum(){(this.scene.game.gameState===GameConfig.GameState.NORMAL||this.operateBag)&&this.onCloseCurrent(!0)}onPlant(e){if(this.isbagPlant&&this.operateBag&&e.curState===Land.State.NONE){this.seedNumView.updateData(!0),e.setSelected(!0),e.setHighlight(!1),this.scene.game.gameState=GameConfig.GameState.PLANTING,this.operateBag=!1;let t={cropId:this.seedId};this.spawnCrop(FlowerSeed,e,t),this.currentSelectedLand=e,this.updateCropOperatePosition(),this.cropOperateItem.showBagPanel(),this.cropOperateItem.OnConfirmClick=()=>{this.getPlant(!0,e)},this.cropOperateItem.OnCancelClick=()=>{this.operateBag=!0,e.setHighlight(!0),e.setSelected(!1),e.destroyCurrentCrop(),this.seedNumView.updateData(!1)}}}onCloseCurrent(e){this.scene.game.gameState=GameConfig.GameState.NORMAL,this.seedNumView.slideOut(),this.scene.seedsNumType=!1,this.isbagPlant=!1,e&&(this.scene.bagView.slideIn(),this.setBrightnessLevel(!1))}setBrightnessLevel(e){this.landGroup.getChildren().forEach((t=>{t.curState==Land.State.NONE&&(t.setHighlight(e),t.setSelected(e))}))}getPlant(e,t,i=0){this.isPlant=!0,this.scene.game.GameApi.plantCrop(this.landIndex,this.seedId).then((s=>{var n,a,r,o;console.log("",s),this.isPlant=!1,null==(n=this.scene.game.AudioSetUp)||n.play("plantAudio");const{plantInfo:l}=s.jData;t.iHarvestItemId=l.iHarvestItemId,t.sow(),t.destroyCurrentCrop(),t.getCropDetail({sName:l.sName,iRemoveAmount:l.iRemoveAmount,iRemoveItemId:l.iRemoveItemId});const h={plantTime:l.dtPlantAt,wateringTime:l.dtWateringAt,remainingTime:l.iMatureTime,cropId:this.seedId};i>9&&i<16?(t.destroyCurrentCrop(),this.spawnCrop(FlowerBud,t,{plantTime:0,wateringTime:0,remainingTime:0,cropId:2000101},!1),t.setLackWater(),null==(a=this.scene.beginner)||a.submitGuide(i)):this.spawnCrop(FlowerSeedling,t,h,!0),t.setSelected(!1),this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_28"),3e3,"short"),this.currentSeedNum--,this.scene.game.GameData.userAssets[this.seedId]&&(this.scene.game.GameData.userAssets[this.seedId].iAmount=this.currentSeedNum),null==(r=this.seedNumView)||r.seedRemaining(this.currentSeedNum);const d=this.landGroup.getChildren();e?(this.operateBag=!0,d.find((e=>e.curState===Land.State.NONE))||(this.onCloseCurrent(!1),this.isLandPlanting=!0,this.setBrightnessLevel(!1)),0===this.currentSeedNum&&(this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_31"),3e3,"short"),this.seedNumView.slideOut(),this.scene.seedsNumType=!1,this.onCloseCurrent(!1),this.setBrightnessLevel(!1),this.seedId="",this.scene.game.gameState=GameConfig.GameState.NORMAL,this.isbagPlant=!1)):(this.currentLand=null,null==(o=this.seedNumView)||o.slideOut(),this.scene.seedsNumType=!1,d.find((e=>e.curState===Land.State.NONE))||(this.isLandPlanting=!0),this.scene.game.gameState=GameConfig.GameState.NORMAL),this.onGrowUp(t,h)})).catch((e=>{var i;console.error("error",e),this.isPlant=!1,t.destroyCurrentCrop(),null==(i=this.seedNumView)||i.slideOut(),this.scene.seedsNumType=!1,this.setBrightnessLevel(!1),t.setSelected(!1),this.scene.game.gameState=GameConfig.GameState.NORMAL,this.onErrorMsg(e)}))}onGrowUp(e,t){e.onAMinute=()=>{console.log(""),e.destroyCurrentCrop(),this.spawnCrop(FlowerBud,e,t,!1)},e.onWater=()=>{e.setLackWater()},e.onMature=()=>{console.log(""),e.destroyCurrentCrop(),this.spawnCrop(Flower,e,t),e.harvest(),e.hideGrowthInfo()}}updateCropOperatePosition(){this.currentSelectedLand&&(3==this.landIndex?this.cropOperateItem.setPosition(this.currentSelectedLand.x,this.currentSelectedLand.y-50):this.cropOperateItem.setPosition(this.currentSelectedLand.x,this.currentSelectedLand.y-100))}onErrorMsg(e){const t=e.msg.match(/\n([^\n]+)\n/),i=t?t[1]:e.msg;this.scene.game.Tips.show(i,3e3,"short"),console.log(""),this.scene.game.GameApi.init(!0),this.getLandData()}landDepth(e,t){const i=e.getCurrentCrop();i&&i.setDepth(t)}onEvents(){this.scene.events.on("camera-open",(e=>{if("FarmView"==this.scene.currentView){const t=this.landGroup.getChildren();1==e.type&&t.forEach((e=>{e.hideGrowthInfo()})),2==e.type&&this.getLandData()}})),this.scene.events.on("bag_to_store",(()=>{this.setBrightnessLevel(!1)})),EventBus.on("guide_step",(e=>{var t,i,s,n,a,r,o,l,h,d,c,u,p,g,m,f,v;if(e.step>29&&e.step<36){const e=(null==(s=null==(i=null==(t=this.scene.game.GameData.infoData)?void 0:t.bag)?void 0:i.seeds)?void 0:s[0])||{};null!=this.seedNumView&&null!=this.seedNumView||(this.seedNumView=new SeedNumDialog(this.scene,null),this.seedNumView.setDepth(500)),this.seedNumView.slideIn(e),this.scene.seedsNumType=!0,this.seedNumView.updateData(!1),this.seedNumView.close_icon.setVisible(!1)}const b=this.landGroup.getChildren();if(7==e.step)this.setLandSelected(b[0]);else if(8==e.step)this.cropOperateItem.setVisible(!1),this.isPagePlant=!0,this.currentLand=b[0],this.scene.events.emit("open_view",{viewName:"BagView"});else if(9==e.step){this.isPagePlant=!0,this.currentLand=b[0];const e=null==(r=null==(a=null==(n=this.scene.game.GameData.infoData)?void 0:n.bag)?void 0:a.seeds)?void 0:r.find((e=>2000101==(null==e?void 0:e.iItemId))),t={source:"bag",bagItem:{iItemId:2000101,iLevelRequire:1,iAmount:(null==e?void 0:e.iAmount)||0,sIcoPath:"plant-crop-atlas,tulip_mature.png"}};this.onBag(t)}else if(10==e.step)this.landIndex=1,this.seedId=2000101,this.getPlant(!1,b[0],e.step),this.cropOperateItem.setVisible(!1);else if(11==e.step)this.landDepth(b[0],1010);else if(12==e.step)this.landDepth(b[0],10),b[0].setLackWater(),this.setLandSelected(b[0]);else if(13==e.step)this.water(b[0],e.step);else if(14==e.step||15==e.step)null==(o=b[0])||o.water();else if(16==e.step){let e={plantTime:this.scene.game.GameApi.serverUnixTime,wateringTime:0,remainingTime:200,cropId:2000101};b[0].destroyCurrentCrop(),this.spawnCrop(Flower,b[0],e,!1),b[0].harvest(),this.landDepth(b[0],1010)}else if(17==e.step)this.landDepth(b[0],10),this.landIndex=1,this.showHarvestPanel(b[0]);else if(19==e.step||20==e.step)this.scene.onOpenView({viewName:"BagView",showFlowerPanel:!0,isTaskJump:!0});else if(21==e.step||22==e.step||29==e.step)this.scene.bagView?this.scene.bagView.slideIn():this.scene.onOpenView({viewName:"BagView"});else if(30==e.step){null==(l=this.scene.game.AudioSetUp)||l.play("bagItemAudio"),this.isPagePlant=!1;const e={source:"bag",bagItem:{...(null==(c=null==(d=null==(h=this.scene.game.GameData.infoData)?void 0:h.bag)?void 0:d.seeds)?void 0:c[0])||{}}};this.onBag(e)}else if(31==e.step)this.isbagPlant=!0,this.operateBag=!0,this.onPlant(b[0]);else if(32==e.step){this.landIndex=1;const t=(null==(g=null==(p=null==(u=this.scene.game.GameData.infoData)?void 0:u.bag)?void 0:p.seeds)?void 0:g[0])||{};this.seedId=null==t?void 0:t.iItemId,this.getPlant(!0,b[0],e.step),this.cropOperateItem.setVisible(!1)}else if(34==e.step)this.isbagPlant=!0,this.operateBag=!0,this.onPlant(b[1]);else if(35==e.step){this.landIndex=2;const t=(null==(v=null==(f=null==(m=this.scene.game.GameData.infoData)?void 0:m.bag)?void 0:f.seeds)?void 0:v[0])||{};this.seedId=null==t?void 0:t.iItemId,this.getPlant(!0,b[1],e.step),this.cropOperateItem.setVisible(!1),this.onCloseCurrent(!1),this.isLandPlanting=!0,this.setBrightnessLevel(!1)}}))}}let offsetX$2=90,offsetY$2=100;class SeedItem extends Component{constructor(e,t,i,s){var n,a,r;super(e,t,i,s),__publicField(this,"userData"),this.bg=e.add.image(offsetX$2,offsetY$2,"bag-atlas","item_plants_normal.png"),this.icon=e.add.image(offsetX$2,offsetY$2-15,"","").setScale(1.2),this.levelText=e.add.text(offsetX$2-70,offsetY$2-95,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#A1895C"}),this.countText=e.add.text(offsetX$2+45,offsetY$2+15,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#605AAA"}),this.nameText=e.add.text(offsetX$2,offsetY$2+85,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#A1895C"}).setOrigin(.5,.5),this.copyNameText=e.add.text(0,0,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#A1895C"}).setVisible(!1),this.notBuyBg=e.add.image(offsetX$2,offsetY$2,"bag-atlas","item_plants_not available.png").setVisible(!1),this.storeIcon=e.add.image(offsetX$2+62,offsetY$2-84,"bag-atlas","label_store_normal.png").setVisible(!1),this.add([this.bg,this.icon,this.levelText,this.countText,this.nameText,this.notBuyBg,this.storeIcon,this.copyNameText]),this.language=(null==(r=null==(a=null==(n=e.game)?void 0:n.GameData)?void 0:a.settingInfo)?void 0:r.languageKey)||"en_US"}updateData(e){this.userData=e;const{iLevelRequire:t=0,sItemName:i,iItemId:s,unlock:n,iItemType:a=0,iGetWay:r,sIcoPath:o="bag-crop-atlas,tulip_mature.png",iAmount:l}=e;if(this.countText.setText(l),this.countText.setPosition(offsetX$2+65-this.countText.displayWidth,offsetY$2+25),this.nameText.setFontSize(22),"zh_MY"==this.language||"zh_TW"==this.language||"zh_CN"==this.language)this.nameText.setText(i),this.nameText.setFontSize(22),this.nameText.displayWidth>this.bg.displayWidth-30?StringFormatter.shrinkText(this.nameText,22,this.bg.displayWidth-30,14):this.nameText.setFontSize(22);else{this.nameText.setStyle({wordWrap:{width:this.bg.displayWidth-30,useAdvancedWrap:!0},maxLines:3}),this.copyNameText.setText(i),this.nameText.setText(i);const e=this.nameText.getWrappedText(i);1==e.length?this.nameText.setFontSize(22):2==e.length?this.nameText.setFontSize(18):this.nameText.setFontSize(14)}if(a==GameConfig.ItemType.TIC_FLOWER){this.levelText.setVisible(!1);const{key:e,frame:t}=ItemIconGetter.getCropSeedIcon(o);this.icon.setTexture(e,t),this.notBuyBg.setVisible(!1),this.storeIcon.setVisible(!1)}else if(a==GameConfig.ItemType.TIC_SEED)if(0==n&&1==r)this.icon.setTexture("plant","icon_Crystal_rose_normal.png"),this.levelText.setVisible(!1),this.countText.setVisible(!1),this.notBuyBg.setVisible(!1),this.storeIcon.setVisible(!1),this.nameText.setVisible(!1);else if(0==l){const{key:e,frame:t}=ItemIconGetter.getSeedBagIcon(o);this.icon.setTexture(e,t),this.levelText.setVisible(!0),this.countText.setVisible(!0),this.notBuyBg.setVisible(!0),this.storeIcon.setVisible(!0),this.nameText.setVisible(!0)}else{const{key:e,frame:t}=ItemIconGetter.getSeedBagIcon(o);this.icon.setTexture(e,t),this.levelText.setVisible(!0),this.countText.setVisible(!0),this.notBuyBg.setVisible(!1),this.storeIcon.setVisible(!1),this.nameText.setVisible(!0)}0===t?this.levelText.setVisible(!1):this.levelText.setText(`${instance.t("Event_5_C2_Pandora_121")}${t}`),this.scene.game.GameData.userInfo.iLevel<t?this.levelText.setFill("#DC1935"):this.levelText.setFill("#A1895C")}}class Tab extends Phaser.GameObjects.Container{constructor(e,t,i,{normalObjs:s,activeObjs:n}){super(e,t,i),this.add(s),this.add(n),this.setActive=e=>{console.log("setActive",e),s.forEach((t=>{t.setVisible(!e)})),n.forEach((t=>{t.setVisible(e)}))},this.setClick=e=>{s[0].setInteractive().on("pointerdown",e)}}}class TabGroup{constructor(e,t,i,s,n,a,r){this.tabs=[],this.onChangeCallback=r,s.forEach(((s,r)=>{const o=new Tab(e,t,i,s);o.setClick((()=>{var e;this.switchTab(o),null==(e=this.onChangeCallback)||e.call(this,r)})),a.add(o),this.tabs.push(o),r===n?o.setActive(!0):o.setActive(!1)}))}switchTab(e){this.tabs.forEach((t=>t.setActive(t===e)))}hideOtherTabs(e){this.tabs.forEach((t=>{t!==e&&t.setVisible(!1)}))}setVisible(e){this.tabs.forEach((t=>t.setVisible(e)))}}let DetailDialog$1=class extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"basedepth",1e3);const{width:n,height:a}=e.cameras.main;let r=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();r.setOrigin(0,0),r.setAlpha(.5);const o=e.add.image(n/2,a/2,"setUp-atlas","pop-up_big.png"),l=e.add.image(n/2+465,a/2-270,"common-atlas","btn_close2.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-30,-30,100,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{this.hide()})).setDepth(this.basedepth+100);let h=e.add.container(n/2,a/2-200);const d=e.add.text(0,0,"",{fontSize:"30px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(.5,.5).setDepth(this.basedepth+2),c=e.add.image(0,50,"store","line_04.png").setDisplaySize(1050,10);let u=e.add.image(-320,180,"store","4-28.tab_frame_framepanel_ accomplish2.png"),p=e.add.image(-320,180).setScale(1.3),g=e.add.text(-240,260,"",{color:"#6132a1",fontSize:"22px",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,0);const m=GeneralRtl.rtlText(e,-160,80,"",{fontSize:"22px",fontFamily:"SPIEGEL-REGULAR",color:"#9e7ec4",wordWrap:{width:600,useAdvancedWrap:!0},lineSpacing:4,padding:{top:4}}).setOrigin(0,0);h.add([d,c,u,p,g,m]),this.add([r,o,l,h]),this.updateData=e=>{const{sItemName:t,iItemType:i,sIcoPath:s,iAmount:n,sDesc:a}=e;if(d.setText(t),1==i){const{key:e,frame:t}=ItemIconGetter.getSeedBagIcon(s);p.setTexture(e,t)}else if(2==i){const{key:e,frame:t}=ItemIconGetter.getCropSeedIcon(s);p.setTexture(e,t)}g.setText(n),g.setPosition(-220-g.displayWidth,260),m.setText(a)},this.show=t=>{console.log("---",t),this.setVisible(!0),this.setAlpha(0),this.updateData(t),e.tweens.add({targets:this,alpha:1,duration:300,ease:"Back.Out"})},this.hide=()=>{e.tweens.add({targets:this,alpha:0,duration:300,ease:"Back.Out",onComplete:()=>{this.setVisible(!1)}})},this.onResize=(e,t)=>{var i;null==(i=null==r?void 0:r.setDisplaySize)||i.call(r,e,t),null==o||o.setPosition(e/2,t/2),null==l||l.setPosition(e/2+465,t/2-270),null==h||h.setPosition(e/2,t/2-200)},this.setVisible(!1),this.setDepth(this.basedepth)}};class BagView extends Page{constructor(e,t){super(e,t),__publicField(this,"uiKey","BagView"),__publicField(this,"baseDepth",550),__publicField(this,"positionX",0),__publicField(this,"positionY",0),__publicField(this,"itemType",1),__publicField(this,"emptyHintText",null),__publicField(this,"isInterface",!1),__publicField(this,"detailDialog");const i=()=>{var t,i,s,n;if(1==this.itemType){const s=null==(i=null==(t=e.game.GameData.infoData)?void 0:t.bag)?void 0:i.seeds;s&&this.fillItems(s)}if(2==this.itemType){const t=null==(n=null==(s=e.game.GameData.infoData)?void 0:s.bag)?void 0:n.flowers;t&&this.fillItems(t)}},s=this;let n=null,a=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();a.setOrigin(0,0),a.setAlpha(.75),a.setDepth(this.baseDepth),a.setInteractive({useHandCursor:!1});let r=e.add.image(e.cameras.main.width/2,e.cameras.main.height-60,"bag-atlas","frame_mask1.png");r.name="bagBottomMask",r.setDepth(this.baseDepth+3),r.setScale(.97),this.addMultiple([a,r]);const o=e.add.container(GameConfig.Screen.width/2-250,-60),l=e.add.image(0,0,"bag-atlas","btn_store_normal.png").setOrigin(.5,.5);o.add([l,e.add.text(0,0,instance.t("Event_5_C2_Pandora_25"),{fontFamily:"BeaufortforLOL-Bold",fontSize:26,fill:"#fff"}).setOrigin(.5,.5)]),l.setInteractive().on("pointerdown",(t=>{var i;null==(i=e.game.AudioSetUp)||i.play("bagStoreAudio"),this.slideOut(),t.event.stopPropagation(),e.game.gameState=GameConfig.GameState.NORMAL,e.events.emit("open_view",{viewName:"StoreView",shopTab:0}),e.events.emit("bag_to_store")}));const h=e.add.group({classType:SeedItem,maxSize:-1,runChildUpdate:!1});this.positionX=e.cameras.main.width,n=e.rexUI.add.gridTable({x:this.positionX/2,y:e.cameras.main.height+440,width:GameConfig.Screen.width,height:440,header:e.add.container(0,0),background:e.add.image(0,0,"bag-atlas","frame_framepanel_plants.png"),table:{cellWidth:186,cellHeight:261,columns:6,mask:{padding:20},reuseCellContainer:!0},mouseWheelScroller:{focus:!1,speed:.1},space:{left:110,right:0,top:30,bottom:12,table:{top:0,bottom:0,left:0,right:0},header:10,footer:10},createCellContainerCallback:function(e,t){e.scene,e.width,e.height;var i=e.item;return e.index,null===t&&(t=h.get()),t.setDepth(s.baseDepth+2),t.updateData(i),t.setActive(!0),t.setVisible(!0),t},items:[]}).layout().setDepth(this.baseDepth+1),n.setVisible(!1),n.on("cell.click",(function(t,i,s){var n;console.log("pointer-click "+i+": "+t);const{iItemType:a,iLevelRequire:r,unlock:o,iItemId:l,iGetWay:h,iAmount:d}=t.userData;if(a==GameConfig.ItemType.TIC_FLOWER)return this.detailDialog||(this.detailDialog=new DetailDialog$1(e)),void this.detailDialog.show(t.userData);null==(n=e.game.AudioSetUp)||n.play("bagItemAudio"),e.plantView.isLandPlanting?e.game.Tips.show(instance.t("Event_5_C2_Pandora_116"),3e3,"longest"):(0===r||r<=e.game.GameData.userInfo.iLevel)&&d>0?e.events.emit("start_planting",{bagItem:{...t.userData,iAmount:d}}):e.game.GameData.userInfo.iLevel<r?e.game.Tips.show(instance.t("Event_5_C2_Pandora_30",{level:r}),3e3,"longest"):0!=d||e.game.Tips.show(instance.t("Event_5_C2_Pandora_31"),3e3,"long")}),this);const d=n.getElement("header");d.setDepth(this.baseDepth+3),d.add(o),d.add(e.add.image(GameConfig.Screen.width/2-120,-60,"bag-atlas","btn_close.png").setInteractive({useHandCursor:!0}).setOrigin(.5,.5).on("pointerdown",(t=>{var i;null==(i=e.game.AudioSetUp)||i.play("bagCloseAudio"),n.getElement("background").setVisible(!1),n.scrollToTop(),n.setVisible(!1),this.slideOut(),e.events.emit("on_bag_close",{}),e.events.emit("close_view",{viewName:this.uiKey})})));const c=new TabGroup(e,-GameConfig.Screen.width/2-22,-38,[{normalObjs:[e.add.image(60,-16,"bag-atlas","tab_seeds_not select.png").setOrigin(0,.5)],activeObjs:[e.add.image(40,-25,"bag-atlas","tab_seeds_select.png").setOrigin(0,.5),e.add.text(180,15,instance.t("Event_5_C2_Pandora_23"),{fontFamily:"BeaufortforLOL-Bold",fontSize:32,fill:"#6f69e2"}).setOrigin(.5,.5)]},{normalObjs:[e.add.image(302,-16,"bag-atlas","tab_flowers_not select.png").setOrigin(0,.5)],activeObjs:[e.add.image(220,-25,"bag-atlas","tab_flowers_select1.png").setOrigin(0,.5),e.add.text(360,15,instance.t("Event_5_C2_Pandora_24"),{fontFamily:"BeaufortforLOL-Bold",fontSize:32,fill:"#6f69e2"}).setOrigin(.5,.5)]}],this.itemType-1,d,(t=>{var s;this.itemType!==t+1&&(null==(s=e.game.AudioSetUp)||s.play("bagTabAudio"),n.scrollToTop(),this.itemType=t+1,i())})),u=e.textures.get("plant_background").get("__BASE").height;Math.min(u,e.cameras.main.height)===u?this.positionY=e.cameras.main.height/2+360:e.cameras.main.height<u&&e.cameras.main.height>GameConfig.Screen.height?this.positionY=e.cameras.main.height/2-(u/2-e.cameras.main.height/2)+453:this.positionY=e.cameras.main.height/2+164,this.slideIn=(t=0,a=!1)=>{e.tweens.add({targets:n,y:this.positionY,delay:0,loop:0,duration:300,ease:"Power2"}).play(),n&&(n.setVisible(!0),n.setSliderEnable(!0),n.setScrollerEnable(!0),n.setMouseWheelScrollerEnable(!0),n.setPosition(this.positionX/2,this.positionY)),this.show();const r=s.getFlowerTab();a?(this.itemType=2,r.setVisible(!0),c.setVisible(!1),o.setVisible(!1)):(this.itemType=1,r.setVisible(!1),c.setVisible(!0),o.setVisible(!0),c&&c.switchTab(c.tabs[t])),18!=e.currentStep&&19!=e.currentStep||(this.itemType=2),i()},this.getFlowerTab=()=>{let t=d.getByName("flowerTab");return null==t&&(t=e.add.container(-GameConfig.Screen.width/2+5,-63),t.name="flowerTab",t.add([e.add.image(0,0,"bag-atlas","tab_flowers_select1.png").setOrigin(0,.5),e.add.text(135,38,instance.t("Event_5_C2_Pandora_24"),{fontFamily:"BeaufortforLOL-Bold",fontSize:36,fill:"#314E9D"}).setOrigin(.5,.5)]),d.add(t)),t},this.slideOut=()=>{r.setVisible(!1),e.tweens.add({targets:n,y:2*e.cameras.main.height,duration:200,ease:"Power2",onComplete:()=>{n.setSliderEnable(!1),n.setScrollerEnable(!1),n.setMouseWheelScrollerEnable(!1),this.hide()}}).play()},this.fillItems=t=>{if(t||(t=[]),this.emptyHintText&&(this.emptyHintText.destroy(),this.emptyHintText=null),this.itemType==GameConfig.ItemType.TIC_FLOWER&&(!t||0===t.length)){const t=instance.t("Event_5_C2_Pandora_39");this.emptyHintText=e.add.text(e.cameras.main.width/2,e.cameras.main.height-210,t,{fontFamily:"BeaufortforLOL-Bold",fontSize:"26px",color:"#9e7ec4",wordWrap:{width:500},align:"center"}),this.emptyHintText.setOrigin(.5,.5),this.emptyHintText.setDepth(this.baseDepth+4),this.add(this.emptyHintText)}n.setItems(t)},this.onResize=(e,t)=>{var i,s;a.setDisplaySize(e,t),t>u?this.positionY=t/2+360:t<u&&t>GameConfig.Screen.height?this.positionY=t/2-(u/2-t/2)+453:this.positionY=t/2+164,this.positionX=e,a.visible&&n.setPosition(this.positionX/2,this.positionY),r.visible&&r.setPosition(e/2,t),null==(i=this.emptyHintText)||i.setPosition(e/2,t-210),null==(s=this.detailDialog)||s.onResize(e,t)},this.setVisible(!1)}}let offsetX$1=120,offsetY$1=150;class ShopItem extends Component{constructor(e,t,i){var s,n,a;super(e,0,0),__publicField(this,"userData"),__publicField(this,"basedepth",600),this.bg=e.add.image(offsetX$1,offsetY$1,"store","item_plants_normal3.png"),this.rose=e.add.image(offsetX$1,offsetY$1-20,"","").setScale(1.2),this.levelText=e.add.text(offsetX$1-85,offsetY$1-115,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"20px",fill:"#fff"}),this.remainingText=e.add.text(offsetX$1+48,offsetY$1-115,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#605AAA"}),this.totalText=e.add.text(offsetX$1+60,offsetY$1-115,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#a1895c"}),this.nameText=e.add.text(offsetX$1,offsetY$1+55,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"18px",fill:"#385bb6",wordWrap:{width:this.bg.displayWidth-75,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.building=e.add.image(offsetX$1-55,offsetY$1-105,"store","icon_cell3.png"),this.icon=e.add.image(offsetX$1-30,offsetY$1+110,"","").setOrigin(.5,.5).setVisible(!1),this.countText=e.add.text(offsetX$1+20,offsetY$1+110,NumberFormatter.format(1e3),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#fff"}).setOrigin(.5,.5).setVisible(!1),this.buyContainer=e.add.container(offsetX$1-30,offsetY$1+110),this.shopOut=e.add.text(0,0,instance.t("Event_5_C2_Pandora_110"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#855A37"}).setOrigin(0).setVisible(!1),this.shopOut.setPosition(this.bg.displayWidth/2-this.shopOut.displayWidth/2,offsetY$1+88),this.butInfo=(t,i)=>{t.forEach(((s,n)=>{var a,r,o,l;this.buyContainer.setPosition(offsetX$1-30*t.length-5,offsetY$1+100);let h={key:"",frame:""};h="3"===String(null==s?void 0:s.itemId).charAt(0)?{key:null==(a=ItemIconGetter.getFlowerPropIcon(s.icon))?void 0:a.key,frame:null==(r=ItemIconGetter.getFlowerPropIcon(s.icon))?void 0:r.frame}:{key:null==(o=ItemIconGetter.getItemPropIcon(s.icon))?void 0:o.key,frame:null==(l=ItemIconGetter.getItemPropIcon(s.icon))?void 0:l.frame};const d=e.add.image(60*n,0,h.key,h.frame).setOrigin(0,.5),c=e.add.text(60*n+38,0,s.count,{fontSize:"22px",fill:"#855A37",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,.5);if(1==t.length){const e=3*`${s.count}`.length;d.setPosition(-e,0),c.setPosition(d.x+38,0)}i<0?c.setFill("#855A37"):s.count>s.have?c.setFill("#dc1935"):c.setFill("#5d5d5d"),this.buyContainer.add([d,c])}))},this.statusIcon=e.add.image(offsetX$1,offsetY$1,"store","frame_check2.png").setVisible(!1).setDepth(this.basedepth+10),this.shopSummary=e.add.image(offsetX$1+85,offsetY$1-115,"icon_dots").setVisible(!1),this.add([this.bg,this.rose,this.remainingText,this.totalText,this.levelText,this.nameText,this.countText,this.icon,this.buyContainer,this.building,this.shopOut,this.statusIcon,this.shopSummary]),this.setVisible=e=>{super.setVisible(e),e||this.buyContainer.removeAll(!0)},this.language=(null==(a=null==(n=null==(s=e.game)?void 0:s.GameData)?void 0:n.settingInfo)?void 0:a.languageKey)||"en_US"}updateData(e){var t;this.userData=e;const{iUnlockLevel:i,leftNum:s=0,iMaxBuyCount:n=0,sName:a,buyInfo:r,sIcon:o,unlockedStatus:l,cateId:h,sSize:d,yellowDot:c}=e;if(1==h)this.building.setVisible(!1),0==i?this.levelText.setVisible(!1):(this.levelText.setVisible(!0),this.levelText.setText(`${instance.t("Event_5_C2_Pandora_121")}${i}`)),((null==(t=this.scene.game.GameData.userInfo)?void 0:t.iLevel)||0)<i?this.levelText.setFill("#DC1935"):this.levelText.setFill("#A1895C"),this.shopSummary.setVisible(c);else{if(this.levelText.setVisible(!1),d){this.building.setVisible(!0);const e=ItemIconGetter.getSizeType(d);this.building.setTexture("bag-atlas",e)}else this.building.setVisible(!1);this.shopSummary.setVisible(!1)}if(-1===n?(this.remainingText.setVisible(!1),this.totalText.setVisible(!1)):(this.remainingText.setText(`${s}`),this.totalText.setText(`/${n}`),this.remainingText.setVisible(!0),this.totalText.setVisible(!0)),1==h){const{key:e,frame:t}=ItemIconGetter.getShopCropIcon(o);this.rose.setTexture(e,t)}else if(2==h){const{key:e,frame:t}=ItemIconGetter.getShopIcon(o);this.rose.setTexture(e,t)}else{const{key:e,frame:t}=ItemIconGetter.getItemPropIcon(o);this.rose.setTexture(e,t)}this.totalText.setPosition(offsetX$1+80-this.totalText.displayWidth,offsetY$1-115),this.remainingText.setPosition(this.totalText.x-this.remainingText.displayWidth,offsetY$1-115),this.nameText.setText(a);const u=this.nameText.getWrappedText(a);if(u.length>1){let e=u.slice(0,1).join("\n");const t=u[0];let i=t.substring(0,t.length-4);for(;i.length>0;){const t=i+"...",s=this.scene.add.text(0,0,t,{fontSize:"18px",fontFamily:"BeaufortforLOL-Bold",color:"#385bb6"}).setVisible(!1),n=s.width;if(s.destroy(),n<=this.bg.displayWidth-75){e=u.slice(0,0).join("\n")+"\n"+t;break}i=i.slice(0,-1)}this.nameText.setText(e),this.nameText.setY(offsetY$1+46)}else this.nameText.setText(a),this.nameText.setY(offsetY$1+55);if(0==s)this.buyContainer.removeAll(!0),this.shopOut.setVisible(!0),this.bg.setTexture("store","item_plants_normal2.png");else if(this.shopOut.setVisible(!1),null!=r&&r.length>0){this.icon.setVisible(!1),this.countText.setVisible(!1);const e=r.map((e=>{var t;const i=this.scene.game.GameData.gameItemSeetings[e.itemId];return{icon:null==i?void 0:i.sIcoPath,count:Number(e.itemNum),have:(null==(t=this.scene.game.GameData.userAssets[e.itemId])?void 0:t.iAmount)||0,itemId:e.itemId}}));let t=e.findIndex((e=>e.count>e.have));this.butInfo(e,t),0==l||this.scene.game.GameData.userInfo.iLevel<i?this.bg.setTexture("store","item_plants_normal2.png"):t<0?this.bg.setTexture("store","item_plants_normal3.png"):this.bg.setTexture("store","item_plants_normal2.png")}else this.buyContainer.removeAll(!0);0==l||this.scene.game.GameData.userInfo.iLevel<i?(this.statusIcon.setVisible(!0),this.statusIcon.setTexture("store","frame_check3.png")):-1!=n&&0==s?(this.statusIcon.setVisible(!0),this.statusIcon.setTexture("store","frame_check2.png")):this.statusIcon.setVisible(!1)}}class InGameDialog extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"basedepth",1e3);const{width:n,height:a}=e.cameras.main;let r=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();r.setOrigin(0,0),r.setAlpha(.75),this.add(r);const o=e.textures.get("pop_small"),l=o.get("__BASE").height,h=o.get("__BASE").width;let d=e.add.container(0,90);const c=e.add.text(0,0,instance.t("Event_5_C2_Pandora_117"),{fontSize:"20px",fontFamily:"SPIEGEL-REGULAR",color:"#9e7ec4",lineSpacing:10,align:"center",wordWrap:{width:450,useAdvancedWrap:!0}}).setOrigin(.5,0);c.setPosition(0,200-c.displayHeight/2);let u=e.add.image(0,300,"common-atlas","line_02.png");u.setDisplaySize(720,u.displayHeight);const p=e.add.image(-100,365,"loading-atlas","btn_cancel2.png").setInteractive().on("pointerdown",(()=>{this.closeDialog()})),g=e.add.image(100,365,"loading-atlas","btn_confirm2.png").setInteractive();d.add([c,u,p,g]),d.setDepth(this.basedepth+1),this.dialog=e.rexUI.add.dialog({x:n/2,y:a/2,width:h,height:l,background:e.add.image(0,0,"pop_small"),content:d,space:{title:30,left:40,right:40},align:{title:"center",content:"center"}}).layout(),this.add([this.dialog]);this.openDialog=()=>{this.setVisible(!0),this.dialog.setScale(.8).setVisible(!0).setAlpha(0),e.tweens.add({targets:this.dialog,scale:1,alpha:1,duration:300,ease:"Back.Out"}),this.dialog.setInteractive()},this.closeDialog=()=>{var t;null==(t=e.game.AudioSetUp)||t.play("plantCloseAudio"),e.tweens.add({targets:this.dialog,scale:.8,alpha:0,duration:200,ease:"Back.In",onComplete:()=>{this.setVisible(!1)}}),this.dialog.disableInteractive()},g.on("pointerdown",(()=>{(()=>{switch((()=>{const e=navigator.userAgent;return/Android/i.test(e)?"Android":/iPhone|iPad|iPod/i.test(e)?"iOS":"PC"})()){case"PC":return location.href="https://wildrift.leagueoflegends.com/","openGameInPC";case"iOS":return location.href="https://playwildrift.page.link/rowdeeplink?type=&params=","";case"Android":const e=setTimeout((()=>{location.href="https://play.google.com/store/apps/details?id=com.riotgames.league.wildrift"}),3e3);return location.href="https://playwildrift.page.link/rowdeeplink?type=&params=",addEventListener("visibilitychange",(()=>{document.hidden&&clearTimeout(e)})),"";default:;}})(),this.closeDialog()})),this.setDepth(this.basedepth),this.onResize=(e,t)=>{var i,s,n;null==(i=null==r?void 0:r.setDisplaySize)||i.call(r,e,t),null==(n=null==(s=this.dialog)?void 0:s.setPosition)||n.call(s,e/2,t/2)},this.setVisible(!1)}}class StoreDialog extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"shopData",{}),__publicField(this,"exchangeNum",1),__publicField(this,"maxExchange"),__publicField(this,"basedepth",700),__publicField(this,"commodityId"),__publicField(this,"exchangeList",[]),__publicField(this,"detailInfo",{}),__publicField(this,"isLevel",!0),__publicField(this,"itemState",0),__publicField(this,"cateId"),__publicField(this,"inGameView"),__publicField(this,"isExchange",!1);const{width:n,height:a}=e.cameras.main;this.name="StoreDialog",this.flowerItems=[];let r=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();r.setOrigin(0,0),r.setAlpha(.75),this.add(r);let o=e.add.container(0,90),l=e.add.image(0,0,"store","line_04.png").setDisplaySize(1050,10),h=e.add.image(-340,140,"store","4-28.tab_frame_framepanel_ accomplish2.png"),d=e.add.image(-340,140).setScale(1.3),c=e.add.text(-250,220,"",{color:"#6132a1",fontSize:"22px",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,0);const u=e.add.text(-160,35,"",{color:"#dc1935",fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",align:"center"}),p=e.add.text(-160,35,"(",{color:"#dc1935",fontSize:"22px",fontFamily:"SPIEGEL-REGULAR"}).setVisible(!1),g=e.add.text(-160,35,"",{color:"#dc1935",fontSize:"22px",fontFamily:"SPIEGEL-REGULAR"}).setVisible(!1),m=e.add.text(-160,35,")",{color:"#dc1935",fontSize:"22px",fontFamily:"SPIEGEL-REGULAR"}).setVisible(!1),f=GeneralRtl.rtlText(e,-160,105,"",{fontSize:"22px",fontFamily:"SPIEGEL-REGULAR",color:"#9e7ec4",wordWrap:{width:650,useAdvancedWrap:!0},lineSpacing:4,padding:{top:4}}).setOrigin(0,0),v=e.add.container(150,255),b=e.add.text(230,0,"",{fontSize:"18px",fontFamily:"SPIEGEL-REGULAR",color:"#9e7ec4"}),y=e.add.image(0,50,"store","2-28.btn_reduce.png").setInteractive().on("pointerdown",(()=>{this.isLevel&&this.updateExchange(-1)})),C=e.add.container(90,50),x=e.add.image(0,0,"store","2-28.btn_numeric value.png"),S=e.add.text(0,0,this.exchangeNum,{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,.5);C.add([x,S]);const w=e.add.image(180,50,"store","2-28.btn_increase.png").setInteractive().on("pointerdown",(()=>{this.isLevel&&this.updateExchange(1)})),T=e.add.container(280,50),P=e.add.image(0,0,"store","2-27.btn_max_frame.png").setInteractive().on("pointerdown",(()=>{this.isLevel&&this.updateExchange(this.maxExchange-this.exchangeNum)})),_=e.add.text(0,0,instance.t("Event_5_C2_Pandora_83"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5);T.add([P,_]),v.add([b,y,C,w,T]);let M=e.add.image(0,345,"store","line_01.png").setDisplaySize(1050,10).setVisible(!1);const O=e.add.text(295,370,"",{fontSize:"18px",fontFamily:"SPIEGEL-REGULAR",color:"#9e7ec4",align:"right"}).setOrigin(.5,.5).setVisible(!1),k=e.add.image(295,420,"store","2-17.btn_confirm.png").setOrigin(.5).setInteractive().on("pointerdown",(()=>{this.onExchange()})),$=e.add.container(295,420),G=e.add.image(-30,0,"store","icon_Ellipse5_yellow.png"),E=e.add.text(15,0,0,{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5),V=e.add.text(0,0,instance.t("Event_5_C2_Pandora_109"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5).setVisible(!1);$.add([G,E,V]);const R=e.add.image(500,-105,"common-atlas","btn_close2.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-40,-40,90,90),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{this.closeDialog()})).setDepth(this.basedepth+2);let I=e.add.container(140,410);const A=e.add.text(0,0,instance.t("Event_5_C2_Pandora_85"),{fontSize:"20px",fill:"#6132A1",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,0),D=e.add.text(A.x+A.displayWidth,0,"",{fontSize:"20px",fill:"#6132A1",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,0);I.add([A,D]),I.setVisible(!1);let B=e.add.container(0,0);const L=t=>{B.removeAll(!0),B.setPosition(-300,$.y-30*t.length/2+16),this.flowerItems=t,t.forEach(((t,i)=>{var s,n,a,r;let o={key:"",frame:""};o="3"===String(null==t?void 0:t.itemId).charAt(0)?{key:null==(s=ItemIconGetter.getFlowerPropIcon(t.icon))?void 0:s.key,frame:null==(n=ItemIconGetter.getFlowerPropIcon(t.icon))?void 0:n.frame}:{key:null==(a=ItemIconGetter.getItemPropIcon(t.icon))?void 0:a.key,frame:null==(r=ItemIconGetter.getItemPropIcon(t.icon))?void 0:r.frame};const l=e.add.image(0,30*i,o.key,o.frame).setOrigin(0,.5),h=e.add.text(50,30*i,t.name,{fontSize:"20px",fill:"#6132A1",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,.5).setData({isNameText:!0}),d=e.add.text(400,30*i,t.progress,{fontSize:"20px",fill:"#605aaa",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,.5),c=e.add.text(d.x+d.displayWidth,30*i,"/"+t.needNum*this.exchangeNum,{fontSize:"20px",fill:"#6132A1",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,.5).setData({isNeedNumText:!0,flowerData:t,currentNumText:d});t.needNum*this.exchangeNum>t.progress?(c.setFill("#DC1935"),h.setFill("#DC1935")):(c.setFill("#6132A1"),h.setFill("#6132A1"));const u=e.add.graphics();u.lineStyle(2,8421504,.5),u.beginPath(),u.moveTo(h.x+h.displayWidth+10,h.y),u.lineTo(d.x-10,d.y),u.strokePath(),B.add([l,h,c,d,u])}))};let F=e.add.container(0,0);const j=t=>{F.removeAll(!0),F.setPosition(-400,$.y-30*t.length/2+16),this.flowerItems=t,t.forEach(((t,i)=>{const s=e.add.text(50,30*i,t.name,{fontSize:"20px",fill:"#6132A1",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,.5),n=e.add.text(400,30*i,t.value,{fontSize:"20px",fill:"#6132A1",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(0,.5),a=e.add.graphics();a.lineStyle(2,8421504,.5),a.beginPath(),a.moveTo(s.x+s.displayWidth+10,s.y),a.lineTo(n.x-10,n.y),a.strokePath(),F.add([s,n,a])}))};o.add([l,h,d,c,u,p,g,m,f,v,M,O,k,$,R,B,F,I]),o.setDepth(this.basedepth+1),this.updateNumberDisplay=()=>{var e;this.exchangeNum=Phaser.Math.Clamp(this.exchangeNum,1,this.maxExchange),console.log("updateNumberDisplay: "+this.exchangeNum),S.setText(this.exchangeNum.toString()),B&&B.each((e=>{if("Text"===e.type&&e.getData("isNeedNumText")){const t=e.getData("flowerData"),i=e.getData("currentNumText");i.setText(t.progress),e.setText("/"+t.needNum*this.exchangeNum),t.needNum*this.exchangeNum>t.progress?(e.setFill("#DC1935"),i.setFill("#DC1935")):(e.setFill("#6132A1"),i.setFill("#605aaa"))}})),y.setAlpha(this.exchangeNum>1?1:.5),w.setAlpha(this.exchangeNum<this.maxExchange?1:.5),1==this.shopData.leftLimitNum||0==this.shopData.leftLimitNum||0==(null==(e=this.shopData)?void 0:e.unlockedStatus)?P.setTexture("store","btn_max_not frame.png"):P.setTexture("store","2-27.btn_max_frame.png")},this.updateExchange=(t,i=0)=>{var s,n,a,r;if(1==this.shopData.leftLimitNum||0==this.shopData.leftLimitNum||0==(null==(s=this.shopData)?void 0:s.unlockedStatus))return;0==i&&(null==(n=e.game.AudioSetUp)||n.play("stroeNumAudio"));const o=this.exchangeNum+t;if(o>=1&&o<=this.maxExchange&&(this.exchangeNum=o,this.updateNumberDisplay(),2===this.itemState&&this.exchangeList.length&&(this.exchangeList.some((e=>e.needNum*this.exchangeNum>e.progress))?(k.setTexture("store","2-26.btn_not accomplish3.png"),B&&B.each((e=>{"Text"===e.type&&e.getData("isNeedNumText")&&e.setFill("#DC1935"),"Text"===e.type&&e.getData("isNameText")&&e.setFill("#DC1935")}))):(k.setTexture("store","2-17.btn_confirm.png"),B&&B.each((e=>{"Text"===e.type&&e.getData("isNeedNumText")&&e.setFill("#6132A1"),"Text"===e.type&&e.getData("isNameText")&&e.setFill("#6132A1")})))),1===this.itemState&&this.exchangeList.length)){const t=this.exchangeList[0].itemNum*o;E.setText(NumberFormatter.format(t)),t>((null==(r=null==(a=e.game.GameData.userAssets)?void 0:a[this.exchangeList[0].itemId])?void 0:r.iAmount)||0)?k.setTexture("store","2-26.btn_not accomplish3.png"):k.setTexture("store","2-17.btn_confirm.png")}},this.dialogTitleText=e.add.text(0,0,"",{fontSize:"30px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(.5).setDepth(this.basedepth+2),this.dialog=e.rexUI.add.dialog({x:n/2,y:a/2,width:1158,height:750,background:e.add.image(0,0,"pop_small"),title:e.rexUI.add.label({width:800,text:this.dialogTitleText,align:"center",space:{top:130}}),content:o,space:{title:30,left:40,right:40},align:{title:"center",content:"center"}}).layout(),this.add([this.dialog]);const N=()=>{var t,i,s,n,a;G.setVisible(!1),E.setVisible(!1),V.setVisible(!1),O.setVisible(!1),console.log("----------",this.shopData);const{cateId:r,proDesc:o,leftNum:l=-1,iUnlockLevel:h,buyInfo:v,sName:y,sIcon:C,gainInfo:x,dependMissionName:S,unlockedStatus:w,leftLimitNum:T}=this.shopData;this.dialogTitleText.setText(y),f.setText(o);const P=-1!=T?T:99;if(this.maxExchange=0==w?1:this.maxNum(T,v),1==r?f.setPosition(-160,70):f.setPosition(-160,35),1==r)if(b.setVisible(!1),u.setText(`${instance.t("Event_5_C2_Pandora_79")} ${instance.t("Event_5_C2_Pandora_121")}${h}`),h>(null==(t=this.scene.game.GameData.userInfo)?void 0:t.iLevel)?(g.setText(`${instance.t("Event_5_C2_Pandora_80")} ${instance.t("Event_5_C2_Pandora_121")}${this.scene.game.GameData.userInfo.iLevel}`),p.setPosition(u.x+u.displayWidth+8,33),g.setPosition(p.x+8,35),m.setPosition(g.x+g.displayWidth+2,33),p.setVisible(!0),g.setVisible(!0),m.setVisible(!0),u.setFill("#dc1935"),this.isLevel=!1):(this.isLevel=!0,g.setVisible(!1),p.setVisible(!1),m.setVisible(!1),u.setFill("#9e56f9")),B.setVisible(!1),0==w)I.setVisible(!0),F.setVisible(!1),D.setText(S),I.setPosition(140-A.displayWidth-D.displayWidth,410);else{F.setVisible(!0),I.setVisible(!1);let e=Math.floor(x.growDuration/60),t=instance.t("Event_5_C2_Pandora_107");t=t.replace("{0}",e);let i=instance.t("Event_5_C2_Pandora_108");i=i.replace("{0}",x.expValue);const s=[{name:instance.t("Event_5_C2_Pandora_105"),value:t},{name:instance.t("Event_5_C2_Pandora_106"),value:i}];j(s)}else b.setVisible(!0),b.setText(instance.t("Event_5_C2_Pandora_82",{num:P})),B.setVisible(!0),F.setVisible(!1),I.setVisible(!1);if(1==r){const{key:e,frame:t}=ItemIconGetter.getShopCropIcon(C);d.setTexture(e,t)}else if(2==r){const{key:e,frame:t}=ItemIconGetter.getShopIcon(C);d.setTexture(e,t)}else{const{key:e,frame:t}=ItemIconGetter.getItemPropIcon(C);d.setTexture(e,t)}if(c.setText(null==x?void 0:x.itemNum),c.setPosition(-250-c.displayWidth/2,220),this.updateNumberDisplay(),1!==v.length||"1000001"!=v[0].itemId&&"1000002"!=v[0].itemId){this.itemState=2,G.setVisible(!1),E.setVisible(!1),V.setVisible(!0);const t=v.map((t=>{var i,s;const n=e.game.GameData.gameItemSeetings[t.itemId],a=(null==(s=null==(i=e.game.GameData.userAssets)?void 0:i[t.itemId])?void 0:s.iAmount)||0;return{name:t.itemName,progress:a,icon:n.sIcoPath,needNum:Number(t.itemNum),itemId:t.itemId,itemNum:t.itemNum}}));t.every((e=>e.progress>=e.needNum))&&0!=T&&0!=w?k.setTexture("store","2-17.btn_confirm.png"):k.setTexture("store","2-26.btn_not accomplish3.png"),this.exchangeList=t,t&&t.length>0?(M.setVisible(!0),L(t)):M.setVisible(!1)}else{this.itemState=1,this.exchangeList=v,G.setVisible(!0),E.setVisible(!0),O.setVisible(!0),V.setVisible(!1);const{key:t}=ItemIconGetter.getItemPropIcon(this.scene.game.GameData.gameItemSeetings[v[0].itemId].sIcoPath);let r="";r="1000001"==v[0].itemId?"icon_09.png":"icon_14.png",G.setTexture(t,r),O.setText(instance.t("Event_5_C2_Pandora_84",{num:(null==(s=null==(i=e.game.GameData.userAssets)?void 0:i[v[0].itemId])?void 0:s.iAmount)||0}));const o=Number(null==v?void 0:v[0].itemNum)*this.exchangeNum;E.setText(NumberFormatter.format(o)),this.isLevel&&(null==(a=null==(n=e.game.GameData.userAssets)?void 0:n[v[0].itemId])?void 0:a.iAmount)>=v[0].itemNum&&0!=T&&0!=w?k.setTexture("store","2-17.btn_confirm.png"):k.setTexture("store","2-26.btn_not accomplish3.png")}};this.maxNum=(t,i)=>{const s=-1!=t?t:99,n=[];i.map((t=>{var i,s;const a=(null==(s=null==(i=e.game.GameData.userAssets)?void 0:i[t.itemId])?void 0:s.iAmount)||0,r=Math.floor(Number(a)/Number(t.itemNum));n.push(r)}));const a=Math.min(...n);return Math.min(a,s)},this.onExchange=()=>{var t,i,s,n;(null==(t=this.shopData)?void 0:t.iUnlockLevel)>this.scene.game.GameData.userInfo.iLevel||(null==(i=e.game.AudioSetUp)||i.play("openShovelAudio"),0!=(null==(s=this.shopData)?void 0:s.leftLimitNum)&&0!=(null==(n=this.shopData)?void 0:n.unlockedStatus)&&(this.isExchange||"2-26.btn_not accomplish3.png"!=k.frame.name&&(e.time.delayedCall(GameConfig.Data.delayTime,(()=>{this.isExchange=!1})),this.isExchange=!0,e.game.GameApi.exchangeItem(this.shopData.commodityId,this.exchangeNum).then((t=>{console.log("",t);const{assetsNotify:i}=t.jData;if(i.length){const t=null==i?void 0:i.filter((e=>"1"==e.itemIncr));setTimeout((()=>{e.game.RewardPopup.show(t,"store",this.shopData.cateId)}),150),i.map((t=>{e.game.GameData.setUserAssets(t,t.itemCount,t.itemId)}))}this.isExchange=!1,e.game.allInterface.storeInterface(this.shopData.cateId,"exchange"),this.closeDialog(),e.events.emit("exchange-refresh-list",{item:this.shopData,exchangeNum:this.exchangeNum})})).catch((t=>{if(console.error("",t),this.isExchange=!1,10002409==t.ret)this.inGameView||(this.inGameView=new InGameDialog(e)),this.inGameView.openDialog();else if(10002405!=t.ret){const i=t.msg.match(/\n([^\n]+)\n/),s=i?i[1]:t.msg;e.game.Tips.show(s,3e3,"short")}})))))},this.openDialog=t=>{this.setVisible(!0),this.shopData=t,this.dialog.setScale(.8).setVisible(!0).setAlpha(0),e.tweens.add({targets:this.dialog,scale:1,alpha:1,duration:300,ease:"Back.Out"}),t.guide?this.exchangeNum=3:this.exchangeNum=1,S.setText(0),this.dialog.setInteractive(),N(t.commodityId),1!=t.cateId?(this.isLevel=!0,u.setVisible(!1),g.setVisible(!1),p.setVisible(!1),m.setVisible(!1)):u.setVisible(!0)},this.closeDialog=()=>{var t;null==(t=e.game.AudioSetUp)||t.play("bagCloseAudio"),e.tweens.add({targets:this.dialog,scale:.8,alpha:0,duration:200,ease:"Back.In",onComplete:()=>{this.setVisible(!1),B.removeAll(!0)}}),this.dialog.disableInteractive()},EventBus.on("guide_step",(e=>{26==e.step&&this.onExchange(),53==e.step&&this.onExchange()})),this.onResize=(e,t)=>{var i,s,n,a;null==(i=null==r?void 0:r.setDisplaySize)||i.call(r,e,t),null==(n=null==(s=this.dialog)?void 0:s.setPosition)||n.call(s,e/2,t/2),null==(a=this.inGameView)||a.onResize(e,t)},this.setDepth(this.basedepth),this.setVisible(!1)}}class DeepEqualConpare{static deepEqual(e,t){return!(!e||!t)&&e.length===t.length&&(JSON.stringify(e)===JSON.stringify(t)||e.every(((e,i)=>e==t[i])))}}class ShopView extends Page{constructor(e,t){var i,s,n,a,r,o,l;super(e,t),__publicField(this,"uiKey","StoreView"),__publicField(this,"storeDialog"),__publicField(this,"basedepth",500),__publicField(this,"categoryInfo",[]),__publicField(this,"levelOne",0),__publicField(this,"levelTwo",0),__publicField(this,"cateId",""),__publicField(this,"subCateId",""),__publicField(this,"tabLevelwoList",{}),__publicField(this,"shopDataCache",{});const{width:h,height:d}=e.cameras.main,c=(null==(n=null==(s=null==(i=e.game)?void 0:i.GameData)?void 0:s.settingInfo)?void 0:n.languageKey)||"en_US",u=(e={})=>{const{subCateInfo:t,sName:i}=e;if(null==t?void 0:t.length){const e=t.map(((e,t)=>(null==e?void 0:e.sName)?"ru_RU"==c&&1==this.cateId?{x:190*t,text:`${null==e?void 0:e.sName}`,normalObjsIcon:"tab2_frame_not select.png",activeObjsIcon:"tab2_frame_select.png"}:{x:145*t,text:`${null==e?void 0:e.sName}`,normalObjsIcon:"tab2_frame_not select.png",activeObjsIcon:"tab2_frame_select.png"}:!(null==e?void 0:e.iNameId)&&(null==e?void 0:e.sIcon)?{x:145*t,text:null==e?void 0:e.sIcon,normalObjsIcon:"tab2_frame_not select.png",activeObjsIcon:"tab2_frame_select.png"}:void 0));"ru_RU"==c&&1==this.cateId?this.tabLevelwoList={x:450-190*((null==t?void 0:t.length)-1),y:0,title:i,butList:e}:this.tabLevelwoList={x:480-145*((null==t?void 0:t.length)-1),y:0,title:i,butList:e}}else this.tabLevelwoList={title:i}};this.getGameShopSummary=()=>{var t,i;const s=((null==(i=null==(t=e.game.GameData.infoData)?void 0:t.shop)?void 0:i.seeds)||[]).some((e=>Boolean(e.yellowDot)));this.shopSummary.setAlpha(s?1:0)};const p=e=>{const t=e.map((e=>({...e,cateId:this.cateId})));this.fillItems(t)},g=t=>{if(1==this.subCateId)p(t);else if(2==this.subCateId){const i=t.filter((t=>1==(null==t?void 0:t.unlockedStatus)&&(null==t?void 0:t.iUnlockLevel)<=e.game.GameData.userInfo.iLevel));p(i)}else if(3==this.subCateId)p(t);else if(4==this.subCateId){const e=t.filter((e=>4==(null==e?void 0:e.iShopSubPageId)));p(e)}else if(5==this.subCateId){const e=t.filter((e=>5==(null==e?void 0:e.iShopSubPageId)));p(e)}else if(7==this.subCateId){const e=t.filter((e=>7==(null==e?void 0:e.iShopSubPageId)));p(e)}else if(8==this.subCateId){const e=t.filter((e=>8==(null==e?void 0:e.iShopSubPageId)));p(e)}else if(9==this.subCateId){const e=t.filter((e=>9==(null==e?void 0:e.iShopSubPageId)));p(e)}else 10==this.subCateId&&p(t)},m=()=>{var t,i,s,n,a,r;let o=null;this.getGameShopSummary(),1==this.cateId?(o=null==(i=null==(t=e.game.GameData.infoData)?void 0:t.shop)?void 0:i.seeds,o&&g(o)):2==this.cateId?(o=null==(n=null==(s=e.game.GameData.infoData)?void 0:s.shop)?void 0:n.builds,o&&g(o)):3==this.cateId&&(o=null==(r=null==(a=e.game.GameData.infoData)?void 0:a.shop)?void 0:r.gameItems,o&&g(o))};e.events.on("exchange_success",(()=>m())),e.events.on("exchange-refresh-list",(t=>{var i,s,n,a,r,o,l,h,d,c,u,p;const{item:g,exchangeNum:f}=t;if(-1!=g.leftNum){if(2==g.cateId&&(null==(s=null==(i=e.game.GameData.infoData)?void 0:i.shop)?void 0:s.builds)){const t=null==(r=null==(a=null==(n=e.game.GameData.infoData)?void 0:n.shop)?void 0:a.builds)?void 0:r.findIndex((e=>e.commodityId==g.commodityId));e.game.GameData.infoData.shop.builds[t].leftNum=e.game.GameData.infoData.shop.builds[t].leftNum-f,0==e.game.GameData.infoData.shop.builds[t].leftNum&&e.game.GameData.infoData.shop.builds.sort(((e,t)=>0==e.leftNum?1:0==t.leftNum?-1:void 0)),m()}if(3==g.cateId&&(null==(l=null==(o=e.game.GameData.infoData)?void 0:o.shop)?void 0:l.gameItems)){const t=null==(c=null==(d=null==(h=e.game.GameData.infoData)?void 0:h.shop)?void 0:d.gameItems)?void 0:c.findIndex((e=>e.commodityId==g.commodityId));e.game.GameData.infoData.shop.gameItems[t].leftNum=e.game.GameData.infoData.shop.gameItems[t].leftNum-f*Number((null==(p=null==(u=e.game.GameData.infoData.shop.gameItems[t])?void 0:u.gainInfo)?void 0:p.itemNum)||1),e.game.GameData.infoData.shop.gameItems[t].leftLimitNum=e.game.GameData.infoData.shop.gameItems[t].leftLimitNum-f,0==e.game.GameData.infoData.shop.gameItems[t].leftNum&&e.game.GameData.infoData.shop.gameItems.sort(((e,t)=>0==e.leftNum?1:0==t.leftNum?-1:void 0)),m()}}})),this.getStoreCategories=()=>{var t,i,s,n,a,r;if(null==(t=e.game.GameData.infoData)?void 0:t.category){const t=null==(i=e.game.GameData.infoData)?void 0:i.category;return this.categoryInfo=t,this.cateId=null==(s=null==t?void 0:t[this.levelOne])?void 0:s.iId,e.currentShopTab=this.cateId,e.setCurrencyNav(),this.subCateId=null==(r=null==(a=null==(n=null==t?void 0:t[this.levelOne])?void 0:n.subCateInfo)?void 0:a[this.levelTwo])?void 0:r.iId,u(null==t?void 0:t[this.levelOne]),m(),void this.levelTwoTab()}e.game.GameApi.getStoreCategories().then((t=>{var i,s,n,a;console.log("tab",t);const{categoryInfo:r}=t.jData;this.categoryInfo=r,this.cateId=null==(i=null==r?void 0:r[this.levelOne])?void 0:i.iId,e.currentShopTab=this.cateId,e.setCurrencyNav(),this.subCateId=null==(a=null==(n=null==(s=null==r?void 0:r[this.levelOne])?void 0:s.subCateInfo)?void 0:n[this.levelTwo])?void 0:a.iId,u(null==r?void 0:r[this.levelOne]),m(),this.levelTwoTab()}))};let f=null;this.storeDialog=new StoreDialog(this.scene);let v=e.add.image(h/2,d/2,"store_bg");v.setInteractive().setDepth(this.basedepth),this.add(v);const b=(t,i,s,n)=>{let a,r=e.add.container(t,i),o=e.add.image(0,0,"store",n);return s.includes("png")?a=e.add.image(0,0,"store",s).setOrigin(.5):(a=e.add.text(0,0,s,{fontSize:"22px",color:"#fffcf5",fontFamily:"BeaufortforLOL-Bold"}).setOrigin(.5),a.setFontSize(22),"ru_RU"==c&&1==this.cateId?o.setScale(1.4,1):(o.setScale(1,1),a.displayWidth>o.displayWidth-20?StringFormatter.shrinkText(a,22,o.displayWidth-20,10):a.setFontSize(22))),r.setSize(o.displayWidth,o.displayHeight),r.add([o,a]),r};this.spawnObject=(t,i,s,n)=>{let a=new t(e);a.x=s,a.y=n,i.add(a)};let y=e.add.container(0,0),C=e.add.text(h/2-600,e.cameras.main.height/2-330,instance.t("Event_5_C2_Pandora_18"),{fontSize:"32px",fontFamily:"BeaufortforLOL-Bold",fill:"#f9e0b4"}).setOrigin(0,0);C.setDepth(this.basedepth+10);const x=e.add.image(C.x+C.displayWidth+20,e.cameras.main.height/2-325,"store","line_title.png").setOrigin(0,0).setDepth(this.basedepth+10);let S=e.add.image(h/2+600,e.cameras.main.height/2-315,"store","btn_close.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-20,-20,80,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0});S.on("pointerdown",(()=>{var t;null==(t=e.game.AudioSetUp)||t.play("bagCloseAudio"),this.slideOut()})),S.setDepth(this.basedepth+10),this.shopSummary=e.add.image(h/2-628,d/2-210,"icon_dots").setDepth(this.basedepth+10).setAlpha(0);const w=e=>{0==e?this.shopSummary.setPosition(h/2-628,d/2-210):this.shopSummary.setPosition(h/2-612,d/2-187)},T=e.add.image(h/2+45,e.cameras.main.height/2+341,"store","frame_mask2.png").setDepth(this.basedepth+3);let P=e.add.container(h/2-587,e.cameras.main.height/2-240);const _=new TabGroup(e,0,0,[{normalObjs:[e.add.image(0,25,"store","tab_seeds_not select.png").setOrigin(.5,0)],activeObjs:[e.add.image(0,0,"store","tab_seeds_select.png").setOrigin(.5,0)]},{normalObjs:[e.add.image(0,150,"store","tab__head sculpture_not select.png").setOrigin(.5,0)],activeObjs:[e.add.image(1,145,"store","tab__head sculpture_select.png").setOrigin(.5,0)]},{normalObjs:[e.add.image(0,285,"store","tab__group_not select.png").setOrigin(.5,0)],activeObjs:[e.add.image(0,275,"store","tab_group_select.png").setOrigin(.5,0)]}],this.levelOne,P,(t=>{var i,s,n,a,r,o,l,h;console.log("select tab",t),this.levelOne!==t&&(null==(i=e.game.AudioSetUp)||i.play("bagTabAudio"),this.levelOne=t,f.getElement("header").removeAll(!0),this.levelTwo=0,this.cateId=null==(n=null==(s=this.categoryInfo)?void 0:s[t])?void 0:n.iId,e.currentShopTab=this.cateId,e.setCurrencyNav(),this.subCateId=null==(l=null==(o=null==(r=null==(a=this.categoryInfo)?void 0:a[t])?void 0:r.subCateInfo)?void 0:o[0])?void 0:l.iId,u(null==(h=this.categoryInfo)?void 0:h[t]),this.levelTwoTab(),m(),f.scrollToTop(),w(t))}));P.setDepth(this.basedepth+2);const M=e.add.group({classType:ShopItem,maxSize:-1,runChildUpdate:!1});f=e.rexUI.add.gridTable({x:h/2+45,y:d/2+70,width:1172,height:684,scrollMode:0,header:e.add.container(0,0),background:e.add.image(0,0,"store","tab_frame_framepanel.png"),table:{cellWidth:228,cellHeight:300,columns:5,mask:{padding:0},reuseCellContainer:!0},mouseWheelScroller:{focus:!1,speed:.1},space:{left:10,right:0,top:80,bottom:0,table:{top:0,bottom:50,left:0,right:0},header:0,footer:0},createCellContainerCallback:function(e,t){e.scene,e.width,e.height;var i=e.item;return e.index,null===t&&(t=M.get()),t.setDepth(502),t.updateData(i),t.setActive(!0),t.setVisible(!0),t},items:[]}).layout().setDepth(this.basedepth+1),f.setVisible(!1),f.on("cell.click",(function(t,i,s){var n;console.log("pointer-click "+i+": "+t.userData);const{unlockedStatus:a,leftNum:r,yellowDot:o,commodityId:l}=t.userData;null==(n=e.game.AudioSetUp)||n.play("bagItemAudio"),1!=this.cateId?0!=r&&this.storeDialog.openDialog(t.userData):(0==a||1==a&&0!=r)&&this.storeDialog.openDialog(t.userData),o&&e.game.GameApi.getClickSeedDot(l)}),this);const O=f.getElement("header");O.setDepth(this.basedepth+2),f.on("scroll",(function(e){e.t>1&&f.setT(1)})),this.fillItems=e=>{f.setItems(e)},this.levelTwoTab=()=>{var t;const i=3==this.cateId?20:80;if(f.setInnerPadding({top:i}),3==this.cateId)return void f.layout();f.layout();const s=this.tabLevelwoList;let n=[];null==(t=null==s?void 0:s.butList)||t.forEach(((e,t)=>{let i=[b(e.x,0,e.text,e.normalObjsIcon)],s=[b(e.x,0,e.text,e.activeObjsIcon)];n.push({normalObjs:i,activeObjs:s})})),new TabGroup(e,s.x,s.y-36,n,this.levelTwo,O,(t=>{var i;this.levelTwo!==t&&(null==(i=e.game.AudioSetUp)||i.play("goHomeAudio"),f.scrollToTop(),this.levelTwo=t,this.subCateId=this.categoryInfo[this.levelOne].subCateInfo[t].iId,m())}));const a=e.add.text(-GameConfig.Screen.width/2+115,-52,s.title,{fontFamily:"BeaufortforLOL-Bold",fontSize:"30px",fill:"#504d99"}).setVisible(!1);O.add(a)},this.slideIn=t=>{e.tweens.add({targets:this,y:e.cameras.main.height/2+50,delay:300,loop:0,duration:10,ease:"Power2"}).play(),f&&(f.setVisible(!0),f.setSliderEnable(!0),f.setScrollerEnable(!0),f.setMouseWheelScrollerEnable(!0),(t||0==t)&&(this.levelOne=t,w(t),this.levelTwo=0,_.switchTab(_.tabs[t])),this.getStoreCategories()),this.show()},this.slideOut=()=>{e.tweens.add({targets:this,y:e.cameras.main.height+f.displayHeight,duration:200,ease:"Power2",onComplete:()=>{f.setSliderEnable(!1),f.setScrollerEnable(!1),f.setMouseWheelScrollerEnable(!1),f.getElement("header").removeAll(!0),f.getElement("background").setVisible(!1),f.scrollToTop(),f.setVisible(!1),e.events.emit("close_view",{viewName:this.uiKey}),this.shopDataCache={},this.hide()}}).play()},this.addMultiple([y,S,P,T,C,x,this.shopSummary]);const k=()=>{var t,i,s,n;null==(t=e.game.AudioSetUp)||t.play("bagItemAudio");const a=null==(n=null==(s=null==(i=e.game.GameData.infoData)?void 0:i.shop)?void 0:s.seeds)?void 0:n[0];a.cateId=1,a.guide=!0,this.storeDialog.openDialog(a)},$=()=>{var t,i,s,n,a,r,o,l;null==(t=e.game.AudioSetUp)||t.play("bagTabAudio"),this.levelOne=1,f.getElement("header").removeAll(!0),this.levelTwo=0,this.cateId=null==(s=null==(i=this.categoryInfo)?void 0:i[1])?void 0:s.iId,e.currentShopTab=this.cateId,e.setCurrencyNav(),this.subCateId=null==(o=null==(r=null==(a=null==(n=this.categoryInfo)?void 0:n[1])?void 0:a.subCateInfo)?void 0:r[0])?void 0:o.iId,u(null==(l=this.categoryInfo)?void 0:l[1]),this.levelTwoTab(),m(),_.switchTab(_.tabs[1])};if(EventBus.on("guide_step",(t=>{var i,s,n,a;if(25==t.step&&k(),51==t.step&&$(),52==t.step){null==(i=e.game.AudioSetUp)||i.play("bagItemAudio");const t=null==(a=null==(n=null==(s=e.game.GameData.infoData)?void 0:s.shop)?void 0:n.builds)?void 0:a[0];t.cateId=2,e.currentShopTab=this.cateId,e.setCurrencyNav(),this.storeDialog.openDialog(t)}})),25==e.currentStep&&k(),51==e.currentStep&&$(),52==e.currentStep){null==(a=e.game.AudioSetUp)||a.play("bagItemAudio");const t=null==(l=null==(o=null==(r=e.game.GameData.infoData)?void 0:r.shop)?void 0:o.builds)?void 0:l[0];t.cateId=2,e.currentShopTab=this.cateId,e.setCurrencyNav(),this.storeDialog.openDialog(t)}e.events.on("open-flower-bag",(e=>{null==f||f.setScrollerEnable(e.val||!1),null==f||f.setSliderEnable(e.val||!1),null==f||f.setMouseWheelScrollerEnable(e.val||!1)})),this.onResize=(e,t)=>{var i;null==v||v.setPosition(e/2,t/2),null==f||f.setPosition(e/2+45,t/2+80),null==S||S.setPosition(e/2+600,t/2-315),null==C||C.setPosition(e/2-600,t/2-330),null==x||x.setPosition(e/2-390,t/2-310),null==T||T.setPosition(e/2+45,v.y+341),null==P||P.setPosition(e/2-587,t/2-240),null==(i=this.storeDialog)||i.onResize(e,t),0==this.levelOne?this.shopSummary.setPosition(e/2-628,t/2-210):this.shopSummary.setPosition(e/2-612,t/2-187)},this.setVisible(!1)}}class RewardPopup extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"onClosePop",(()=>{})),__publicField(this,"popupSpine");const{width:n,height:a}=e.cameras.main;let r=this;const o=e.add.rectangle(0,0,n,a,0).setInteractive().setOrigin(0,0);o.setAlpha(.75),this.popupSpine=e.add.spine(n/2,a/2,"popup-data","popup-atlas"),this.popupSpine.setScale(1);const l=e.add.text(n/2,a/2-280,instance.t("Event_5_C2_Pandora_36"),{fontSize:"36px",fontFamily:"BeaufortforLOL-Bold",color:"#f9e0b4"});l.setPosition(n/2-l.displayWidth/2,a/2-280);const h=e.add.text(n/2,a/2+250,instance.t("Event_5_C2_Pandora_37"),{fontSize:"22px",fontFamily:"SPIEGEL-BOLD",color:"#a09f8c"});h.setPosition(n/2-h.displayWidth/2,a/2+250),this.rewardContainer=e.add.container(n/2,a/2),this.add([o,this.popupSpine,l,h,this.rewardContainer]),this.setDepth(9997),e.children.bringToTop(this),o.on("pointerdown",(()=>{var t;r.onClosePop(),null==(t=e.game.AudioSetUp)||t.play("rewardCloseAudio"),this.hide()})),this.setVisible(!1);const d=()=>{this.popupSpine.animationState.setAnimation(0,"open",!1)};this.show=(t,i,s)=>{var n;if(t&&t.length){e.children.bringToTop(this),null==(n=e.game.AudioSetUp)||n.play("rewardAudio"),this.rewardContainer.removeAll(!0);const a=[];for(let e=0;e<t.length;e++){const n=t[e],r=this.createRewardItem(n,i,s);a.push(r),this.rewardContainer.add(r)}let r=-140*a.length/2+70;a.forEach(((e,t)=>{e.x=r+140*t,e.y=0})),e.tweens.add({targets:this,alpha:1,duration:500,ease:"Power2",onStart:()=>{this.setVisible(!0),d()}})}},this.createRewardItem=(t,i,s)=>{const n=e.add.container(0,0),a=e.add.image(0,0,"shop_reward_bg");n.add(a);let r={key:"",frame:""};if("store"==i)if(1==s)if("2"===String(null==t?void 0:t.itemId).charAt(0)){const{key:i,frame:s}=ItemIconGetter.getShopCropIcon(e.game.GameData.gameItemSeetings[t.itemId].sIcoPath);r={key:i,frame:s}}else if("3"===String(null==t?void 0:t.itemId).charAt(0)){const{key:i,frame:s}=ItemIconGetter.getCropSeedIcon(e.game.GameData.gameItemSeetings[t.itemId].sIcoPath);r={key:i,frame:s}}else if("9"===String(null==t?void 0:t.itemId).charAt(0)){const{key:i,frame:s}=ItemIconGetter.getSeedUnlockIcon(e.game.GameData.gameItemSeetings[t.itemId].sIcoPath);r={key:i,frame:s}}else{const{key:i,frame:s}=ItemIconGetter.getItemPropIcon(e.game.GameData.gameItemSeetings[t.itemId].sIcoPath);r={key:i,frame:s}}else if(2==s){const{key:i,frame:s}=ItemIconGetter.getShopIcon(e.game.GameData.gameItemSeetings[t.itemId].sIcoPath);r={key:i,frame:s}}else{const{key:i,frame:s}=ItemIconGetter.getItemPropIcon(e.game.GameData.gameItemSeetings[t.itemId].sIcoPath);r={key:i,frame:s}}if("1000000"==t.itemId){const t=e.add.image(0,0,"currency0");t.setScale(.8),n.add(t)}else if("1000001"==t.itemId){const t=e.add.image(0,0,"currency1");t.setScale(.8),n.add(t)}else if("1000002"==t.itemId){const t=e.add.image(0,0,"currency2");t.setScale(.8),n.add(t)}else{const t=e.add.image(0,0,r.key,r.frame);t.setScale(.8),n.add(t)}const o=e.add.text(0,26,t.itemCount,{fontFamily:"BeaufortforLOL-Bold",fontSize:"26px",color:"#9E7EC4"});return o.setPosition(a.displayWidth/2-o.displayWidth-10,26),n.add(o),n},this.hide=()=>{this.setVisible(!1)},this.onResize=(e,t)=>{var i,s;null==o||o.setDisplaySize(e,t),null==(i=this.popupSpine)||i.setPosition(e/2,t/2),null==l||l.setPosition(e/2-l.displayWidth/2,t/2-280),null==h||h.setPosition(e/2-h.displayWidth/2,t/2+250),null==(s=this.rewardContainer)||s.setPosition(e/2,t/2)}}}class UserInfoView extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"expBar"),__publicField(this,"expBgWidth"),__publicField(this,"gradeText"),__publicField(this,"expBarValObj",{width:0}),__publicField(this,"nickName",""),this.cropRect=new Phaser.Geom.Rectangle(0,0,0,0);let n=e.add.image(0,0,"plant","frame_game player.png"),a=this;this.setUserInfo=(t,i)=>{var s,n;const{nickName:r}=t;console.log("setUserInfo",t,i,this.scene.game.GameData.userAssets);const o=(null==(n=null==(s=this.scene.game.GameData.userAssets)?void 0:s[GameConfig.Data.Level.ExpItemId])?void 0:n.iAmount)||0,{iLevel:l,iNextLevelExp:h}=i||{};this.nickName=r,this.usernameText=e.add.text(-75,-25,instance.t("Event_5_C2_Pandora_14",{nickname:r}),{fontFamily:"BeaufortforLOL-Bold",fontSize:21,fill:"#fff2cf"}).setOrigin(0,.5),StringFormatter.shrinkText(this.usernameText,20,140,12);const d=e.add.text(-150,-45,instance.t("Event_5_C2_Pandora_121"),{fontFamily:"BeaufortforLOL-Bold",fontSize:18,fill:"#fff2cf"});this.levelText?this.levelText.setText(l):this.levelText=e.add.text(-112,-10,l,{fontFamily:"BeaufortforLOL-Bold",fontSize:32,fill:"#ffffff"}).setOrigin(.5,.5);const c=e.add.image(-65,0,"plant","icon_exp.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-20,-20,80,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{this.scene.game.propTips.show(3,"Event_5_C2_Pandora_185")})),u=e.add.container(60,0),p=e.add.image(-120,0,"plant","progress_experience_normal.png").setOrigin(0,.5);this.expBgWidth=p.displayWidth,this.expBar=e.add.image(-120,0,"plant","progress_experience_highlighter.png").setOrigin(0,.5),console.log("",o,h),this.expBarValObj.width=this.expBgWidth*Math.min(o/h,1),this.expBar.setCrop(0,0,this.expBarValObj.width,this.expBar.height),this.gradeText=e.add.text(0,0,`${o}/${h}`,{fontFamily:"BeaufortforLOL-Bold",fontSize:"16px",fill:"#FFFFFF"}).setOrigin(.5,.5),u.add([p,this.expBar,this.gradeText]),a.add([this.usernameText,d,this.levelText,c,u])},this.add([n]),e.add.existing(this),this.updateProgressBar=t=>{var i;const{curExp:s=0,nextLevelExp:n=0,curLevel:a}=t,r=this.scene.game.GameData.userInfo.iNextLevelExp;if(0===n)return this.expBar.setCrop(0,0,this.expBgWidth+12,this.expBar.height),void this.gradeText.setText(`${Math.floor(s)}/${n}`);if(this.scene.game.GameData.userInfo.iExp=s,this.cropRect.width=this.expBar.width,a>this.scene.game.GameData.userInfo.iLevel){const t=this.scene.game.GameData.userInfo.iLevel;this.scene.game.GameData.userInfo.iLevel=a,this.scene.game.GameData.userInfo.iNextLevelExp=n,0!=(null==(i=e.game.GameData.guideData)?void 0:i.isCompleted)&&e.events.emit("level-up-type"),this.scene.tweens.add({targets:this.expBarValObj,width:this.expBgWidth,duration:300,delay:800,ease:"Quad.easeOut",onUpdate:()=>{this.expBar.setCrop(0,0,this.expBarValObj.width,this.expBar.height)},onComplete:()=>{const i=Math.min(s/n,1);this.levelText.setText(`${a}`),this.expBarValObj.width=0,this.expBar.setCrop(0,0,this.expBarValObj.width,this.expBar.height),e.tweens.add({targets:this.expBarValObj,width:this.expBgWidth*Math.min(i,1),duration:300,ease:"Quad.easeOut",onUpdate:()=>{this.expBar.setCrop(0,0,this.expBarValObj.width,this.expBar.height)},onComplete:()=>{var i;0!=(null==(i=e.game.GameData.guideData)?void 0:i.isCompleted)&&EventBus.emit("user-level-up"),this.gradeText.setText(`${Math.floor(s)}/${n}`),e.events.emit("event-level-up",{oldLevel:t,level:a})}})}})}else{const t=Math.min(s/r,1);e.tweens.add({targets:this.expBarValObj,width:this.expBgWidth*t,duration:300,delay:800,ease:"Quad.easeOut",onUpdate:()=>{this.expBar.setCrop(0,0,this.expBarValObj.width,this.expBar.height)},onComplete:()=>{this.gradeText.setText(`${Math.floor(s)}/${n}`)}})}},this.updateUserName=e=>{this.usernameText&&(0==e?this.usernameText.setText(instance.t("Event_5_C2_Pandora_14",{nickname:this.nickName})):this.usernameText.setText(instance.t("Event_5_C2_Pandora_20",{nickname:this.nickName})))}}}class EntranceButton extends Phaser.GameObjects.Group{constructor(e,t,i,s="",n=""){super(e);let a=this;a.uiKey=n,t.add(this);let r=this.create(100,100,"common-atlas",i).setDepth(10),o=null;""!=s&&(o=e.add.text(0,0,s,{fontFamily:"BeaufortforLOL-Bold",fontSize:24,color:"#fffaed"}).setOrigin(.5,.5).setDepth(11),this.add(o)),this.setPosition=(e,t)=>(r.x=e,r.y=t,o&&(o.x=e,o.y=t+r.height/2+10),a),r.setInteractive(),r.on("pointerdown",(()=>{e.events.emit("open_view",{viewName:a.uiKey})})),this.updateData=(e,t,i,s)=>{r.setTexture(e,t),o&&o.setText(i),s&&(a.uiKey=s)},this.hide=()=>{r.setVisible(!1),o&&o.setVisible(!1)}}}class Operate extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"OnUpgradeClick",(()=>{})),__publicField(this,"OnRecycleClick",(()=>{})),__publicField(this,"OnConfirmClick",(()=>{}));let n=this,a=e.add.image(0,0,"house_edit"),r=e.add.image(-55,-10,"home-atlas","btn_dress up2.png"),o=e.add.image(55,-8,"plant","btn_select2.png"),l=e.add.image(-55,-10,"home-atlas","btn_dress up.png");r.setVisible(!1),l.setVisible(!1);const h=this.setVisible;n.setVisible=function(e){return h.call(n,e),n},r.setInteractive(),o.setInteractive(),l.setInteractive(),r.on("pointerdown",(()=>{n.OnUpgradeClick(),n.setVisible(!1)})),o.on("pointerdown",((e,t,i,s)=>{n.OnConfirmClick(),n.setVisible(!1)})),l.on("pointerdown",(()=>{var t;null==(t=e.game.AudioSetUp)||t.play("openShovelAudio"),n.OnRecycleClick(),n.setVisible(!1)})),n.showUpgradePanel=()=>{r.setVisible(!0),l.setVisible(!1)},n.showWithdrawPanel=()=>{l.setVisible(!0),r.setVisible(!1)},this.add([a,r,o,l]),this.setDepth(90),this.setVisible(!1)}}const animationsName={"1x1":"1_1","1x2":"2_1","2x1":"1_2","2x2":"2_2","2x3":"2_3","3x2":"3_2","3x3":"3_3","2x4":"2_4"},centerPoint={col:8,row:7};class HomeView extends Page{constructor(e,t,i){super(e,t,i),__publicField(this,"basedepth",0),__publicField(this,"operate",null),__publicField(this,"isDragging",!1),__publicField(this,"currentMode",1),__publicField(this,"currentItem"),__publicField(this,"serverBuildingList",[]),__publicField(this,"localBuildingList",[]),__publicField(this,"isGhostBuilding",!1),__publicField(this,"fenceObj"),__publicField(this,"isGridDraw",!1),__publicField(this,"startPointer"),__publicField(this,"isChange"),__publicField(this,"isBagSelect",!1),__publicField(this,"isOtherPanelOpen",!1),__publicField(this,"operateHome",!1),__publicField(this,"tempPutDownFlag",{isPutDown:!1,isBeginDrag:!1});const s=e.cameras.main.width,n=e.cameras.main.height;this.initUIElements(e,s,n),this.initBackgroundAndScaling(e,s,n),this.initGridSystem(e,s,n),this.initBuildingSystem(e),this.onEvents(),this.addMultiple([this.bg,this.cloud,this.gridVisual,this.buildingGroup,this.highlightGridVisual,this.buildOperateContainer,this.fence,this.house_but,this.placeObject,this.home_mask])}initUIElements(e,t,i){this.fence=e.add.image(t/2-10,i/2-4,"house_fence").setDepth(this.basedepth+158),this.house_but=e.add.image(t/2,i/2,"house_but").setDepth(this.basedepth+319),this.buildOperateContainer=e.add.container(t/2+580,i/2+130).setDepth(this.basedepth+350),this.home_mask=e.add.image(t/2,i/2,"house_mask").setDepth(this.basedepth+319);const s=e.add.image(0,0,"home-atlas","frame_edit2.png"),n=e.add.image(2,-52,"home-atlas","btn_close (2).png").setInteractive(),a=e.add.image(2,52,"home-atlas","btn_house.png").setInteractive(),r=e.add.text(55,150,instance.t("Event_5_C2_Pandora_86"),{fontFamily:"BeaufortforLOL-Bold",fontSize:"26px",fill:"#fff2cf"}).setOrigin(1,.5);this.buildOperateContainer.add([r,s,n,a]),this.buildOperateContainer.setVisible(!1),this.fenceObj=e.add.spine(t/2,i/2,"fence-data","fence-atlas").setVisible(!1),this.placeObject=e.add.image(0,0,"home-atlas","").setVisible(!1).setDepth(this.basedepth+1).setOrigin(.5,0),this.bindUIEvents(e,n,a),this.onResize=(e,t)=>{this.buildOperateContainer.setPosition(e/2+580,t/2+130),this.home_mask.setPosition(e/2,t/2)}}bindUIEvents(e,t,i){t.on("pointerdown",(()=>{var t,i;this.draggingObject||(null==(t=e.game.AudioSetUp)||t.play("plantCloseAudio"),this.cleanupTempBuilding(),(null==(i=this.localBuildingList)?void 0:i.length)&&this.isChange&&this.scene.game.GameApi.getHouseSave(this.localBuildingList).then((e=>{console.log("",e),this.scene.game.allInterface.getHouseShow()})),this.operate.setVisible(!1),this.scene.events.emit("home_construct",{value:1}),this.currentMode=1,this.exitBuilding())})),i.on("pointerdown",(()=>{var t;this.draggingObject||(null==(t=e.game.AudioSetUp)||t.play("openShovelAudio"),this.updateUsedBuildingData(this.localBuildingList),this.currentMode=2,console.log(""),this.isOtherPanelOpen=!0,this.tempPutDownFlag.isPutDown=!1,this.scene.events.emit("home_construct",{value:2,isGhostBuilding:this.isGhostBuilding}))}))}initGridSystem(e,t,i){this.grid=[],this.gridRow=16,this.gridCol=17,this.tileHeight=52,this.tileWidth=103;const s=this.bg.x,n=this.bg.y,a=this.currentScale,r=s+this.bgWidth*a/2,o=n+this.bgHeight*a/2,l=-24*a,h=-310*a;this.gridOriginX=r+l,this.gridOriginY=o+h,this.gridVisual=e.add.graphics().setDepth(this.basedepth+1),this.highlightGridVisual=e.add.graphics(),this.highlightGridVisual.visible=!1,this.initGrid()}initBuildingSystem(e){this.buildings=[],this.buildingGroup=e.add.group(),this.buildingConfigs=GameConfig.Data.Home,this.currentBuildingType="",this.currentBuildingConfig=null,this.draggingObject=null,this.draggingOffset={x:0,y:0},this.originalPosition=null,this.buildingPosition=null,this.currentTempBuilding=null,this.isChange=!1,this.currentMode=1,this.serverBuildingList=[],this.localBuildingList=[]}initBackgroundAndScaling(e,t,i){const s=e.textures.get("house_bg2"),n=s.source[0].width,a=s.source[0].height;this.bgWidth=n,this.bgHeight=a;const r=t/n,o=i/a,l=1.2*Math.max(r,o);this.baseScale=l,this.currentScale=l,this.minScale=l,this.maxScale=2.5*l,this.bg=e.add.image(0,0,"house_bg2").setOrigin(0,0).setDepth(this.basedepth),this.bg.setScale(l),this.cloud=e.add.image(0,0,"house_cloud").setOrigin(0,0).setDepth(this.basedepth+55),this.cloud.setScale(l),this.fence.setScale(l),this.house_but.setScale(l),this.bg.setPosition((t-n*l)/2,(i-a*l)/2),this.cloud.setPosition((t-n*l)/2,(i-a*l)/2),this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.bgStartX=0,this.bgStartY=0,this.activePointers=new Map,this.isPinching=!1,this.pinchStartDistance=0,this.pinchStartScale=this.currentScale,this.pinchCenter={x:t/2,y:i/2},this.minX=t-n*l,this.maxX=0,this.minY=i-a*l,this.maxY=0,this.setupDragEvents()}setupDragEvents(){this.scene.input.on("pointerdown",this.onBackgroundPointerDown,this),this.scene.input.on("pointermove",this.onBackgroundPointerMove,this),this.scene.input.on("pointerup",this.onBackgroundPointerUp,this),this.scene.input.on("wheel",this.onMouseWheel,this)}onBackgroundPointerDown(e){this.scene.game.gameState!==GameConfig.GameState.BUILDING&&(this.scene.input.manager.pointersTotal>1?this.handlePinchStart(e):(this.isDragging=!0,this.dragStartX=e.x,this.dragStartY=e.y,this.bgStartX=this.bg.x,this.bgStartY=this.bg.y))}onBackgroundPointerMove(e){if(this.scene.game.gameState!==GameConfig.GameState.BUILDING)if(this.scene.input.manager.pointersTotal>1)this.handlePinchMove(e);else if(this.isDragging){const t=e.x-this.dragStartX,i=e.y-this.dragStartY;let s=this.bgStartX+t,n=this.bgStartY+i;const a=this.constrainPositionToCoverScreen(s,n);this.bg.setPosition(a.x,a.y),this.cloud.setPosition(a.x,a.y),this.repositionAllBuildings()}}onBackgroundPointerUp(e){this.scene.game.gameState!==GameConfig.GameState.BUILDING&&(this.isDragging=!1,this.isPinching=!1,this.activePointers.clear())}onMouseWheel(e,t,i,s,n){if(!this.canPanZoom(e,t)&&!this.tempPutDownFlag.isPutDown)return;if(this.draggingObject)return;const a=.001*-s;let r=Phaser.Math.Clamp(this.currentScale*(1+a),this.minScale,this.maxScale);this.setScaleAroundPoint(e.x,e.y,r)}handlePinchStart(e){if(this.activePointers.set(e.id,e),this.activePointers.size>=2){this.isPinching=!0;const e=Array.from(this.activePointers.values()),t=e[0],i=e[1];this.pinchStartDistance=Phaser.Math.Distance.Between(t.x,t.y,i.x,i.y),this.pinchCenter={x:(t.x+i.x)/2,y:(t.y+i.y)/2},this.pinchStartScale=this.currentScale}}handlePinchMove(e){if(this.activePointers.set(e.id,e),this.isPinching&&this.activePointers.size>=2){const e=Array.from(this.activePointers.values()),t=e[0],i=e[1],s=Phaser.Math.Distance.Between(t.x,t.y,i.x,i.y)/this.pinchStartDistance;this.pinchCenter={x:(t.x+i.x)/2,y:(t.y+i.y)/2};const n=this.pinchStartScale*s;this.applyZoom(n/this.currentScale,this.pinchCenter.x,this.pinchCenter.y,!0)}}applyZoom(e,t,i,s=!1){let n;if(n=s?e:this.currentScale*e,n=Math.max(this.minScale,Math.min(this.maxScale,n)),n===this.currentScale)return;const a=t-this.bg.x,r=i-this.bg.y,o=t-a*(n/this.currentScale),l=i-r*(n/this.currentScale);this.currentScale=n,this.bg.setScale(n),this.cloud.setScale(n),this.fence.setScale(n),this.house_but.setScale(n),this.bg.setPosition(o,l),this.cloud.setPosition(o,l);const h=this.constrainPositionToCoverScreen(o,l);h.x===o&&h.y===l||(this.bg.setPosition(h.x,h.y),this.cloud.setPosition(h.x,h.y)),this.updateAllBuildingsScale(),this.repositionAllBuildings(),this.gridVisual.visible&&this.drawGrid(!0)}updateAllBuildingsScale(){this.buildingGroup.getChildren().forEach((e=>{e.setScale(this.currentScale)}))}startBuilding(){this.scene.game.gameState=GameConfig.GameState.BUILDING,this.placeObject.setVisible(!1),this.buildOperateContainer.setVisible(!0),this.gridDrawScaleBase=this.currentScale||1,this.drawGrid(!0),null==this.operate&&(this.operate=new Operate(this.scene,0,0),this.operate.setDepth(320),this.operate.setScale(this.currentScale||1),this.operate.OnConfirmClick=()=>{var e;this.isChange=!0,this.tempPutDownFlag.isPutDown=!1,this.tempPutDownFlag.isBeginDrag=!1,null==(e=this.scene.game.AudioSetUp)||e.play("buildingPlace"),1!=this.draggingObject.iBuildingTypeId?this.onConfirmChange():this.finalizeMove(this.buildingPosition.row,this.buildingPosition.col),this.buildingPosition=null,this.draggingObject=null,this.operate.setVisible(!1)}),this.currentItem=null,this.scene.events.on("start_building",this.handleBuildingSelected,this),this.scene.input.on("pointerdown",this.startDrag,this),this.scene.events.on("on_bag_close",(e=>{e.isActive&&(this.draggingObject=null)}))}exitBuilding(){this.placeObject.setVisible(!1),this.gridVisual.setVisible(!1),this.buildOperateContainer.setVisible(!1),this.gridDrawScaleBase=null,this.scene.events.off("start_building",this.handleBuildingSelected,this),this.scene.input.off("pointerdown",this.startDrag,this),this.scene.events.off("on_bag_close",(e=>{e.isActive&&(this.draggingObject=null)})),this.scene.game.gameState=GameConfig.GameState.NORMAL}startDrag(e,t){if(this.tempPutDownFlag.isBeginDrag=!0,this.scene.game.gameState!=GameConfig.GameState.BUILDING)return;const i=t[0];this.isValidBuildingTarget(i)&&(this.draggingObject=i,this.handleBuildingDragStart(),this.scene.input.off("pointerdown",this.startDrag,this),this.scene.input.on("pointermove",this.dragging,this),this.scene.input.on("pointerup",this.stopDrag,this))}isValidBuildingTarget(e){var t,i;return!(!(null==(t=null==e?void 0:e.name)?void 0:t.startsWith("building_"))||this.currentItem&&(null==(i=this.currentItem)?void 0:i.name)!=e.name||null!=this.draggingObject&&this.draggingObject!=e)}handleBuildingDragStart(){if(1!=this.draggingObject.iBuildingTypeId){const e=50*(this.currentScale||1);this.draggingObject.y=this.draggingObject.y-e}const e=this.buildingConfigs[this.draggingObject.buildingType];this.currentBuildingConfig=e,this.originalPosition={row:this.draggingObject.row,col:this.draggingObject.col,width:e.width,height:e.height},this.startPointer={row:this.draggingObject.row,col:this.draggingObject.col},this.isBagSelect||1==this.draggingObject.iBuildingTypeId||this.recycleMapGrid(this.draggingObject.row,this.draggingObject.col,this.draggingObject.buildingType),this.updateBuildingAppearance()}updateBuildingAppearance(){if(1==this.draggingObject.iBuildingTypeId)return;const e=this.buildingConfigs[this.draggingObject.buildingType],t=this.canPlaceBuilding(this.draggingObject.row,this.draggingObject.col,e.width,e.height,this.draggingObject.isAllowedMove,this.originalPosition);this.baseMapChange(t,this.draggingObject,this.draggingObject.row,this.draggingObject.col)}dragging(e){if(this.tempPutDownFlag.isPutDown=!1,this.tempPutDownFlag.isBeginDrag=!1,1!=this.currentMode&&(this.isDragging=!0,this.operate.setVisible(!1),this.draggingObject)){if(1==this.draggingObject.iBuildingTypeId)return;this.handleBuildingDragMove(e)}}handleBuildingDragMove(e){const t=this.getGridPosition(e.x,e.y);this.draggingObject.setDepth(this.calculateBuildingDepth(t.row,t.col,this.draggingObject.buildingType)),this.updateBuildingPosition(t);const i=this.checkBuildingPlacement(t);this.updateDraggingBuildingState(i,t)}updateBuildingPosition(e){const t=this.buildingConfigs[this.draggingObject.buildingType],i=this.calculateBuildingCenter(e.row,e.col,t.width,t.height,this.draggingObject.iItemId);this.draggingObject.x=i.x;const s=50*(this.currentScale||1);this.draggingObject.y=i.y-s}checkBuildingPlacement(e){const t=this.buildingConfigs[this.draggingObject.buildingType];return this.canPlaceBuilding(e.row,e.col,t.width,t.height,this.draggingObject.isAllowedMove,this.originalPosition)}updateDraggingBuildingState(e,t){this.baseMapChange(e,this.draggingObject,t.row,t.col),e&&(this.buildingPosition={row:t.row,col:t.col})}stopDrag(e){this.tempPutDownFlag.isPutDown=!0;const t=this.getGridPosition(e.x,e.y);this.handleDragEnd(e,t),this.resetDragEventListeners()}handleDragEnd(e,t){var i,s,n;if(!this.startPointer)return;const a=(null==(i=this.startPointer)?void 0:i.row)==t.row&&(null==(s=this.startPointer)?void 0:s.col)==t.col;a&&(null==(n=this.scene.game.AudioSetUp)||n.play("bagItemAudio")),this.draggingObject&&this.onPointerUp(e,a)}resetDragEventListeners(){this.scene.input.on("pointerdown",this.startDrag,this),this.scene.input.off("pointermove",this.dragging,this),this.scene.input.off("pointerup",this.stopDrag,this)}initBuildingMapFromServerData(e=!1){var t;this.clearExistingBuildings();const i=null==(t=this.scene.game.GameData)?void 0:t.buildingList;!i||e?this.scene.game.GameApi.getHouseShow().then((e=>{var t;if(1!=this.scene.currentPage)return;const i=(null==(t=null==e?void 0:e.jData)?void 0:t.homeList)||[];this.scene.game.GameData.buildingList=i,this.processServiceData(i)})):this.processServiceData(i)}processServiceData(e){const t=e.map(((e,t)=>({...e,id:e.iItemId,buildingTypeId:e.iBuildingTypeId,x:e.row,y:e.col,name:`building_${t}_${Date.now()}`})));this.localBuildingList=t,this.serverBuildingList=t,t.forEach((e=>{this.addBuildingByServerData(e.type,Number(e.row),Number(e.col),e.isAllowedMove,e.iBuildingTypeId,e.iItemId,e.name)}))}addBuildingByServerData(e,t,i,s,n,a,r){var o,l;const h=this.buildingConfigs[e];if(!h)return void console.warn(`: ${e}`);if(!this.canPlaceBuilding(t,i,h.width,h.height))return void console.warn(` (${t},${i})  `);const d=this.calculateBuildingCenter(t,i,h.width,h.height,a),{key:c,frame:u}=ItemIconGetter.getHomeIcon(null==(l=null==(o=this.scene.game.GameData.gameItemSeetings)?void 0:o[a])?void 0:l.sIcoPath),p=this.scene.add.image(d.x,d.y,c,u).setInteractive({pixelPerfect:!0,alphaTolerance:1}).setOrigin(.5,.5).setDepth(this.calculateBuildingDepth(t,i,e));p.setScale(this.currentScale||1),p.buildingType=e,p.buildingWidth=h.width,p.buildingHeight=h.height,p.placed=!0,p.isAllowedMove=s,p.iBuildingTypeId=n,p.iItemId=a,p.row=t,p.col=i,p.name=r,this.buildingGroup.add(p);for(let g=t;g<t+h.height;g++)for(let e=i;e<i+h.width;e++)this.grid[g]&&this.grid[g][e]&&(this.grid[g][e]={type:"occupied",object:p});this.buildings.push({object:p,grid:{row:t,col:i,width:h.width,height:h.height,type:e}})}findExistingHouseBuilding(){for(let e=0;e<this.buildings.length;e++){const t=this.buildings[e].object;if(1==t.iBuildingTypeId)return t}return null}markSpecialAreas(){const e=centerPoint.col,t=centerPoint.row;for(let i=0;i<this.gridRow;i++)for(let s=0;s<this.gridCol;s++)0!==s&&1!==s&&(s!==e&&i!==t||(this.grid[i][s]={type:"occupied",object:null}))}initGrid(){for(let e=0;e<this.gridRow;e++){this.grid[e]=[];for(let t=0;t<this.gridCol;t++)this.grid[e][t]={type:"empty",object:null}}}drawGrid(e=!1){if(!e&&this.isGridDraw)return void this.gridVisual.setVisible(!0);this.gridVisual.clear(),this.gridVisual.lineStyle(2,14713217,.5),this.gridVisual.beginPath();const t=this.currentScale||1,i=this.tileWidth*t,s=this.tileHeight*t;for(let n=0;n<this.gridRow;n++)for(let e=0;e<this.gridCol;e++){const t=this.gridOriginX+(e-n)*i/2,a=this.gridOriginY+(e+n)*s/2;this.gridVisual.moveTo(t,a-s/2),this.gridVisual.lineTo(t+i/2,a),this.gridVisual.lineTo(t,a+s/2),this.gridVisual.lineTo(t-i/2,a),this.gridVisual.strokePath(),this.gridVisual.closePath()}this.isGridDraw=!0,this.gridVisual.setVisible(!0)}resetGrid(){for(let e=0;e<this.gridRow;e++)for(let t=0;t<this.gridCol;t++)this.grid[e][t]={type:"empty",object:null};this.markSpecialAreas()}handleBuildingSelected(e){var t,i;if(this.isOtherPanelOpen=!1,this.currentItem=null==e?void 0:e.bagItem,1!=this.currentItem.iBuildingTypeId)this.isGhostBuilding=!0,this.currentBuildingType=this.currentItem.sSize,this.currentBuildingConfig=this.buildingConfigs[this.currentItem.sSize],this.isBagSelect=!0,this.createBuilding();else{const e=this.findExistingHouseBuilding();if(e){const s=this.buildingConfigs[this.currentItem.sSize];if(s){const{key:n,frame:a}=ItemIconGetter.getHomeIcon(null==(i=null==(t=this.scene.game.GameData.gameItemSeetings)?void 0:t[this.currentItem.iItemId])?void 0:i.sIcoPath);e.setTexture(n,a);const r=this.calculateBuildingCenter(e.row,e.col,s.width,s.height,this.currentItem.iItemId);e.setPosition(r.x,r.y),e.iItemId=this.currentItem.iItemId,this.saveBuildingDataToLocal(e,"upgrade")}this.isChange=!0,this.currentItem=null,this.draggingObject=null,this.placeObject.setVisible(!1)}}}createBuilding(){var e,t;const i=centerPoint.row-Math.floor(this.currentBuildingConfig.height/2),s=centerPoint.col+3-Math.floor(this.currentBuildingConfig.width/2),n=Math.max(0,Math.min(i,this.gridRow-this.currentBuildingConfig.height)),a=Math.max(0,Math.min(s,this.gridCol-this.currentBuildingConfig.width));this.originalPosition={row:n,col:a,width:this.currentBuildingConfig.width,height:this.currentBuildingConfig.height};const r=this.currentBuildingConfig,o=this.calculateBuildingCenter(n,a,r.width,r.height,this.currentItem.iItemId),{key:l,frame:h}=ItemIconGetter.getHomeIcon(null==(t=null==(e=this.scene.game.GameData.gameItemSeetings)?void 0:e[this.currentItem.iItemId])?void 0:t.sIcoPath),d=this.scene.add.image(o.x,o.y,l,h).setInteractive({pixelPerfect:!0,alphaTolerance:1}).setOrigin(.5,.5).setDepth(300);d.setScale(this.currentScale||1),d.buildingType=this.currentBuildingType,d.buildingWidth=r.width,d.buildingHeight=r.height,d.isAllowedMove=1,d.iBuildingTypeId=this.currentItem.iBuildingTypeId,d.iItemId=this.currentItem.iItemId,d.row=n,d.col=a,d.name="building_"+this.currentItem.iItemId+Date.now(),this.currentItem.name=d.name,d.x=o.x,d.y=o.y,d.placed=!1,this.currentTempBuilding=d,this.buildingGroup.add(d),this.draggingObject=d,this.tempPutDownFlag.isPutDown=!0,this.canPlaceBuilding(n,a,r.width,r.height,1,this.originalPosition)?(this.buildingPosition={row:Math.abs(n),col:Math.abs(a)},this.finalizeMove(n,a),this.showDecorationIcons(d)):this.baseMapChange(!1,d,n,a)}calculateBuildingCenter(e,t,i,s,n){const a=e,r=t,o=e+s-1,l=t+i-1,h=this.getWorldPosition(a,r),d=this.getWorldPosition(o,l),c=(h.x+d.x)/2,u=(h.y+d.y)/2;if(GameConfig.Data.BuildingOffset[n]){const e=this.currentScale||1;return{x:c+GameConfig.Data.BuildingOffset[n].x*e,y:u+GameConfig.Data.BuildingOffset[n].y*e}}return{x:c,y:u}}getWorldPosition(e,t){const i=this.currentScale||1,s=this.tileWidth*i,n=this.tileHeight*i;return{x:this.gridOriginX+(t-e)*s/2,y:this.gridOriginY+(t+e)*n/2}}getGridPosition(e,t){const i=e-this.gridOriginX,s=t-this.gridOriginY,n=this.currentScale||1,a=this.tileWidth*n,r=this.tileHeight*n,o=(2*i/a+2*s/r)/2,l=(2*s/r-2*i/a)/2;return{row:Math.round(l),col:Math.round(o)}}onPointerUp(e,t){if(1!=this.currentMode&&(this.isDragging=!1,this.draggingObject)){const i=this.buildingConfigs[this.draggingObject.buildingType];let s={};if(s=t?{row:this.draggingObject.row,col:this.draggingObject.col}:this.getGridPosition(e.x,e.y),this.canPlaceBuilding(s.row,s.col,i.width,i.height,this.draggingObject.isAllowedMove,this.originalPosition))this.isGhostBuilding=!1,this.draggingObject.row=s.row,this.draggingObject.col=s.col,this.buildingPosition={row:Math.abs(s.row),col:Math.abs(s.col)},this.isBagSelect=!1,this.showDecorationIcons(this.draggingObject);else{if(1==this.draggingObject.iBuildingTypeId)return this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_87"),3e3,"short"),void(this.draggingObject=null);1!=this.draggingObject.iBuildingTypeId&&this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_89"),3e3,"short"),this.cancelMove()}this.highlightGridVisual.visible=!1}}baseMapChange(e,t,i,s){const n=this.buildingConfigs[t.buildingType];this.placeObject.setVisible(!0),e?this.placeObject.setTexture("home-atlas",n.canPlace):this.placeObject.setTexture("home-atlas",n.cannotPlace);const a=this.getWorldPosition(i,s),r=this.currentScale||1,o=a.x+(n.offectX||0)*r,l=a.y-this.tileHeight*r/2+(n.offectY||0)*r;this.placeObject.setPosition(o,l),this.placeObject.setScale(r)}canPlaceBuilding(e,t,i,s,n,a){if(t<0||t+i>this.gridCol||e<0||e+s>this.gridRow)return!1;if(0==n&&a)return e===a.row&&t===a.col;for(let r=e;r<e+s;r++)for(let e=t;e<t+i;e++){if(!(r>=0&&r<this.gridRow&&e>=0&&e<this.gridCol))return!1;if(this.grid[r][e]&&"occupied"===this.grid[r][e].type)return!1}return!0}clearExistingBuildings(){this.buildings.forEach((e=>{e.object&&e.object.destroy()})),this.buildings=[],this.buildingGroup.getChildren().forEach((e=>{e.destroy()})),this.buildingGroup.clear(!0,!0),this.resetGrid(),this.draggingObject=null,this.currentItem=null,this.isBagSelect=!1}finalizeMove(e,t){var i,s,n,a,r;const o=this.draggingObject,l=this.buildingConfigs[this.draggingObject.buildingType],h=this.currentScale||1,d=this.fenceObj.skeleton.data.animations.some((e=>e.name==animationsName[o.buildingType]));if(1!=o.iBuildingTypeId&&d){this.fenceObj.setVisible(!0),this.fenceObj.setDepth(o.depth-1);let e=((null==(s=null==(i=GameConfig.Data.BuildingOffset)?void 0:i[o.iItemId])?void 0:s.offectY)||135)*h,t=((null==(a=null==(n=GameConfig.Data.BuildingOffset)?void 0:n[o.iItemId])?void 0:a.offectX)||10)*h;this.fenceObj.x=o.x+t,this.fenceObj.y=o.y+e,this.fenceObj.setScale(h),null==(r=this.fenceObj.animationState)||r.clearListeners(),this.fenceObj.animationState.setAnimation(0,animationsName[o.buildingType],!1),this.fenceObj.animationState.addListener({complete:e=>{this.fenceObj.setVisible(!1)}})}else this.fenceObj.setVisible(!1);const c=this.calculateBuildingCenter(e,t,l.width,l.height,o.iItemId);o.setScale(h),o.x=c.x,o.y=c.y,o.row=e,o.col=t,o.setDepth(this.calculateBuildingDepth(e,t,this.draggingObject.buildingType));for(let p=e;p<e+l.height;p++)for(let e=t;e<t+l.width;e++)this.grid[p]&&this.grid[p][e]&&(this.grid[p][e]={type:"occupied",object:o});const u=this.buildings.findIndex((e=>e.object===o));-1!==u&&(this.buildings[u].grid.row=e,this.buildings[u].grid.col=t),this.placeObject.setVisible(!1),this.currentTempBuilding&&(this.currentTempBuilding.placed=!0,this.currentTempBuilding=null),this.currentItem=null,this.saveBuildingDataToLocal(o)}cancelMove(){const e=this.draggingObject;if(!e)return;const t=this.calculateBuildingCenter(this.originalPosition.row,this.originalPosition.col,this.originalPosition.width,this.originalPosition.height,e.iItemId);this.canPlaceBuilding(this.originalPosition.row,this.originalPosition.col,this.originalPosition.width,this.originalPosition.height,this.draggingObject.isAllowedMove,this.originalPosition)?(this.buildingPosition={row:this.originalPosition.row,col:this.originalPosition.col},e.x=t.x,e.y=t.y-50*(this.currentScale||1),this.placeObject.setVisible(!1),this.onConfirmChange()):(this.baseMapChange(!1,e,this.originalPosition.row,this.originalPosition.col),e.x=t.x,e.y=t.y,e.setDepth(100)),this.draggingObject=null}showDecorationIcons(e){this.operate.setPosition(e.x+5,e.y-120*this.currentScale),this.operate.setVisible(!0),0==e.isAllowedMove?this.operate.showUpgradePanel():this.operate.showWithdrawPanel(),this.operate.OnRecycleClick=()=>{this.recycleBuilding()},this.operate.OnUpgradeClick=()=>{var t;0==e.isAllowedMove&&(null==(t=this.scene.game.AudioSetUp)||t.play("openShovelAudio"),this.updateUsedBuildingData(this.localBuildingList),this.currentMode=2,this.scene.events.emit("home_construct",{value:2,isGhostBuilding:this.isGhostBuilding}),this.scene.events.emit("house_upgrade"))}}recycleMapGrid(e,t,i){const s=this.buildingConfigs[i];for(let n=e;n<e+s.height;n++)for(let e=t;e<t+s.width;e++)if(n>=0&&n<this.gridRow&&e>=0&&e<this.gridCol&&this.grid[n]&&this.grid[n][e]&&e!=centerPoint.col&&n!=centerPoint.row){if((0==e||1==e)&&n==centerPoint.row)continue;this.grid[n][e]={type:"empty",object:null}}}recycleBuilding(){const e=this.draggingObject;if(!e)return;this.isBagSelect=!1,this.isGhostBuilding=!1,this.isChange=!0,this.recycleMapGrid(e.row,e.col,e.buildingType);const t=this.buildings.findIndex((t=>t.object===e));-1!==t&&this.buildings.splice(t,1),this.saveBuildingDataToLocal(e,"recycle"),this.scene.game.Tips.show(instance.t("Event_5_C2_Pandora_88"),3e3,"short"),e.destroy(),this.currentTempBuilding&&(this.currentTempBuilding.placed=!0,this.currentTempBuilding=null),this.draggingObject=null,this.currentItem=null,this.operate.setVisible(!1),this.placeObject.setVisible(!1)}saveBuildingDataToLocal(e,t=""){const i={id:e.iItemId,buildingTypeId:e.iBuildingTypeId,x:e.row,y:e.col,name:e.name,col:e.col,row:e.row,iBuildingTypeId:e.iBuildingTypeId,iItemId:e.iItemId,type:e.type};if("upgrade"==t){const t=this.localBuildingList.findIndex((t=>t.iBuildingTypeId==e.iBuildingTypeId));t>-1&&this.localBuildingList.splice(t,1,i)}if("recycle"==t){const t=this.localBuildingList.findIndex((t=>t.name==e.name));t>-1&&this.localBuildingList.splice(t,1)}}onConfirmChange(){if(this.buildingPosition&&Object.keys(this.buildingPosition).length>0){const e={id:this.draggingObject.iItemId,buildingTypeId:this.draggingObject.iBuildingTypeId,x:this.buildingPosition.row,y:this.buildingPosition.col,name:this.draggingObject.name};this.finalizeMove(this.buildingPosition.row,this.buildingPosition.col);const t=this.localBuildingList.findIndex((e=>e.name==this.draggingObject.name));t>-1?this.localBuildingList.splice(t,1,e):this.localBuildingList.push(e),this.isChange=!0}}calculateBuildingDepth(e,t,i){const s=this.buildingConfigs[i];if(!s){const i=e+t;return i<1?1:i}let n=0;for(let a=e;a<e+s.height;a++)for(let e=t;e<t+s.width;e++)n=Math.max(n,10*a+e);return t>8&&(n+=150),n>0?n:1}updateUsedBuildingData(e){const t=e.reduce(((e,t)=>{const i=t.id;return e[i]||(e[i]=[]),e[i].push(t),e}),{});this.scene.game.GameData.saveBuilding=t}repositionAllBuildings(){this.buildingGroup.getChildren().forEach((e=>{const t=this.buildingConfigs[e.buildingType],i=this.calculateBuildingCenter(e.row,e.col,t.width,t.height,e.iItemId);e.setPosition(i.x,i.y),e.setScale(this.currentScale||1),e.setDepth(this.calculateBuildingDepth(e.row,e.col,e.buildingType))}))}cleanupTempBuilding(){this.currentTempBuilding&&!this.currentTempBuilding.placed&&(this.buildingGroup.remove(this.currentTempBuilding,!0,!0),this.currentTempBuilding.destroy(),this.currentTempBuilding=null,this.draggingObject=null,this.isGhostBuilding=!1)}setGuide(){this.guideBg||(this.guideBg=this.scene.add.image(this.scene.cameras.main.width/2,this.scene.cameras.main.height/2,"house_background").setOrigin(.5).setVisible(!1).setDepth(this.basedepth+1e3)),this.guideBg.setVisible(!0)}onEvents(){this.scene.events.on("disable_home_scale",(e=>{console.log("disable_home_scale",e.isOpen),this.isOtherPanelOpen=e.isOpen})),EventBus.on("close_view",(e=>{console.log("close_view"),this.scene.input.off("pointermove",this.onBackgroundPointerMove,this),this.isOtherPanelOpen=!1})),EventBus.on("guide_step",(e=>{var t,i,s,n;if(0==(null==(t=this.scene.game.GameData.guideData)?void 0:t.isCompleted)&&(e.step>0&&e.step<5&&(this.setGuide(),1==e.step&&this.scene.time.delayedCall(2400,(()=>{var t;null==(t=this.scene.beginner)||t.submitGuide(e.step)})),4==e.step&&this.guideBg&&this.scene.time.delayedCall(750,(()=>{this.guideBg.destroy(),this.guideBg=null}))),48!=e.step&&49!=e.step&&56!=e.step||(null==(i=this.scene.game.AudioSetUp)||i.play("openShovelAudio"),this.updateUsedBuildingData(this.localBuildingList),this.currentMode=2,this.scene.events.emit("home_construct",{value:2,isGhostBuilding:this.isGhostBuilding})),57==e.step)){const e=null==(n=null==(s=this.scene.game.GameData.infoData.bag)?void 0:s.builds)?void 0:n[1];this.handleBuildingSelected({bagItem:e})}}))}show(){super.show(),this.initBuildingMapFromServerData(),this.buildingGroup.setVisible(!0),this.fenceObj.setVisible(!1),this.highlightGridVisual.visible=!1,this.buildOperateContainer.setVisible(!1),this.placeObject.setVisible(!1),this.gridVisual.setVisible(!1),this.scene.game.gameState=GameConfig.GameState.NORMAL}hide(){var e;super.hide(),this.exitBuilding(),this.buildingGroup.setVisible(!1),null==(e=this.operate)||e.setVisible(!1),this.fenceObj.setVisible(!1),this.highlightGridVisual.visible=!1,this.buildOperateContainer.setVisible(!1),this.placeObject.setVisible(!1),this.scene.game.gameState=GameConfig.GameState.NORMAL}canPanZoom(e,t){if(this.isOtherPanelOpen)return!1;const i=this.scene.game.gameState;if(i===GameConfig.GameState.NORMAL)return!0;if(i===GameConfig.GameState.BUILDING){const e=Array.isArray(t)&&t.some((e=>{var t;return null==(t=null==e?void 0:e.name)?void 0:t.startsWith("building_")}));return!(this.draggingObject||this.currentTempBuilding||this.currentItem||e)}return!1}setupDragEvents(){this.scene.input.on("pointerdown",((e,t)=>{if(this.canPanZoom(e,t)||this.tempPutDownFlag.isPutDown)if(this.operateHome=!0,this.activePointers.set(e.id,{x:e.x,y:e.y}),2===this.activePointers.size){if(this.draggingObject)return;this.isPinching=!0,this.isDragging=!1;const[e,t]=Array.from(this.activePointers.values());this.pinchStartDistance=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y),this.pinchStartScale=this.currentScale,this.pinchCenter={x:(e.x+t.x)/2,y:(e.y+t.y)/2}}else 1===this.activePointers.size&&(this.isDragging=!0,this.dragStartX=e.x,this.dragStartY=e.y,this.bgStartX=this.bg.x,this.bgStartY=this.bg.y)})),this.scene.input.on("pointermove",((e,t)=>{if((this.canPanZoom(e,t)||this.tempPutDownFlag.isPutDown)&&this.operateHome)if(this.activePointers.has(e.id)&&this.activePointers.set(e.id,{x:e.x,y:e.y}),this.isPinching&&this.activePointers.size>=2){if(this.draggingObject)return;const[e,t]=Array.from(this.activePointers.values()),i=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);if(this.pinchStartDistance>0){let e=i/this.pinchStartDistance,t=Phaser.Math.Clamp(this.pinchStartScale*e,this.minScale,this.maxScale);this.setScaleAroundPoint(this.pinchCenter.x,this.pinchCenter.y,t)}}else if(this.isDragging&&1===this.activePointers.size){const t=e.x-this.dragStartX,i=e.y-this.dragStartY;let s=this.bgStartX+t,n=this.bgStartY+i;s=Phaser.Math.Clamp(s,this.minX,this.maxX),n=Phaser.Math.Clamp(n,this.minY,this.maxY),this.setAllPos(s,n)}})),this.scene.input.on("pointerup",(e=>{this.operateHome=!1,this.tempPutDownFlag.isBeginDrag=!1,this.activePointers.delete(e.id),this.activePointers.size<2&&(this.isPinching=!1),0===this.activePointers.size&&(this.isDragging=!1)})),this.scene.input.on("wheel",this.onMouseWheel,this)}setScaleAroundPoint(e,t,i){const s=this.currentScale;if(Math.abs(i-s)<1e-6)return;const n=(e-this.bg.x)/s,a=(t-this.bg.y)/s,r=(this.gridOriginX-this.bg.x)/s,o=(this.gridOriginY-this.bg.y)/s;this.currentScale=i,this.setAllScale(i,e,t);const l=this.scene.cameras.main.width,h=this.scene.cameras.main.height;this.minX=l-this.bgWidth*i,this.maxX=0,this.minY=h-this.bgHeight*i,this.maxY=0;let d=e-n*i,c=t-a*i;const u=this.constrainPositionToCoverScreen(d,c),p=u.x-d,g=u.y-c;this.bg.x=u.x,this.bg.y=u.y,this.cloud.x+=p,this.cloud.y+=g,this.fence&&(this.fence.x+=p,this.fence.y+=g),this.house_but&&(this.house_but.x+=p,this.house_but.y+=g),this.operate&&(this.operate.x+=p,this.operate.y+=g),this.placeObject&&(this.placeObject.x+=p,this.placeObject.y+=g),this.buildingGroup.getChildren().forEach((e=>{e.x+=p,e.y+=g})),this.gridOriginX=this.bg.x+r*i,this.gridOriginY=this.bg.y+o*i,this.gridVisual.visible&&this.drawGrid(!0),this.repositionAllBuildings()}handleResize(e,t){consoel.log("handleResize");const i=this.scene.textures.get("house_bg2"),s=i.source[0].width,n=i.source[0].height,a=e/s,r=t/n,o=1.2*Math.max(a,r);this.minScale=o,this.currentScale<this.minScale&&(this.currentScale=this.minScale),this.setAllScale(this.currentScale),this.minX=e-s*this.currentScale,this.maxX=0,this.minY=t-n*this.currentScale,this.maxY=0;let l=this.bg.x,h=this.bg.y;const d=this.constrainPositionToCoverScreen(l,h);return l=d.x,h=d.y,this.setAllPos(l,h),{currentX:l,currentY:h,currentScale:this.currentScale}}constrainPositionToCoverScreen(e,t){const i=this.scene.cameras.main.width,s=this.scene.cameras.main.height,n=this.bgWidth*this.currentScale,a=this.bgHeight*this.currentScale;let r=e,o=t;return n>=i?(r>0&&(r=0),r+n<i&&(r=i-n)):r=(i-n)/2,a>=s?(o>0&&(o=0),o+a<s&&(o=s-a)):o=(s-a)/2,{x:r,y:o}}repositionBackgroundToCoverScreen(){const e=this.scene.cameras.main.width,t=this.scene.cameras.main.height,i=this.bgWidth*this.currentScale,s=this.bgHeight*this.currentScale;let n=this.bg.x,a=this.bg.y;i>=e?(n>0&&(n=0),n+i<e&&(n=e-i)):n=(e-i)/2,s>=t?(a>0&&(a=0),a+s<t&&(a=t-s)):a=(t-s)/2,this.setAllPos(n,a)}setAllPos(e,t,i=!0){const s=e-this.bg.x,n=t-this.bg.y;this.bg.setPosition(e,t),this.cloud.setPosition(e,t),this.gridOriginX+=s,this.gridOriginY+=n,i&&(this.fence&&this.fence.setPosition(this.fence.x+s,this.fence.y+n),this.house_but&&this.house_but.setPosition(this.house_but.x+s,this.house_but.y+n),this.operate&&this.operate.setPosition(this.operate.x+s,this.operate.y+n),this.placeObject&&this.placeObject.setPosition(this.placeObject.x+s,this.placeObject.y+n),this.buildingGroup.getChildren().forEach((e=>{e.setPosition(e.x+s,e.y+n)}))),this.gridVisual&&this.gridVisual.visible&&this.drawGrid(!0)}setAllScale(e,t,i){const s=this.scene.cameras.main,n=void 0!==t?t:s.width/2,a=void 0!==i?i:s.height/2,r=e/(this.bg.scaleX||1);if(Math.abs(r-1)<1e-6)return;this.bg.setScale(e);const o=e=>{e.setPosition(n+(e.x-n)*r,a+(e.y-a)*r)};this.cloud&&(o(this.cloud),this.cloud.setScale((this.cloud.scaleX||1)*r)),this.fence&&(o(this.fence),this.fence.setScale((this.fence.scaleX||1)*r)),this.house_but&&(o(this.house_but),this.house_but.setScale((this.house_but.scaleX||1)*r)),this.operate&&(o(this.operate),this.operate.setScale((this.operate.scaleX||1)*r)),this.placeObject&&(o(this.placeObject),this.placeObject.setScale((this.placeObject.scaleX||1)*r,(this.placeObject.scaleY||1)*r)),this.buildingGroup.getChildren().forEach((e=>{o(e),e.setScale((e.scaleX||1)*r,(e.scaleY||1)*r)}))}}class LevelUp extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"basedepth",100),__publicField(this,"onCloseLevel",(()=>{}));let n=this;const{width:a,height:r}=e.cameras.main;let o=0;const l=e.add.rectangle(0,0,a,r,0).setInteractive().setOrigin(0,0).setDepth(this.basedepth);l.setAlpha(.7),l.on("pointerdown",(()=>{this.hide()})),this.poluo=e.add.spine(a/2,r/2+370,"levelUp-data","levelUp-atlas"),this.poluo.setDepth(this.basedepth+1),this.poluo.setScale(1),console.log("poluo =>",this.poluo);const h=e.add.image(a/2,r/2-40).setOrigin(.5).setScale(0),d=e.add.image(a/2,r/2-40).setOrigin(.5).setScale(0);h.setDepth(this.basedepth+2),d.setDepth(this.basedepth+2);const c=e.add.text(a/2,r/2-235,instance.t("Event_5_C2_Pandora_47"),{fontFamily:"BeaufortforLOL-Bold",fontSize:"36px",fill:"#d9c19f"}).setOrigin(.5).setDepth(this.basedepth+2),u=e.add.text(a/2,r/2+122,instance.t("Event_5_C2_Pandora_48"),{fontFamily:"BeaufortforLOL-Bold",fontSize:"36px",fill:"#ffffff"}).setOrigin(.5).setDepth(this.basedepth+2),p=e.add.text(a/2-150,r/2+202,instance.t("Event_5_C2_Pandora_49"),{fontFamily:"SPIEGEL-BOLD",fontSize:"18px",fill:"#ffffff"}).setOrigin(.5).setDepth(this.basedepth+2),g=e.add.text(a/2+115,r/2+202,"6",{fontFamily:"SPIEGEL-BOLD",fontSize:"18px",fill:"#ffffff"}).setOrigin(.5).setDepth(this.basedepth+2),m=e.add.text(a/2+164,r/2+202,"7",{fontFamily:"SPIEGEL-BOLD",fontSize:"18px",fill:"#fce69d"}).setOrigin(.5).setDepth(this.basedepth+2);this.setVisible(!1),this.add([l,this.poluo,c,h,d,u,p,g,m]),e.add.existing(this),this.levelAniChain=()=>{m.setAlpha(0),g.setAlpha(0),p.setAlpha(0),e.tweens.chain({targets:[h,d],tweens:[{scale:1.2,duration:800,ease:"Sine.easeOut",delay:100},{scale:1,duration:500,ease:"Back.easeOut"}]}),e.tweens.add({targets:p,alpha:1,delay:800,duration:500,ease:"Sine.easeIn"}),e.tweens.add({targets:g,alpha:1,delay:1e3,duration:500,ease:"Sine.easeIn"}),e.tweens.add({targets:m,alpha:1,delay:1500,duration:1e3,ease:"Sine.easeIn"})},this.show=(t,i)=>{if(3==e.currentPage)return;o=i,this.setVisible(!0);const s=Math.floor(i/10),n=i%10;if(0!=s){let{key:e,frame:t}=this.getNameByNum(s);h.setTexture(e,t);const i=this.getNameByNum(n);e=i.key,t=i.frame,d.setTexture(e,t),h.setVisible(!0),h.setPosition(a/2-30,r/2-40),d.setPosition(a/2+30,r/2-40)}else{let{key:e,frame:t}=this.getNameByNum(n);d.setTexture(e,t),h.setVisible(!1),d.setPosition(a/2,r/2-40)}g.setText(t),m.setText(i),this.levelAniChain(),this.poluo?(this.poluo.animationState.setAnimation(0,"01_once"),this.poluo.animationState.addListener({complete:e=>{console.log("complete =>",e.animation.name),"01_once"==e.animation.name&&this.poluo.animationState.setAnimation(0,"02_loop",!0)}})):(this.poluo=e.add.spine(a/2,r/2+370,"levelUp-data","levelUp-atlas"),this.poluo.setDepth(this.basedepth+1),this.poluo.setScale(1),console.log("poluo =>",this.poluo),this.poluo.animationState.setAnimation(0,"01_once"),this.poluo.animationState.addListener({complete:e=>{console.log("complete =>",e.animation.name),"01_once"==e.animation.name&&this.poluo.animationState.setAnimation(0,"02_loop",!0)}})),this.add(this.poluo)},this.setDepth(1e4),this.hide=()=>{this.poluo&&(this.poluo.animationState.clearListeners(),this.poluo.animationState.clearTracks()),n.onCloseLevel(),this.setVisible(!1)},this.onResize=(e,t)=>{var i,s;null==(i=null==l?void 0:l.setDisplaySize)||i.call(l,e,t),null==(s=this.poluo)||s.setPosition(e/2,t/2+370),u.setPosition(e/2,t/2+122),p.setPosition(e/2-150,t/2+202),g.setPosition(e/2+115,t/2+202),m.setPosition(e/2+164,t/2+202),c.setPosition(e/2,t/2-235),o>=10?(h.setPosition(e/2-30,t/2-40),d.setPosition(e/2+30,t/2-40)):d.setPosition(e/2,t/2-40)},this.getNameByNum=e=>{const t=["icon_zero","icon_one","icon_two","icon_three","icon_four","icon_five","icon_six","icon_Seven","icon_eight","icon_nine"];return e>=0&&e<t.length?{key:"level_num",frame:t[e]+".png"}:{key:"",frame:""}}}}let offsetX=90,offsetY=100;class BuildingView extends Component{constructor(e,t,i,s){var n,a,r;super(e,t,i,s),__publicField(this,"userData"),this.bg=e.add.image(offsetX,offsetY+5,"bag-atlas","item_plants_normal.png"),this.icon=e.add.image(offsetX,offsetY-10).setScale(1.2),this.allConut=e.add.text(offsetX+50,offsetY+22,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"18px",fill:"#a1895c"}),this.countText=e.add.text(this.allConut.x-10,offsetY+20,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#605AAA"}),this.nameText=e.add.text(offsetX,offsetY+85,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#A1895C"}).setOrigin(.5,.5),this.copyNameText=e.add.text(0,0,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#A1895C"}).setVisible(!1),this.notBuyBg=e.add.image(offsetX,offsetY,"bag-atlas","item_plants_not available.png").setVisible(!1),this.success=e.add.image(offsetX+62,offsetY-77,"bag-atlas","label_have_normal.png").setVisible(!1),this.buildType=e.add.image(offsetX-50,offsetY-75,"bag-atlas","icon_cell3.png").setVisible(!1),this.select=e.add.image(offsetX,offsetY+5,"bag-atlas","item_plants_select.png").setVisible(!1),this.add([this.bg,this.icon,this.countText,this.allConut,this.nameText,this.notBuyBg,this.success,this.buildType,this.select,this.copyNameText]),this.language=(null==(r=null==(a=null==(n=e.game)?void 0:n.GameData)?void 0:a.settingInfo)?void 0:r.languageKey)||"en_US"}setSelected(e){e?this.select.setVisible(!0):this.select.setVisible(!1)}updateData(e){var t,i,s,n;this.userData=e;const{sSize:a="",sItemName:r,iItemId:o,sIcoPath:l,iAmount:h}=e;this.allConut.setText(`/${h}`);const d=Math.max(h-((null==(i=null==(t=this.scene.game.GameData.saveBuilding)?void 0:t[o])?void 0:i.length)||0),0);this.countText.setText(d),(null==(n=null==(s=this.scene.game.GameData.saveBuilding)?void 0:s[o])?void 0:n.length)>0?this.success.setVisible(!0):this.success.setVisible(!1),this.countText.setPosition(this.allConut.x-this.countText.displayWidth,offsetY+20),"zh_MY"==this.language||"zh_TW"==this.language||"zh_CN"==this.language?(this.nameText.setText(r),this.nameText.setFontSize(22),this.nameText.displayWidth>this.bg.displayWidth-30?StringFormatter.shrinkText(this.nameText,22,this.bg.displayWidth-30,14):this.nameText.setFontSize(22)):(this.nameText.setStyle({wordWrap:{width:this.bg.displayWidth-30,useAdvancedWrap:!0},maxLines:3}),this.copyNameText.setText(r),this.nameText.setText(r),this.copyNameText.displayWidth>this.bg.displayWidth-30?this.nameText.setFontSize(14):this.nameText.setFontSize(22));const{key:c,frame:u}=ItemIconGetter.getCropBagIcon(l);if(this.icon.setTexture(c,u),a){this.buildType.setVisible(!0);const e=ItemIconGetter.getSizeType(a);this.buildType.setTexture("bag-atlas",e)}else this.buildType.setVisible(!1)}}class BuildingBagView extends Page{constructor(e,t){super(e,t),__publicField(this,"uiKey","DecorationView"),__publicField(this,"baseDepth",550),__publicField(this,"positionX",0),__publicField(this,"positionY",0),__publicField(this,"packageList",[]),__publicField(this,"currentIndex",0),this.activeButton=null,this.selectedCell=null;const i=e=>{const t=(e||[]).reduce(((e,t)=>{const i=t.iBuildingTypeId;return e[i]||(e[i]=[]),e[i].push(t),e}),{});t[0]=e,this.packageList=t,this.fillItems(t[this.currentIndex])},s=this;let n=null,a=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();a.setOrigin(0,0),a.setAlpha(.75),a.setDepth(this.baseDepth),a.setInteractive({useHandCursor:!1}),this.add(a);let r=e.add.image(e.cameras.main.width/2,e.cameras.main.height-210,"bag-atlas","frame_framepanel_plants.png");r.setDepth(this.baseDepth+1),this.add(r);const o=e.add.container(GameConfig.Screen.width/2-300,-65),l=e.add.image(0,0,"bag-atlas","btn_store_normal.png").setOrigin(.5,.5);o.add([l,e.add.text(0,0,instance.t("Event_5_C2_Pandora_25"),{fontFamily:"BeaufortforLOL-Bold",fontSize:26,fill:"#fff"}).setOrigin(.5,.5)]),l.setInteractive().on("pointerdown",(t=>{var i;null==(i=e.game.AudioSetUp)||i.play("bagStoreAudio"),this.slideOut(),t.event.stopPropagation(),setTimeout((()=>{e.events.emit("open_view",{viewName:"StoreView",shopTab:1})}),200)}));const h=e.add.group({classType:BuildingView,maxSize:-1,runChildUpdate:!1});this.positionX=e.cameras.main.width,n=e.rexUI.add.gridTable({x:this.positionX/2-100,y:e.cameras.main.height+440,width:GameConfig.Screen.width-170,height:440,header:e.add.container(0,0),table:{cellWidth:201,cellHeight:231,columns:5,mask:{padding:2},reuseCellContainer:!0},mouseWheelScroller:{focus:!1,speed:.1},space:{left:180,right:0,top:30,bottom:12,table:{top:0,bottom:0,left:0,right:0},header:10,footer:10},createCellContainerCallback:function(e,t){e.scene,e.width,e.height;var i=e.item;return e.index,null===t&&(t=h.get()),t.setDepth(s.baseDepth+2),t.updateData(i),t.setActive(!0),t.setVisible(!0),t},items:[]}).layout().setDepth(this.baseDepth+1),n.setVisible(!1);const d=()=>{this.selectedCell&&(this.selectedCell.setSelected(!1),this.selectedCell=null)},c=e=>{d(),this.selectedCell=e,e&&e.setSelected(!0)};n.on("cell.click",(function(t,i,s){var n,a,r;console.log("pointer-click "+i+": "+t),null==(n=e.game.AudioSetUp)||n.play("bagItemAudio"),this.selectedCell===t?c(null):c(t);const{unlock:o,iItemId:l,iGetWay:h,iAmount:d}=t.userData;if(!(((null==(r=null==(a=e.game.GameData.saveBuilding)?void 0:a[l])?void 0:r.length)||0)>=d))return d>0?(e.events.emit("start_building",{bagItem:{...t.userData}}),void this.slideOut()):void(0!=d||e.game.Tips.show(instance.t("Event_5_C2_Pandora_31"),3e3,"short"));e.game.Tips.show(instance.t("Event_5_C2_Pandora_104"),"long")}),this);const u=n.getElement("header");u.setDepth(this.baseDepth+3),u.add(o),u.add(e.add.image(GameConfig.Screen.width/2-160,-65,"bag-atlas","btn_close.png").setInteractive({useHandCursor:!0}).setOrigin(.5,.5).on("pointerdown",(t=>{var i;null==(i=e.game.AudioSetUp)||i.play("bagCloseAudio"),n.setVisible(!1),this.slideOut(),e.events.emit("on_bag_close",{isActive:!0}),e.events.emit("close_view",{viewName:this.uiKey})})));let p=u.getByName("flowerTab");p=e.add.container(-GameConfig.Screen.width/2-15,-63),p.name="flowerTab",p.add([e.add.image(0,0,"bag-atlas","tab_decoration_select.png").setOrigin(0,.5),e.add.text(135,36,instance.t("Event_5_C2_Pandora_40"),{fontFamily:"BeaufortforLOL-Bold",fontSize:28,fill:"#6f69e2"}).setOrigin(.5,.5)]),u.add(p);const g=e.textures.get("plant_background").get("__BASE").height;Math.min(g,e.cameras.main.height)===g?this.positionY=e.cameras.main.height/2+360:e.cameras.main.height<g&&e.cameras.main.height>GameConfig.Screen.height?this.positionY=e.cameras.main.height/2-(g/2-e.cameras.main.height/2)+453:this.positionY=e.cameras.main.height/2+164;const m=e.add.image(0,0,"bag-atlas","tab_Backpack_select.png").setVisible(!1);m.setDepth(this.baseDepth+4),this.add(m);const f=t=>{m.x=v.x,this.activeButton?(this.activeButton.buttonText.setStyle({fill:"#6e73b6"}),e.tweens.add({targets:m,y:v.y+t.y,duration:200,ease:"Easing.Linear"})):m.y=v.y+t.y,t.buttonText.setStyle({fill:"#ffffff"}),this.activeButton=t},v=e.add.container(e.cameras.main.width/2-530,e.cameras.main.height-370).setDepth(this.baseDepth+5),b=[{type:"ALL",text:instance.t("Event_5_C2_Pandora_41")},{type:"HOUSE",text:instance.t("Event_5_C2_Pandora_42")},{type:"GARDEN",text:instance.t("Event_5_C2_Pandora_43")},{type:"PLANTS",text:instance.t("Event_5_C2_Pandora_44")},{type:"DECORATION",text:instance.t("Event_5_C2_Pandora_45")},{type:"OTHERS",text:instance.t("Event_5_C2_Pandora_46")}],y=[];b.forEach(((t,i)=>{const s=((t,i,s)=>{const n=e.add.text(0,5,i,{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#6e73b6"}).setOrigin(.5);n.setFontSize(22),n.displayWidth>m.displayWidth-60?StringFormatter.shrinkText(n,22,m.displayWidth-60,12):n.setFontSize(22);const a=e.add.container(0,s,[n]).setSize(150,70).setInteractive();return a.buttonText=n,a.type=t,a})(t.type,t.text,66*i);v.add(s),y.push(s),s.on("pointerdown",(()=>{var t;null==(t=e.game.AudioSetUp)||t.play("bagTabAudio"),f(s),d(),i>1?(this.currentIndex=i+1,this.fillItems(this.packageList[this.currentIndex])):(this.currentIndex=i,this.fillItems(this.packageList[this.currentIndex])),n.scrollToTop()}))})),this.categoryButtons=y,b.length>0&&f(v.list[0]),this.add(v);const C=e.add.image(e.cameras.main.width/2-425,e.cameras.main.height-198,"bag-atlas","frame_Slide bar.png").setDepth(this.baseDepth+4);C.setDisplaySize(C.width,420),this.add(C),e.events.on("house_upgrade",(()=>{this.currentIndex=1,this.categoryButtons&&this.categoryButtons.length>1&&f(this.categoryButtons[1])})),this.slideIn=()=>{d(),e.tweens.add({targets:n,y:this.positionY,delay:0,loop:0,duration:300,ease:"Power2"}).play(),n&&(n.setVisible(!0),n.setSliderEnable(!0),n.setScrollerEnable(!0),n.setMouseWheelScrollerEnable(!0),n.setPosition(this.positionX/2,this.positionY)),this.show(),null==n||n.scrollToTop(),(()=>{var t,s;let n=null==(s=null==(t=e.game.GameData.infoData)?void 0:t.bag)?void 0:s.builds;n&&i(n),e.game.GameApi.getPackageItems(3,"").then((t=>{var s;console.log("",t);const{packageInfo:a}=t.jData;DeepEqualConpare.deepEqual(n,a)||(console.log(" "),(null==(s=e.game.GameData.infoData)?void 0:s.bag)&&(e.game.GameData.infoData.bag.builds=a),i(a))}))})()},this.slideOut=()=>{e.tweens.add({targets:n,y:5*e.cameras.main.height,duration:200,ease:"Power2",onComplete:()=>{n.setSliderEnable(!1),n.setScrollerEnable(!1),n.setMouseWheelScrollerEnable(!1),this.hide(),this.emptyImage.setVisible(!1)}}).play()},this.fillItems=t=>{this.emptyImage||(this.emptyImage=e.add.image(e.cameras.main.width/2+60,e.cameras.main.height/2+150,"bag_empty"),this.emptyImage.setDepth(this.baseDepth+10)),t?(console.log(""),this.emptyImage.setVisible(!1)):(t=[],console.log(""),this.emptyImage.setVisible(!0)),n.setItems(t)},this.onResize=(e,t)=>{if(a.setDisplaySize(e,t),t>g?this.positionY=t/2+360:t<g&&t>GameConfig.Screen.height?this.positionY=t/2-(g/2-t/2)+453:this.positionY=t/2+164,this.positionX=e,a.visible&&n.setPosition(this.positionX/2,this.positionY),r.visible&&r.setPosition(e/2,t-210),v.visible&&(v.setPosition(e/2-530,t-370),this.activeButton&&v)){const e=v.x+this.activeButton.x,t=v.y+this.activeButton.y;m.x=e,m.y=t}C.visible&&C.setPosition(e/2-425,t-205)},this.setVisible(!1)}}class SetUp extends Component{constructor(e,t,i,s){var n,a,r,o;super(e,t,i,s),__publicField(this,"basedepth",1e3),__publicField(this,"audioType",1),__publicField(this,"sound",1),__publicField(this,"selectedLanguage",""),__publicField(this,"setUpInfo");const{width:l,height:h}=e.cameras.main,d=l/2,c=h/2;let u=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0).setInteractive();u.setOrigin(0,0),u.setAlpha(.75),u.setDepth(this.basedepth+1),this.add(u);const p=e.add.image(d,c,"setUp-atlas","pop-up_big.png"),g=e.add.text(d,c-200,instance.t("Event_5_C2_Pandora_90"),{fontSize:"30px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(.5,.5),m=e.add.image(d+465,c-270,"setUp-atlas","btn_close_ pop up.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-30,-30,100,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).setDepth(this.basedepth+200).on("pointerdown",(()=>{this.hide()}));let f=e.add.image(d,c-160,"setUp-atlas","line_information2.png"),v=e.add.image(d,c+178,"bag-atlas","frame_mask1.png").setDepth(this.basedepth+20).setScale(.72),b=e.add.container(0,0),y=e.add.container(d-GameConfig.Screen.width/2+590,20),C=e.add.image(0,0,"setUp-atlas","frame_Information_floor.png"),x=e.add.text(-423,-10,instance.t("Event_5_C2_Pandora_91"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}),S=e.add.image(-400,85,"loading-icon-rose");const w=(null==(a=null==(n=e.game.GameData)?void 0:n.loginInfo)?void 0:a.nickName)||"";let T=e.add.text(-350,72,w,{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#a282c7"}),P=e.add.image(-293,160,"setUp-atlas","frame_Information_floor2.png"),_=(null==(o=null==(r=e.game.GameData)?void 0:r.loginInfo)?void 0:o.region)||"";""!=_&&(_=GameConfig.ServerText[_]);let M=e.add.text(-293,149,_,{fontSize:"24px",fontFamily:"SPIEGEL-REGULAR",color:"#6132a1"}).setOrigin(.5,0),O=e.add.image(330,60,"setUp-atlas","btn_frame_Information3.png").setInteractive().setVisible(!1),k=e.add.text(330,60,instance.t("Event_5_C2_Pandora_92"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,.5).setVisible(!1);k.setFontSize(24),k.displayWidth>O.displayWidth-50?StringFormatter.shrinkText(k,24,O.displayWidth-50,12):k.setFontSize(24);let $=e.add.image(330,118,"setUp-atlas","btn_frame_Information3.png").setInteractive().setVisible(!1),G=e.add.text(330,118,instance.t("Event_5_C2_Pandora_93"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,.5).setVisible(!1);G.setFontSize(24),G.displayWidth>$.displayWidth-55?StringFormatter.shrinkText(G,24,$.displayWidth-55,12):G.setFontSize(24);let E=e.add.image(330,176,"setUp-atlas","btn_frame_Information3.png").setInteractive().setVisible(!1),V=e.add.text(330,176,instance.t("Event_5_C2_Pandora_94"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,.5).setVisible(!1),R=e.add.image(0,240,"setUp-atlas","frame_Information_floor.png").setVisible(!1),I=e.add.text(-423,242,instance.t("Event_5_C2_Pandora_95"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5).setVisible(!1),A=e.add.image(-285,310,"setUp-atlas","btn_frame_Information4.png").setInteractive().setVisible(!1),D=e.add.text(-395,310,"ENGLISH",{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(0,.5).setVisible(!1),B=e.add.image(-180,310,"setUp-atlas","icom_set up.png").setVisible(!1),L=e.add.image(0,380,"setUp-atlas","frame_Information_floor.png"),F=e.add.text(-423,382,instance.t("Event_5_C2_Pandora_96"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),j=e.add.text(-405,440,`${instance.t("Event_5_C2_Pandora_97")}:`,{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),N=e.add.image(-380,500,"setUp-atlas","btn_selected.png").setInteractive(),z=e.add.text(-345,500,instance.t("Event_5_C2_Pandora_98"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),U=e.add.image(z.x+z.displayWidth+70,500,"setUp-atlas","btn_unselected.png").setInteractive(),W=e.add.text(U.x+35,500,instance.t("Event_5_C2_Pandora_99"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),Y=e.add.text(100,440,`${instance.t("Event_5_C2_Pandora_100")}:`,{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),X=e.add.image(120,500,"setUp-atlas","btn_selected.png").setInteractive(),H=e.add.text(155,500,instance.t("Event_5_C2_Pandora_98"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),q=e.add.image(H.x+H.displayWidth+70,500,"setUp-atlas","btn_unselected.png").setInteractive(),K=e.add.text(q.x+35,500,instance.t("Event_5_C2_Pandora_99"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),J=e.add.image(0,570,"setUp-atlas","frame_Information_floor.png"),Z=e.add.text(-423,572,instance.t("Event_5_C2_Pandora_101"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",color:"#6132a1"}).setOrigin(0,.5),Q=e.add.image(-253,640,"setUp-atlas","btn_frame_Information2.png").setInteractive(),ee=e.add.text(-253,640,instance.t("Event_5_C2_Pandora_102"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,.5),te=e.add.image(267,640,"setUp-atlas","btn_frame_Information2.png").setInteractive(),ie=e.add.text(267,640,instance.t("Event_5_C2_Pandora_103"),{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,.5);y.add([C,x,S,T,P,M,R,I,O,k,$,G,E,V,A,D,B,L,F,j,N,z,U,W,Y,X,H,q,K,J,Z,Q,ee,te,ie]);const se=e.add.container(d-GameConfig.Screen.width/2+280,20),ne=(t,i,s,n)=>{let a=e.add.container(t,i);const r=e.add.image(0,0,"setUp-atlas","btn_frame_Information_unselected.png").setInteractive();r.on("pointerdown",(()=>{this.selectedLanguage=s.type,this.createLanguageList(this.setUpInfo.lanConfig),this.getSettingSubmit(!0)}));const o=e.add.text(0,0,s.trans,{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#a282c7"}).setOrigin(.5,.5);return n?(r.setTexture("setUp-atlas","btn_frame_Information4.png"),o.setFill("#ffffff")):(r.setTexture("setUp-atlas","btn_frame_Information_unselected.png"),o.setFill("#a282c7")),a.add([r,o]),a};this.createLanguageList=(e=[])=>{se.removeAll(!0);for(let t=0;t<e.length;t++){const i=t%3*310,s=60*Math.floor(t/3),n=e[t].type==this.selectedLanguage,a=ne(i,s,e[t],n);se.add([a])}},b.add([y,se]),b.setDepth(this.basedepth+11),y.setDepth(this.basedepth+12),b.setSize(l-154,h-10),this.scrollTab=e.rexUI.add.scrollablePanel({x:d,y:c+40,width:p.displayWidth,height:380,scrollMode:"y",panel:{child:b,mask:{padding:1}},mouseWheelScroller:{focus:!1,speed:.1},space:{left:10,right:10,top:0,bottom:10},align:{panel:"center"}}).layout(),this.scrollTab.setDepth(this.basedepth+10),this.add([p,g,f,m,this.scrollTab,v]),$.on("pointerdown",(e=>{this.loginOut(e)})),O.on("pointerdown",(e=>{this.loginOut(e)})),E.on("pointerdown",(e=>{this.loginOut(e)})),N.on("pointerdown",(()=>{1!=this.audioType&&(this.bgAudioItem(1),this.getSettingSubmit())})),U.on("pointerdown",(()=>{0!=this.audioType&&(this.bgAudioItem(0),this.getSettingSubmit())})),X.on("pointerdown",(()=>{1!=this.sound&&(this.bgSoundItem(1),this.getSettingSubmit())})),q.on("pointerdown",(()=>{0!=this.sound&&(this.bgSoundItem(0),this.getSettingSubmit())})),A.on("pointerdown",(()=>{var e;y.setVisible(!1),se.setVisible(!0),null==(e=this.scrollTab)||e.scrollToTop()})),Q.on("pointerdown",(()=>{inGame()&&setFullScreen(!1),window.history.pushState({},"",window.location.href),window.location.href="https://www.riotgames.com/en/privacy-notice"})),te.on("pointerdown",(()=>{inGame()&&setFullScreen(!1),window.history.pushState({},"",window.location.href),window.location.href="https://www.riotgames.com/en/terms-of-service"})),inGame()?(L.setPosition(0,240),F.setPosition(-423,242),j.setPosition(-405,300),N.setPosition(-380,360),z.setPosition(-345,360),U.setPosition(z.x+z.displayWidth+70,360),W.setPosition(U.x+35,360),Y.setPosition(100,300),X.setPosition(120,360),H.setPosition(155,360),q.setPosition(H.x+H.displayWidth+70,360),K.setPosition(q.x+35,360),J.setPosition(0,430),Z.setPosition(-423,432),Q.setPosition(-253,500),ee.setPosition(-253,500),te.setPosition(267,500),ie.setPosition(267,500)):(O.setVisible(!0),k.setVisible(!0),$.setVisible(!0),G.setVisible(!0),E.setVisible(!0),V.setVisible(!0),R.setVisible(!0),I.setVisible(!0),A.setVisible(!0),D.setVisible(!0),B.setVisible(!0)),this.bgAudioItem=e=>{this.audioType=e,1==e?(N.setTexture("setUp-atlas","btn_selected.png"),U.setTexture("setUp-atlas","btn_unselected.png")):(U.setTexture("setUp-atlas","btn_selected.png"),N.setTexture("setUp-atlas","btn_unselected.png"))},this.bgSoundItem=e=>{this.sound=e,1==e?(X.setTexture("setUp-atlas","btn_selected.png"),q.setTexture("setUp-atlas","btn_unselected.png")):(q.setTexture("setUp-atlas","btn_selected.png"),X.setTexture("setUp-atlas","btn_unselected.png"))},this.getSetting=()=>{var t,i,s,n,a,r;if(null==(i=null==(t=e.game)?void 0:t.GameData)?void 0:i.settingInfo)return console.log("GameData",null==(n=null==(s=e.game)?void 0:s.GameData)?void 0:n.settingInfo),void this.setSetting(null==(r=null==(a=e.game)?void 0:a.GameData)?void 0:r.settingInfo);e.game.GameApi.getSetting().then((e=>{console.log("",e);const t=e.jData;this.setSetting(t)}))},this.setSetting=t=>{var i,s,n,a;const r=null==(i=Object.values(t.lanConfig||{}))?void 0:i.map(((e,t)=>({type:t+1,...e})));if(this.selectedLanguage=Number(t.iLanguage),this.createLanguageList(r),inGame()){const e=(null==(n=getUrlParams())?void 0:n.sLanguage)||"en_US",t=r.find((t=>t.key==e)).trans||"";D.setText(t)}else D.setText(null==(s=r[Number(t.iLanguage)-1])?void 0:s.trans);this.audioType=t.iIsOpenBgMusic,this.sound=t.iIsOpenBgMusicEffect,e.game.GameData.getUpInfo={audio:1==t.iIsOpenBgMusic,sound:1==t.iIsOpenBgMusicEffect,language:null==(a=r[Number(t.iLanguage)-1])?void 0:a.trans},this.bgAudioItem(t.iIsOpenBgMusic),this.bgSoundItem(t.iIsOpenBgMusicEffect),this.setUpInfo={...t,lanConfig:r}},this.getSettingSubmit=(t=!1)=>{e.game.GameApi.getSettingSubmit(this.audioType,this.sound,this.selectedLanguage).then((i=>{var s,n,a,r,o;console.log("",i);const l=i.jData;e.game.GameData.settingInfo.iIsOpenBgMusic=l.iIsOpenBgMusic,e.game.GameData.settingInfo.iIsOpenBgMusicEffect=l.iIsOpenBgMusicEffect,e.game.GameData.getUpInfo={audio:1==l.iIsOpenBgMusic,sound:1==l.iIsOpenBgMusicEffect,language:null==(s=this.setUpInfo[Number(l.iLanguage)-1])?void 0:s.trans},1==l.iIsOpenBgMusic?null==(n=e.game.AudioSetUp)||n.gameAudioType(!0):null==(a=e.game.AudioSetUp)||a.gameAudioType(!1);const h=null==(o=this.setUpInfo.lanConfig)?void 0:o[Number(null==(r=i.jData)?void 0:r.iLanguage)-1].key;localStorage.setItem("languageKey",h),t&&this.loginOut()}))},this.show=()=>{console.log(""),e.events.emit("disable_home_scale",{isOpen:!0}),this.getSetting(),e.tweens.add({targets:this,scale:1,alpha:1,duration:300,ease:"Back.Out",onComplete:()=>{var e;this.setVisible(!0),null==(e=this.scrollTab)||e.scrollToTop(),y.setVisible(!0),se.setVisible(!1),b.setSize(l-154,h-10)}})},this.hide=()=>{console.log(""),e.events.emit("disable_home_scale",{isOpen:!1}),e.tweens.add({targets:this,scale:.8,alpha:0,duration:200,ease:"Back.In",onComplete:()=>{this.setVisible(!1)}})},this.loginOut=e=>{if(!inGame())if(e){const{x:t,y:i}=e,s=this.scrollTab.getBounds();t>=d-75&&t<=d-75+s.width&&i>=c-150&&i<=c-150+400&&location.replace(GameConfig.Xsso.LOGOUTURL)}else location.replace(GameConfig.Xsso.LOGOUTURL)},this.setDepth(this.basedepth),this.onResize=(e,t)=>{var i,s;null==(i=null==u?void 0:u.setDisplaySize)||i.call(u,e,t),null==p||p.setPosition(e/2,t/2),null==g||g.setPosition(e/2,t/2-200),null==f||f.setPosition(e/2,t/2-160),null==m||m.setPosition(e/2+460,t/2-270),null==v||v.setPosition(e/2,t/2+178),null==(s=this.scrollTab)||s.setPosition(e/2,t/2+40),b.setSize(e-154,t-50)},this.setVisible(!1)}}class ShowFlat extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"basedepth",1e3);const{width:n,height:a}=e.cameras.main;this.bg=e.add.image(n/2,a/2,"house_background").setOrigin(0,0).setInteractive();const r=e.add.image(n/2+542,a/2-315,"common-atlas","btn_close2.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-20,-20,80,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0});r.on("pointerdown",(()=>{this.hide()}));const o=e.textures.get("house_background"),l=o.source[0].width,h=o.source[0].height;this.bgWidth=l,this.bgHeight=h;const d=n/l,c=a/h,u=1.2*Math.max(d,c);this.currentScale=u,this.minScale=u,this.maxScale=2.5*u,this.bg.setScale(u),this.bg.setPosition((n-l*u)/2,(a-h*u)/2),this.activePointers=new Map,this.minX=n-l*u,this.maxX=0,this.minY=a-h*u,this.maxY=0,this.show=()=>{console.log(" "),e.events.emit("disable_home_scale",{isOpen:!0}),this.setVisible(!0),this.setAlpha(0),e.tweens.add({targets:this,alpha:1,duration:300,ease:"Back.Out",onComplete:()=>{this.setupDragEvents()}})},this.hide=()=>{console.log(" "),e.events.emit("disable_home_scale",{isOpen:!1}),e.tweens.add({targets:this,alpha:0,duration:300,ease:"Back.Out",onComplete:()=>{this.removeDragEvents(),this.setVisible(!1)}})},this.onResize=(e,t)=>{null==r||r.setPosition(e/2+542,t/2-315)},this.setVisible(!1),this.setDepth(this.basedepth),this.add([this.bg,r])}setupDragEvents(){this.scene.input.on("pointerdown",this.onBackgroundPointerDown,this),this.scene.input.on("pointermove",this.onBackgroundPointerMove,this),this.scene.input.on("pointerup",this.onBackgroundPointerUp,this),this.scene.input.on("wheel",this.onMouseWheel,this)}removeDragEvents(){this.scene.input.off("pointerdown",this.onBackgroundPointerDown,this),this.scene.input.off("pointermove",this.onBackgroundPointerMove,this),this.scene.input.off("pointerup",this.onBackgroundPointerUp,this),this.scene.input.off("wheel",this.onMouseWheel,this)}onBackgroundPointerDown(e){if(this.operateHome=!0,this.activePointers.set(e.id,{x:e.x,y:e.y}),2===this.activePointers.size){this.isPinching=!0,this.isDragging=!1;const[e,t]=Array.from(this.activePointers.values());this.pinchStartDistance=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y),this.pinchStartScale=this.currentScale,this.pinchCenter={x:(e.x+t.x)/2,y:(e.y+t.y)/2}}else 1===this.activePointers.size&&(this.isDragging=!0,this.dragStartX=e.x,this.dragStartY=e.y,this.bgStartX=this.bg.x,this.bgStartY=this.bg.y)}onBackgroundPointerMove(e){if(this.operateHome)if(this.activePointers.has(e.id)&&this.activePointers.set(e.id,{x:e.x,y:e.y}),this.isPinching&&this.activePointers.size>=2){const[e,t]=Array.from(this.activePointers.values()),i=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);if(this.pinchStartDistance>0){let e=i/this.pinchStartDistance,t=Phaser.Math.Clamp(this.pinchStartScale*e,this.minScale,this.maxScale);this.setScaleAroundPoint(this.pinchCenter.x,this.pinchCenter.y,t)}}else if(this.isDragging&&1===this.activePointers.size){const t=e.x-this.dragStartX,i=e.y-this.dragStartY;let s=this.bgStartX+t,n=this.bgStartY+i;s=Phaser.Math.Clamp(s,this.minX,this.maxX),n=Phaser.Math.Clamp(n,this.minY,this.maxY),this.setAllPos(s,n)}}onBackgroundPointerUp(e){this.operateHome=!1,this.activePointers.delete(e.id),this.activePointers.size<2&&(this.isPinching=!1),0===this.activePointers.size&&(this.isDragging=!1)}onMouseWheel(e,t,i,s,n){const a=.001*-s;let r=Phaser.Math.Clamp(this.currentScale*(1+a),this.minScale,this.maxScale);this.setScaleAroundPoint(e.x,e.y,r)}setScaleAroundPoint(e,t,i){const s=this.currentScale;if(Math.abs(i-s)<1e-6)return;const n=(e-this.bg.x)/s,a=(t-this.bg.y)/s;this.currentScale=i,this.setAllScale(i,e,t);const r=this.scene.cameras.main.width,o=this.scene.cameras.main.height;this.minX=r-this.bgWidth*i,this.maxX=0,this.minY=o-this.bgHeight*i,this.maxY=0;let l=e-n*i,h=t-a*i;const d=this.constrainPositionToCoverScreen(l,h);d.x,d.y,this.bg.x=d.x,this.bg.y=d.y}setAllPos(e,t){this.bg.setPosition(e,t)}setAllScale(e){const t=e/(this.bg.scaleX||1);Math.abs(t-1)<1e-6||this.bg.setScale(e)}constrainPositionToCoverScreen(e,t){const i=this.scene.cameras.main.width,s=this.scene.cameras.main.height,n=this.bgWidth*this.currentScale,a=this.bgHeight*this.currentScale;let r=e,o=t;return n>=i?(r>0&&(r=0),r+n<i&&(r=i-n)):r=(i-n)/2,a>=s?(o>0&&(o=0),o+a<s&&(o=s-a)):o=(s-a)/2,{x:r,y:o}}}class Tools extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"setUpView"),__publicField(this,"showFlatView"),__publicField(this,"toolObg",{width:0}),__publicField(this,"expand",!1);let n=e.add.image(120,0,"plant_tool").setVisible(!1);this.toolObg.width=0,n.setCrop(0,0,this.toolObg.width,n.height);let a=e.add.image(0,0,"common-atlas","btn_ option.png").setInteractive(),r=e.add.image(0,0,"common-atlas","btn_set up.png").setInteractive().setVisible(!1),o=e.add.image(60,0,"common-atlas","btn_screenshot.png").setInteractive().setVisible(!1),l=e.add.image(120,0,"common-atlas","btn_notice.png").setInteractive().setVisible(!1),h=e.add.image(180,0,"yangbanjian").setInteractive().setVisible(!1),d=e.add.image(240,0,"common-atlas","btn_close4.png").setInteractive().setVisible(!1);const c=e.add.image(-20,-20,"icon_dots").setDepth(10).setVisible(!1),u=e.add.image(105,-20,"icon_dots").setDepth(10).setVisible(!1),p=()=>{const t=(e.game.GameData.annoucementInfo||[]).find((e=>0==e.isRead));t?this.expand?(u.setVisible(!0),c.setVisible(!1)):(c.setVisible(!0),u.setVisible(!1)):(c.setVisible(!1),u.setVisible(!1))};p(),a.on("pointerdown",(()=>{var t;e.game.gameState===GameConfig.GameState.NORMAL&&(null==(t=e.game.AudioSetUp)||t.play("toolClickAudio"),a.setVisible(!1),n.setVisible(!0),e.tweens.add({targets:this.toolObg,width:n.displayWidth,height:n.displayHeight,duration:300,ease:"Quad.easeOut",onUpdate:()=>{n.setCrop(0,0,this.toolObg.width,n.height),r.setVisible(!0),o.setVisible(!0),l.setVisible(!0),h.setVisible(!0),d.setVisible(!0),this.expand=!0,p()}}))})),o.on("pointerdown",(()=>{var t;e.game.gameState===GameConfig.GameState.NORMAL&&(null==(t=e.game.AudioSetUp)||t.play("toolClickAudio"),e.events.emit("camera-open",{type:1}))})),r.on("pointerdown",(()=>{var t;e.game.gameState===GameConfig.GameState.NORMAL&&(null==(t=e.game.AudioSetUp)||t.play("toolClickAudio"),this.setUpView||(this.setUpView=new SetUp(e)),this.setUpView.show())})),l.on("pointerdown",(()=>{var t;e.game.gameState===GameConfig.GameState.NORMAL&&(null==(t=e.game.AudioSetUp)||t.play("toolClickAudio"),e.events.emit("open_view",{viewName:"AnnouncementView"}))})),h.on("pointerdown",(()=>{var t;e.game.gameState===GameConfig.GameState.NORMAL&&(null==(t=e.game.AudioSetUp)||t.play("toolClickAudio"),this.showFlatView||(this.showFlatView=new ShowFlat(e)),this.showFlatView.show())})),d.on("pointerdown",(()=>{e.game.gameState===GameConfig.GameState.NORMAL&&(r.setVisible(!1),o.setVisible(!1),l.setVisible(!1),h.setVisible(!1),d.setVisible(!1),e.tweens.add({targets:this.toolObg,width:n.displayWidth,height:n.displayHeight,duration:300,ease:"Quad.easeOut",onUpdate:()=>{n.setCrop(0,0,this.toolObg.width,n.height),n.setVisible(!1),a.setVisible(!0),this.expand=!1,p()}}))})),e.events.on("close_view",(e=>{"AnnouncementView"==e.viewName&&p()})),this.setType=()=>{var e;this.setUpView&&(null==(e=this.setUpView)||e.hide())},this.onResize=(e,t)=>{var i,s;null==(i=this.setUpView)||i.onResize(e,t),null==(s=this.showFlatView)||s.onResize(e,t)},this.add([n,a,r,o,l,h,d,c,u])}}class Beginner extends Component{constructor(e,t,i,s){var n,a,r;super(e,t,i,s),__publicField(this,"basedepth",1e3),__publicField(this,"holeRadius",100),__publicField(this,"holeX",0),__publicField(this,"holeY",0),__publicField(this,"holeOtherX",0),__publicField(this,"holeOtherY",0),__publicField(this,"holeType",""),__publicField(this,"cardHoleData",{width:0,height:0,radius:0}),__publicField(this,"gestureX",0),__publicField(this,"gestureY",0),__publicField(this,"gestureYRotate",0),__publicField(this,"tipsContainerX",0),__publicField(this,"tipsContainerY",0),__publicField(this,"tipsOffectY",0),__publicField(this,"tipsOffectX",0),__publicField(this,"currentStep"),__publicField(this,"rewardsList",[]),__publicField(this,"isTipsCenter",!0);let o=e.cameras.main.width,l=e.cameras.main.height;const h=(null==(r=null==(a=null==(n=e.game)?void 0:n.GameData)?void 0:a.settingInfo)?void 0:r.languageKey)||"en_US",d=e.add.rectangle(0,0,o,l,0).setInteractive().setOrigin(0,0).setAlpha(0).setDepth(this.basedepth);let c=e.add.rectangle(0,0,o,l,0).setInteractive().setVisible(!1);c.setOrigin(0,0),c.setAlpha(.75),c.setDepth(this.basedepth+1);const u=e.add.container(0,0),p=e.add.graphics();p.fillStyle(0,.75),p.fillRect(0,0,o,l),p.setDepth(this.basedepth+10),p.setInteractive({hitArea:new Phaser.Geom.Rectangle(0,0,o,l),hitAreaCallback:Phaser.Geom.Rectangle.Contains,cursor:"default"});const g=e.add.graphics();g.fillStyle(16777215,1),g.visible=!1,g.fillCircle(t,i,this.holeRadius);const m=g.createGeometryMask();p.setMask(m),m.invertAlpha=!0,this.holeX=t,this.holeY=i,this.onDestroy=()=>{5!=this.currentStep&&15!=this.currentStep&&23!=this.currentStep&&46!=this.currentStep&&57!=this.currentStep||this.destroyLevelOneContainer(3),48==this.currentStep&&this.destroyLevelOneContainer(1)},this.lastClickMask=0,this.lastClickLayer=0,c.on("pointerdown",(()=>{if(c.visible){if(2==this.currentStep||36==this.currentStep||43==this.currentStep||58==this.currentStep)return;const e=Date.now();if(this.lastClickMask&&e-this.lastClickMask<300)return;this.lastClickMask=e,this.onDestroy(),this.submitGuide(this.currentStep)}})),p.on("pointerdown",(e=>{let t=!1;switch(this.holeType){case"radiu":t=Phaser.Math.Distance.Between(e.x,e.y,this.holeX,this.holeY)<=this.holeRadius;break;case"land":const i=new Phaser.Geom.Polygon([this.holeX+210,this.holeY+25,this.holeX+30,this.holeY+120,this.holeX-217,this.holeY-10,this.holeX-35,this.holeY-105]);t=Phaser.Geom.Polygon.Contains(i,e.x,e.y);break;case"card":const s=this.cardHoleData.width/2,n=this.cardHoleData.height/2;t=Math.abs(e.x-this.holeX)<=s&&Math.abs(e.y-this.holeY)<=n}(t||8==this.currentStep||11==this.currentStep||12==this.currentStep||19==this.currentStep||29==this.currentStep)&&this.submitGuide(this.currentStep)})),this.setDepth(this.basedepth),this.setVisible(!1),u.add([p,g]);let f=e.add.image(0,0,"bgginner_finger").setDepth(this.basedepth+21).setVisible(!1);this.radiuHole=(e,t,i)=>{this.holeX=e,this.holeY=t,this.holeRadius=i||this.holeRadius,g.clear(),g.fillStyle(16777215,1),g.fillCircle(e,t,i)},this.landHole=(e,t)=>{this.holeX=e,this.holeY=t,g.clear(),g.fillStyle(16777215,1),g.save(),g.translateCanvas(e,t);const i=[210,25,30,120,-217,-10,-35,-105];g.beginPath(),g.moveTo(i[0]-8,i[1]),g.lineTo(i[2],i[3]-8),g.lineTo(i[4]+8,i[5]),g.lineTo(i[6],i[7]+8),g.closePath(),g.fillPath(),g.restore()},this.cardHole=(e,t,i,s,n)=>{this.holeX=e,this.holeY=t,this.cardHoleData={width:i,height:s,radius:n},g.clear(),g.fillStyle(16777215,1),g.save(),g.translateCanvas(e,t);const a=i/2,r=s/2;g.beginPath(),g.moveTo(-a+n,-r),g.lineTo(a-n,-r),g.arc(a-n,-r+n,n,-Math.PI/2,0),g.lineTo(a,r-n),g.arc(a-n,r-n,n,0,Math.PI/2),g.lineTo(-a+n,r),g.arc(-a+n,r-n,n,Math.PI/2,Math.PI),g.lineTo(-a,-r+n),g.arc(-a+n,-r+n,n,Math.PI,1.5*Math.PI),g.closePath(),g.fillPath(),g.restore()};let v=e.add.container(0,0);this.tipsView=(t,i,s="",n="",a,r=0)=>{null==v||v.removeAll(!0),this.tipsLine=e.add.image(0,0,"bgginner_Indicator").setVisible(a);const o=GeneralRtl.rtlText(e,0,30,s,{fontSize:"24px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,0).setVisible(!1),l=GeneralRtl.rtlText(e,0,0,n,{fontSize:"20px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff",wordWrap:{width:420,useAdvancedWrap:!0},align:"center",lineSpacing:6}).setOrigin(.5,0).setVisible(!1);this.tipsbut=e.add.text(0,0,instance.t("Event_5_C2_Pandora_803"),{fontSize:"16px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff"}).setOrigin(.5,0),s?(o.setVisible(!0),n?(l.setPosition(0,o.y+o.displayHeight+20),this.tipsbut.setPosition(0,l.y+l.displayHeight+20)):this.tipsbut.setPosition(0,o.y+o.displayHeight+20)):(l.setPosition(0,30),this.tipsbut.setPosition(0,l.y+l.displayHeight+20)),n&&l.setVisible(!0);let h=0,d=60+this.tipsbut.displayHeight;s?(d+=o.displayHeight+20,h=o.displayWidth+70):h=l.displayWidth+70,n&&(d+=l.displayHeight+20),this.tipsBg=e.add.image(0,0,"bgginner_bg").setDepth(this.basedepth+20).setOrigin(.5,0),this.tipsBg.setDisplaySize(h,d),r?(this.tipsLine.setAngle(90),this.tipsLine.setPosition(-110,-20)):this.tipsLine.setPosition(-this.tipsBg.displayWidth/2-20,this.tipsBg.displayHeight/2),this.tipsOffectY=d/2,this.isTipsCenter?(null==v||v.setPosition(t,i-d/2),this.tipsOffectX=0):(null==v||v.setPosition(t-340+h/2,i-d/2),this.tipsOffectX=h/2-340),v.add([this.tipsBg,o,l,this.tipsbut,this.tipsLine])};let b=e.add.container(0,0);const y=(t,i)=>{e.game.GameData.dialog.guide=!0,this.background=e.add.image(o/2,l/2,"pop_small"),this.background.setDisplaySize(850,550);let s=e.add.container(0,0);this.oneTitle=e.add.dom(0,100).createFromHTML(`\n                    <div dir="${"ar_AE"==h?"rtl":"ltr"}" style="\n                        width: 700px;\n                        font-family: BeaufortforLOL-Bold;\n                        font-size: 24px;\n                        color: #a282c7;\n                        text-align: center;\n                    "></div>\n                `),this.oneTitle.node.querySelector("div").innerHTML=t,this.oneTitle.setDepth(this.basedepth+30),this.bbText=e.add.dom(0,150).createFromHTML(`<div dir="${"ar_AE"==h?"rtl":"ltr"}" style="\n                        width: 650px;\n                        height: 255px;\n                        font-family: BeaufortforLOL-Bold;\n                        font-size: 20px;\n                        color: #a282c7;\n                        overflow-y: scroll;\n                        "></div>`),this.bbText.node.querySelector("div").innerHTML=i,this.bbText.setOrigin(.5,0),this.bbText.addListener("click"),this.bbText.on("click",(e=>{"A"==e.target.tagName&&(e.preventDefault(),console.log(":",e.target.href),window.open(e.target.href))})),this.bbText.setDepth(this.basedepth+30);let n=e.add.image(0,410,"common-atlas","line_02.png");n.setDisplaySize(720,n.displayHeight),this.confrim_but=e.add.image(0,460,"loading-atlas","btn_confirm2.png").setInteractive(),this.confrim_but.on("pointerdown",(()=>{e.game.GameData.dialog.guide=!1,2==this.currentStep?e.game.GameApi.firstGift().then((e=>{const{rewards:t}=null==e?void 0:e.jData,i=t.map((e=>({itemCount:null==e?void 0:e.rewardAmount,itemId:null==e?void 0:e.rewardId})));this.rewardsList=i,this.submitGuide(this.currentStep)})):this.submitGuide(this.currentStep)})),s.add([this.oneTitle,this.bbText,n,this.confrim_but]),this.oneDialog=e.rexUI.add.dialog({x:o/2,y:l/2,width:this.background.displayWidth,height:this.background.displayHeight,background:this.background,content:s,space:{left:40,right:40},align:{title:"center",content:"center"}}).layout(),b.add([this.oneDialog])},C=()=>{e.game.RewardPopup.show(this.rewardsList,"store",1)};this.setStep=(t,i={})=>{EventBus.emit("guide_step",{step:t,content:i}),this.currentStep=t;const{title:s="",desc:n=""}=i;switch(t){case 1:case 4:c.setVisible(!1),u.setVisible(!1),null==b||b.setVisible(!1),f.setVisible(!1);break;case 2:c.setVisible(!0),u.setVisible(!1),b=e.add.container(0,0),b.setDepth(this.basedepth+20),null==b||b.setVisible(!0),f.setVisible(!1),e.tweens.killTweensOf(f),y(s,n),this.bbText.node.style.display="block",this.oneTitle.node.style.display="block";break;case 3:this.destroyLevelOneContainer(1),c.setVisible(!1),u.setVisible(!1),C(),f.setVisible(!1),e.tweens.killTweensOf(f);break;case 5:this.destroyLevelOneContainer(3),c.setVisible(!0),u.setVisible(!1),f.setVisible(!1),this.isTipsCenter=!0,this.tipsView(o/2,l/2,s,n,!1),this.tipsContainerX=0,this.tipsContainerY=-this.tipsOffectY,null==v||v.setVisible(!0);break;case 6:c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-350,this.gestureY=200,this.gestureYRotate=0,f.setPosition(o/2-350,l/2+200),this.holeOtherX=-350,this.holeOtherY=40,this.holeType="land",this.landHole(o/2-350,l/2+40),e.tweens.add({targets:f,y:l/2+250,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 7:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-410,this.gestureY=-220,this.gestureYRotate=180,f.setPosition(o/2-410,l/2-220),f.setAngle(180),this.holeOtherX=-408,this.holeOtherY=-106,this.holeType="radiu",this.radiuHole(o/2-408,l/2-106,38),e.tweens.add({targets:f,y:l/2-270,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 8:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),this.holeOtherX=-468,this.holeOtherY=-290,this.holeType="card",this.cardHole(o/2-468,l-290,167,210,12),this.isTipsCenter=!1,this.tipsView(o/2,l-300,s,n,!0),this.tipsContainerX=this.tipsOffectX,this.tipsContainerY=-300-this.tipsOffectY,null==v||v.setVisible(!0);break;case 9:this.destroyLevelOneContainer(3),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.isTipsCenter=!0,this.gestureX=-410,this.gestureY=-220,this.gestureYRotate=180,f.setPosition(o/2-410,l/2-220),f.setAngle(180),this.holeOtherX=-408,this.holeOtherY=-106,this.holeType="radiu",this.radiuHole(o/2-408,l/2-106,38),e.tweens.add({targets:f,y:l/2-270,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 10:this.destroyLevelOneContainer(2),this.destroyLevelOneContainer(3);break;case 11:c.setVisible(!1),u.setVisible(!0),f.setVisible(!1),this.holeOtherX=-350,this.holeOtherY=40,this.holeType="land",this.landHole(o/2-350,l/2+40),this.isTipsCenter=!0,this.tipsView(o/2+80,l/2+40,s,n,!0),this.tipsContainerX=80,this.tipsContainerY=40-this.tipsOffectY,null==v||v.setVisible(!0);break;case 12:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),this.holeOtherX=-462,this.holeOtherY=-106,this.holeType="radiu",this.radiuHole(o/2-462,l/2-106,38),this.isTipsCenter=!0,this.tipsView(o/2-350,l/2+80,s,n,!0,90),this.tipsContainerX=-350,this.tipsContainerY=80-this.tipsOffectY,null==v||v.setVisible(!0);break;case 13:this.destroyLevelOneContainer(2),null==v||v.setVisible(!1),this.destroyLevelOneContainer(1),this.holeType="";break;case 14:case 32:c.setVisible(!1),u.setVisible(!1),null==b||b.setVisible(!1),f.setVisible(!1),this.holeType="";break;case 15:c.setVisible(!0),this.destroyLevelOneContainer(2),this.holeType="",this.isTipsCenter=!0,this.tipsView(o/2,l/2,s,n,!1),this.tipsContainerX=0,this.tipsContainerY=-this.tipsOffectY,null==v||v.setVisible(!0);break;case 16:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),this.isTipsCenter=!0,c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-350,this.gestureY=200,this.gestureYRotate=0,f.setPosition(o/2-350,l/2+200),this.holeOtherX=-350,this.holeOtherY=40,this.landHole(o/2-350,l/2+40),this.holeType="land",e.tweens.add({targets:f,y:l/2+250,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 17:this.destroyLevelOneContainer(2),c.setVisible(!0),null==b||b.setVisible(!1),this.holeType="";break;case 18:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),this.isTipsCenter=!0,this.holeType="",f.setVisible(!0),this.gestureX=280,this.gestureY=137,this.gestureYRotate=180,f.setPosition(o/2+280,l/2+137),f.setAngle(180),e.tweens.add({targets:f,y:l/2+87,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300}),console.log("",f.visible);break;case 19:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),this.isTipsCenter=!1,this.holeOtherX=-468,this.holeOtherY=-290,this.holeType="card",this.cardHole(o/2-468,l-290,167,210,12),this.tipsView(o/2,l-300,s,n,!0),this.tipsContainerX=this.tipsOffectX,this.tipsContainerY=-300-this.tipsOffectY,null==v||v.setVisible(!0);break;case 20:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.isTipsCenter=!1,this.gestureX=-480,this.gestureY=-540,this.gestureYRotate=180,f.setPosition(o/2-480,l-540),f.setAngle(180),this.holeOtherX=-482,this.holeOtherY=-455,this.holeType="card",this.cardHole(o/2-482,l-455,150,55,12),e.tweens.add({targets:f,y:l-590,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 21:this.destroyLevelOneContainer(2),c.setVisible(!0),this.isTipsCenter=!1,this.holeType="",this.tipsView(o/2,l-300,s,n,!0),this.tipsContainerX=this.tipsOffectX,this.tipsContainerY=-300-this.tipsOffectY,null==v||v.setVisible(!0);break;case 22:this.destroyLevelOneContainer(3),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=480,this.gestureY=-550,this.gestureYRotate=180,f.setPosition(o/2+480,l-550),f.setAngle(180),this.isTipsCenter=!1,this.holeOtherX=470,this.holeOtherY=-461,this.holeType="card",this.cardHole(o/2+470,l-461,165,55,24),e.tweens.add({targets:f,y:l-600,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 23:case 48:case 57:this.destroyLevelOneContainer(2),c.setVisible(!0),this.isTipsCenter=!0,this.holeType="",this.tipsView(o/2,l/2,s,n,!1),this.tipsContainerX=0,this.tipsContainerY=-this.tipsOffectY,null==v||v.setVisible(!0);break;case 24:this.destroyLevelOneContainer(3),this.isTipsCenter=!0,c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-420,this.gestureY=140,this.gestureYRotate=0,f.setPosition(o/2-420,l/2+140),this.holeOtherX=-420,this.holeOtherY=-43,this.holeType="card",this.cardHole(o/2-420,l/2-43,190,250,12),e.tweens.add({targets:f,y:l/2+190,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 25:case 52:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=300,this.gestureY=130,this.gestureYRotate=180,f.setAngle(180),f.setPosition(o/2+300,l/2+130),this.isTipsCenter=!0,this.holeOtherX=295,this.holeOtherY=236,this.holeType="card",this.cardHole(o/2+295,l/2+236,224,57,30),e.tweens.add({targets:f,y:l/2+80,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 26:case 53:this.destroyLevelOneContainer(2),this.holeType="",c.setVisible(!1),null==b||b.setVisible(!1);break;case 27:c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.isTipsCenter=!0,this.gestureX=600,this.gestureY=-220,this.gestureYRotate=0,f.setPosition(o/2+600,l/2-220),this.holeOtherX=600,this.holeOtherY=-317,this.holeType="radiu",this.radiuHole(o/2+600,l/2-317,50),e.tweens.add({targets:f,y:l/2-170,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 28:this.destroyLevelOneContainer(2),this.isTipsCenter=!0,this.holeType="",c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=280,this.gestureY=137,this.gestureYRotate=180,f.setPosition(o/2+280,l/2+137),f.setAngle(180),e.tweens.add({targets:f,y:l/2+87,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 29:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!1),this.holeOtherX=-468,this.holeOtherY=-290,this.holeType="card",this.cardHole(o/2-468,l-290,167,210,12),this.isTipsCenter=!1,this.tipsView(o/2,l-300,s,n,!0),this.tipsContainerX=this.tipsOffectX,this.tipsContainerY=-300-this.tipsOffectY,null==v||v.setVisible(!0);break;case 30:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-350,this.gestureY=200,this.gestureYRotate=0,f.setPosition(o/2-350,l/2+200),this.isTipsCenter=!0,this.holeOtherX=-350,this.holeOtherY=40,this.holeType="land",this.landHole(o/2-350,l/2+40),e.tweens.add({targets:f,y:l/2+250,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 31:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-410,this.gestureY=-220,this.gestureYRotate=180,f.setPosition(o/2-410,l/2-220),f.setAngle(180),this.isTipsCenter=!0,this.holeOtherX=-408,this.holeOtherY=-106,this.holeType="radiu",this.radiuHole(o/2-408,l/2-106,38),e.tweens.add({targets:f,y:l/2-270,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 33:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-150,this.gestureY=90,this.gestureYRotate=0,f.setPosition(o/2-150,l/2+90),this.isTipsCenter=!0,this.holeOtherX=-150,this.holeOtherY=-70,this.holeType="land",this.landHole(o/2-150,l/2-70),e.tweens.add({targets:f,y:l/2+140,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 34:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-196,this.gestureY=-320,this.gestureYRotate=180,f.setPosition(o/2-196,l/2-320),f.setAngle(180),this.isTipsCenter=!0,this.holeOtherX=-197,this.holeOtherY=-213,this.holeType="radiu",this.radiuHole(o/2-197,l/2-213,38),e.tweens.add({targets:f,y:l/2-370,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 35:this.destroyLevelOneContainer(2),c.setVisible(!1),null==b||b.setVisible(!1),this.holeType="";break;case 36:case 58:c.setVisible(!0),u.setVisible(!1),b=e.add.container(0,0),b.setDepth(this.basedepth+20),null==b||b.setVisible(!0),f.setVisible(!1),y(s,n),this.bbText.node.style.display="block",this.oneTitle.node.style.display="block";break;case 37:this.destroyLevelOneContainer(1),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=578,this.gestureY=147,this.gestureYRotate=180,f.setPosition(o/2+578,l/2+147),f.setAngle(180),this.isTipsCenter=!0,this.holeType="",e.tweens.add({targets:f,y:l/2+97,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 38:case 39:case 41:case 42:c.setVisible(!1),u.setVisible(!1),f.setVisible(!1),e.tweens.killTweensOf(f);break;case 40:break;case 43:c.setVisible(!0),u.setVisible(!1),b=e.add.container(0,0),b.setDepth(this.basedepth+20),null==b||b.setVisible(!0),f.setVisible(!1),y(s,n),this.bbText.node.style.display="block",this.oneTitle.node.style.display="block",this.isTipsCenter=!0;break;case 44:this.destroyLevelOneContainer(1),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-578,this.gestureY=147,this.gestureYRotate=180,this.holeType="",f.setPosition(o/2-578,l/2+147),f.setAngle(180),this.isTipsCenter=!0,e.tweens.add({targets:f,y:l/2+97,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 45:this.destroyLevelOneContainer(2),e.time.delayedCall(1400,(()=>{c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=277,this.gestureY=147,this.gestureYRotate=180,f.setPosition(o/2+277,l/2+147),f.setAngle(180),this.isTipsCenter=!0,this.holeType="",e.tweens.add({targets:f,y:l/2+97,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300})}));break;case 46:this.destroyLevelOneContainer(2),c.setVisible(!0),this.isTipsCenter=!0,this.tipsView(o/2,l/2,s,n,!1),this.tipsContainerX=0,this.tipsContainerY=-this.tipsOffectY,null==v||v.setVisible(!0);break;case 47:c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=490,this.gestureY=190,this.gestureYRotate=90,f.setPosition(o/2+490,l/2+190),f.setAngle(90),this.isTipsCenter=!0,this.holeOtherX=581,this.holeOtherY=180,this.holeType="radiu",this.radiuHole(o/2+581,l/2+180,38),e.tweens.add({targets:f,x:o/2+440,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 49:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=460,this.gestureY=-550,this.gestureYRotate=180,f.setPosition(o/2+460,l-550),f.setAngle(180),this.isTipsCenter=!1,this.holeOtherX=455,this.holeOtherY=-465,this.holeType="card",this.cardHole(o/2+455,l-465,165,55,24),e.tweens.add({targets:f,y:l-600,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 50:this.destroyLevelOneContainer(3),this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.isTipsCenter=!0,this.gestureX=-585,this.gestureY=-135,this.gestureYRotate=180,f.setPosition(o/2-585,l/2-135),f.setAngle(180),this.holeOtherX=-583,this.holeOtherY=-22,this.holeType="card",this.cardHole(o/2-583,l/2-22,84,105,8),e.tweens.add({targets:f,y:l/2-185,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 51:this.destroyLevelOneContainer(2),this.destroyLevelOneContainer(3),this.isTipsCenter=!0,c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-420,this.gestureY=140,this.gestureYRotate=0,f.setPosition(o/2-420,l/2+140),this.holeOtherX=-420,this.holeOtherY=-43,this.holeType="card",this.cardHole(o/2-420,l/2-43,190,250,12),e.tweens.add({targets:f,y:l/2+190,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 54:c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.isTipsCenter=!0,this.gestureX=600,this.gestureY=-220,this.gestureYRotate=0,f.setAngle(0),f.setPosition(o/2+600,l/2-220),this.holeOtherX=600,this.holeOtherY=-317,this.holeType="radiu",this.radiuHole(o/2+600,l/2-317,50),e.tweens.add({targets:f,y:l/2-170,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 55:this.destroyLevelOneContainer(2),c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=490,this.gestureY=190,this.gestureYRotate=90,f.setPosition(o/2+490,l/2+190),f.setAngle(90),this.isTipsCenter=!0,this.holeOtherX=581,this.holeOtherY=180,this.holeType="radiu",this.radiuHole(o/2+581,l/2+180,38),e.tweens.add({targets:f,x:o/2+440,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 56:this.destroyLevelOneContainer(2),this.isTipsCenter=!1,c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),this.gestureX=-120,this.gestureY=-450,this.gestureYRotate=180,f.setPosition(o/2-120,l-450),f.setAngle(180),this.holeOtherX=-112,this.holeOtherY=-285,this.holeType="card",this.cardHole(o/2-112,l-285,167,210,12),e.tweens.add({targets:f,y:l-500,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 59:this.destroyLevelOneContainer(1),this.destroyLevelOneContainer(2),this.isTipsCenter=!0,c.setVisible(!1),u.setVisible(!0),f.setVisible(!0),f.setPosition(o/2+578,l/2+147),f.setAngle(180),this.holeType="",e.tweens.add({targets:f,y:l/2+97,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300});break;case 60:this.destroyLevelOneContainer(1),this.destroyLevelOneContainer(2),c.setVisible(!1)}},this.destroyLevelOneContainer=t=>{var i,s;switch(t){case 1:b&&(this.bbText&&(this.bbText.node.style.display="none"),this.oneTitle&&(this.oneTitle.node.style.display="none"),null==(i=this.confrim_but)||i.off("pointerdown"),b.removeAll(!0),b.destroy(),b=null,this.confrim_but=null,this.oneDialog=null);break;case 2:u.setVisible(!1),f.setVisible(!1),e.tweens.killTweensOf(f),f.setAngle(0),g.clear();break;case 3:null==(s=this.tipsBg)||s.off("pointerdown"),null==v||v.setVisible(!1)}},this.add([d,c,u,b,v,f]),this.submitGuide=t=>{var i,s,n,a,r,o;const l=e.game.GameData.guideConfig;0==(null==(s=null==(i=e.game.GameData)?void 0:i.guideData)?void 0:s.isCompleted)&&(t<57&&(null==(a=null==(n=e.game.GameData)?void 0:n.userInfo)?void 0:a.iLevel)<3||t>57&&3==(null==(o=null==(r=e.game.GameData)?void 0:r.userInfo)?void 0:o.iLevel)?(e.currentStep=t+1,this.setStep(e.currentStep,null==l?void 0:l[e.currentStep])):d.setVisible(!1)),e.game.GameApi.submitGuide(t).then((t=>{console.log("",t);const{isCompleted:i,nextStep:s,content:n}=t.jData;e.game.GameData.guideData&&(e.game.GameData.guideData.curStep=s,e.game.GameData.guideData.isCompleted=i),0==i||(this.destroyLevelOneContainer(3),c.setVisible(!1),u.setVisible(!1),null==b||b.setVisible(!1),f.setVisible(!1),d.setVisible(!1))})).catch((()=>{57!=t&&62!=t||(e.game.GameData.guideData.isCompleted=1)}))},EventBus.on("task-submit-guide",(e=>{console.log("",e),this.submitGuide(e.val)})),this.show=()=>{e.tweens.add({targets:this,alpha:1,duration:500,ease:"Power2",onStart:()=>{this.setVisible(!0)}})},this.hide=()=>{e.tweens.add({targets:this,alpha:0,duration:500,ease:"Power2",onComplete:()=>{this.setVisible(!1)}})},this.onResize=(t,i)=>{var s,n;if(o=t,l=i,null==(s=null==c?void 0:c.setDisplaySize)||s.call(c,t,i),null==(n=this.oneDialog)||n.setPosition(t/2,i/2),p.disableInteractive(),p.setInteractive({hitArea:new Phaser.Geom.Rectangle(0,0,t,i),hitAreaCallback:Phaser.Geom.Rectangle.Contains,cursor:"default"},!0),p.visible){if(p.disableInteractive(),p.clear(),p.fillStyle(0,.75),p.fillRect(0,0,t,i),p.setInteractive({hitArea:new Phaser.Geom.Rectangle(0,0,t,i),hitAreaCallback:Phaser.Geom.Rectangle.Contains,cursor:"default"},!0),u.visible&&(this.isTipsCenter?("radiu"==this.holeType&&this.radiuHole(t/2+this.holeOtherX,i/2+this.holeOtherY,this.holeRadius),"land"==this.holeType&&this.landHole(t/2+this.holeOtherX,i/2+this.holeOtherY),"card"==this.holeType&&this.cardHole(t/2+this.holeOtherX,i/2+this.holeOtherY,this.cardHoleData.width,this.cardHoleData.height,this.cardHoleData.radius)):("radiu"==this.holeType&&this.radiuHole(t/2+this.holeOtherX,i+this.holeOtherY,this.holeRadius),"land"==this.holeType&&this.landHole(t/2+this.holeOtherX,i+this.holeOtherY),"card"==this.holeType&&this.cardHole(t/2+this.holeOtherX,i+this.holeOtherY,this.cardHoleData.width,this.cardHoleData.height,this.cardHoleData.radius))),f.visible)if(this.isTipsCenter)if(f.setPosition(t/2+this.gestureX,i/2+this.gestureY),f.setAngle(this.gestureYRotate),e.tweens.killTweensOf(f),90==this.gestureYRotate){let i=t/2+this.gestureX-50;e.tweens.add({targets:f,x:i,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300})}else{let t=0;0==this.gestureYRotate?t=i/2+this.gestureY+50:180==this.gestureYRotate&&(t=i/2+this.gestureY-50),e.tweens.add({targets:f,y:t,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300})}else{f.setPosition(t/2+this.gestureX,i+this.gestureY),f.setAngle(this.gestureYRotate),e.tweens.killTweensOf(f);let s=i+this.gestureY-50;e.tweens.add({targets:f,y:s,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,delay:300})}v.visible&&(this.isTipsCenter?v.setPosition(t/2+this.tipsContainerX,i/2+this.tipsContainerY):v.setPosition(t/2+this.tipsContainerX,i+this.tipsContainerY)),24!=this.currentStep&&51!=this.currentStep||this.cardHole(t/2+this.holeOtherX,i/2+this.holeOtherY+10,this.cardHoleData.width,this.cardHoleData.height,this.cardHoleData.radius)}}}}class AllInterface extends Component{constructor(e,t,i,s){super(e,t,i,s),this.bagInterface=t=>{e.game.GameApi.getPackageItems(t).then((i=>{var s,n,a,r,o,l;console.log("",i);const{packageInfo:h}=i.jData;1==t&&(null==(n=null==(s=e.game.GameData.infoData)?void 0:s.bag)?void 0:n.seeds)&&(e.game.GameData.infoData.bag.seeds=h),2==t&&(null==(r=null==(a=e.game.GameData.infoData)?void 0:a.bag)?void 0:r.flowers)&&(e.game.GameData.infoData.bag.flowers=h),3==t&&(null==(l=null==(o=e.game.GameData.infoData)?void 0:o.bag)?void 0:l.builds)&&(e.game.GameData.infoData.bag.builds=h)}))},this.storeInterface=(t,i="")=>{var s,n,a,r,o,l;let h=null;1==t?h=null==(n=null==(s=e.game.GameData.infoData)?void 0:s.shop)?void 0:n.seeds:2==t?h=null==(r=null==(a=e.game.GameData.infoData)?void 0:a.shop)?void 0:r.builds:3==t&&(h=null==(l=null==(o=e.game.GameData.infoData)?void 0:o.shop)?void 0:l.gameItems),e.game.GameApi.getStoreItems(t).then((s=>{var n,a,r,o,l,d;console.log("",s);const{storeInfo:c}=s.jData;DeepEqualConpare.deepEqual(h,c)||(1==t&&(null==(a=null==(n=e.game.GameData.infoData)?void 0:n.shop)?void 0:a.seeds)&&(console.log(""),e.game.GameData.infoData.shop.seeds=c,EventBus.emit("shop-summary")),2==t&&(null==(o=null==(r=e.game.GameData.infoData)?void 0:r.shop)?void 0:o.builds)&&(console.log(""),e.game.GameData.infoData.shop.builds=c),3==t&&(null==(d=null==(l=e.game.GameData.infoData)?void 0:l.shop)?void 0:d.gameItems)&&(console.log(""),e.game.GameData.infoData.shop.gameItems=c),"exchange"==i&&e.events.emit("exchange_success"))}))},this.getShopItems=()=>{e.game.GameApi.getShopItems().then((t=>{console.log("",t),e.game.GameData.infoData.shop=t.jData.shop,EventBus.emit("shop-summary")}))},this.orderMission=()=>{e.game.GameApi.getOrderMission().then((t=>{e.game.GameData.infoData.mission.order=t.jData}))},this.getAllMissions=()=>{e.game.GameApi.getAllMissions().then((t=>{var i;e.game.GameData.infoData.mission=null==(i=t.jData)?void 0:i.mission}))},this.getHouseShow=()=>{e.game.GameApi.getHouseShow().then((t=>{var i;console.log("",t),e.game.GameData.buildingList=null==(i=null==t?void 0:t.jData)?void 0:i.homeList}))}}}class PropTips extends Component{constructor(e,t,i,s){super(e,t,i,s),__publicField(this,"type");const n=e.add.rectangle(0,0,e.cameras.main.width,e.cameras.main.height,0,0);n.setOrigin(0),n.setDepth(1001),n.setInteractive();const a=e.add.container(0,0),r=e.add.image(0,0,"prop_tips_bg").setOrigin(.5,.5),o=e.add.text(0,0,"",{fontFamily:"BeaufortforLOL-Bold",fontSize:"22px",fill:"#835933"}).setOrigin(.5,.5),l=e.add.image(0,0,"prop_tips_flower").setOrigin(.5,.5),h=e.add.image(0,0,"prop_tips_flower").setOrigin(.5,.5);h.setAngle(180),a.add([r,o,l,h]),this.show=(t,i)=>{this.currentPage=e.currentPage,this.type=t,o.setText(instance.t(i));const s=o.width+60,n=r.height;r.setDisplaySize(s,n),o.setPosition(0,0);const d=s/2-l.width;l.setPosition(-d,0),h.setPosition(d,0),1==t&&(4==this.currentPage?a.setPosition(e.cameras.main.width/2+355,e.cameras.main.height/2-265):a.setPosition(e.cameras.main.width/2+175,e.cameras.main.height/2-265)),2==t&&a.setPosition(e.cameras.main.width/2+355,e.cameras.main.height/2-265),3==t&&a.setPosition(e.cameras.main.width/2-533,e.cameras.main.height/2-265),this.setVisible(!0)},n.on("pointerdown",((e,t,i,s)=>{s.stopPropagation(),this.setVisible(!1)})),this.add([n,a]),this.setDepth(1e3),this.setVisible(!1),this.onResize=(e,t)=>{n.setDisplaySize(e,t),1==this.type&&(4==this.currentPage?a.setPosition(e/2+355,t/2-265):a.setPosition(e/2+175,t/2-265)),2==this.type&&a.setPosition(e/2+355,t/2-265),3==this.type&&a.setPosition(e/2-533,t/2-265)}}}class AnnouncementView extends Page{constructor(e,t){var i,s,n;super(e,t),__publicField(this,"uiKey","AnnouncementView"),__publicField(this,"basedepth",100),__publicField(this,"selectIndex",0);let a=e.game.GameData.annoucementInfo;console.log("------",a);const r=(null==(n=null==(s=null==(i=e.game)?void 0:i.GameData)?void 0:s.settingInfo)?void 0:n.languageKey)||"en_US",{width:o,height:l}=e.cameras.main;let h=e.add.image(o/2,l/2,"store_bg");h.setInteractive().setDepth(this.basedepth),this.add(h);let d=GeneralRtl.rtlText(e,o/2-600,l/2-330,instance.t("Event_5_C2_Pandora_59"),{fontSize:"32px",fontFamily:"BeaufortforLOL-Bold",fill:"#f9e0b4"}).setOrigin(0,0);d.setDepth(this.basedepth+10);let c=e.add.image(o/2+600,l/2-315,"announcement-atlas","btn_close.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-20,-20,80,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0});c.on("pointerdown",(()=>{var t;null==(t=e.game.AudioSetUp)||t.play("bagCloseAudio"),this.slideOut()})),c.setDepth(this.basedepth+10);const u=e.add.image(o/2,l/2+50,"announcement-atlas","tab_frame_framepanel6.png").setDepth(this.basedepth+1),p=e.add.container(o/2-110,l/2-220).setDepth(this.basedepth+10),g=GeneralRtl.rtlText(e,0,10,"",{fontSize:"26px",fontFamily:"BeaufortforLOL-Bold",fill:"#6132a1"}).setOrigin(0,.5),m=e.add.image(-60,60,"announcement-atlas","line_02.png").setOrigin(0,.5),f=e.add.image(-51,-50,"announcement-atlas","line_03.png").setOrigin(.5,0),v=e.add.text(0,105,instance.t("Event_5_C2_Pandora_60"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",fill:"#6132a1"}).setOrigin(0,.5),b=GeneralRtl.rtlText(e,v.x+v.displayWidth+10,105,"",{fontSize:"20px",fontFamily:"SPIEGEL-REGULAR",fill:"#cfb88d"}).setOrigin(0,.5),y=e.add.text(-2,145,instance.t("Event_5_C2_Pandora_61"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",fill:"#6132a1"}).setOrigin(0,.5),C=e.add.text(y.x+y.displayWidth+10,145,"",{fontSize:"20px",fontFamily:"SPIEGEL-REGULAR",fill:"#cfb88d"}).setOrigin(0,.5),x=e.add.text(0,220,instance.t("Event_5_C2_Pandora_62"),{fontSize:"22px",fontFamily:"BeaufortforLOL-Bold",fill:"#6132a1"}).setOrigin(0,.5),S=e.add.dom(0,250).createFromHTML(`<div dir="${"ar_AE"==r?"rtl":"ltr"}" style="\n            width: 680px;\n            height: 300px;\n            fontFamily: 'SPIEGEL-REGULAR';\n            font-size: 20px;\n            color: #5574c3;\n            overflow-y: scroll;\n            "></div>`),w=S.node.querySelector("div");w.innerHTML="",S.setOrigin(0,0),S.addListener("click"),S.on("click",(e=>{"A"==e.target.tagName&&(e.preventDefault(),inGame()&&setFullScreen(!1),window.location.href=e.target.innerText)})),p.add([g,m,v,b,y,C,x,S,f]);const T=()=>{const e=null==a?void 0:a[this.selectIndex];g.setText(null==e?void 0:e.title),b.setText(null==e?void 0:e.from),C.setText(null==e?void 0:e.publishTime),w.innerHTML=null==e?void 0:e.content};let P=e.add.container(0,0);const _=e=>{if(!this.scrollTab||!P)return;const t=this.scrollTab.height,i=110*e+35-t/2+55,s=P.height-t,n=Phaser.Math.Clamp(i,0,s);this.scrollTab.setChildOY(-n)},M=(t,i)=>{const s=110*i+35,n=e.add.container(0,s),r=e.add.rectangle(0,20,480,110).setOrigin(0,.5).setDepth(this.basedepth+50);r.setInteractive({useHandCursor:!0});const o=e.add.image(55,20,"announcement-atlas","icon_mission_Not read.png"),l=(t=>{const i={fontSize:"20px",fontFamily:"BeaufortforLOL-Bold",color:"#ffffff",wordWrap:{width:250,useAdvancedWrap:!0},lineSpacing:8},s=e.add.text(90,20,t,i).setOrigin(0,.5),n=s.getWrappedText(t);if(n.length>2){let t=n.slice(0,2).join("\n");const a=n[1];let r=a.substring(0,a.length-5);for(;r.length>0;){const s=r+"...",a=e.add.text(0,0,s,i).setVisible(!1),o=a.width;if(a.destroy(),o<=250){t=n.slice(0,1).join("\n")+"\n"+s;break}r=r.slice(0,-1)}s.setText(t)}return s})(t.title),h=e.add.text(440,10,t.publishTime,{fontFamily:"SPIEGEL-REGULAR",fontSize:"18px",fill:"#d9d6ff"}).setOrigin(0,0);h.setPosition(440-h.displayWidth,10);const d=e.add.image(445,-10,"announcement-atlas","icon_dots.png").setVisible(!1),c=e.add.image(-13,20,"announcement-atlas","tab_Backpack_select.png").setOrigin(0,.5).setVisible(!1);return this.selectIndex==i?(c.setVisible(!0),l.setFill("#ffffff"),h.setFill("#eeceff"),d.setVisible(!1),o.setFrame("icon_mission_read.png")):(c.setVisible(!1),l.setFill(t.isRead?"#8fa0ec":"#314e9d"),h.setFill(t.isRead?"#b1bef8":"#8155c3"),o.setFrame(t.isRead?"icon_mission_read2.png":"icon_mission_Not read.png"),d.setVisible(0==t.isRead)),n.add([r,c,o,l,h,d]),r.on("pointerdown",(()=>{var e,t;this.selectIndex!=i&&(this.selectIndex=i,O(),T(),this.renderList(),_(i),0==(null==(e=a[this.selectIndex])?void 0:e.isRead)&&this.readAnnoucement(null==(t=a[this.selectIndex])?void 0:t.id))})),n},O=()=>{P.getAll().forEach(((e,t)=>{const i=e.getAt(1),s=e.getAt(3),n=e.getAt(4),r=e.getAt(5);if(t==this.selectIndex)i.setVisible(!0),s.setFill("#ffffff"),n.setFill("#d9d6ff"),r.setVisible(!1);else{i.setVisible(!1);const e=a[t];s.setFill(e.isRead?"#8fa0ec":"#314e9d"),n.setFill(e.isRead?"#b1bef8":"#5574c3"),r.setVisible(0===e.isRead)}}))};this.renderList=()=>{P.removeAll(!0),a.forEach(((e,t)=>{const i=M(e,t);P.add(i)}))};const k=110*a.length+10;P.setSize(480,k),this.scrollTab=e.rexUI.add.scrollablePanel({x:o/2-385,y:l/2+50,width:480,height:635,scrollMode:0,panel:{child:P,mask:{padding:1}},mouseWheelScroller:{focus:!1,speed:.1},space:{left:0,right:0,top:10,bottom:0},align:{panel:"center"}}).layout(),this.scrollTab.setDepth(this.basedepth+1e4),this.readAnnoucement=t=>{e.game.GameApi.readAnnoucement(t).then((t=>{e.game.GameApi.getAnnoucement().then((t=>{var i,s;console.log("",t),e.game.GameData.annoucementInfo=null==(i=null==t?void 0:t.jData)?void 0:i.list,a=null==(s=null==t?void 0:t.jData)?void 0:s.list,this.renderList()}))}))},this.slideIn=()=>{var t,i;e.tweens.add({targets:this,y:e.cameras.main.height/2+50,delay:300,loop:0,duration:10,ease:"Power2"}).play(),this.show(),this.renderList(),T(),null==(t=this.scrollTab)||t.scrollToTop();const s=null==(i=e.game.GameData.annoucementInfo)?void 0:i[this.selectIndex];0==(null==s?void 0:s.isRead)&&this.readAnnoucement(null==s?void 0:s.id)},this.slideOut=()=>{e.tweens.add({targets:this,y:2*e.cameras.main.height,duration:200,ease:"Power2",onComplete:()=>{this.hide(),e.events.emit("close_view",{viewName:this.uiKey})}}).play()},this.addMultiple([c,d,u,this.scrollTab,p]),this.onResize=(e,t)=>{var i;null==h||h.setPosition(e/2,t/2),null==d||d.setPosition(e/2-600,t/2-330),null==c||c.setPosition(e/2+600,t/2-315),null==u||u.setPosition(e/2,t/2+50),null==p||p.setPosition(e/2-110,t/2-220),null==(i=this.scrollTab)||i.setPosition(e/2-385,t/2+50)},this.setVisible(!1)}}class Game extends phaserExports.Scene{constructor(){super("Game"),__publicField(this,"userInfoView"),__publicField(this,"bagView"),__publicField(this,"storeview"),__publicField(this,"curPageView"),__publicField(this,"homeView"),__publicField(this,"historyPages",[]),__publicField(this,"currencyArr",[]),__publicField(this,"houseFarmToggleBtn"),__publicField(this,"isShowFlowerPanel"),__publicField(this,"levelUpView"),__publicField(this,"houseBagView"),__publicField(this,"currentPage"),__publicField(this,"currentView"),__publicField(this,"isMessageView",!1),__publicField(this,"tools"),__publicField(this,"beginner"),__publicField(this,"currentStep"),__publicField(this,"propTips"),__publicField(this,"previousView",null),__publicField(this,"announcement"),__publicField(this,"currentShopTab",0),__publicField(this,"isLevelUp",!1),__publicField(this,"seedsNumType",!1)}init(e){const{pageViewKey:t}=e;this.historyPages=[],this.events.on("open_view",this.onOpenView,this),this.events.on("close_view",this.onCloseView,this),this.events.on("event-level-up",this.onLevelUp,this),this.events.on("level-up-type",this.changeLevel,this),EventBus.on("open_view",this.onOpenView,this),EventBus.on("close_view",this.onCloseView,this)}create(){var t;this.cameras.main.fadeIn(1e3),this.game.Tips=new MessagePopup(this),this.game.allInterface=new AllInterface(this),this.game.propTips=new PropTips(this),this.game.RewardPopup=new RewardPopup(this),this.onEvents();try{this.input.addPointer(2);const e=this.sys.game.canvas;e&&e.style&&(e.style.touchAction="none"),this.input.touch&&(this.input.touch.capture=!0)}catch(e){console.warn("touch init warn:",e)}this.game.gameState=GameConfig.GameState.NORMAL;const i=this.cameras.main.width/2-GameConfig.Screen.width/2,s=this.cameras.main.height/2-GameConfig.Screen.height/2;this.userInfoView=new UserInfoView(this,i+200,s+70),this.userInfoView.setUserInfo(this.game.GameData.loginInfo,this.game.GameData.userInfo),this.userInfoView.setDepth(320),this.tools=new Tools(this,i+420,s+60),this.tools.setDepth(320);const n=[1080,900,720];n.forEach(((e,t)=>{const n=new Currency(this,i+e,s+60);n.setDepth(520),this.currencyArr.push(n)})),this.setCurrencyNav(),this.entranceGroup=this.add.group(),this.houseFarmToggleBtn=new EntranceButton(this,this.entranceGroup,"btn_home_normal.png",instance.t("Event_5_C2_Pandora_16"),"HomeView"),this.bagBtn=new EntranceButton(this,this.entranceGroup,"btn_plants.png",instance.t("Event_5_C2_Pandora_17"),"BagView"),this.btnStore=new EntranceButton(this,this.entranceGroup,"btn_store_normal (2).png",instance.t("Event_5_C2_Pandora_18"),"StoreView"),this.btnMission=new EntranceButton(this,this.entranceGroup,"btn_mission_normal.png",instance.t("Event_5_C2_Pandora_19"),"MissionsView"),this.houseFarmToggleBtn.setPosition(i+100,s+640),this.bagBtn.setPosition(i+950,s+635),this.btnStore.setPosition(i+1100,s+635),this.btnMission.setPosition(i+1250,s+635),this.bagBtn.setDepth(320),this.btnStore.setDepth(320),this.btnMission.setDepth(320),this.houseFarmToggleBtn.setDepth(321),this.summary=this.add.image(this.cameras.main.width/2+550,this.cameras.main.height/2+240,"icon_dots").setDepth(321).setVisible(!1),this.getGameOrderSummary(),this.shopSummary=this.add.image(this.cameras.main.width/2+399,this.cameras.main.height/2+240,"icon_dots").setDepth(321).setVisible(!1),this.getGameShopSummary(),this.closeCamera=this.add.image(this.cameras.main.width/2+542,this.cameras.main.height/2-315,"common-atlas","btn_close2.png").setInteractive({hitArea:new Phaser.Geom.Rectangle(-20,-20,80,80),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).setVisible(!1).setDepth(22),this.closeCamera.on("pointerdown",(()=>{var e,t,i,s;null==(e=this.game.AudioSetUp)||e.play("bagCloseAudio"),this.closeCamera.setVisible(!1),this.game.gameState=GameConfig.GameState.NORMAL,null==(t=this.tools)||t.setVisible(!0),null==(i=this.entranceGroup)||i.children.iterate((e=>{e.setVisible(!0)})),this.setCurrencyNav(),this.getGameOrderSummary(),this.getGameShopSummary(),this.events.emit("camera-open",{type:2}),null==(s=this.closeGame)||s.setVisible(!0)})),this.closeGame=null,inGame()&&(this.closeGame=this.add.image(this.cameras.main.width-65,s+60,"plant","btn_close.png"),this.closeGame.setDepth(320),this.closeGame.setInteractive({hitArea:new Phaser.Geom.Rectangle(-10,-30,70,70),hitAreaCallback:Phaser.Geom.Rectangle.Contains,useHandCursor:!0}).on("pointerdown",(()=>{closeWebview()}))),this.isShowFlowerPanel=!1,this.currentPage=0,this.cloudSpine=this.add.spine(this.cameras.main.width/2,this.cameras.main.height/2,"cloud-data","cloud-atlas").setVisible(!1),this.cloudSpine.setDepth(1010),this.currentView="FarmView",this.currentStep=this.game.GameData.guideData.curStep,this.firstStep=this.game.GameData.guideData.curStep,0==(null==(t=this.game.GameData.guideData)?void 0:t.isCompleted)&&(this.currentStep>0&&this.currentStep<4||this.currentStep>44&&this.currentStep<58)?(this.currentView="HomeView",this.onOpenView({viewName:"HomeView"})):(this.currentView="FarmView",this.onOpenView({viewName:"FarmView"})),this.getGuide(),this.input.on("pointerdown",(e=>{e.event&&e.event.isTrusted&&(console.log("game onClick"),setTimeout((()=>{window.screen.width>window.screen.height&&!inGame()&&isMobile(this.sys.game)&&toggleFullScreen()}),100))})),this.scale.on("resize",(function(e){var t,i,s,a,r,o,l,h,d,c,u,p,g,m=e.width,f=e.height;this.cameras.resize(m,f);const v=this.cameras.main.width/2-GameConfig.Screen.width/2,b=this.cameras.main.height/2-GameConfig.Screen.height/2;null==(t=this.plantView)||t.onResize(m,f),null==(i=this.bagView)||i.onResize(m,f),null==(s=this.storeview)||s.onResize(m,f),null==(a=this.homeView)||a.onResize(m,f),null==(r=this.levelUpView)||r.onResize(m,f),null==(o=this.houseBagView)||o.onResize(m,f),null==(l=this.tools)||l.onResize(m,f),null==(h=this.userInfoView)||h.setPosition(v+200,b+80),null==(d=this.tools)||d.setPosition(v+420,b+60),this.currencyArr.forEach(((e,t)=>{e.setPosition(v+n[t],b+60)})),this.summary.setPosition(m/2+550,f/2+240),this.shopSummary.setPosition(m/2+399,f/2+240),this.closeCamera.setPosition(m/2+542,f/2-315),this.cameras.main.width,this.houseFarmToggleBtn.setPosition(v+100,b+640),this.bagBtn.setPosition(v+950,b+635),this.btnStore.setPosition(v+1100,b+635),this.btnMission.setPosition(v+1250,b+635),null==(c=this.beginner)||c.onResize(m,f),null==(u=this.announcement)||u.onResize(m,f),null==(p=this.game.propTips)||p.onResize(m,f),null==(g=this.game.RewardPopup)||g.onResize(m,f),this.closeGame&&this.closeGame.setPosition(this.cameras.main.width-65,b+50),EventBus.emit("game_size",{width:m,height:f})}),this),this.game.events.on("visible",(()=>{0==this.currentPage&&(this.plantView.getLandData(),this.game.GameApi.init(!0))}))}setCurrencyNav(){var e,t;let i=null;if(4==this.currentPage?1==this.currentShopTab?i={Currency:GameConfig.Data.StoreView.CurrencyOne}:2==this.currentShopTab?i={Currency:GameConfig.Data.StoreView.CurrencyTwo}:3==this.currentShopTab&&(i={Currency:GameConfig.Data.StoreView.CurrencyThree}):0!=this.currentPage&&1!=this.currentPage||(i=GameConfig.Data.FarmView),null!=i&&null!=i.Currency&&0!=i.Currency.length)for(let s=0;s<this.currencyArr.length;s++)s<i.Currency.length?(this.currencyArr[s].setItem(i.Currency[s].ItemId,"common-atlas",i.Currency[s].Icon,(null==(e=this.game.GameData.userAssets)?void 0:e[i.Currency[s].ItemId])?null==(t=this.game.GameData.userAssets)?void 0:t[i.Currency[s].ItemId]:0),this.currencyArr[s].setVisible(!0)):this.currencyArr[s].setVisible(!1);else for(let s=0;s<this.currencyArr.length;s++)this.currencyArr[s].setVisible(!1)}getGameOrderSummary(){this.game.GameApi.getOrderSummary().then((e=>{var t,i,s;const{yellowDotSummary:n}=e.jData,a=Object.values(n||{}).some((e=>1==e)),r=((null==(s=null==(i=null==(t=this.game.GameData.infoData)?void 0:t.mission)?void 0:i.order)?void 0:s.OrderMissionInfo)||[]).some((e=>"1"==e.status));this.game.gameState==GameConfig.GameState.CAMERA?this.summary.setVisible(!1):a||r?this.summary.setVisible(!0):this.summary.setVisible(!1)}))}getGameShopSummary(){var e,t;((null==(t=null==(e=this.game.GameData.infoData)?void 0:e.shop)?void 0:t.seeds)||[]).some((e=>Boolean(e.yellowDot)))?this.shopSummary.setVisible(!0):this.shopSummary.setVisible(!1)}getGuide(){var e,t,i,s;if(0==(null==(e=this.game.GameData.guideData)?void 0:e.isCompleted)){const{curStep:e,content:n}=this.game.GameData.guideData;if(58==e&&(this.bagView&&(null==(t=this.bagView)||t.slideOut(),this.onCloseView({viewName:"BagView"})),this.storeview&&(null==(i=this.storeview)||i.slideOut(),this.onCloseView({viewName:"StoreView"})),null==(s=this.tools)||s.setType()),this.beginner=new Beginner(this,0,0),this.beginner.setDepth(700),this.beginner.show(),this.currentStep=e,this.currentStep>0&&this.currentStep<4?this.beginner.setDepth(1005):this.beginner.setDepth(700),{3:!0,10:!0,14:!0,26:!0,32:!0,35:!0,40:!0,42:!0,53:!0}[e])return void this.beginner.submitGuide(e);this.beginner.setStep(e,n),this.firstStep=0}}showCloudAnimation(){this.cloudSpine.setVisible(!0),this.cloudSpine.animationState.setAnimation(0,"cloud_enter_exit",!1)}showVibeAnimation(){this.stopVibeAnimation();const e=this.add.spine(this.cameras.main.width/2,this.cameras.main.height/2,"vibe-data","vibe-atlas");e.setDepth(320),e.setScale(1),e.animationState.setAnimation(0,"loop",!0),this.vibeSpine=e}stopVibeAnimation(){this.vibeSpine&&(this.vibeSpine.animationState.clearTracks(),this.vibeSpine.destroy(),this.vibeSpine=null)}onOpenView(e){var t,i,s;this.game.gameState!==GameConfig.GameState.NORMAL&&"StoreView"!==e.viewName&&"BagView"!==e.viewName||(this.previousView=this.currentView,0==(null==(t=this.game.GameData.guideData)?void 0:t.isCompleted)&&44==this.currentStep&&44!=this.firstStep&&(this.beginner?null==(i=this.beginner)||i.submitGuide(this.currentStep):(this.beginner=new Beginner(this,0,0),null==(s=this.beginner)||s.submitGuide(this.currentStep))),"HomeView"==this.previousView&&"FarmView"==e.viewName||"FarmView"==this.previousView&&"HomeView"==e.viewName?(this.input.enabled=!1,this.showCloudAnimation(),this.time.delayedCall(800,(()=>{this.executeViewSwitch(e)})),this.time.delayedCall(1400,(()=>{this.input.enabled=!0}))):this.executeViewSwitch(e))}executeViewSwitch(e){var t,i,s,n,a,r,o,l,h,d,c,u,p,g,m,f,v,b,y,C,x,S,w,T,P,_,M,O,k,$;switch("HomeView"!=e.viewName&&"DecorationView"!=e.viewName?this.events.emit("disable_home_scale",{isOpen:!0}):this.events.emit("disable_home_scale",{isOpen:!1}),e.viewName){case"HomeView":this.currentView="HomeView",this.showVibeAnimation(),null==this.homeView&&(this.homeView=new HomeView(this,0,0)),this.game.GameApi.homeVisit(),null==(t=this.game.AudioSetUp)||t.play("goHomeAudio"),null==(i=this.plantView)||i.hide(),this.homeView.show(),null==(s=this.userInfoView)||s.setVisible(!0),null==(n=this.userInfoView)||n.updateUserName(1),null==(a=this.tools)||a.setVisible(!0),null==(r=this.entranceGroup)||r.children.iterate((e=>{e.setVisible(!0)})),this.currentPage=1,this.houseFarmToggleBtn.updateData("common-atlas","btn_farm.png",instance.t("Event_5_C2_Pandora_21"),"FarmView"),this.bagBtn.updateData("common-atlas","btn_decoration.png",instance.t("Event_5_C2_Pandora_22"),"DecorationView"),this.historyPages.push(e.viewName),this.setCurrencyNav(),this.getGameOrderSummary(),this.bagView&&(null==(o=this.bagView)||o.slideOut(),this.onCloseView({viewName:"BagView"}));break;case"FarmView":this.currentView="FarmView",this.showVibeAnimation(),null==this.plantView&&(this.plantView=new PlantView(this,0,0)),null==(l=this.homeView)||l.hide(),this.plantView.show(),null==(h=this.userInfoView)||h.setVisible(!0),null==(d=this.userInfoView)||d.updateUserName(0),null==(c=this.tools)||c.setVisible(!0),null==(u=this.entranceGroup)||u.children.iterate((e=>{e.setVisible(!0)})),this.currentPage=0,this.plantView.getLandData(),this.houseFarmToggleBtn.updateData("plant","btn_home_normal.png",instance.t("Event_5_C2_Pandora_16"),"HomeView"),this.bagBtn.updateData("common-atlas","btn_plants.png",instance.t("Event_5_C2_Pandora_17"),"BagView"),this.historyPages.push(e.viewName),this.setCurrencyNav();break;case"BagView":if(this.seedsNumType)return;null==this.bagView&&(this.bagView=new BagView(this,null)),null==(p=this.game.AudioSetUp)||p.play("bagStoreAudio"),e.showFlowerPanel?("MissionsView"==this.historyPages[this.historyPages.length-1]&&(console.log("open bag =========>"),EventBus.emit("change_task_index",{zIndex:90})),this.isShowFlowerPanel=!0,e.isTaskJump?(this.bagView.slideIn(1,!1),this.game.GameApi.getPackageItems(1)):this.bagView.slideIn(1,!0),this.events.emit("open-flower-bag",{val:!1})):(this.bagView.slideIn(0,!1),this.isShowFlowerPanel=!1),0!=(null==(g=this.game.GameData.guideData)?void 0:g.isCompleted)||18!=this.currentStep&&28!=this.currentStep||this.beginner.submitGuide(this.currentStep);break;case"StoreView":if(console.log(""),this.seedsNumType)return;this.storeview||(this.storeview=new ShopView(this,null)),null==(m=this.game.AudioSetUp)||m.play("bagStoreAudio"),1==this.currentPage&&0!=(null==(f=this.game.GameData.guideData)?void 0:f.isCompleted)?this.storeview.slideIn(1):0==this.currentPage&&0!=(null==(v=this.game.GameData.guideData)?void 0:v.isCompleted)?this.storeview.slideIn(0):this.storeview.slideIn(e.shopTab),this.currentPage=4,this.historyPages.push(e.viewName),this.setCurrencyNav();break;case"AnnouncementView":null==(b=this.game.AudioSetUp)||b.play("plantRuleAudio"),this.announcement||(this.announcement=new AnnouncementView(this,null)),this.announcement.slideIn(),this.announcement.setDepth(10001),this.currencyArr.forEach((e=>{e.setVisible(!1)})),null==(y=this.closeGame)||y.setVisible(!1),this.currentPage=2;break;case"MissionsView":if(this.isLevelUp)return;this.currentPage=3,this.stopVibeAnimation(),console.log("MissionsView",e),null==(C=this.game.AudioSetUp)||C.play("bagStoreAudio"),this.isMessageView=!0;const G={width:this.cameras.main.width,height:this.cameras.main.height,sound:this.game.GameData.getUpInfo.sound};EventBus.emit("open-task",G),null==(x=this.plantView)||x.hide(),null==(S=this.homeView)||S.hide(),null==(w=this.storeview)||w.slideOut(),null==(T=this.userInfoView)||T.setVisible(!1),null==(P=this.tools)||P.setVisible(!1),this.summary.setVisible(!1),null==(_=this.entranceGroup)||_.children.iterate((e=>{e.setVisible(!1)})),this.events.emit("MissionsStatus",{val:1}),null==(M=this.closeGame)||M.setVisible(!1),this.historyPages.push(e.viewName),this.setCurrencyNav(),this.currencyArr.forEach((e=>{e.setVisible(!1)})),0!=(null==(O=this.game.GameData.guideData)?void 0:O.isCompleted)||37!=this.currentStep&&59!=this.currentStep||this.beginner.submitGuide(this.currentStep);break;case"DecorationView":null==(k=this.game.AudioSetUp)||k.play("bagStoreAudio"),this.homeView.startBuilding(),this.homeView.currentMode=2,this.onSetVisible(!1),0==(null==($=this.game.GameData.guideData)?void 0:$.isCompleted)&&45==this.currentStep&&this.beginner.submitGuide(this.currentStep);break;default:console.log(e.viewName)}}onCloseView(e){var t,i;switch(this.events.emit("disable_home_scale",{isOpen:!1}),e.viewName){case"StoreView":this.historyPages.pop(),this.isMessageView&&this.currencyArr.forEach((e=>{e.setVisible(!1)})),"FarmView"==this.currentView?this.currentPage=0:"HomeView"==this.currentView?this.currentPage=1:this.currentPage=2,this.setCurrencyNav();break;case"MissionsView":this.historyPages.pop(),"FarmView"==this.currentView?this.currentPage=0:"HomeView"==this.currentView?this.currentPage=1:this.currentPage=2,this.isMessageView=!1,this.events.emit("MissionsStatus",{val:0}),null==(t=this.closeGame)||t.setVisible(!0),this.historyPages[this.historyPages.length-1],this.onOpenView({viewName:this.currentView}),this.setCurrencyNav(),this.getGameOrderSummary();break;case"BagView":"MissionsView"==this.historyPages[this.historyPages.length-1]&&(console.log("bag close =========>"),EventBus.emit("change_task_index",{zIndex:110})),this.events.emit("open-flower-bag",{val:!0});break;case"DecorationView":break;case"AnnouncementView":"FarmView"==this.currentView?this.currentPage=0:"HomeView"==this.currentView?this.currentPage=1:this.currentPage=2,null==(i=this.closeGame)||i.setVisible(!0),this.setCurrencyNav()}}onSetVisible(e){var t;this.houseFarmToggleBtn.setVisible(e),this.bagBtn.setVisible(e),this.btnStore.setVisible(e),this.btnMission.setVisible(e),null==(t=this.tools)||t.setVisible(e),e?this.getGameShopSummary():this.shopSummary.setVisible(!1)}changeLevel(){this.isLevelUp=!0}onLevelUp(e){var t,i,s;if(console.log("isCompleted",null==(t=this.game.GameData.guideData)?void 0:t.isCompleted),0!=(null==(i=this.game.GameData.guideData)?void 0:i.isCompleted)||42==this.currentStep||58==this.currentStep){if(this.game.GameData.dialog.reward)return;this.isLevelUp=!0,null==this.levelUpView&&(this.levelUpView=new LevelUp(this,0,0)),console.log(""),null==(s=this.game.AudioSetUp)||s.play("upgradeAudio"),this.levelUpView.setDepth(1e4),this.levelUpView.show(e.oldLevel,e.level),this.time.delayedCall(3e3,(()=>{this.isLevelUp=!1})),this.levelUpView.onCloseLevel=()=>{var t;console.log("",e.level),this.game.GameData.dialog.levelUp=!1,42==this.currentStep&&(null==(t=this.beginner)||t.submitGuide(this.currentStep)),3==e.level?this.game.GameApi.getGuide().then((e=>{var t;this.game.GameData.guideData=null==e?void 0:e.jData,0==(null==(t=null==e?void 0:e.jData)?void 0:t.isCompleted)&&(this.game.allInterface.getAllMissions(),EventBus.emit("user-level-up"),this.getGuide()),this.isLevelUp=!1})):this.isLevelUp=!1}}}onEvents(){EventBus.on("item_change_event",(e=>{e.data.forEach((e=>{var t;if(`${null==e?void 0:e.curExp}`&&e.iItemId==GameConfig.Data.Level.ExpItemId&&(console.log("",e),this.userInfoView.updateProgressBar(e)),this.currencyArr.some((t=>t.itemId==(null==e?void 0:e.iItemId)))){console.log("",e);const i=-1==(null==e?void 0:e.itemIncr)?-e.itemCount:e.itemCount;null==(t=this.currencyArr.find((t=>t.itemId==(null==e?void 0:e.iItemId))))||t.setAmmount(i)}}))})),EventBus.on("switch_task_tab",(e=>{this.currencyArr.forEach((e=>{e.setVisible(!1)}))})),this.events.on("home_construct",(e=>{1==e.value&&this.onSetVisible(!0),2==e.value&&(null==this.houseBagView&&(this.houseBagView=new BuildingBagView(this,0,0)),e.isGhostBuilding||this.houseBagView.slideIn()),3==e.value&&this.onSetVisible(!1)})),EventBus.on("pause-game-input",(()=>{this.input.enabled=!1})),EventBus.on("resume-game-input",(()=>{this.input.enabled=!0})),this.events.on("camera-open",(e=>{var t,i,s;1==e.type?(this.game.gameState=GameConfig.GameState.CAMERA,this.closeCamera.setVisible(!0),null==(t=this.tools)||t.setVisible(!1),null==(i=this.entranceGroup)||i.children.iterate((e=>{e.setVisible(!1)})),this.currencyArr.forEach((e=>{e.setVisible(!1)})),this.summary.setVisible(!1),this.shopSummary.setVisible(!1),null==(s=this.closeGame)||s.setVisible(!1)):2==e.type&&(this.game.gameState=GameConfig.GameState.NORMAL)})),EventBus.on("guide_step",(e=>{var t,i,s,n,a,r,o,l,h;if(console.log("---------",e.step,this.currentPage),4==e.step&&(this.onOpenView({viewName:"FarmView"}),this.time.delayedCall(1400,(()=>{var e;null==(e=this.beginner)||e.submitGuide(this.currentStep)}))),18==e.step||28==e.step||45==e.step)if(45==e.step)this.time.delayedCall(1400,(()=>{var e;const t=(null==(e=this.beginner)?void 0:e.depth)||700;this.bagBtn.setDepth(t+1)}));else{const e=(null==(t=this.beginner)?void 0:t.depth)||700;this.bagBtn.setDepth(e+1)}else this.bagBtn.setDepth(320);if(37==e.step||59==e.step){const e=(null==(i=this.beginner)?void 0:i.depth)||700;this.btnMission.setDepth(e+1)}else this.btnMission.setDepth(320);if(44==e.step){const e=(null==(s=this.beginner)?void 0:s.depth)||700;this.houseFarmToggleBtn.setDepth(e+1)}else this.houseFarmToggleBtn.setDepth(321);e.step>22&&e.step<28&&(null==(n=this.bagView)||n.slideOut(),this.onOpenView({viewName:"StoreView"})),28!=e.step&&55!=e.step||(null==(a=this.game.AudioSetUp)||a.play("bagCloseAudio"),null==(r=this.storeview)||r.slideOut()),38!=e.step&&39!=e.step&&41!=e.step||(39==this.firstStep&&39==e.step||3!=this.currentPage&&39!=e.step)&&this.onOpenView({viewName:"MissionsView"}),42==e.step&&this.onLevelUp({oldLevel:1,level:2}),45==e.step&&this.onOpenView({viewName:"HomeView"}),46!=e.step&&47!=e.step&&48!=e.step&&49!=e.step&&55!=e.step&&56!=e.step&&57!=e.step||this.onOpenView({viewName:"DecorationView"}),e.step>49&&e.step<55&&(null==(o=this.houseBagView)||o.slideOut(),this.onOpenView({viewName:"StoreView"})),57==e.step&&(null==(l=this.houseBagView)||l.slideOut()),58==e.step&&(this.onOpenView({viewName:"FarmView"}),null==(h=this.homeView)||h.exitBuilding(),this.onSetVisible(!0)),60==e.step&&this.onOpenView({viewName:"MissionsView"})})),EventBus.on("open-summary",(()=>{this.getGameOrderSummary()})),EventBus.on("shop-summary",(()=>{this.getGameShopSummary()})),EventBus.on("open_seed",(()=>{this.onOpenView({viewName:"BagView",showFlowerPanel:!0,isTaskJump:!0})})),EventBus.on("open_reward_Pop",(e=>{if(this.openReward=!0,e.list){this.levelChange=!1,this.newLevel=this.game.GameData.userInfo.iLevel;const t=e.list.find((e=>"1000000"==e.rewardId));t&&(this.newLevel=t.curLevel,this.newLevel!=this.game.GameData.userInfo.iLevel&&(this.levelChange=!0)),this.game.RewardPopup.show(e.list,"store",1),this.taskReward=e.list}})),this.game.RewardPopup.onClosePop=()=>{var e,t;if(console.log("",this.currentStep),this.game.GameData.dialog.reward=!1,this.openReward&&(this.levelChange&&2==this.newLevel&&this.onLevelUp({oldLevel:this.game.GameData.userInfo.iLevel,level:this.newLevel}),!this.openReward||this.levelChange&&2!=this.newLevel||(0==(null==(e=this.game.GameData.guideData)?void 0:e.isCompleted)?this.onOpenView({viewName:"MissionsView"}):EventBus.emit("change_task_index",{zIndex:110})),this.newLevel>2)){const e=this.taskReward.map((e=>({...e,itemIncr:1,iItemId:e.itemId})));EventBus.emit("item_change_event",{data:e})}this.currentStep&&this.beginner&&0==(null==(t=this.game.GameData.guideData)?void 0:t.isCompleted)&&this.beginner.submitGuide(this.currentStep),this.openReward=!1,this.levelChange=!1},this.game.Tips.onCloseTips=()=>{this.beginner&&(10==this.currentStep&&this.beginner.submitGuide(this.currentStep),14==this.currentStep&&this.beginner.submitGuide(this.currentStep),32==this.currentStep&&this.beginner.submitGuide(this.currentStep),35==this.currentStep&&this.beginner.submitGuide(this.currentStep))}}}const config={type:Phaser.AUTO,resolution:window.devicePixelRatio||1,width:GameConfig.Screen.width,height:GameConfig.Screen.height,backgroundColor:"#0x404040",disableWebAudio:!0,scale:{mode:Phaser.Scale.ScaleModes.EXPAND,autoCenter:Phaser.Scale.HEIGHT_CONTROLS_WIDTH},scene:[Boot,Preloader,Login,Game],input:{activePointers:3},plugins:{global:[{key:"rexInputText",plugin:InputTextPlugin,start:!0}],scene:[{key:"rexUI",plugin:UIPlugin,mapping:"rexUI"},{key:"SpinePlugin",plugin:SpinePlugin,mapping:"spine"}]},dom:{createContainer:!0},transparent:!0},StartGame=e=>(console.log("StartGame"),new Phaser.Game({...config,parent:e})),_hoisted_1$8={id:"game-container"},_sfc_main$9={__name:"PhaserGame",emits:["current-active-scene"],setup(e,{expose:t,emit:i}){const s=ref(),n=ref(),a=i;return onMounted((()=>{n.value=StartGame("game-container"),EventBus.on("current-scene-ready",(e=>{a("current-active-scene",e),s.value=e}))})),onUnmounted((()=>{n.value&&(n.value.destroy(!0),n.value=null)})),t({scene:s,game:n}),(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$8))}},_export_sfc=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i},_hoisted_1$7={class:"rule-overlay"},_hoisted_2$7=["innerHTML"],_sfc_main$8={__name:"Announcement",props:{gameRef:{type:Object,required:!0}},setup(e){const t=e,i=ref(!1),s=ref({width:window.innerWidth,height:window.innerHeight}),n=ref({title:"",info:""}),a=()=>{i.value=!1};onMounted((()=>{EventBus.on("open-announcement",(e=>{i.value=!0,s.value={...e},r()})),EventBus.on("game_size",(e=>{s.value={...e}}))}));const r=()=>{const e=t.gameRef.GameData.annoucementInfo[0];n.value={title:e.sTitle,info:e.sContent}},o=e=>s.value.width&&s.value.height?window.innerHeight/s.value.height*e+"px":`${e}px`;return watch(i,(e=>{e?EventBus.emit("pause-game-input"):EventBus.emit("resume-game-input")})),(e,t)=>withDirectives((openBlock(),createElementBlock("div",{onClick:a},[createBaseVNode("div",_hoisted_1$7,[createBaseVNode("div",{class:"rule-content",style:normalizeStyle({width:o(900),height:o(600)})},[createBaseVNode("div",{class:"rule-content-title",style:normalizeStyle({marginTop:o(130),fontSize:o(32)})},toDisplayString(n.value.title),5),createBaseVNode("div",{class:"rule-content-info",style:normalizeStyle({fontSize:o(20),width:o(650),height:o(270),marginTop:o(16)}),innerHTML:n.value.info},null,12,_hoisted_2$7),createBaseVNode("div",{class:"rule-content-mask",style:normalizeStyle({width:o(680),height:o(40)})},null,4)],4)])],512)),[[vShow,i.value]])}},Announcement=_export_sfc(_sfc_main$8,[["__scopeId","data-v-d4d9c30f"]]),_hoisted_1$6={key:0},_hoisted_2$6={class:"rule-overlay"},_sfc_main$7={__name:"RuleDialog",props:{gameRef:{type:Object,required:!0}},setup(e){const t=ref(!1);ref(1);const i=ref({width:window.innerWidth,height:window.innerHeight}),s=()=>{t.value=!1};onMounted((()=>{EventBus.on("open-rule",(()=>{t.value=!0})),EventBus.on("game_size",(e=>{i.value={...e}}))}));const n=e=>i.value.width&&i.value.height?window.innerHeight/i.value.height*e+"px":`${e}px`;return watch(t,(e=>{e?EventBus.emit("pause-game-input"):EventBus.emit("resume-game-input")})),(e,i)=>t.value?(openBlock(),createElementBlock("div",_hoisted_1$6,[t.value?(openBlock(),createElementBlock("div",{key:0,onClick:s},[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",{class:"rule-content",style:normalizeStyle({width:n(900),height:n(600)})},[createBaseVNode("div",{class:"rule-content-title",style:normalizeStyle({marginTop:n(130),fontSize:n(32)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_59")),5),createBaseVNode("p",{style:normalizeStyle({fontSize:n(20),width:n(650),marginTop:n(16)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_62")),5)],4)])])):createCommentVNode("",!0)])):createCommentVNode("",!0)}},RuleDialog=_export_sfc(_sfc_main$7,[["__scopeId","data-v-697b14e5"]]),_imports_0$1=""+new URL("task/btn_close.png",import.meta.url).href,_imports_1$2=""+new URL("task/line_title.png",import.meta.url).href,_imports_2$1=""+new URL("task/icon_dots.png",import.meta.url).href,_imports_3=""+new URL("common/propTipsFlower.png",import.meta.url).href,_imports_4=""+new URL("task/frame_superscript.png",import.meta.url).href,_imports_5=""+new URL("task/igame_profile_botton.png",import.meta.url).href,_imports_6=""+new URL("task/line_information5.png",import.meta.url).href,_imports_7=""+new URL("task/icon_Star rating2.png",import.meta.url).href,_imports_8=""+new URL("task/icon_receive(1).png",import.meta.url).href,_imports_9=""+new URL("task/btn_confirm6_big.png",import.meta.url).href,_imports_10=""+new URL("task/task_loading.png",import.meta.url).href,_imports_11=""+new URL("task/tab_frame_framepanel2.png",import.meta.url).href,_imports_12=""+new URL("task/frame_Page-tabs2.png",import.meta.url).href,_imports_13=""+new URL("task/frame_Star_rating_completed1.png",import.meta.url).href,_imports_14=""+new URL("task/frame_Star_rating2_completed.png",import.meta.url).href,_imports_15=""+new URL("task/frame_Star_rating2_normal.png",import.meta.url).href,_imports_16=""+new URL("task/frame_Avatar_big.png",import.meta.url).href,_imports_17=""+new URL("task/frame_Avatar_small.png",import.meta.url).href,_imports_18=""+new URL("task/tab_frame_framepanel4.png",import.meta.url).href,_imports_19=""+new URL("task/tab_frame_framepanel3.png",import.meta.url).href,_imports_20=""+new URL("task/frame_norma3.png",import.meta.url).href,_imports_21=""+new URL("task/btn_go2.png",import.meta.url).href,_imports_22=""+new URL("task/btn_go_frame.png",import.meta.url).href,_imports_23=""+new URL("task/btn_confirm2.png",import.meta.url).href,_imports_24=""+new URL("task/tab_frame_framepanel.png",import.meta.url).href,_imports_25=""+new URL("task/frame_Congratulations-on-obtaining.png",import.meta.url).href,_imports_26=""+new URL("task/pop-up_big.png",import.meta.url).href,_hoisted_1$5={key:0},_hoisted_2$5=["dir"],_sfc_main$6={__name:"MessagePop",props:{showPop:{type:Boolean,required:!0},getFontSize:{type:Function,required:!0},tipsMsg:{type:String,required:!0},isRTL:{type:Boolean,required:!0}},emits:["update-showPop"],setup(e,{emit:t}){const i=e,s=t;let n;const a=()=>{s("update-showPop",!1)};watch((()=>i.showPop),(e=>{clearTimeout(n),r()}));const r=e=>{n=setTimeout((()=>{s("update-showPop",!1)}),3e3)};return(t,i)=>e.showPop?(openBlock(),createElementBlock("div",_hoisted_1$5,[e.showPop?(openBlock(),createElementBlock("div",{key:0,onClick:a,class:"pop-overlay"},[createBaseVNode("div",{class:"pop-box",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(28),width:e.getFontSize(1100),height:e.getFontSize(90)})},toDisplayString(e.tipsMsg),13,_hoisted_2$5)])):createCommentVNode("",!0)])):createCommentVNode("",!0)}},MessagePop=_export_sfc(_sfc_main$6,[["__scopeId","data-v-cd7a9913"]]),_hoisted_1$4={key:0},_hoisted_2$4=["src"],_sfc_main$5={__name:"RewardPop",props:{showPop:{type:Boolean,required:!0},getFontSize:{type:Function,required:!0},rewardsList:{type:Array,required:!0},gameItemSeetings:{type:Object,required:!0}},emits:["update-showPop"],setup(e,{emit:t}){const i=t,s=()=>{i("update-showPop",!1)};return(t,i)=>e.showPop?(openBlock(),createElementBlock("div",_hoisted_1$4,[e.showPop?(openBlock(),createElementBlock("div",{key:0,onClick:s,class:"pop-overlay"},[createBaseVNode("div",{class:"pop-title",style:normalizeStyle({fontSize:e.getFontSize(34),transform:`translate(0, ${e.getFontSize(90)})`})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_36")),5),createBaseVNode("div",{class:"pop-box",style:normalizeStyle({maxWidth:e.getFontSize(1850)})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rewardsList,((t,i)=>(openBlock(),createElementBlock("div",{class:"reward-list",style:normalizeStyle({width:e.getFontSize(100),height:e.getFontSize(100)}),key:i},[createBaseVNode("img",{src:`assets/task/${unref(GameConfig).Data.TaskRewardIcon[null==t?void 0:t.rewardId]}`},null,8,_hoisted_2$4),createBaseVNode("span",{style:normalizeStyle({fontSize:e.getFontSize(20)})},toDisplayString(null==t?void 0:t.rewardAmount),5)],4)))),128))],4),createBaseVNode("div",{class:"pop-info",style:normalizeStyle({fontSize:e.getFontSize(20),transform:`translate(0, -${e.getFontSize(70)})`})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_37")),5)])):createCommentVNode("",!0)])):createCommentVNode("",!0)}},RewardPop=_export_sfc(_sfc_main$5,[["__scopeId","data-v-fdb68d72"]]),_imports_1$1=""+new URL("task/line_information2.png",import.meta.url).href,_hoisted_1$3={key:0},_hoisted_2$3={key:0,class:"pop-overlay"},_hoisted_3$3={class:"pop-con-box"},_hoisted_4$3=["src"],_hoisted_5$3=["dir","innerHTML"],_sfc_main$4={__name:"Dialogue",props:{showPop:{type:Boolean,required:!0},getFontSize:{type:Function,required:!0},lodueInfo:{type:Object,required:!0},isRTL:{type:Boolean,required:!0}},emits:["update-showPop"],setup(e,{emit:t}){const i=t,s=()=>{i("update-showPop",!1)};return(t,i)=>{var n,a,r,o,l,h;return e.showPop?(openBlock(),createElementBlock("div",_hoisted_1$3,[e.showPop?(openBlock(),createElementBlock("div",_hoisted_2$3,[createBaseVNode("div",{class:"pop-info-bg",style:normalizeStyle({width:e.getFontSize(1252),height:e.getFontSize(800)})},[createBaseVNode("img",{class:"pop-close",onClick:s,style:normalizeStyle({width:e.getFontSize(26)}),src:_imports_0$1},null,4),createBaseVNode("div",{class:"pop-title",style:normalizeStyle({fontSize:e.getFontSize(26)})},toDisplayString(null==(n=e.lodueInfo)?void 0:n.publisherTitle),5),createBaseVNode("img",{class:"pop-line",style:normalizeStyle({width:e.getFontSize(1e3)}),src:_imports_1$1},null,4),createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",{class:"pop-con-img",style:normalizeStyle({height:e.getFontSize(270),borderWidth:e.getFontSize(4)})},[createBaseVNode("img",{src:`assets/task/${null==(l=null==(r=null==(a=unref(GameConfig))?void 0:a.Data)?void 0:r.Publisher)?void 0:l[null==(o=e.lodueInfo)?void 0:o.publisher]}`},null,8,_hoisted_4$3)],4),createBaseVNode("div",{class:"pop-con",style:normalizeStyle({height:e.getFontSize(300),paddingRight:e.getFontSize(10)})},[createBaseVNode("div",{class:"pop-con-title",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(18)}),innerHTML:null==(h=e.lodueInfo)?void 0:h.publisherDesc},null,12,_hoisted_5$3)],4)])],4)])):createCommentVNode("",!0)])):createCommentVNode("",!0)}}},Dialogue=_export_sfc(_sfc_main$4,[["__scopeId","data-v-b5ffbba0"]]),_imports_0=""+new URL("common/finger(1).png",import.meta.url).href,_imports_1=""+new URL("common/Indicator.png",import.meta.url).href,_hoisted_1$2={key:0},_hoisted_2$2=["dir"],_hoisted_3$2={key:1},_hoisted_4$2={key:2},_hoisted_5$2={key:3},_hoisted_6$1=["dir"],_hoisted_7$1={key:4},_hoisted_8$1=["dir"],_hoisted_9$1={key:5,class:"step-end"},_hoisted_10$1=["dir"],_sfc_main$3={__name:"Guide",props:{getFontSize:{type:Function,required:!0},step:{type:Number,required:!0},tips:{type:Object,required:!0},onStep:{type:Function,required:!0},rewardBoxRef:{type:Object,required:!0},isRTL:{type:Boolean,required:!0}},emits:["update-step"],setup(e,{emit:t}){const i=e,s=()=>{const e=i.rewardBoxRef.getBoundingClientRect().bottom;return window.innerHeight-e+i.rewardBoxRef.offsetHeight+10};return(t,i)=>(openBlock(),createElementBlock("div",{class:"step-box",onClick:i[4]||(i[4]=withModifiers(((...t)=>e.onStep&&e.onStep(...t)),["stop"]))},[38==e.step?(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",{class:"step-all-box",onClick:i[0]||(i[0]=withModifiers(((...t)=>e.onStep&&e.onStep(...t)),["stop"])),style:normalizeStyle({maxWidth:e.getFontSize(450),top:e.getFontSize(140)})},[createBaseVNode("div",{class:"step-title",style:normalizeStyle({fontSize:e.getFontSize(30)})},toDisplayString(e.tips.title),5),createBaseVNode("div",{class:"step-info",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(24),width:e.getFontSize(350)})},toDisplayString(e.tips.desc),13,_hoisted_2$2),createBaseVNode("div",{class:"tips-but",style:normalizeStyle({fontSize:e.getFontSize(16)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_803")),5)],4)])):createCommentVNode("",!0),39==e.step?(openBlock(),createElementBlock("div",_hoisted_3$2,[createBaseVNode("img",{class:"step-hand",src:_imports_0,style:normalizeStyle({height:e.getFontSize(92),top:e.getFontSize(380)})},null,4)])):createCommentVNode("",!0),41==e.step?(openBlock(),createElementBlock("div",_hoisted_4$2,[createBaseVNode("img",{class:"step-hand-close",src:_imports_0,style:normalizeStyle({height:e.getFontSize(92),top:e.getFontSize(0)})},null,4)])):createCommentVNode("",!0),60==e.step?(openBlock(),createElementBlock("div",_hoisted_5$2,[createBaseVNode("img",{class:"step-one-line",src:_imports_1,style:normalizeStyle({height:e.getFontSize(15),top:e.getFontSize(170)})},null,4),createBaseVNode("div",{class:"step-one-box",onClick:i[1]||(i[1]=withModifiers(((...t)=>e.onStep&&e.onStep(...t)),["stop"])),style:normalizeStyle({maxWidth:e.getFontSize(450),top:e.getFontSize(160)})},[createBaseVNode("div",{class:"step-title",style:normalizeStyle({fontSize:e.getFontSize(30)})},toDisplayString(e.tips.title),5),createBaseVNode("div",{class:"step-info",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(24),width:e.getFontSize(350)})},toDisplayString(e.tips.desc),13,_hoisted_6$1),createBaseVNode("div",{class:"tips-but",style:normalizeStyle({fontSize:e.getFontSize(16)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_803")),5)],4)])):createCommentVNode("",!0),61==e.step?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("img",{class:"step-one-line",src:_imports_1,style:normalizeStyle({height:e.getFontSize(15),top:e.getFontSize(275)})},null,4),createBaseVNode("div",{class:"step-one-box",onClick:i[2]||(i[2]=withModifiers(((...t)=>e.onStep&&e.onStep(...t)),["stop"])),style:normalizeStyle({maxWidth:e.getFontSize(450),top:e.getFontSize(265)})},[createBaseVNode("div",{class:"step-title",style:normalizeStyle({fontSize:e.getFontSize(30)})},toDisplayString(e.tips.title),5),createBaseVNode("div",{class:"step-info",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(24),width:e.getFontSize(350)})},toDisplayString(e.tips.desc),13,_hoisted_8$1),createBaseVNode("div",{class:"tips-but",style:normalizeStyle({fontSize:e.getFontSize(16)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_803")),5)],4)])):createCommentVNode("",!0),62==e.step?(openBlock(),createElementBlock("div",_hoisted_9$1,[createBaseVNode("img",{class:"step-end-line",src:_imports_1,style:normalizeStyle({height:e.getFontSize(15),bottom:`${s()}px`})},null,4),createBaseVNode("div",{class:"step-end-box",onClick:i[3]||(i[3]=withModifiers(((...t)=>e.onStep&&e.onStep(...t)),["stop"])),style:normalizeStyle({maxWidth:e.getFontSize(450),bottom:`calc(${e.getFontSize(8)} + ${s()}px)`})},[createBaseVNode("div",{class:"step-title",style:normalizeStyle({fontSize:e.getFontSize(30)})},toDisplayString(e.tips.title),5),createBaseVNode("div",{class:"step-info",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(24),width:e.getFontSize(350)})},toDisplayString(e.tips.desc),13,_hoisted_10$1),createBaseVNode("div",{class:"tips-but",style:normalizeStyle({fontSize:e.getFontSize(16)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_803")),5)],4)])):createCommentVNode("",!0)]))}},Guide=_export_sfc(_sfc_main$3,[["__scopeId","data-v-fb4fe43b"]]),_imports_2=""+new URL("task/plantDetail_bg.png",import.meta.url).href,_hoisted_1$1={key:0},_hoisted_2$1={key:0,class:"pop-overlay"},_hoisted_3$1={class:"pop-con-box"},_hoisted_4$1=["src"],_hoisted_5$1=["dir"],_sfc_main$2={__name:"DetailDialog",props:{showPop:{type:Boolean,required:!0},getFontSize:{type:Function,required:!0},plantInfo:{type:Object,required:!0},isRTL:{type:Boolean,required:!0}},emits:["update-showPop"],setup(e,{emit:t}){const i=t,s=()=>{i("update-showPop",!1)};return(t,i)=>{var n,a,r,o,l,h,d;return e.showPop?(openBlock(),createElementBlock("div",_hoisted_1$1,[e.showPop?(openBlock(),createElementBlock("div",_hoisted_2$1,[createBaseVNode("div",{class:"pop-info-bg",style:normalizeStyle({width:e.getFontSize(1252),height:e.getFontSize(800)})},[createBaseVNode("img",{class:"pop-close",onClick:s,style:normalizeStyle({width:e.getFontSize(26)}),src:_imports_0$1},null,4),createBaseVNode("div",{class:"pop-title",style:normalizeStyle({fontSize:e.getFontSize(30)})},toDisplayString(null==(n=e.plantInfo)?void 0:n.name),5),createBaseVNode("img",{class:"pop-line",style:normalizeStyle({width:e.getFontSize(1e3)}),src:_imports_1$1},null,4),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",{class:"pop-con-img-box",style:normalizeStyle({width:e.getFontSize(260),height:e.getFontSize(260),top:e.getFontSize(-12)})},[createBaseVNode("img",{class:"pop-con-img-bg",style:normalizeStyle({marginTop:e.getFontSize(12),marginLeft:e.getFontSize(12)}),src:_imports_2},null,4),createBaseVNode("div",{class:"pop-img-box",style:normalizeStyle({width:e.getFontSize(260),height:e.getFontSize(260),padding:e.getFontSize(60)})},[createBaseVNode("img",{class:"pop-img-plant",style:normalizeStyle({width:e.getFontSize(140)}),src:`assets/task/${null==(l=null==(r=null==(a=unref(GameConfig))?void 0:a.Data)?void 0:r.TaskPlantIcon)?void 0:l[null==(o=e.plantInfo)?void 0:o.id]}`},null,12,_hoisted_4$1)],4),createBaseVNode("div",{class:"pop-plant-num",style:normalizeStyle({fontSize:e.getFontSize(22)})},toDisplayString(null==(h=e.plantInfo)?void 0:h.ownNum),5)],4),createBaseVNode("div",{class:"pop-con",style:normalizeStyle({height:e.getFontSize(300)})},[createBaseVNode("div",{class:"pop-con-title",dir:e.isRTL?"rtl":"ltr",style:normalizeStyle({fontSize:e.getFontSize(22)})},toDisplayString(null==(d=e.plantInfo)?void 0:d.desc),13,_hoisted_5$1)],4)])],4)])):createCommentVNode("",!0)])):createCommentVNode("",!0)}}},DetailDialog=_export_sfc(_sfc_main$2,[["__scopeId","data-v-3871fb51"]]),_hoisted_1={class:"task-panel-box"},_hoisted_2={class:"task-info-img"},_hoisted_3={class:"task-tab-box"},_hoisted_4=["onClick"],_hoisted_5={key:0,src:_imports_2$1},_hoisted_6={class:"task-bg"},_hoisted_7={class:"task-title-line"},_hoisted_8=["onClick","dir"],_hoisted_9={class:"content-info"},_hoisted_10=["dir","onClick"],_hoisted_11=["src"],_hoisted_12={class:"content-bot"},_hoisted_13=["onClick"],_hoisted_14=["src"],_hoisted_15=["src","onClick"],_hoisted_16={key:0,class:"task-content-dots",src:_imports_2$1},_hoisted_17={key:1,class:"order-box"},_hoisted_18={class:"order-tab-box"},_hoisted_19=["onClick"],_hoisted_20={key:1,class:"order-tab-success",src:_imports_4},_hoisted_21={class:"order-tab-small"},_hoisted_22=["src"],_hoisted_23=["dir"],_hoisted_24={class:"detail-title-box"},_hoisted_25=["src"],_hoisted_26={class:"detail-info-box"},_hoisted_27=["dir"],_hoisted_28=["dir"],_hoisted_29={class:"detail-task-box"},_hoisted_30=["src"],_hoisted_31={key:0,class:"detail-line",src:_imports_6},_hoisted_32={class:"detail-reward-left"},_hoisted_33={class:"reward-difficulty"},_hoisted_34={class:"reward-content"},_hoisted_35=["onClick"],_hoisted_36=["src"],_hoisted_37={key:0,class:"exchange-goods-list-success",src:_imports_8},_hoisted_38={class:"detail-reward-but"},_hoisted_39={key:0,src:_imports_2$1},_hoisted_40={class:"detail-reward-success"},_hoisted_41={key:0,class:"guideView-box"},_hoisted_42={class:"task-loading-con"},_hoisted_43={class:"task-loading"},_hoisted_44=["src"],_sfc_main$1={__name:"index",props:{gameRef:{type:Object,required:!0}},setup(t){const i=["Event_5_C2_Pandora_52","Event_5_C2_Pandora_53","Event_5_C2_Pandora_54"],s=t,n=ref(!1),a=ref({width:window.innerWidth,height:window.innerHeight}),r=ref(1),o=ref(0),l=ref(0),h=ref(!1),d=ref(null),c=ref([]),u=ref(),p=ref([]),g=ref({}),m=ref(!1),f=ref(9999),v=ref([]),b=ref(!1),y=ref({}),C=ref(0),x=ref({}),S=ref(null),w=ref(0),T=ref({}),P=ref(""),_=ref(!1),M=ref(null),O=ref(null),k=ref(!1),$=ref(null),G=ref(""),E=ref(!1),V=ref({}),R=ref({}),I=ref(!1);let A=!1;const D=computed((()=>({"task-bg1":2!==o.value?{opacity:1}:{opacity:0},"task-bg2":2===o.value?{opacity:1}:{opacity:0}})));onMounted((()=>{EventBus.on("open-task",(e=>{var t,i,r,l,h,d;w.value=null==(i=null==(t=s.gameRef)?void 0:t.GameData.userInfo)?void 0:i.iLevel,n.value=!0,o.value=0,a.value={...e},A=e.sound,nextTick((()=>{f.value&&(f.value.style.zIndex=110)})),j(),B(null==(r=s.gameRef)?void 0:r.GameData.infoData.mission),k.value=!0,(null==(h=null==(l=s.gameRef)?void 0:l.GameApi)?void 0:h.getAllMissions)?s.gameRef.GameApi.getAllMissions().then((e=>{var t;console.log(":res.jData.mission=",e.jData.mission),k.value=!1;const i=(null==(t=null==e?void 0:e.jData)?void 0:t.mission)||{};L(i),B(i)})).catch((e=>{var t;console.error(":",e),k.value=!1,B(null==(t=s.gameRef)?void 0:t.GameData.infoData.mission)})):(k.value=!1,B(null==(d=s.gameRef)?void 0:d.GameData.infoData.mission)),re()})),EventBus.on("open-task-init",(e=>{var t,i,r,l,h;w.value=null==(i=null==(t=s.gameRef)?void 0:t.GameData.userInfo)?void 0:i.iLevel,n.value=!0,o.value=0;const d=(null==e?void 0:e.width)||window.innerWidth,c=(null==e?void 0:e.height)||window.innerHeight;a.value={width:d,height:c},A=(null==e?void 0:e.sound)??(null==(h=null==(l=null==(r=s.gameRef)?void 0:r.GameData)?void 0:l.getUpInfo)?void 0:h.sound)??!1,B(),nextTick((()=>{f.value&&!C.value&&(f.value.style.zIndex=1)}))})),EventBus.on("close_task_view",(()=>{n.value=!1})),EventBus.on("game_size",(e=>{a.value={...e}})),EventBus.on("change_task_index",(e=>{console.log("change_task_index",f.value.style.zIndex),f.value&&(f.value.style.zIndex=e.zIndex)})),EventBus.on("guide_step",(e=>{e.step>59&&(nextTick((()=>Y(2))),62==e.step&&te()),C.value=e.step,x.value=e.content})),EventBus.on("user-level-up",(()=>{n.value&&Z()}));const e=localStorage.getItem("languageKey");I.value="ar_AE"==e}));const B=e=>{var t,i,n;const a=((null==e?void 0:e.main)||[]).filter((e=>2!=(null==e?void 0:e.iStatus)));c.value=a;const r=null==e?void 0:e.chapter;r&&(u.value=r);const o=null==e?void 0:e.order;o&&(p.value=(null==o?void 0:o.OrderMissionInfo)||[],F(null==o?void 0:o.OrderMissionInfo));const l=null==(n=null==(i=null==(t=s.gameRef)?void 0:t.GameData)?void 0:i.infoData)?void 0:n.yellowDotSummary;l&&(T.value=l)},L=t=>{var i,n;if(null==(n=null==(i=s.gameRef)?void 0:i.GameData)?void 0:n.infoData)try{s.gameRef.GameData.infoData.mission=JSON.parse(JSON.stringify(t))}catch(e){s.gameRef.GameData.infoData.mission=t}},F=(e,t=!0)=>{var i,s,n;const a=t?0:l.value;if(g.value=null==e?void 0:e[a],y.value={publisher:null==(i=null==e?void 0:e[a])?void 0:i.publisher,publisherDesc:null==(s=null==e?void 0:e[a])?void 0:s.publisherDesc,publisherTitle:null==(n=null==e?void 0:e[a])?void 0:n.publisherTitle},(null==e?void 0:e.length)&&0==l.value){const t=e[0];(null==t?void 0:t.yellowDot)&&N(null==t?void 0:t.finishedTaskNum,null==t?void 0:t.taskId)}},j=async()=>{var e;try{const t=s.gameRef.GameData.infoData.mission.main,i=s.gameRef.GameData.infoData.mission.chapter.missionInfo,n=t.some((e=>1==e.iStatus));n||(T.value={...T.value,main:0});const a=i.some((e=>1==e.iStatus));a||(T.value={...T.value,chapter:0});const r=await s.gameRef.GameApi.getOrderSummary();console.log(" -------",r),T.value=null==(e=r.jData)?void 0:e.yellowDotSummary}catch(t){console.error(":",t)}},N=async(e,t)=>{try{const i=await s.gameRef.GameApi.submitClickDot(e,t);console.log("",i),p.value=p.value.map((e=>e.taskId==t?{...e,yellowDot:!1}:e)),j(),s.gameRef.allInterface.getAllMissions()}catch(i){console.error(":",i)}},z=computed((()=>{if(!a.value.width||!a.value.height)return{};const e=window.devicePixelRatio||1,t=window.innerHeight/a.value.height/e,i=window.innerWidth/a.value.width/e;r.value=window.innerHeight/a.value.height;const s=(a.value.width-GameConfig.Screen.width+15*e)*i,n=(a.value.height-GameConfig.Screen.height+100*e)*t,o=(a.value.width-GameConfig.Screen.width+15*e)*i;return a.value.height,GameConfig.Screen.height,{width:window.innerWidth-s-o+"px",height:window.innerHeight-n+"px",left:`${s}px`,top:`${n}px`}})),U=e=>computed((()=>({fontSize:W(22),color:l.value===e?"#fff":"#6132a1"}))),W=e=>r.value*e+"px",Y=e=>{var t,i,n,a,r,h,g,m,f,v,b,y;if(o.value!==e)if(J("Play_UI_paper"),EventBus.emit("switch_task_tab",{taskIndex:e}),o.value=e,d.value&&(d.value.scrollTop=0),0==e){const e=null==(a=null==(n=null==(i=null==(t=s.gameRef)?void 0:t.GameData)?void 0:i.infoData)?void 0:n.mission)?void 0:a.main,r=(null==e?void 0:e.filter((e=>2!=(null==e?void 0:e.iStatus))))||[];r&&(c.value=r)}else if(1==e){const e=null==(m=null==(g=null==(h=null==(r=s.gameRef)?void 0:r.GameData)?void 0:h.infoData)?void 0:g.mission)?void 0:m.chapter;e&&(c.value=null==e?void 0:e.missionInfo,u.value=e)}else if(2==e){l.value=0;const e=null==(y=null==(b=null==(v=null==(f=s.gameRef)?void 0:f.GameData)?void 0:v.infoData)?void 0:b.mission)?void 0:y.order;e&&(p.value=e.OrderMissionInfo,F(e.OrderMissionInfo))}},X=async(e,t,i)=>{var n,a,r,d,g;if(J("Play_UI_apply"),0==e)0==i||706==i||(703==i?(EventBus.emit("open_view",{viewName:"StoreView"}),EventBus.emit("close_view",{viewName:"MissionsView"})):701==i||704==i?(EventBus.emit("open_view",{viewName:"FarmView"}),EventBus.emit("open_view",{viewName:"MissionsView"}),704==i&&EventBus.emit("open_seed")):702==i&&(EventBus.emit("open_view",{viewName:"HomeView"}),EventBus.emit("close_view",{viewName:"MissionsView"}))),Z();else if(1==e){if(_.value)return;39==C.value&&EventBus.emit("task-submit-guide",{val:C.value});try{setTimeout((()=>{_.value=!1}),GameConfig.Data.delayTime),_.value=!0;const e=await s.gameRef.GameApi.getOrderMissionSubmit(o.value+1,t);console.log("",e);const i=e.jData.rewards.map((e=>({...e,itemId:e.rewardId,itemCount:Number(e.rewardAmount)})));if(EventBus.emit("open_reward_Pop",{list:i}),s.gameRef.GameData.dialog.reward=!0,_.value=!1,0==o.value?(async()=>{var e,t,i;k.value=!0;try{const n=await s.gameRef.GameApi.getMainMission();console.log("-------",n);const a=((null==(e=n.jData)?void 0:e.missionInfo)||[]).filter((e=>2!=(null==e?void 0:e.iStatus)));(null==(i=null==(t=s.gameRef.GameData.infoData)?void 0:t.mission)?void 0:i.main)&&(s.gameRef.GameData.infoData.mission.main=a),c.value=a,k.value=!1}catch(n){console.error(":",n),k.value=!1}re()})():1==o.value?(async()=>{var e,t;k.value=!0;try{const i=await s.gameRef.GameApi.getChapterMission();(null==(t=null==(e=s.gameRef.GameData.infoData)?void 0:e.mission)?void 0:t.chapter)&&(s.gameRef.GameData.infoData.mission.chapter=i.jData),u.value=i.jData,c.value=i.jData.missionInfo,k.value=!1}catch(i){console.error(" :",i),k.value=!1}re()})():2==o.value&&(G.value=t,(async()=>{k.value=!0,s.gameRef.GameApi.getAllMissions().then((e=>{var t,i,s,n;const a=(null==(t=null==e?void 0:e.jData)?void 0:t.mission)||{};L(a);const r=null==(s=null==(i=null==e?void 0:e.jData)?void 0:i.mission)?void 0:s.order;if(r){const e=null==(n=r.OrderMissionInfo)?void 0:n.findIndex((e=>e.taskId==G.value));l.value=e,p.value=r.OrderMissionInfo,F(r.OrderMissionInfo,!1),G.value=""}k.value=!1})).catch((e=>{console.error(":",e),k.value=!1})),re()})()),j(),0==(null==(r=null==(a=null==(n=s.gameRef)?void 0:n.GameData)?void 0:a.guideData)?void 0:r.isCompleted))Z();else{let e=!1;const t=i.find((e=>"1000000"==e.rewardId));t&&t.curLevel!=(null==(g=null==(d=s.gameRef)?void 0:d.GameData.userInfo)?void 0:g.iLevel)&&(e=!0),e?Z():f.value.style.zIndex=1}}catch(m){console.error("error",m),h.value=!0,P.value=m.msg,_.value=!1}}},H=e=>(null==e?void 0:e.subTaskId)?(null==e?void 0:e.isCompleted)?"assets/task/icon_Star rating2.png":"assets/task/icon_Star rating.png":"assets/task/icon_Star rating4.png",q=()=>{b.value=!0},K={Play_UI_paper:"bagCloseAudio",Play_UI_click2:"bagItemAudio",Play_UI_apply:"openShovelAudio",Play_UI_mode_click:"plantCloseAudio"},J=e=>{var t;if(!A)return;if(null==(t=s.gameRef)?void 0:t.AudioSetUp){const t=K[e];if(t)return console.log(` Phaser : ${e} -> ${t}`),void s.gameRef.AudioSetUp.play(t)}console.log(`Phaser  HTML5 Audio : ${e}`);let i="ogg";/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(i="mp3"),new Audio(`assets/audio/${e}.`+i).play().catch((e=>{console.log(":",e)}))},Z=()=>{J("Play_UI_mode_click"),n.value=!1,k.value=!1,$.value&&clearTimeout($.value),EventBus.emit("close_view",{viewName:"MissionsView"})},Q=()=>{Z(),41==C.value&&EventBus.emit("task-submit-guide",{val:C.value})},ee=(e,t,i,s)=>62==C.value||0!=e&&(2==e||s==t-1||(s+1<t?1!=i:void 0)),te=()=>{nextTick((()=>{S.value&&(S.value.scrollTop=S.value.scrollHeight)}))},ie=e=>{var t,i,n,a,r,o,l,h;if(0==e&&1==(null==(t=T.value)?void 0:t.main))return!0;if(1==e&&1==(null==(i=T.value)?void 0:i.chapter))return!0;const d=((null==(l=null==(o=null==(r=null==(a=null==(n=s.gameRef)?void 0:n.GameData)?void 0:a.infoData)?void 0:r.mission)?void 0:o.order)?void 0:l.OrderMissionInfo)||[]).some((e=>"1"==e.status));return!(2!=e||1!=(null==(h=T.value)?void 0:h.order)&&!d)},se=(e,t)=>{const i=`${t}-${e}`;O.value==i?(O.value=null,M.value=!1):(M.value=!0,O.value=i)},ne=()=>{O.value=null,M.value=!1},ae=e=>Object.values(e).every((e=>1==e)),re=()=>{$.value&&clearTimeout($.value),$.value=setTimeout((()=>{navigator.onLine||(k.value=!1)}),1e4)},oe=()=>{k.value||_.value||38!=C.value&&60!=C.value&&61!=C.value&&62!=C.value||(62==C.value?(C.value=0,EventBus.emit("task-submit-guide",{val:62})):EventBus.emit("task-submit-guide",{val:C.value}))},le=e=>{const{commodity:t}=e;(null==t?void 0:t.id)&&0!=(null==t?void 0:t.id)&&(V.value=t,E.value=!0)};function he(){setTimeout((()=>{!inGame()&&isVueMobile()&&toggleFullScreen()}),100)}return(e,t)=>{var a,r,T,_,$,G,A,B,L,F,j,K,Z,te,re,de,ce,ue,pe,ge,me,fe,ve,be,ye,Ce,xe,Se;return n.value?(openBlock(),createElementBlock("div",{key:0,class:"task-panel",ref_key:"changeZindex",ref:f,onClick:he},[t[14]||(t[14]=createBaseVNode("div",{class:"task-bg-img"},null,-1)),createBaseVNode("div",_hoisted_1,[createBaseVNode("div",{class:"task-box",style:normalizeStyle(z.value)},[createBaseVNode("div",{class:"task-close",style:normalizeStyle({height:W(50),width:W(50),zIndex:41==C.value?21:1}),onClick:Q},[createBaseVNode("img",{style:normalizeStyle({width:W(26)}),src:_imports_0$1},null,4)],4),createBaseVNode("div",{class:"task-all-title",style:normalizeStyle({fontSize:W(30),width:W(160)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_51")),5),createBaseVNode("div",_hoisted_2,[createBaseVNode("img",{style:normalizeStyle({height:W(30)}),src:_imports_1$2},null,4)]),createBaseVNode("div",_hoisted_3,[(openBlock(),createElementBlock(Fragment,null,renderList(i,((e,t)=>withDirectives(createBaseVNode("div",{class:normalizeClass(["task-tab",{active:o.value===t}]),key:t,onClick:e=>Y(t)},[createBaseVNode("span",{style:normalizeStyle({fontSize:W(20)})},toDisplayString(unref(instance).t(e)),5),ie(t)?(openBlock(),createElementBlock("img",_hoisted_5)):createCommentVNode("",!0)],10,_hoisted_4),[[vShow,2!==t||2===t&&w.value>2]]))),64))]),createBaseVNode("div",{class:"task-bg",style:normalizeStyle([D.value["task-bg1"],{backgroundImage:"url('assets/task/tab_frame_framepanel1.png')"}])},null,4),createBaseVNode("div",{class:"task-bg",style:normalizeStyle([D.value["task-bg2"],{backgroundImage:"url('assets/task/tab_frame_framepanel2.png')"}])},null,4),createBaseVNode("div",_hoisted_6,[2!==o.value?(openBlock(),createElementBlock("div",{key:0,class:"task-one-bg",ref_key:"scrollContainer",ref:d},[withDirectives(createBaseVNode("div",{class:"task-title-box",style:normalizeStyle({top:W(7)})},[createBaseVNode("div",{class:"task-title",style:normalizeStyle({fontSize:W(24)})},toDisplayString(null==(a=u.value)?void 0:a.chapterName),5),createBaseVNode("div",{class:"task-collectsd",style:normalizeStyle({fontSize:W(22)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_55",{num:null==(r=u.value)?void 0:r.completedQuests}))+"/"+toDisplayString(null==(T=u.value)?void 0:T.totalQuests),5)],4),[[vShow,1===o.value]]),withDirectives(createBaseVNode("div",_hoisted_7,null,512),[[vShow,1===o.value]]),(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,((e,i)=>{var s,n,a;return openBlock(),createElementBlock("div",{class:"task-content",key:i,style:normalizeStyle({backgroundImage:"1"==e.iStatus?"url(assets/task/tab_frame_framepanel4.png)":"url(assets/task/tab_frame_framepanel3.png)"})},[createBaseVNode("div",{class:"content-top",style:normalizeStyle({opacity:2==(null==e?void 0:e.iStatus)?"0.5":"1"})},[createBaseVNode("div",{class:"content-top-title",style:normalizeStyle({fontSize:W(26),textDecoration:0!=(null==(s=null==e?void 0:e.commodity)?void 0:s.id)?"underline":"none",textUnderlineOffset:0!=(null==(n=null==e?void 0:e.commodity)?void 0:n.id)?W(6):0}),onClick:t=>le(e),dir:I.value?"rtl":"ltr"},toDisplayString(null==e?void 0:e.questName),13,_hoisted_8),createBaseVNode("div",_hoisted_9,[createBaseVNode("div",{class:"content-info-progress",style:normalizeStyle({borderWidth:W(3)})},[createBaseVNode("span",{style:normalizeStyle({fontSize:W(22)})},toDisplayString(null==e?void 0:e.currentProgress)+" / "+toDisplayString(null==e?void 0:e.totalProgress),5)],4),createBaseVNode("div",{style:normalizeStyle({fontSize:W(22)}),dir:I.value?"rtl":"ltr",class:"content-info-text",onClick:t=>le(e)},toDisplayString(null==e?void 0:e.description),13,_hoisted_10)])],4),createBaseVNode("img",{class:"content-line",style:normalizeStyle({opacity:2==(null==e?void 0:e.iStatus)?"0.5":"1"}),src:"0"==o.value?"assets/task/line_information6.png":"assets/task/line_information5.png"},null,12,_hoisted_11),createBaseVNode("div",_hoisted_12,[createBaseVNode("div",{class:"exchange-goods",style:normalizeStyle({opacity:2==(null==e?void 0:e.iStatus)?"0.5":"1"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rewards,((e,s)=>(openBlock(),createElementBlock("div",{class:"exchange-goods-list",key:s,onClick:e=>se(s,i)},[createBaseVNode("img",{src:`assets/task/${unref(GameConfig).Data.TaskRewardIcon[null==e?void 0:e.rewardId]}`},null,8,_hoisted_14),createBaseVNode("span",{style:normalizeStyle({fontSize:W(16)})},toDisplayString(null==e?void 0:e.rewardAmount),5),O.value==`${i}-${s}`?(openBlock(),createElementBlock("div",{key:0,class:"prop-box",style:normalizeStyle({padding:`${W(3)} ${W(4)}`,height:W(46),bottom:W(-28),fontSize:W(20)})},[createBaseVNode("div",{class:"prop-line",style:normalizeStyle({padding:`0 ${W(4)}`})},[t[6]||(t[6]=createBaseVNode("img",{class:"prop-line-left",src:_imports_3},null,-1)),createBaseVNode("div",{class:"prop-line-text",style:normalizeStyle({padding:`0 ${W(10)}`})},toDisplayString(unref(instance).t(`${unref(GameConfig).Data.TaskPropName[null==e?void 0:e.rewardId]}`)),5),t[7]||(t[7]=createBaseVNode("img",{class:"prop-line-right",src:_imports_3},null,-1))],4)],4)):createCommentVNode("",!0)],8,_hoisted_13)))),128))],4),createBaseVNode("img",{class:"exchange-goods-submit",style:normalizeStyle({height:W(90),transform:2==(null==e?void 0:e.iStatus)?"scale(1.6)":"scale(1)",zIndex:39==C.value&&0==i?"21":"1"}),src:(a=null==e?void 0:e.iStatus,0==a?"assets/task/btn_go2.png":1==a?"assets/task/btn_confirm2.png":2==a?"assets/task/btn_confirm6_big.png":void 0),onClick:t=>X(e.iStatus,e.questId,e.iSystemJumpId)},null,12,_hoisted_15)]),1==(null==e?void 0:e.iStatus)?(openBlock(),createElementBlock("img",_hoisted_16)):createCommentVNode("",!0)],4)})),128)),t[8]||(t[8]=createBaseVNode("div",{class:"task-main-mask"},null,-1))],512)):createCommentVNode("",!0),2===o.value?(openBlock(),createElementBlock("div",_hoisted_17,[createBaseVNode("div",_hoisted_18,[(openBlock(!0),createElementBlock(Fragment,null,renderList(p.value,((e,t)=>{var i,s,n;return openBlock(),createElementBlock("div",{class:normalizeClass(["order-tab",{active:l.value===t}]),key:t,onClick:e=>(e=>{l.value!=e&&(J("Play_UI_click2"),l.value=e,(async()=>{var e,t;const i=null==(e=p.value)?void 0:e[l.value];console.log(" -------",i),g.value=i,y.value={publisher:i.publisher,publisherDesc:i.publisherDesc,publisherTitle:i.publisherTitle},(null==(t=p.value[l.value])?void 0:t.yellowDot)&&N(null==i?void 0:i.finishedTaskNum,null==i?void 0:i.taskId)})())})(t),style:normalizeStyle({opacity:ae((null==e?void 0:e.claimedRewards)||{})?"0.5":"1"})},[(null==e?void 0:e.yellowDot)||1==e.status?(openBlock(),createElementBlock("img",{key:0,class:"order-tab-yellow",style:normalizeStyle({top:W(-12)}),src:_imports_2$1},null,4)):createCommentVNode("",!0),ae((null==e?void 0:e.claimedRewards)||{})?(openBlock(),createElementBlock("img",_hoisted_20)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_21,[createBaseVNode("img",{class:"order-tab-img",src:`assets/task/${null==(n=null==(s=null==(i=unref(GameConfig))?void 0:i.Data)?void 0:s.Publisher)?void 0:n[null==e?void 0:e.publisher]}`},null,8,_hoisted_22)]),createBaseVNode("div",{class:"order-tab-title",dir:I.value?"rtl":"ltr",style:normalizeStyle(U(t).value)},toDisplayString(null==e?void 0:e.taskName),13,_hoisted_23)],14,_hoisted_19)})),128))]),createBaseVNode("div",{class:"order-detail",ref_key:"orderDetailRef",ref:S},[createBaseVNode("div",_hoisted_24,[withDirectives(createBaseVNode("div",{class:"detail-title-img",style:normalizeStyle({height:W(145)}),onClick:q},[createBaseVNode("img",{src:`assets/task/${null==(A=null==($=null==(_=unref(GameConfig))?void 0:_.Data)?void 0:$.Publisher)?void 0:A[null==(G=g.value)?void 0:G.publisher]}`},null,8,_hoisted_25),(null==(B=g.value)?void 0:B.description)?(openBlock(),createElementBlock("img",{key:0,class:"detail-info-img",src:_imports_5,onClick:q,style:normalizeStyle({width:W(24),height:W(24)})},null,4)):createCommentVNode("",!0)],4),[[vShow,JSON.stringify(null==(L=g.value)?void 0:L.publisher)]]),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",{class:"detail-info-title",dir:I.value?"rtl":"ltr",style:normalizeStyle({fontSize:W(26)})},toDisplayString(null==(F=g.value)?void 0:F.taskName),13,_hoisted_27),createBaseVNode("div",{class:"detail-info",dir:I.value?"rtl":"ltr",style:normalizeStyle({fontSize:W(20),lineHeight:W(30),height:W(92),paddingRight:W(10)})},[createBaseVNode("span",null,toDisplayString(null==(j=g.value)?void 0:j.description),1)],12,_hoisted_28),createBaseVNode("div",{class:"detail-info-mask",style:normalizeStyle({height:W(40)})},null,4)])]),createBaseVNode("div",_hoisted_29,[(openBlock(!0),createElementBlock(Fragment,null,renderList(null==(K=g.value)?void 0:K.subTasks,((e,t)=>{return openBlock(),createElementBlock("div",{class:"detail-task",key:t,style:normalizeStyle({backgroundImage:(null==e?void 0:e.subTaskId)?"url(assets/task/frame_Star_rating_completed1.png)":"url(assets/task/frame_Star_rating_normal.png)",zIndex:61==C.value&&0==t?20:1})},[(null==e?void 0:e.subTaskId)?(openBlock(),createElementBlock("div",{key:0,class:"detail-task-press",style:normalizeStyle({fontSize:W(20)})},[(i=e.completedProgress,s=e.totalProgress,`${i}${s}`.length>3?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(Math.round(e.completedProgress/e.totalProgress*100))+"% ",1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(e.completedProgress),1),createBaseVNode("span",null,"/"+toDisplayString(e.totalProgress),1)],64)))],4)):createCommentVNode("",!0),createBaseVNode("div",{class:"detail-task-title",style:normalizeStyle({fontSize:W(20),color:(null==e?void 0:e.subTaskId)?"#845fbb":"#ac947b"})},toDisplayString((null==e?void 0:e.subTaskId)?null==e?void 0:e.subTaskName:"??????"),5),createBaseVNode("img",{style:normalizeStyle({width:(null==e?void 0:e.subTaskId)&&!(null==e?void 0:e.isCompleted)?"7%":"6%",transform:(null==e?void 0:e.subTaskId)&&!(null==e?void 0:e.isCompleted)?"translate(9%, 0px)":"translate(0, 0)"}),src:H(e)},null,12,_hoisted_30)],4);var i,s})),128))]),(null==(Z=g.value)?void 0:Z.description)?(openBlock(),createElementBlock("img",_hoisted_31)):createCommentVNode("",!0),createBaseVNode("div",{class:"detail-reward-box",ref_key:"rewardBoxRef",ref:R,style:normalizeStyle({zIndex:62==C.value?20:1})},[createBaseVNode("div",_hoisted_32,[(openBlock(!0),createElementBlock(Fragment,null,renderList(null==(te=g.value)?void 0:te.rewards,((e,i)=>{var s,n,a,r,o,l,h;return openBlock(),createElementBlock("div",{class:"detail-reward",key:i,style:normalizeStyle({height:W(75),opacity:ee(g.value.status,null==(s=g.value)?void 0:s.starRating,null==(a=null==(n=g.value)?void 0:n.claimedRewards)?void 0:a[i+1],i)?1:.5,backgroundImage:ee(g.value.status,null==(r=g.value)?void 0:r.starRating,null==(l=null==(o=g.value)?void 0:o.claimedRewards)?void 0:l[i+1],i)?"url(assets/task/frame_Star_rating2_completed.png)":"url(assets/task/frame_Star_rating2_normal.png)"})},[createBaseVNode("div",_hoisted_33,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i+1,(e=>(openBlock(),createElementBlock("img",{src:_imports_7,key:e})))),128))]),createBaseVNode("div",_hoisted_34,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e,((e,s)=>{var n;return openBlock(),createElementBlock("div",{class:"reward-content-list",key:s,style:normalizeStyle({width:W(68),height:W(68)}),onClick:e=>se(s,i)},[createBaseVNode("img",{class:"reward-content-list-img",src:`assets/task/${unref(GameConfig).Data.TaskRewardIcon[null==e?void 0:e.rewardId]}`},null,8,_hoisted_36),createBaseVNode("span",{style:normalizeStyle({fontSize:W(16)})},toDisplayString(null==e?void 0:e.rewardAmount),5),1==(null==(n=g.value)?void 0:n.claimedRewards[i+1])?(openBlock(),createElementBlock("img",_hoisted_37)):createCommentVNode("",!0),O.value==`${i}-${s}`?(openBlock(),createElementBlock("div",{key:1,class:"prop-box",style:normalizeStyle({padding:`${W(3)} ${W(4)}`,height:W(46),top:W(-30),fontSize:W(20)})},[createBaseVNode("div",{class:"prop-line",style:normalizeStyle({padding:`0 ${W(4)}`})},[t[9]||(t[9]=createBaseVNode("img",{class:"prop-line-left",src:_imports_3},null,-1)),createBaseVNode("div",{class:"prop-line-text",style:normalizeStyle({padding:`0 ${W(10)}`})},toDisplayString(unref(instance).t(`${unref(GameConfig).Data.TaskPropName[null==e?void 0:e.rewardId]}`)),5),t[10]||(t[10]=createBaseVNode("img",{class:"prop-line-right",src:_imports_3},null,-1))],4)],4)):createCommentVNode("",!0)],12,_hoisted_35)})),128))]),createBaseVNode("div",{class:"detail-reward-bg",style:normalizeStyle({backgroundImage:(null==(h=g.value)?void 0:h.starRating)==i+1?"url(assets/task/itme_maks2.png)":"url(assets/task/itme_maks1.png)",right:W(6),width:W(60),height:W(68),top:W(6)})},null,4)],4)})),128))]),withDirectives(createBaseVNode("div",_hoisted_38,[createBaseVNode("div",{class:"reward-but-box",style:normalizeStyle({backgroundImage:(Se=null==(re=g.value)?void 0:re.status,null==(de=g.value)||de.starRating,0==Se?"url(assets/task/btn_not_accomplish.png)":1==Se?"url(assets/task/btn_go_frame.png)":void 0),color:"0"==(null==(ce=g.value)?void 0:ce.status)?"#efefef":"#ffffff"}),onClick:t[0]||(t[0]=e=>{var t,i,s;return X(null==(t=g.value)?void 0:t.status,null==(i=g.value)?void 0:i.taskId,null==(s=g.value)?void 0:s.iSystemJumpId)})},[createBaseVNode("span",{style:normalizeStyle({fontSize:W(22)})},toDisplayString(unref(instance).t("Event_5_C2_Pandora_57")),5)],4),1==(null==(ue=g.value)?void 0:ue.status)?(openBlock(),createElementBlock("img",_hoisted_39)):createCommentVNode("",!0)],512),[[vShow,"0"==(null==(pe=g.value)?void 0:pe.status)||"1"==(null==(ge=g.value)?void 0:ge.status)]]),withDirectives(createBaseVNode("div",_hoisted_40,t[11]||(t[11]=[createBaseVNode("img",{src:_imports_9},null,-1)]),512),[[vShow,"2"==(null==(me=g.value)?void 0:me.status)]])],4)],512),t[12]||(t[12]=createBaseVNode("div",{class:"task-mask"},null,-1))])):createCommentVNode("",!0)]),C.value>36&&C.value<63&&n.value&&0==(null==(be=null==(ve=null==(fe=s.gameRef)?void 0:fe.GameData)?void 0:ve.guideData)?void 0:be.isCompleted)?(openBlock(),createElementBlock("div",_hoisted_41,[createVNode(Guide,{"get-font-size":W,step:C.value,tips:x.value,onUpdateStep:t[1]||(t[1]=e=>C.value=e),onStep:oe,rewardBoxRef:R.value,isRTL:I.value},null,8,["step","tips","rewardBoxRef","isRTL"]),createBaseVNode("div",{class:"step-mask",onClick:oe})])):createCommentVNode("",!0),withDirectives(createBaseVNode("div",_hoisted_42,[createBaseVNode("img",{class:"task-loading-img",style:normalizeStyle({width:W(100)}),src:_imports_10},null,4)],512),[[vShow,k.value]])],4),createVNode(MessagePop,{showPop:h.value,onUpdateShowPop:t[2]||(t[2]=e=>h.value=e),"get-font-size":W,tipsMsg:P.value,isRTL:I.value},null,8,["showPop","tipsMsg","isRTL"]),createVNode(RewardPop,{showPop:m.value,onUpdateShowPop:t[3]||(t[3]=e=>m.value=e),"get-font-size":W,rewardsList:v.value,gameItemSeetings:null==(Ce=null==(ye=s.gameRef)?void 0:ye.GameData)?void 0:Ce.gameItemSeetings},null,8,["showPop","rewardsList","gameItemSeetings"]),createVNode(Dialogue,{showPop:b.value,onUpdateShowPop:t[4]||(t[4]=e=>b.value=e),lodueInfo:y.value,"get-font-size":W,isRTL:I.value},null,8,["showPop","lodueInfo","isRTL"]),createVNode(DetailDialog,{showPop:E.value,onUpdateShowPop:t[5]||(t[5]=e=>E.value=e),plantInfo:V.value,"get-font-size":W,isRTL:I.value},null,8,["showPop","plantInfo","isRTL"])]),withDirectives(createBaseVNode("div",{onClick:ne,class:"mission-mask"},null,512),[[vShow,M.value]]),withDirectives(createBaseVNode("div",_hoisted_43,null,512),[[vShow,k.value]]),withDirectives(createBaseVNode("div",null,[t[13]||(t[13]=createStaticVNode('<img src="'+_imports_11+'" data-v-8001018b><img src="'+_imports_12+'" data-v-8001018b><img src="'+_imports_13+'" data-v-8001018b><img src="'+_imports_14+'" data-v-8001018b><img src="'+_imports_15+'" data-v-8001018b><img src="'+_imports_16+'" data-v-8001018b><img src="'+_imports_17+'" data-v-8001018b><img src="'+_imports_18+'" data-v-8001018b><img src="'+_imports_19+'" data-v-8001018b><img src="'+_imports_20+'" data-v-8001018b><img src="'+_imports_21+'" data-v-8001018b><img src="'+_imports_22+'" data-v-8001018b><img src="'+_imports_23+'" data-v-8001018b><img src="'+_imports_24+'" data-v-8001018b><img src="'+_imports_9+'" data-v-8001018b><img src="'+_imports_2$1+'" data-v-8001018b><img src="'+_imports_25+'" data-v-8001018b><img src="'+_imports_3+'" data-v-8001018b><img src="'+_imports_26+'" data-v-8001018b>',19)),(null==(xe=p.value)?void 0:xe.length)?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(p.value,((e,t)=>{var i,s,n;return openBlock(),createElementBlock("div",null,[createBaseVNode("img",{src:`assets/task/${null==(n=null==(s=null==(i=unref(GameConfig))?void 0:i.Data)?void 0:s.Publisher)?void 0:n[null==e?void 0:e.publisher]}`},null,8,_hoisted_44)])})),256)):createCommentVNode("",!0)],512),[[vShow,!1]])],512)):createCommentVNode("",!0)}}},TaskView=_export_sfc(_sfc_main$1,[["__scopeId","data-v-8001018b"]]),_sfc_main={__name:"App",setup(e){const t=ref(),i=ref();ref({x:0,y:0});const s=ref();onMounted((()=>{var e,t,n;if(s.value=toRaw(null==(e=i.value)?void 0:e.game),(null==(t=i.value)?void 0:t.$el)&&(i.value.$el.style.zIndex=100),inGame()){const e=(null==(n=getUrlParams())?void 0:n.sLanguage)||"en_US";"en"==e?instance.changeLanguage("en_US"):instance.changeLanguage(e)}else{const e=localStorage.getItem("languageKey")||"en_US";"en"==e?instance.changeLanguage("en_US"):instance.changeLanguage(e)}}));const n=e=>{t.value="MainMenu"!==e.scene.key};return(e,t)=>(openBlock(),createElementBlock(Fragment,null,[t[0]||(t[0]=createBaseVNode("div",{class:"background"},null,-1)),createVNode(_sfc_main$9,{ref_key:"phaserRef",ref:i,onCurrentActiveScene:n},null,512),createVNode(Announcement,{gameRef:s.value},null,8,["gameRef"]),createVNode(RuleDialog),createVNode(TaskView,{gameRef:s.value},null,8,["gameRef"])],64))}},App=_export_sfc(_sfc_main,[["__scopeId","data-v-32e48e4e"]]);function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hasXMLHttpRequest(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":_typeof$2(XMLHttpRequest))}function isPromise(e){return!!e&&"function"==typeof e.then}function makePromise(e){return isPromise(e)?e:Promise.resolve(e)}const scriptRel="modulepreload",assetsURL=function(e,t){return new URL(e,t).href},seen={},__vitePreload=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};const n=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),r=(null==a?void 0:a.nonce)||(null==a?void 0:a.getAttribute("nonce"));s=e(t.map((e=>{if((e=assetsURL(e,i))in seen)return;seen[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(i)for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":scriptRel,t||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),t?new Promise(((t,i)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>i(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))};function ownKeys$1(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(i),!0).forEach((function(t){_defineProperty$1(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys$1(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _defineProperty$1(e,t,i){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==_typeof$1(t)?t:t+""}function _toPrimitive$1(e,t){if("object"!=_typeof$1(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t);if("object"!=_typeof$1(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fetchApi="function"==typeof fetch?fetch:void 0,XmlHttpRequestApi,ActiveXObjectApi;if("undefined"!=typeof global&&global.fetch?fetchApi=global.fetch:"undefined"!=typeof window&&window.fetch&&(fetchApi=window.fetch),hasXMLHttpRequest()&&("undefined"!=typeof global&&global.XMLHttpRequest?XmlHttpRequestApi=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(XmlHttpRequestApi=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?ActiveXObjectApi=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(ActiveXObjectApi=window.ActiveXObject)),"function"!=typeof fetchApi&&(fetchApi=void 0),!fetchApi&&!XmlHttpRequestApi&&!ActiveXObjectApi)try{__vitePreload((()=>import("./browser-ponyfill-CS-IC1Gz.js").then((e=>e.b))),__vite__mapDeps([0,1]),import.meta.url).then((function(e){fetchApi=e.default})).catch((function(){}))}catch(e){}var addQueryString=function(e,t){if(t&&"object"===_typeof$1(t)){var i="";for(var s in t)i+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t[s]);if(!i)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+i.slice(1)}return e},fetchIt=function(e,t,i,s){var n=function(e){if(!e.ok)return i(e.statusText||"Error",{status:e.status});e.text().then((function(t){i(null,{status:e.status,data:t})})).catch(i)};if(s){var a=s(e,t);if(a instanceof Promise)return void a.then(n).catch(i)}"function"==typeof fetch?fetch(e,t).then(n).catch(i):fetchApi(e,t).then(n).catch(i)},omitFetchOptions=!1,requestWithFetch=function(t,i,s,n){t.queryStringParams&&(i=addQueryString(i,t.queryStringParams));var a=_objectSpread$1({},"function"==typeof t.customHeaders?t.customHeaders():t.customHeaders);"undefined"==typeof window&&"undefined"!=typeof global&&void 0!==global.process&&global.process.versions&&global.process.versions.node&&(a["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),s&&(a["Content-Type"]="application/json");var r="function"==typeof t.requestOptions?t.requestOptions(s):t.requestOptions,o=_objectSpread$1({method:s?"POST":"GET",body:s?t.stringify(s):void 0,headers:a},omitFetchOptions?{}:r),l="function"==typeof t.alternateFetch&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{fetchIt(i,o,n,l)}catch(e){if(!r||0===Object.keys(r).length||!e.message||e.message.indexOf("not implemented")<0)return n(e);try{Object.keys(r).forEach((function(e){delete o[e]})),fetchIt(i,o,n,l),omitFetchOptions=!0}catch(h){n(h)}}},requestWithXmlHttpRequest=function(t,i,s,n){s&&"object"===_typeof$1(s)&&(s=addQueryString("",s).slice(1)),t.queryStringParams&&(i=addQueryString(i,t.queryStringParams));try{var a=XmlHttpRequestApi?new XmlHttpRequestApi:new ActiveXObjectApi("MSXML2.XMLHTTP.3.0");a.open(s?"POST":"GET",i,1),t.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!t.withCredentials,s&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var r=t.customHeaders;if(r="function"==typeof r?r():r)for(var o in r)a.setRequestHeader(o,r[o]);a.onreadystatechange=function(){a.readyState>3&&n(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(s)}catch(e){console&&console.log(e)}},request=function(e,t,i,s){return"function"==typeof i&&(s=i,i=void 0),s=s||function(){},fetchApi&&0!==t.indexOf("file:")?requestWithFetch(e,t,i,s):hasXMLHttpRequest()||"function"==typeof ActiveXObject?requestWithXmlHttpRequest(e,t,i,s):void s(new Error("No fetch and no xhr implementation found!"))};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach((function(t){_defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_toPropertyKey(s.key),s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t);if("object"!=_typeof(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var getDefaults=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,i){return _defineProperty({},t,i||"")},parseLoadPayload:function(e,t){},request:request,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Backend=_createClass((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.services=t,this.options=i,this.allOptions=s,this.type="backend",this.init(t,i,s)}),[{key:"init",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=_objectSpread(_objectSpread(_objectSpread({},getDefaults()),this.options||{}),i),this.allOptions=s,this.services&&this.options.reloadInterval){var n=setInterval((function(){return t.reload()}),this.options.reloadInterval);"object"===_typeof(n)&&"function"==typeof n.unref&&n.unref()}}},{key:"readMulti",value:function(e,t,i){this._readAny(e,e,t,t,i)}},{key:"read",value:function(e,t,i){this._readAny([e],e,[t],t,i)}},{key:"_readAny",value:function(e,t,i,s,n){var a=this,r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath(e,i)),(r=makePromise(r)).then((function(r){if(!r)return n(null,{});var o=a.services.interpolator.interpolate(r,{lng:e.join("+"),ns:i.join("+")});a.loadUrl(o,n,t,s)}))}},{key:"loadUrl",value:function(t,i,s,n){var a=this,r="string"==typeof s?[s]:s,o="string"==typeof n?[n]:n,l=this.options.parseLoadPayload(r,o);this.options.request(this.options,t,l,(function(r,o){if(o&&(o.status>=500&&o.status<600||!o.status))return i("failed loading "+t+"; status code: "+o.status,!0);if(o&&o.status>=400&&o.status<500)return i("failed loading "+t+"; status code: "+o.status,!1);if(!o&&r&&r.message){var l=r.message.toLowerCase();if(["failed","fetch","network","load"].find((function(e){return l.indexOf(e)>-1})))return i("failed loading "+t+": "+r.message,!0)}if(r)return i(r,!1);var h,d;try{h="string"==typeof o.data?a.options.parse(o.data,s,n):o.data}catch(e){d="failed parsing "+t+" to json"}if(d)return i(d,!1);i(null,h)}))}},{key:"create",value:function(e,t,i,s,n){var a=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var r=this.options.parsePayload(t,i,s),o=0,l=[],h=[];e.forEach((function(i){var s=a.options.addPath;"function"==typeof a.options.addPath&&(s=a.options.addPath(i,t));var d=a.services.interpolator.interpolate(s,{lng:i,ns:t});a.options.request(a.options,d,r,(function(t,i){o+=1,l.push(t),h.push(i),o===e.length&&"function"==typeof n&&n(l,h)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,i=t.backendConnector,s=t.languageUtils,n=t.logger,a=i.language;if(!a||"cimode"!==a.toLowerCase()){var r=[],o=function(e){s.toResolveHierarchy(e).forEach((function(e){r.indexOf(e)<0&&r.push(e)}))};o(a),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return o(e)})),r.forEach((function(t){e.allOptions.ns.forEach((function(e){i.read(t,e,"read",null,null,(function(s,a){s&&n.warn("loading namespace ".concat(e," for language ").concat(t," failed"),s),!s&&a&&n.log("loaded namespace ".concat(e," for language ").concat(t),a),i.loaded("".concat(t,"|").concat(e),s,a)}))}))}))}}}]);Backend.type="backend";let lang=navigator.language||"en";api.get("language")?lang=api.get("language"):api.set("language",lang,{domain:".leagueoflegends.com"}),console.log("language",lang),instance.use(Backend).init({lng:lang,fallbackLng:"en",backend:{loadPath:"assets/i18n/{{lng}}.json"}}),createApp(App).mount("#app");